function xy(a,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const d in o)if(d!=="default"&&!(d in a)){const h=Object.getOwnPropertyDescriptor(o,d);h&&Object.defineProperty(a,d,h.get?h:{enumerable:!0,get:()=>o[d]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function r(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(d){if(d.ep)return;d.ep=!0;const h=r(d);fetch(d.href,h)}})();var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function id(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Tb(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var t=a.default;if(typeof t=="function"){var r=function o(){var d=!1;try{d=this instanceof o}catch{}return d?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(a).forEach(function(o){var d=Object.getOwnPropertyDescriptor(a,o);Object.defineProperty(r,o,d.get?d:{enumerable:!0,get:function(){return a[o]}})}),r}var ff={exports:{}},Ql={};var dp;function jb(){if(dp)return Ql;dp=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(o,d,h){var x=null;if(h!==void 0&&(x=""+h),d.key!==void 0&&(x=""+d.key),"key"in d){h={};for(var b in d)b!=="key"&&(h[b]=d[b])}else h=d;return d=h.ref,{$$typeof:a,type:o,key:x,ref:d!==void 0?d:null,props:h}}return Ql.Fragment=t,Ql.jsx=r,Ql.jsxs=r,Ql}var hp;function Rb(){return hp||(hp=1,ff.exports=jb()),ff.exports}var l=Rb(),gf={exports:{}},bt={};var fp;function Ob(){if(fp)return bt;fp=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),T=Symbol.iterator;function j(ne){return ne===null||typeof ne!="object"?null:(ne=T&&ne[T]||ne["@@iterator"],typeof ne=="function"?ne:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,D={};function H(ne,ye,Le){this.props=ne,this.context=ye,this.refs=D,this.updater=Le||I}H.prototype.isReactComponent={},H.prototype.setState=function(ne,ye){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,ye,"setState")},H.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function U(){}U.prototype=H.prototype;function P(ne,ye,Le){this.props=ne,this.context=ye,this.refs=D,this.updater=Le||I}var K=P.prototype=new U;K.constructor=P,k(K,H.prototype),K.isPureReactComponent=!0;var Z=Array.isArray;function Y(){}var V={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function q(ne,ye,Le){var Ue=Le.ref;return{$$typeof:a,type:ne,key:ye,ref:Ue!==void 0?Ue:null,props:Le}}function ue(ne,ye){return q(ne.type,ye,ne.props)}function fe(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===a}function ie(ne){var ye={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Le){return ye[Le]})}var be=/\/+/g;function Re(ne,ye){return typeof ne=="object"&&ne!==null&&ne.key!=null?ie(""+ne.key):ye.toString(36)}function G(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(Y,Y):(ne.status="pending",ne.then(function(ye){ne.status==="pending"&&(ne.status="fulfilled",ne.value=ye)},function(ye){ne.status==="pending"&&(ne.status="rejected",ne.reason=ye)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function J(ne,ye,Le,Ue,Xe){var Ee=typeof ne;(Ee==="undefined"||Ee==="boolean")&&(ne=null);var $e=!1;if(ne===null)$e=!0;else switch(Ee){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(ne.$$typeof){case a:case t:$e=!0;break;case A:return $e=ne._init,J($e(ne._payload),ye,Le,Ue,Xe)}}if($e)return Xe=Xe(ne),$e=Ue===""?"."+Re(ne,0):Ue,Z(Xe)?(Le="",$e!=null&&(Le=$e.replace(be,"$&/")+"/"),J(Xe,ye,Le,"",function(Je){return Je})):Xe!=null&&(fe(Xe)&&(Xe=ue(Xe,Le+(Xe.key==null||ne&&ne.key===Xe.key?"":(""+Xe.key).replace(be,"$&/")+"/")+$e)),ye.push(Xe)),1;$e=0;var De=Ue===""?".":Ue+":";if(Z(ne))for(var Ce=0;Ce<ne.length;Ce++)Ue=ne[Ce],Ee=De+Re(Ue,Ce),$e+=J(Ue,ye,Le,Ee,Xe);else if(Ce=j(ne),typeof Ce=="function")for(ne=Ce.call(ne),Ce=0;!(Ue=ne.next()).done;)Ue=Ue.value,Ee=De+Re(Ue,Ce++),$e+=J(Ue,ye,Le,Ee,Xe);else if(Ee==="object"){if(typeof ne.then=="function")return J(G(ne),ye,Le,Ue,Xe);throw ye=String(ne),Error("Objects are not valid as a React child (found: "+(ye==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":ye)+"). If you meant to render a collection of children, use an array instead.")}return $e}function oe(ne,ye,Le){if(ne==null)return ne;var Ue=[],Xe=0;return J(ne,Ue,"","",function(Ee){return ye.call(Le,Ee,Xe++)}),Ue}function ke(ne){if(ne._status===-1){var ye=ne._result;ye=ye(),ye.then(function(Le){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Le)},function(Le){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Le)}),ne._status===-1&&(ne._status=0,ne._result=ye)}if(ne._status===1)return ne._result.default;throw ne._result}var Ve=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ye=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(ye))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},Ke={map:oe,forEach:function(ne,ye,Le){oe(ne,function(){ye.apply(this,arguments)},Le)},count:function(ne){var ye=0;return oe(ne,function(){ye++}),ye},toArray:function(ne){return oe(ne,function(ye){return ye})||[]},only:function(ne){if(!fe(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return bt.Activity=N,bt.Children=Ke,bt.Component=H,bt.Fragment=r,bt.Profiler=d,bt.PureComponent=P,bt.StrictMode=o,bt.Suspense=C,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,bt.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return V.H.useMemoCache(ne)}},bt.cache=function(ne){return function(){return ne.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(ne,ye,Le){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var Ue=k({},ne.props),Xe=ne.key;if(ye!=null)for(Ee in ye.key!==void 0&&(Xe=""+ye.key),ye)!$.call(ye,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ye.ref===void 0||(Ue[Ee]=ye[Ee]);var Ee=arguments.length-2;if(Ee===1)Ue.children=Le;else if(1<Ee){for(var $e=Array(Ee),De=0;De<Ee;De++)$e[De]=arguments[De+2];Ue.children=$e}return q(ne.type,Xe,Ue)},bt.createContext=function(ne){return ne={$$typeof:x,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:h,_context:ne},ne},bt.createElement=function(ne,ye,Le){var Ue,Xe={},Ee=null;if(ye!=null)for(Ue in ye.key!==void 0&&(Ee=""+ye.key),ye)$.call(ye,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(Xe[Ue]=ye[Ue]);var $e=arguments.length-2;if($e===1)Xe.children=Le;else if(1<$e){for(var De=Array($e),Ce=0;Ce<$e;Ce++)De[Ce]=arguments[Ce+2];Xe.children=De}if(ne&&ne.defaultProps)for(Ue in $e=ne.defaultProps,$e)Xe[Ue]===void 0&&(Xe[Ue]=$e[Ue]);return q(ne,Ee,Xe)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(ne){return{$$typeof:b,render:ne}},bt.isValidElement=fe,bt.lazy=function(ne){return{$$typeof:A,_payload:{_status:-1,_result:ne},_init:ke}},bt.memo=function(ne,ye){return{$$typeof:w,type:ne,compare:ye===void 0?null:ye}},bt.startTransition=function(ne){var ye=V.T,Le={};V.T=Le;try{var Ue=ne(),Xe=V.S;Xe!==null&&Xe(Le,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(Y,Ve)}catch(Ee){Ve(Ee)}finally{ye!==null&&Le.types!==null&&(ye.types=Le.types),V.T=ye}},bt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},bt.use=function(ne){return V.H.use(ne)},bt.useActionState=function(ne,ye,Le){return V.H.useActionState(ne,ye,Le)},bt.useCallback=function(ne,ye){return V.H.useCallback(ne,ye)},bt.useContext=function(ne){return V.H.useContext(ne)},bt.useDebugValue=function(){},bt.useDeferredValue=function(ne,ye){return V.H.useDeferredValue(ne,ye)},bt.useEffect=function(ne,ye){return V.H.useEffect(ne,ye)},bt.useEffectEvent=function(ne){return V.H.useEffectEvent(ne)},bt.useId=function(){return V.H.useId()},bt.useImperativeHandle=function(ne,ye,Le){return V.H.useImperativeHandle(ne,ye,Le)},bt.useInsertionEffect=function(ne,ye){return V.H.useInsertionEffect(ne,ye)},bt.useLayoutEffect=function(ne,ye){return V.H.useLayoutEffect(ne,ye)},bt.useMemo=function(ne,ye){return V.H.useMemo(ne,ye)},bt.useOptimistic=function(ne,ye){return V.H.useOptimistic(ne,ye)},bt.useReducer=function(ne,ye,Le){return V.H.useReducer(ne,ye,Le)},bt.useRef=function(ne){return V.H.useRef(ne)},bt.useState=function(ne){return V.H.useState(ne)},bt.useSyncExternalStore=function(ne,ye,Le){return V.H.useSyncExternalStore(ne,ye,Le)},bt.useTransition=function(){return V.H.useTransition()},bt.version="19.2.0",bt}var gp;function k0(){return gp||(gp=1,gf.exports=Ob()),gf.exports}var M=k0();const yy=id(M);var mf={exports:{}},Wl={},pf={exports:{}},xf={};var mp;function Ib(){return mp||(mp=1,(function(a){function t(J,oe){var ke=J.length;J.push(oe);e:for(;0<ke;){var Ve=ke-1>>>1,Ke=J[Ve];if(0<d(Ke,oe))J[Ve]=oe,J[ke]=Ke,ke=Ve;else break e}}function r(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var oe=J[0],ke=J.pop();if(ke!==oe){J[0]=ke;e:for(var Ve=0,Ke=J.length,ne=Ke>>>1;Ve<ne;){var ye=2*(Ve+1)-1,Le=J[ye],Ue=ye+1,Xe=J[Ue];if(0>d(Le,ke))Ue<Ke&&0>d(Xe,Le)?(J[Ve]=Xe,J[Ue]=ke,Ve=Ue):(J[Ve]=Le,J[ye]=ke,Ve=ye);else if(Ue<Ke&&0>d(Xe,ke))J[Ve]=Xe,J[Ue]=ke,Ve=Ue;else break e}}return oe}function d(J,oe){var ke=J.sortIndex-oe.sortIndex;return ke!==0?ke:J.id-oe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;a.unstable_now=function(){return h.now()}}else{var x=Date,b=x.now();a.unstable_now=function(){return x.now()-b}}var C=[],w=[],A=1,N=null,T=3,j=!1,I=!1,k=!1,D=!1,H=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function K(J){for(var oe=r(w);oe!==null;){if(oe.callback===null)o(w);else if(oe.startTime<=J)o(w),oe.sortIndex=oe.expirationTime,t(C,oe);else break;oe=r(w)}}function Z(J){if(k=!1,K(J),!I)if(r(C)!==null)I=!0,Y||(Y=!0,ie());else{var oe=r(w);oe!==null&&G(Z,oe.startTime-J)}}var Y=!1,V=-1,$=5,q=-1;function ue(){return D?!0:!(a.unstable_now()-q<$)}function fe(){if(D=!1,Y){var J=a.unstable_now();q=J;var oe=!0;try{e:{I=!1,k&&(k=!1,U(V),V=-1),j=!0;var ke=T;try{t:{for(K(J),N=r(C);N!==null&&!(N.expirationTime>J&&ue());){var Ve=N.callback;if(typeof Ve=="function"){N.callback=null,T=N.priorityLevel;var Ke=Ve(N.expirationTime<=J);if(J=a.unstable_now(),typeof Ke=="function"){N.callback=Ke,K(J),oe=!0;break t}N===r(C)&&o(C),K(J)}else o(C);N=r(C)}if(N!==null)oe=!0;else{var ne=r(w);ne!==null&&G(Z,ne.startTime-J),oe=!1}}break e}finally{N=null,T=ke,j=!1}oe=void 0}}finally{oe?ie():Y=!1}}}var ie;if(typeof P=="function")ie=function(){P(fe)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Re=be.port2;be.port1.onmessage=fe,ie=function(){Re.postMessage(null)}}else ie=function(){H(fe,0)};function G(J,oe){V=H(function(){J(a.unstable_now())},oe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(J){J.callback=null},a.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<J?Math.floor(1e3/J):5},a.unstable_getCurrentPriorityLevel=function(){return T},a.unstable_next=function(J){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var ke=T;T=oe;try{return J()}finally{T=ke}},a.unstable_requestPaint=function(){D=!0},a.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ke=T;T=J;try{return oe()}finally{T=ke}},a.unstable_scheduleCallback=function(J,oe,ke){var Ve=a.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Ve+ke:Ve):ke=Ve,J){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ke+Ke,J={id:A++,callback:oe,priorityLevel:J,startTime:ke,expirationTime:Ke,sortIndex:-1},ke>Ve?(J.sortIndex=ke,t(w,J),r(C)===null&&J===r(w)&&(k?(U(V),V=-1):k=!0,G(Z,ke-Ve))):(J.sortIndex=Ke,t(C,J),I||j||(I=!0,Y||(Y=!0,ie()))),J},a.unstable_shouldYield=ue,a.unstable_wrapCallback=function(J){var oe=T;return function(){var ke=T;T=oe;try{return J.apply(this,arguments)}finally{T=ke}}}})(xf)),xf}var pp;function Mb(){return pp||(pp=1,pf.exports=Ib()),pf.exports}var yf={exports:{}},Es={};var xp;function kb(){if(xp)return Es;xp=1;var a=k0();function t(C){var w="https://react.dev/errors/"+C;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)w+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+C+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(C,w,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:N==null?null:""+N,children:C,containerInfo:w,implementation:A}}var x=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(C,w){if(C==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Es.createPortal=function(C,w){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(t(299));return h(C,w,null,A)},Es.flushSync=function(C){var w=x.T,A=o.p;try{if(x.T=null,o.p=2,C)return C()}finally{x.T=w,o.p=A,o.d.f()}},Es.preconnect=function(C,w){typeof C=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,o.d.C(C,w))},Es.prefetchDNS=function(C){typeof C=="string"&&o.d.D(C)},Es.preinit=function(C,w){if(typeof C=="string"&&w&&typeof w.as=="string"){var A=w.as,N=b(A,w.crossOrigin),T=typeof w.integrity=="string"?w.integrity:void 0,j=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;A==="style"?o.d.S(C,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:N,integrity:T,fetchPriority:j}):A==="script"&&o.d.X(C,{crossOrigin:N,integrity:T,fetchPriority:j,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Es.preinitModule=function(C,w){if(typeof C=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var A=b(w.as,w.crossOrigin);o.d.M(C,{crossOrigin:A,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&o.d.M(C)},Es.preload=function(C,w){if(typeof C=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var A=w.as,N=b(A,w.crossOrigin);o.d.L(C,A,{crossOrigin:N,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Es.preloadModule=function(C,w){if(typeof C=="string")if(w){var A=b(w.as,w.crossOrigin);o.d.m(C,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:A,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else o.d.m(C)},Es.requestFormReset=function(C){o.d.r(C)},Es.unstable_batchedUpdates=function(C,w){return C(w)},Es.useFormState=function(C,w,A){return x.H.useFormState(C,w,A)},Es.useFormStatus=function(){return x.H.useHostTransitionStatus()},Es.version="19.2.0",Es}var yp;function Db(){if(yp)return yf.exports;yp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),yf.exports=kb(),yf.exports}var wp;function Lb(){if(wp)return Wl;wp=1;var a=Mb(),t=k0(),r=Db();function o(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var s=e,u=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(u=s.return),e=s.return;while(e)}return s.tag===3?u:null}function x(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function b(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function C(e){if(h(e)!==e)throw Error(o(188))}function w(e){var s=e.alternate;if(!s){if(s=h(e),s===null)throw Error(o(188));return s!==e?null:e}for(var u=e,m=s;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){u=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return C(v),e;if(_===m)return C(v),s;_=_.sibling}throw Error(o(188))}if(u.return!==m.return)u=v,m=_;else{for(var O=!1,F=v.child;F;){if(F===u){O=!0,u=v,m=_;break}if(F===m){O=!0,m=v,u=_;break}F=F.sibling}if(!O){for(F=_.child;F;){if(F===u){O=!0,u=_,m=v;break}if(F===m){O=!0,m=_,u=v;break}F=F.sibling}if(!O)throw Error(o(189))}}if(u.alternate!==m)throw Error(o(190))}if(u.tag!==3)throw Error(o(188));return u.stateNode.current===u?e:s}function A(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=A(e),s!==null)return s;e=e.sibling}return null}var N=Object.assign,T=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),P=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=fe&&e[fe]||e["@@iterator"],typeof e=="function"?e:null)}var be=Symbol.for("react.client.reference");function Re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===be?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case k:return"Fragment";case H:return"Profiler";case D:return"StrictMode";case Z:return"Suspense";case Y:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case P:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case K:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return s=e.displayName||null,s!==null?s:Re(e.type)||"Memo";case $:s=e._payload,e=e._init;try{return Re(e(s))}catch{}}return null}var G=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},Ve=[],Ke=-1;function ne(e){return{current:e}}function ye(e){0>Ke||(e.current=Ve[Ke],Ve[Ke]=null,Ke--)}function Le(e,s){Ke++,Ve[Ke]=e.current,e.current=s}var Ue=ne(null),Xe=ne(null),Ee=ne(null),$e=ne(null);function De(e,s){switch(Le(Ee,s),Le(Xe,e),Le(Ue,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?km(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=km(s),e=Dm(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ye(Ue),Le(Ue,e)}function Ce(){ye(Ue),ye(Xe),ye(Ee)}function Je(e){e.memoizedState!==null&&Le($e,e);var s=Ue.current,u=Dm(s,e.type);s!==u&&(Le(Xe,e),Le(Ue,u))}function gt(e){Xe.current===e&&(ye(Ue),ye(Xe)),$e.current===e&&(ye($e),Vl._currentValue=ke)}var Wt,ht;function kt(e){if(Wt===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Wt=s&&s[1]||"",ht=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+e+ht}var yn=!1;function un(e,s){if(!e||yn)return"";yn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(s){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(we){var me=we}Reflect.construct(e,[],_e)}else{try{_e.call()}catch(we){me=we}e.call(_e.prototype)}}else{try{throw Error()}catch(we){me=we}(_e=e())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(we){if(we&&me&&typeof we.stack=="string")return[we.stack,me.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),O=_[0],F=_[1];if(O&&F){var ee=O.split(`
`),he=F.split(`
`);for(v=m=0;m<ee.length&&!ee[m].includes("DetermineComponentFrameRoot");)m++;for(;v<he.length&&!he[v].includes("DetermineComponentFrameRoot");)v++;if(m===ee.length||v===he.length)for(m=ee.length-1,v=he.length-1;1<=m&&0<=v&&ee[m]!==he[v];)v--;for(;1<=m&&0<=v;m--,v--)if(ee[m]!==he[v]){if(m!==1||v!==1)do if(m--,v--,0>v||ee[m]!==he[v]){var ve=`
`+ee[m].replace(" at new "," at ");return e.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",e.displayName)),ve}while(1<=m&&0<=v);break}}}finally{yn=!1,Error.prepareStackTrace=u}return(u=e?e.displayName||e.name:"")?kt(u):""}function Dt(e,s){switch(e.tag){case 26:case 27:case 5:return kt(e.type);case 16:return kt("Lazy");case 13:return e.child!==s&&s!==null?kt("Suspense Fallback"):kt("Suspense");case 19:return kt("SuspenseList");case 0:case 15:return un(e.type,!1);case 11:return un(e.type.render,!1);case 1:return un(e.type,!0);case 31:return kt("Activity");default:return""}}function St(e){try{var s="",u=null;do s+=Dt(e,u),u=e,e=e.return;while(e);return s}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var mt=Object.prototype.hasOwnProperty,ns=a.unstable_scheduleCallback,ze=a.unstable_cancelCallback,Ns=a.unstable_shouldYield,Ie=a.unstable_requestPaint,Fe=a.unstable_now,nt=a.unstable_getCurrentPriorityLevel,_t=a.unstable_ImmediatePriority,Rn=a.unstable_UserBlockingPriority,rn=a.unstable_NormalPriority,Gt=a.unstable_LowPriority,qn=a.unstable_IdlePriority,Qn=a.log,ss=a.unstable_setDisableYieldValue,Rt=null,Ne=null;function dt(e){if(typeof Qn=="function"&&ss(e),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Rt,e)}catch{}}var ft=Math.clz32?Math.clz32:Er,Ht=Math.log,Ys=Math.LN2;function Er(e){return e>>>=0,e===0?32:31-(Ht(e)/Ys|0)|0}var Ds=256,vt=262144,On=4194304;function ge(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qe(e,s,u){var m=e.pendingLanes;if(m===0)return 0;var v=0,_=e.suspendedLanes,O=e.pingedLanes;e=e.warmLanes;var F=m&134217727;return F!==0?(m=F&~_,m!==0?v=ge(m):(O&=F,O!==0?v=ge(O):u||(u=F&~e,u!==0&&(v=ge(u))))):(F=m&~_,F!==0?v=ge(F):O!==0?v=ge(O):u||(u=m&~e,u!==0&&(v=ge(u)))),v===0?0:s!==0&&s!==v&&(s&_)===0&&(_=v&-v,u=s&-s,_>=u||_===32&&(u&4194048)!==0)?s:v}function lt(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function an(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zt(){var e=On;return On<<=1,(On&62914560)===0&&(On=4194304),e}function In(e){for(var s=[],u=0;31>u;u++)s.push(e);return s}function X(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,s,u,m,v,_){var O=e.pendingLanes;e.pendingLanes=u,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=u,e.entangledLanes&=u,e.errorRecoveryDisabledLanes&=u,e.shellSuspendCounter=0;var F=e.entanglements,ee=e.expirationTimes,he=e.hiddenUpdates;for(u=O&~u;0<u;){var ve=31-ft(u),_e=1<<ve;F[ve]=0,ee[ve]=-1;var me=he[ve];if(me!==null)for(he[ve]=null,ve=0;ve<me.length;ve++){var we=me[ve];we!==null&&(we.lane&=-536870913)}u&=~_e}m!==0&&jt(e,m,0),_!==0&&v===0&&e.tag!==0&&(e.suspendedLanes|=_&~(O&~s))}function jt(e,s,u){e.pendingLanes|=s,e.suspendedLanes&=~s;var m=31-ft(s);e.entangledLanes|=s,e.entanglements[m]=e.entanglements[m]|1073741824|u&261930}function Mn(e,s){var u=e.entangledLanes|=s;for(e=e.entanglements;u;){var m=31-ft(u),v=1<<m;v&s|e[m]&s&&(e[m]|=s),u&=~v}}function gs(e,s){var u=s&-s;return u=(u&42)!==0?1:wn(u),(u&(e.suspendedLanes|s))!==0?0:u}function wn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Kt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function rs(){var e=oe.p;return e!==0?e:(e=window.event,e===void 0?32:rp(e.type))}function He(e,s){var u=oe.p;try{return oe.p=e,s()}finally{oe.p=u}}var ms=Math.random().toString(36).slice(2),kn="__reactFiber$"+ms,Zt="__reactProps$"+ms,je="__reactContainer$"+ms,Me="__reactEvents$"+ms,We="__reactListeners$"+ms,vn="__reactHandles$"+ms,Ar="__reactResources$"+ms,dr="__reactMarker$"+ms;function _s(e){delete e[kn],delete e[Zt],delete e[Me],delete e[We],delete e[vn]}function Bn(e){var s=e[kn];if(s)return s;for(var u=e.parentNode;u;){if(s=u[je]||u[kn]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(e=Hm(e);e!==null;){if(u=e[kn])return u;e=Hm(e)}return s}e=u,u=e.parentNode}return null}function $t(e){if(e=e[kn]||e[je]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function Ta(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(o(33))}function Ts(e){var s=e[Ar];return s||(s=e[Ar]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Un(e){e[dr]=!0}var Te=new Set,pc={};function tn(e,s){Xs(e,s),Xs(e+"Capture",s)}function Xs(e,s){for(pc[e]=s,e=0;e<s.length;e++)Te.add(s[e])}var yd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},qt={};function Ot(e){return mt.call(qt,e)?!0:mt.call(Vt,e)?!1:yd.test(e)?qt[e]=!0:(Vt[e]=!0,!1)}function ja(e,s,u){if(Ot(s))if(u===null)e.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var m=s.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+u)}}function Ra(e,s,u){if(u===null)e.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+u)}}function Qs(e,s,u,m){if(m===null)e.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(u);return}e.setAttributeNS(s,u,""+m)}}function Yt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nr(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wd(e,s,u){var m=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,_=m.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return v.call(this)},set:function(O){u=""+O,_.call(this,O)}}),Object.defineProperty(e,s,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Cn(e){if(!e._valueTracker){var s=Nr(e)?"checked":"value";e._valueTracker=wd(e,s,""+e[s])}}function Tr(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var u=s.getValue(),m="";return e&&(m=Nr(e)?e.checked?"true":"false":e.value),e=m,e!==u?(s.setValue(e),!0):!1}function so(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Oa=/[\n"\\]/g;function Tt(e){return e.replace(Oa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Wn(e,s,u,m,v,_,O,F){e.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?e.type=O:e.removeAttribute("type"),s!=null?O==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+Yt(s)):e.value!==""+Yt(s)&&(e.value=""+Yt(s)):O!=="submit"&&O!=="reset"||e.removeAttribute("value"),s!=null?Q(e,O,Yt(s)):u!=null?Q(e,O,Yt(u)):m!=null&&e.removeAttribute("value"),v==null&&_!=null&&(e.defaultChecked=!!_),v!=null&&(e.checked=v&&typeof v!="function"&&typeof v!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?e.name=""+Yt(F):e.removeAttribute("name")}function ce(e,s,u,m,v,_,O,F){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.type=_),s!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Cn(e);return}u=u!=null?""+Yt(u):"",s=s!=null?""+Yt(s):u,F||s===e.value||(e.value=s),e.defaultValue=s}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,e.checked=F?e.checked:!!m,e.defaultChecked=!!m,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(e.name=O),Cn(e)}function Q(e,s,u){s==="number"&&so(e.ownerDocument)===e||e.defaultValue===""+u||(e.defaultValue=""+u)}function Ze(e,s,u,m){if(e=e.options,s){s={};for(var v=0;v<u.length;v++)s["$"+u[v]]=!0;for(u=0;u<e.length;u++)v=s.hasOwnProperty("$"+e[u].value),e[u].selected!==v&&(e[u].selected=v),v&&m&&(e[u].defaultSelected=!0)}else{for(u=""+Yt(u),s=null,v=0;v<e.length;v++){if(e[v].value===u){e[v].selected=!0,m&&(e[v].defaultSelected=!0);return}s!==null||e[v].disabled||(s=e[v])}s!==null&&(s.selected=!0)}}function Vn(e,s,u){if(s!=null&&(s=""+Yt(s),s!==e.value&&(e.value=s),u==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=u!=null?""+Yt(u):""}function js(e,s,u,m){if(s==null){if(m!=null){if(u!=null)throw Error(o(92));if(G(m)){if(1<m.length)throw Error(o(93));m=m[0]}u=m}u==null&&(u=""),s=u}u=Yt(s),e.defaultValue=u,m=e.textContent,m===u&&m!==""&&m!==null&&(e.value=m),Cn(e)}function Ia(e,s){if(s){var u=e.firstChild;if(u&&u===e.lastChild&&u.nodeType===3){u.nodeValue=s;return}}e.textContent=s}var il=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rs(e,s,u){var m=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":m?e.setProperty(s,u):typeof u!="number"||u===0||il.has(s)?s==="float"?e.cssFloat=u:e[s]=(""+u).trim():e[s]=u+"px"}function rt(e,s,u){if(s!=null&&typeof s!="object")throw Error(o(62));if(e=e.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||s!=null&&s.hasOwnProperty(m)||(m.indexOf("--")===0?e.setProperty(m,""):m==="float"?e.cssFloat="":e[m]="");for(var v in s)m=s[v],s.hasOwnProperty(v)&&u[v]!==m&&Rs(e,v,m)}else for(var _ in s)s.hasOwnProperty(_)&&Rs(e,_,s[_])}function gn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ma(e){return bd.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ls(){}var bi=null;function ol(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sn=null,hr=null;function jr(e){var s=$t(e);if(s&&(e=s.stateNode)){var u=e[Zt]||null;e:switch(e=s.stateNode,s.type){case"input":if(Wn(e,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=e;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Tt(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var m=u[s];if(m!==e&&m.form===e.form){var v=m[Zt]||null;if(!v)throw Error(o(90));Wn(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<u.length;s++)m=u[s],m.form===e.form&&Tr(m)}break e;case"textarea":Vn(e,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Ze(e,!!u.multiple,s,!1)}}}var it=!1;function yc(e,s,u){if(it)return e(s,u);it=!0;try{var m=e(s);return m}finally{if(it=!1,(Sn!==null||hr!==null)&&(cu(),Sn&&(s=Sn,e=hr,hr=Sn=null,jr(s),e)))for(s=0;s<e.length;s++)jr(e[s])}}function pt(e,s){var u=e.stateNode;if(u===null)return null;var m=u[Zt]||null;if(m===null)return null;u=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(e=e.type,m=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!m;break e;default:e=!1}if(e)return null;if(u&&typeof u!="function")throw Error(o(231,s,typeof u));return u}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ll=!1;if(mn)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){ll=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{ll=!1}var Rr=null,Or=null,ro=null;function ka(){if(ro)return ro;var e,s=Or,u=s.length,m,v="value"in Rr?Rr.value:Rr.textContent,_=v.length;for(e=0;e<u&&s[e]===v[e];e++);var O=u-e;for(m=1;m<=O&&s[u-m]===v[_-m];m++);return ro=v.slice(e,1<m?1-m:void 0)}function Fr(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Hr(){return!0}function cl(){return!1}function Kn(e){function s(u,m,v,_,O){this._reactName=u,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=O,this.currentTarget=null;for(var F in e)e.hasOwnProperty(F)&&(u=e[F],this[F]=u?u(_):_[F]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Hr:cl,this.isPropagationStopped=cl,this}return N(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),s}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},as=Kn(Ws),Da=N({},Ws,{view:0,detail:0}),wc=Kn(Da),ao,ul,vi,io=N({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vi&&(vi&&e.type==="mousemove"?(ao=e.screenX-vi.screenX,ul=e.screenY-vi.screenY):ul=ao=0,vi=e),ao)},movementY:function(e){return"movementY"in e?e.movementY:ul}}),Jt=Kn(io),bc=N({},io,{dataTransfer:0}),oo=Kn(bc),qr=N({},Da,{relatedTarget:0}),dl=Kn(qr),xe=N({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Et=Kn(xe),is=N({},Ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lo=Kn(is),vc=N({},Ws,{data:0}),Cc=Kn(vc),vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gn(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=hl[e])?!!s[e]:!1}function Ci(){return Gn}var Nn=N({},Da,{key:function(e){if(e.key){var s=vd[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Fr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(e){return e.type==="keypress"?Fr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),co=Kn(Nn),ea=N({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nn=Kn(ea),ot=N({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),Sd=Kn(ot),pn=N({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),ta=Kn(pn),La=N({},io,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_d=Kn(La),fr=N({},Ws,{newState:0,oldState:0}),fl=Kn(fr),Sc=[9,13,27,32],Si=mn&&"CompositionEvent"in window,Ba=null;mn&&"documentMode"in document&&(Ba=document.documentMode);var _c=mn&&"TextEvent"in window&&!Ba,Ec=mn&&(!Si||Ba&&8<Ba&&11>=Ba),na=" ",uo=!1;function Ac(e,s){switch(e){case"keyup":return Sc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ua(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pa=!1;function Vr(e,s){switch(e){case"compositionend":return Ua(s);case"keypress":return s.which!==32?null:(uo=!0,na);case"textInput":return e=s.data,e===na&&uo?null:e;default:return null}}function ho(e,s){if(Pa)return e==="compositionend"||!Si&&Ac(e,s)?(e=ka(),ro=Or=Rr=null,Pa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ec&&s.locale!=="ko"?null:s.data;default:return null}}var Bs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gl(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Bs[e.type]:s==="textarea"}function Ks(e,s,u,m){Sn?hr?hr.push(m):hr=[m]:Sn=m,s=pu(s,"onChange"),0<s.length&&(u=new as("onChange","change",null,u,m),e.push({event:u,listeners:s}))}var _i=null,sa=null;function Ed(e){Tm(e,0)}function Ei(e){var s=Ta(e);if(Tr(s))return e}function Zs(e,s){if(e==="change")return s}var Nc=!1;if(mn){var Ai;if(mn){var ra="oninput"in document;if(!ra){var Lt=document.createElement("div");Lt.setAttribute("oninput","return;"),ra=typeof Lt.oninput=="function"}Ai=ra}else Ai=!1;Nc=Ai&&(!document.documentMode||9<document.documentMode)}function Ni(){_i&&(_i.detachEvent("onpropertychange",L),sa=_i=null)}function L(e){if(e.propertyName==="value"&&Ei(sa)){var s=[];Ks(s,sa,e,ol(e)),yc(Ed,s)}}function n(e,s,u){e==="focusin"?(Ni(),_i=s,sa=u,_i.attachEvent("onpropertychange",L)):e==="focusout"&&Ni()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ei(sa)}function c(e,s){if(e==="click")return Ei(s)}function f(e,s){if(e==="input"||e==="change")return Ei(s)}function g(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var p=typeof Object.is=="function"?Object.is:g;function y(e,s){if(p(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var u=Object.keys(e),m=Object.keys(s);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var v=u[m];if(!mt.call(s,v)||!p(e[v],s[v]))return!1}return!0}function S(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E(e,s){var u=S(e);e=0;for(var m;u;){if(u.nodeType===3){if(m=e+u.textContent.length,e<=s&&m>=s)return{node:u,offset:s-e};e=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=S(u)}}function R(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?R(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function B(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=so(e.document);s instanceof e.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)e=s.contentWindow;else break;s=so(e.document)}return s}function z(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var W=mn&&"documentMode"in document&&11>=document.documentMode,te=null,se=null,le=null,pe=!1;function Pe(e,s,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;pe||te==null||te!==so(m)||(m=te,"selectionStart"in m&&z(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),le&&y(le,m)||(le=m,m=pu(se,"onSelect"),0<m.length&&(s=new as("onSelect","select",null,s,u),e.push({event:s,listeners:m}),s.target=te)))}function Be(e,s){var u={};return u[e.toLowerCase()]=s.toLowerCase(),u["Webkit"+e]="webkit"+s,u["Moz"+e]="moz"+s,u}var Oe={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionrun:Be("Transition","TransitionRun"),transitionstart:Be("Transition","TransitionStart"),transitioncancel:Be("Transition","TransitionCancel"),transitionend:Be("Transition","TransitionEnd")},Nt={},yt={};mn&&(yt=document.createElement("div").style,"AnimationEvent"in window||(delete Oe.animationend.animation,delete Oe.animationiteration.animation,delete Oe.animationstart.animation),"TransitionEvent"in window||delete Oe.transitionend.transition);function Pn(e){if(Nt[e])return Nt[e];if(!Oe[e])return e;var s=Oe[e],u;for(u in s)if(s.hasOwnProperty(u)&&u in yt)return Nt[e]=s[u];return e}var Us=Pn("animationend"),ps=Pn("animationiteration"),sn=Pn("animationstart"),os=Pn("transitionrun"),Os=Pn("transitionstart"),za=Pn("transitioncancel"),aa=Pn("transitionend"),Tc=new Map,ml="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ml.push("scrollEnd");function Ir(e,s){Tc.set(e,s),tn(s,[e])}var jc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},gr=[],fo=0,Ad=0;function Rc(){for(var e=fo,s=Ad=fo=0;s<e;){var u=gr[s];gr[s++]=null;var m=gr[s];gr[s++]=null;var v=gr[s];gr[s++]=null;var _=gr[s];if(gr[s++]=null,m!==null&&v!==null){var O=m.pending;O===null?v.next=v:(v.next=O.next,O.next=v),m.pending=v}_!==0&&c1(u,v,_)}}function Oc(e,s,u,m){gr[fo++]=e,gr[fo++]=s,gr[fo++]=u,gr[fo++]=m,Ad|=m,e.lanes|=m,e=e.alternate,e!==null&&(e.lanes|=m)}function Nd(e,s,u,m){return Oc(e,s,u,m),Ic(e)}function Ti(e,s){return Oc(e,null,null,s),Ic(e)}function c1(e,s,u){e.lanes|=u;var m=e.alternate;m!==null&&(m.lanes|=u);for(var v=!1,_=e.return;_!==null;)_.childLanes|=u,m=_.alternate,m!==null&&(m.childLanes|=u),_.tag===22&&(e=_.stateNode,e===null||e._visibility&1||(v=!0)),e=_,_=_.return;return e.tag===3?(_=e.stateNode,v&&s!==null&&(v=31-ft(u),e=_.hiddenUpdates,m=e[v],m===null?e[v]=[s]:m.push(s),s.lane=u|536870912),_):null}function Ic(e){if(50<Bl)throw Bl=0,Lh=null,Error(o(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var go={};function dw(e,s,u,m){this.tag=e,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(e,s,u,m){return new dw(e,s,u,m)}function Td(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ia(e,s){var u=e.alternate;return u===null?(u=$s(e.tag,s,e.key,e.mode),u.elementType=e.elementType,u.type=e.type,u.stateNode=e.stateNode,u.alternate=e,e.alternate=u):(u.pendingProps=s,u.type=e.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=e.flags&65011712,u.childLanes=e.childLanes,u.lanes=e.lanes,u.child=e.child,u.memoizedProps=e.memoizedProps,u.memoizedState=e.memoizedState,u.updateQueue=e.updateQueue,s=e.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=e.sibling,u.index=e.index,u.ref=e.ref,u.refCleanup=e.refCleanup,u}function u1(e,s){e.flags&=65011714;var u=e.alternate;return u===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=u.childLanes,e.lanes=u.lanes,e.child=u.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=u.memoizedProps,e.memoizedState=u.memoizedState,e.updateQueue=u.updateQueue,e.type=u.type,s=u.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Mc(e,s,u,m,v,_){var O=0;if(m=e,typeof e=="function")Td(e)&&(O=1);else if(typeof e=="string")O=pb(e,u,Ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case q:return e=$s(31,u,s,v),e.elementType=q,e.lanes=_,e;case k:return ji(u.children,v,_,s);case D:O=8,v|=24;break;case H:return e=$s(12,u,s,v|2),e.elementType=H,e.lanes=_,e;case Z:return e=$s(13,u,s,v),e.elementType=Z,e.lanes=_,e;case Y:return e=$s(19,u,s,v),e.elementType=Y,e.lanes=_,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:O=10;break e;case U:O=9;break e;case K:O=11;break e;case V:O=14;break e;case $:O=16,m=null;break e}O=29,u=Error(o(130,e===null?"null":typeof e,"")),m=null}return s=$s(O,u,s,v),s.elementType=e,s.type=m,s.lanes=_,s}function ji(e,s,u,m){return e=$s(7,e,m,s),e.lanes=u,e}function jd(e,s,u){return e=$s(6,e,null,s),e.lanes=u,e}function d1(e){var s=$s(18,null,null,0);return s.stateNode=e,s}function Rd(e,s,u){return s=$s(4,e.children!==null?e.children:[],e.key,s),s.lanes=u,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var h1=new WeakMap;function mr(e,s){if(typeof e=="object"&&e!==null){var u=h1.get(e);return u!==void 0?u:(s={value:e,source:s,stack:St(s)},h1.set(e,s),s)}return{value:e,source:s,stack:St(s)}}var mo=[],po=0,kc=null,pl=0,pr=[],xr=0,Fa=null,Gr=1,Yr="";function oa(e,s){mo[po++]=pl,mo[po++]=kc,kc=e,pl=s}function f1(e,s,u){pr[xr++]=Gr,pr[xr++]=Yr,pr[xr++]=Fa,Fa=e;var m=Gr;e=Yr;var v=32-ft(m)-1;m&=~(1<<v),u+=1;var _=32-ft(s)+v;if(30<_){var O=v-v%5;_=(m&(1<<O)-1).toString(32),m>>=O,v-=O,Gr=1<<32-ft(s)+v|u<<v|m,Yr=_+e}else Gr=1<<_|u<<v|m,Yr=e}function Od(e){e.return!==null&&(oa(e,1),f1(e,1,0))}function Id(e){for(;e===kc;)kc=mo[--po],mo[po]=null,pl=mo[--po],mo[po]=null;for(;e===Fa;)Fa=pr[--xr],pr[xr]=null,Yr=pr[--xr],pr[xr]=null,Gr=pr[--xr],pr[xr]=null}function g1(e,s){pr[xr++]=Gr,pr[xr++]=Yr,pr[xr++]=Fa,Gr=s.id,Yr=s.overflow,Fa=e}var xs=null,_n=null,Ft=!1,Ha=null,yr=!1,Md=Error(o(519));function qa(e){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xl(mr(s,e)),Md}function m1(e){var s=e.stateNode,u=e.type,m=e.memoizedProps;switch(s[kn]=e,s[Zt]=m,u){case"dialog":Mt("cancel",s),Mt("close",s);break;case"iframe":case"object":case"embed":Mt("load",s);break;case"video":case"audio":for(u=0;u<Pl.length;u++)Mt(Pl[u],s);break;case"source":Mt("error",s);break;case"img":case"image":case"link":Mt("error",s),Mt("load",s);break;case"details":Mt("toggle",s);break;case"input":Mt("invalid",s),ce(s,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Mt("invalid",s);break;case"textarea":Mt("invalid",s),js(s,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||m.suppressHydrationWarning===!0||Im(s.textContent,u)?(m.popover!=null&&(Mt("beforetoggle",s),Mt("toggle",s)),m.onScroll!=null&&Mt("scroll",s),m.onScrollEnd!=null&&Mt("scrollend",s),m.onClick!=null&&(s.onclick=Ls),s=!0):s=!1,s||qa(e,!0)}function p1(e){for(xs=e.return;xs;)switch(xs.tag){case 5:case 31:case 13:yr=!1;return;case 27:case 3:yr=!0;return;default:xs=xs.return}}function xo(e){if(e!==xs)return!1;if(!Ft)return p1(e),Ft=!0,!1;var s=e.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=e.type,u=!(u!=="form"&&u!=="button")||Zh(e.type,e.memoizedProps)),u=!u),u&&_n&&qa(e),p1(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));_n=Fm(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));_n=Fm(e)}else s===27?(s=_n,si(e.type)?(e=nf,nf=null,_n=e):_n=s):_n=xs?br(e.stateNode.nextSibling):null;return!0}function Ri(){_n=xs=null,Ft=!1}function kd(){var e=Ha;return e!==null&&(Hs===null?Hs=e:Hs.push.apply(Hs,e),Ha=null),e}function xl(e){Ha===null?Ha=[e]:Ha.push(e)}var Dd=ne(null),Oi=null,la=null;function Va(e,s,u){Le(Dd,s._currentValue),s._currentValue=u}function ca(e){e._currentValue=Dd.current,ye(Dd)}function Ld(e,s,u){for(;e!==null;){var m=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),e===u)break;e=e.return}}function Bd(e,s,u,m){var v=e.child;for(v!==null&&(v.return=e);v!==null;){var _=v.dependencies;if(_!==null){var O=v.child;_=_.firstContext;e:for(;_!==null;){var F=_;_=v;for(var ee=0;ee<s.length;ee++)if(F.context===s[ee]){_.lanes|=u,F=_.alternate,F!==null&&(F.lanes|=u),Ld(_.return,u,e),m||(O=null);break e}_=F.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(o(341));O.lanes|=u,_=O.alternate,_!==null&&(_.lanes|=u),Ld(O,u,e),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===e){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function yo(e,s,u,m){e=null;for(var v=s,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(o(387));if(O=O.memoizedProps,O!==null){var F=v.type;p(v.pendingProps.value,O.value)||(e!==null?e.push(F):e=[F])}}else if(v===$e.current){if(O=v.alternate,O===null)throw Error(o(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(e!==null?e.push(Vl):e=[Vl])}v=v.return}e!==null&&Bd(s,e,u,m),s.flags|=262144}function Dc(e){for(e=e.firstContext;e!==null;){if(!p(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ii(e){Oi=e,la=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ys(e){return x1(Oi,e)}function Lc(e,s){return Oi===null&&Ii(e),x1(e,s)}function x1(e,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},la===null){if(e===null)throw Error(o(308));la=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else la=la.next=s;return u}var hw=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(u,m){e.push(m)}};this.abort=function(){s.aborted=!0,e.forEach(function(u){return u()})}},fw=a.unstable_scheduleCallback,gw=a.unstable_NormalPriority,Zn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ud(){return{controller:new hw,data:new Map,refCount:0}}function yl(e){e.refCount--,e.refCount===0&&fw(gw,function(){e.controller.abort()})}var wl=null,Pd=0,wo=0,bo=null;function mw(e,s){if(wl===null){var u=wl=[];Pd=0,wo=Hh(),bo={status:"pending",value:void 0,then:function(m){u.push(m)}}}return Pd++,s.then(y1,y1),s}function y1(){if(--Pd===0&&wl!==null){bo!==null&&(bo.status="fulfilled");var e=wl;wl=null,wo=0,bo=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function pw(e,s){var u=[],m={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return e.then(function(){m.status="fulfilled",m.value=s;for(var v=0;v<u.length;v++)(0,u[v])(s)},function(v){for(m.status="rejected",m.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),m}var w1=J.S;J.S=function(e,s){nm=Fe(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&mw(e,s),w1!==null&&w1(e,s)};var Mi=ne(null);function zd(){var e=Mi.current;return e!==null?e:xn.pooledCache}function Bc(e,s){s===null?Le(Mi,Mi.current):Le(Mi,s.pool)}function b1(){var e=zd();return e===null?null:{parent:Zn._currentValue,pool:e}}var vo=Error(o(460)),Fd=Error(o(474)),Uc=Error(o(542)),Pc={then:function(){}};function v1(e){return e=e.status,e==="fulfilled"||e==="rejected"}function C1(e,s,u){switch(u=e[u],u===void 0?e.push(s):u!==s&&(s.then(Ls,Ls),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,_1(e),e;default:if(typeof s.status=="string")s.then(Ls,Ls);else{if(e=xn,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=s,e.status="pending",e.then(function(m){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=m}},function(m){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=m}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,_1(e),e}throw Di=s,vo}}function ki(e){try{var s=e._init;return s(e._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Di=u,vo):u}}var Di=null;function S1(){if(Di===null)throw Error(o(459));var e=Di;return Di=null,e}function _1(e){if(e===vo||e===Uc)throw Error(o(483))}var Co=null,bl=0;function zc(e){var s=bl;return bl+=1,Co===null&&(Co=[]),C1(Co,e,s)}function vl(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Fc(e,s){throw s.$$typeof===T?Error(o(525)):(e=Object.prototype.toString.call(s),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function E1(e){function s(ae,re){if(e){var de=ae.deletions;de===null?(ae.deletions=[re],ae.flags|=16):de.push(re)}}function u(ae,re){if(!e)return null;for(;re!==null;)s(ae,re),re=re.sibling;return null}function m(ae){for(var re=new Map;ae!==null;)ae.key!==null?re.set(ae.key,ae):re.set(ae.index,ae),ae=ae.sibling;return re}function v(ae,re){return ae=ia(ae,re),ae.index=0,ae.sibling=null,ae}function _(ae,re,de){return ae.index=de,e?(de=ae.alternate,de!==null?(de=de.index,de<re?(ae.flags|=67108866,re):de):(ae.flags|=67108866,re)):(ae.flags|=1048576,re)}function O(ae){return e&&ae.alternate===null&&(ae.flags|=67108866),ae}function F(ae,re,de,Se){return re===null||re.tag!==6?(re=jd(de,ae.mode,Se),re.return=ae,re):(re=v(re,de),re.return=ae,re)}function ee(ae,re,de,Se){var at=de.type;return at===k?ve(ae,re,de.props.children,Se,de.key):re!==null&&(re.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&ki(at)===re.type)?(re=v(re,de.props),vl(re,de),re.return=ae,re):(re=Mc(de.type,de.key,de.props,null,ae.mode,Se),vl(re,de),re.return=ae,re)}function he(ae,re,de,Se){return re===null||re.tag!==4||re.stateNode.containerInfo!==de.containerInfo||re.stateNode.implementation!==de.implementation?(re=Rd(de,ae.mode,Se),re.return=ae,re):(re=v(re,de.children||[]),re.return=ae,re)}function ve(ae,re,de,Se,at){return re===null||re.tag!==7?(re=ji(de,ae.mode,Se,at),re.return=ae,re):(re=v(re,de),re.return=ae,re)}function _e(ae,re,de){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=jd(""+re,ae.mode,de),re.return=ae,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case j:return de=Mc(re.type,re.key,re.props,null,ae.mode,de),vl(de,re),de.return=ae,de;case I:return re=Rd(re,ae.mode,de),re.return=ae,re;case $:return re=ki(re),_e(ae,re,de)}if(G(re)||ie(re))return re=ji(re,ae.mode,de,null),re.return=ae,re;if(typeof re.then=="function")return _e(ae,zc(re),de);if(re.$$typeof===P)return _e(ae,Lc(ae,re),de);Fc(ae,re)}return null}function me(ae,re,de,Se){var at=re!==null?re.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return at!==null?null:F(ae,re,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case j:return de.key===at?ee(ae,re,de,Se):null;case I:return de.key===at?he(ae,re,de,Se):null;case $:return de=ki(de),me(ae,re,de,Se)}if(G(de)||ie(de))return at!==null?null:ve(ae,re,de,Se,null);if(typeof de.then=="function")return me(ae,re,zc(de),Se);if(de.$$typeof===P)return me(ae,re,Lc(ae,de),Se);Fc(ae,de)}return null}function we(ae,re,de,Se,at){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ae=ae.get(de)||null,F(re,ae,""+Se,at);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case j:return ae=ae.get(Se.key===null?de:Se.key)||null,ee(re,ae,Se,at);case I:return ae=ae.get(Se.key===null?de:Se.key)||null,he(re,ae,Se,at);case $:return Se=ki(Se),we(ae,re,de,Se,at)}if(G(Se)||ie(Se))return ae=ae.get(de)||null,ve(re,ae,Se,at,null);if(typeof Se.then=="function")return we(ae,re,de,zc(Se),at);if(Se.$$typeof===P)return we(ae,re,de,Lc(re,Se),at);Fc(re,Se)}return null}function Qe(ae,re,de,Se){for(var at=null,Xt=null,et=re,At=re=0,Ut=null;et!==null&&At<de.length;At++){et.index>At?(Ut=et,et=null):Ut=et.sibling;var Qt=me(ae,et,de[At],Se);if(Qt===null){et===null&&(et=Ut);break}e&&et&&Qt.alternate===null&&s(ae,et),re=_(Qt,re,At),Xt===null?at=Qt:Xt.sibling=Qt,Xt=Qt,et=Ut}if(At===de.length)return u(ae,et),Ft&&oa(ae,At),at;if(et===null){for(;At<de.length;At++)et=_e(ae,de[At],Se),et!==null&&(re=_(et,re,At),Xt===null?at=et:Xt.sibling=et,Xt=et);return Ft&&oa(ae,At),at}for(et=m(et);At<de.length;At++)Ut=we(et,ae,At,de[At],Se),Ut!==null&&(e&&Ut.alternate!==null&&et.delete(Ut.key===null?At:Ut.key),re=_(Ut,re,At),Xt===null?at=Ut:Xt.sibling=Ut,Xt=Ut);return e&&et.forEach(function(li){return s(ae,li)}),Ft&&oa(ae,At),at}function ct(ae,re,de,Se){if(de==null)throw Error(o(151));for(var at=null,Xt=null,et=re,At=re=0,Ut=null,Qt=de.next();et!==null&&!Qt.done;At++,Qt=de.next()){et.index>At?(Ut=et,et=null):Ut=et.sibling;var li=me(ae,et,Qt.value,Se);if(li===null){et===null&&(et=Ut);break}e&&et&&li.alternate===null&&s(ae,et),re=_(li,re,At),Xt===null?at=li:Xt.sibling=li,Xt=li,et=Ut}if(Qt.done)return u(ae,et),Ft&&oa(ae,At),at;if(et===null){for(;!Qt.done;At++,Qt=de.next())Qt=_e(ae,Qt.value,Se),Qt!==null&&(re=_(Qt,re,At),Xt===null?at=Qt:Xt.sibling=Qt,Xt=Qt);return Ft&&oa(ae,At),at}for(et=m(et);!Qt.done;At++,Qt=de.next())Qt=we(et,ae,At,Qt.value,Se),Qt!==null&&(e&&Qt.alternate!==null&&et.delete(Qt.key===null?At:Qt.key),re=_(Qt,re,At),Xt===null?at=Qt:Xt.sibling=Qt,Xt=Qt);return e&&et.forEach(function(Nb){return s(ae,Nb)}),Ft&&oa(ae,At),at}function fn(ae,re,de,Se){if(typeof de=="object"&&de!==null&&de.type===k&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case j:e:{for(var at=de.key;re!==null;){if(re.key===at){if(at=de.type,at===k){if(re.tag===7){u(ae,re.sibling),Se=v(re,de.props.children),Se.return=ae,ae=Se;break e}}else if(re.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===$&&ki(at)===re.type){u(ae,re.sibling),Se=v(re,de.props),vl(Se,de),Se.return=ae,ae=Se;break e}u(ae,re);break}else s(ae,re);re=re.sibling}de.type===k?(Se=ji(de.props.children,ae.mode,Se,de.key),Se.return=ae,ae=Se):(Se=Mc(de.type,de.key,de.props,null,ae.mode,Se),vl(Se,de),Se.return=ae,ae=Se)}return O(ae);case I:e:{for(at=de.key;re!==null;){if(re.key===at)if(re.tag===4&&re.stateNode.containerInfo===de.containerInfo&&re.stateNode.implementation===de.implementation){u(ae,re.sibling),Se=v(re,de.children||[]),Se.return=ae,ae=Se;break e}else{u(ae,re);break}else s(ae,re);re=re.sibling}Se=Rd(de,ae.mode,Se),Se.return=ae,ae=Se}return O(ae);case $:return de=ki(de),fn(ae,re,de,Se)}if(G(de))return Qe(ae,re,de,Se);if(ie(de)){if(at=ie(de),typeof at!="function")throw Error(o(150));return de=at.call(de),ct(ae,re,de,Se)}if(typeof de.then=="function")return fn(ae,re,zc(de),Se);if(de.$$typeof===P)return fn(ae,re,Lc(ae,de),Se);Fc(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,re!==null&&re.tag===6?(u(ae,re.sibling),Se=v(re,de),Se.return=ae,ae=Se):(u(ae,re),Se=jd(de,ae.mode,Se),Se.return=ae,ae=Se),O(ae)):u(ae,re)}return function(ae,re,de,Se){try{bl=0;var at=fn(ae,re,de,Se);return Co=null,at}catch(et){if(et===vo||et===Uc)throw et;var Xt=$s(29,et,null,ae.mode);return Xt.lanes=Se,Xt.return=ae,Xt}finally{}}}var Li=E1(!0),A1=E1(!1),Ga=!1;function Hd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ya(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(e,s,u){var m=e.updateQueue;if(m===null)return null;if(m=m.shared,(en&2)!==0){var v=m.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),m.pending=s,s=Ic(e),c1(e,null,u),s}return Oc(e,m,s,u),Ic(e)}function Cl(e,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var m=s.lanes;m&=e.pendingLanes,u|=m,s.lanes=u,Mn(e,u)}}function Vd(e,s){var u=e.updateQueue,m=e.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=O:_=_.next=O,u=u.next}while(u!==null);_===null?v=_=s:_=_.next=s}else v=_=s;u={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},e.updateQueue=u;return}e=u.lastBaseUpdate,e===null?u.firstBaseUpdate=s:e.next=s,u.lastBaseUpdate=s}var Gd=!1;function Sl(){if(Gd){var e=bo;if(e!==null)throw e}}function _l(e,s,u,m){Gd=!1;var v=e.updateQueue;Ga=!1;var _=v.firstBaseUpdate,O=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var ee=F,he=ee.next;ee.next=null,O===null?_=he:O.next=he,O=ee;var ve=e.alternate;ve!==null&&(ve=ve.updateQueue,F=ve.lastBaseUpdate,F!==O&&(F===null?ve.firstBaseUpdate=he:F.next=he,ve.lastBaseUpdate=ee))}if(_!==null){var _e=v.baseState;O=0,ve=he=ee=null,F=_;do{var me=F.lane&-536870913,we=me!==F.lane;if(we?(Bt&me)===me:(m&me)===me){me!==0&&me===wo&&(Gd=!0),ve!==null&&(ve=ve.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Qe=e,ct=F;me=s;var fn=u;switch(ct.tag){case 1:if(Qe=ct.payload,typeof Qe=="function"){_e=Qe.call(fn,_e,me);break e}_e=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=ct.payload,me=typeof Qe=="function"?Qe.call(fn,_e,me):Qe,me==null)break e;_e=N({},_e,me);break e;case 2:Ga=!0}}me=F.callback,me!==null&&(e.flags|=64,we&&(e.flags|=8192),we=v.callbacks,we===null?v.callbacks=[me]:we.push(me))}else we={lane:me,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ve===null?(he=ve=we,ee=_e):ve=ve.next=we,O|=me;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;we=F,F=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);ve===null&&(ee=_e),v.baseState=ee,v.firstBaseUpdate=he,v.lastBaseUpdate=ve,_===null&&(v.shared.lanes=0),$a|=O,e.lanes=O,e.memoizedState=_e}}function N1(e,s){if(typeof e!="function")throw Error(o(191,e));e.call(s)}function T1(e,s){var u=e.callbacks;if(u!==null)for(e.callbacks=null,e=0;e<u.length;e++)N1(u[e],s)}var So=ne(null),Hc=ne(0);function j1(e,s){e=ya,Le(Hc,e),Le(So,s),ya=e|s.baseLanes}function Yd(){Le(Hc,ya),Le(So,So.current)}function Xd(){ya=Hc.current,ye(So),ye(Hc)}var Js=ne(null),wr=null;function Qa(e){var s=e.alternate;Le(Yn,Yn.current&1),Le(Js,e),wr===null&&(s===null||So.current!==null||s.memoizedState!==null)&&(wr=e)}function Qd(e){Le(Yn,Yn.current),Le(Js,e),wr===null&&(wr=e)}function R1(e){e.tag===22?(Le(Yn,Yn.current),Le(Js,e),wr===null&&(wr=e)):Wa()}function Wa(){Le(Yn,Yn.current),Le(Js,Js.current)}function er(e){ye(Js),wr===e&&(wr=null),ye(Yn)}var Yn=ne(0);function qc(e){for(var s=e;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||ef(u)||tf(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ua=0,Ct=null,dn=null,$n=null,Vc=!1,_o=!1,Bi=!1,Gc=0,El=0,Eo=null,xw=0;function zn(){throw Error(o(321))}function Wd(e,s){if(s===null)return!1;for(var u=0;u<s.length&&u<e.length;u++)if(!p(e[u],s[u]))return!1;return!0}function Kd(e,s,u,m,v,_){return ua=_,Ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=e===null||e.memoizedState===null?fg:dh,Bi=!1,_=u(m,v),Bi=!1,_o&&(_=I1(s,u,m,v)),O1(e),_}function O1(e){J.H=Tl;var s=dn!==null&&dn.next!==null;if(ua=0,$n=dn=Ct=null,Vc=!1,El=0,Eo=null,s)throw Error(o(300));e===null||Jn||(e=e.dependencies,e!==null&&Dc(e)&&(Jn=!0))}function I1(e,s,u,m){Ct=e;var v=0;do{if(_o&&(Eo=null),El=0,_o=!1,25<=v)throw Error(o(301));if(v+=1,$n=dn=null,e.updateQueue!=null){var _=e.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}J.H=gg,_=s(u,m)}while(_o);return _}function yw(){var e=J.H,s=e.useState()[0];return s=typeof s.then=="function"?Al(s):s,e=e.useState()[0],(dn!==null?dn.memoizedState:null)!==e&&(Ct.flags|=1024),s}function Zd(){var e=Gc!==0;return Gc=0,e}function $d(e,s,u){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~u}function Jd(e){if(Vc){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Vc=!1}ua=0,$n=dn=Ct=null,_o=!1,El=Gc=0,Eo=null}function Is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Ct.memoizedState=$n=e:$n=$n.next=e,$n}function Xn(){if(dn===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=dn.next;var s=$n===null?Ct.memoizedState:$n.next;if(s!==null)$n=s,dn=e;else{if(e===null)throw Ct.alternate===null?Error(o(467)):Error(o(310));dn=e,e={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},$n===null?Ct.memoizedState=$n=e:$n=$n.next=e}return $n}function Yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(e){var s=El;return El+=1,Eo===null&&(Eo=[]),e=C1(Eo,e,s),s=Ct,($n===null?s.memoizedState:$n.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?fg:dh),e}function Xc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Al(e);if(e.$$typeof===P)return ys(e)}throw Error(o(438,String(e)))}function eh(e){var s=null,u=Ct.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var m=Ct.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(s={data:m.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Yc(),Ct.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(e),m=0;m<e;m++)u[m]=ue;return s.index++,u}function da(e,s){return typeof s=="function"?s(e):s}function Qc(e){var s=Xn();return th(s,dn,e)}function th(e,s,u){var m=e.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=u;var v=e.baseQueue,_=m.pending;if(_!==null){if(v!==null){var O=v.next;v.next=_.next,_.next=O}s.baseQueue=v=_,m.pending=null}if(_=e.baseState,v===null)e.memoizedState=_;else{s=v.next;var F=O=null,ee=null,he=s,ve=!1;do{var _e=he.lane&-536870913;if(_e!==he.lane?(Bt&_e)===_e:(ua&_e)===_e){var me=he.revertLane;if(me===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),_e===wo&&(ve=!0);else if((ua&me)===me){he=he.next,me===wo&&(ve=!0);continue}else _e={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ee===null?(F=ee=_e,O=_):ee=ee.next=_e,Ct.lanes|=me,$a|=me;_e=he.action,Bi&&u(_,_e),_=he.hasEagerState?he.eagerState:u(_,_e)}else me={lane:_e,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ee===null?(F=ee=me,O=_):ee=ee.next=me,Ct.lanes|=_e,$a|=_e;he=he.next}while(he!==null&&he!==s);if(ee===null?O=_:ee.next=F,!p(_,e.memoizedState)&&(Jn=!0,ve&&(u=bo,u!==null)))throw u;e.memoizedState=_,e.baseState=O,e.baseQueue=ee,m.lastRenderedState=_}return v===null&&(m.lanes=0),[e.memoizedState,m.dispatch]}function nh(e){var s=Xn(),u=s.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=e;var m=u.dispatch,v=u.pending,_=s.memoizedState;if(v!==null){u.pending=null;var O=v=v.next;do _=e(_,O.action),O=O.next;while(O!==v);p(_,s.memoizedState)||(Jn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),u.lastRenderedState=_}return[_,m]}function M1(e,s,u){var m=Ct,v=Xn(),_=Ft;if(_){if(u===void 0)throw Error(o(407));u=u()}else u=s();var O=!p((dn||v).memoizedState,u);if(O&&(v.memoizedState=u,Jn=!0),v=v.queue,ah(L1.bind(null,m,v,e),[e]),v.getSnapshot!==s||O||$n!==null&&$n.memoizedState.tag&1){if(m.flags|=2048,Ao(9,{destroy:void 0},D1.bind(null,m,v,u,s),null),xn===null)throw Error(o(349));_||(ua&127)!==0||k1(m,s,u)}return u}function k1(e,s,u){e.flags|=16384,e={getSnapshot:s,value:u},s=Ct.updateQueue,s===null?(s=Yc(),Ct.updateQueue=s,s.stores=[e]):(u=s.stores,u===null?s.stores=[e]:u.push(e))}function D1(e,s,u,m){s.value=u,s.getSnapshot=m,B1(s)&&U1(e)}function L1(e,s,u){return u(function(){B1(s)&&U1(e)})}function B1(e){var s=e.getSnapshot;e=e.value;try{var u=s();return!p(e,u)}catch{return!0}}function U1(e){var s=Ti(e,2);s!==null&&qs(s,e,2)}function sh(e){var s=Is();if(typeof e=="function"){var u=e;if(e=u(),Bi){dt(!0);try{u()}finally{dt(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},s}function P1(e,s,u,m){return e.baseState=u,th(e,dn,typeof m=="function"?m:da)}function ww(e,s,u,m,v){if(Zc(e))throw Error(o(485));if(e=s.action,e!==null){var _={payload:v,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){_.listeners.push(O)}};J.T!==null?u(!0):_.isTransition=!1,m(_),u=s.pending,u===null?(_.next=s.pending=_,z1(s,_)):(_.next=u.next,s.pending=u.next=_)}}function z1(e,s){var u=s.action,m=s.payload,v=e.state;if(s.isTransition){var _=J.T,O={};J.T=O;try{var F=u(v,m),ee=J.S;ee!==null&&ee(O,F),F1(e,s,F)}catch(he){rh(e,s,he)}finally{_!==null&&O.types!==null&&(_.types=O.types),J.T=_}}else try{_=u(v,m),F1(e,s,_)}catch(he){rh(e,s,he)}}function F1(e,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){H1(e,s,m)},function(m){return rh(e,s,m)}):H1(e,s,u)}function H1(e,s,u){s.status="fulfilled",s.value=u,q1(s),e.state=u,s=e.pending,s!==null&&(u=s.next,u===s?e.pending=null:(u=u.next,s.next=u,z1(e,u)))}function rh(e,s,u){var m=e.pending;if(e.pending=null,m!==null){m=m.next;do s.status="rejected",s.reason=u,q1(s),s=s.next;while(s!==m)}e.action=null}function q1(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function V1(e,s){return s}function G1(e,s){if(Ft){var u=xn.formState;if(u!==null){e:{var m=Ct;if(Ft){if(_n){t:{for(var v=_n,_=yr;v.nodeType!==8;){if(!_){v=null;break t}if(v=br(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){_n=br(v.nextSibling),m=v.data==="F!";break e}}qa(m)}m=!1}m&&(s=u[0])}}return u=Is(),u.memoizedState=u.baseState=s,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V1,lastRenderedState:s},u.queue=m,u=ug.bind(null,Ct,m),m.dispatch=u,m=sh(!1),_=uh.bind(null,Ct,!1,m.queue),m=Is(),v={state:s,dispatch:null,action:e,pending:null},m.queue=v,u=ww.bind(null,Ct,v,_,u),v.dispatch=u,m.memoizedState=e,[s,u,!1]}function Y1(e){var s=Xn();return X1(s,dn,e)}function X1(e,s,u){if(s=th(e,s,V1)[0],e=Qc(da)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var m=Al(s)}catch(O){throw O===vo?Uc:O}else m=s;s=Xn();var v=s.queue,_=v.dispatch;return u!==s.memoizedState&&(Ct.flags|=2048,Ao(9,{destroy:void 0},bw.bind(null,v,u),null)),[m,_,e]}function bw(e,s){e.action=s}function Q1(e){var s=Xn(),u=dn;if(u!==null)return X1(s,u,e);Xn(),s=s.memoizedState,u=Xn();var m=u.queue.dispatch;return u.memoizedState=e,[s,m,!1]}function Ao(e,s,u,m){return e={tag:e,create:u,deps:m,inst:s,next:null},s=Ct.updateQueue,s===null&&(s=Yc(),Ct.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=e.next=e:(m=u.next,u.next=e,e.next=m,s.lastEffect=e),e}function W1(){return Xn().memoizedState}function Wc(e,s,u,m){var v=Is();Ct.flags|=e,v.memoizedState=Ao(1|s,{destroy:void 0},u,m===void 0?null:m)}function Kc(e,s,u,m){var v=Xn();m=m===void 0?null:m;var _=v.memoizedState.inst;dn!==null&&m!==null&&Wd(m,dn.memoizedState.deps)?v.memoizedState=Ao(s,_,u,m):(Ct.flags|=e,v.memoizedState=Ao(1|s,_,u,m))}function K1(e,s){Wc(8390656,8,e,s)}function ah(e,s){Kc(2048,8,e,s)}function vw(e){Ct.flags|=4;var s=Ct.updateQueue;if(s===null)s=Yc(),Ct.updateQueue=s,s.events=[e];else{var u=s.events;u===null?s.events=[e]:u.push(e)}}function Z1(e){var s=Xn().memoizedState;return vw({ref:s,nextImpl:e}),function(){if((en&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function $1(e,s){return Kc(4,2,e,s)}function J1(e,s){return Kc(4,4,e,s)}function eg(e,s){if(typeof s=="function"){e=e();var u=s(e);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function tg(e,s,u){u=u!=null?u.concat([e]):null,Kc(4,4,eg.bind(null,s,e),u)}function ih(){}function ng(e,s){var u=Xn();s=s===void 0?null:s;var m=u.memoizedState;return s!==null&&Wd(s,m[1])?m[0]:(u.memoizedState=[e,s],e)}function sg(e,s){var u=Xn();s=s===void 0?null:s;var m=u.memoizedState;if(s!==null&&Wd(s,m[1]))return m[0];if(m=e(),Bi){dt(!0);try{e()}finally{dt(!1)}}return u.memoizedState=[m,s],m}function oh(e,s,u){return u===void 0||(ua&1073741824)!==0&&(Bt&261930)===0?e.memoizedState=s:(e.memoizedState=u,e=rm(),Ct.lanes|=e,$a|=e,u)}function rg(e,s,u,m){return p(u,s)?u:So.current!==null?(e=oh(e,u,m),p(e,s)||(Jn=!0),e):(ua&42)===0||(ua&1073741824)!==0&&(Bt&261930)===0?(Jn=!0,e.memoizedState=u):(e=rm(),Ct.lanes|=e,$a|=e,s)}function ag(e,s,u,m,v){var _=oe.p;oe.p=_!==0&&8>_?_:8;var O=J.T,F={};J.T=F,uh(e,!1,s,u);try{var ee=v(),he=J.S;if(he!==null&&he(F,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var ve=pw(ee,m);Nl(e,s,ve,sr(e))}else Nl(e,s,m,sr(e))}catch(_e){Nl(e,s,{then:function(){},status:"rejected",reason:_e},sr())}finally{oe.p=_,O!==null&&F.types!==null&&(O.types=F.types),J.T=O}}function Cw(){}function lh(e,s,u,m){if(e.tag!==5)throw Error(o(476));var v=ig(e).queue;ag(e,v,s,ke,u===null?Cw:function(){return og(e),u(m)})}function ig(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:ke},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:u},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function og(e){var s=ig(e);s.next===null&&(s=e.alternate.memoizedState),Nl(e,s.next.queue,{},sr())}function ch(){return ys(Vl)}function lg(){return Xn().memoizedState}function cg(){return Xn().memoizedState}function Sw(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var u=sr();e=Ya(u);var m=Xa(s,e,u);m!==null&&(qs(m,s,u),Cl(m,s,u)),s={cache:Ud()},e.payload=s;return}s=s.return}}function _w(e,s,u){var m=sr();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zc(e)?dg(s,u):(u=Nd(e,s,u,m),u!==null&&(qs(u,e,m),hg(u,s,m)))}function ug(e,s,u){var m=sr();Nl(e,s,u,m)}function Nl(e,s,u,m){var v={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Zc(e))dg(s,v);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var O=s.lastRenderedState,F=_(O,u);if(v.hasEagerState=!0,v.eagerState=F,p(F,O))return Oc(e,s,v,0),xn===null&&Rc(),!1}catch{}finally{}if(u=Nd(e,s,v,m),u!==null)return qs(u,e,m),hg(u,s,m),!0}return!1}function uh(e,s,u,m){if(m={lane:2,revertLane:Hh(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Zc(e)){if(s)throw Error(o(479))}else s=Nd(e,u,m,2),s!==null&&qs(s,e,2)}function Zc(e){var s=e.alternate;return e===Ct||s!==null&&s===Ct}function dg(e,s){_o=Vc=!0;var u=e.pending;u===null?s.next=s:(s.next=u.next,u.next=s),e.pending=s}function hg(e,s,u){if((u&4194048)!==0){var m=s.lanes;m&=e.pendingLanes,u|=m,s.lanes=u,Mn(e,u)}}var Tl={readContext:ys,use:Xc,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useLayoutEffect:zn,useInsertionEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useSyncExternalStore:zn,useId:zn,useHostTransitionStatus:zn,useFormState:zn,useActionState:zn,useOptimistic:zn,useMemoCache:zn,useCacheRefresh:zn};Tl.useEffectEvent=zn;var fg={readContext:ys,use:Xc,useCallback:function(e,s){return Is().memoizedState=[e,s===void 0?null:s],e},useContext:ys,useEffect:K1,useImperativeHandle:function(e,s,u){u=u!=null?u.concat([e]):null,Wc(4194308,4,eg.bind(null,s,e),u)},useLayoutEffect:function(e,s){return Wc(4194308,4,e,s)},useInsertionEffect:function(e,s){Wc(4,2,e,s)},useMemo:function(e,s){var u=Is();s=s===void 0?null:s;var m=e();if(Bi){dt(!0);try{e()}finally{dt(!1)}}return u.memoizedState=[m,s],m},useReducer:function(e,s,u){var m=Is();if(u!==void 0){var v=u(s);if(Bi){dt(!0);try{u(s)}finally{dt(!1)}}}else v=s;return m.memoizedState=m.baseState=v,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:v},m.queue=e,e=e.dispatch=_w.bind(null,Ct,e),[m.memoizedState,e]},useRef:function(e){var s=Is();return e={current:e},s.memoizedState=e},useState:function(e){e=sh(e);var s=e.queue,u=ug.bind(null,Ct,s);return s.dispatch=u,[e.memoizedState,u]},useDebugValue:ih,useDeferredValue:function(e,s){var u=Is();return oh(u,e,s)},useTransition:function(){var e=sh(!1);return e=ag.bind(null,Ct,e.queue,!0,!1),Is().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,u){var m=Ct,v=Is();if(Ft){if(u===void 0)throw Error(o(407));u=u()}else{if(u=s(),xn===null)throw Error(o(349));(Bt&127)!==0||k1(m,s,u)}v.memoizedState=u;var _={value:u,getSnapshot:s};return v.queue=_,K1(L1.bind(null,m,_,e),[e]),m.flags|=2048,Ao(9,{destroy:void 0},D1.bind(null,m,_,u,s),null),u},useId:function(){var e=Is(),s=xn.identifierPrefix;if(Ft){var u=Yr,m=Gr;u=(m&~(1<<32-ft(m)-1)).toString(32)+u,s="_"+s+"R_"+u,u=Gc++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=xw++,s="_"+s+"r_"+u.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:ch,useFormState:G1,useActionState:G1,useOptimistic:function(e){var s=Is();s.memoizedState=s.baseState=e;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=uh.bind(null,Ct,!0,u),u.dispatch=s,[e,s]},useMemoCache:eh,useCacheRefresh:function(){return Is().memoizedState=Sw.bind(null,Ct)},useEffectEvent:function(e){var s=Is(),u={impl:e};return s.memoizedState=u,function(){if((en&2)!==0)throw Error(o(440));return u.impl.apply(void 0,arguments)}}},dh={readContext:ys,use:Xc,useCallback:ng,useContext:ys,useEffect:ah,useImperativeHandle:tg,useInsertionEffect:$1,useLayoutEffect:J1,useMemo:sg,useReducer:Qc,useRef:W1,useState:function(){return Qc(da)},useDebugValue:ih,useDeferredValue:function(e,s){var u=Xn();return rg(u,dn.memoizedState,e,s)},useTransition:function(){var e=Qc(da)[0],s=Xn().memoizedState;return[typeof e=="boolean"?e:Al(e),s]},useSyncExternalStore:M1,useId:lg,useHostTransitionStatus:ch,useFormState:Y1,useActionState:Y1,useOptimistic:function(e,s){var u=Xn();return P1(u,dn,e,s)},useMemoCache:eh,useCacheRefresh:cg};dh.useEffectEvent=Z1;var gg={readContext:ys,use:Xc,useCallback:ng,useContext:ys,useEffect:ah,useImperativeHandle:tg,useInsertionEffect:$1,useLayoutEffect:J1,useMemo:sg,useReducer:nh,useRef:W1,useState:function(){return nh(da)},useDebugValue:ih,useDeferredValue:function(e,s){var u=Xn();return dn===null?oh(u,e,s):rg(u,dn.memoizedState,e,s)},useTransition:function(){var e=nh(da)[0],s=Xn().memoizedState;return[typeof e=="boolean"?e:Al(e),s]},useSyncExternalStore:M1,useId:lg,useHostTransitionStatus:ch,useFormState:Q1,useActionState:Q1,useOptimistic:function(e,s){var u=Xn();return dn!==null?P1(u,dn,e,s):(u.baseState=e,[e,u.queue.dispatch])},useMemoCache:eh,useCacheRefresh:cg};gg.useEffectEvent=Z1;function hh(e,s,u,m){s=e.memoizedState,u=u(m,s),u=u==null?s:N({},s,u),e.memoizedState=u,e.lanes===0&&(e.updateQueue.baseState=u)}var fh={enqueueSetState:function(e,s,u){e=e._reactInternals;var m=sr(),v=Ya(m);v.payload=s,u!=null&&(v.callback=u),s=Xa(e,v,m),s!==null&&(qs(s,e,m),Cl(s,e,m))},enqueueReplaceState:function(e,s,u){e=e._reactInternals;var m=sr(),v=Ya(m);v.tag=1,v.payload=s,u!=null&&(v.callback=u),s=Xa(e,v,m),s!==null&&(qs(s,e,m),Cl(s,e,m))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var u=sr(),m=Ya(u);m.tag=2,s!=null&&(m.callback=s),s=Xa(e,m,u),s!==null&&(qs(s,e,u),Cl(s,e,u))}};function mg(e,s,u,m,v,_,O){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(m,_,O):s.prototype&&s.prototype.isPureReactComponent?!y(u,m)||!y(v,_):!0}function pg(e,s,u,m){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,m),s.state!==e&&fh.enqueueReplaceState(s,s.state,null)}function Ui(e,s){var u=s;if("ref"in s){u={};for(var m in s)m!=="ref"&&(u[m]=s[m])}if(e=e.defaultProps){u===s&&(u=N({},u));for(var v in e)u[v]===void 0&&(u[v]=e[v])}return u}function xg(e){jc(e)}function yg(e){console.error(e)}function wg(e){jc(e)}function $c(e,s){try{var u=e.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(m){setTimeout(function(){throw m})}}function bg(e,s,u){try{var m=e.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function gh(e,s,u){return u=Ya(u),u.tag=3,u.payload={element:null},u.callback=function(){$c(e,s)},u}function vg(e){return e=Ya(e),e.tag=3,e}function Cg(e,s,u,m){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=m.value;e.payload=function(){return v(_)},e.callback=function(){bg(s,u,m)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(e.callback=function(){bg(s,u,m),typeof v!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var F=m.stack;this.componentDidCatch(m.value,{componentStack:F!==null?F:""})})}function Ew(e,s,u,m,v){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(s=u.alternate,s!==null&&yo(s,u,v,!0),u=Js.current,u!==null){switch(u.tag){case 31:case 13:return wr===null?uu():u.alternate===null&&Fn===0&&(Fn=3),u.flags&=-257,u.flags|=65536,u.lanes=v,m===Pc?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([m]):s.add(m),Ph(e,m,v)),!1;case 22:return u.flags|=65536,m===Pc?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([m]):u.add(m)),Ph(e,m,v)),!1}throw Error(o(435,u.tag))}return Ph(e,m,v),uu(),!1}if(Ft)return s=Js.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,m!==Md&&(e=Error(o(422),{cause:m}),xl(mr(e,u)))):(m!==Md&&(s=Error(o(423),{cause:m}),xl(mr(s,u))),e=e.current.alternate,e.flags|=65536,v&=-v,e.lanes|=v,m=mr(m,u),v=gh(e.stateNode,m,v),Vd(e,v),Fn!==4&&(Fn=2)),!1;var _=Error(o(520),{cause:m});if(_=mr(_,u),Ll===null?Ll=[_]:Ll.push(_),Fn!==4&&(Fn=2),s===null)return!0;m=mr(m,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,e=v&-v,u.lanes|=e,e=gh(u.stateNode,m,e),Vd(u,e),!1;case 1:if(s=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ja===null||!Ja.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=vg(v),Cg(v,e,u,m),Vd(u,v),!1}u=u.return}while(u!==null);return!1}var mh=Error(o(461)),Jn=!1;function ws(e,s,u,m){s.child=e===null?A1(s,null,u,m):Li(s,e.child,u,m)}function Sg(e,s,u,m,v){u=u.render;var _=s.ref;if("ref"in m){var O={};for(var F in m)F!=="ref"&&(O[F]=m[F])}else O=m;return Ii(s),m=Kd(e,s,u,O,_,v),F=Zd(),e!==null&&!Jn?($d(e,s,v),ha(e,s,v)):(Ft&&F&&Od(s),s.flags|=1,ws(e,s,m,v),s.child)}function _g(e,s,u,m,v){if(e===null){var _=u.type;return typeof _=="function"&&!Td(_)&&_.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=_,Eg(e,s,_,m,v)):(e=Mc(u.type,null,m,s,s.mode,v),e.ref=s.ref,e.return=s,s.child=e)}if(_=e.child,!Sh(e,v)){var O=_.memoizedProps;if(u=u.compare,u=u!==null?u:y,u(O,m)&&e.ref===s.ref)return ha(e,s,v)}return s.flags|=1,e=ia(_,m),e.ref=s.ref,e.return=s,s.child=e}function Eg(e,s,u,m,v){if(e!==null){var _=e.memoizedProps;if(y(_,m)&&e.ref===s.ref)if(Jn=!1,s.pendingProps=m=_,Sh(e,v))(e.flags&131072)!==0&&(Jn=!0);else return s.lanes=e.lanes,ha(e,s,v)}return ph(e,s,u,m,v)}function Ag(e,s,u,m){var v=m.children,_=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,e!==null){for(m=s.child=e.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~_}else m=0,s.child=null;return Ng(e,s,_,u,m)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Bc(s,_!==null?_.cachePool:null),_!==null?j1(s,_):Yd(),R1(s);else return m=s.lanes=536870912,Ng(e,s,_!==null?_.baseLanes|u:u,u,m)}else _!==null?(Bc(s,_.cachePool),j1(s,_),Wa(),s.memoizedState=null):(e!==null&&Bc(s,null),Yd(),Wa());return ws(e,s,v,u),s.child}function jl(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ng(e,s,u,m,v){var _=zd();return _=_===null?null:{parent:Zn._currentValue,pool:_},s.memoizedState={baseLanes:u,cachePool:_},e!==null&&Bc(s,null),Yd(),R1(s),e!==null&&yo(e,s,m,!0),s.childLanes=v,null}function Jc(e,s){return s=tu({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function Tg(e,s,u){return Li(s,e.child,null,u),e=Jc(s,s.pendingProps),e.flags|=2,er(s),s.memoizedState=null,e}function Aw(e,s,u){var m=s.pendingProps,v=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(Ft){if(m.mode==="hidden")return e=Jc(s,m),s.lanes=536870912,jl(null,e);if(Qd(s),(e=_n)?(e=zm(e,yr),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:Gr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},u=d1(e),u.return=s,s.child=u,xs=s,_n=null)):e=null,e===null)throw qa(s);return s.lanes=536870912,null}return Jc(s,m)}var _=e.memoizedState;if(_!==null){var O=_.dehydrated;if(Qd(s),v)if(s.flags&256)s.flags&=-257,s=Tg(e,s,u);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(o(558));else if(Jn||yo(e,s,u,!1),v=(u&e.childLanes)!==0,Jn||v){if(m=xn,m!==null&&(O=gs(m,u),O!==0&&O!==_.retryLane))throw _.retryLane=O,Ti(e,O),qs(m,e,O),mh;uu(),s=Tg(e,s,u)}else e=_.treeContext,_n=br(O.nextSibling),xs=s,Ft=!0,Ha=null,yr=!1,e!==null&&g1(s,e),s=Jc(s,m),s.flags|=4096;return s}return e=ia(e.child,{mode:m.mode,children:m.children}),e.ref=s.ref,s.child=e,e.return=s,e}function eu(e,s){var u=s.ref;if(u===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(o(284));(e===null||e.ref!==u)&&(s.flags|=4194816)}}function ph(e,s,u,m,v){return Ii(s),u=Kd(e,s,u,m,void 0,v),m=Zd(),e!==null&&!Jn?($d(e,s,v),ha(e,s,v)):(Ft&&m&&Od(s),s.flags|=1,ws(e,s,u,v),s.child)}function jg(e,s,u,m,v,_){return Ii(s),s.updateQueue=null,u=I1(s,m,u,v),O1(e),m=Zd(),e!==null&&!Jn?($d(e,s,_),ha(e,s,_)):(Ft&&m&&Od(s),s.flags|=1,ws(e,s,u,_),s.child)}function Rg(e,s,u,m,v){if(Ii(s),s.stateNode===null){var _=go,O=u.contextType;typeof O=="object"&&O!==null&&(_=ys(O)),_=new u(m,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=fh,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=m,_.state=s.memoizedState,_.refs={},Hd(s),O=u.contextType,_.context=typeof O=="object"&&O!==null?ys(O):go,_.state=s.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(hh(s,u,O,m),_.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(O=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),O!==_.state&&fh.enqueueReplaceState(_,_.state,null),_l(s,m,_,v),Sl(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),m=!0}else if(e===null){_=s.stateNode;var F=s.memoizedProps,ee=Ui(u,F);_.props=ee;var he=_.context,ve=u.contextType;O=go,typeof ve=="object"&&ve!==null&&(O=ys(ve));var _e=u.getDerivedStateFromProps;ve=typeof _e=="function"||typeof _.getSnapshotBeforeUpdate=="function",F=s.pendingProps!==F,ve||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(F||he!==O)&&pg(s,_,m,O),Ga=!1;var me=s.memoizedState;_.state=me,_l(s,m,_,v),Sl(),he=s.memoizedState,F||me!==he||Ga?(typeof _e=="function"&&(hh(s,u,_e,m),he=s.memoizedState),(ee=Ga||mg(s,u,ee,m,me,he,O))?(ve||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=he),_.props=m,_.state=he,_.context=O,m=ee):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{_=s.stateNode,qd(e,s),O=s.memoizedProps,ve=Ui(u,O),_.props=ve,_e=s.pendingProps,me=_.context,he=u.contextType,ee=go,typeof he=="object"&&he!==null&&(ee=ys(he)),F=u.getDerivedStateFromProps,(he=typeof F=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O!==_e||me!==ee)&&pg(s,_,m,ee),Ga=!1,me=s.memoizedState,_.state=me,_l(s,m,_,v),Sl();var we=s.memoizedState;O!==_e||me!==we||Ga||e!==null&&e.dependencies!==null&&Dc(e.dependencies)?(typeof F=="function"&&(hh(s,u,F,m),we=s.memoizedState),(ve=Ga||mg(s,u,ve,m,me,we,ee)||e!==null&&e.dependencies!==null&&Dc(e.dependencies))?(he||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,we,ee),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,we,ee)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||O===e.memoizedProps&&me===e.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&me===e.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=we),_.props=m,_.state=we,_.context=ee,m=ve):(typeof _.componentDidUpdate!="function"||O===e.memoizedProps&&me===e.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||O===e.memoizedProps&&me===e.memoizedState||(s.flags|=1024),m=!1)}return _=m,eu(e,s),m=(s.flags&128)!==0,_||m?(_=s.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,e!==null&&m?(s.child=Li(s,e.child,null,v),s.child=Li(s,null,u,v)):ws(e,s,u,v),s.memoizedState=_.state,e=s.child):e=ha(e,s,v),e}function Og(e,s,u,m){return Ri(),s.flags|=256,ws(e,s,u,m),s.child}var xh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yh(e){return{baseLanes:e,cachePool:b1()}}function wh(e,s,u){return e=e!==null?e.childLanes&~u:0,s&&(e|=nr),e}function Ig(e,s,u){var m=s.pendingProps,v=!1,_=(s.flags&128)!==0,O;if((O=_)||(O=e!==null&&e.memoizedState===null?!1:(Yn.current&2)!==0),O&&(v=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,e===null){if(Ft){if(v?Qa(s):Wa(),(e=_n)?(e=zm(e,yr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:Gr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},u=d1(e),u.return=s,s.child=u,xs=s,_n=null)):e=null,e===null)throw qa(s);return tf(e)?s.lanes=32:s.lanes=536870912,null}var F=m.children;return m=m.fallback,v?(Wa(),v=s.mode,F=tu({mode:"hidden",children:F},v),m=ji(m,v,u,null),F.return=s,m.return=s,F.sibling=m,s.child=F,m=s.child,m.memoizedState=yh(u),m.childLanes=wh(e,O,u),s.memoizedState=xh,jl(null,m)):(Qa(s),bh(s,F))}var ee=e.memoizedState;if(ee!==null&&(F=ee.dehydrated,F!==null)){if(_)s.flags&256?(Qa(s),s.flags&=-257,s=vh(e,s,u)):s.memoizedState!==null?(Wa(),s.child=e.child,s.flags|=128,s=null):(Wa(),F=m.fallback,v=s.mode,m=tu({mode:"visible",children:m.children},v),F=ji(F,v,u,null),F.flags|=2,m.return=s,F.return=s,m.sibling=F,s.child=m,Li(s,e.child,null,u),m=s.child,m.memoizedState=yh(u),m.childLanes=wh(e,O,u),s.memoizedState=xh,s=jl(null,m));else if(Qa(s),tf(F)){if(O=F.nextSibling&&F.nextSibling.dataset,O)var he=O.dgst;O=he,m=Error(o(419)),m.stack="",m.digest=O,xl({value:m,source:null,stack:null}),s=vh(e,s,u)}else if(Jn||yo(e,s,u,!1),O=(u&e.childLanes)!==0,Jn||O){if(O=xn,O!==null&&(m=gs(O,u),m!==0&&m!==ee.retryLane))throw ee.retryLane=m,Ti(e,m),qs(O,e,m),mh;ef(F)||uu(),s=vh(e,s,u)}else ef(F)?(s.flags|=192,s.child=e.child,s=null):(e=ee.treeContext,_n=br(F.nextSibling),xs=s,Ft=!0,Ha=null,yr=!1,e!==null&&g1(s,e),s=bh(s,m.children),s.flags|=4096);return s}return v?(Wa(),F=m.fallback,v=s.mode,ee=e.child,he=ee.sibling,m=ia(ee,{mode:"hidden",children:m.children}),m.subtreeFlags=ee.subtreeFlags&65011712,he!==null?F=ia(he,F):(F=ji(F,v,u,null),F.flags|=2),F.return=s,m.return=s,m.sibling=F,s.child=m,jl(null,m),m=s.child,F=e.child.memoizedState,F===null?F=yh(u):(v=F.cachePool,v!==null?(ee=Zn._currentValue,v=v.parent!==ee?{parent:ee,pool:ee}:v):v=b1(),F={baseLanes:F.baseLanes|u,cachePool:v}),m.memoizedState=F,m.childLanes=wh(e,O,u),s.memoizedState=xh,jl(e.child,m)):(Qa(s),u=e.child,e=u.sibling,u=ia(u,{mode:"visible",children:m.children}),u.return=s,u.sibling=null,e!==null&&(O=s.deletions,O===null?(s.deletions=[e],s.flags|=16):O.push(e)),s.child=u,s.memoizedState=null,u)}function bh(e,s){return s=tu({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function tu(e,s){return e=$s(22,e,null,s),e.lanes=0,e}function vh(e,s,u){return Li(s,e.child,null,u),e=bh(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Mg(e,s,u){e.lanes|=s;var m=e.alternate;m!==null&&(m.lanes|=s),Ld(e.return,s,u)}function Ch(e,s,u,m,v,_){var O=e.memoizedState;O===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:v,treeForkCount:_}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=m,O.tail=u,O.tailMode=v,O.treeForkCount=_)}function kg(e,s,u){var m=s.pendingProps,v=m.revealOrder,_=m.tail;m=m.children;var O=Yn.current,F=(O&2)!==0;if(F?(O=O&1|2,s.flags|=128):O&=1,Le(Yn,O),ws(e,s,m,u),m=Ft?pl:0,!F&&e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mg(e,u,s);else if(e.tag===19)Mg(e,u,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(v){case"forwards":for(u=s.child,v=null;u!==null;)e=u.alternate,e!==null&&qc(e)===null&&(v=u),u=u.sibling;u=v,u===null?(v=s.child,s.child=null):(v=u.sibling,u.sibling=null),Ch(s,!1,v,u,_,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=s.child,s.child=null;v!==null;){if(e=v.alternate,e!==null&&qc(e)===null){s.child=v;break}e=v.sibling,v.sibling=u,u=v,v=e}Ch(s,!0,u,null,_,m);break;case"together":Ch(s,!1,null,null,void 0,m);break;default:s.memoizedState=null}return s.child}function ha(e,s,u){if(e!==null&&(s.dependencies=e.dependencies),$a|=s.lanes,(u&s.childLanes)===0)if(e!==null){if(yo(e,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(o(153));if(s.child!==null){for(e=s.child,u=ia(e,e.pendingProps),s.child=u,u.return=s;e.sibling!==null;)e=e.sibling,u=u.sibling=ia(e,e.pendingProps),u.return=s;u.sibling=null}return s.child}function Sh(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Dc(e)))}function Nw(e,s,u){switch(s.tag){case 3:De(s,s.stateNode.containerInfo),Va(s,Zn,e.memoizedState.cache),Ri();break;case 27:case 5:Je(s);break;case 4:De(s,s.stateNode.containerInfo);break;case 10:Va(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Qd(s),null;break;case 13:var m=s.memoizedState;if(m!==null)return m.dehydrated!==null?(Qa(s),s.flags|=128,null):(u&s.child.childLanes)!==0?Ig(e,s,u):(Qa(s),e=ha(e,s,u),e!==null?e.sibling:null);Qa(s);break;case 19:var v=(e.flags&128)!==0;if(m=(u&s.childLanes)!==0,m||(yo(e,s,u,!1),m=(u&s.childLanes)!==0),v){if(m)return kg(e,s,u);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Le(Yn,Yn.current),m)break;return null;case 22:return s.lanes=0,Ag(e,s,u,s.pendingProps);case 24:Va(s,Zn,e.memoizedState.cache)}return ha(e,s,u)}function Dg(e,s,u){if(e!==null)if(e.memoizedProps!==s.pendingProps)Jn=!0;else{if(!Sh(e,u)&&(s.flags&128)===0)return Jn=!1,Nw(e,s,u);Jn=(e.flags&131072)!==0}else Jn=!1,Ft&&(s.flags&1048576)!==0&&f1(s,pl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var m=s.pendingProps;if(e=ki(s.elementType),s.type=e,typeof e=="function")Td(e)?(m=Ui(e,m),s.tag=1,s=Rg(null,s,e,m,u)):(s.tag=0,s=ph(null,s,e,m,u));else{if(e!=null){var v=e.$$typeof;if(v===K){s.tag=11,s=Sg(null,s,e,m,u);break e}else if(v===V){s.tag=14,s=_g(null,s,e,m,u);break e}}throw s=Re(e)||e,Error(o(306,s,""))}}return s;case 0:return ph(e,s,s.type,s.pendingProps,u);case 1:return m=s.type,v=Ui(m,s.pendingProps),Rg(e,s,m,v,u);case 3:e:{if(De(s,s.stateNode.containerInfo),e===null)throw Error(o(387));m=s.pendingProps;var _=s.memoizedState;v=_.element,qd(e,s),_l(s,m,null,u);var O=s.memoizedState;if(m=O.cache,Va(s,Zn,m),m!==_.cache&&Bd(s,[Zn],u,!0),Sl(),m=O.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=Og(e,s,m,u);break e}else if(m!==v){v=mr(Error(o(424)),s),xl(v),s=Og(e,s,m,u);break e}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(_n=br(e.firstChild),xs=s,Ft=!0,Ha=null,yr=!0,u=A1(s,null,m,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ri(),m===v){s=ha(e,s,u);break e}ws(e,s,m,u)}s=s.child}return s;case 26:return eu(e,s),e===null?(u=Ym(s.type,null,s.pendingProps,null))?s.memoizedState=u:Ft||(u=s.type,e=s.pendingProps,m=xu(Ee.current).createElement(u),m[kn]=s,m[Zt]=e,bs(m,u,e),Un(m),s.stateNode=m):s.memoizedState=Ym(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Je(s),e===null&&Ft&&(m=s.stateNode=qm(s.type,s.pendingProps,Ee.current),xs=s,yr=!0,v=_n,si(s.type)?(nf=v,_n=br(m.firstChild)):_n=v),ws(e,s,s.pendingProps.children,u),eu(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Ft&&((v=m=_n)&&(m=sb(m,s.type,s.pendingProps,yr),m!==null?(s.stateNode=m,xs=s,_n=br(m.firstChild),yr=!1,v=!0):v=!1),v||qa(s)),Je(s),v=s.type,_=s.pendingProps,O=e!==null?e.memoizedProps:null,m=_.children,Zh(v,_)?m=null:O!==null&&Zh(v,O)&&(s.flags|=32),s.memoizedState!==null&&(v=Kd(e,s,yw,null,null,u),Vl._currentValue=v),eu(e,s),ws(e,s,m,u),s.child;case 6:return e===null&&Ft&&((e=u=_n)&&(u=rb(u,s.pendingProps,yr),u!==null?(s.stateNode=u,xs=s,_n=null,e=!0):e=!1),e||qa(s)),null;case 13:return Ig(e,s,u);case 4:return De(s,s.stateNode.containerInfo),m=s.pendingProps,e===null?s.child=Li(s,null,m,u):ws(e,s,m,u),s.child;case 11:return Sg(e,s,s.type,s.pendingProps,u);case 7:return ws(e,s,s.pendingProps,u),s.child;case 8:return ws(e,s,s.pendingProps.children,u),s.child;case 12:return ws(e,s,s.pendingProps.children,u),s.child;case 10:return m=s.pendingProps,Va(s,s.type,m.value),ws(e,s,m.children,u),s.child;case 9:return v=s.type._context,m=s.pendingProps.children,Ii(s),v=ys(v),m=m(v),s.flags|=1,ws(e,s,m,u),s.child;case 14:return _g(e,s,s.type,s.pendingProps,u);case 15:return Eg(e,s,s.type,s.pendingProps,u);case 19:return kg(e,s,u);case 31:return Aw(e,s,u);case 22:return Ag(e,s,u,s.pendingProps);case 24:return Ii(s),m=ys(Zn),e===null?(v=zd(),v===null&&(v=xn,_=Ud(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),s.memoizedState={parent:m,cache:v},Hd(s),Va(s,Zn,v)):((e.lanes&u)!==0&&(qd(e,s),_l(s,null,null,u),Sl()),v=e.memoizedState,_=s.memoizedState,v.parent!==m?(v={parent:m,cache:m},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),Va(s,Zn,m)):(m=_.cache,Va(s,Zn,m),m!==v.cache&&Bd(s,[Zn],u,!0))),ws(e,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function fa(e){e.flags|=4}function _h(e,s,u,m,v){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(v&335544128)===v)if(e.stateNode.complete)e.flags|=8192;else if(lm())e.flags|=8192;else throw Di=Pc,Fd}else e.flags&=-16777217}function Lg(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Zm(s))if(lm())e.flags|=8192;else throw Di=Pc,Fd}function nu(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?zt():536870912,e.lanes|=s,Ro|=s)}function Rl(e,s){if(!Ft)switch(e.tailMode){case"hidden":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?e.tail=null:u.sibling=null;break;case"collapsed":u=e.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:m.sibling=null}}function En(e){var s=e.alternate!==null&&e.alternate.child===e.child,u=0,m=0;if(s)for(var v=e.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=e,v=v.sibling;else for(v=e.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=e,v=v.sibling;return e.subtreeFlags|=m,e.childLanes=u,s}function Tw(e,s,u){var m=s.pendingProps;switch(Id(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(s),null;case 1:return En(s),null;case 3:return u=s.stateNode,m=null,e!==null&&(m=e.memoizedState.cache),s.memoizedState.cache!==m&&(s.flags|=2048),ca(Zn),Ce(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(xo(s)?fa(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kd())),En(s),null;case 26:var v=s.type,_=s.memoizedState;return e===null?(fa(s),_!==null?(En(s),Lg(s,_)):(En(s),_h(s,v,null,m,u))):_?_!==e.memoizedState?(fa(s),En(s),Lg(s,_)):(En(s),s.flags&=-16777217):(e=e.memoizedProps,e!==m&&fa(s),En(s),_h(s,v,e,m,u)),null;case 27:if(gt(s),u=Ee.current,v=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==m&&fa(s);else{if(!m){if(s.stateNode===null)throw Error(o(166));return En(s),null}e=Ue.current,xo(s)?m1(s):(e=qm(v,m,u),s.stateNode=e,fa(s))}return En(s),null;case 5:if(gt(s),v=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==m&&fa(s);else{if(!m){if(s.stateNode===null)throw Error(o(166));return En(s),null}if(_=Ue.current,xo(s))m1(s);else{var O=xu(Ee.current);switch(_){case 1:_=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=O.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?O.createElement("select",{is:m.is}):O.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?O.createElement(v,{is:m.is}):O.createElement(v)}}_[kn]=s,_[Zt]=m;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)_.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=_;e:switch(bs(_,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&fa(s)}}return En(s),_h(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,u),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==m&&fa(s);else{if(typeof m!="string"&&s.stateNode===null)throw Error(o(166));if(e=Ee.current,xo(s)){if(e=s.stateNode,u=s.memoizedProps,m=null,v=xs,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}e[kn]=s,e=!!(e.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||Im(e.nodeValue,u)),e||qa(s,!0)}else e=xu(e).createTextNode(m),e[kn]=s,s.stateNode=e}return En(s),null;case 31:if(u=s.memoizedState,e===null||e.memoizedState!==null){if(m=xo(s),u!==null){if(e===null){if(!m)throw Error(o(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[kn]=s}else Ri(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;En(s),e=!1}else u=kd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),e=!0;if(!e)return s.flags&256?(er(s),s):(er(s),null);if((s.flags&128)!==0)throw Error(o(558))}return En(s),null;case 13:if(m=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(v=xo(s),m!==null&&m.dehydrated!==null){if(e===null){if(!v)throw Error(o(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[kn]=s}else Ri(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;En(s),v=!1}else v=kd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(er(s),s):(er(s),null)}return er(s),(s.flags&128)!==0?(s.lanes=u,s):(u=m!==null,e=e!==null&&e.memoizedState!==null,u&&(m=s.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==v&&(m.flags|=2048)),u!==e&&u&&(s.child.flags|=8192),nu(s,s.updateQueue),En(s),null);case 4:return Ce(),e===null&&Yh(s.stateNode.containerInfo),En(s),null;case 10:return ca(s.type),En(s),null;case 19:if(ye(Yn),m=s.memoizedState,m===null)return En(s),null;if(v=(s.flags&128)!==0,_=m.rendering,_===null)if(v)Rl(m,!1);else{if(Fn!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(_=qc(e),_!==null){for(s.flags|=128,Rl(m,!1),e=_.updateQueue,s.updateQueue=e,nu(s,e),s.subtreeFlags=0,e=u,u=s.child;u!==null;)u1(u,e),u=u.sibling;return Le(Yn,Yn.current&1|2),Ft&&oa(s,m.treeForkCount),s.child}e=e.sibling}m.tail!==null&&Fe()>ou&&(s.flags|=128,v=!0,Rl(m,!1),s.lanes=4194304)}else{if(!v)if(e=qc(_),e!==null){if(s.flags|=128,v=!0,e=e.updateQueue,s.updateQueue=e,nu(s,e),Rl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Ft)return En(s),null}else 2*Fe()-m.renderingStartTime>ou&&u!==536870912&&(s.flags|=128,v=!0,Rl(m,!1),s.lanes=4194304);m.isBackwards?(_.sibling=s.child,s.child=_):(e=m.last,e!==null?e.sibling=_:s.child=_,m.last=_)}return m.tail!==null?(e=m.tail,m.rendering=e,m.tail=e.sibling,m.renderingStartTime=Fe(),e.sibling=null,u=Yn.current,Le(Yn,v?u&1|2:u&1),Ft&&oa(s,m.treeForkCount),e):(En(s),null);case 22:case 23:return er(s),Xd(),m=s.memoizedState!==null,e!==null?e.memoizedState!==null!==m&&(s.flags|=8192):m&&(s.flags|=8192),m?(u&536870912)!==0&&(s.flags&128)===0&&(En(s),s.subtreeFlags&6&&(s.flags|=8192)):En(s),u=s.updateQueue,u!==null&&nu(s,u.retryQueue),u=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),m=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),m!==u&&(s.flags|=2048),e!==null&&ye(Mi),null;case 24:return u=null,e!==null&&(u=e.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ca(Zn),En(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function jw(e,s){switch(Id(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return ca(Zn),Ce(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return gt(s),null;case 31:if(s.memoizedState!==null){if(er(s),s.alternate===null)throw Error(o(340));Ri()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if(er(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ri()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return ye(Yn),null;case 4:return Ce(),null;case 10:return ca(s.type),null;case 22:case 23:return er(s),Xd(),e!==null&&ye(Mi),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return ca(Zn),null;case 25:return null;default:return null}}function Bg(e,s){switch(Id(s),s.tag){case 3:ca(Zn),Ce();break;case 26:case 27:case 5:gt(s);break;case 4:Ce();break;case 31:s.memoizedState!==null&&er(s);break;case 13:er(s);break;case 19:ye(Yn);break;case 10:ca(s.type);break;case 22:case 23:er(s),Xd(),e!==null&&ye(Mi);break;case 24:ca(Zn)}}function Ol(e,s){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&e)===e){m=void 0;var _=u.create,O=u.inst;m=_(),O.destroy=m}u=u.next}while(u!==v)}}catch(F){ln(s,s.return,F)}}function Ka(e,s,u){try{var m=s.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var _=v.next;m=_;do{if((m.tag&e)===e){var O=m.inst,F=O.destroy;if(F!==void 0){O.destroy=void 0,v=s;var ee=u,he=F;try{he()}catch(ve){ln(v,ee,ve)}}}m=m.next}while(m!==_)}}catch(ve){ln(s,s.return,ve)}}function Ug(e){var s=e.updateQueue;if(s!==null){var u=e.stateNode;try{T1(s,u)}catch(m){ln(e,e.return,m)}}}function Pg(e,s,u){u.props=Ui(e.type,e.memoizedProps),u.state=e.memoizedState;try{u.componentWillUnmount()}catch(m){ln(e,s,m)}}function Il(e,s){try{var u=e.ref;if(u!==null){switch(e.tag){case 26:case 27:case 5:var m=e.stateNode;break;case 30:m=e.stateNode;break;default:m=e.stateNode}typeof u=="function"?e.refCleanup=u(m):u.current=m}}catch(v){ln(e,s,v)}}function Xr(e,s){var u=e.ref,m=e.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(v){ln(e,s,v)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){ln(e,s,v)}else u.current=null}function zg(e){var s=e.type,u=e.memoizedProps,m=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(v){ln(e,e.return,v)}}function Eh(e,s,u){try{var m=e.stateNode;Zw(m,e.type,u,s),m[Zt]=s}catch(v){ln(e,e.return,v)}}function Fg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&si(e.type)||e.tag===4}function Ah(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&si(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nh(e,s,u){var m=e.tag;if(m===5||m===6)e=e.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(e,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(e),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=Ls));else if(m!==4&&(m===27&&si(e.type)&&(u=e.stateNode,s=null),e=e.child,e!==null))for(Nh(e,s,u),e=e.sibling;e!==null;)Nh(e,s,u),e=e.sibling}function su(e,s,u){var m=e.tag;if(m===5||m===6)e=e.stateNode,s?u.insertBefore(e,s):u.appendChild(e);else if(m!==4&&(m===27&&si(e.type)&&(u=e.stateNode),e=e.child,e!==null))for(su(e,s,u),e=e.sibling;e!==null;)su(e,s,u),e=e.sibling}function Hg(e){var s=e.stateNode,u=e.memoizedProps;try{for(var m=e.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);bs(s,m,u),s[kn]=e,s[Zt]=u}catch(_){ln(e,e.return,_)}}var ga=!1,es=!1,Th=!1,qg=typeof WeakSet=="function"?WeakSet:Set,ds=null;function Rw(e,s){if(e=e.containerInfo,Wh=_u,e=B(e),z(e)){if("selectionStart"in e)var u={start:e.selectionStart,end:e.selectionEnd};else e:{u=(u=e.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var O=0,F=-1,ee=-1,he=0,ve=0,_e=e,me=null;t:for(;;){for(var we;_e!==u||v!==0&&_e.nodeType!==3||(F=O+v),_e!==_||m!==0&&_e.nodeType!==3||(ee=O+m),_e.nodeType===3&&(O+=_e.nodeValue.length),(we=_e.firstChild)!==null;)me=_e,_e=we;for(;;){if(_e===e)break t;if(me===u&&++he===v&&(F=O),me===_&&++ve===m&&(ee=O),(we=_e.nextSibling)!==null)break;_e=me,me=_e.parentNode}_e=we}u=F===-1||ee===-1?null:{start:F,end:ee}}else u=null}u=u||{start:0,end:0}}else u=null;for(Kh={focusedElem:e,selectionRange:u},_u=!1,ds=s;ds!==null;)if(s=ds,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,ds=e;else for(;ds!==null;){switch(s=ds,_=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(u=0;u<e.length;u++)v=e[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&_!==null){e=void 0,u=s,v=_.memoizedProps,_=_.memoizedState,m=u.stateNode;try{var Qe=Ui(u.type,v);e=m.getSnapshotBeforeUpdate(Qe,_),m.__reactInternalSnapshotBeforeUpdate=e}catch(ct){ln(u,u.return,ct)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,u=e.nodeType,u===9)Jh(e);else if(u===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Jh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=s.sibling,e!==null){e.return=s.return,ds=e;break}ds=s.return}}function Vg(e,s,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:pa(e,u),m&4&&Ol(5,u);break;case 1:if(pa(e,u),m&4)if(e=u.stateNode,s===null)try{e.componentDidMount()}catch(O){ln(u,u.return,O)}else{var v=Ui(u.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(v,s,e.__reactInternalSnapshotBeforeUpdate)}catch(O){ln(u,u.return,O)}}m&64&&Ug(u),m&512&&Il(u,u.return);break;case 3:if(pa(e,u),m&64&&(e=u.updateQueue,e!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{T1(e,s)}catch(O){ln(u,u.return,O)}}break;case 27:s===null&&m&4&&Hg(u);case 26:case 5:pa(e,u),s===null&&m&4&&zg(u),m&512&&Il(u,u.return);break;case 12:pa(e,u);break;case 31:pa(e,u),m&4&&Xg(e,u);break;case 13:pa(e,u),m&4&&Qg(e,u),m&64&&(e=u.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(u=Pw.bind(null,u),ab(e,u))));break;case 22:if(m=u.memoizedState!==null||ga,!m){s=s!==null&&s.memoizedState!==null||es,v=ga;var _=es;ga=m,(es=s)&&!_?xa(e,u,(u.subtreeFlags&8772)!==0):pa(e,u),ga=v,es=_}break;case 30:break;default:pa(e,u)}}function Gg(e){var s=e.alternate;s!==null&&(e.alternate=null,Gg(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&_s(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tn=null,Ps=!1;function ma(e,s,u){for(u=u.child;u!==null;)Yg(e,s,u),u=u.sibling}function Yg(e,s,u){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Rt,u)}catch{}switch(u.tag){case 26:es||Xr(u,s),ma(e,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:es||Xr(u,s);var m=Tn,v=Ps;si(u.type)&&(Tn=u.stateNode,Ps=!1),ma(e,s,u),Fl(u.stateNode),Tn=m,Ps=v;break;case 5:es||Xr(u,s);case 6:if(m=Tn,v=Ps,Tn=null,ma(e,s,u),Tn=m,Ps=v,Tn!==null)if(Ps)try{(Tn.nodeType===9?Tn.body:Tn.nodeName==="HTML"?Tn.ownerDocument.body:Tn).removeChild(u.stateNode)}catch(_){ln(u,s,_)}else try{Tn.removeChild(u.stateNode)}catch(_){ln(u,s,_)}break;case 18:Tn!==null&&(Ps?(e=Tn,Um(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,u.stateNode),Uo(e)):Um(Tn,u.stateNode));break;case 4:m=Tn,v=Ps,Tn=u.stateNode.containerInfo,Ps=!0,ma(e,s,u),Tn=m,Ps=v;break;case 0:case 11:case 14:case 15:Ka(2,u,s),es||Ka(4,u,s),ma(e,s,u);break;case 1:es||(Xr(u,s),m=u.stateNode,typeof m.componentWillUnmount=="function"&&Pg(u,s,m)),ma(e,s,u);break;case 21:ma(e,s,u);break;case 22:es=(m=es)||u.memoizedState!==null,ma(e,s,u),es=m;break;default:ma(e,s,u)}}function Xg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Uo(e)}catch(u){ln(s,s.return,u)}}}function Qg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Uo(e)}catch(u){ln(s,s.return,u)}}function Ow(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new qg),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new qg),s;default:throw Error(o(435,e.tag))}}function ru(e,s){var u=Ow(e);s.forEach(function(m){if(!u.has(m)){u.add(m);var v=zw.bind(null,e,m);m.then(v,v)}})}function zs(e,s){var u=s.deletions;if(u!==null)for(var m=0;m<u.length;m++){var v=u[m],_=e,O=s,F=O;e:for(;F!==null;){switch(F.tag){case 27:if(si(F.type)){Tn=F.stateNode,Ps=!1;break e}break;case 5:Tn=F.stateNode,Ps=!1;break e;case 3:case 4:Tn=F.stateNode.containerInfo,Ps=!0;break e}F=F.return}if(Tn===null)throw Error(o(160));Yg(_,O,v),Tn=null,Ps=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Wg(s,e),s=s.sibling}var Mr=null;function Wg(e,s){var u=e.alternate,m=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:zs(s,e),Fs(e),m&4&&(Ka(3,e,e.return),Ol(3,e),Ka(5,e,e.return));break;case 1:zs(s,e),Fs(e),m&512&&(es||u===null||Xr(u,u.return)),m&64&&ga&&(e=e.updateQueue,e!==null&&(m=e.callbacks,m!==null&&(u=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var v=Mr;if(zs(s,e),Fs(e),m&512&&(es||u===null||Xr(u,u.return)),m&4){var _=u!==null?u.memoizedState:null;if(m=e.memoizedState,u===null)if(m===null)if(e.stateNode===null){e:{m=e.type,u=e.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":_=v.getElementsByTagName("title")[0],(!_||_[dr]||_[kn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(m),v.head.insertBefore(_,v.querySelector("head > title"))),bs(_,m,u),_[kn]=e,Un(_),m=_;break e;case"link":var O=Wm("link","href",v).get(m+(u.href||""));if(O){for(var F=0;F<O.length;F++)if(_=O[F],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(F,1);break t}}_=v.createElement(m),bs(_,m,u),v.head.appendChild(_);break;case"meta":if(O=Wm("meta","content",v).get(m+(u.content||""))){for(F=0;F<O.length;F++)if(_=O[F],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(F,1);break t}}_=v.createElement(m),bs(_,m,u),v.head.appendChild(_);break;default:throw Error(o(468,m))}_[kn]=e,Un(_),m=_}e.stateNode=m}else Km(v,e.type,e.stateNode);else e.stateNode=Qm(v,m,e.memoizedProps);else _!==m?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,m===null?Km(v,e.type,e.stateNode):Qm(v,m,e.memoizedProps)):m===null&&e.stateNode!==null&&Eh(e,e.memoizedProps,u.memoizedProps)}break;case 27:zs(s,e),Fs(e),m&512&&(es||u===null||Xr(u,u.return)),u!==null&&m&4&&Eh(e,e.memoizedProps,u.memoizedProps);break;case 5:if(zs(s,e),Fs(e),m&512&&(es||u===null||Xr(u,u.return)),e.flags&32){v=e.stateNode;try{Ia(v,"")}catch(Qe){ln(e,e.return,Qe)}}m&4&&e.stateNode!=null&&(v=e.memoizedProps,Eh(e,v,u!==null?u.memoizedProps:v)),m&1024&&(Th=!0);break;case 6:if(zs(s,e),Fs(e),m&4){if(e.stateNode===null)throw Error(o(162));m=e.memoizedProps,u=e.stateNode;try{u.nodeValue=m}catch(Qe){ln(e,e.return,Qe)}}break;case 3:if(bu=null,v=Mr,Mr=yu(s.containerInfo),zs(s,e),Mr=v,Fs(e),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Uo(s.containerInfo)}catch(Qe){ln(e,e.return,Qe)}Th&&(Th=!1,Kg(e));break;case 4:m=Mr,Mr=yu(e.stateNode.containerInfo),zs(s,e),Fs(e),Mr=m;break;case 12:zs(s,e),Fs(e);break;case 31:zs(s,e),Fs(e),m&4&&(m=e.updateQueue,m!==null&&(e.updateQueue=null,ru(e,m)));break;case 13:zs(s,e),Fs(e),e.child.flags&8192&&e.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(iu=Fe()),m&4&&(m=e.updateQueue,m!==null&&(e.updateQueue=null,ru(e,m)));break;case 22:v=e.memoizedState!==null;var ee=u!==null&&u.memoizedState!==null,he=ga,ve=es;if(ga=he||v,es=ve||ee,zs(s,e),es=ve,ga=he,Fs(e),m&8192)e:for(s=e.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(u===null||ee||ga||es||Pi(e)),u=null,s=e;;){if(s.tag===5||s.tag===26){if(u===null){ee=u=s;try{if(_=ee.stateNode,v)O=_.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{F=ee.stateNode;var _e=ee.memoizedProps.style,me=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;F.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(Qe){ln(ee,ee.return,Qe)}}}else if(s.tag===6){if(u===null){ee=s;try{ee.stateNode.nodeValue=v?"":ee.memoizedProps}catch(Qe){ln(ee,ee.return,Qe)}}}else if(s.tag===18){if(u===null){ee=s;try{var we=ee.stateNode;v?Pm(we,!0):Pm(ee.stateNode,!1)}catch(Qe){ln(ee,ee.return,Qe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}m&4&&(m=e.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,ru(e,u))));break;case 19:zs(s,e),Fs(e),m&4&&(m=e.updateQueue,m!==null&&(e.updateQueue=null,ru(e,m)));break;case 30:break;case 21:break;default:zs(s,e),Fs(e)}}function Fs(e){var s=e.flags;if(s&2){try{for(var u,m=e.return;m!==null;){if(Fg(m)){u=m;break}m=m.return}if(u==null)throw Error(o(160));switch(u.tag){case 27:var v=u.stateNode,_=Ah(e);su(e,_,v);break;case 5:var O=u.stateNode;u.flags&32&&(Ia(O,""),u.flags&=-33);var F=Ah(e);su(e,F,O);break;case 3:case 4:var ee=u.stateNode.containerInfo,he=Ah(e);Nh(e,he,ee);break;default:throw Error(o(161))}}catch(ve){ln(e,e.return,ve)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Kg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Kg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function pa(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Vg(e,s.alternate,s),s=s.sibling}function Pi(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Ka(4,s,s.return),Pi(s);break;case 1:Xr(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&Pg(s,s.return,u),Pi(s);break;case 27:Fl(s.stateNode);case 26:case 5:Xr(s,s.return),Pi(s);break;case 22:s.memoizedState===null&&Pi(s);break;case 30:Pi(s);break;default:Pi(s)}e=e.sibling}}function xa(e,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var m=s.alternate,v=e,_=s,O=_.flags;switch(_.tag){case 0:case 11:case 15:xa(v,_,u),Ol(4,_);break;case 1:if(xa(v,_,u),m=_,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(he){ln(m,m.return,he)}if(m=_,v=m.updateQueue,v!==null){var F=m.stateNode;try{var ee=v.shared.hiddenCallbacks;if(ee!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ee.length;v++)N1(ee[v],F)}catch(he){ln(m,m.return,he)}}u&&O&64&&Ug(_),Il(_,_.return);break;case 27:Hg(_);case 26:case 5:xa(v,_,u),u&&m===null&&O&4&&zg(_),Il(_,_.return);break;case 12:xa(v,_,u);break;case 31:xa(v,_,u),u&&O&4&&Xg(v,_);break;case 13:xa(v,_,u),u&&O&4&&Qg(v,_);break;case 22:_.memoizedState===null&&xa(v,_,u),Il(_,_.return);break;case 30:break;default:xa(v,_,u)}s=s.sibling}}function jh(e,s){var u=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==u&&(e!=null&&e.refCount++,u!=null&&yl(u))}function Rh(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&yl(e))}function kr(e,s,u,m){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Zg(e,s,u,m),s=s.sibling}function Zg(e,s,u,m){var v=s.flags;switch(s.tag){case 0:case 11:case 15:kr(e,s,u,m),v&2048&&Ol(9,s);break;case 1:kr(e,s,u,m);break;case 3:kr(e,s,u,m),v&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&yl(e)));break;case 12:if(v&2048){kr(e,s,u,m),e=s.stateNode;try{var _=s.memoizedProps,O=_.id,F=_.onPostCommit;typeof F=="function"&&F(O,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ee){ln(s,s.return,ee)}}else kr(e,s,u,m);break;case 31:kr(e,s,u,m);break;case 13:kr(e,s,u,m);break;case 23:break;case 22:_=s.stateNode,O=s.alternate,s.memoizedState!==null?_._visibility&2?kr(e,s,u,m):Ml(e,s):_._visibility&2?kr(e,s,u,m):(_._visibility|=2,No(e,s,u,m,(s.subtreeFlags&10256)!==0||!1)),v&2048&&jh(O,s);break;case 24:kr(e,s,u,m),v&2048&&Rh(s.alternate,s);break;default:kr(e,s,u,m)}}function No(e,s,u,m,v){for(v=v&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=e,O=s,F=u,ee=m,he=O.flags;switch(O.tag){case 0:case 11:case 15:No(_,O,F,ee,v),Ol(8,O);break;case 23:break;case 22:var ve=O.stateNode;O.memoizedState!==null?ve._visibility&2?No(_,O,F,ee,v):Ml(_,O):(ve._visibility|=2,No(_,O,F,ee,v)),v&&he&2048&&jh(O.alternate,O);break;case 24:No(_,O,F,ee,v),v&&he&2048&&Rh(O.alternate,O);break;default:No(_,O,F,ee,v)}s=s.sibling}}function Ml(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=e,m=s,v=m.flags;switch(m.tag){case 22:Ml(u,m),v&2048&&jh(m.alternate,m);break;case 24:Ml(u,m),v&2048&&Rh(m.alternate,m);break;default:Ml(u,m)}s=s.sibling}}var kl=8192;function To(e,s,u){if(e.subtreeFlags&kl)for(e=e.child;e!==null;)$g(e,s,u),e=e.sibling}function $g(e,s,u){switch(e.tag){case 26:To(e,s,u),e.flags&kl&&e.memoizedState!==null&&xb(u,Mr,e.memoizedState,e.memoizedProps);break;case 5:To(e,s,u);break;case 3:case 4:var m=Mr;Mr=yu(e.stateNode.containerInfo),To(e,s,u),Mr=m;break;case 22:e.memoizedState===null&&(m=e.alternate,m!==null&&m.memoizedState!==null?(m=kl,kl=16777216,To(e,s,u),kl=m):To(e,s,u));break;default:To(e,s,u)}}function Jg(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function Dl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var m=s[u];ds=m,tm(m,e)}Jg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)em(e),e=e.sibling}function em(e){switch(e.tag){case 0:case 11:case 15:Dl(e),e.flags&2048&&Ka(9,e,e.return);break;case 3:Dl(e);break;case 12:Dl(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,au(e)):Dl(e);break;default:Dl(e)}}function au(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var m=s[u];ds=m,tm(m,e)}Jg(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Ka(8,s,s.return),au(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,au(s));break;default:au(s)}e=e.sibling}}function tm(e,s){for(;ds!==null;){var u=ds;switch(u.tag){case 0:case 11:case 15:Ka(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:yl(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,ds=m;else e:for(u=e;ds!==null;){m=ds;var v=m.sibling,_=m.return;if(Gg(m),m===u){ds=null;break e}if(v!==null){v.return=_,ds=v;break e}ds=_}}}var Iw={getCacheForType:function(e){var s=ys(Zn),u=s.data.get(e);return u===void 0&&(u=e(),s.data.set(e,u)),u},cacheSignal:function(){return ys(Zn).controller.signal}},Mw=typeof WeakMap=="function"?WeakMap:Map,en=0,xn=null,It=null,Bt=0,on=0,tr=null,Za=!1,jo=!1,Oh=!1,ya=0,Fn=0,$a=0,zi=0,Ih=0,nr=0,Ro=0,Ll=null,Hs=null,Mh=!1,iu=0,nm=0,ou=1/0,lu=null,Ja=null,ls=0,ei=null,Oo=null,wa=0,kh=0,Dh=null,sm=null,Bl=0,Lh=null;function sr(){return(en&2)!==0&&Bt!==0?Bt&-Bt:J.T!==null?Hh():rs()}function rm(){if(nr===0)if((Bt&536870912)===0||Ft){var e=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),nr=e}else nr=536870912;return e=Js.current,e!==null&&(e.flags|=32),nr}function qs(e,s,u){(e===xn&&(on===2||on===9)||e.cancelPendingCommit!==null)&&(Io(e,0),ti(e,Bt,nr,!1)),X(e,u),((en&2)===0||e!==xn)&&(e===xn&&((en&2)===0&&(zi|=u),Fn===4&&ti(e,Bt,nr,!1)),Qr(e))}function am(e,s,u){if((en&6)!==0)throw Error(o(327));var m=!u&&(s&127)===0&&(s&e.expiredLanes)===0||lt(e,s),v=m?Lw(e,s):Uh(e,s,!0),_=m;do{if(v===0){jo&&!m&&ti(e,s,0,!1);break}else{if(u=e.current.alternate,_&&!kw(u)){v=Uh(e,s,!1),_=!1;continue}if(v===2){if(_=s,e.errorRecoveryDisabledLanes&_)var O=0;else O=e.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var F=e;v=Ll;var ee=F.current.memoizedState.isDehydrated;if(ee&&(Io(F,O).flags|=256),O=Uh(F,O,!1),O!==2){if(Oh&&!ee){F.errorRecoveryDisabledLanes|=_,zi|=_,v=4;break e}_=Hs,Hs=v,_!==null&&(Hs===null?Hs=_:Hs.push.apply(Hs,_))}v=O}if(_=!1,v!==2)continue}}if(v===1){Io(e,0),ti(e,s,0,!0);break}e:{switch(m=e,_=v,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:ti(m,s,nr,!Za);break e;case 2:Hs=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(v=iu+300-Fe(),10<v)){if(ti(m,s,nr,!Za),qe(m,0,!0)!==0)break e;wa=s,m.timeoutHandle=Lm(im.bind(null,m,u,Hs,lu,Mh,s,nr,zi,Ro,Za,_,"Throttled",-0,0),v);break e}im(m,u,Hs,lu,Mh,s,nr,zi,Ro,Za,_,null,-0,0)}}break}while(!0);Qr(e)}function im(e,s,u,m,v,_,O,F,ee,he,ve,_e,me,we){if(e.timeoutHandle=-1,_e=s.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ls},$g(s,_,_e);var Qe=(_&62914560)===_?iu-Fe():(_&4194048)===_?nm-Fe():0;if(Qe=yb(_e,Qe),Qe!==null){wa=_,e.cancelPendingCommit=Qe(gm.bind(null,e,s,_,u,m,v,O,F,ee,ve,_e,null,me,we)),ti(e,_,O,!he);return}}gm(e,s,_,u,m,v,O,F,ee)}function kw(e){for(var s=e;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var v=u[m],_=v.getSnapshot;v=v.value;try{if(!p(_(),v))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ti(e,s,u,m){s&=~Ih,s&=~zi,e.suspendedLanes|=s,e.pingedLanes&=~s,m&&(e.warmLanes|=s),m=e.expirationTimes;for(var v=s;0<v;){var _=31-ft(v),O=1<<_;m[_]=-1,v&=~O}u!==0&&jt(e,u,s)}function cu(){return(en&6)===0?(Ul(0),!1):!0}function Bh(){if(It!==null){if(on===0)var e=It.return;else e=It,la=Oi=null,Jd(e),Co=null,bl=0,e=It;for(;e!==null;)Bg(e.alternate,e),e=e.return;It=null}}function Io(e,s){var u=e.timeoutHandle;u!==-1&&(e.timeoutHandle=-1,eb(u)),u=e.cancelPendingCommit,u!==null&&(e.cancelPendingCommit=null,u()),wa=0,Bh(),xn=e,It=u=ia(e.current,null),Bt=s,on=0,tr=null,Za=!1,jo=lt(e,s),Oh=!1,Ro=nr=Ih=zi=$a=Fn=0,Hs=Ll=null,Mh=!1,(s&8)!==0&&(s|=s&32);var m=e.entangledLanes;if(m!==0)for(e=e.entanglements,m&=s;0<m;){var v=31-ft(m),_=1<<v;s|=e[v],m&=~_}return ya=s,Rc(),u}function om(e,s){Ct=null,J.H=Tl,s===vo||s===Uc?(s=S1(),on=3):s===Fd?(s=S1(),on=4):on=s===mh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,tr=s,It===null&&(Fn=1,$c(e,mr(s,e.current)))}function lm(){var e=Js.current;return e===null?!0:(Bt&4194048)===Bt?wr===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?e===wr:!1}function cm(){var e=J.H;return J.H=Tl,e===null?Tl:e}function um(){var e=J.A;return J.A=Iw,e}function uu(){Fn=4,Za||(Bt&4194048)!==Bt&&Js.current!==null||(jo=!0),($a&134217727)===0&&(zi&134217727)===0||xn===null||ti(xn,Bt,nr,!1)}function Uh(e,s,u){var m=en;en|=2;var v=cm(),_=um();(xn!==e||Bt!==s)&&(lu=null,Io(e,s)),s=!1;var O=Fn;e:do try{if(on!==0&&It!==null){var F=It,ee=tr;switch(on){case 8:Bh(),O=6;break e;case 3:case 2:case 9:case 6:Js.current===null&&(s=!0);var he=on;if(on=0,tr=null,Mo(e,F,ee,he),u&&jo){O=0;break e}break;default:he=on,on=0,tr=null,Mo(e,F,ee,he)}}Dw(),O=Fn;break}catch(ve){om(e,ve)}while(!0);return s&&e.shellSuspendCounter++,la=Oi=null,en=m,J.H=v,J.A=_,It===null&&(xn=null,Bt=0,Rc()),O}function Dw(){for(;It!==null;)dm(It)}function Lw(e,s){var u=en;en|=2;var m=cm(),v=um();xn!==e||Bt!==s?(lu=null,ou=Fe()+500,Io(e,s)):jo=lt(e,s);e:do try{if(on!==0&&It!==null){s=It;var _=tr;t:switch(on){case 1:on=0,tr=null,Mo(e,s,_,1);break;case 2:case 9:if(v1(_)){on=0,tr=null,hm(s);break}s=function(){on!==2&&on!==9||xn!==e||(on=7),Qr(e)},_.then(s,s);break e;case 3:on=7;break e;case 4:on=5;break e;case 7:v1(_)?(on=0,tr=null,hm(s)):(on=0,tr=null,Mo(e,s,_,7));break;case 5:var O=null;switch(It.tag){case 26:O=It.memoizedState;case 5:case 27:var F=It;if(O?Zm(O):F.stateNode.complete){on=0,tr=null;var ee=F.sibling;if(ee!==null)It=ee;else{var he=F.return;he!==null?(It=he,du(he)):It=null}break t}}on=0,tr=null,Mo(e,s,_,5);break;case 6:on=0,tr=null,Mo(e,s,_,6);break;case 8:Bh(),Fn=6;break e;default:throw Error(o(462))}}Bw();break}catch(ve){om(e,ve)}while(!0);return la=Oi=null,J.H=m,J.A=v,en=u,It!==null?0:(xn=null,Bt=0,Rc(),Fn)}function Bw(){for(;It!==null&&!Ns();)dm(It)}function dm(e){var s=Dg(e.alternate,e,ya);e.memoizedProps=e.pendingProps,s===null?du(e):It=s}function hm(e){var s=e,u=s.alternate;switch(s.tag){case 15:case 0:s=jg(u,s,s.pendingProps,s.type,void 0,Bt);break;case 11:s=jg(u,s,s.pendingProps,s.type.render,s.ref,Bt);break;case 5:Jd(s);default:Bg(u,s),s=It=u1(s,ya),s=Dg(u,s,ya)}e.memoizedProps=e.pendingProps,s===null?du(e):It=s}function Mo(e,s,u,m){la=Oi=null,Jd(s),Co=null,bl=0;var v=s.return;try{if(Ew(e,v,s,u,Bt)){Fn=1,$c(e,mr(u,e.current)),It=null;return}}catch(_){if(v!==null)throw It=v,_;Fn=1,$c(e,mr(u,e.current)),It=null;return}s.flags&32768?(Ft||m===1?e=!0:jo||(Bt&536870912)!==0?e=!1:(Za=e=!0,(m===2||m===9||m===3||m===6)&&(m=Js.current,m!==null&&m.tag===13&&(m.flags|=16384))),fm(s,e)):du(s)}function du(e){var s=e;do{if((s.flags&32768)!==0){fm(s,Za);return}e=s.return;var u=Tw(s.alternate,s,ya);if(u!==null){It=u;return}if(s=s.sibling,s!==null){It=s;return}It=s=e}while(s!==null);Fn===0&&(Fn=5)}function fm(e,s){do{var u=jw(e.alternate,e);if(u!==null){u.flags&=32767,It=u;return}if(u=e.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(e=e.sibling,e!==null)){It=e;return}It=e=u}while(e!==null);Fn=6,It=null}function gm(e,s,u,m,v,_,O,F,ee){e.cancelPendingCommit=null;do hu();while(ls!==0);if((en&6)!==0)throw Error(o(327));if(s!==null){if(s===e.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=Ad,Ae(e,u,_,O,F,ee),e===xn&&(It=xn=null,Bt=0),Oo=s,ei=e,wa=u,kh=_,Dh=v,sm=m,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Fw(rn,function(){return wm(),null})):(e.callbackNode=null,e.callbackPriority=0),m=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||m){m=J.T,J.T=null,v=oe.p,oe.p=2,O=en,en|=4;try{Rw(e,s,u)}finally{en=O,oe.p=v,J.T=m}}ls=1,mm(),pm(),xm()}}function mm(){if(ls===1){ls=0;var e=ei,s=Oo,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=J.T,J.T=null;var m=oe.p;oe.p=2;var v=en;en|=4;try{Wg(s,e);var _=Kh,O=B(e.containerInfo),F=_.focusedElem,ee=_.selectionRange;if(O!==F&&F&&F.ownerDocument&&R(F.ownerDocument.documentElement,F)){if(ee!==null&&z(F)){var he=ee.start,ve=ee.end;if(ve===void 0&&(ve=he),"selectionStart"in F)F.selectionStart=he,F.selectionEnd=Math.min(ve,F.value.length);else{var _e=F.ownerDocument||document,me=_e&&_e.defaultView||window;if(me.getSelection){var we=me.getSelection(),Qe=F.textContent.length,ct=Math.min(ee.start,Qe),fn=ee.end===void 0?ct:Math.min(ee.end,Qe);!we.extend&&ct>fn&&(O=fn,fn=ct,ct=O);var ae=E(F,ct),re=E(F,fn);if(ae&&re&&(we.rangeCount!==1||we.anchorNode!==ae.node||we.anchorOffset!==ae.offset||we.focusNode!==re.node||we.focusOffset!==re.offset)){var de=_e.createRange();de.setStart(ae.node,ae.offset),we.removeAllRanges(),ct>fn?(we.addRange(de),we.extend(re.node,re.offset)):(de.setEnd(re.node,re.offset),we.addRange(de))}}}}for(_e=[],we=F;we=we.parentNode;)we.nodeType===1&&_e.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<_e.length;F++){var Se=_e[F];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}_u=!!Wh,Kh=Wh=null}finally{en=v,oe.p=m,J.T=u}}e.current=s,ls=2}}function pm(){if(ls===2){ls=0;var e=ei,s=Oo,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=J.T,J.T=null;var m=oe.p;oe.p=2;var v=en;en|=4;try{Vg(e,s.alternate,s)}finally{en=v,oe.p=m,J.T=u}}ls=3}}function xm(){if(ls===4||ls===3){ls=0,Ie();var e=ei,s=Oo,u=wa,m=sm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ls=5:(ls=0,Oo=ei=null,ym(e,e.pendingLanes));var v=e.pendingLanes;if(v===0&&(Ja=null),Kt(u),s=s.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Rt,s,void 0,(s.current.flags&128)===128)}catch{}if(m!==null){s=J.T,v=oe.p,oe.p=2,J.T=null;try{for(var _=e.onRecoverableError,O=0;O<m.length;O++){var F=m[O];_(F.value,{componentStack:F.stack})}}finally{J.T=s,oe.p=v}}(wa&3)!==0&&hu(),Qr(e),v=e.pendingLanes,(u&261930)!==0&&(v&42)!==0?e===Lh?Bl++:(Bl=0,Lh=e):Bl=0,Ul(0)}}function ym(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,yl(s)))}function hu(){return mm(),pm(),xm(),wm()}function wm(){if(ls!==5)return!1;var e=ei,s=kh;kh=0;var u=Kt(wa),m=J.T,v=oe.p;try{oe.p=32>u?32:u,J.T=null,u=Dh,Dh=null;var _=ei,O=wa;if(ls=0,Oo=ei=null,wa=0,(en&6)!==0)throw Error(o(331));var F=en;if(en|=4,em(_.current),Zg(_,_.current,O,u),en=F,Ul(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Rt,_)}catch{}return!0}finally{oe.p=v,J.T=m,ym(e,s)}}function bm(e,s,u){s=mr(u,s),s=gh(e.stateNode,s,2),e=Xa(e,s,2),e!==null&&(X(e,2),Qr(e))}function ln(e,s,u){if(e.tag===3)bm(e,e,u);else for(;s!==null;){if(s.tag===3){bm(s,e,u);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ja===null||!Ja.has(m))){e=mr(u,e),u=vg(2),m=Xa(s,u,2),m!==null&&(Cg(u,m,s,e),X(m,2),Qr(m));break}}s=s.return}}function Ph(e,s,u){var m=e.pingCache;if(m===null){m=e.pingCache=new Mw;var v=new Set;m.set(s,v)}else v=m.get(s),v===void 0&&(v=new Set,m.set(s,v));v.has(u)||(Oh=!0,v.add(u),e=Uw.bind(null,e,s,u),s.then(e,e))}function Uw(e,s,u){var m=e.pingCache;m!==null&&m.delete(s),e.pingedLanes|=e.suspendedLanes&u,e.warmLanes&=~u,xn===e&&(Bt&u)===u&&(Fn===4||Fn===3&&(Bt&62914560)===Bt&&300>Fe()-iu?(en&2)===0&&Io(e,0):Ih|=u,Ro===Bt&&(Ro=0)),Qr(e)}function vm(e,s){s===0&&(s=zt()),e=Ti(e,s),e!==null&&(X(e,s),Qr(e))}function Pw(e){var s=e.memoizedState,u=0;s!==null&&(u=s.retryLane),vm(e,u)}function zw(e,s){var u=0;switch(e.tag){case 31:case 13:var m=e.stateNode,v=e.memoizedState;v!==null&&(u=v.retryLane);break;case 19:m=e.stateNode;break;case 22:m=e.stateNode._retryCache;break;default:throw Error(o(314))}m!==null&&m.delete(s),vm(e,u)}function Fw(e,s){return ns(e,s)}var fu=null,ko=null,zh=!1,gu=!1,Fh=!1,ni=0;function Qr(e){e!==ko&&e.next===null&&(ko===null?fu=ko=e:ko=ko.next=e),gu=!0,zh||(zh=!0,qw())}function Ul(e,s){if(!Fh&&gu){Fh=!0;do for(var u=!1,m=fu;m!==null;){if(e!==0){var v=m.pendingLanes;if(v===0)var _=0;else{var O=m.suspendedLanes,F=m.pingedLanes;_=(1<<31-ft(42|e)+1)-1,_&=v&~(O&~F),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,Em(m,_))}else _=Bt,_=qe(m,m===xn?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||lt(m,_)||(u=!0,Em(m,_));m=m.next}while(u);Fh=!1}}function Hw(){Cm()}function Cm(){gu=zh=!1;var e=0;ni!==0&&Jw()&&(e=ni);for(var s=Fe(),u=null,m=fu;m!==null;){var v=m.next,_=Sm(m,s);_===0?(m.next=null,u===null?fu=v:u.next=v,v===null&&(ko=u)):(u=m,(e!==0||(_&3)!==0)&&(gu=!0)),m=v}ls!==0&&ls!==5||Ul(e),ni!==0&&(ni=0)}function Sm(e,s){for(var u=e.suspendedLanes,m=e.pingedLanes,v=e.expirationTimes,_=e.pendingLanes&-62914561;0<_;){var O=31-ft(_),F=1<<O,ee=v[O];ee===-1?((F&u)===0||(F&m)!==0)&&(v[O]=an(F,s)):ee<=s&&(e.expiredLanes|=F),_&=~F}if(s=xn,u=Bt,u=qe(e,e===s?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),m=e.callbackNode,u===0||e===s&&(on===2||on===9)||e.cancelPendingCommit!==null)return m!==null&&m!==null&&ze(m),e.callbackNode=null,e.callbackPriority=0;if((u&3)===0||lt(e,u)){if(s=u&-u,s===e.callbackPriority)return s;switch(m!==null&&ze(m),Kt(u)){case 2:case 8:u=Rn;break;case 32:u=rn;break;case 268435456:u=qn;break;default:u=rn}return m=_m.bind(null,e),u=ns(u,m),e.callbackPriority=s,e.callbackNode=u,s}return m!==null&&m!==null&&ze(m),e.callbackPriority=2,e.callbackNode=null,2}function _m(e,s){if(ls!==0&&ls!==5)return e.callbackNode=null,e.callbackPriority=0,null;var u=e.callbackNode;if(hu()&&e.callbackNode!==u)return null;var m=Bt;return m=qe(e,e===xn?m:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),m===0?null:(am(e,m,s),Sm(e,Fe()),e.callbackNode!=null&&e.callbackNode===u?_m.bind(null,e):null)}function Em(e,s){if(hu())return null;am(e,s,!0)}function qw(){tb(function(){(en&6)!==0?ns(_t,Hw):Cm()})}function Hh(){if(ni===0){var e=wo;e===0&&(e=Ds,Ds<<=1,(Ds&261888)===0&&(Ds=256)),ni=e}return ni}function Am(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ma(""+e)}function Nm(e,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,e.id&&u.setAttribute("form",e.id),s.parentNode.insertBefore(u,s),e=new FormData(e),u.parentNode.removeChild(u),e}function Vw(e,s,u,m,v){if(s==="submit"&&u&&u.stateNode===v){var _=Am((v[Zt]||null).action),O=m.submitter;O&&(s=(s=O[Zt]||null)?Am(s.formAction):O.getAttribute("formAction"),s!==null&&(_=s,O=null));var F=new as("action","action",null,m,v);e.push({event:F,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ni!==0){var ee=O?Nm(v,O):new FormData(v);lh(u,{pending:!0,data:ee,method:v.method,action:_},null,ee)}}else typeof _=="function"&&(F.preventDefault(),ee=O?Nm(v,O):new FormData(v),lh(u,{pending:!0,data:ee,method:v.method,action:_},_,ee))},currentTarget:v}]})}}for(var qh=0;qh<ml.length;qh++){var Vh=ml[qh],Gw=Vh.toLowerCase(),Yw=Vh[0].toUpperCase()+Vh.slice(1);Ir(Gw,"on"+Yw)}Ir(Us,"onAnimationEnd"),Ir(ps,"onAnimationIteration"),Ir(sn,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(os,"onTransitionRun"),Ir(Os,"onTransitionStart"),Ir(za,"onTransitionCancel"),Ir(aa,"onTransitionEnd"),Xs("onMouseEnter",["mouseout","mouseover"]),Xs("onMouseLeave",["mouseout","mouseover"]),Xs("onPointerEnter",["pointerout","pointerover"]),Xs("onPointerLeave",["pointerout","pointerover"]),tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function Tm(e,s){s=(s&4)!==0;for(var u=0;u<e.length;u++){var m=e[u],v=m.event;m=m.listeners;e:{var _=void 0;if(s)for(var O=m.length-1;0<=O;O--){var F=m[O],ee=F.instance,he=F.currentTarget;if(F=F.listener,ee!==_&&v.isPropagationStopped())break e;_=F,v.currentTarget=he;try{_(v)}catch(ve){jc(ve)}v.currentTarget=null,_=ee}else for(O=0;O<m.length;O++){if(F=m[O],ee=F.instance,he=F.currentTarget,F=F.listener,ee!==_&&v.isPropagationStopped())break e;_=F,v.currentTarget=he;try{_(v)}catch(ve){jc(ve)}v.currentTarget=null,_=ee}}}}function Mt(e,s){var u=s[Me];u===void 0&&(u=s[Me]=new Set);var m=e+"__bubble";u.has(m)||(jm(s,e,2,!1),u.add(m))}function Gh(e,s,u){var m=0;s&&(m|=4),jm(u,e,m,s)}var mu="_reactListening"+Math.random().toString(36).slice(2);function Yh(e){if(!e[mu]){e[mu]=!0,Te.forEach(function(u){u!=="selectionchange"&&(Xw.has(u)||Gh(u,!1,e),Gh(u,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[mu]||(s[mu]=!0,Gh("selectionchange",!1,s))}}function jm(e,s,u,m){switch(rp(s)){case 2:var v=vb;break;case 8:v=Cb;break;default:v=lf}u=v.bind(null,s,u,e),v=void 0,!ll||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),m?v!==void 0?e.addEventListener(s,u,{capture:!0,passive:v}):e.addEventListener(s,u,!0):v!==void 0?e.addEventListener(s,u,{passive:v}):e.addEventListener(s,u,!1)}function Xh(e,s,u,m,v){var _=m;if((s&1)===0&&(s&2)===0&&m!==null)e:for(;;){if(m===null)return;var O=m.tag;if(O===3||O===4){var F=m.stateNode.containerInfo;if(F===v)break;if(O===4)for(O=m.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;F!==null;){if(O=Bn(F),O===null)return;if(ee=O.tag,ee===5||ee===6||ee===26||ee===27){m=_=O;continue e}F=F.parentNode}}m=m.return}yc(function(){var he=_,ve=ol(u),_e=[];e:{var me=Tc.get(e);if(me!==void 0){var we=as,Qe=e;switch(e){case"keypress":if(Fr(u)===0)break e;case"keydown":case"keyup":we=co;break;case"focusin":Qe="focus",we=dl;break;case"focusout":Qe="blur",we=dl;break;case"beforeblur":case"afterblur":we=dl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Jt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=oo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Sd;break;case Us:case ps:case sn:we=Et;break;case aa:we=ta;break;case"scroll":case"scrollend":we=wc;break;case"wheel":we=_d;break;case"copy":case"cut":case"paste":we=lo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=nn;break;case"toggle":case"beforetoggle":we=fl}var ct=(s&4)!==0,fn=!ct&&(e==="scroll"||e==="scrollend"),ae=ct?me!==null?me+"Capture":null:me;ct=[];for(var re=he,de;re!==null;){var Se=re;if(de=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||de===null||ae===null||(Se=pt(re,ae),Se!=null&&ct.push(zl(re,Se,de))),fn)break;re=re.return}0<ct.length&&(me=new we(me,Qe,null,u,ve),_e.push({event:me,listeners:ct}))}}if((s&7)===0){e:{if(me=e==="mouseover"||e==="pointerover",we=e==="mouseout"||e==="pointerout",me&&u!==bi&&(Qe=u.relatedTarget||u.fromElement)&&(Bn(Qe)||Qe[je]))break e;if((we||me)&&(me=ve.window===ve?ve:(me=ve.ownerDocument)?me.defaultView||me.parentWindow:window,we?(Qe=u.relatedTarget||u.toElement,we=he,Qe=Qe?Bn(Qe):null,Qe!==null&&(fn=h(Qe),ct=Qe.tag,Qe!==fn||ct!==5&&ct!==27&&ct!==6)&&(Qe=null)):(we=null,Qe=he),we!==Qe)){if(ct=Jt,Se="onMouseLeave",ae="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(ct=nn,Se="onPointerLeave",ae="onPointerEnter",re="pointer"),fn=we==null?me:Ta(we),de=Qe==null?me:Ta(Qe),me=new ct(Se,re+"leave",we,u,ve),me.target=fn,me.relatedTarget=de,Se=null,Bn(ve)===he&&(ct=new ct(ae,re+"enter",Qe,u,ve),ct.target=de,ct.relatedTarget=fn,Se=ct),fn=Se,we&&Qe)t:{for(ct=Qw,ae=we,re=Qe,de=0,Se=ae;Se;Se=ct(Se))de++;Se=0;for(var at=re;at;at=ct(at))Se++;for(;0<de-Se;)ae=ct(ae),de--;for(;0<Se-de;)re=ct(re),Se--;for(;de--;){if(ae===re||re!==null&&ae===re.alternate){ct=ae;break t}ae=ct(ae),re=ct(re)}ct=null}else ct=null;we!==null&&Rm(_e,me,we,ct,!1),Qe!==null&&fn!==null&&Rm(_e,fn,Qe,ct,!0)}}e:{if(me=he?Ta(he):window,we=me.nodeName&&me.nodeName.toLowerCase(),we==="select"||we==="input"&&me.type==="file")var Xt=Zs;else if(gl(me))if(Nc)Xt=f;else{Xt=i;var et=n}else we=me.nodeName,!we||we.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?he&&gn(he.elementType)&&(Xt=Zs):Xt=c;if(Xt&&(Xt=Xt(e,he))){Ks(_e,Xt,u,ve);break e}et&&et(e,me,he),e==="focusout"&&he&&me.type==="number"&&he.memoizedProps.value!=null&&Q(me,"number",me.value)}switch(et=he?Ta(he):window,e){case"focusin":(gl(et)||et.contentEditable==="true")&&(te=et,se=he,le=null);break;case"focusout":le=se=te=null;break;case"mousedown":pe=!0;break;case"contextmenu":case"mouseup":case"dragend":pe=!1,Pe(_e,u,ve);break;case"selectionchange":if(W)break;case"keydown":case"keyup":Pe(_e,u,ve)}var At;if(Si)e:{switch(e){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else Pa?Ac(e,u)&&(Ut="onCompositionEnd"):e==="keydown"&&u.keyCode===229&&(Ut="onCompositionStart");Ut&&(Ec&&u.locale!=="ko"&&(Pa||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Pa&&(At=ka()):(Rr=ve,Or="value"in Rr?Rr.value:Rr.textContent,Pa=!0)),et=pu(he,Ut),0<et.length&&(Ut=new Cc(Ut,e,null,u,ve),_e.push({event:Ut,listeners:et}),At?Ut.data=At:(At=Ua(u),At!==null&&(Ut.data=At)))),(At=_c?Vr(e,u):ho(e,u))&&(Ut=pu(he,"onBeforeInput"),0<Ut.length&&(et=new Cc("onBeforeInput","beforeinput",null,u,ve),_e.push({event:et,listeners:Ut}),et.data=At)),Vw(_e,e,he,u,ve)}Tm(_e,s)})}function zl(e,s,u){return{instance:e,listener:s,currentTarget:u}}function pu(e,s){for(var u=s+"Capture",m=[];e!==null;){var v=e,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=pt(e,u),v!=null&&m.unshift(zl(e,v,_)),v=pt(e,s),v!=null&&m.push(zl(e,v,_))),e.tag===3)return m;e=e.return}return[]}function Qw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Rm(e,s,u,m,v){for(var _=s._reactName,O=[];u!==null&&u!==m;){var F=u,ee=F.alternate,he=F.stateNode;if(F=F.tag,ee!==null&&ee===m)break;F!==5&&F!==26&&F!==27||he===null||(ee=he,v?(he=pt(u,_),he!=null&&O.unshift(zl(u,he,ee))):v||(he=pt(u,_),he!=null&&O.push(zl(u,he,ee)))),u=u.return}O.length!==0&&e.push({event:s,listeners:O})}var Ww=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function Om(e){return(typeof e=="string"?e:""+e).replace(Ww,`
`).replace(Kw,"")}function Im(e,s){return s=Om(s),Om(e)===s}function hn(e,s,u,m,v,_){switch(u){case"children":typeof m=="string"?s==="body"||s==="textarea"&&m===""||Ia(e,m):(typeof m=="number"||typeof m=="bigint")&&s!=="body"&&Ia(e,""+m);break;case"className":Ra(e,"class",m);break;case"tabIndex":Ra(e,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ra(e,u,m);break;case"style":rt(e,m,_);break;case"data":if(s!=="object"){Ra(e,"data",m);break}case"src":case"href":if(m===""&&(s!=="a"||u!=="href")){e.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){e.removeAttribute(u);break}m=Ma(""+m),e.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){e.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(s!=="input"&&hn(e,s,"name",v.name,v,null),hn(e,s,"formEncType",v.formEncType,v,null),hn(e,s,"formMethod",v.formMethod,v,null),hn(e,s,"formTarget",v.formTarget,v,null)):(hn(e,s,"encType",v.encType,v,null),hn(e,s,"method",v.method,v,null),hn(e,s,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){e.removeAttribute(u);break}m=Ma(""+m),e.setAttribute(u,m);break;case"onClick":m!=null&&(e.onclick=Ls);break;case"onScroll":m!=null&&Mt("scroll",e);break;case"onScrollEnd":m!=null&&Mt("scrollend",e);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(o(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(o(60));e.innerHTML=u}}break;case"multiple":e.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":e.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){e.removeAttribute("xlink:href");break}u=Ma(""+m),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?e.setAttribute(u,""+m):e.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?e.setAttribute(u,""):e.removeAttribute(u);break;case"capture":case"download":m===!0?e.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?e.setAttribute(u,m):e.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?e.setAttribute(u,m):e.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?e.removeAttribute(u):e.setAttribute(u,m);break;case"popover":Mt("beforetoggle",e),Mt("toggle",e),ja(e,"popover",m);break;case"xlinkActuate":Qs(e,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Qs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Qs(e,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Qs(e,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Qs(e,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Qs(e,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Qs(e,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ja(e,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=xc.get(u)||u,ja(e,u,m))}}function Qh(e,s,u,m,v,_){switch(u){case"style":rt(e,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(o(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(o(60));e.innerHTML=u}}break;case"children":typeof m=="string"?Ia(e,m):(typeof m=="number"||typeof m=="bigint")&&Ia(e,""+m);break;case"onScroll":m!=null&&Mt("scroll",e);break;case"onScrollEnd":m!=null&&Mt("scrollend",e);break;case"onClick":m!=null&&(e.onclick=Ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pc.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),s=u.slice(2,v?u.length-7:void 0),_=e[Zt]||null,_=_!=null?_[u]:null,typeof _=="function"&&e.removeEventListener(s,_,v),typeof m=="function")){typeof _!="function"&&_!==null&&(u in e?e[u]=null:e.hasAttribute(u)&&e.removeAttribute(u)),e.addEventListener(s,m,v);break e}u in e?e[u]=m:m===!0?e.setAttribute(u,""):ja(e,u,m)}}}function bs(e,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",e),Mt("load",e);var m=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var O=u[_];if(O!=null)switch(_){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:hn(e,s,_,O,u,null)}}v&&hn(e,s,"srcSet",u.srcSet,u,null),m&&hn(e,s,"src",u.src,u,null);return;case"input":Mt("invalid",e);var F=_=O=v=null,ee=null,he=null;for(m in u)if(u.hasOwnProperty(m)){var ve=u[m];if(ve!=null)switch(m){case"name":v=ve;break;case"type":O=ve;break;case"checked":ee=ve;break;case"defaultChecked":he=ve;break;case"value":_=ve;break;case"defaultValue":F=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(137,s));break;default:hn(e,s,m,ve,u,null)}}ce(e,_,F,ee,he,O,v,!1);return;case"select":Mt("invalid",e),m=O=_=null;for(v in u)if(u.hasOwnProperty(v)&&(F=u[v],F!=null))switch(v){case"value":_=F;break;case"defaultValue":O=F;break;case"multiple":m=F;default:hn(e,s,v,F,u,null)}s=_,u=O,e.multiple=!!m,s!=null?Ze(e,!!m,s,!1):u!=null&&Ze(e,!!m,u,!0);return;case"textarea":Mt("invalid",e),_=v=m=null;for(O in u)if(u.hasOwnProperty(O)&&(F=u[O],F!=null))switch(O){case"value":m=F;break;case"defaultValue":v=F;break;case"children":_=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(o(91));break;default:hn(e,s,O,F,u,null)}js(e,m,v,_);return;case"option":for(ee in u)if(u.hasOwnProperty(ee)&&(m=u[ee],m!=null))switch(ee){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:hn(e,s,ee,m,u,null)}return;case"dialog":Mt("beforetoggle",e),Mt("toggle",e),Mt("cancel",e),Mt("close",e);break;case"iframe":case"object":Mt("load",e);break;case"video":case"audio":for(m=0;m<Pl.length;m++)Mt(Pl[m],e);break;case"image":Mt("error",e),Mt("load",e);break;case"details":Mt("toggle",e);break;case"embed":case"source":case"link":Mt("error",e),Mt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in u)if(u.hasOwnProperty(he)&&(m=u[he],m!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:hn(e,s,he,m,u,null)}return;default:if(gn(s)){for(ve in u)u.hasOwnProperty(ve)&&(m=u[ve],m!==void 0&&Qh(e,s,ve,m,u,void 0));return}}for(F in u)u.hasOwnProperty(F)&&(m=u[F],m!=null&&hn(e,s,F,m,u,null))}function Zw(e,s,u,m){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,O=null,F=null,ee=null,he=null,ve=null;for(we in u){var _e=u[we];if(u.hasOwnProperty(we)&&_e!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ee=_e;default:m.hasOwnProperty(we)||hn(e,s,we,null,m,_e)}}for(var me in m){var we=m[me];if(_e=u[me],m.hasOwnProperty(me)&&(we!=null||_e!=null))switch(me){case"type":_=we;break;case"name":v=we;break;case"checked":he=we;break;case"defaultChecked":ve=we;break;case"value":O=we;break;case"defaultValue":F=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(o(137,s));break;default:we!==_e&&hn(e,s,me,we,m,_e)}}Wn(e,O,F,ee,he,ve,_,v);return;case"select":we=O=F=me=null;for(_ in u)if(ee=u[_],u.hasOwnProperty(_)&&ee!=null)switch(_){case"value":break;case"multiple":we=ee;default:m.hasOwnProperty(_)||hn(e,s,_,null,m,ee)}for(v in m)if(_=m[v],ee=u[v],m.hasOwnProperty(v)&&(_!=null||ee!=null))switch(v){case"value":me=_;break;case"defaultValue":F=_;break;case"multiple":O=_;default:_!==ee&&hn(e,s,v,_,m,ee)}s=F,u=O,m=we,me!=null?Ze(e,!!u,me,!1):!!m!=!!u&&(s!=null?Ze(e,!!u,s,!0):Ze(e,!!u,u?[]:"",!1));return;case"textarea":we=me=null;for(F in u)if(v=u[F],u.hasOwnProperty(F)&&v!=null&&!m.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:hn(e,s,F,null,m,v)}for(O in m)if(v=m[O],_=u[O],m.hasOwnProperty(O)&&(v!=null||_!=null))switch(O){case"value":me=v;break;case"defaultValue":we=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:v!==_&&hn(e,s,O,v,m,_)}Vn(e,me,we);return;case"option":for(var Qe in u)if(me=u[Qe],u.hasOwnProperty(Qe)&&me!=null&&!m.hasOwnProperty(Qe))switch(Qe){case"selected":e.selected=!1;break;default:hn(e,s,Qe,null,m,me)}for(ee in m)if(me=m[ee],we=u[ee],m.hasOwnProperty(ee)&&me!==we&&(me!=null||we!=null))switch(ee){case"selected":e.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:hn(e,s,ee,me,m,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in u)me=u[ct],u.hasOwnProperty(ct)&&me!=null&&!m.hasOwnProperty(ct)&&hn(e,s,ct,null,m,me);for(he in m)if(me=m[he],we=u[he],m.hasOwnProperty(he)&&me!==we&&(me!=null||we!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(o(137,s));break;default:hn(e,s,he,me,m,we)}return;default:if(gn(s)){for(var fn in u)me=u[fn],u.hasOwnProperty(fn)&&me!==void 0&&!m.hasOwnProperty(fn)&&Qh(e,s,fn,void 0,m,me);for(ve in m)me=m[ve],we=u[ve],!m.hasOwnProperty(ve)||me===we||me===void 0&&we===void 0||Qh(e,s,ve,me,m,we);return}}for(var ae in u)me=u[ae],u.hasOwnProperty(ae)&&me!=null&&!m.hasOwnProperty(ae)&&hn(e,s,ae,null,m,me);for(_e in m)me=m[_e],we=u[_e],!m.hasOwnProperty(_e)||me===we||me==null&&we==null||hn(e,s,_e,me,m,we)}function Mm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $w(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var v=u[m],_=v.transferSize,O=v.initiatorType,F=v.duration;if(_&&F&&Mm(O)){for(O=0,F=v.responseEnd,m+=1;m<u.length;m++){var ee=u[m],he=ee.startTime;if(he>F)break;var ve=ee.transferSize,_e=ee.initiatorType;ve&&Mm(_e)&&(ee=ee.responseEnd,O+=ve*(ee<F?1:(F-he)/(ee-he)))}if(--m,s+=8*(_+O)/(v.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Wh=null,Kh=null;function xu(e){return e.nodeType===9?e:e.ownerDocument}function km(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dm(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Zh(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var $h=null;function Jw(){var e=window.event;return e&&e.type==="popstate"?e===$h?!1:($h=e,!0):($h=null,!1)}var Lm=typeof setTimeout=="function"?setTimeout:void 0,eb=typeof clearTimeout=="function"?clearTimeout:void 0,Bm=typeof Promise=="function"?Promise:void 0,tb=typeof queueMicrotask=="function"?queueMicrotask:typeof Bm<"u"?function(e){return Bm.resolve(null).then(e).catch(nb)}:Lm;function nb(e){setTimeout(function(){throw e})}function si(e){return e==="head"}function Um(e,s){var u=s,m=0;do{var v=u.nextSibling;if(e.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(m===0){e.removeChild(v),Uo(s);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")Fl(e.ownerDocument.documentElement);else if(u==="head"){u=e.ownerDocument.head,Fl(u);for(var _=u.firstChild;_;){var O=_.nextSibling,F=_.nodeName;_[dr]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=O}}else u==="body"&&Fl(e.ownerDocument.body);u=v}while(u);Uo(s)}function Pm(e,s){var u=e;e=0;do{var m=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(e===0)break;e--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||e++;u=m}while(u)}function Jh(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Jh(u),_s(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}e.removeChild(u)}}function sb(e,s,u,m){for(;e.nodeType===1;){var v=u;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!m&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(m){if(!e[dr])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(_=e.getAttribute("rel"),_==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(_!==v.rel||e.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||e.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||e.getAttribute("title")!==(v.title==null?null:v.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(_=e.getAttribute("src"),(_!==(v.src==null?null:v.src)||e.getAttribute("type")!==(v.type==null?null:v.type)||e.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&e.getAttribute("name")===_)return e}else return e;if(e=br(e.nextSibling),e===null)break}return null}function rb(e,s,u){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!u||(e=br(e.nextSibling),e===null))return null;return e}function zm(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=br(e.nextSibling),e===null))return null;return e}function ef(e){return e.data==="$?"||e.data==="$~"}function tf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ab(e,s){var u=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||u.readyState!=="loading")s();else{var m=function(){s(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),e._reactRetry=m}}function br(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var nf=null;function Fm(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var u=e.data;if(u==="/$"||u==="/&"){if(s===0)return br(e.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}e=e.nextSibling}return null}function Hm(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var u=e.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return e;s--}else u!=="/$"&&u!=="/&"||s++}e=e.previousSibling}return null}function qm(e,s,u){switch(s=xu(u),e){case"html":if(e=s.documentElement,!e)throw Error(o(452));return e;case"head":if(e=s.head,!e)throw Error(o(453));return e;case"body":if(e=s.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Fl(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);_s(e)}var vr=new Map,Vm=new Set;function yu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ba=oe.d;oe.d={f:ib,r:ob,D:lb,C:cb,L:ub,m:db,X:fb,S:hb,M:gb};function ib(){var e=ba.f(),s=cu();return e||s}function ob(e){var s=$t(e);s!==null&&s.tag===5&&s.type==="form"?og(s):ba.r(e)}var Do=typeof document>"u"?null:document;function Gm(e,s,u){var m=Do;if(m&&typeof s=="string"&&s){var v=Tt(s);v='link[rel="'+e+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Vm.has(v)||(Vm.add(v),e={rel:e,crossOrigin:u,href:s},m.querySelector(v)===null&&(s=m.createElement("link"),bs(s,"link",e),Un(s),m.head.appendChild(s)))}}function lb(e){ba.D(e),Gm("dns-prefetch",e,null)}function cb(e,s){ba.C(e,s),Gm("preconnect",e,s)}function ub(e,s,u){ba.L(e,s,u);var m=Do;if(m&&e&&s){var v='link[rel="preload"][as="'+Tt(s)+'"]';s==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Tt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Tt(u.imageSizes)+'"]')):v+='[href="'+Tt(e)+'"]';var _=v;switch(s){case"style":_=Lo(e);break;case"script":_=Bo(e)}vr.has(_)||(e=N({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:e,as:s},u),vr.set(_,e),m.querySelector(v)!==null||s==="style"&&m.querySelector(Hl(_))||s==="script"&&m.querySelector(ql(_))||(s=m.createElement("link"),bs(s,"link",e),Un(s),m.head.appendChild(s)))}}function db(e,s){ba.m(e,s);var u=Do;if(u&&e){var m=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+Tt(m)+'"][href="'+Tt(e)+'"]',_=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Bo(e)}if(!vr.has(_)&&(e=N({rel:"modulepreload",href:e},s),vr.set(_,e),u.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ql(_)))return}m=u.createElement("link"),bs(m,"link",e),Un(m),u.head.appendChild(m)}}}function hb(e,s,u){ba.S(e,s,u);var m=Do;if(m&&e){var v=Ts(m).hoistableStyles,_=Lo(e);s=s||"default";var O=v.get(_);if(!O){var F={loading:0,preload:null};if(O=m.querySelector(Hl(_)))F.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":s},u),(u=vr.get(_))&&sf(e,u);var ee=O=m.createElement("link");Un(ee),bs(ee,"link",e),ee._p=new Promise(function(he,ve){ee.onload=he,ee.onerror=ve}),ee.addEventListener("load",function(){F.loading|=1}),ee.addEventListener("error",function(){F.loading|=2}),F.loading|=4,wu(O,s,m)}O={type:"stylesheet",instance:O,count:1,state:F},v.set(_,O)}}}function fb(e,s){ba.X(e,s);var u=Do;if(u&&e){var m=Ts(u).hoistableScripts,v=Bo(e),_=m.get(v);_||(_=u.querySelector(ql(v)),_||(e=N({src:e,async:!0},s),(s=vr.get(v))&&rf(e,s),_=u.createElement("script"),Un(_),bs(_,"link",e),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function gb(e,s){ba.M(e,s);var u=Do;if(u&&e){var m=Ts(u).hoistableScripts,v=Bo(e),_=m.get(v);_||(_=u.querySelector(ql(v)),_||(e=N({src:e,async:!0,type:"module"},s),(s=vr.get(v))&&rf(e,s),_=u.createElement("script"),Un(_),bs(_,"link",e),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function Ym(e,s,u,m){var v=(v=Ee.current)?yu(v):null;if(!v)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=Lo(u.href),u=Ts(v).hoistableStyles,m=u.get(s),m||(m={type:"style",instance:null,count:0,state:null},u.set(s,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){e=Lo(u.href);var _=Ts(v).hoistableStyles,O=_.get(e);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(e,O),(_=v.querySelector(Hl(e)))&&!_._p&&(O.instance=_,O.state.loading=5),vr.has(e)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},vr.set(e,u),_||mb(v,e,u,O.state))),s&&m===null)throw Error(o(528,""));return O}if(s&&m!==null)throw Error(o(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Bo(u),u=Ts(v).hoistableScripts,m=u.get(s),m||(m={type:"script",instance:null,count:0,state:null},u.set(s,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Lo(e){return'href="'+Tt(e)+'"'}function Hl(e){return'link[rel="stylesheet"]['+e+"]"}function Xm(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function mb(e,s,u,m){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?m.loading=1:(s=e.createElement("link"),m.preload=s,s.addEventListener("load",function(){return m.loading|=1}),s.addEventListener("error",function(){return m.loading|=2}),bs(s,"link",u),Un(s),e.head.appendChild(s))}function Bo(e){return'[src="'+Tt(e)+'"]'}function ql(e){return"script[async]"+e}function Qm(e,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var m=e.querySelector('style[data-href~="'+Tt(u.href)+'"]');if(m)return s.instance=m,Un(m),m;var v=N({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(e.ownerDocument||e).createElement("style"),Un(m),bs(m,"style",v),wu(m,u.precedence,e),s.instance=m;case"stylesheet":v=Lo(u.href);var _=e.querySelector(Hl(v));if(_)return s.state.loading|=4,s.instance=_,Un(_),_;m=Xm(u),(v=vr.get(v))&&sf(m,v),_=(e.ownerDocument||e).createElement("link"),Un(_);var O=_;return O._p=new Promise(function(F,ee){O.onload=F,O.onerror=ee}),bs(_,"link",m),s.state.loading|=4,wu(_,u.precedence,e),s.instance=_;case"script":return _=Bo(u.src),(v=e.querySelector(ql(_)))?(s.instance=v,Un(v),v):(m=u,(v=vr.get(_))&&(m=N({},u),rf(m,v)),e=e.ownerDocument||e,v=e.createElement("script"),Un(v),bs(v,"link",m),e.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(m=s.instance,s.state.loading|=4,wu(m,u.precedence,e));return s.instance}function wu(e,s,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,_=v,O=0;O<m.length;O++){var F=m[O];if(F.dataset.precedence===s)_=F;else if(_!==v)break}_?_.parentNode.insertBefore(e,_.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(e,s.firstChild))}function sf(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function rf(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var bu=null;function Wm(e,s,u){if(bu===null){var m=new Map,v=bu=new Map;v.set(u,m)}else v=bu,m=v.get(u),m||(m=new Map,v.set(u,m));if(m.has(e))return m;for(m.set(e,null),u=u.getElementsByTagName(e),v=0;v<u.length;v++){var _=u[v];if(!(_[dr]||_[kn]||e==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var O=_.getAttribute(s)||"";O=e+O;var F=m.get(O);F?F.push(_):m.set(O,[_])}}return m}function Km(e,s,u){e=e.ownerDocument||e,e.head.insertBefore(u,s==="title"?e.querySelector("head > title"):null)}function pb(e,s,u){if(u===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Zm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function xb(e,s,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Lo(m.href),_=s.querySelector(Hl(v));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=vu.bind(e),s.then(e,e)),u.state.loading|=4,u.instance=_,Un(_);return}_=s.ownerDocument||s,m=Xm(m),(v=vr.get(v))&&sf(m,v),_=_.createElement("link"),Un(_);var O=_;O._p=new Promise(function(F,ee){O.onload=F,O.onerror=ee}),bs(_,"link",m),u.instance=_}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(e.count++,u=vu.bind(e),s.addEventListener("load",u),s.addEventListener("error",u))}}var af=0;function yb(e,s){return e.stylesheets&&e.count===0&&Su(e,e.stylesheets),0<e.count||0<e.imgCount?function(u){var m=setTimeout(function(){if(e.stylesheets&&Su(e,e.stylesheets),e.unsuspend){var _=e.unsuspend;e.unsuspend=null,_()}},6e4+s);0<e.imgBytes&&af===0&&(af=62500*$w());var v=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Su(e,e.stylesheets),e.unsuspend)){var _=e.unsuspend;e.unsuspend=null,_()}},(e.imgBytes>af?50:800)+s);return e.unsuspend=u,function(){e.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function vu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Su(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Cu=null;function Su(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Cu=new Map,s.forEach(wb,e),Cu=null,vu.call(e))}function wb(e,s){if(!(s.state.loading&4)){var u=Cu.get(e);if(u)var m=u.get(null);else{u=new Map,Cu.set(e,u);for(var v=e.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var O=v[_];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),m=O)}m&&u.set(null,m)}v=s.instance,O=v.getAttribute("data-precedence"),_=u.get(O)||m,_===m&&u.set(null,v),u.set(O,v),this.count++,m=vu.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),_?_.parentNode.insertBefore(v,_.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(v,e.firstChild)),s.state.loading|=4}}var Vl={$$typeof:P,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function bb(e,s,u,m,v,_,O,F,ee){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=In(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.hiddenUpdates=In(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function $m(e,s,u,m,v,_,O,F,ee,he,ve,_e){return e=new bb(e,s,u,O,ee,he,ve,_e,F),s=1,_===!0&&(s|=24),_=$s(3,null,null,s),e.current=_,_.stateNode=e,s=Ud(),s.refCount++,e.pooledCache=s,s.refCount++,_.memoizedState={element:m,isDehydrated:u,cache:s},Hd(_),e}function Jm(e){return e?(e=go,e):go}function ep(e,s,u,m,v,_){v=Jm(v),m.context===null?m.context=v:m.pendingContext=v,m=Ya(s),m.payload={element:u},_=_===void 0?null:_,_!==null&&(m.callback=_),u=Xa(e,m,s),u!==null&&(qs(u,e,s),Cl(u,e,s))}function tp(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var u=e.retryLane;e.retryLane=u!==0&&u<s?u:s}}function of(e,s){tp(e,s),(e=e.alternate)&&tp(e,s)}function np(e){if(e.tag===13||e.tag===31){var s=Ti(e,67108864);s!==null&&qs(s,e,67108864),of(e,67108864)}}function sp(e){if(e.tag===13||e.tag===31){var s=sr();s=wn(s);var u=Ti(e,s);u!==null&&qs(u,e,s),of(e,s)}}var _u=!0;function vb(e,s,u,m){var v=J.T;J.T=null;var _=oe.p;try{oe.p=2,lf(e,s,u,m)}finally{oe.p=_,J.T=v}}function Cb(e,s,u,m){var v=J.T;J.T=null;var _=oe.p;try{oe.p=8,lf(e,s,u,m)}finally{oe.p=_,J.T=v}}function lf(e,s,u,m){if(_u){var v=cf(m);if(v===null)Xh(e,s,m,Eu,u),ap(e,m);else if(_b(v,e,s,u,m))m.stopPropagation();else if(ap(e,m),s&4&&-1<Sb.indexOf(e)){for(;v!==null;){var _=$t(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var O=ge(_.pendingLanes);if(O!==0){var F=_;for(F.pendingLanes|=2,F.entangledLanes|=2;O;){var ee=1<<31-ft(O);F.entanglements[1]|=ee,O&=~ee}Qr(_),(en&6)===0&&(ou=Fe()+500,Ul(0))}}break;case 31:case 13:F=Ti(_,2),F!==null&&qs(F,_,2),cu(),of(_,2)}if(_=cf(m),_===null&&Xh(e,s,m,Eu,u),_===v)break;v=_}v!==null&&m.stopPropagation()}else Xh(e,s,m,null,u)}}function cf(e){return e=ol(e),uf(e)}var Eu=null;function uf(e){if(Eu=null,e=Bn(e),e!==null){var s=h(e);if(s===null)e=null;else{var u=s.tag;if(u===13){if(e=x(s),e!==null)return e;e=null}else if(u===31){if(e=b(s),e!==null)return e;e=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Eu=e,null}function rp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case _t:return 2;case Rn:return 8;case rn:case Gt:return 32;case qn:return 268435456;default:return 32}default:return 32}}var df=!1,ri=null,ai=null,ii=null,Gl=new Map,Yl=new Map,oi=[],Sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ap(e,s){switch(e){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Gl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(s.pointerId)}}function Xl(e,s,u,m,v,_){return e===null||e.nativeEvent!==_?(e={blockedOn:s,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},s!==null&&(s=$t(s),s!==null&&np(s)),e):(e.eventSystemFlags|=m,s=e.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),e)}function _b(e,s,u,m,v){switch(s){case"focusin":return ri=Xl(ri,e,s,u,m,v),!0;case"dragenter":return ai=Xl(ai,e,s,u,m,v),!0;case"mouseover":return ii=Xl(ii,e,s,u,m,v),!0;case"pointerover":var _=v.pointerId;return Gl.set(_,Xl(Gl.get(_)||null,e,s,u,m,v)),!0;case"gotpointercapture":return _=v.pointerId,Yl.set(_,Xl(Yl.get(_)||null,e,s,u,m,v)),!0}return!1}function ip(e){var s=Bn(e.target);if(s!==null){var u=h(s);if(u!==null){if(s=u.tag,s===13){if(s=x(u),s!==null){e.blockedOn=s,He(e.priority,function(){sp(u)});return}}else if(s===31){if(s=b(u),s!==null){e.blockedOn=s,He(e.priority,function(){sp(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){e.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Au(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var u=cf(e.nativeEvent);if(u===null){u=e.nativeEvent;var m=new u.constructor(u.type,u);bi=m,u.target.dispatchEvent(m),bi=null}else return s=$t(u),s!==null&&np(s),e.blockedOn=u,!1;s.shift()}return!0}function op(e,s,u){Au(e)&&u.delete(s)}function Eb(){df=!1,ri!==null&&Au(ri)&&(ri=null),ai!==null&&Au(ai)&&(ai=null),ii!==null&&Au(ii)&&(ii=null),Gl.forEach(op),Yl.forEach(op)}function Nu(e,s){e.blockedOn===s&&(e.blockedOn=null,df||(df=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Eb)))}var Tu=null;function lp(e){Tu!==e&&(Tu=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Tu===e&&(Tu=null);for(var s=0;s<e.length;s+=3){var u=e[s],m=e[s+1],v=e[s+2];if(typeof m!="function"){if(uf(m||u)===null)continue;break}var _=$t(u);_!==null&&(e.splice(s,3),s-=3,lh(_,{pending:!0,data:v,method:u.method,action:m},m,v))}}))}function Uo(e){function s(ee){return Nu(ee,e)}ri!==null&&Nu(ri,e),ai!==null&&Nu(ai,e),ii!==null&&Nu(ii,e),Gl.forEach(s),Yl.forEach(s);for(var u=0;u<oi.length;u++){var m=oi[u];m.blockedOn===e&&(m.blockedOn=null)}for(;0<oi.length&&(u=oi[0],u.blockedOn===null);)ip(u),u.blockedOn===null&&oi.shift();if(u=(e.ownerDocument||e).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var v=u[m],_=u[m+1],O=v[Zt]||null;if(typeof _=="function")O||lp(u);else if(O){var F=null;if(_&&_.hasAttribute("formAction")){if(v=_,O=_[Zt]||null)F=O.formAction;else if(uf(v)!==null)continue}else F=O.action;typeof F=="function"?u[m+1]=F:(u.splice(m,3),m-=3),lp(u)}}}function cp(){function e(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function s(){v!==null&&(v(),v=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),v!==null&&(v(),v=null)}}}function hf(e){this._internalRoot=e}ju.prototype.render=hf.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(o(409));var u=s.current,m=sr();ep(u,m,e,s,null,null)},ju.prototype.unmount=hf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;ep(e.current,2,null,e,null,null),cu(),s[je]=null}};function ju(e){this._internalRoot=e}ju.prototype.unstable_scheduleHydration=function(e){if(e){var s=rs();e={blockedOn:null,target:e,priority:s};for(var u=0;u<oi.length&&s!==0&&s<oi[u].priority;u++);oi.splice(u,0,e),u===0&&ip(e)}};var up=t.version;if(up!=="19.2.0")throw Error(o(527,up,"19.2.0"));oe.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=w(s),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var Ab={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Rt=Ru.inject(Ab),Ne=Ru}catch{}}return Wl.createRoot=function(e,s){if(!d(e))throw Error(o(299));var u=!1,m="",v=xg,_=yg,O=wg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=$m(e,1,!1,null,null,u,m,null,v,_,O,cp),e[je]=s.current,Yh(e),new hf(s)},Wl.hydrateRoot=function(e,s,u){if(!d(e))throw Error(o(299));var m=!1,v="",_=xg,O=yg,F=wg,ee=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.formState!==void 0&&(ee=u.formState)),s=$m(e,1,!0,s,u??null,m,v,ee,_,O,F,cp),s.context=Jm(null),u=s.current,m=sr(),m=wn(m),v=Ya(m),v.callback=null,Xa(u,v,m),u=m,s.current.lanes=u,X(s,u),Qr(s),e[je]=s.current,Yh(e),new ju(s)},Wl.version="19.2.0",Wl}var bp;function Bb(){if(bp)return mf.exports;bp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),mf.exports=Lb(),mf.exports}var Ub=Bb();var vp="popstate";function Pb(a={}){function t(d,h){let{pathname:x="/",search:b="",hash:C=""}=Ji(d.location.hash.substring(1));return!x.startsWith("/")&&!x.startsWith(".")&&(x="/"+x),a0("",{pathname:x,search:b,hash:C},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function r(d,h){let x=d.document.querySelector("base"),b="";if(x&&x.getAttribute("href")){let C=d.location.href,w=C.indexOf("#");b=w===-1?C:C.slice(0,w)}return b+"#"+(typeof h=="string"?h:rc(h))}function o(d,h){ur(d.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return Fb(t,r,o,a)}function jn(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function ur(a,t){if(!a){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zb(){return Math.random().toString(36).substring(2,10)}function Cp(a,t){return{usr:a.state,key:a.key,idx:t}}function a0(a,t,r=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof t=="string"?Ji(t):t,state:r,key:t&&t.key||o||zb()}}function rc({pathname:a="/",search:t="",hash:r=""}){return t&&t!=="?"&&(a+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(a+=r.charAt(0)==="#"?r:"#"+r),a}function Ji(a){let t={};if(a){let r=a.indexOf("#");r>=0&&(t.hash=a.substring(r),a=a.substring(0,r));let o=a.indexOf("?");o>=0&&(t.search=a.substring(o),a=a.substring(0,o)),a&&(t.pathname=a)}return t}function Fb(a,t,r,o={}){let{window:d=document.defaultView,v5Compat:h=!1}=o,x=d.history,b="POP",C=null,w=A();w==null&&(w=0,x.replaceState({...x.state,idx:w},""));function A(){return(x.state||{idx:null}).idx}function N(){b="POP";let D=A(),H=D==null?null:D-w;w=D,C&&C({action:b,location:k.location,delta:H})}function T(D,H){b="PUSH";let U=a0(k.location,D,H);r&&r(U,D),w=A()+1;let P=Cp(U,w),K=k.createHref(U);try{x.pushState(P,"",K)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;d.location.assign(K)}h&&C&&C({action:b,location:k.location,delta:1})}function j(D,H){b="REPLACE";let U=a0(k.location,D,H);r&&r(U,D),w=A();let P=Cp(U,w),K=k.createHref(U);x.replaceState(P,"",K),h&&C&&C({action:b,location:k.location,delta:0})}function I(D){return Hb(D)}let k={get action(){return b},get location(){return a(d,x)},listen(D){if(C)throw new Error("A history only accepts one active listener");return d.addEventListener(vp,N),C=D,()=>{d.removeEventListener(vp,N),C=null}},createHref(D){return t(d,D)},createURL:I,encodeLocation(D){let H=I(D);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:j,go(D){return x.go(D)}};return k}function Hb(a,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),jn(r,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:rc(a);return o=o.replace(/ $/,"%20"),!t&&o.startsWith("//")&&(o=r+o),new URL(o,r)}function wy(a,t,r="/"){return qb(a,t,r,!1)}function qb(a,t,r,o){let d=typeof t=="string"?Ji(t):t,h=Ea(d.pathname||"/",r);if(h==null)return null;let x=by(a);Vb(x);let b=null;for(let C=0;b==null&&C<x.length;++C){let w=tv(h);b=Jb(x[C],w,o)}return b}function by(a,t=[],r=[],o="",d=!1){let h=(x,b,C=d,w)=>{let A={relativePath:w===void 0?x.path||"":w,caseSensitive:x.caseSensitive===!0,childrenIndex:b,route:x};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(o)&&C)return;jn(A.relativePath.startsWith(o),`Absolute route path "${A.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(o.length)}let N=Sa([o,A.relativePath]),T=r.concat(A);x.children&&x.children.length>0&&(jn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),by(x.children,t,T,N,C)),!(x.path==null&&!x.index)&&t.push({path:N,score:Zb(N,x.index),routesMeta:T})};return a.forEach((x,b)=>{if(x.path===""||!x.path?.includes("?"))h(x,b);else for(let C of vy(x.path))h(x,b,!0,C)}),t}function vy(a){let t=a.split("/");if(t.length===0)return[];let[r,...o]=t,d=r.endsWith("?"),h=r.replace(/\?$/,"");if(o.length===0)return d?[h,""]:[h];let x=vy(o.join("/")),b=[];return b.push(...x.map(C=>C===""?h:[h,C].join("/"))),d&&b.push(...x),b.map(C=>a.startsWith("/")&&C===""?"/":C)}function Vb(a){a.sort((t,r)=>t.score!==r.score?r.score-t.score:$b(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}var Gb=/^:[\w-]+$/,Yb=3,Xb=2,Qb=1,Wb=10,Kb=-2,Sp=a=>a==="*";function Zb(a,t){let r=a.split("/"),o=r.length;return r.some(Sp)&&(o+=Kb),t&&(o+=Xb),r.filter(d=>!Sp(d)).reduce((d,h)=>d+(Gb.test(h)?Yb:h===""?Qb:Wb),o)}function $b(a,t){return a.length===t.length&&a.slice(0,-1).every((o,d)=>o===t[d])?a[a.length-1]-t[t.length-1]:0}function Jb(a,t,r=!1){let{routesMeta:o}=a,d={},h="/",x=[];for(let b=0;b<o.length;++b){let C=o[b],w=b===o.length-1,A=h==="/"?t:t.slice(h.length)||"/",N=Wu({path:C.relativePath,caseSensitive:C.caseSensitive,end:w},A),T=C.route;if(!N&&w&&r&&!o[o.length-1].route.index&&(N=Wu({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},A)),!N)return null;Object.assign(d,N.params),x.push({params:d,pathname:Sa([h,N.pathname]),pathnameBase:iv(Sa([h,N.pathnameBase])),route:T}),N.pathnameBase!=="/"&&(h=Sa([h,N.pathnameBase]))}return x}function Wu(a,t){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[r,o]=ev(a.path,a.caseSensitive,a.end),d=t.match(r);if(!d)return null;let h=d[0],x=h.replace(/(.)\/+$/,"$1"),b=d.slice(1);return{params:o.reduce((w,{paramName:A,isOptional:N},T)=>{if(A==="*"){let I=b[T]||"";x=h.slice(0,h.length-I.length).replace(/(.)\/+$/,"$1")}const j=b[T];return N&&!j?w[A]=void 0:w[A]=(j||"").replace(/%2F/g,"/"),w},{}),pathname:h,pathnameBase:x,pattern:a}}function ev(a,t=!1,r=!0){ur(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],d="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,b,C)=>(o.push({paramName:b,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(o.push({paramName:"*"}),d+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?d+="\\/*$":a!==""&&a!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,t?void 0:"i"),o]}function tv(a){try{return a.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ur(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),a}}function Ea(a,t){if(t==="/")return a;if(!a.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=a.charAt(r);return o&&o!=="/"?null:a.slice(r)||"/"}var nv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sv=a=>nv.test(a);function rv(a,t="/"){let{pathname:r,search:o="",hash:d=""}=typeof a=="string"?Ji(a):a,h;if(r)if(sv(r))h=r;else{if(r.includes("//")){let x=r;r=r.replace(/\/\/+/g,"/"),ur(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${r}`)}r.startsWith("/")?h=_p(r.substring(1),"/"):h=_p(r,t)}else h=t;return{pathname:h,search:ov(o),hash:lv(d)}}function _p(a,t){let r=t.replace(/\/+$/,"").split("/");return a.split("/").forEach(d=>{d===".."?r.length>1&&r.pop():d!=="."&&r.push(d)}),r.length>1?r.join("/"):"/"}function wf(a,t,r,o){return`Cannot include a '${a}' character in a manually specified \`to.${t}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function av(a){return a.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function D0(a){let t=av(a);return t.map((r,o)=>o===t.length-1?r.pathname:r.pathnameBase)}function L0(a,t,r,o=!1){let d;typeof a=="string"?d=Ji(a):(d={...a},jn(!d.pathname||!d.pathname.includes("?"),wf("?","pathname","search",d)),jn(!d.pathname||!d.pathname.includes("#"),wf("#","pathname","hash",d)),jn(!d.search||!d.search.includes("#"),wf("#","search","hash",d)));let h=a===""||d.pathname==="",x=h?"/":d.pathname,b;if(x==null)b=r;else{let N=t.length-1;if(!o&&x.startsWith("..")){let T=x.split("/");for(;T[0]==="..";)T.shift(),N-=1;d.pathname=T.join("/")}b=N>=0?t[N]:"/"}let C=rv(d,b),w=x&&x!=="/"&&x.endsWith("/"),A=(h||x===".")&&r.endsWith("/");return!C.pathname.endsWith("/")&&(w||A)&&(C.pathname+="/"),C}var Sa=a=>a.join("/").replace(/\/\/+/g,"/"),iv=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),ov=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,lv=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function cv(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Cy=["POST","PUT","PATCH","DELETE"];new Set(Cy);var uv=["GET",...Cy];new Set(uv);var el=M.createContext(null);el.displayName="DataRouter";var od=M.createContext(null);od.displayName="DataRouterState";M.createContext(!1);var Sy=M.createContext({isTransitioning:!1});Sy.displayName="ViewTransition";var dv=M.createContext(new Map);dv.displayName="Fetchers";var hv=M.createContext(null);hv.displayName="Await";var Pr=M.createContext(null);Pr.displayName="Navigation";var dc=M.createContext(null);dc.displayName="Location";var zr=M.createContext({outlet:null,matches:[],isDataRoute:!1});zr.displayName="Route";var B0=M.createContext(null);B0.displayName="RouteError";function fv(a,{relative:t}={}){jn(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=M.useContext(Pr),{hash:d,pathname:h,search:x}=hc(a,{relative:t}),b=h;return r!=="/"&&(b=h==="/"?r:Sa([r,h])),o.createHref({pathname:b,search:x,hash:d})}function tl(){return M.useContext(dc)!=null}function Na(){return jn(tl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(dc).location}var _y="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ey(a){M.useContext(Pr).static||M.useLayoutEffect(a)}function hs(){let{isDataRoute:a}=M.useContext(zr);return a?Av():gv()}function gv(){jn(tl(),"useNavigate() may be used only in the context of a <Router> component.");let a=M.useContext(el),{basename:t,navigator:r}=M.useContext(Pr),{matches:o}=M.useContext(zr),{pathname:d}=Na(),h=JSON.stringify(D0(o)),x=M.useRef(!1);return Ey(()=>{x.current=!0}),M.useCallback((C,w={})=>{if(ur(x.current,_y),!x.current)return;if(typeof C=="number"){r.go(C);return}let A=L0(C,JSON.parse(h),d,w.relative==="path");a==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Sa([t,A.pathname])),(w.replace?r.replace:r.push)(A,w.state,w)},[t,r,h,d,a])}M.createContext(null);function ld(){let{matches:a}=M.useContext(zr),t=a[a.length-1];return t?t.params:{}}function hc(a,{relative:t}={}){let{matches:r}=M.useContext(zr),{pathname:o}=Na(),d=JSON.stringify(D0(r));return M.useMemo(()=>L0(a,JSON.parse(d),o,t==="path"),[a,d,o,t])}function mv(a,t){return Ay(a,t)}function Ay(a,t,r,o,d){jn(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=M.useContext(Pr),{matches:x}=M.useContext(zr),b=x[x.length-1],C=b?b.params:{},w=b?b.pathname:"/",A=b?b.pathnameBase:"/",N=b&&b.route;{let U=N&&N.path||"";Ny(w,!N||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let T=Na(),j;if(t){let U=typeof t=="string"?Ji(t):t;jn(A==="/"||U.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${U.pathname}" was given in the \`location\` prop.`),j=U}else j=T;let I=j.pathname||"/",k=I;if(A!=="/"){let U=A.replace(/^\//,"").split("/");k="/"+I.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=wy(a,{pathname:k});ur(N||D!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),ur(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=bv(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},C,U.params),pathname:Sa([A,h.encodeLocation?h.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?A:Sa([A,h.encodeLocation?h.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),x,r,o,d);return t&&H?M.createElement(dc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},H):H}function pv(){let a=Ev(),t=cv(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),r=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},h={padding:"2px 4px",backgroundColor:o},x=null;return console.error("Error handled by React Router default ErrorBoundary:",a),x=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:h},"ErrorBoundary")," or"," ",M.createElement("code",{style:h},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),r?M.createElement("pre",{style:d},r):null,x)}var xv=M.createElement(pv,null),yv=class extends M.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,t){return t.location!==a.location||t.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:t.error,location:t.location,revalidation:a.revalidation||t.revalidation}}componentDidCatch(a,t){this.props.onError?this.props.onError(a,t):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?M.createElement(zr.Provider,{value:this.props.routeContext},M.createElement(B0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wv({routeContext:a,match:t,children:r}){let o=M.useContext(el);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(zr.Provider,{value:a},r)}function bv(a,t=[],r=null,o=null,d=null){if(a==null){if(!r)return null;if(r.errors)a=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)a=r.matches;else return null}let h=a,x=r?.errors;if(x!=null){let A=h.findIndex(N=>N.route.id&&x?.[N.route.id]!==void 0);jn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),h=h.slice(0,Math.min(h.length,A+1))}let b=!1,C=-1;if(r)for(let A=0;A<h.length;A++){let N=h[A];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(C=A),N.route.id){let{loaderData:T,errors:j}=r,I=N.route.loader&&!T.hasOwnProperty(N.route.id)&&(!j||j[N.route.id]===void 0);if(N.route.lazy||I){b=!0,C>=0?h=h.slice(0,C+1):h=[h[0]];break}}}let w=r&&o?(A,N)=>{o(A,{location:r.location,params:r.matches?.[0]?.params??{},errorInfo:N})}:void 0;return h.reduceRight((A,N,T)=>{let j,I=!1,k=null,D=null;r&&(j=x&&N.route.id?x[N.route.id]:void 0,k=N.route.errorElement||xv,b&&(C<0&&T===0?(Ny("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,D=null):C===T&&(I=!0,D=N.route.hydrateFallbackElement||null)));let H=t.concat(h.slice(0,T+1)),U=()=>{let P;return j?P=k:I?P=D:N.route.Component?P=M.createElement(N.route.Component,null):N.route.element?P=N.route.element:P=A,M.createElement(wv,{match:N,routeContext:{outlet:A,matches:H,isDataRoute:r!=null},children:P})};return r&&(N.route.ErrorBoundary||N.route.errorElement||T===0)?M.createElement(yv,{location:r.location,revalidation:r.revalidation,component:k,error:j,children:U(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:w}):U()},null)}function U0(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vv(a){let t=M.useContext(el);return jn(t,U0(a)),t}function Cv(a){let t=M.useContext(od);return jn(t,U0(a)),t}function Sv(a){let t=M.useContext(zr);return jn(t,U0(a)),t}function P0(a){let t=Sv(a),r=t.matches[t.matches.length-1];return jn(r.route.id,`${a} can only be used on routes that contain a unique "id"`),r.route.id}function _v(){return P0("useRouteId")}function Ev(){let a=M.useContext(B0),t=Cv("useRouteError"),r=P0("useRouteError");return a!==void 0?a:t.errors?.[r]}function Av(){let{router:a}=vv("useNavigate"),t=P0("useNavigate"),r=M.useRef(!1);return Ey(()=>{r.current=!0}),M.useCallback(async(d,h={})=>{ur(r.current,_y),r.current&&(typeof d=="number"?a.navigate(d):await a.navigate(d,{fromRouteId:t,...h}))},[a,t])}var Ep={};function Ny(a,t,r){!t&&!Ep[a]&&(Ep[a]=!0,ur(!1,r))}M.memo(Nv);function Nv({routes:a,future:t,state:r,unstable_onError:o}){return Ay(a,void 0,r,o,t)}function Ty({to:a,replace:t,state:r,relative:o}){jn(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=M.useContext(Pr);ur(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=M.useContext(zr),{pathname:x}=Na(),b=hs(),C=L0(a,D0(h),x,o==="path"),w=JSON.stringify(C);return M.useEffect(()=>{b(JSON.parse(w),{replace:t,state:r,relative:o})},[b,w,o,t,r]),null}function Hn(a){jn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Tv({basename:a="/",children:t=null,location:r,navigationType:o="POP",navigator:d,static:h=!1}){jn(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=a.replace(/^\/*/,"/"),b=M.useMemo(()=>({basename:x,navigator:d,static:h,future:{}}),[x,d,h]);typeof r=="string"&&(r=Ji(r));let{pathname:C="/",search:w="",hash:A="",state:N=null,key:T="default"}=r,j=M.useMemo(()=>{let I=Ea(C,x);return I==null?null:{location:{pathname:I,search:w,hash:A,state:N,key:T},navigationType:o}},[x,C,w,A,N,T,o]);return ur(j!=null,`<Router basename="${x}"> is not able to match the URL "${C}${w}${A}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:M.createElement(Pr.Provider,{value:b},M.createElement(dc.Provider,{children:t,value:j}))}function jv({children:a,location:t}){return mv(i0(a),t)}function i0(a,t=[]){let r=[];return M.Children.forEach(a,(o,d)=>{if(!M.isValidElement(o))return;let h=[...t,d];if(o.type===M.Fragment){r.push.apply(r,i0(o.props.children,h));return}jn(o.type===Hn,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let x={id:o.props.id||h.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(x.children=i0(o.props.children,h)),r.push(x)}),r}var Xu="get",Qu="application/x-www-form-urlencoded";function cd(a){return a!=null&&typeof a.tagName=="string"}function Rv(a){return cd(a)&&a.tagName.toLowerCase()==="button"}function Ov(a){return cd(a)&&a.tagName.toLowerCase()==="form"}function Iv(a){return cd(a)&&a.tagName.toLowerCase()==="input"}function Mv(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function kv(a,t){return a.button===0&&(!t||t==="_self")&&!Mv(a)}var Iu=null;function Dv(){if(Iu===null)try{new FormData(document.createElement("form"),0),Iu=!1}catch{Iu=!0}return Iu}var Lv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bf(a){return a!=null&&!Lv.has(a)?(ur(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qu}"`),null):a}function Bv(a,t){let r,o,d,h,x;if(Ov(a)){let b=a.getAttribute("action");o=b?Ea(b,t):null,r=a.getAttribute("method")||Xu,d=bf(a.getAttribute("enctype"))||Qu,h=new FormData(a)}else if(Rv(a)||Iv(a)&&(a.type==="submit"||a.type==="image")){let b=a.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=a.getAttribute("formaction")||b.getAttribute("action");if(o=C?Ea(C,t):null,r=a.getAttribute("formmethod")||b.getAttribute("method")||Xu,d=bf(a.getAttribute("formenctype"))||bf(b.getAttribute("enctype"))||Qu,h=new FormData(b,a),!Dv()){let{name:w,type:A,value:N}=a;if(A==="image"){let T=w?`${w}.`:"";h.append(`${T}x`,"0"),h.append(`${T}y`,"0")}else w&&h.append(w,N)}}else{if(cd(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Xu,o=null,d=Qu,x=a}return h&&d==="text/plain"&&(x=h,h=void 0),{action:o,method:r.toLowerCase(),encType:d,formData:h,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function z0(a,t){if(a===!1||a===null||typeof a>"u")throw new Error(t)}function Uv(a,t,r){let o=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return o.pathname==="/"?o.pathname=`_root.${r}`:t&&Ea(o.pathname,t)==="/"?o.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function Pv(a,t){if(a.id in t)return t[a.id];try{let r=await import(a.module);return t[a.id]=r,r}catch(r){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zv(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function Fv(a,t,r){let o=await Promise.all(a.map(async d=>{let h=t.routes[d.route.id];if(h){let x=await Pv(h,r);return x.links?x.links():[]}return[]}));return Gv(o.flat(1).filter(zv).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Ap(a,t,r,o,d,h){let x=(C,w)=>r[w]?C.route.id!==r[w].route.id:!0,b=(C,w)=>r[w].pathname!==C.pathname||r[w].route.path?.endsWith("*")&&r[w].params["*"]!==C.params["*"];return h==="assets"?t.filter((C,w)=>x(C,w)||b(C,w)):h==="data"?t.filter((C,w)=>{let A=o.routes[C.route.id];if(!A||!A.hasLoader)return!1;if(x(C,w)||b(C,w))return!0;if(C.route.shouldRevalidate){let N=C.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function Hv(a,t,{includeHydrateFallback:r}={}){return qv(a.map(o=>{let d=t.routes[o.route.id];if(!d)return[];let h=[d.module];return d.clientActionModule&&(h=h.concat(d.clientActionModule)),d.clientLoaderModule&&(h=h.concat(d.clientLoaderModule)),r&&d.hydrateFallbackModule&&(h=h.concat(d.hydrateFallbackModule)),d.imports&&(h=h.concat(d.imports)),h}).flat(1))}function qv(a){return[...new Set(a)]}function Vv(a){let t={},r=Object.keys(a).sort();for(let o of r)t[o]=a[o];return t}function Gv(a,t){let r=new Set;return new Set(t),a.reduce((o,d)=>{let h=JSON.stringify(Vv(d));return r.has(h)||(r.add(h),o.push({key:h,link:d})),o},[])}function jy(){let a=M.useContext(el);return z0(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Yv(){let a=M.useContext(od);return z0(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var F0=M.createContext(void 0);F0.displayName="FrameworkContext";function Ry(){let a=M.useContext(F0);return z0(a,"You must render this element inside a <HydratedRouter> element"),a}function Xv(a,t){let r=M.useContext(F0),[o,d]=M.useState(!1),[h,x]=M.useState(!1),{onFocus:b,onBlur:C,onMouseEnter:w,onMouseLeave:A,onTouchStart:N}=t,T=M.useRef(null);M.useEffect(()=>{if(a==="render"&&x(!0),a==="viewport"){let k=H=>{H.forEach(U=>{x(U.isIntersecting)})},D=new IntersectionObserver(k,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[a]),M.useEffect(()=>{if(o){let k=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(k)}}},[o]);let j=()=>{d(!0)},I=()=>{d(!1),x(!1)};return r?a!=="intent"?[h,T,{}]:[h,T,{onFocus:Kl(b,j),onBlur:Kl(C,I),onMouseEnter:Kl(w,j),onMouseLeave:Kl(A,I),onTouchStart:Kl(N,j)}]:[!1,T,{}]}function Kl(a,t){return r=>{a&&a(r),r.defaultPrevented||t(r)}}function Qv({page:a,...t}){let{router:r}=jy(),o=M.useMemo(()=>wy(r.routes,a,r.basename),[r.routes,a,r.basename]);return o?M.createElement(Kv,{page:a,matches:o,...t}):null}function Wv(a){let{manifest:t,routeModules:r}=Ry(),[o,d]=M.useState([]);return M.useEffect(()=>{let h=!1;return Fv(a,t,r).then(x=>{h||d(x)}),()=>{h=!0}},[a,t,r]),o}function Kv({page:a,matches:t,...r}){let o=Na(),{manifest:d,routeModules:h}=Ry(),{basename:x}=jy(),{loaderData:b,matches:C}=Yv(),w=M.useMemo(()=>Ap(a,t,C,d,o,"data"),[a,t,C,d,o]),A=M.useMemo(()=>Ap(a,t,C,d,o,"assets"),[a,t,C,d,o]),N=M.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let I=new Set,k=!1;if(t.forEach(H=>{let U=d.routes[H.route.id];!U||!U.hasLoader||(!w.some(P=>P.route.id===H.route.id)&&H.route.id in b&&h[H.route.id]?.shouldRevalidate||U.hasClientLoader?k=!0:I.add(H.route.id))}),I.size===0)return[];let D=Uv(a,x,"data");return k&&I.size>0&&D.searchParams.set("_routes",t.filter(H=>I.has(H.route.id)).map(H=>H.route.id).join(",")),[D.pathname+D.search]},[x,b,o,d,w,t,a,h]),T=M.useMemo(()=>Hv(A,d),[A,d]),j=Wv(A);return M.createElement(M.Fragment,null,N.map(I=>M.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...r})),T.map(I=>M.createElement("link",{key:I,rel:"modulepreload",href:I,...r})),j.map(({key:I,link:k})=>M.createElement("link",{key:I,nonce:r.nonce,...k})))}function Zv(...a){return t=>{a.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Oy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Oy&&(window.__reactRouterVersion="7.9.6")}catch{}function $v({basename:a,children:t,window:r}){let o=M.useRef();o.current==null&&(o.current=Pb({window:r,v5Compat:!0}));let d=o.current,[h,x]=M.useState({action:d.action,location:d.location}),b=M.useCallback(C=>{M.startTransition(()=>x(C))},[x]);return M.useLayoutEffect(()=>d.listen(b),[d,b]),M.createElement(Tv,{basename:a,children:t,location:h.location,navigationType:h.action,navigator:d})}var Iy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fc=M.forwardRef(function({onClick:t,discover:r="render",prefetch:o="none",relative:d,reloadDocument:h,replace:x,state:b,target:C,to:w,preventScrollReset:A,viewTransition:N,...T},j){let{basename:I}=M.useContext(Pr),k=typeof w=="string"&&Iy.test(w),D,H=!1;if(typeof w=="string"&&k&&(D=w,Oy))try{let q=new URL(window.location.href),ue=w.startsWith("//")?new URL(q.protocol+w):new URL(w),fe=Ea(ue.pathname,I);ue.origin===q.origin&&fe!=null?w=fe+ue.search+ue.hash:H=!0}catch{ur(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=fv(w,{relative:d}),[P,K,Z]=Xv(o,T),Y=nC(w,{replace:x,state:b,target:C,preventScrollReset:A,relative:d,viewTransition:N});function V(q){t&&t(q),q.defaultPrevented||Y(q)}let $=M.createElement("a",{...T,...Z,href:D||U,onClick:H||h?t:V,ref:Zv(j,K),target:C,"data-discover":!k&&r==="render"?"true":void 0});return P&&!k?M.createElement(M.Fragment,null,$,M.createElement(Qv,{page:U})):$});fc.displayName="Link";var Jv=M.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:o="",end:d=!1,style:h,to:x,viewTransition:b,children:C,...w},A){let N=hc(x,{relative:w.relative}),T=Na(),j=M.useContext(od),{navigator:I,basename:k}=M.useContext(Pr),D=j!=null&&oC(N)&&b===!0,H=I.encodeLocation?I.encodeLocation(N).pathname:N.pathname,U=T.pathname,P=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;r||(U=U.toLowerCase(),P=P?P.toLowerCase():null,H=H.toLowerCase()),P&&k&&(P=Ea(P,k)||P);const K=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let Z=U===H||!d&&U.startsWith(H)&&U.charAt(K)==="/",Y=P!=null&&(P===H||!d&&P.startsWith(H)&&P.charAt(H.length)==="/"),V={isActive:Z,isPending:Y,isTransitioning:D},$=Z?t:void 0,q;typeof o=="function"?q=o(V):q=[o,Z?"active":null,Y?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let ue=typeof h=="function"?h(V):h;return M.createElement(fc,{...w,"aria-current":$,className:q,ref:A,style:ue,to:x,viewTransition:b},typeof C=="function"?C(V):C)});Jv.displayName="NavLink";var eC=M.forwardRef(({discover:a="render",fetcherKey:t,navigate:r,reloadDocument:o,replace:d,state:h,method:x=Xu,action:b,onSubmit:C,relative:w,preventScrollReset:A,viewTransition:N,...T},j)=>{let I=aC(),k=iC(b,{relative:w}),D=x.toLowerCase()==="get"?"get":"post",H=typeof b=="string"&&Iy.test(b),U=P=>{if(C&&C(P),P.defaultPrevented)return;P.preventDefault();let K=P.nativeEvent.submitter,Z=K?.getAttribute("formmethod")||x;I(K||P.currentTarget,{fetcherKey:t,method:Z,navigate:r,replace:d,state:h,relative:w,preventScrollReset:A,viewTransition:N})};return M.createElement("form",{ref:j,method:D,action:k,onSubmit:o?C:U,...T,"data-discover":!H&&a==="render"?"true":void 0})});eC.displayName="Form";function tC(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function My(a){let t=M.useContext(el);return jn(t,tC(a)),t}function nC(a,{target:t,replace:r,state:o,preventScrollReset:d,relative:h,viewTransition:x}={}){let b=hs(),C=Na(),w=hc(a,{relative:h});return M.useCallback(A=>{if(kv(A,t)){A.preventDefault();let N=r!==void 0?r:rc(C)===rc(w);b(a,{replace:N,state:o,preventScrollReset:d,relative:h,viewTransition:x})}},[C,b,w,r,o,t,a,d,h,x])}var sC=0,rC=()=>`__${String(++sC)}__`;function aC(){let{router:a}=My("useSubmit"),{basename:t}=M.useContext(Pr),r=_v();return M.useCallback(async(o,d={})=>{let{action:h,method:x,encType:b,formData:C,body:w}=Bv(o,t);if(d.navigate===!1){let A=d.fetcherKey||rC();await a.fetch(A,r,d.action||h,{preventScrollReset:d.preventScrollReset,formData:C,body:w,formMethod:d.method||x,formEncType:d.encType||b,flushSync:d.flushSync})}else await a.navigate(d.action||h,{preventScrollReset:d.preventScrollReset,formData:C,body:w,formMethod:d.method||x,formEncType:d.encType||b,replace:d.replace,state:d.state,fromRouteId:r,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,t,r])}function iC(a,{relative:t}={}){let{basename:r}=M.useContext(Pr),o=M.useContext(zr);jn(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),h={...hc(a||".",{relative:t})},x=Na();if(a==null){h.search=x.search;let b=new URLSearchParams(h.search),C=b.getAll("index");if(C.some(A=>A==="")){b.delete("index"),C.filter(N=>N).forEach(N=>b.append("index",N));let A=b.toString();h.search=A?`?${A}`:""}}return(!a||a===".")&&d.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(h.pathname=h.pathname==="/"?r:Sa([r,h.pathname])),rc(h)}function oC(a,{relative:t}={}){let r=M.useContext(Sy);jn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=My("useViewTransitionState"),d=hc(a,{relative:t});if(!r.isTransitioning)return!1;let h=Ea(r.currentLocation.pathname,o)||r.currentLocation.pathname,x=Ea(r.nextLocation.pathname,o)||r.nextLocation.pathname;return Wu(d.pathname,x)!=null||Wu(d.pathname,h)!=null}var gc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){return this.listeners.add(a),this.onSubscribe(),()=>{this.listeners.delete(a),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lC={setTimeout:(a,t)=>setTimeout(a,t),clearTimeout:a=>clearTimeout(a),setInterval:(a,t)=>setInterval(a,t),clearInterval:a=>clearInterval(a)},cC=class{#e=lC;#t=!1;setTimeoutProvider(a){this.#e=a}setTimeout(a,t){return this.#e.setTimeout(a,t)}clearTimeout(a){this.#e.clearTimeout(a)}setInterval(a,t){return this.#e.setInterval(a,t)}clearInterval(a){this.#e.clearInterval(a)}},Wi=new cC;function uC(a){setTimeout(a,0)}var Zi=typeof window>"u"||"Deno"in globalThis;function Vs(){}function dC(a,t){return typeof a=="function"?a(t):a}function o0(a){return typeof a=="number"&&a>=0&&a!==1/0}function ky(a,t){return Math.max(a+(t||0)-Date.now(),0)}function mi(a,t){return typeof a=="function"?a(t):a}function Sr(a,t){return typeof a=="function"?a(t):a}function Np(a,t){const{type:r="all",exact:o,fetchStatus:d,predicate:h,queryKey:x,stale:b}=a;if(x){if(o){if(t.queryHash!==H0(x,t.options))return!1}else if(!ic(t.queryKey,x))return!1}if(r!=="all"){const C=t.isActive();if(r==="active"&&!C||r==="inactive"&&C)return!1}return!(typeof b=="boolean"&&t.isStale()!==b||d&&d!==t.state.fetchStatus||h&&!h(t))}function Tp(a,t){const{exact:r,status:o,predicate:d,mutationKey:h}=a;if(h){if(!t.options.mutationKey)return!1;if(r){if(ac(t.options.mutationKey)!==ac(h))return!1}else if(!ic(t.options.mutationKey,h))return!1}return!(o&&t.state.status!==o||d&&!d(t))}function H0(a,t){return(t?.queryKeyHashFn||ac)(a)}function ac(a){return JSON.stringify(a,(t,r)=>c0(r)?Object.keys(r).sort().reduce((o,d)=>(o[d]=r[d],o),{}):r)}function ic(a,t){return a===t?!0:typeof a!=typeof t?!1:a&&t&&typeof a=="object"&&typeof t=="object"?Object.keys(t).every(r=>ic(a[r],t[r])):!1}var hC=Object.prototype.hasOwnProperty;function Dy(a,t){if(a===t)return a;const r=jp(a)&&jp(t);if(!r&&!(c0(a)&&c0(t)))return t;const d=(r?a:Object.keys(a)).length,h=r?t:Object.keys(t),x=h.length,b=r?new Array(x):{};let C=0;for(let w=0;w<x;w++){const A=r?w:h[w],N=a[A],T=t[A];if(N===T){b[A]=N,(r?w<d:hC.call(a,A))&&C++;continue}if(N===null||T===null||typeof N!="object"||typeof T!="object"){b[A]=T;continue}const j=Dy(N,T);b[A]=j,j===N&&C++}return d===x&&C===d?a:b}function l0(a,t){if(!t||Object.keys(a).length!==Object.keys(t).length)return!1;for(const r in a)if(a[r]!==t[r])return!1;return!0}function jp(a){return Array.isArray(a)&&a.length===Object.keys(a).length}function c0(a){if(!Rp(a))return!1;const t=a.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Rp(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(a)!==Object.prototype)}function Rp(a){return Object.prototype.toString.call(a)==="[object Object]"}function fC(a){return new Promise(t=>{Wi.setTimeout(t,a)})}function u0(a,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(a,t):r.structuralSharing!==!1?Dy(a,t):t}function gC(a,t,r=0){const o=[...a,t];return r&&o.length>r?o.slice(1):o}function mC(a,t,r=0){const o=[t,...a];return r&&o.length>r?o.slice(0,-1):o}var q0=Symbol();function Ly(a,t){return!a.queryFn&&t?.initialPromise?()=>t.initialPromise:!a.queryFn||a.queryFn===q0?()=>Promise.reject(new Error(`Missing queryFn: '${a.queryHash}'`)):a.queryFn}function pC(a,t){return typeof a=="function"?a(...t):!!a}var xC=class extends gc{#e;#t;#n;constructor(){super(),this.#n=a=>{if(!Zi&&window.addEventListener){const t=()=>a();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(a){this.#n=a,this.#t?.(),this.#t=a(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(a){this.#e!==a&&(this.#e=a,this.onFocus())}onFocus(){const a=this.isFocused();this.listeners.forEach(t=>{t(a)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},V0=new xC;function d0(){let a,t;const r=new Promise((d,h)=>{a=d,t=h});r.status="pending",r.catch(()=>{});function o(d){Object.assign(r,d),delete r.resolve,delete r.reject}return r.resolve=d=>{o({status:"fulfilled",value:d}),a(d)},r.reject=d=>{o({status:"rejected",reason:d}),t(d)},r}var yC=uC;function wC(){let a=[],t=0,r=b=>{b()},o=b=>{b()},d=yC;const h=b=>{t?a.push(b):d(()=>{r(b)})},x=()=>{const b=a;a=[],b.length&&d(()=>{o(()=>{b.forEach(C=>{r(C)})})})};return{batch:b=>{let C;t++;try{C=b()}finally{t--,t||x()}return C},batchCalls:b=>(...C)=>{h(()=>{b(...C)})},schedule:h,setNotifyFunction:b=>{r=b},setBatchNotifyFunction:b=>{o=b},setScheduler:b=>{d=b}}}var Ss=wC(),bC=class extends gc{#e=!0;#t;#n;constructor(){super(),this.#n=a=>{if(!Zi&&window.addEventListener){const t=()=>a(!0),r=()=>a(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(a){this.#n=a,this.#t?.(),this.#t=a(this.setOnline.bind(this))}setOnline(a){this.#e!==a&&(this.#e=a,this.listeners.forEach(r=>{r(a)}))}isOnline(){return this.#e}},Ku=new bC;function vC(a){return Math.min(1e3*2**a,3e4)}function By(a){return(a??"online")==="online"?Ku.isOnline():!0}var h0=class extends Error{constructor(a){super("CancelledError"),this.revert=a?.revert,this.silent=a?.silent}};function Uy(a){let t=!1,r=0,o;const d=d0(),h=()=>d.status!=="pending",x=k=>{if(!h()){const D=new h0(k);T(D),a.onCancel?.(D)}},b=()=>{t=!0},C=()=>{t=!1},w=()=>V0.isFocused()&&(a.networkMode==="always"||Ku.isOnline())&&a.canRun(),A=()=>By(a.networkMode)&&a.canRun(),N=k=>{h()||(o?.(),d.resolve(k))},T=k=>{h()||(o?.(),d.reject(k))},j=()=>new Promise(k=>{o=D=>{(h()||w())&&k(D)},a.onPause?.()}).then(()=>{o=void 0,h()||a.onContinue?.()}),I=()=>{if(h())return;let k;const D=r===0?a.initialPromise:void 0;try{k=D??a.fn()}catch(H){k=Promise.reject(H)}Promise.resolve(k).then(N).catch(H=>{if(h())return;const U=a.retry??(Zi?0:3),P=a.retryDelay??vC,K=typeof P=="function"?P(r,H):P,Z=U===!0||typeof U=="number"&&r<U||typeof U=="function"&&U(r,H);if(t||!Z){T(H);return}r++,a.onFail?.(r,H),fC(K).then(()=>w()?void 0:j()).then(()=>{t?T(H):I()})})};return{promise:d,status:()=>d.status,cancel:x,continue:()=>(o?.(),d),cancelRetry:b,continueRetry:C,canStart:A,start:()=>(A()?I():j().then(I),d)}}var Py=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),o0(this.gcTime)&&(this.#e=Wi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(a){this.gcTime=Math.max(this.gcTime||0,a??(Zi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Wi.clearTimeout(this.#e),this.#e=void 0)}},CC=class extends Py{#e;#t;#n;#r;#s;#o;#i;constructor(a){super(),this.#i=!1,this.#o=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.#r=a.client,this.#n=this.#r.getQueryCache(),this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.#e=Ip(this.options),this.state=a.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(a){if(this.options={...this.#o,...a},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Ip(this.options);t.data!==void 0&&(this.setState(Op(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(a,t){const r=u0(this.state.data,a,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(a,t){this.#a({type:"setState",state:a,setStateOptions:t})}cancel(a){const t=this.#s?.promise;return this.#s?.cancel(a),t?t.then(Vs).catch(Vs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(a=>Sr(a.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===q0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(a=>mi(a.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(a=0){return this.state.data===void 0?!0:a==="static"?!1:this.state.isInvalidated?!0:!ky(this.state.dataUpdatedAt,a)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(t=>t!==a),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(a,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(a&&this.setOptions(a),!this.options.queryFn){const b=this.observers.find(C=>C.options.queryFn);b&&this.setOptions(b.options)}const r=new AbortController,o=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},d=()=>{const b=Ly(this.options,t),w=(()=>{const A={client:this.#r,queryKey:this.queryKey,meta:this.meta};return o(A),A})();return this.#i=!1,this.options.persister?this.options.persister(b,w,this):b(w)},x=(()=>{const b={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:d};return o(b),b})();this.options.behavior?.onFetch(x,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==x.fetchOptions?.meta)&&this.#a({type:"fetch",meta:x.fetchOptions?.meta}),this.#s=Uy({initialPromise:t?.initialPromise,fn:x.fetchFn,onCancel:b=>{b instanceof h0&&b.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(b,C)=>{this.#a({type:"failed",failureCount:b,error:C})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay,networkMode:x.options.networkMode,canRun:()=>!0});try{const b=await this.#s.start();if(b===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(b),this.#n.config.onSuccess?.(b,this),this.#n.config.onSettled?.(b,this.state.error,this),b}catch(b){if(b instanceof h0){if(b.silent)return this.#s.promise;if(b.revert){if(this.state.data===void 0)throw b;return this.state.data}}throw this.#a({type:"error",error:b}),this.#n.config.onError?.(b,this),this.#n.config.onSettled?.(this.state.data,b,this),b}finally{this.scheduleGc()}}#a(a){const t=r=>{switch(a.type){case"failed":return{...r,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...zy(r.data,this.options),fetchMeta:a.meta??null};case"success":const o={...r,...Op(a.data,a.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=a.manual?o:void 0,o;case"error":const d=a.error;return{...r,error:d,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...a.state}}};this.state=t(this.state),Ss.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:a})})}};function zy(a,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:By(t.networkMode)?"fetching":"paused",...a===void 0&&{error:null,status:"pending"}}}function Op(a,t){return{data:a,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ip(a){const t=typeof a.initialData=="function"?a.initialData():a.initialData,r=t!==void 0,o=r?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var SC=class extends gc{constructor(a,t){super(),this.options=t,this.#e=a,this.#a=null,this.#i=d0(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#i;#a;#m;#h;#f;#c;#u;#l;#g=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Mp(this.#t,this.options)?this.#d():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return f0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return f0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#v(),this.#t.removeObserver(this)}setOptions(a){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(a),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Sr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#C(),this.#t.setOptions(this.options),t._defaulted&&!l0(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&kp(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),o&&(this.#t!==r||Sr(this.options.enabled,this.#t)!==Sr(t.enabled,this.#t)||mi(this.options.staleTime,this.#t)!==mi(t.staleTime,this.#t))&&this.#p();const d=this.#x();o&&(this.#t!==r||Sr(this.options.enabled,this.#t)!==Sr(t.enabled,this.#t)||d!==this.#l)&&this.#y(d)}getOptimisticResult(a){const t=this.#e.getQueryCache().build(this.#e,a),r=this.createResult(t,a);return EC(this,r)&&(this.#r=r,this.#o=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#r}trackResult(a,t){return new Proxy(a,{get:(r,o)=>(this.trackProp(o),t?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,o))})}trackProp(a){this.#g.add(a)}getCurrentQuery(){return this.#t}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){const t=this.#e.defaultQueryOptions(a),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(a){return this.#d({...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(a){this.#C();let t=this.#t.fetch(this.options,a);return a?.throwOnError||(t=t.catch(Vs)),t}#p(){this.#b();const a=mi(this.options.staleTime,this.#t);if(Zi||this.#r.isStale||!o0(a))return;const r=ky(this.#r.dataUpdatedAt,a)+1;this.#c=Wi.setTimeout(()=>{this.#r.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(a){this.#v(),this.#l=a,!(Zi||Sr(this.options.enabled,this.#t)===!1||!o0(this.#l)||this.#l===0)&&(this.#u=Wi.setInterval(()=>{(this.options.refetchIntervalInBackground||V0.isFocused())&&this.#d()},this.#l))}#w(){this.#p(),this.#y(this.#x())}#b(){this.#c&&(Wi.clearTimeout(this.#c),this.#c=void 0)}#v(){this.#u&&(Wi.clearInterval(this.#u),this.#u=void 0)}createResult(a,t){const r=this.#t,o=this.options,d=this.#r,h=this.#s,x=this.#o,C=a!==r?a.state:this.#n,{state:w}=a;let A={...w},N=!1,T;if(t._optimisticResults){const $=this.hasListeners(),q=!$&&Mp(a,t),ue=$&&kp(a,r,t,o);(q||ue)&&(A={...A,...zy(w.data,a.options)}),t._optimisticResults==="isRestoring"&&(A.fetchStatus="idle")}let{error:j,errorUpdatedAt:I,status:k}=A;T=A.data;let D=!1;if(t.placeholderData!==void 0&&T===void 0&&k==="pending"){let $;d?.isPlaceholderData&&t.placeholderData===x?.placeholderData?($=d.data,D=!0):$=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,$!==void 0&&(k="success",T=u0(d?.data,$,t),N=!0)}if(t.select&&T!==void 0&&!D)if(d&&T===h?.data&&t.select===this.#m)T=this.#h;else try{this.#m=t.select,T=t.select(T),T=u0(d?.data,T,t),this.#h=T,this.#a=null}catch($){this.#a=$}this.#a&&(j=this.#a,T=this.#h,I=Date.now(),k="error");const H=A.fetchStatus==="fetching",U=k==="pending",P=k==="error",K=U&&H,Z=T!==void 0,V={status:k,fetchStatus:A.fetchStatus,isPending:U,isSuccess:k==="success",isError:P,isInitialLoading:K,isLoading:K,data:T,dataUpdatedAt:A.dataUpdatedAt,error:j,errorUpdatedAt:I,failureCount:A.fetchFailureCount,failureReason:A.fetchFailureReason,errorUpdateCount:A.errorUpdateCount,isFetched:A.dataUpdateCount>0||A.errorUpdateCount>0,isFetchedAfterMount:A.dataUpdateCount>C.dataUpdateCount||A.errorUpdateCount>C.errorUpdateCount,isFetching:H,isRefetching:H&&!U,isLoadingError:P&&!Z,isPaused:A.fetchStatus==="paused",isPlaceholderData:N,isRefetchError:P&&Z,isStale:G0(a,t),refetch:this.refetch,promise:this.#i,isEnabled:Sr(t.enabled,a)!==!1};if(this.options.experimental_prefetchInRender){const $=fe=>{V.status==="error"?fe.reject(V.error):V.data!==void 0&&fe.resolve(V.data)},q=()=>{const fe=this.#i=V.promise=d0();$(fe)},ue=this.#i;switch(ue.status){case"pending":a.queryHash===r.queryHash&&$(ue);break;case"fulfilled":(V.status==="error"||V.data!==ue.value)&&q();break;case"rejected":(V.status!=="error"||V.error!==ue.reason)&&q();break}}return V}updateResult(){const a=this.#r,t=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#f=this.#t),l0(t,a))return;this.#r=t;const r=()=>{if(!a)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!this.#g.size)return!0;const h=new Set(d??this.#g);return this.options.throwOnError&&h.add("error"),Object.keys(this.#r).some(x=>{const b=x;return this.#r[b]!==a[b]&&h.has(b)})};this.#S({listeners:r()})}#C(){const a=this.#e.getQueryCache().build(this.#e,this.options);if(a===this.#t)return;const t=this.#t;this.#t=a,this.#n=a.state,this.hasListeners()&&(t?.removeObserver(this),a.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#S(a){Ss.batch(()=>{a.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function _C(a,t){return Sr(t.enabled,a)!==!1&&a.state.data===void 0&&!(a.state.status==="error"&&t.retryOnMount===!1)}function Mp(a,t){return _C(a,t)||a.state.data!==void 0&&f0(a,t,t.refetchOnMount)}function f0(a,t,r){if(Sr(t.enabled,a)!==!1&&mi(t.staleTime,a)!=="static"){const o=typeof r=="function"?r(a):r;return o==="always"||o!==!1&&G0(a,t)}return!1}function kp(a,t,r,o){return(a!==t||Sr(o.enabled,a)===!1)&&(!r.suspense||a.state.status!=="error")&&G0(a,r)}function G0(a,t){return Sr(t.enabled,a)!==!1&&a.isStaleByTime(mi(t.staleTime,a))}function EC(a,t){return!l0(a.getCurrentResult(),t)}function Dp(a){return{onFetch:(t,r)=>{const o=t.options,d=t.fetchOptions?.meta?.fetchMore?.direction,h=t.state.data?.pages||[],x=t.state.data?.pageParams||[];let b={pages:[],pageParams:[]},C=0;const w=async()=>{let A=!1;const N=I=>{Object.defineProperty(I,"signal",{enumerable:!0,get:()=>(t.signal.aborted?A=!0:t.signal.addEventListener("abort",()=>{A=!0}),t.signal)})},T=Ly(t.options,t.fetchOptions),j=async(I,k,D)=>{if(A)return Promise.reject();if(k==null&&I.pages.length)return Promise.resolve(I);const U=(()=>{const Y={client:t.client,queryKey:t.queryKey,pageParam:k,direction:D?"backward":"forward",meta:t.options.meta};return N(Y),Y})(),P=await T(U),{maxPages:K}=t.options,Z=D?mC:gC;return{pages:Z(I.pages,P,K),pageParams:Z(I.pageParams,k,K)}};if(d&&h.length){const I=d==="backward",k=I?AC:Lp,D={pages:h,pageParams:x},H=k(o,D);b=await j(D,H,I)}else{const I=a??h.length;do{const k=C===0?x[0]??o.initialPageParam:Lp(o,b);if(C>0&&k==null)break;b=await j(b,k),C++}while(C<I)}return b};t.options.persister?t.fetchFn=()=>t.options.persister?.(w,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=w}}}function Lp(a,{pages:t,pageParams:r}){const o=t.length-1;return t.length>0?a.getNextPageParam(t[o],t,r[o],r):void 0}function AC(a,{pages:t,pageParams:r}){return t.length>0?a.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var NC=class extends Py{#e;#t;#n;#r;constructor(a){super(),this.#e=a.client,this.mutationId=a.mutationId,this.#n=a.mutationCache,this.#t=[],this.state=a.state||TC(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){this.#t.includes(a)||(this.#t.push(a),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){this.#t=this.#t.filter(t=>t!==a),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(a){const t=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Uy({fn:()=>this.options.mutationFn?this.options.mutationFn(a,r):Promise.reject(new Error("No mutationFn found")),onFail:(h,x)=>{this.#s({type:"failed",failureCount:h,error:x})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",d=!this.#r.canStart();try{if(o)t();else{this.#s({type:"pending",variables:a,isPaused:d}),await this.#n.config.onMutate?.(a,this,r);const x=await this.options.onMutate?.(a,r);x!==this.state.context&&this.#s({type:"pending",context:x,variables:a,isPaused:d})}const h=await this.#r.start();return await this.#n.config.onSuccess?.(h,a,this.state.context,this,r),await this.options.onSuccess?.(h,a,this.state.context,r),await this.#n.config.onSettled?.(h,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(h,null,a,this.state.context,r),this.#s({type:"success",data:h}),h}catch(h){try{throw await this.#n.config.onError?.(h,a,this.state.context,this,r),await this.options.onError?.(h,a,this.state.context,r),await this.#n.config.onSettled?.(void 0,h,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,h,a,this.state.context,r),h}finally{this.#s({type:"error",error:h})}}finally{this.#n.runNext(this)}}#s(a){const t=r=>{switch(a.type){case"failed":return{...r,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...r,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:a.error,failureCount:r.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ss.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(a)}),this.#n.notify({mutation:this,type:"updated",action:a})})}};function TC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jC=class extends gc{constructor(a={}){super(),this.config=a,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(a,t,r){const o=new NC({client:a,mutationCache:this,mutationId:++this.#n,options:a.defaultMutationOptions(t),state:r});return this.add(o),o}add(a){this.#e.add(a);const t=Mu(a);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(a):this.#t.set(t,[a])}this.notify({type:"added",mutation:a})}remove(a){if(this.#e.delete(a)){const t=Mu(a);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const o=r.indexOf(a);o!==-1&&r.splice(o,1)}else r[0]===a&&this.#t.delete(t)}}this.notify({type:"removed",mutation:a})}canRun(a){const t=Mu(a);if(typeof t=="string"){const o=this.#t.get(t)?.find(d=>d.state.status==="pending");return!o||o===a}else return!0}runNext(a){const t=Mu(a);return typeof t=="string"?this.#t.get(t)?.find(o=>o!==a&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ss.batch(()=>{this.#e.forEach(a=>{this.notify({type:"removed",mutation:a})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(a){const t={exact:!0,...a};return this.getAll().find(r=>Tp(t,r))}findAll(a={}){return this.getAll().filter(t=>Tp(a,t))}notify(a){Ss.batch(()=>{this.listeners.forEach(t=>{t(a)})})}resumePausedMutations(){const a=this.getAll().filter(t=>t.state.isPaused);return Ss.batch(()=>Promise.all(a.map(t=>t.continue().catch(Vs))))}};function Mu(a){return a.options.scope?.id}var RC=class extends gc{constructor(a={}){super(),this.config=a,this.#e=new Map}#e;build(a,t,r){const o=t.queryKey,d=t.queryHash??H0(o,t);let h=this.get(d);return h||(h=new CC({client:a,queryKey:o,queryHash:d,options:a.defaultQueryOptions(t),state:r,defaultOptions:a.getQueryDefaults(o)}),this.add(h)),h}add(a){this.#e.has(a.queryHash)||(this.#e.set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){const t=this.#e.get(a.queryHash);t&&(a.destroy(),t===a&&this.#e.delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){Ss.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return this.#e.get(a)}getAll(){return[...this.#e.values()]}find(a){const t={exact:!0,...a};return this.getAll().find(r=>Np(t,r))}findAll(a={}){const t=this.getAll();return Object.keys(a).length>0?t.filter(r=>Np(a,r)):t}notify(a){Ss.batch(()=>{this.listeners.forEach(t=>{t(a)})})}onFocus(){Ss.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){Ss.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}},OC=class{#e;#t;#n;#r;#s;#o;#i;#a;constructor(a={}){this.#e=a.queryCache||new RC,this.#t=a.mutationCache||new jC,this.#n=a.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=V0.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ku.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(a){return this.#e.findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return this.#t.findAll({...a,status:"pending"}).length}getQueryData(a){const t=this.defaultQueryOptions({queryKey:a});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(a){const t=this.defaultQueryOptions(a),r=this.#e.build(this,t),o=r.state.data;return o===void 0?this.fetchQuery(a):(a.revalidateIfStale&&r.isStaleByTime(mi(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(o))}getQueriesData(a){return this.#e.findAll(a).map(({queryKey:t,state:r})=>{const o=r.data;return[t,o]})}setQueryData(a,t,r){const o=this.defaultQueryOptions({queryKey:a}),h=this.#e.get(o.queryHash)?.state.data,x=dC(t,h);if(x!==void 0)return this.#e.build(this,o).setData(x,{...r,manual:!0})}setQueriesData(a,t,r){return Ss.batch(()=>this.#e.findAll(a).map(({queryKey:o})=>[o,this.setQueryData(o,t,r)]))}getQueryState(a){const t=this.defaultQueryOptions({queryKey:a});return this.#e.get(t.queryHash)?.state}removeQueries(a){const t=this.#e;Ss.batch(()=>{t.findAll(a).forEach(r=>{t.remove(r)})})}resetQueries(a,t){const r=this.#e;return Ss.batch(()=>(r.findAll(a).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...a},t)))}cancelQueries(a,t={}){const r={revert:!0,...t},o=Ss.batch(()=>this.#e.findAll(a).map(d=>d.cancel(r)));return Promise.all(o).then(Vs).catch(Vs)}invalidateQueries(a,t={}){return Ss.batch(()=>(this.#e.findAll(a).forEach(r=>{r.invalidate()}),a?.refetchType==="none"?Promise.resolve():this.refetchQueries({...a,type:a?.refetchType??a?.type??"active"},t)))}refetchQueries(a,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},o=Ss.batch(()=>this.#e.findAll(a).filter(d=>!d.isDisabled()&&!d.isStatic()).map(d=>{let h=d.fetch(void 0,r);return r.throwOnError||(h=h.catch(Vs)),d.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(o).then(Vs)}fetchQuery(a){const t=this.defaultQueryOptions(a);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(mi(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(Vs).catch(Vs)}fetchInfiniteQuery(a){return a.behavior=Dp(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(Vs).catch(Vs)}ensureInfiniteQueryData(a){return a.behavior=Dp(a.pages),this.ensureQueryData(a)}resumePausedMutations(){return Ku.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(a){this.#n=a}setQueryDefaults(a,t){this.#r.set(ac(a),{queryKey:a,defaultOptions:t})}getQueryDefaults(a){const t=[...this.#r.values()],r={};return t.forEach(o=>{ic(a,o.queryKey)&&Object.assign(r,o.defaultOptions)}),r}setMutationDefaults(a,t){this.#s.set(ac(a),{mutationKey:a,defaultOptions:t})}getMutationDefaults(a){const t=[...this.#s.values()],r={};return t.forEach(o=>{ic(a,o.mutationKey)&&Object.assign(r,o.defaultOptions)}),r}defaultQueryOptions(a){if(a._defaulted)return a;const t={...this.#n.queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return t.queryHash||(t.queryHash=H0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===q0&&(t.enabled=!1),t}defaultMutationOptions(a){return a?._defaulted?a:{...this.#n.mutations,...a?.mutationKey&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Fy=M.createContext(void 0),IC=a=>{const t=M.useContext(Fy);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},MC=({client:a,children:t})=>(M.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),l.jsx(Fy.Provider,{value:a,children:t})),Hy=M.createContext(!1),kC=()=>M.useContext(Hy);Hy.Provider;function DC(){let a=!1;return{clearReset:()=>{a=!1},reset:()=>{a=!0},isReset:()=>a}}var LC=M.createContext(DC()),BC=()=>M.useContext(LC),UC=(a,t)=>{(a.suspense||a.throwOnError||a.experimental_prefetchInRender)&&(t.isReset()||(a.retryOnMount=!1))},PC=a=>{M.useEffect(()=>{a.clearReset()},[a])},zC=({result:a,errorResetBoundary:t,throwOnError:r,query:o,suspense:d})=>a.isError&&!t.isReset()&&!a.isFetching&&o&&(d&&a.data===void 0||pC(r,[a.error,o])),FC=a=>{if(a.suspense){const r=d=>d==="static"?d:Math.max(d??1e3,1e3),o=a.staleTime;a.staleTime=typeof o=="function"?(...d)=>r(o(...d)):r(o),typeof a.gcTime=="number"&&(a.gcTime=Math.max(a.gcTime,1e3))}},HC=(a,t)=>a.isLoading&&a.isFetching&&!t,qC=(a,t)=>a?.suspense&&t.isPending,Bp=(a,t,r)=>t.fetchOptimistic(a).catch(()=>{r.clearReset()});function VC(a,t,r){const o=kC(),d=BC(),h=IC(),x=h.defaultQueryOptions(a);h.getDefaultOptions().queries?._experimental_beforeQuery?.(x),x._optimisticResults=o?"isRestoring":"optimistic",FC(x),UC(x,d),PC(d);const b=!h.getQueryCache().get(x.queryHash),[C]=M.useState(()=>new t(h,x)),w=C.getOptimisticResult(x),A=!o&&a.subscribed!==!1;if(M.useSyncExternalStore(M.useCallback(N=>{const T=A?C.subscribe(Ss.batchCalls(N)):Vs;return C.updateResult(),T},[C,A]),()=>C.getCurrentResult(),()=>C.getCurrentResult()),M.useEffect(()=>{C.setOptions(x)},[x,C]),qC(x,w))throw Bp(x,C,d);if(zC({result:w,errorResetBoundary:d,throwOnError:x.throwOnError,query:h.getQueryCache().get(x.queryHash),suspense:x.suspense}))throw w.error;return h.getDefaultOptions().queries?._experimental_afterQuery?.(x,w),x.experimental_prefetchInRender&&!Zi&&HC(w,o)&&(b?Bp(x,C,d):h.getQueryCache().get(x.queryHash)?.promise)?.catch(Vs).finally(()=>{C.updateResult()}),x.notifyOnChangeProps?w:C.trackResult(w)}function GC(a,t){return VC(a,SC)}var g0=function(a,t){return g0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(r[d]=o[d])},g0(a,t)};function qy(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");g0(a,t);function r(){this.constructor=a}a.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zu=function(){return Zu=Object.assign||function(t){for(var r,o=1,d=arguments.length;o<d;o++){r=arguments[o];for(var h in r)Object.prototype.hasOwnProperty.call(r,h)&&(t[h]=r[h])}return t},Zu.apply(this,arguments)};function nl(a,t){var r={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&t.indexOf(o)<0&&(r[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(a);d<o.length;d++)t.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(a,o[d])&&(r[o[d]]=a[o[d]]);return r}function Vy(a,t,r,o){var d=arguments.length,h=d<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(a,t,r,o);else for(var b=a.length-1;b>=0;b--)(x=a[b])&&(h=(d<3?x(h):d>3?x(t,r,h):x(t,r))||h);return d>3&&h&&Object.defineProperty(t,r,h),h}function Gy(a,t){return function(r,o){t(r,o,a)}}function Yy(a,t,r,o,d,h){function x(H){if(H!==void 0&&typeof H!="function")throw new TypeError("Function expected");return H}for(var b=o.kind,C=b==="getter"?"get":b==="setter"?"set":"value",w=!t&&a?o.static?a:a.prototype:null,A=t||(w?Object.getOwnPropertyDescriptor(w,o.name):{}),N,T=!1,j=r.length-1;j>=0;j--){var I={};for(var k in o)I[k]=k==="access"?{}:o[k];for(var k in o.access)I.access[k]=o.access[k];I.addInitializer=function(H){if(T)throw new TypeError("Cannot add initializers after decoration has completed");h.push(x(H||null))};var D=(0,r[j])(b==="accessor"?{get:A.get,set:A.set}:A[C],I);if(b==="accessor"){if(D===void 0)continue;if(D===null||typeof D!="object")throw new TypeError("Object expected");(N=x(D.get))&&(A.get=N),(N=x(D.set))&&(A.set=N),(N=x(D.init))&&d.unshift(N)}else(N=x(D))&&(b==="field"?d.unshift(N):A[C]=N)}w&&Object.defineProperty(w,o.name,A),T=!0}function Xy(a,t,r){for(var o=arguments.length>2,d=0;d<t.length;d++)r=o?t[d].call(a,r):t[d].call(a);return o?r:void 0}function Qy(a){return typeof a=="symbol"?a:"".concat(a)}function Wy(a,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Ky(a,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,t)}function tt(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})}function Zy(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return x.next=b(0),x.throw=b(1),x.return=b(2),typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var ud=Object.create?(function(a,t,r,o){o===void 0&&(o=r);var d=Object.getOwnPropertyDescriptor(t,r);(!d||("get"in d?!t.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(a,o,d)}):(function(a,t,r,o){o===void 0&&(o=r),a[o]=t[r]});function $y(a,t){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ud(t,a,r)}function $u(a){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&a[t],o=0;if(r)return r.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y0(a,t){var r=typeof Symbol=="function"&&a[Symbol.iterator];if(!r)return a;var o=r.call(a),d,h=[],x;try{for(;(t===void 0||t-- >0)&&!(d=o.next()).done;)h.push(d.value)}catch(b){x={error:b}}finally{try{d&&!d.done&&(r=o.return)&&r.call(o)}finally{if(x)throw x.error}}return h}function Jy(){for(var a=[],t=0;t<arguments.length;t++)a=a.concat(Y0(arguments[t]));return a}function e2(){for(var a=0,t=0,r=arguments.length;t<r;t++)a+=arguments[t].length;for(var o=Array(a),d=0,t=0;t<r;t++)for(var h=arguments[t],x=0,b=h.length;x<b;x++,d++)o[d]=h[x];return o}function t2(a,t,r){if(r||arguments.length===2)for(var o=0,d=t.length,h;o<d;o++)(h||!(o in t))&&(h||(h=Array.prototype.slice.call(t,0,o)),h[o]=t[o]);return a.concat(h||Array.prototype.slice.call(t))}function $o(a){return this instanceof $o?(this.v=a,this):new $o(a)}function n2(a,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(a,t||[]),d,h=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),b("next"),b("throw"),b("return",x),d[Symbol.asyncIterator]=function(){return this},d;function x(j){return function(I){return Promise.resolve(I).then(j,N)}}function b(j,I){o[j]&&(d[j]=function(k){return new Promise(function(D,H){h.push([j,k,D,H])>1||C(j,k)})},I&&(d[j]=I(d[j])))}function C(j,I){try{w(o[j](I))}catch(k){T(h[0][3],k)}}function w(j){j.value instanceof $o?Promise.resolve(j.value.v).then(A,N):T(h[0][2],j)}function A(j){C("next",j)}function N(j){C("throw",j)}function T(j,I){j(I),h.shift(),h.length&&C(h[0][0],h[0][1])}}function s2(a){var t,r;return t={},o("next"),o("throw",function(d){throw d}),o("return"),t[Symbol.iterator]=function(){return this},t;function o(d,h){t[d]=a[d]?function(x){return(r=!r)?{value:$o(a[d](x)),done:!1}:h?h(x):x}:h}}function r2(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=a[Symbol.asyncIterator],r;return t?t.call(a):(a=typeof $u=="function"?$u(a):a[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(h){r[h]=a[h]&&function(x){return new Promise(function(b,C){x=a[h](x),d(b,C,x.done,x.value)})}}function d(h,x,b,C){Promise.resolve(C).then(function(w){h({value:w,done:b})},x)}}function a2(a,t){return Object.defineProperty?Object.defineProperty(a,"raw",{value:t}):a.raw=t,a}var YC=Object.create?(function(a,t){Object.defineProperty(a,"default",{enumerable:!0,value:t})}):function(a,t){a.default=t},m0=function(a){return m0=Object.getOwnPropertyNames||function(t){var r=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[r.length]=o);return r},m0(a)};function i2(a){if(a&&a.__esModule)return a;var t={};if(a!=null)for(var r=m0(a),o=0;o<r.length;o++)r[o]!=="default"&&ud(t,a,r[o]);return YC(t,a),t}function o2(a){return a&&a.__esModule?a:{default:a}}function l2(a,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?a!==t||!o:!t.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(a):o?o.value:t.get(a)}function c2(a,t,r,o,d){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?a!==t||!d:!t.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?d.call(a,r):d?d.value=r:t.set(a,r),r}function u2(a,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof a=="function"?t===a:a.has(t)}function d2(a,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var o,d;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=t[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=t[Symbol.dispose],r&&(d=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");d&&(o=function(){try{d.call(this)}catch(h){return Promise.reject(h)}}),a.stack.push({value:t,dispose:o,async:r})}else r&&a.stack.push({async:!0});return t}var XC=typeof SuppressedError=="function"?SuppressedError:function(a,t,r){var o=new Error(r);return o.name="SuppressedError",o.error=a,o.suppressed=t,o};function h2(a){function t(h){a.error=a.hasError?new XC(h,a.error,"An error was suppressed during disposal."):h,a.hasError=!0}var r,o=0;function d(){for(;r=a.stack.pop();)try{if(!r.async&&o===1)return o=0,a.stack.push(r),Promise.resolve().then(d);if(r.dispose){var h=r.dispose.call(r.value);if(r.async)return o|=2,Promise.resolve(h).then(d,function(x){return t(x),d()})}else o|=1}catch(x){t(x)}if(o===1)return a.hasError?Promise.reject(a.error):Promise.resolve();if(a.hasError)throw a.error}return d()}function f2(a,t){return typeof a=="string"&&/^\.\.?\//.test(a)?a.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,o,d,h,x){return o?t?".jsx":".js":d&&(!h||!x)?r:d+h+"."+x.toLowerCase()+"js"}):a}const QC={__extends:qy,__assign:Zu,__rest:nl,__decorate:Vy,__param:Gy,__esDecorate:Yy,__runInitializers:Xy,__propKey:Qy,__setFunctionName:Wy,__metadata:Ky,__awaiter:tt,__generator:Zy,__createBinding:ud,__exportStar:$y,__values:$u,__read:Y0,__spread:Jy,__spreadArrays:e2,__spreadArray:t2,__await:$o,__asyncGenerator:n2,__asyncDelegator:s2,__asyncValues:r2,__makeTemplateObject:a2,__importStar:i2,__importDefault:o2,__classPrivateFieldGet:l2,__classPrivateFieldSet:c2,__classPrivateFieldIn:u2,__addDisposableResource:d2,__disposeResources:h2,__rewriteRelativeImportExtension:f2},WC=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:d2,get __assign(){return Zu},__asyncDelegator:s2,__asyncGenerator:n2,__asyncValues:r2,__await:$o,__awaiter:tt,__classPrivateFieldGet:l2,__classPrivateFieldIn:u2,__classPrivateFieldSet:c2,__createBinding:ud,__decorate:Vy,__disposeResources:h2,__esDecorate:Yy,__exportStar:$y,__extends:qy,__generator:Zy,__importDefault:o2,__importStar:i2,__makeTemplateObject:a2,__metadata:Ky,__param:Gy,__propKey:Qy,__read:Y0,__rest:nl,__rewriteRelativeImportExtension:f2,__runInitializers:Xy,__setFunctionName:Wy,__spread:Jy,__spreadArray:t2,__spreadArrays:e2,__values:$u,default:QC},Symbol.toStringTag,{value:"Module"})),KC=a=>a?(...t)=>a(...t):(...t)=>fetch(...t);class X0 extends Error{constructor(t,r="FunctionsError",o){super(t),this.name=r,this.context=o}}class ZC extends X0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Up extends X0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Pp extends X0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var p0;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(p0||(p0={}));class $C{constructor(t,{headers:r={},customFetch:o,region:d=p0.Any}={}){this.url=t,this.headers=r,this.region=d,this.fetch=KC(o)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return tt(this,arguments,void 0,function*(r,o={}){var d;let h,x;try{const{headers:b,method:C,body:w,signal:A,timeout:N}=o;let T={},{region:j}=o;j||(j=this.region);const I=new URL(`${this.url}/${r}`);j&&j!=="any"&&(T["x-region"]=j,I.searchParams.set("forceFunctionRegion",j));let k;w&&(b&&!Object.prototype.hasOwnProperty.call(b,"Content-Type")||!b)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",k=w):typeof w=="string"?(T["Content-Type"]="text/plain",k=w):typeof FormData<"u"&&w instanceof FormData?k=w:(T["Content-Type"]="application/json",k=JSON.stringify(w)):k=w;let D=A;N&&(x=new AbortController,h=setTimeout(()=>x.abort(),N),A?(D=x.signal,A.addEventListener("abort",()=>x.abort())):D=x.signal);const H=yield this.fetch(I.toString(),{method:C||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),b),body:k,signal:D}).catch(Z=>{throw new ZC(Z)}),U=H.headers.get("x-relay-error");if(U&&U==="true")throw new Up(H);if(!H.ok)throw new Pp(H);let P=((d=H.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),K;return P==="application/json"?K=yield H.json():P==="application/octet-stream"||P==="application/pdf"?K=yield H.blob():P==="text/event-stream"?K=H:P==="multipart/form-data"?K=yield H.formData():K=yield H.text(),{data:K,error:null,response:H}}catch(b){return{data:null,error:b,response:b instanceof Pp||b instanceof Up?b.context:void 0}}finally{h&&clearTimeout(h)}})}}var As={};const sl=Tb(WC);var ku={},Du={},Lu={},Bu={},Uu={},Pu={},zp;function g2(){if(zp)return Pu;zp=1,Object.defineProperty(Pu,"__esModule",{value:!0});class a extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Pu.default=a,Pu}var Fp;function m2(){if(Fp)return Uu;Fp=1,Object.defineProperty(Uu,"__esModule",{value:!0});const t=sl.__importDefault(g2());class r{constructor(d){var h,x;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(h=d.shouldThrowOnError)!==null&&h!==void 0?h:!1,this.signal=d.signal,this.isMaybeSingle=(x=d.isMaybeSingle)!==null&&x!==void 0?x:!1,d.fetch?this.fetch=d.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,h){return this.headers=new Headers(this.headers),this.headers.set(d,h),this}then(d,h){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const x=this.fetch;let b=x(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async C=>{var w,A,N,T;let j=null,I=null,k=null,D=C.status,H=C.statusText;if(C.ok){if(this.method!=="HEAD"){const Z=await C.text();Z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?I=Z:I=JSON.parse(Z))}const P=(A=this.headers.get("Prefer"))===null||A===void 0?void 0:A.match(/count=(exact|planned|estimated)/),K=(N=C.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");P&&K&&K.length>1&&(k=parseInt(K[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(I)&&(I.length>1?(j={code:"PGRST116",details:`Results contain ${I.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},I=null,k=null,D=406,H="Not Acceptable"):I.length===1?I=I[0]:I=null)}else{const P=await C.text();try{j=JSON.parse(P),Array.isArray(j)&&C.status===404&&(I=[],j=null,D=200,H="OK")}catch{C.status===404&&P===""?(D=204,H="No Content"):j={message:P}}if(j&&this.isMaybeSingle&&(!((T=j?.details)===null||T===void 0)&&T.includes("0 rows"))&&(j=null,D=200,H="OK"),j&&this.shouldThrowOnError)throw new t.default(j)}return{error:j,data:I,count:k,status:D,statusText:H}});return this.shouldThrowOnError||(b=b.catch(C=>{var w,A,N,T,j,I;let k="";const D=C?.cause;if(D){const H=(w=D?.message)!==null&&w!==void 0?w:"",U=(A=D?.code)!==null&&A!==void 0?A:"";k=`${(N=C?.name)!==null&&N!==void 0?N:"FetchError"}: ${C?.message}`,k+=`

Caused by: ${(T=D?.name)!==null&&T!==void 0?T:"Error"}: ${H}`,U&&(k+=` (${U})`),D?.stack&&(k+=`
${D.stack}`)}else k=(j=C?.stack)!==null&&j!==void 0?j:"";return{error:{message:`${(I=C?.name)!==null&&I!==void 0?I:"FetchError"}: ${C?.message}`,details:k,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),b.then(d,h)}returns(){return this}overrideTypes(){return this}}return Uu.default=r,Uu}var Hp;function p2(){if(Hp)return Bu;Hp=1,Object.defineProperty(Bu,"__esModule",{value:!0});const t=sl.__importDefault(m2());class r extends t.default{select(d){let h=!1;const x=(d??"*").split("").map(b=>/\s/.test(b)&&!h?"":(b==='"'&&(h=!h),b)).join("");return this.url.searchParams.set("select",x),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:h=!0,nullsFirst:x,foreignTable:b,referencedTable:C=b}={}){const w=C?`${C}.order`:"order",A=this.url.searchParams.get(w);return this.url.searchParams.set(w,`${A?`${A},`:""}${d}.${h?"asc":"desc"}${x===void 0?"":x?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:h,referencedTable:x=h}={}){const b=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(b,`${d}`),this}range(d,h,{foreignTable:x,referencedTable:b=x}={}){const C=typeof b>"u"?"offset":`${b}.offset`,w=typeof b>"u"?"limit":`${b}.limit`;return this.url.searchParams.set(C,`${d}`),this.url.searchParams.set(w,`${h-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:h=!1,settings:x=!1,buffers:b=!1,wal:C=!1,format:w="text"}={}){var A;const N=[d?"analyze":null,h?"verbose":null,x?"settings":null,b?"buffers":null,C?"wal":null].filter(Boolean).join("|"),T=(A=this.headers.get("Accept"))!==null&&A!==void 0?A:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${w}; for="${T}"; options=${N};`),w==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return Bu.default=r,Bu}var qp;function Q0(){if(qp)return Lu;qp=1,Object.defineProperty(Lu,"__esModule",{value:!0});const t=sl.__importDefault(p2()),r=new RegExp("[,()]");class o extends t.default{eq(h,x){return this.url.searchParams.append(h,`eq.${x}`),this}neq(h,x){return this.url.searchParams.append(h,`neq.${x}`),this}gt(h,x){return this.url.searchParams.append(h,`gt.${x}`),this}gte(h,x){return this.url.searchParams.append(h,`gte.${x}`),this}lt(h,x){return this.url.searchParams.append(h,`lt.${x}`),this}lte(h,x){return this.url.searchParams.append(h,`lte.${x}`),this}like(h,x){return this.url.searchParams.append(h,`like.${x}`),this}likeAllOf(h,x){return this.url.searchParams.append(h,`like(all).{${x.join(",")}}`),this}likeAnyOf(h,x){return this.url.searchParams.append(h,`like(any).{${x.join(",")}}`),this}ilike(h,x){return this.url.searchParams.append(h,`ilike.${x}`),this}ilikeAllOf(h,x){return this.url.searchParams.append(h,`ilike(all).{${x.join(",")}}`),this}ilikeAnyOf(h,x){return this.url.searchParams.append(h,`ilike(any).{${x.join(",")}}`),this}is(h,x){return this.url.searchParams.append(h,`is.${x}`),this}in(h,x){const b=Array.from(new Set(x)).map(C=>typeof C=="string"&&r.test(C)?`"${C}"`:`${C}`).join(",");return this.url.searchParams.append(h,`in.(${b})`),this}contains(h,x){return typeof x=="string"?this.url.searchParams.append(h,`cs.${x}`):Array.isArray(x)?this.url.searchParams.append(h,`cs.{${x.join(",")}}`):this.url.searchParams.append(h,`cs.${JSON.stringify(x)}`),this}containedBy(h,x){return typeof x=="string"?this.url.searchParams.append(h,`cd.${x}`):Array.isArray(x)?this.url.searchParams.append(h,`cd.{${x.join(",")}}`):this.url.searchParams.append(h,`cd.${JSON.stringify(x)}`),this}rangeGt(h,x){return this.url.searchParams.append(h,`sr.${x}`),this}rangeGte(h,x){return this.url.searchParams.append(h,`nxl.${x}`),this}rangeLt(h,x){return this.url.searchParams.append(h,`sl.${x}`),this}rangeLte(h,x){return this.url.searchParams.append(h,`nxr.${x}`),this}rangeAdjacent(h,x){return this.url.searchParams.append(h,`adj.${x}`),this}overlaps(h,x){return typeof x=="string"?this.url.searchParams.append(h,`ov.${x}`):this.url.searchParams.append(h,`ov.{${x.join(",")}}`),this}textSearch(h,x,{config:b,type:C}={}){let w="";C==="plain"?w="pl":C==="phrase"?w="ph":C==="websearch"&&(w="w");const A=b===void 0?"":`(${b})`;return this.url.searchParams.append(h,`${w}fts${A}.${x}`),this}match(h){return Object.entries(h).forEach(([x,b])=>{this.url.searchParams.append(x,`eq.${b}`)}),this}not(h,x,b){return this.url.searchParams.append(h,`not.${x}.${b}`),this}or(h,{foreignTable:x,referencedTable:b=x}={}){const C=b?`${b}.or`:"or";return this.url.searchParams.append(C,`(${h})`),this}filter(h,x,b){return this.url.searchParams.append(h,`${x}.${b}`),this}}return Lu.default=o,Lu}var Vp;function x2(){if(Vp)return Du;Vp=1,Object.defineProperty(Du,"__esModule",{value:!0});const t=sl.__importDefault(Q0());class r{constructor(d,{headers:h={},schema:x,fetch:b}){this.url=d,this.headers=new Headers(h),this.schema=x,this.fetch=b}select(d,h){const{head:x=!1,count:b}=h??{},C=x?"HEAD":"GET";let w=!1;const A=(d??"*").split("").map(N=>/\s/.test(N)&&!w?"":(N==='"'&&(w=!w),N)).join("");return this.url.searchParams.set("select",A),b&&this.headers.append("Prefer",`count=${b}`),new t.default({method:C,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:h,defaultToNull:x=!0}={}){var b;const C="POST";if(h&&this.headers.append("Prefer",`count=${h}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const w=d.reduce((A,N)=>A.concat(Object.keys(N)),[]);if(w.length>0){const A=[...new Set(w)].map(N=>`"${N}"`);this.url.searchParams.set("columns",A.join(","))}}return new t.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}upsert(d,{onConflict:h,ignoreDuplicates:x=!1,count:b,defaultToNull:C=!0}={}){var w;const A="POST";if(this.headers.append("Prefer",`resolution=${x?"ignore":"merge"}-duplicates`),h!==void 0&&this.url.searchParams.set("on_conflict",h),b&&this.headers.append("Prefer",`count=${b}`),C||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const N=d.reduce((T,j)=>T.concat(Object.keys(j)),[]);if(N.length>0){const T=[...new Set(N)].map(j=>`"${j}"`);this.url.searchParams.set("columns",T.join(","))}}return new t.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}update(d,{count:h}={}){var x;const b="PATCH";return h&&this.headers.append("Prefer",`count=${h}`),new t.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}delete({count:d}={}){var h;const x="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Du.default=r,Du}var Gp;function JC(){if(Gp)return ku;Gp=1,Object.defineProperty(ku,"__esModule",{value:!0});const a=sl,t=a.__importDefault(x2()),r=a.__importDefault(Q0());class o{constructor(h,{headers:x={},schema:b,fetch:C}={}){this.url=h,this.headers=new Headers(x),this.schemaName=b,this.fetch=C}from(h){const x=new URL(`${this.url}/${h}`);return new t.default(x,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(h){return new o(this.url,{headers:this.headers,schema:h,fetch:this.fetch})}rpc(h,x={},{head:b=!1,get:C=!1,count:w}={}){var A;let N;const T=new URL(`${this.url}/rpc/${h}`);let j;b||C?(N=b?"HEAD":"GET",Object.entries(x).filter(([k,D])=>D!==void 0).map(([k,D])=>[k,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([k,D])=>{T.searchParams.append(k,D)})):(N="POST",j=x);const I=new Headers(this.headers);return w&&I.set("Prefer",`count=${w}`),new r.default({method:N,url:T,headers:I,schema:this.schemaName,body:j,fetch:(A=this.fetch)!==null&&A!==void 0?A:fetch})}}return ku.default=o,ku}var Yp;function eS(){if(Yp)return As;Yp=1,Object.defineProperty(As,"__esModule",{value:!0}),As.PostgrestError=As.PostgrestBuilder=As.PostgrestTransformBuilder=As.PostgrestFilterBuilder=As.PostgrestQueryBuilder=As.PostgrestClient=void 0;const a=sl,t=a.__importDefault(JC());As.PostgrestClient=t.default;const r=a.__importDefault(x2());As.PostgrestQueryBuilder=r.default;const o=a.__importDefault(Q0());As.PostgrestFilterBuilder=o.default;const d=a.__importDefault(p2());As.PostgrestTransformBuilder=d.default;const h=a.__importDefault(m2());As.PostgrestBuilder=h.default;const x=a.__importDefault(g2());return As.PostgrestError=x.default,As.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:h.default,PostgrestError:x.default},As}var y2=eS();const w2=id(y2),tS=xy({__proto__:null,default:w2},[y2]),{PostgrestClient:nS,PostgrestQueryBuilder:j4,PostgrestFilterBuilder:R4,PostgrestTransformBuilder:O4,PostgrestBuilder:I4,PostgrestError:M4}=w2||tS;class sS{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const o=r.node,d=parseInt(o.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const o=this.getWebSocketConstructor();return new o(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const rS="2.83.0",aS=`realtime-js/${rS}`,b2="1.0.0",iS="2.0.0",Xp=b2,x0=1e4,oS=1e3,lS=100;var Gi;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Gi||(Gi={}));var cs;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(cs||(cs={}));var _r;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(_r||(_r={}));var y0;(function(a){a.websocket="websocket"})(y0||(y0={}));var Yi;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Yi||(Yi={}));class cS{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let o=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(o))}_binaryEncodePush(t){var r,o;const{event:d,topic:h,payload:x}=t,b=(r=t.ref)!==null&&r!==void 0?r:"",C=(o=t.join_ref)!==null&&o!==void 0?o:"",w=this.META_LENGTH+C.length+b.length+h.length+d.length,A=new ArrayBuffer(this.HEADER_LENGTH+w);let N=new DataView(A),T=0;N.setUint8(T++,this.KINDS.push),N.setUint8(T++,C.length),N.setUint8(T++,b.length),N.setUint8(T++,h.length),N.setUint8(T++,d.length),Array.from(C,I=>N.setUint8(T++,I.charCodeAt(0))),Array.from(b,I=>N.setUint8(T++,I.charCodeAt(0))),Array.from(h,I=>N.setUint8(T++,I.charCodeAt(0))),Array.from(d,I=>N.setUint8(T++,I.charCodeAt(0)));var j=new Uint8Array(A.byteLength+x.byteLength);return j.set(new Uint8Array(A),0),j.set(new Uint8Array(x),A.byteLength),j.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,o,d,h;const x=t.topic,b=(r=t.ref)!==null&&r!==void 0?r:"",C=(o=t.join_ref)!==null&&o!==void 0?o:"",w=t.payload.event,A=(h=(d=t.payload)===null||d===void 0?void 0:d.payload)!==null&&h!==void 0?h:new ArrayBuffer(0),N=this.USER_BROADCAST_PUSH_META_LENGTH+C.length+b.length+x.length+w.length,T=new ArrayBuffer(this.HEADER_LENGTH+N);let j=new DataView(T),I=0;j.setUint8(I++,this.KINDS.userBroadcastPush),j.setUint8(I++,C.length),j.setUint8(I++,b.length),j.setUint8(I++,x.length),j.setUint8(I++,w.length),j.setUint8(I++,this.BINARY_ENCODING),Array.from(C,D=>j.setUint8(I++,D.charCodeAt(0))),Array.from(b,D=>j.setUint8(I++,D.charCodeAt(0))),Array.from(x,D=>j.setUint8(I++,D.charCodeAt(0))),Array.from(w,D=>j.setUint8(I++,D.charCodeAt(0)));var k=new Uint8Array(T.byteLength+A.byteLength);return k.set(new Uint8Array(T),0),k.set(new Uint8Array(A),T.byteLength),k.buffer}_encodeJsonUserBroadcastPush(t){var r,o,d,h;const x=t.topic,b=(r=t.ref)!==null&&r!==void 0?r:"",C=(o=t.join_ref)!==null&&o!==void 0?o:"",w=t.payload.event,A=(h=(d=t.payload)===null||d===void 0?void 0:d.payload)!==null&&h!==void 0?h:{},T=new TextEncoder().encode(JSON.stringify(A)).buffer,j=this.USER_BROADCAST_PUSH_META_LENGTH+C.length+b.length+x.length+w.length,I=new ArrayBuffer(this.HEADER_LENGTH+j);let k=new DataView(I),D=0;k.setUint8(D++,this.KINDS.userBroadcastPush),k.setUint8(D++,C.length),k.setUint8(D++,b.length),k.setUint8(D++,x.length),k.setUint8(D++,w.length),k.setUint8(D++,this.JSON_ENCODING),Array.from(C,U=>k.setUint8(D++,U.charCodeAt(0))),Array.from(b,U=>k.setUint8(D++,U.charCodeAt(0))),Array.from(x,U=>k.setUint8(D++,U.charCodeAt(0))),Array.from(w,U=>k.setUint8(D++,U.charCodeAt(0)));var H=new Uint8Array(I.byteLength+T.byteLength);return H.set(new Uint8Array(I),0),H.set(new Uint8Array(T),I.byteLength),H.buffer}decode(t,r){if(this._isArrayBuffer(t)){let o=this._binaryDecode(t);return r(o)}if(typeof t=="string"){const o=JSON.parse(t),[d,h,x,b,C]=o;return r({join_ref:d,ref:h,topic:x,event:b,payload:C})}return r({})}_binaryDecode(t){const r=new DataView(t),o=r.getUint8(0),d=new TextDecoder;switch(o){case this.KINDS.push:return this._decodePush(t,r,d);case this.KINDS.reply:return this._decodeReply(t,r,d);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,d);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,d)}}_decodePush(t,r,o){const d=r.getUint8(1),h=r.getUint8(2),x=r.getUint8(3);let b=this.HEADER_LENGTH+this.META_LENGTH-1;const C=o.decode(t.slice(b,b+d));b=b+d;const w=o.decode(t.slice(b,b+h));b=b+h;const A=o.decode(t.slice(b,b+x));b=b+x;const N=JSON.parse(o.decode(t.slice(b,t.byteLength)));return{join_ref:C,ref:null,topic:w,event:A,payload:N}}_decodeReply(t,r,o){const d=r.getUint8(1),h=r.getUint8(2),x=r.getUint8(3),b=r.getUint8(4);let C=this.HEADER_LENGTH+this.META_LENGTH;const w=o.decode(t.slice(C,C+d));C=C+d;const A=o.decode(t.slice(C,C+h));C=C+h;const N=o.decode(t.slice(C,C+x));C=C+x;const T=o.decode(t.slice(C,C+b));C=C+b;const j=JSON.parse(o.decode(t.slice(C,t.byteLength))),I={status:T,response:j};return{join_ref:w,ref:A,topic:N,event:_r.reply,payload:I}}_decodeBroadcast(t,r,o){const d=r.getUint8(1),h=r.getUint8(2);let x=this.HEADER_LENGTH+2;const b=o.decode(t.slice(x,x+d));x=x+d;const C=o.decode(t.slice(x,x+h));x=x+h;const w=JSON.parse(o.decode(t.slice(x,t.byteLength)));return{join_ref:null,ref:null,topic:b,event:C,payload:w}}_decodeUserBroadcast(t,r,o){const d=r.getUint8(1),h=r.getUint8(2),x=r.getUint8(3),b=r.getUint8(4);let C=this.HEADER_LENGTH+4;const w=o.decode(t.slice(C,C+d));C=C+d;const A=o.decode(t.slice(C,C+h));C=C+h;const N=o.decode(t.slice(C,C+x));C=C+x;const T=t.slice(C,t.byteLength),j=b===this.JSON_ENCODING?JSON.parse(o.decode(T)):T,I={type:this.BROADCAST,event:A,payload:j};return x>0&&(I.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST,payload:I}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class v2{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var bn;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(bn||(bn={}));const Qp=(a,t,r={})=>{var o;const d=(o=r.skipTypes)!==null&&o!==void 0?o:[];return t?Object.keys(t).reduce((h,x)=>(h[x]=uS(x,a,t,d),h),{}):{}},uS=(a,t,r,o)=>{const d=t.find(b=>b.name===a),h=d?.type,x=r[a];return h&&!o.includes(h)?C2(h,x):w0(x)},C2=(a,t)=>{if(a.charAt(0)==="_"){const r=a.slice(1,a.length);return gS(t,r)}switch(a){case bn.bool:return dS(t);case bn.float4:case bn.float8:case bn.int2:case bn.int4:case bn.int8:case bn.numeric:case bn.oid:return hS(t);case bn.json:case bn.jsonb:return fS(t);case bn.timestamp:return mS(t);case bn.abstime:case bn.date:case bn.daterange:case bn.int4range:case bn.int8range:case bn.money:case bn.reltime:case bn.text:case bn.time:case bn.timestamptz:case bn.timetz:case bn.tsrange:case bn.tstzrange:return w0(t);default:return w0(t)}},w0=a=>a,dS=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},hS=a=>{if(typeof a=="string"){const t=parseFloat(a);if(!Number.isNaN(t))return t}return a},fS=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch(t){return console.log(`JSON parse error: ${t}`),a}return a},gS=(a,t)=>{if(typeof a!="string")return a;const r=a.length-1,o=a[r];if(a[0]==="{"&&o==="}"){let h;const x=a.slice(1,r);try{h=JSON.parse("["+x+"]")}catch{h=x?x.split(","):[]}return h.map(b=>C2(t,b))}return a},mS=a=>typeof a=="string"?a.replace(" ","T"):a,S2=a=>{const t=new URL(a);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class vf{constructor(t,r,o={},d=x0){this.channel=t,this.event=r,this.payload=o,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var o;return this._hasReceived(t)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(o=>o.status===t).forEach(o=>o.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Wp;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Wp||(Wp={}));class ec{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},d=>{const{onJoin:h,onLeave:x,onSync:b}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ec.syncState(this.state,d,h,x),this.pendingDiffs.forEach(C=>{this.state=ec.syncDiff(this.state,C,h,x)}),this.pendingDiffs=[],b()}),this.channel._on(o.diff,{},d=>{const{onJoin:h,onLeave:x,onSync:b}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=ec.syncDiff(this.state,d,h,x),b())}),this.onJoin((d,h,x)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:x})}),this.onLeave((d,h,x)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:x})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,o,d){const h=this.cloneDeep(t),x=this.transformState(r),b={},C={};return this.map(h,(w,A)=>{x[w]||(C[w]=A)}),this.map(x,(w,A)=>{const N=h[w];if(N){const T=A.map(D=>D.presence_ref),j=N.map(D=>D.presence_ref),I=A.filter(D=>j.indexOf(D.presence_ref)<0),k=N.filter(D=>T.indexOf(D.presence_ref)<0);I.length>0&&(b[w]=I),k.length>0&&(C[w]=k)}else b[w]=A}),this.syncDiff(h,{joins:b,leaves:C},o,d)}static syncDiff(t,r,o,d){const{joins:h,leaves:x}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),d||(d=()=>{}),this.map(h,(b,C)=>{var w;const A=(w=t[b])!==null&&w!==void 0?w:[];if(t[b]=this.cloneDeep(C),A.length>0){const N=t[b].map(j=>j.presence_ref),T=A.filter(j=>N.indexOf(j.presence_ref)<0);t[b].unshift(...T)}o(b,A,C)}),this.map(x,(b,C)=>{let w=t[b];if(!w)return;const A=C.map(N=>N.presence_ref);w=w.filter(N=>A.indexOf(N.presence_ref)<0),t[b]=w,d(b,w,C),w.length===0&&delete t[b]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(o=>r(o,t[o]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,o)=>{const d=t[o];return"metas"in d?r[o]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[o]=d,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Kp;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Kp||(Kp={}));var tc;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(tc||(tc={}));var va;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(va||(va={}));class W0{constructor(t,r={config:{}},o){var d,h;if(this.topic=t,this.params=r,this.socket=o,this.bindings={},this.state=cs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new vf(this,_r.join,this.params,this.timeout),this.rejoinTimer=new v2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(x=>x.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cs.closed,this.socket._remove(this)}),this._onError(x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=cs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_r.reply,{},(x,b)=>{this._trigger(this._replyEventName(b),x)}),this.presence=new ec(this),this.broadcastEndpointURL=S2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var o,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==cs.closed){const{config:{broadcast:x,presence:b,private:C}}=this.params,w=(d=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(j=>j.filter))!==null&&d!==void 0?d:[],A=!!this.bindings[tc.PRESENCE]&&this.bindings[tc.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,N={},T={broadcast:x,presence:Object.assign(Object.assign({},b),{enabled:A}),postgres_changes:w,private:C};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(j=>t?.(va.CHANNEL_ERROR,j)),this._onClose(()=>t?.(va.CLOSED)),this.updateJoinPayload(Object.assign({config:T},N)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:j})=>{var I;if(this.socket.setAuth(),j===void 0){t?.(va.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,D=(I=k?.length)!==null&&I!==void 0?I:0,H=[];for(let U=0;U<D;U++){const P=k[U],{filter:{event:K,schema:Z,table:Y,filter:V}}=P,$=j&&j[U];if($&&$.event===K&&$.schema===Z&&$.table===Y&&$.filter===V)H.push(Object.assign(Object.assign({},P),{id:$.id}));else{this.unsubscribe(),this.state=cs.errored,t?.(va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,t&&t(va.SUBSCRIBED);return}}).receive("error",j=>{this.state=cs.errored,t?.(va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t?.(va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,o){return this.state===cs.joined&&t===tc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,o)}async httpSend(t,r,o={}){var d;const h=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const x={method:"POST",headers:{Authorization:h,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},b=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(d=o.timeout)!==null&&d!==void 0?d:this.timeout);if(b.status===202)return{success:!0};let C=b.statusText;try{const w=await b.json();C=w.error||w.message||C}catch{}return Promise.reject(new Error(C))}async send(t,r={}){var o,d;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:x}=t,C={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:x,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,C,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((d=w.body)===null||d===void 0?void 0:d.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var x,b,C;const w=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((C=(b=(x=this.params)===null||x===void 0?void 0:x.config)===null||b===void 0?void 0:b.broadcast)===null||C===void 0)&&C.ack)&&h("ok"),w.receive("ok",()=>h("ok")),w.receive("error",()=>h("error")),w.receive("timeout",()=>h("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=cs.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_r.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(d=>{o=new vf(this,_r.leave,{},t),o.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cs.closed,this.bindings={}}async _fetchWithTimeout(t,r,o){const d=new AbortController,h=setTimeout(()=>d.abort(),o),x=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(h),x}_push(t,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new vf(this,t,r,o);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>lS){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,o){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,o){var d,h;const x=t.toLocaleLowerCase(),{close:b,error:C,leave:w,join:A}=_r;if(o&&[b,C,w,A].indexOf(x)>=0&&o!==this._joinRef())return;let T=this._onMessage(x,r,o);if(r&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(x)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(j=>{var I,k,D;return((I=j.filter)===null||I===void 0?void 0:I.event)==="*"||((D=(k=j.filter)===null||k===void 0?void 0:k.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===x}).map(j=>j.callback(T,o)):(h=this.bindings[x])===null||h===void 0||h.filter(j=>{var I,k,D,H,U,P;if(["broadcast","presence","postgres_changes"].includes(x))if("id"in j){const K=j.id,Z=(I=j.filter)===null||I===void 0?void 0:I.event;return K&&((k=r.ids)===null||k===void 0?void 0:k.includes(K))&&(Z==="*"||Z?.toLocaleLowerCase()===((D=r.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const K=(U=(H=j?.filter)===null||H===void 0?void 0:H.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return K==="*"||K===((P=r?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===x}).map(j=>{if(typeof T=="object"&&"ids"in T){const I=T.data,{schema:k,table:D,commit_timestamp:H,type:U,errors:P}=I;T=Object.assign(Object.assign({},{schema:k,table:D,commit_timestamp:H,eventType:U,new:{},old:{},errors:P}),this._getPayloadRecords(I))}j.callback(T,o)})}_isClosed(){return this.state===cs.closed}_isJoined(){return this.state===cs.joined}_isJoining(){return this.state===cs.joining}_isLeaving(){return this.state===cs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,o){const d=t.toLocaleLowerCase(),h={type:d,filter:r,callback:o};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(t,r){const o=t.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===o&&W0.isEqual(d.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const o in t)if(t[o]!==r[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_r.close,{},t)}_onError(t){this._on(_r.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Qp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Qp(t.columns,t.old_record)),r}}const Cf=()=>{},zu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pS=[1e3,2e3,5e3,1e4],xS=1e4,yS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wS{constructor(t,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x0,this.transport=null,this.heartbeatIntervalMs=zu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cf,this.ref=0,this.reconnectTimer=null,this.vsn=Xp,this.logger=Cf,this.conn=null,this.sendBuffer=[],this.serializer=new cS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${y0.websocket}`,this.httpEndpoint=S2(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sS.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,o){this.logger(t,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Gi.connecting:return Yi.Connecting;case Gi.open:return Yi.Open;case Gi.closing:return Yi.Closing;default:return Yi.Closed}}isConnected(){return this.connectionState()===Yi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const o=`realtime:${t}`,d=this.getChannels().find(h=>h.topic===o);if(d)return d;{const h=new W0(`realtime:${t}`,r,this);return this.channels.push(h),h}}push(t){const{topic:r,event:o,payload:d,ref:h}=t,x=()=>{this.encode(t,b=>{var C;(C=this.conn)===null||C===void 0||C.send(b)})};this.log("push",`${r} ${o} (${h})`,d),this.isConnected()?x():this.sendBuffer.push(x)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(oS,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},zu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(o=>o.topic===t&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(w){this.log("error","error in heartbeat callback",w)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:d,payload:h,ref:x}=r,b=x?`(${x})`:"",C=h.status||"";this.log("receive",`${C} ${o} ${d} ${b}`.trim(),h),this.channels.filter(w=>w._isMember(o)).forEach(w=>w._trigger(d,h,x)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gi.open||this.conn.readyState===Gi.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_r.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const o=t.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${t}${o}${d}`}_workerObjectUrl(t){let r;if(t)r=t;else{const o=new Blob([yS],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(o=>{const d={access_token:r,version:aS};r&&o.updateJoinPayload(d),o.joinedOnce&&o._isJoined()&&o._push(_r.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(o=>{try{o(r)}catch(d){this.log("error",`error in ${t} callback`,d)}})}catch(o){this.log("error",`error triggering ${t} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new v2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,o,d,h,x,b,C,w,A,N,T,j;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=t?.timeout)!==null&&o!==void 0?o:x0,this.heartbeatIntervalMs=(d=t?.heartbeatIntervalMs)!==null&&d!==void 0?d:zu.HEARTBEAT_INTERVAL,this.worker=(h=t?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(x=t?.accessToken)!==null&&x!==void 0?x:null,this.heartbeatCallback=(b=t?.heartbeatCallback)!==null&&b!==void 0?b:Cf,this.vsn=(C=t?.vsn)!==null&&C!==void 0?C:Xp,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=t?.reconnectAfterMs)!==null&&w!==void 0?w:(I=>pS[I-1]||xS),this.vsn){case b2:this.encode=(A=t?.encode)!==null&&A!==void 0?A:((I,k)=>k(JSON.stringify(I))),this.decode=(N=t?.decode)!==null&&N!==void 0?N:((I,k)=>k(JSON.parse(I)));break;case iS:this.encode=(T=t?.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(j=t?.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class K0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Dn(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}class bS extends K0{constructor(t,r,o){super(t),this.name="StorageApiError",this.status=r,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class b0 extends K0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Z0=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),vS=()=>Response,v0=a=>{if(Array.isArray(a))return a.map(r=>v0(r));if(typeof a=="function"||a!==Object(a))return a;const t={};return Object.entries(a).forEach(([r,o])=>{const d=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));t[d]=v0(o)}),t},CS=a=>{if(typeof a!="object"||a===null)return!1;const t=Object.getPrototypeOf(a);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},Sf=a=>{var t;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(t=a.error)===null||t===void 0?void 0:t.message)||JSON.stringify(a)},SS=(a,t,r)=>tt(void 0,void 0,void 0,function*(){const o=yield vS();a instanceof o&&!r?.noResolveJson?a.json().then(d=>{const h=a.status||500,x=d?.statusCode||h+"";t(new bS(Sf(d),h,x))}).catch(d=>{t(new b0(Sf(d),d))}):t(new b0(Sf(a),a))}),_S=(a,t,r,o)=>{const d={method:a,headers:t?.headers||{}};return a==="GET"||!o?d:(CS(o)?(d.headers=Object.assign({"Content-Type":"application/json"},t?.headers),d.body=JSON.stringify(o)):d.body=o,t?.duplex&&(d.duplex=t.duplex),Object.assign(Object.assign({},d),r))};function mc(a,t,r,o,d,h){return tt(this,void 0,void 0,function*(){return new Promise((x,b)=>{a(r,_S(t,o,d,h)).then(C=>{if(!C.ok)throw C;return o?.noResolveJson?C:C.json()}).then(C=>x(C)).catch(C=>SS(C,b,o))})})}function oc(a,t,r,o){return tt(this,void 0,void 0,function*(){return mc(a,"GET",t,r,o)})}function Lr(a,t,r,o,d){return tt(this,void 0,void 0,function*(){return mc(a,"POST",t,o,d,r)})}function C0(a,t,r,o,d){return tt(this,void 0,void 0,function*(){return mc(a,"PUT",t,o,d,r)})}function ES(a,t,r,o){return tt(this,void 0,void 0,function*(){return mc(a,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),o)})}function $0(a,t,r,o,d){return tt(this,void 0,void 0,function*(){return mc(a,"DELETE",t,o,d,r)})}class AS{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return tt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}}var _2;class NS{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[_2]="BlobDownloadBuilder",this.promise=null}asStream(){return new AS(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return tt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dn(t))return{data:null,error:t};throw t}})}}_2=Symbol.toStringTag;const TS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jS{constructor(t,r={},o,d){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=o,this.fetch=Z0(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,o,d){return tt(this,void 0,void 0,function*(){try{let h;const x=Object.assign(Object.assign({},Zp),d);let b=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(x.upsert)});const C=x.metadata;typeof Blob<"u"&&o instanceof Blob?(h=new FormData,h.append("cacheControl",x.cacheControl),C&&h.append("metadata",this.encodeMetadata(C)),h.append("",o)):typeof FormData<"u"&&o instanceof FormData?(h=o,h.has("cacheControl")||h.append("cacheControl",x.cacheControl),C&&!h.has("metadata")&&h.append("metadata",this.encodeMetadata(C))):(h=o,b["cache-control"]=`max-age=${x.cacheControl}`,b["content-type"]=x.contentType,C&&(b["x-metadata"]=this.toBase64(this.encodeMetadata(C))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!x.duplex&&(x.duplex="half")),d?.headers&&(b=Object.assign(Object.assign({},b),d.headers));const w=this._removeEmptyFolders(r),A=this._getFinalPath(w),N=yield(t=="PUT"?C0:Lr)(this.fetch,`${this.url}/object/${A}`,h,Object.assign({headers:b},x?.duplex?{duplex:x.duplex}:{}));return{data:{path:w,id:N.Id,fullPath:N.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Dn(h))return{data:null,error:h};throw h}})}upload(t,r,o){return tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,o)})}uploadToSignedUrl(t,r,o,d){return tt(this,void 0,void 0,function*(){const h=this._removeEmptyFolders(t),x=this._getFinalPath(h),b=new URL(this.url+`/object/upload/sign/${x}`);b.searchParams.set("token",r);try{let C;const w=Object.assign({upsert:Zp.upsert},d),A=Object.assign(Object.assign({},this.headers),{"x-upsert":String(w.upsert)});typeof Blob<"u"&&o instanceof Blob?(C=new FormData,C.append("cacheControl",w.cacheControl),C.append("",o)):typeof FormData<"u"&&o instanceof FormData?(C=o,C.append("cacheControl",w.cacheControl)):(C=o,A["cache-control"]=`max-age=${w.cacheControl}`,A["content-type"]=w.contentType);const N=yield C0(this.fetch,b.toString(),C,{headers:A});return{data:{path:h,fullPath:N.Key},error:null}}catch(C){if(this.shouldThrowOnError)throw C;if(Dn(C))return{data:null,error:C};throw C}})}createSignedUploadUrl(t,r){return tt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t);const d=Object.assign({},this.headers);r?.upsert&&(d["x-upsert"]="true");const h=yield Lr(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:d}),x=new URL(this.url+h.url),b=x.searchParams.get("token");if(!b)throw new K0("No token returned by API");return{data:{signedUrl:x.toString(),path:t,token:b},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Dn(o))return{data:null,error:o};throw o}})}update(t,r,o){return tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,o)})}move(t,r,o){return tt(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Dn(d))return{data:null,error:d};throw d}})}copy(t,r,o){return tt(this,void 0,void 0,function*(){try{return{data:{path:(yield Lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Dn(d))return{data:null,error:d};throw d}})}createSignedUrl(t,r,o){return tt(this,void 0,void 0,function*(){try{let d=this._getFinalPath(t),h=yield Lr(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:r},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const x=o?.download?`&download=${o.download===!0?"":o.download}`:"";return h={signedUrl:encodeURI(`${this.url}${h.signedURL}${x}`)},{data:h,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Dn(d))return{data:null,error:d};throw d}})}createSignedUrls(t,r,o){return tt(this,void 0,void 0,function*(){try{const d=yield Lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),h=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:d.map(x=>Object.assign(Object.assign({},x),{signedUrl:x.signedURL?encodeURI(`${this.url}${x.signedURL}${h}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Dn(d))return{data:null,error:d};throw d}})}download(t,r){const d=typeof r?.transform<"u"?"render/image/authenticated":"object",h=this.transformOptsToQueryString(r?.transform||{}),x=h?`?${h}`:"",b=this._getFinalPath(t),C=()=>oc(this.fetch,`${this.url}/${d}/${b}${x}`,{headers:this.headers,noResolveJson:!0});return new NS(C,this.shouldThrowOnError)}info(t){return tt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const o=yield oc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:v0(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Dn(o))return{data:null,error:o};throw o}})}exists(t){return tt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ES(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Dn(o)&&o instanceof b0){const d=o.originalError;if([400,404].includes(d?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(t,r){const o=this._getFinalPath(t),d=[],h=r?.download?`download=${r.download===!0?"":r.download}`:"";h!==""&&d.push(h);const b=typeof r?.transform<"u"?"render/image":"object",C=this.transformOptsToQueryString(r?.transform||{});C!==""&&d.push(C);let w=d.join("&");return w!==""&&(w=`?${w}`),{data:{publicUrl:encodeURI(`${this.url}/${b}/public/${o}${w}`)}}}remove(t){return tt(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}list(t,r,o){return tt(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},TS),r),{prefix:t||""});return{data:yield Lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},o),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Dn(d))return{data:null,error:d};throw d}})}listV2(t,r){return tt(this,void 0,void 0,function*(){try{const o=Object.assign({},t);return{data:yield Lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Dn(o))return{data:null,error:o};throw o}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const E2="2.83.0",A2={"X-Client-Info":`storage-js/${E2}`};class RS{constructor(t,r={},o,d){this.shouldThrowOnError=!1;const h=new URL(t);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(h.hostname)&&!h.hostname.includes("storage.supabase.")&&(h.hostname=h.hostname.replace("supabase.","storage.supabase.")),this.url=h.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A2),r),this.fetch=Z0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return tt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield oc(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}getBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}createBucket(t){return tt(this,arguments,void 0,function*(r,o={public:!1}){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Dn(d))return{data:null,error:d};throw d}})}updateBucket(t,r){return tt(this,void 0,void 0,function*(){try{return{data:yield C0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Dn(o))return{data:null,error:o};throw o}})}emptyBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class OS{constructor(t,r={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A2),r),this.fetch=Z0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}listBuckets(t){return tt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const o=r.toString(),d=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield oc(this.fetch,d,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:yield $0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dn(r))return{data:null,error:r};throw r}})}}const J0={"X-Client-Info":`storage-js/${E2}`,"Content-Type":"application/json"};class N2 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function or(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}class _f extends N2{constructor(t,r,o){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class IS extends N2{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var $p;(function(a){a.InternalError="InternalError",a.S3VectorConflictException="S3VectorConflictException",a.S3VectorNotFoundException="S3VectorNotFoundException",a.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",a.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",a.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})($p||($p={}));const e1=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),MS=a=>{if(typeof a!="object"||a===null)return!1;const t=Object.getPrototypeOf(a);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},Jp=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),kS=(a,t,r)=>tt(void 0,void 0,void 0,function*(){if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!r?.noResolveJson){const d=a.status||500,h=a;if(typeof h.json=="function")h.json().then(x=>{const b=x?.statusCode||x?.code||d+"";t(new _f(Jp(x),d,b))}).catch(()=>{const x=d+"",b=h.statusText||`HTTP ${d} error`;t(new _f(b,d,x))});else{const x=d+"",b=h.statusText||`HTTP ${d} error`;t(new _f(b,d,x))}}else t(new IS(Jp(a),a))}),DS=(a,t,r,o)=>{const d={method:a,headers:t?.headers||{}};return o?(MS(o)?(d.headers=Object.assign({"Content-Type":"application/json"},t?.headers),d.body=JSON.stringify(o)):d.body=o,Object.assign(Object.assign({},d),r)):d};function LS(a,t,r,o,d,h){return tt(this,void 0,void 0,function*(){return new Promise((x,b)=>{a(r,DS(t,o,d,h)).then(C=>{if(!C.ok)throw C;if(o?.noResolveJson)return C;const w=C.headers.get("content-type");return!w||!w.includes("application/json")?{}:C.json()}).then(C=>x(C)).catch(C=>kS(C,b,o))})})}function lr(a,t,r,o,d){return tt(this,void 0,void 0,function*(){return LS(a,"POST",t,o,d,r)})}class BS{constructor(t,r={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),r),this.fetch=e1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return tt(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}getIndex(t,r){return tt(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}listIndexes(t){return tt(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return tt(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(or(o))return{data:null,error:o};throw o}})}}class US{constructor(t,r={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),r),this.fetch=e1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return tt(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield lr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}getVectors(t){return tt(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}listVectors(t){return tt(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield lr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}queryVectors(t){return tt(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteVectors(t){return tt(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield lr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}}class PS{constructor(t,r={},o){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},J0),r),this.fetch=e1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}getBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}listBuckets(){return tt(this,arguments,void 0,function*(t={}){try{return{data:yield lr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}deleteBucket(t){return tt(this,void 0,void 0,function*(){try{return{data:(yield lr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}}class zS extends PS{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new FS(this.url,this.headers,t,this.fetch)}}class FS extends BS{constructor(t,r,o,d){super(t,r,d),this.vectorBucketName=o}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return tt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return tt(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return tt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return tt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new HS(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class HS extends US{constructor(t,r,o,d,h){super(t,r,h),this.vectorBucketName=o,this.indexName=d}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return tt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return tt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return tt(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return tt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return tt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class qS extends RS{constructor(t,r={},o,d){super(t,r,o,d)}from(t){return new jS(this.url,this.headers,t,this.fetch)}get vectors(){return new zS(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new OS(this.url+"/iceberg",this.headers,this.fetch)}}const VS="2.83.0";let $l="";typeof Deno<"u"?$l="deno":typeof document<"u"?$l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$l="react-native":$l="node";const GS={"X-Client-Info":`supabase-js-${$l}/${VS}`},YS={headers:GS},XS={schema:"public"},QS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WS={},KS=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),ZS=()=>Headers,$S=(a,t,r)=>{const o=KS(r),d=ZS();return async(h,x)=>{var b;const C=(b=await t())!==null&&b!==void 0?b:a;let w=new d(x?.headers);return w.has("apikey")||w.set("apikey",a),w.has("Authorization")||w.set("Authorization",`Bearer ${C}`),o(h,Object.assign(Object.assign({},x),{headers:w}))}};function JS(a){return a.endsWith("/")?a:a+"/"}function e3(a,t){var r,o;const{db:d,auth:h,realtime:x,global:b}=a,{db:C,auth:w,realtime:A,global:N}=t,T={db:Object.assign(Object.assign({},C),d),auth:Object.assign(Object.assign({},w),h),realtime:Object.assign(Object.assign({},A),x),storage:{},global:Object.assign(Object.assign(Object.assign({},N),b),{headers:Object.assign(Object.assign({},(r=N?.headers)!==null&&r!==void 0?r:{}),(o=b?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return a.accessToken?T.accessToken=a.accessToken:delete T.accessToken,T}function t3(a){const t=a?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(JS(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const T2="2.83.0",Yo=30*1e3,S0=3,Ef=S0*Yo,n3="http://localhost:9999",s3="supabase.auth.token",r3={"X-Client-Info":`gotrue-js/${T2}`},_0="X-Supabase-Api-Version",j2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},a3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,i3=600*1e3;class lc extends Error{constructor(t,r,o){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function st(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class o3 extends lc{constructor(t,r,o){super(t,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function l3(a){return st(a)&&a.name==="AuthApiError"}class Xi extends lc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class xi extends lc{constructor(t,r,o,d){super(t,o,d),this.name=r,this.status=o}}class rr extends xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function c3(a){return st(a)&&a.name==="AuthSessionMissingError"}class Po extends xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fu extends xi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Hu extends xi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function u3(a){return st(a)&&a.name==="AuthImplicitGrantRedirectError"}class ex extends xi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class E0 extends xi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Af(a){return st(a)&&a.name==="AuthRetryableFetchError"}class tx extends xi{constructor(t,r,o){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class A0 extends xi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nx=` 	
\r=`.split(""),d3=(()=>{const a=new Array(128);for(let t=0;t<a.length;t+=1)a[t]=-1;for(let t=0;t<nx.length;t+=1)a[nx[t].charCodeAt(0)]=-2;for(let t=0;t<Ju.length;t+=1)a[Ju[t].charCodeAt(0)]=t;return a})();function sx(a,t,r){if(a!==null)for(t.queue=t.queue<<8|a,t.queuedBits+=8;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;r(Ju[o]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const o=t.queue>>t.queuedBits-6&63;r(Ju[o]),t.queuedBits-=6}}function R2(a,t,r){const o=d3[a];if(o>-1)for(t.queue=t.queue<<6|o,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function rx(a){const t=[],r=x=>{t.push(String.fromCodePoint(x))},o={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=x=>{g3(x,o,r)};for(let x=0;x<a.length;x+=1)R2(a.charCodeAt(x),d,h);return t.join("")}function h3(a,t){if(a<=127){t(a);return}else if(a<=2047){t(192|a>>6),t(128|a&63);return}else if(a<=65535){t(224|a>>12),t(128|a>>6&63),t(128|a&63);return}else if(a<=1114111){t(240|a>>18),t(128|a>>12&63),t(128|a>>6&63),t(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function f3(a,t){for(let r=0;r<a.length;r+=1){let o=a.charCodeAt(r);if(o>55295&&o<=56319){const d=(o-55296)*1024&65535;o=(a.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}h3(o,t)}}function g3(a,t,r){if(t.utf8seq===0){if(a<=127){r(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){t.utf8seq=o;break}if(t.utf8seq===2)t.codepoint=a&31;else if(t.utf8seq===3)t.codepoint=a&15;else if(t.utf8seq===4)t.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|a&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ko(a){const t=[],r={queue:0,queuedBits:0},o=d=>{t.push(d)};for(let d=0;d<a.length;d+=1)R2(a.charCodeAt(d),r,o);return new Uint8Array(t)}function m3(a){const t=[];return f3(a,r=>t.push(r)),new Uint8Array(t)}function Ki(a){const t=[],r={queue:0,queuedBits:0},o=d=>{t.push(d)};return a.forEach(d=>sx(d,r,o)),sx(null,r,o),t.join("")}function p3(a){return Math.round(Date.now()/1e3)+a}function x3(){return Symbol("auth-callback")}const Cs=()=>typeof window<"u"&&typeof document<"u",Fi={tested:!1,writable:!1},O2=()=>{if(!Cs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fi.tested)return Fi.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Fi.tested=!0,Fi.writable=!0}catch{Fi.tested=!0,Fi.writable=!1}return Fi.writable};function y3(a){const t={},r=new URL(a);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,h)=>{t[h]=d})}catch{}return r.searchParams.forEach((o,d)=>{t[d]=o}),t}const I2=a=>a?(...t)=>a(...t):(...t)=>fetch(...t),w3=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Xo=async(a,t,r)=>{await a.setItem(t,JSON.stringify(r))},Hi=async(a,t)=>{const r=await a.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ci=async(a,t)=>{await a.removeItem(t)};class dd{constructor(){this.promise=new dd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}dd.promiseConstructor=Promise;function Nf(a){const t=a.split(".");if(t.length!==3)throw new A0("Invalid JWT structure");for(let o=0;o<t.length;o++)if(!a3.test(t[o]))throw new A0("JWT not in base64url format");return{header:JSON.parse(rx(t[0])),payload:JSON.parse(rx(t[1])),signature:Ko(t[2]),raw:{header:t[0],payload:t[1]}}}async function b3(a){return await new Promise(t=>{setTimeout(()=>t(null),a)})}function v3(a,t){return new Promise((o,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const x=await a(h);if(!t(h,null,x)){o(x);return}}catch(x){if(!t(h,x)){d(x);return}}})()})}function C3(a){return("0"+a.toString(16)).substr(-2)}function S3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let d="";for(let h=0;h<56;h++)d+=r.charAt(Math.floor(Math.random()*o));return d}return crypto.getRandomValues(t),Array.from(t,C3).join("")}async function _3(a){const r=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(o);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function E3(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const r=await _3(a);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zo(a,t,r=!1){const o=S3();let d=o;r&&(d+="/PASSWORD_RECOVERY"),await Xo(a,`${t}-code-verifier`,d);const h=await E3(o);return[h,o===h?"plain":"s256"]}const A3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function N3(a){const t=a.headers.get(_0);if(!t||!t.match(A3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function T3(a){if(!a)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(a<=t)throw new Error("JWT has expired")}function j3(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fo(a){if(!R3.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tf(){const a={};return new Proxy(a,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function O3(a,t){return new Proxy(a,{get:(r,o,d)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const h=o.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,d)}return!t.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,o,d)}})}function ax(a){return JSON.parse(JSON.stringify(a))}const Vi=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),I3=[502,503,504];async function ix(a){var t;if(!w3(a))throw new E0(Vi(a),0);if(I3.includes(a.status))throw new E0(Vi(a),a.status);let r;try{r=await a.json()}catch(h){throw new Xi(Vi(h),h)}let o;const d=N3(a);if(d&&d.getTime()>=j2["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new tx(Vi(r),a.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(o==="session_not_found")throw new rr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,x)=>h&&typeof x=="string",!0))throw new tx(Vi(r),a.status,r.weak_password.reasons);throw new o3(Vi(r),a.status||500,o)}const M3=(a,t,r,o)=>{const d={method:a,headers:t?.headers||{}};return a==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),d.body=JSON.stringify(o),Object.assign(Object.assign({},d),r))};async function ut(a,t,r,o){var d;const h=Object.assign({},o?.headers);h[_0]||(h[_0]=j2["2024-01-01"].name),o?.jwt&&(h.Authorization=`Bearer ${o.jwt}`);const x=(d=o?.query)!==null&&d!==void 0?d:{};o?.redirectTo&&(x.redirect_to=o.redirectTo);const b=Object.keys(x).length?"?"+new URLSearchParams(x).toString():"",C=await k3(a,t,r+b,{headers:h,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(C):{data:Object.assign({},C),error:null}}async function k3(a,t,r,o,d,h){const x=M3(t,o,d,h);let b;try{b=await a(r,Object.assign({},x))}catch(C){throw console.error(C),new E0(Vi(C),0)}if(b.ok||await ix(b),o?.noResolveJson)return b;try{return await b.json()}catch(C){await ix(C)}}function Dr(a){var t;let r=null;B3(a)&&(r=Object.assign({},a),a.expires_at||(r.expires_at=p3(a.expires_in)));const o=(t=a.user)!==null&&t!==void 0?t:a;return{data:{session:r,user:o},error:null}}function ox(a){const t=Dr(a);return!t.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(t.data.weak_password=a.weak_password),t}function fi(a){var t;return{data:{user:(t=a.user)!==null&&t!==void 0?t:a},error:null}}function D3(a){return{data:a,error:null}}function L3(a){const{action_link:t,email_otp:r,hashed_token:o,redirect_to:d,verification_type:h}=a,x=nl(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),b={action_link:t,email_otp:r,hashed_token:o,redirect_to:d,verification_type:h},C=Object.assign({},x);return{data:{properties:b,user:C},error:null}}function lx(a){return a}function B3(a){return a.access_token&&a.refresh_token&&a.expires_in}const jf=["global","local","others"];class U3{constructor({url:t="",headers:r={},fetch:o}){this.url=t,this.headers=r,this.fetch=I2(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=jf[0]){if(jf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jf.join(", ")}`);try{return await ut(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(st(o))return{data:null,error:o};throw o}}async inviteUserByEmail(t,r={}){try{return await ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fi})}catch(o){if(st(o))return{data:{user:null},error:o};throw o}}async generateLink(t){try{const{options:r}=t,o=nl(t,["options"]),d=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(d.new_email=o?.newEmail,delete d.newEmail),await ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:L3,redirectTo:r?.redirectTo})}catch(r){if(st(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,o,d,h,x,b,C;try{const w={nextPage:null,lastPage:0,total:0},A=await ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(h=(d=t?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:lx});if(A.error)throw A.error;const N=await A.json(),T=(x=A.headers.get("x-total-count"))!==null&&x!==void 0?x:0,j=(C=(b=A.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&C!==void 0?C:[];return j.length>0&&(j.forEach(I=>{const k=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(I.split(";")[1].split("=")[1]);w[`${D}Page`]=k}),w.total=parseInt(T)),{data:Object.assign(Object.assign({},N),w),error:null}}catch(w){if(st(w))return{data:{users:[]},error:w};throw w}}async getUserById(t){Fo(t);try{return await ut(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fi})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Fo(t);try{return await ut(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:fi})}catch(o){if(st(o))return{data:{user:null},error:o};throw o}}async deleteUser(t,r=!1){Fo(t);try{return await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:fi})}catch(o){if(st(o))return{data:{user:null},error:o};throw o}}async _listFactors(t){Fo(t.userId);try{const{data:r,error:o}=await ut(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:o}}catch(r){if(st(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Fo(t.userId),Fo(t.id);try{return{data:await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,o,d,h,x,b,C;try{const w={nextPage:null,lastPage:0,total:0},A=await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(h=(d=t?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:lx});if(A.error)throw A.error;const N=await A.json(),T=(x=A.headers.get("x-total-count"))!==null&&x!==void 0?x:0,j=(C=(b=A.headers.get("link"))===null||b===void 0?void 0:b.split(","))!==null&&C!==void 0?C:[];return j.length>0&&(j.forEach(I=>{const k=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(I.split(";")[1].split("=")[1]);w[`${D}Page`]=k}),w.total=parseInt(T)),{data:Object.assign(Object.assign({},N),w),error:null}}catch(w){if(st(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ut(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ut(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(st(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(t){try{return await ut(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(st(r))return{data:null,error:r};throw r}}}function cx(a={}){return{getItem:t=>a[t]||null,setItem:(t,r)=>{a[t]=r},removeItem:t=>{delete a[t]}}}const Ho={debug:!!(globalThis&&O2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class M2 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class P3 extends M2{}async function z3(a,t,r){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,t);const o=new globalThis.AbortController;return t>0&&setTimeout(()=>{o.abort(),Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async d=>{if(d){Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,d.name);try{return await r()}finally{Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,d.name)}}else{if(t===0)throw Ho.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new P3(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Ho.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function F3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function k2(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function H3(a){return parseInt(a,16)}function q3(a){const t=new TextEncoder().encode(a);return"0x"+Array.from(t,o=>o.toString(16).padStart(2,"0")).join("")}function V3(a){var t;const{chainId:r,domain:o,expirationTime:d,issuedAt:h=new Date,nonce:x,notBefore:b,requestId:C,resources:w,scheme:A,uri:N,version:T}=a;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(x&&x.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${x}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((t=a.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const j=k2(a.address),I=A?`${A}://${o}`:o,k=a.statement?`${a.statement}
`:"",D=`${I} wants you to sign in with your Ethereum account:
${j}

${k}`;let H=`URI: ${N}
Version: ${T}
Chain ID: ${r}${x?`
Nonce: ${x}`:""}
Issued At: ${h.toISOString()}`;if(d&&(H+=`
Expiration Time: ${d.toISOString()}`),b&&(H+=`
Not Before: ${b.toISOString()}`),C&&(H+=`
Request ID: ${C}`),w){let U=`
Resources:`;for(const P of w){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);U+=`
- ${P}`}H+=U}return`${D}
${H}`}class ts extends Error{constructor({message:t,code:r,cause:o,name:d}){var h;super(t,{cause:o}),this.__isWebAuthnError=!0,this.name=(h=d??(o instanceof Error?o.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class ed extends ts{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function G3({error:a,options:t}){var r,o,d;const{publicKey:h}=t;if(!h)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ts({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ts({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(t.mediation==="conditional"&&((o=h.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ts({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new ts({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new ts({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new ts({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return h.pubKeyCredParams.filter(b=>b.type==="public-key").length===0?new ts({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new ts({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const x=window.location.hostname;if(D2(x)){if(h.rp.id!==x)return new ts({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ts({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new ts({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new ts({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ts({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function Y3({error:a,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ts({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new ts({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const o=window.location.hostname;if(D2(o)){if(r.rpId!==o)return new ts({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ts({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new ts({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ts({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class X3{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Q3=new X3;function W3(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:t,user:r,excludeCredentials:o}=a,d=nl(a,["challenge","user","excludeCredentials"]),h=Ko(t).buffer,x=Object.assign(Object.assign({},r),{id:Ko(r.id).buffer}),b=Object.assign(Object.assign({},d),{challenge:h,user:x});if(o&&o.length>0){b.excludeCredentials=new Array(o.length);for(let C=0;C<o.length;C++){const w=o[C];b.excludeCredentials[C]=Object.assign(Object.assign({},w),{id:Ko(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return b}function K3(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:t,allowCredentials:r}=a,o=nl(a,["challenge","allowCredentials"]),d=Ko(t).buffer,h=Object.assign(Object.assign({},o),{challenge:d});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let x=0;x<r.length;x++){const b=r[x];h.allowCredentials[x]=Object.assign(Object.assign({},b),{id:Ko(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return h}function Z3(a){var t;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a;return{id:a.id,rawId:a.id,response:{attestationObject:Ki(new Uint8Array(a.response.attestationObject)),clientDataJSON:Ki(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function $3(a){var t;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a,o=a.getClientExtensionResults(),d=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Ki(new Uint8Array(d.authenticatorData)),clientDataJSON:Ki(new Uint8Array(d.clientDataJSON)),signature:Ki(new Uint8Array(d.signature)),userHandle:d.userHandle?Ki(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function D2(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function ux(){var a,t;return!!(Cs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function J3(a){try{const t=await navigator.credentials.create(a);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",t)}:{data:null,error:new ed("Empty credential response",t)}}catch(t){return{data:null,error:G3({error:t,options:a})}}}async function e_(a){try{const t=await navigator.credentials.get(a);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",t)}:{data:null,error:new ed("Empty credential response",t)}}catch(t){return{data:null,error:Y3({error:t,options:a})}}}const t_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},n_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function td(...a){const t=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),o={};for(const d of a)if(d)for(const h in d){const x=d[h];if(x!==void 0)if(Array.isArray(x))o[h]=x;else if(r(x))o[h]=x;else if(t(x)){const b=o[h];t(b)?o[h]=td(b,x):o[h]=td(x)}else o[h]=x}return o}function s_(a,t){return td(t_,a,t||{})}function r_(a,t){return td(n_,a,t||{})}class a_{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:o,signal:d},h){try{const{data:x,error:b}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!x)return{data:null,error:b};const C=d??Q3.createNewAbortSignal();if(x.webauthn.type==="create"){const{user:w}=x.webauthn.credential_options.publicKey;w.name||(w.name=`${w.id}:${o}`),w.displayName||(w.displayName=w.name)}switch(x.webauthn.type){case"create":{const w=s_(x.webauthn.credential_options.publicKey,h?.create),{data:A,error:N}=await J3({publicKey:w,signal:C});return A?{data:{factorId:t,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:A}},error:null}:{data:null,error:N}}case"request":{const w=r_(x.webauthn.credential_options.publicKey,h?.request),{data:A,error:N}=await e_(Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:w,signal:C}));return A?{data:{factorId:t,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:A}},error:null}:{data:null,error:N}}}}catch(x){return st(x)?{data:null,error:x}:{data:null,error:new Xi("Unexpected error in challenge",x)}}}async _verify({challengeId:t,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:o})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new lc("rpId is required for WebAuthn authentication")};try{if(!ux())return{data:null,error:new Xi("Browser does not support WebAuthn",null)};const{data:x,error:b}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:o},signal:d},{request:h});if(!x)return{data:null,error:b};const{webauthn:C}=x;return this._verify({factorId:t,challengeId:x.challengeId,webauthn:{type:C.type,rpId:r,rpOrigins:o,credential_response:C.credential_response}})}catch(x){return st(x)?{data:null,error:x}:{data:null,error:new Xi("Unexpected error in authenticate",x)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new lc("rpId is required for WebAuthn registration")};try{if(!ux())return{data:null,error:new Xi("Browser does not support WebAuthn",null)};const{data:x,error:b}=await this._enroll({friendlyName:t});if(!x)return await this.client.mfa.listFactors().then(A=>{var N;return(N=A.data)===null||N===void 0?void 0:N.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===t&&T.status!=="unverified")}).then(A=>A?this.client.mfa.unenroll({factorId:A?.id}):void 0),{data:null,error:b};const{data:C,error:w}=await this._challenge({factorId:x.id,friendlyName:x.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:d},{create:h});return C?this._verify({factorId:x.id,challengeId:C.challengeId,webauthn:{rpId:r,rpOrigins:o,type:C.webauthn.type,credential_response:C.webauthn.credential_response}}):{data:null,error:w}}catch(x){return st(x)?{data:null,error:x}:{data:null,error:new Xi("Unexpected error in register",x)}}}}F3();const i_={url:n3,storageKey:s3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:r3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function dx(a,t,r){return await r()}const qo={};class cc{get jwks(){var t,r;return(r=(t=qo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=qo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){qo[this.storageKey]=Object.assign(Object.assign({},qo[this.storageKey]),{cachedAt:t})}constructor(t){var r,o,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},i_),t);if(this.storageKey=h.storageKey,this.instanceID=(r=cc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,cc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&Cs()){const x=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(x),this.logDebugMessages&&console.trace(x)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new U3({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=I2(h.fetch),this.lock=h.lock||dx,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,h.lock?this.lock=h.lock:Cs()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=z3:this.lock=dx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:O2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cx(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=cx(this.memoryStorage)),Cs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(x){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",x)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async x=>{this._debug("received broadcast notification from other tab or client",x),await this._notifyAllSubscribers(x.data.event,x.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${T2}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},o="none";if(Cs()&&(r=y3(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),Cs()&&this.detectSessionInUrl&&o!=="none"){const{data:d,error:h}=await this._getSessionFromURL(r,o);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),u3(h)){const C=(t=h.details)===null||t===void 0?void 0:t.code;if(C==="identity_already_exists"||C==="identity_not_found"||C==="single_identity_not_deletable")return{error:h}}return await this._removeSession(),{error:h}}const{session:x,redirectType:b}=d;return this._debug("#_initialize()","detected session in URL",x,"redirect type",b),await this._saveSession(x),setTimeout(async()=>{b==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",x):await this._notifyAllSubscribers("SIGNED_IN",x)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return st(r)?this._returnResult({error:r}):this._returnResult({error:new Xi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,o,d;try{const h=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(d=t?.options)===null||d===void 0?void 0:d.captchaToken}},xform:Dr}),{data:x,error:b}=h;if(b||!x)return this._returnResult({data:{user:null,session:null},error:b});const C=x.session,w=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:w,session:C},error:null})}catch(h){if(st(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(t){var r,o,d;try{let h;if("email"in t){const{email:A,password:N,options:T}=t;let j=null,I=null;this.flowType==="pkce"&&([j,I]=await zo(this.storage,this.storageKey)),h=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T?.emailRedirectTo,body:{email:A,password:N,data:(r=T?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:T?.captchaToken},code_challenge:j,code_challenge_method:I},xform:Dr})}else if("phone"in t){const{phone:A,password:N,options:T}=t;h=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:A,password:N,data:(o=T?.data)!==null&&o!==void 0?o:{},channel:(d=T?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:T?.captchaToken}},xform:Dr})}else throw new Fu("You must provide either an email or phone number and a password");const{data:x,error:b}=h;if(b||!x)return this._returnResult({data:{user:null,session:null},error:b});const C=x.session,w=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:w,session:C},error:null})}catch(h){if(st(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(t){try{let r;if("email"in t){const{email:h,password:x,options:b}=t;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:x,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:ox})}else if("phone"in t){const{phone:h,password:x,options:b}=t;r=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:x,gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:ox})}else throw new Fu("You must provide either an email or phone number and a password");const{data:o,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!o||!o.session||!o.user){const h=new Po;return this._returnResult({data:{user:null,session:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:d})}catch(r){if(st(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,o,d,h;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=t.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,o,d,h,x,b,C,w,A,N,T;let j,I;if("message"in t)j=t.message,I=t.signature;else{const{chain:k,wallet:D,statement:H,options:U}=t;let P;if(Cs())if(typeof D=="object")P=D;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")P=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=D}const K=new URL((r=U?.url)!==null&&r!==void 0?r:window.location.href),Z=await P.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=k2(Z[0]);let V=(o=U?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!V){const q=await P.request({method:"eth_chainId"});V=H3(q)}const $={domain:K.host,address:Y,statement:H,uri:K.href,version:"1",chainId:V,nonce:(d=U?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(x=(h=U?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&x!==void 0?x:new Date,expirationTime:(b=U?.signInWithEthereum)===null||b===void 0?void 0:b.expirationTime,notBefore:(C=U?.signInWithEthereum)===null||C===void 0?void 0:C.notBefore,requestId:(w=U?.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(A=U?.signInWithEthereum)===null||A===void 0?void 0:A.resources};j=V3($),I=await P.request({method:"personal_sign",params:[q3(j),Y]})}try{const{data:k,error:D}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:I},!((N=t.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(T=t.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Dr});if(D)throw D;if(!k||!k.session||!k.user){const H=new Po;return this._returnResult({data:{user:null,session:null},error:H})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:D})}catch(k){if(st(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(t){var r,o,d,h,x,b,C,w,A,N,T,j;let I,k;if("message"in t)I=t.message,k=t.signature;else{const{chain:D,wallet:H,statement:U,options:P}=t;let K;if(Cs())if(typeof H=="object")K=H;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))K=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=H}const Z=new URL((r=P?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in K&&K.signIn){const Y=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),U?{statement:U}:null));let V;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")V=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)V=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)I=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),k=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${Z.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(d=(o=P?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=P?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((x=P?.signInWithSolana)===null||x===void 0)&&x.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((b=P?.signInWithSolana)===null||b===void 0)&&b.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((C=P?.signInWithSolana)===null||C===void 0)&&C.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((w=P?.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((N=(A=P?.signInWithSolana)===null||A===void 0?void 0:A.resources)===null||N===void 0)&&N.length?["Resources",...P.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const Y=await K.signMessage(new TextEncoder().encode(I),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=Y}}try{const{data:D,error:H}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:Ki(k)},!((T=t.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Dr});if(H)throw H;if(!D||!D.session||!D.user){const U=new Po;return this._returnResult({data:{user:null,session:null},error:U})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:H})}catch(D){if(st(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async _exchangeCodeForSession(t){const r=await Hi(this.storage,`${this.storageKey}-code-verifier`),[o,d]=(r??"").split("/");try{const{data:h,error:x}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:o},xform:Dr});if(await ci(this.storage,`${this.storageKey}-code-verifier`),x)throw x;if(!h||!h.session||!h.user){const b=new Po;return this._returnResult({data:{user:null,session:null,redirectType:null},error:b})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:x})}catch(h){if(st(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(t){try{const{options:r,provider:o,token:d,access_token:h,nonce:x}=t,b=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:d,access_token:h,nonce:x,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Dr}),{data:C,error:w}=b;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!C||!C.session||!C.user){const A=new Po;return this._returnResult({data:{user:null,session:null},error:A})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:C,error:w})}catch(r){if(st(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,o,d,h,x;try{if("email"in t){const{email:b,options:C}=t;let w=null,A=null;this.flowType==="pkce"&&([w,A]=await zo(this.storage,this.storageKey));const{error:N}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:b,data:(r=C?.data)!==null&&r!==void 0?r:{},create_user:(o=C?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},code_challenge:w,code_challenge_method:A},redirectTo:C?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in t){const{phone:b,options:C}=t,{data:w,error:A}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:b,data:(d=C?.data)!==null&&d!==void 0?d:{},create_user:(h=C?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},channel:(x=C?.channel)!==null&&x!==void 0?x:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w?.message_id},error:A})}throw new Fu("You must provide either an email or phone number.")}catch(b){if(st(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async verifyOtp(t){var r,o;try{let d,h;"options"in t&&(d=(r=t.options)===null||r===void 0?void 0:r.redirectTo,h=(o=t.options)===null||o===void 0?void 0:o.captchaToken);const{data:x,error:b}=await ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:Dr});if(b)throw b;if(!x)throw new Error("An error occurred on token verification.");const C=x.session,w=x.user;return C?.access_token&&(await this._saveSession(C),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",C)),this._returnResult({data:{user:w,session:C},error:null})}catch(d){if(st(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(t){var r,o,d,h,x;try{let b=null,C=null;this.flowType==="pkce"&&([b,C]=await zo(this.storage,this.storageKey));const w=await ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((d=t?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:b,code_challenge_method:C}),headers:this.headers,xform:D3});return!((h=w.data)===null||h===void 0)&&h.url&&Cs()&&!(!((x=t.options)===null||x===void 0)&&x.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(b){if(st(b))return this._returnResult({data:null,error:b});throw b}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;if(o)throw o;if(!r)throw new rr;const{error:d}=await ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(t){if(st(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:o,type:d,options:h}=t,{error:x}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}else if("phone"in t){const{phone:o,type:d,options:h}=t,{data:x,error:b}=await ut(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:x?.message_id},error:b})}throw new Fu("You must provide either an email or phone number and a type")}catch(r){if(st(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Hi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const o=t.expires_at?t.expires_at*1e3-Date.now()<Ef:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",t.expires_at),!o){if(this.userStorage){const x=await Hi(this.userStorage,this.storageKey+"-user");x?.user?t.user=x.user:t.user=Tf()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const x={value:this.suppressGetSessionWarning};t.user=O3(t.user,x),x.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fi}):await this._useSession(async r=>{var o,d,h;const{data:x,error:b}=r;if(b)throw b;return!(!((o=x.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rr}:await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=x.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:fi})})}catch(r){if(st(r))return c3(r)&&(await this._removeSession(),await ci(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async o=>{const{data:d,error:h}=o;if(h)throw h;if(!d.session)throw new rr;const x=d.session;let b=null,C=null;this.flowType==="pkce"&&t.email!=null&&([b,C]=await zo(this.storage,this.storageKey));const{data:w,error:A}=await ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:b,code_challenge_method:C}),jwt:x.access_token,xform:fi});if(A)throw A;return x.user=w.user,await this._saveSession(x),await this._notifyAllSubscribers("USER_UPDATED",x),this._returnResult({data:{user:x.user},error:null})})}catch(o){if(st(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rr;const r=Date.now()/1e3;let o=r,d=!0,h=null;const{payload:x}=Nf(t.access_token);if(x.exp&&(o=x.exp,d=o<=r),d){const{data:b,error:C}=await this._callRefreshToken(t.refresh_token);if(C)return this._returnResult({data:{user:null,session:null},error:C});if(!b)return{data:{user:null,session:null},error:null};h=b}else{const{data:b,error:C}=await this._getUser(t.access_token);if(C)throw C;h={access_token:t.access_token,refresh_token:t.refresh_token,user:b.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(st(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var o;if(!t){const{data:x,error:b}=r;if(b)throw b;t=(o=x.session)!==null&&o!==void 0?o:void 0}if(!t?.refresh_token)throw new rr;const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(st(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Cs())throw new Hu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Hu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ex("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ex("No code detected.");const{data:U,error:P}=await this._exchangeCodeForSession(t.code);if(P)throw P;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:d,access_token:h,refresh_token:x,expires_in:b,expires_at:C,token_type:w}=t;if(!h||!b||!x||!w)throw new Hu("No session defined in URL");const A=Math.round(Date.now()/1e3),N=parseInt(b);let T=A+N;C&&(T=parseInt(C));const j=T-A;j*1e3<=Yo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${N}s`);const I=T-N;A-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,T,A):A-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,T,A);const{data:k,error:D}=await this._getUser(h);if(D)throw D;const H={provider_token:o,provider_refresh_token:d,access_token:h,expires_in:N,expires_at:T,refresh_token:x,token_type:w,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:t.type},error:null})}catch(o){if(st(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Hi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:d,error:h}=r;if(h)return this._returnResult({error:h});const x=(o=d.session)===null||o===void 0?void 0:o.access_token;if(x){const{error:b}=await this.admin.signOut(x,t);if(b&&!(l3(b)&&(b.status===404||b.status===401||b.status===403)))return this._returnResult({error:b})}return t!=="others"&&(await this._removeSession(),await ci(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=x3(),o={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(t){return await this._useSession(async r=>{var o,d;try{const{data:{session:h},error:x}=r;if(x)throw x;await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",t,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(t))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",h),console.error(h)}})}async resetPasswordForEmail(t,r={}){let o=null,d=null;this.flowType==="pkce"&&([o,d]=await zo(this.storage,this.storageKey,!0));try{return await ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(st(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var t;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:o,error:d}=await this._useSession(async h=>{var x,b,C,w,A;const{data:N,error:T}=h;if(T)throw T;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(x=t.options)===null||x===void 0?void 0:x.redirectTo,scopes:(b=t.options)===null||b===void 0?void 0:b.scopes,queryParams:(C=t.options)===null||C===void 0?void 0:C.queryParams,skipBrowserRedirect:!0});return await ut(this.fetch,"GET",j,{headers:this.headers,jwt:(A=(w=N.session)===null||w===void 0?void 0:w.access_token)!==null&&A!==void 0?A:void 0})});if(d)throw d;return Cs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:t.provider,url:o?.url},error:null})}catch(o){if(st(o))return this._returnResult({data:{provider:t.provider,url:null},error:o});throw o}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var o;try{const{error:d,data:{session:h}}=r;if(d)throw d;const{options:x,provider:b,token:C,access_token:w,nonce:A}=t,N=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=h?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:b,id_token:C,access_token:w,nonce:A,link_identity:!0,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Dr}),{data:T,error:j}=N;return j?this._returnResult({data:{user:null,session:null},error:j}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new Po}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:j}))}catch(d){if(st(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var o,d;const{data:h,error:x}=r;if(x)throw x;return await ut(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(d=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await v3(async d=>(d>0&&await b3(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Dr})),(d,h)=>{const x=200*Math.pow(2,d);return h&&Af(h)&&Date.now()+x-o<Yo})}catch(o){if(this._debug(r,"error",o),st(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",o),Cs()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:t,url:o},error:null}}async _recoverAndRefresh(){var t,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const d=await Hi(this.storage,this.storageKey);if(d&&this.userStorage){let x=await Hi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!x&&(x={user:d.user},await Xo(this.userStorage,this.storageKey+"-user",x)),d.user=(t=x?.user)!==null&&t!==void 0?t:Tf()}else if(d&&!d.user&&!d.user){const x=await Hi(this.storage,this.storageKey+"-user");x&&x?.user?(d.user=x.user,await ci(this.storage,this.storageKey+"-user"),await Xo(this.storage,this.storageKey,d)):d.user=Tf()}if(this._debug(o,"session from storage",d),!this._isValidSession(d)){this._debug(o,"session is not valid"),d!==null&&await this._removeSession();return}const h=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ef;if(this._debug(o,`session has${h?"":" not"} expired with margin of ${Ef}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:x}=await this._callRefreshToken(d.refresh_token);x&&(console.error(x),Af(x)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",x),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:x,error:b}=await this._getUser(d.access_token);!b&&x?.user?(d.user=x.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(x){console.error("Error getting user data:",x),this._debug(o,"error getting user data, skipping SIGNED_IN notification",x)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(o,"error",d),console.error(d);return}finally{this._debug(o,"end")}}async _callRefreshToken(t){var r,o;if(!t)throw new rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new dd;const{data:h,error:x}=await this._refreshAccessToken(t);if(x)throw x;if(!h.session)throw new rr;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const b={data:h.session,error:null};return this.refreshingDeferred.resolve(b),b}catch(h){if(this._debug(d,"error",h),st(h)){const x={data:null,error:h};return Af(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(x),x}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(t,r,o=!0){const d=`#_notifyAllSubscribers(${t})`;this._debug(d,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:t,session:r});const h=[],x=Array.from(this.stateChangeEmitters.values()).map(async b=>{try{await b.callback(t,r)}catch(C){h.push(C)}});if(await Promise.all(x),h.length>0){for(let b=0;b<h.length;b+=1)console.error(h[b]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await Xo(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const h=ax(d);await Xo(this.storage,this.storageKey,h)}else{const d=ax(r);await Xo(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await ci(this.storage,this.storageKey),await ci(this.storage,this.storageKey+"-code-verifier"),await ci(this.storage,this.storageKey+"-user"),this.userStorage&&await ci(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Cs()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Yo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((o.expires_at*1e3-t)/Yo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${Yo}ms, refresh threshold is ${S0} ticks`),d<=S0&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof M2)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Cs()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,o){const d=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&d.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[h,x]=await zo(this.storage,this.storageKey),b=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(x)}`});d.push(b.toString())}if(o?.queryParams){const h=new URLSearchParams(o.queryParams);d.push(h.toString())}return o?.skipBrowserRedirect&&d.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${t}?${d.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var o;const{data:d,error:h}=r;return h?this._returnResult({data:null,error:h}):await ut(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var o,d;const{data:h,error:x}=r;if(x)return this._returnResult({data:null,error:x});const b=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:C,error:w}=await ut(this.fetch,"POST",`${this.url}/factors`,{body:b,headers:this.headers,jwt:(o=h?.session)===null||o===void 0?void 0:o.access_token});return w?this._returnResult({data:null,error:w}):(t.factorType==="totp"&&C.type==="totp"&&(!((d=C?.totp)===null||d===void 0)&&d.qr_code)&&(C.totp.qr_code=`data:image/svg+xml;utf-8,${C.totp.qr_code}`),this._returnResult({data:C,error:null}))})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const x=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Z3(t.webauthn.credential_response):$3(t.webauthn.credential_response)})}:{code:t.code}),{data:b,error:C}=await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:x,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return C?this._returnResult({data:null,error:C}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+b.expires_in},b)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",b),this._returnResult({data:b,error:C}))})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const x=await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});if(x.error)return x;const{data:b}=x;if(b.type!=="webauthn")return{data:b,error:null};switch(b.webauthn.type){case"create":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:W3(b.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},b),{webauthn:Object.assign(Object.assign({},b.webauthn),{credential_options:Object.assign(Object.assign({},b.webauthn.credential_options),{publicKey:K3(b.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:o}=await this._challenge({factorId:t.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(t=r?.factors)!==null&&t!==void 0?t:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:o},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Nf(o.access_token);let x=null;h.aal&&(x=h.aal);let b=x;((r=(t=o.user.factors)===null||t===void 0?void 0:t.filter(A=>A.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(b="aal2");const w=h.amr||[];return{data:{currentLevel:x,nextLevel:b,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:o},error:d}=r;return d?this._returnResult({data:null,error:d}):o?await ut(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:o.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new rr})})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async o=>{const{data:{session:d},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new rr});const x=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:b=>({data:b,error:null})});return x.data&&x.data.redirect_url&&Cs()&&!r?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(o){if(st(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(t,r){try{return await this._useSession(async o=>{const{data:{session:d},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new rr});const x=await ut(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:b=>({data:b,error:null})});return x.data&&x.data.redirect_url&&Cs()&&!r?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(o){if(st(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?await ut(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new rr})})}catch(t){if(st(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:o},error:d}=r;return d?this._returnResult({data:null,error:d}):o?await ut(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new rr})})}catch(r){if(st(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let o=r.keys.find(b=>b.kid===t);if(o)return o;const d=Date.now();if(o=this.jwks.keys.find(b=>b.kid===t),o&&this.jwks_cached_at+i3>d)return o;const{data:h,error:x}=await ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(x)throw x;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,o=h.keys.find(b=>b.kid===t),!o)?null:o}async getClaims(t,r={}){try{let o=t;if(!o){const{data:j,error:I}=await this.getSession();if(I||!j.session)return this._returnResult({data:null,error:I});o=j.session.access_token}const{header:d,payload:h,signature:x,raw:{header:b,payload:C}}=Nf(o);r?.allowExpired||T3(h.exp);const w=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!w){const{error:j}=await this.getUser(o);if(j)throw j;return{data:{claims:h,header:d,signature:x},error:null}}const A=j3(d.alg),N=await crypto.subtle.importKey("jwk",w,A,!0,["verify"]);if(!await crypto.subtle.verify(A,N,x,m3(`${b}.${C}`)))throw new A0("Invalid JWT signature");return{data:{claims:h,header:d,signature:x},error:null}}catch(o){if(st(o))return this._returnResult({data:null,error:o});throw o}}}cc.nextInstanceID={};const o_=cc;class l_ extends o_{constructor(t){super(t)}}class c_{constructor(t,r,o){var d,h,x;this.supabaseUrl=t,this.supabaseKey=r;const b=t3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",b),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",b),this.storageUrl=new URL("storage/v1",b),this.functionsUrl=new URL("functions/v1",b);const C=`sb-${b.hostname.split(".")[0]}-auth-token`,w={db:XS,realtime:WS,auth:Object.assign(Object.assign({},QS),{storageKey:C}),global:YS},A=e3(o??{},w);this.storageKey=(d=A.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(h=A.global.headers)!==null&&h!==void 0?h:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(N,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((x=A.auth)!==null&&x!==void 0?x:{},this.headers,A.global.fetch),this.fetch=$S(r,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.accessToken&&this.accessToken().then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new nS(new URL("rest/v1",b).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new qS(this.storageUrl.href,this.headers,this.fetch,o?.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new $C(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,o)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(r=(t=o.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:o,storage:d,userStorage:h,storageKey:x,flowType:b,lock:C,debug:w,throwOnError:A},N,T){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l_({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),N),storageKey:x,autoRefreshToken:t,persistSession:r,detectSessionInUrl:o,storage:d,userStorage:h,flowType:b,lock:C,debug:w,throwOnError:A,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(I=>I.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new wS(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,o)=>{this._handleTokenChanged(r,"CLIENT",o?.access_token)})}_handleTokenChanged(t,r,o){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const u_=(a,t,r)=>new c_(a,t,r);function d_(){if(typeof window<"u"||typeof process>"u")return!1;const a=process.version;if(a==null)return!1;const t=a.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}d_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const h_="https://riekjnqllkrqkmqxmtfu.supabase.co",f_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpZWtqbnFsbGtycWttcXhtdGZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4ODc3MjQsImV4cCI6MjA3NzQ2MzcyNH0.heQABR_DZFWZ_UIb38Tzdgcy-5z5LSUob0icnqsiiQY",wt=u_(h_,f_,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"public"},realtime:{params:{eventsPerSecond:10},timeout:2e4,heartbeatIntervalMs:5e3}}),hx=a=>{if(!a)return null;const t=String(a).trim();if(t==="1"||t==="/1"||t==="null"||t==="undefined"||t==="")return null;const r=parseInt(t);if(!isNaN(r)&&r>=1&&r<=28){const d=[{id:1,path:"assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg"},{id:2,path:"assets/images/dp-options/1691130988954.jpg"},{id:3,path:"assets/images/dp-options/aesthetic-cartoon-funny-dp-for-instagram.webp"},{id:4,path:"assets/images/dp-options/boy-cartoon-dp-with-hoodie.webp"},{id:5,path:"assets/images/dp-options/download (1).jpg"},{id:6,path:"assets/images/dp-options/download.jpg"},{id:7,path:"assets/images/dp-options/funny-profile-picture-wd195eo9rpjy7ax1.jpg"},{id:8,path:"assets/images/dp-options/funny-whatsapp-dp-for-girls.webp"},{id:9,path:"assets/images/dp-options/photo_5230962651624575118_y.jpg"},{id:10,path:"assets/images/dp-options/photo_5230962651624575119_y.jpg"},{id:11,path:"assets/images/dp-options/photo_5230962651624575120_y.jpg"},{id:12,path:"assets/images/dp-options/photo_5230962651624575121_y.jpg"},{id:13,path:"assets/images/dp-options/photo_5230962651624575122_y.jpg"},{id:14,path:"assets/images/dp-options/photo_5230962651624575123_y.jpg"},{id:15,path:"assets/images/dp-options/photo_5230962651624575124_y.jpg"},{id:16,path:"assets/images/dp-options/photo_5230962651624575125_y.jpg"},{id:17,path:"assets/images/dp-options/photo_5230962651624575126_y.jpg"},{id:18,path:"assets/images/dp-options/photo_5230962651624575127_y.jpg"},{id:19,path:"assets/images/dp-options/photo_5235923888607267708_w.jpg"},{id:20,path:"assets/images/dp-options/photo_5235923888607267709_w.jpg"},{id:21,path:"assets/images/dp-options/photo_5235923888607267710_w.jpg"},{id:22,path:"assets/images/dp-options/photo_5235923888607267711_w.jpg"},{id:23,path:"assets/images/dp-options/photo_5235923888607267712_w.jpg"},{id:24,path:"assets/images/dp-options/photo_5235923888607267713_w.jpg"},{id:25,path:"assets/images/dp-options/photo_5235923888607267714_w.jpg"},{id:26,path:"assets/images/dp-options/photo_5235923888607267715_w.jpg"},{id:27,path:"assets/images/dp-options/photo_5235923888607267716_w.jpg"},{id:28,path:"assets/images/dp-options/photo_5235923888607267717_w.jpg"}].find(h=>h.id===r);return d?d.path:null}return t.startsWith("http")||t.startsWith("/assets/")||t.startsWith("assets/"),t},g_=({callData:a,onAccept:t,onReject:r,onClose:o})=>{const[d,h]=M.useState(null),[x,b]=M.useState(!0);M.useEffect(()=>{C()},[]);const C=async()=>{try{const{data:N,error:T}=await wt.from("users").select("*").eq("id",a.caller_id).single();if(T)throw T;h(N)}catch(N){console.error("Error loading caller info:",N)}},w=()=>{b(!1),t(a)},A=()=>{b(!1),r(a.id)};return d?l.jsx("div",{className:"incoming-call-overlay",children:l.jsxs("div",{className:"incoming-call",children:[l.jsxs("div",{className:"caller-info",children:[l.jsx("div",{className:"caller-avatar",children:l.jsx("div",{className:"avatar-circle-large",children:hx(d.avatar)?l.jsx("img",{src:hx(d.avatar),alt:d.name}):d.name.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2)})}),l.jsx("h3",{children:d.name}),l.jsx("p",{className:"call-type",children:a.call_type==="video"?" Video call":" Voice call"}),l.jsx("p",{className:"ringing-text",children:"is calling..."})]}),l.jsxs("div",{className:"call-actions",children:[l.jsxs("button",{className:"reject-btn",onClick:A,disabled:!x,children:[l.jsx("i",{className:"fas fa-phone-slash"}),l.jsx("span",{children:"Decline"})]}),l.jsxs("button",{className:"accept-btn",onClick:w,disabled:!x,children:[l.jsx("i",{className:"fas fa-phone"}),l.jsx("span",{children:"Accept"})]})]})]})}):l.jsx("div",{className:"incoming-call-overlay",children:l.jsx("div",{className:"incoming-call",children:l.jsx("p",{children:"Loading caller info..."})})})},m_=({text:a="Connecting..."})=>{const t={position:"fixed",top:0,left:0,right:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",gap:8,padding:"8px 12px",background:"rgba(25,118,210,0.95)",color:"#fff",fontSize:14,fontWeight:500,boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},r={width:8,height:8,borderRadius:4,background:"#fff",animation:"blink 1s infinite"};return l.jsxs("div",{style:t,children:["      ",l.jsx("style",{children:"@keyframes blink{0%{opacity:.2}50%{opacity:1}100%{opacity:.2}}"}),"      ",l.jsx("span",{style:r}),"      ",l.jsx("span",{children:a}),"    "]})},p_=a=>{M.useEffect(()=>{const t=async()=>{if(document.visibilityState==="visible"){console.log("App is back in foreground. Refreshing connection...");const{data:{session:r}}=await wt.auth.getSession();wt.removeAllChannels().then(()=>{a&&a(),console.log("Channels re-subscribed")})}};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[a])},L2=M.createContext(),x_=({children:a})=>{const[t,r]=M.useState(null),[o,d]=M.useState(null),[h,x]=M.useState(!0),[b,C]=M.useState(!1),[w,A]=M.useState(null),[N,T]=M.useState(null),[j,I]=M.useState(!1),[k,D]=M.useState(!1),[H,U]=M.useState(null);p_(()=>{t&&!N&&P()}),M.useEffect(()=>{(async()=>{const{data:{session:fe},error:ie}=await wt.auth.getSession();ie?console.error("Error getting session:",ie):(d(fe),r(fe?.user??null)),x(!1)})();const{data:{subscription:ue}}=wt.auth.onAuthStateChange(async(fe,ie)=>{if(console.log("Auth state changed:",fe,ie),d(ie),r(ie?.user??null),x(!1),ie?.user){const be={id:ie.user.id,name:ie.user.user_metadata?.name||"User",email:ie.user.email,phone:ie.user.user_metadata?.phone||"",avatar:ie.user.user_metadata?.avatar||null};localStorage.setItem("currentUser",JSON.stringify(be)),localStorage.setItem("authType","google")}else localStorage.removeItem("currentUser"),localStorage.removeItem("authType")});return()=>ue.unsubscribe()},[]),M.useEffect(()=>{const q=ue=>{if(ue.key==="currentUser"||ue.key==="authType"){const fe=localStorage.getItem("currentUser");if(fe)try{const ie=JSON.parse(fe);r(ie),C(!0)}catch(ie){console.error("Error parsing user data:",ie),r(null),C(!1)}else r(null),C(!1)}};return window.addEventListener("storage",q),()=>window.removeEventListener("storage",q)},[]),M.useEffect(()=>(t&&!N&&P(),()=>{N&&(wt.removeChannel(N),T(null))}),[t]);const P=()=>{console.log(" Setting up global incoming call listener for user:",t.id);const q=wt.channel("global-incoming-calls").on("postgres_changes",{event:"INSERT",schema:"public",table:"call_history",filter:`receiver_id=eq.${t.id}`},ue=>{console.log(" Global incoming call event received:",ue);const fe=ue.new;console.log(" Call data:",fe),fe.call_status==="initiated"&&(console.log(" Showing global incoming call popup for call:",fe.id),A(fe))}).subscribe(ue=>{console.log(" Global incoming call listener status:",ue),ue==="SUBSCRIBED"&&T(q)})},K=async q=>{console.log(" Accepting call:",q.id),A(null),window.location.href=`#/calls?incoming=true&callId=${q.call_id}&roomId=${q.call_id}&callType=${q.call_type}`},Z=async q=>{console.log(" Rejecting call:",q);try{window.WebRTCCall&&await new window.WebRTCCall().rejectCall(q)}catch(ue){console.error("Error rejecting call:",ue)}A(null)},$={supabase:wt,user:t,session:o,loading:h,signOut:()=>wt.auth.signOut(),isConnecting:j,lastResumeAt:H,validateSessionAndRefresh:async()=>{if(console.log("Starting validateSessionAndRefresh"),j){console.log("Already connecting, skipping");return}I(!0);try{const{data:{session:q},error:ue}=await wt.auth.getSession();ue&&console.warn("Session check error:",ue);let fe=q;console.log("Current session:",!!fe),console.log("Refreshing session on resume...");try{const{data:ie,error:be}=await wt.auth.refreshSession();be?console.error("Refresh session error:",be):(fe=ie?.session||fe,console.log("Session refreshed"))}catch(ie){console.error("Refresh session exception:",ie)}console.log("Disconnecting realtime...");try{await wt.realtime.disconnect()}catch(ie){console.log("Disconnect error:",ie)}console.log("Connecting realtime...");try{await wt.realtime.connect(),console.log("Realtime connected successfully")}catch(ie){console.log("Connect error:",ie)}try{const ie=wt.getChannels?wt.getChannels():[];console.log("Re-subscribing channels:",ie.length),ie.forEach(be=>{try{be.subscribe(),console.log("Re-subscribed channel:",be.topic)}catch(Re){console.log("Subscribe error:",Re)}})}catch(ie){console.log("Get channels error:",ie)}U(Date.now()),console.log("validateSessionAndRefresh completed")}finally{I(!1)}},ensureConnected:()=>j?(D(!0),setTimeout(()=>D(!1),1500),!1):!0};return l.jsxs(L2.Provider,{value:$,children:[a,(j||k)&&l.jsx(m_,{text:"Connecting..."}),w&&l.jsx(g_,{callData:w,onAccept:K,onReject:Z,onClose:()=>A(null)})]})},fs=()=>{const a=M.useContext(L2);if(!a)throw new Error("useSupabase must be used within a SupabaseProvider");return a},y_="modulepreload",w_=function(a,t){return new URL(a,t).href},fx={},hd=function(t,r,o){let d=Promise.resolve();if(r&&r.length>0){let w=function(A){return Promise.all(A.map(N=>Promise.resolve(N).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};const x=document.getElementsByTagName("link"),b=document.querySelector("meta[property=csp-nonce]"),C=b?.nonce||b?.getAttribute("nonce");d=w(r.map(A=>{if(A=w_(A,o),A in fx)return;fx[A]=!0;const N=A.endsWith(".css"),T=N?'[rel="stylesheet"]':"";if(o)for(let I=x.length-1;I>=0;I--){const k=x[I];if(k.href===A&&(!N||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${A}"]${T}`))return;const j=document.createElement("link");if(j.rel=N?"stylesheet":y_,N||(j.as="script"),j.crossOrigin="",j.href=A,C&&j.setAttribute("nonce",C),document.head.appendChild(j),N)return new Promise((I,k)=>{j.addEventListener("load",I),j.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${A}`)))})}))}function h(x){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=x,window.dispatchEvent(b),!b.defaultPrevented)throw x}return d.then(x=>{for(const b of x||[])b.status==="rejected"&&h(b.reason);return t().catch(h)})};var Jo;(function(a){a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE"})(Jo||(Jo={}));class Zo extends Error{constructor(t,r,o){super(t),this.message=t,this.code=r,this.data=o}}const b_=a=>{var t,r;return a?.androidBridge?"android":!((r=(t=a?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},v_=a=>{const t=a.CapacitorCustomPlatform||null,r=a.Capacitor||{},o=r.Plugins=r.Plugins||{},d=()=>t!==null?t.name:b_(a),h=()=>d()!=="web",x=N=>{const T=w.get(N);return!!(T?.platforms.has(d())||b(N))},b=N=>{var T;return(T=r.PluginHeaders)===null||T===void 0?void 0:T.find(j=>j.name===N)},C=N=>a.console.error(N),w=new Map,A=(N,T={})=>{const j=w.get(N);if(j)return console.warn(`Capacitor plugin "${N}" already registered. Cannot register plugins twice.`),j.proxy;const I=d(),k=b(N);let D;const H=async()=>(!D&&I in T?D=typeof T[I]=="function"?D=await T[I]():D=T[I]:t!==null&&!D&&"web"in T&&(D=typeof T.web=="function"?D=await T.web():D=T.web),D),U=($,q)=>{var ue,fe;if(k){const ie=k?.methods.find(be=>q===be.name);if(ie)return ie.rtype==="promise"?be=>r.nativePromise(N,q.toString(),be):(be,Re)=>r.nativeCallback(N,q.toString(),be,Re);if($)return(ue=$[q])===null||ue===void 0?void 0:ue.bind($)}else{if($)return(fe=$[q])===null||fe===void 0?void 0:fe.bind($);throw new Zo(`"${N}" plugin is not implemented on ${I}`,Jo.Unimplemented)}},P=$=>{let q;const ue=(...fe)=>{const ie=H().then(be=>{const Re=U(be,$);if(Re){const G=Re(...fe);return q=G?.remove,G}else throw new Zo(`"${N}.${$}()" is not implemented on ${I}`,Jo.Unimplemented)});return $==="addListener"&&(ie.remove=async()=>q()),ie};return ue.toString=()=>`${$.toString()}() { [capacitor code] }`,Object.defineProperty(ue,"name",{value:$,writable:!1,configurable:!1}),ue},K=P("addListener"),Z=P("removeListener"),Y=($,q)=>{const ue=K({eventName:$},q),fe=async()=>{const be=await ue;Z({eventName:$,callbackId:be},q)},ie=new Promise(be=>ue.then(()=>be({remove:fe})));return ie.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await fe()},ie},V=new Proxy({},{get($,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?Y:K;case"removeListener":return Z;default:return P(q)}}});return o[N]=V,w.set(N,{name:N,proxy:V,platforms:new Set([...Object.keys(T),...k?[I]:[]])}),V};return r.convertFileSrc||(r.convertFileSrc=N=>N),r.getPlatform=d,r.handleError=C,r.isNativePlatform=h,r.isPluginAvailable=x,r.registerPlugin=A,r.Exception=Zo,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},C_=a=>a.Capacitor=v_(a),pi=C_(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),eo=pi.registerPlugin;class fd{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let o=!1;this.listeners[t]||(this.listeners[t]=[],o=!0),this.listeners[t].push(r);const h=this.windowListeners[t];h&&!h.registered&&this.addWindowListener(h),o&&this.sendRetainedArgumentsForEvent(t);const x=async()=>this.removeListener(t,r);return Promise.resolve({remove:x})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,o){const d=this.listeners[t];if(!d){if(o){let h=this.retainedEventArguments[t];h||(h=[]),h.push(r),this.retainedEventArguments[t]=h}return}d.forEach(h=>h(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:o=>{this.notifyListeners(r,o)}}}unimplemented(t="not implemented"){return new pi.Exception(t,Jo.Unimplemented)}unavailable(t="not available"){return new pi.Exception(t,Jo.Unavailable)}async removeListener(t,r){const o=this.listeners[t];if(!o)return;const d=o.indexOf(r);this.listeners[t].splice(d,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(o=>{this.notifyListeners(t,o)}))}}const gx=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),mx=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class S_ extends fd{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(o=>{if(o.length<=0)return;let[d,h]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");d=mx(d).trim(),h=mx(h).trim(),r[d]=h}),r}async setCookie(t){try{const r=gx(t.key),o=gx(t.value),d=`; expires=${(t.expires||"").replace("expires=","")}`,h=(t.path||"/").replace("path=",""),x=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${o||""}${d}; path=${h}; ${x};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}eo("CapacitorCookies",{web:()=>new S_});const __=async a=>new Promise((t,r)=>{const o=new FileReader;o.onload=()=>{const d=o.result;t(d.indexOf(",")>=0?d.split(",")[1]:d)},o.onerror=d=>r(d),o.readAsDataURL(a)}),E_=(a={})=>{const t=Object.keys(a);return Object.keys(a).map(d=>d.toLocaleLowerCase()).reduce((d,h,x)=>(d[h]=a[t[x]],d),{})},A_=(a,t=!0)=>a?Object.entries(a).reduce((o,d)=>{const[h,x]=d;let b,C;return Array.isArray(x)?(C="",x.forEach(w=>{b=t?encodeURIComponent(w):w,C+=`${h}=${b}&`}),C.slice(0,-1)):(b=t?encodeURIComponent(x):x,C=`${h}=${b}`),`${o}&${C}`},"").substr(1):null,N_=(a,t={})=>{const r=Object.assign({method:a.method||"GET",headers:a.headers},t),d=E_(a.headers)["content-type"]||"";if(typeof a.data=="string")r.body=a.data;else if(d.includes("application/x-www-form-urlencoded")){const h=new URLSearchParams;for(const[x,b]of Object.entries(a.data||{}))h.set(x,b);r.body=h.toString()}else if(d.includes("multipart/form-data")||a.data instanceof FormData){const h=new FormData;if(a.data instanceof FormData)a.data.forEach((b,C)=>{h.append(C,b)});else for(const b of Object.keys(a.data))h.append(b,a.data[b]);r.body=h;const x=new Headers(r.headers);x.delete("content-type"),r.headers=x}else(d.includes("application/json")||typeof a.data=="object")&&(r.body=JSON.stringify(a.data));return r};class T_ extends fd{async request(t){const r=N_(t,t.webFetchExtra),o=A_(t.params,t.shouldEncodeUrlParams),d=o?`${t.url}?${o}`:t.url,h=await fetch(d,r),x=h.headers.get("content-type")||"";let{responseType:b="text"}=h.ok?t:{};x.includes("application/json")&&(b="json");let C,w;switch(b){case"arraybuffer":case"blob":w=await h.blob(),C=await __(w);break;case"json":C=await h.json();break;case"document":case"text":default:C=await h.text()}const A={};return h.headers.forEach((N,T)=>{A[T]=N}),{data:C,headers:A,status:h.status,url:h.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}eo("CapacitorHttp",{web:()=>new T_});var px;(function(a){a.Dark="DARK",a.Light="LIGHT",a.Default="DEFAULT"})(px||(px={}));var xx;(function(a){a.StatusBar="StatusBar",a.NavigationBar="NavigationBar"})(xx||(xx={}));class j_ extends fd{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}eo("SystemBars",{web:()=>new j_});const Rf=eo("GoogleAuth",{web:()=>hd(()=>import("./web-D4wShKdL.js"),[],import.meta.url).then(a=>new a.GoogleAuthWeb)}),B2=M.createContext({}),R_=({children:a})=>{const{supabase:t}=fs(),r=hs(),[o,d]=M.useState(null),[h,x]=M.useState(null),[b,C]=M.useState(!0),[w,A]=M.useState(!1);M.useEffect(()=>{if(!t)return;(async()=>{try{pi.isNativePlatform()&&await Rf.initialize({clientId:"335571630396-g270djndvqsj8p00kfgoq98995p1l3bm.apps.googleusercontent.com",scopes:["profile","email"],grantOfflineAccess:!0});const{data:{session:H}}=await t.auth.getSession();if(H?.user)await N(H.user);else{const P=sessionStorage.getItem("_auth_user");P&&(x(JSON.parse(P)),A(!0))}const{data:{subscription:U}}=t.auth.onAuthStateChange(async(P,K)=>{console.log(" Auth state changed:",P),P==="SIGNED_IN"&&K?.user?await N(K.user):P==="SIGNED_OUT"&&T()});return C(!1),()=>{U?.unsubscribe()}}catch(H){console.error("Auth context initialization error:",H),C(!1)}})()},[t]);const N=async D=>{try{const{data:H,error:U}=await t.from("users").select("*").eq("email",D.email).single();let P;const K=D.user_metadata?.full_name||D.user_metadata?.name||D.email.split("@")[0],Z=D.user_metadata?.avatar_url||null;if(U&&U.code==="PGRST116"){const{data:Y,error:V}=await t.from("users").insert([{id:D.id,email:D.email,name:K,phone:"",avatar:Z,is_online:!0}]).select().single();if(V)throw V;P=Y}else H&&(await t.from("users").update({is_online:!0,last_seen:new Date().toISOString()}).eq("id",H.id),P=H);sessionStorage.setItem("_auth_user",JSON.stringify(P||D)),x(P||D),A(!0),r("/",{replace:!0})}catch(H){console.error("Error handling user session:",H)}},T=()=>{sessionStorage.removeItem("_auth_user"),localStorage.removeItem("sb-riekjnqllkrqkmqxmtfu-auth-token"),x(null),A(!1),r("/login",{replace:!0})},k={user:h,loading:b,isAuthenticated:w,signInWithGoogle:async()=>{try{if(pi.isNativePlatform()){const D=await Rf.signIn(),{error:H}=await t.auth.signInWithIdToken({provider:"google",token:D.authentication.idToken});if(H)throw H;return{success:!0}}else{const D=window.location.origin+window.location.pathname;console.log("Redirecting to:",D);const{error:H}=await t.auth.signInWithOAuth({provider:"google",options:{redirectTo:D,queryParams:{access_type:"offline",prompt:"consent"}}});if(H)throw H;return{success:!0}}}catch(D){return console.error("Google Sign In Error:",D),{success:!1,error:D.message}}},signOut:async()=>{try{pi.isNativePlatform()&&await Rf.signOut(),await t.auth.signOut(),T()}catch(D){console.error("Sign out error:",D)}}};return l.jsx(B2.Provider,{value:k,children:!b&&a})},U2=()=>M.useContext(B2),$r=()=>U2();class O_{async createCall(t,r,o,d="video"){const{data:h,error:x}=await wt.from("call_history").insert({caller_id:t,receiver_id:r,call_id:o,call_type:d,call_status:"initiated",started_at:new Date().toISOString()}).select().single();if(x)throw x;return h}async updateCallStatus(t,r,o={}){const d={call_status:r,updated_at:new Date().toISOString(),...o};r==="answered"&&(d.answered_at=new Date().toISOString()),["ended","missed","rejected","failed"].includes(r)&&(d.ended_at=new Date().toISOString());const{data:h,error:x}=await wt.from("call_history").update(d).eq("call_id",t).select().single();if(x)throw x;return h}async endCall(t,r){const{data:o,error:d}=await wt.from("call_history").update({call_status:"ended",call_duration:r,ended_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("call_id",t).select().single();if(d)throw d;return o}async getCallHistory(t,r=50){const{data:o,error:d}=await wt.rpc("get_user_call_history",{user_id_param:t,limit_count:r});if(d)throw d;return o}async getMissedCallsCount(t){const{data:r,error:o}=await wt.rpc("get_missed_calls_count",{user_uuid:t});if(o)throw o;return r}async getCallById(t){const{data:r,error:o}=await wt.from("call_history").select("*").eq("call_id",t).single();if(o&&o.code!=="PGRST116")throw o;return r}async sendSignal(t,r,o,d,h){const{data:x,error:b}=await wt.from("call_signaling").insert({call_id:t,from_user_id:r,to_user_id:o,signal_type:d,signal_data:h,is_processed:!1}).select().single();if(b)throw b;return x}async getPendingSignals(t){const{data:r,error:o}=await wt.from("call_signaling").select("*").eq("to_user_id",t).eq("is_processed",!1).order("created_at",{ascending:!0});if(o)throw o;return r}async markSignalProcessed(t){const{error:r}=await wt.from("call_signaling").update({is_processed:!0}).eq("id",t);if(r)throw r}async deleteCallSignals(t){const{error:r}=await wt.from("call_signaling").delete().eq("call_id",t);if(r)throw r}subscribeToSignals(t,r){return wt.channel(`signals:${t}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"call_signaling",filter:`to_user_id=eq.${t}`},d=>{console.log(" New signal received:",d.new),r(d.new)}).subscribe()}subscribeToCallHistory(t,r){return wt.channel(`calls:${t}`).on("postgres_changes",{event:"*",schema:"public",table:"call_history",filter:`receiver_id=eq.${t}`},d=>{console.log(" Call update:",d),r(d)}).subscribe()}unsubscribe(t){t&&wt.removeChannel(t)}async getCallSettings(t){const{data:r,error:o}=await wt.from("user_call_settings").select("*").eq("user_id",t).single();if(o&&o.code!=="PGRST116")throw o;return r}async updateCallSettings(t,r){const{data:o,error:d}=await wt.from("user_call_settings").upsert({user_id:t,...r,updated_at:new Date().toISOString()}).select().single();if(d)throw d;return o}async getUserById(t){const{data:r,error:o}=await wt.from("users").select("id, name, phone, avatar").eq("id",t).single();if(o)throw o;return r}}const us=new O_;class I_{constructor(){this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.callId=null,this.currentUserId=null,this.remoteUserId=null,this.onRemoteStream=null,this.onCallEnd=null,this.onConnectionStateChange=null,this.iceCandidatesQueue=[],this.loadTurnConfig()}loadTurnConfig(){try{if(window.FREE_TURN_SERVERS){this.rtcConfig=window.FREE_TURN_SERVERS,console.log(" Loaded TURN servers from global config");return}this.rtcConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:a.relay.metered.ca:80",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"turn:a.relay.metered.ca:80?transport=tcp",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"turn:a.relay.metered.ca:443",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"turn:a.relay.metered.ca:443?transport=tcp",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"stun:global.stun.twilio.com:3478"},{urls:"stun:stun.services.mozilla.com"},{urls:"stun:stun.ekiga.net"}],iceCandidatePoolSize:10},console.log(" Loaded fallback TURN/STUN configuration")}catch(t){console.error(" Error loading TURN config:",t),this.rtcConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"}]}}}generateCallId(){return`call_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async getLocalStream(t=!0,r=!0){try{const o={audio:r?{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}:!1,video:t?{width:{ideal:1280},height:{ideal:720},facingMode:"user"}:!1};return this.localStream=await navigator.mediaDevices.getUserMedia(o),console.log(" Local stream acquired"),this.localStream}catch(o){throw console.error(" Error getting local stream:",o),o}}initializePeerConnection(){return this.peerConnection&&this.peerConnection.close(),this.peerConnection=new RTCPeerConnection(this.rtcConfig),this.remoteStream=new MediaStream,this.localStream&&this.localStream.getTracks().forEach(t=>{this.peerConnection.addTrack(t,this.localStream)}),this.peerConnection.ontrack=t=>{console.log(" Remote track received"),t.streams[0].getTracks().forEach(r=>{this.remoteStream.addTrack(r)}),this.onRemoteStream&&this.onRemoteStream(this.remoteStream)},this.peerConnection.onicecandidate=async t=>{t.candidate&&(console.log(" ICE candidate generated"),await this.sendIceCandidate(t.candidate))},this.peerConnection.onconnectionstatechange=()=>{console.log(" Connection state:",this.peerConnection.connectionState),this.onConnectionStateChange&&this.onConnectionStateChange(this.peerConnection.connectionState),["disconnected","failed","closed"].includes(this.peerConnection.connectionState)&&this.onCallEnd&&this.onCallEnd("connection_failed")},this.peerConnection.oniceconnectionstatechange=()=>{console.log(" ICE connection state:",this.peerConnection.iceConnectionState)},this.peerConnection}async startCall(t,r,o="video"){try{this.currentUserId=t,this.remoteUserId=r,this.callId=this.generateCallId(),console.log(" Starting call:",this.callId,"from:",t,"to:",r),await this.getLocalStream(o==="video",!0),this.initializePeerConnection(),await us.createCall(t,r,this.callId,o);const d=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:o==="video"});return await this.peerConnection.setLocalDescription(d),await us.sendSignal(this.callId,t,r,"offer",{sdp:d.sdp,type:d.type,callType:o}),console.log(" Offer sent for call:",this.callId),{callId:this.callId,localStream:this.localStream}}catch(d){throw console.error(" Error starting call:",d),this.cleanup(),d}}async answerCall(t,r,o,d){try{this.callId=t,this.currentUserId=o,this.remoteUserId=r,console.log(" Answering call:",t,"from:",r,"to:",o);const h=d.callType||"video";await this.getLocalStream(h==="video",!0),this.initializePeerConnection(),await this.peerConnection.setRemoteDescription(new RTCSessionDescription({type:d.type,sdp:d.sdp})),await this.processQueuedIceCandidates();const x=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(x),await us.sendSignal(t,o,r,"answer",{sdp:x.sdp,type:x.type}),await us.updateCallStatus(t,"answered"),console.log(" Answer sent for call:",t),{localStream:this.localStream,remoteStream:this.remoteStream}}catch(h){throw console.error(" Error answering call:",h),this.cleanup(),h}}async handleAnswer(t){try{if(!this.peerConnection){console.error("No peer connection");return}console.log(" Processing answer"),await this.peerConnection.setRemoteDescription(new RTCSessionDescription({type:t.type,sdp:t.sdp})),await this.processQueuedIceCandidates(),await us.updateCallStatus(this.callId,"answered")}catch(r){throw console.error(" Error handling answer:",r),r}}async sendIceCandidate(t){try{await us.sendSignal(this.callId,this.currentUserId,this.remoteUserId,"ice_candidate",{candidate:t.candidate,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex})}catch(r){console.error(" Error sending ICE candidate:",r)}}async handleIceCandidate(t){try{const r=new RTCIceCandidate({candidate:t.candidate,sdpMid:t.sdpMid,sdpMLineIndex:t.sdpMLineIndex});this.peerConnection&&this.peerConnection.remoteDescription?(await this.peerConnection.addIceCandidate(r),console.log(" ICE candidate added")):(this.iceCandidatesQueue.push(r),console.log(" ICE candidate queued"))}catch(r){console.error(" Error handling ICE candidate:",r)}}async processQueuedIceCandidates(){for(;this.iceCandidatesQueue.length>0;){const t=this.iceCandidatesQueue.shift();try{await this.peerConnection.addIceCandidate(t),console.log(" Queued ICE candidate added")}catch(r){console.error(" Error adding queued candidate:",r)}}}async rejectCall(t,r,o){try{await us.sendSignal(t,r,o,"call_end",{reason:"rejected"}),await us.updateCallStatus(t,"rejected")}catch(d){console.error(" Error rejecting call:",d)}}async endCall(t=0){try{this.callId&&this.remoteUserId&&(await us.sendSignal(this.callId,this.currentUserId,this.remoteUserId,"call_end",{reason:"ended",duration:t}),await us.endCall(this.callId,t)),this.cleanup()}catch(r){console.error(" Error ending call:",r),this.cleanup()}}toggleMicrophone(){if(this.localStream){const t=this.localStream.getAudioTracks()[0];if(t)return t.enabled=!t.enabled,t.enabled}return!1}toggleCamera(){if(this.localStream){const t=this.localStream.getVideoTracks()[0];if(t)return t.enabled=!t.enabled,t.enabled}return!1}async switchCamera(){if(this.localStream){const t=this.localStream.getVideoTracks()[0];if(t){const o=t.getSettings().facingMode==="user"?"environment":"user";try{const h=(await navigator.mediaDevices.getUserMedia({video:{facingMode:o}})).getVideoTracks()[0],x=this.peerConnection?.getSenders().find(b=>b.track?.kind==="video");return x&&await x.replaceTrack(h),t.stop(),this.localStream.removeTrack(t),this.localStream.addTrack(h),this.localStream}catch(d){console.error(" Error switching camera:",d)}}}return null}cleanup(){console.log(" Cleaning up WebRTC resources"),this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.remoteStream=null,this.callId=null,this.remoteUserId=null,this.iceCandidatesQueue=[]}async handleSignal(t){const{signal_type:r,signal_data:o,call_id:d,from_user_id:h}=t;if(console.log(" Handling signal:",r,"for call:",d),d&&this.callId&&d!==this.callId){console.log(" Ignoring signal for different call:",d,"current:",this.callId);return}switch(r){case"offer":return{type:"incoming_call",data:t};case"answer":console.log(" Processing answer for call:",d),await this.handleAnswer(o);break;case"ice_candidate":console.log(" Processing ICE candidate"),await this.handleIceCandidate(o);break;case"call_end":console.log(" Call ended with reason:",o.reason),this.onCallEnd&&this.onCallEnd(o.reason),this.cleanup();break;case"busy":this.onCallEnd&&this.onCallEnd("busy"),this.cleanup();break;case"ringing":console.log(" Ringing signal received");break;default:console.warn("Unknown signal type:",r)}}}const Cr=new I_,P2=M.createContext(null),Pt={SET_CALL_STATE:"SET_CALL_STATE",SET_LOCAL_STREAM:"SET_LOCAL_STREAM",SET_REMOTE_STREAM:"SET_REMOTE_STREAM",SET_INCOMING_CALL:"SET_INCOMING_CALL",SET_CALL_DURATION:"SET_CALL_DURATION",TOGGLE_MUTE:"TOGGLE_MUTE",TOGGLE_VIDEO:"TOGGLE_VIDEO",TOGGLE_SPEAKER:"TOGGLE_SPEAKER",RESET_CALL:"RESET_CALL",SET_ERROR:"SET_ERROR",SET_CALLER_INFO:"SET_CALLER_INFO"},z2={callState:"idle",callType:null,callId:null,localStream:null,remoteStream:null,incomingCall:null,callerInfo:null,receiverInfo:null,isMuted:!1,isVideoOff:!1,isSpeakerOn:!0,callDuration:0,error:null};function M_(a,t){switch(t.type){case Pt.SET_CALL_STATE:return{...a,callState:t.payload.state,...t.payload.data};case Pt.SET_LOCAL_STREAM:return{...a,localStream:t.payload};case Pt.SET_REMOTE_STREAM:return{...a,remoteStream:t.payload};case Pt.SET_INCOMING_CALL:return{...a,incomingCall:t.payload,callState:"ringing"};case Pt.SET_CALL_DURATION:return{...a,callDuration:t.payload};case Pt.TOGGLE_MUTE:return{...a,isMuted:t.payload};case Pt.TOGGLE_VIDEO:return{...a,isVideoOff:t.payload};case Pt.TOGGLE_SPEAKER:return{...a,isSpeakerOn:t.payload};case Pt.SET_CALLER_INFO:return{...a,callerInfo:t.payload};case Pt.SET_ERROR:return{...a,error:t.payload};case Pt.RESET_CALL:return{...z2};default:return a}}function k_({children:a,currentUser:t}){const[r,o]=M.useReducer(M_,z2),d=M.useRef(null),h=M.useRef(null),x=M.useRef(null),b=M.useCallback(()=>{x.current=Date.now(),h.current=setInterval(()=>{const U=Math.floor((Date.now()-x.current)/1e3);o({type:Pt.SET_CALL_DURATION,payload:U})},1e3)},[]),C=M.useCallback(()=>{h.current&&(clearInterval(h.current),h.current=null)},[]),w=M.useCallback(async U=>{if(console.log(" Signal received in context:",U.signal_type,"Call ID:",U.call_id),U.signal_type==="offer")try{const P=await us.getUserById(U.from_user_id);o({type:Pt.SET_INCOMING_CALL,payload:{...U,callerInfo:P}}),o({type:Pt.SET_CALLER_INFO,payload:P})}catch(P){console.error("Error fetching caller info:",P)}else try{const P=await Cr.handleSignal(U);await us.markSignalProcessed(U.id),U.signal_type==="answer"&&Cr.callId===U.call_id&&console.log(" Answer received, call should connect now")}catch(P){console.error("Error handling signal:",P)}},[]);M.useEffect(()=>{Cr.onRemoteStream=U=>{console.log(" Remote stream received in context"),o({type:Pt.SET_REMOTE_STREAM,payload:U})},Cr.onCallEnd=U=>{console.log(" Call ended:",U),C(),o({type:Pt.RESET_CALL})},Cr.onConnectionStateChange=U=>{U==="connected"&&(b(),o({type:Pt.SET_CALL_STATE,payload:{state:"connected"}}))}},[b,C]),M.useEffect(()=>{if(t?.id){if(t.id.startsWith("phone_")){console.log(" Skipping signal subscription for phone user:",t.id);return}return console.log(" Setting up signal subscription for:",t.id),d.current=us.subscribeToSignals(t.id,w),()=>{d.current&&us.unsubscribe(d.current)}}},[t?.id,w]);const A=M.useCallback(async(U,P="video")=>{try{o({type:Pt.SET_CALL_STATE,payload:{state:"calling",data:{callType:P}}});const K=await us.getUserById(U);o({type:Pt.SET_CALL_STATE,payload:{state:"calling",data:{receiverInfo:K}}});const{callId:Z,localStream:Y}=await Cr.startCall(t.id,U,P);return o({type:Pt.SET_LOCAL_STREAM,payload:Y}),o({type:Pt.SET_CALL_STATE,payload:{state:"calling",data:{callId:Z}}}),{callId:Z,localStream:Y}}catch(K){throw console.error(" Error starting call:",K),o({type:Pt.SET_ERROR,payload:K.message}),o({type:Pt.RESET_CALL}),K}},[t?.id]),N=M.useCallback(async()=>{try{const{incomingCall:U}=r;if(!U)throw new Error("No incoming call to answer");o({type:Pt.SET_CALL_STATE,payload:{state:"connecting"}});const{localStream:P,remoteStream:K}=await Cr.answerCall(U.call_id,U.from_user_id,t.id,U.signal_data);o({type:Pt.SET_LOCAL_STREAM,payload:P}),o({type:Pt.SET_REMOTE_STREAM,payload:K}),o({type:Pt.SET_CALL_STATE,payload:{state:"connected",data:{callId:U.call_id,callType:U.signal_data.callType}}}),await us.markSignalProcessed(U.id),b()}catch(U){throw console.error(" Error answering call:",U),o({type:Pt.SET_ERROR,payload:U.message}),o({type:Pt.RESET_CALL}),U}},[r,t?.id,b]),T=M.useCallback(async()=>{try{const{incomingCall:U}=r;U&&(await Cr.rejectCall(U.call_id,t.id,U.from_user_id),await us.markSignalProcessed(U.id)),o({type:Pt.RESET_CALL})}catch(U){console.error(" Error rejecting call:",U),o({type:Pt.RESET_CALL})}},[r,t?.id]),j=M.useCallback(async()=>{try{C(),await Cr.endCall(r.callDuration),o({type:Pt.RESET_CALL})}catch(U){console.error(" Error ending call:",U),o({type:Pt.RESET_CALL})}},[r.callDuration,C]),I=M.useCallback(()=>{const U=!Cr.toggleMicrophone();return o({type:Pt.TOGGLE_MUTE,payload:U}),U},[]),k=M.useCallback(()=>{const U=!Cr.toggleCamera();return o({type:Pt.TOGGLE_VIDEO,payload:U}),U},[]),D=M.useCallback(async()=>{const U=await Cr.switchCamera();U&&o({type:Pt.SET_LOCAL_STREAM,payload:U})},[]),H={...r,startCall:A,answerCall:N,rejectCall:T,endCall:j,toggleMute:I,toggleVideo:k,switchCamera:D};return l.jsx(P2.Provider,{value:H,children:a})}function yi(){const a=M.useContext(P2);if(!a)throw new Error("useCall must be used within a CallProvider");return a}const D_=()=>{const{signInWithGoogle:a}=U2(),[t,r]=M.useState(!1),[o,d]=M.useState(""),[h,x]=M.useState(!1);M.useEffect(()=>{x(!0)},[]);const b=async()=>{try{r(!0),d("");const C=await a();C.success||d(C.error||"Google sign in failed")}catch{d("An error occurred. Please try again.")}finally{r(!1)}};return l.jsxs("div",{className:"auth-page login-page",children:[l.jsxs("div",{className:`auth-container ${h?"visible":""}`,children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Welcome Back"}),l.jsx("p",{children:"Sign in to continue your conversations"})]}),l.jsxs("div",{className:"auth-form",children:[o&&l.jsx("div",{className:"error-message animate-shake",children:o}),l.jsxs("button",{type:"button",className:`btn btn-google ${t?"loading":""}`,onClick:b,disabled:t,children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"spinner"}),"Signing in..."]}):"Continue with Google"]})]})]}),l.jsx("style",{children:`
        @keyframes bounce {
          0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
          40% { transform: translateY(-10px); }
          60% { transform: translateY(-5px); }
        }

        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.05); }
          100% { transform: scale(1); }
        }

        .auth-container.visible {
          animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(50px) scale(0.9);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }

        .btn-google.loading {
          position: relative;
          overflow: hidden;
        }

        .btn-google.loading::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
          animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
          0% { left: -100%; }
          100% { left: 100%; }
        }
      `})]})},L_=()=>{const{signUpWithGoogle:a}=$r(),[t,r]=M.useState(!1),[o,d]=M.useState(""),h=async()=>{try{r(!0),d("");const x=await a();x.success||d(x.error||"Google sign up failed")}catch{d("An error occurred. Please try again.")}finally{r(!1)}};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-container",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("h1",{children:"Create Account"}),l.jsx("p",{children:"Join CaBa messaging platform"})]}),l.jsxs("div",{className:"auth-form",children:[o&&l.jsx("div",{className:"error-message",children:o}),l.jsxs("button",{type:"button",className:"btn btn-google",onClick:h,disabled:t,children:[l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t?"Signing up...":"Sign up with Google"]}),l.jsx("div",{className:"auth-footer",children:l.jsxs("p",{children:["Already have an account? ",l.jsx(fc,{to:"/login",children:"Login"})]})})]})]})})},B_=()=>{const{supabase:a}=fs(),[t,r]=M.useState(""),[o,d]=M.useState(!1),[h,x]=M.useState({text:"",type:""}),b=T=>T?T.startsWith("+")?T:"+"+T.replace(/\D/g,""):"",C=T=>T?/^(\+)?\d{1,15}$/.test(T):!1,w=async T=>{try{const j=T.startsWith("+")?T.substring(1):T,{data:I,error:k}=await a.from("users").select("*").eq("phone",j).single();return k?(console.error("Error getting user by phone:",k),null):I||null}catch(j){return console.error("Error in getUserByPhone:",j),null}},A=T=>{if(!T)return"";const[j,I]=T.split("@");return j.length<=2?T:j[0]+"*".repeat(j.length-2)+j[j.length-1]+"@"+I},N=async T=>{T.preventDefault();const j=b(t.trim());if(!C(j)){x({text:"Invalid phone number",type:"error"});return}d(!0),x({text:"",type:""});try{const I=await w(j);if(!I){x({text:"Phone number not registered",type:"error"}),d(!1);return}if(!I.email){x({text:"No email found. Please contact support.",type:"error"}),d(!1);return}const{error:k}=await a.auth.resetPasswordForEmail(I.email,{redirectTo:`${window.location.origin}/CaBa/reset-password`});if(k)throw k;x({text:` Password reset link sent to ${A(I.email)}. Check your email inbox!`,type:"success"}),r("")}catch(I){console.error("Forgot password error:",I),x({text:I.message,type:"error"})}finally{d(!1)}};return l.jsx("div",{className:"container",children:l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"logo",children:[l.jsx("div",{className:"logo-icon",children:"lock"}),l.jsx("h1",{children:"DigiDad"})]}),l.jsx("h2",{children:"Forgot Password"}),l.jsx("p",{className:"subtitle",children:"Enter your phone number"}),l.jsxs("form",{id:"forgotPasswordForm",onSubmit:N,children:[l.jsxs("div",{className:"input-group",children:[l.jsxs("label",{htmlFor:"phone",children:[l.jsx("span",{className:"icon",children:"phone"}),"Phone Number"]}),l.jsx("input",{type:"tel",id:"phone",placeholder:"+911234567890",required:!0,autoComplete:"tel",value:t,onChange:T=>r(T.target.value)}),l.jsx("small",{children:"We'll send a reset link to your registered email"})]}),l.jsx("button",{type:"submit",id:"submitBtn",className:"btn-primary",disabled:o,children:o?"Sending...":"Send Reset Link"}),l.jsx("div",{id:"message",className:"message",style:{display:h.text?"block":"none"},children:h.text})]}),l.jsx("div",{className:"footer",children:l.jsx(fc,{to:"/login",children:" Back to Login"})})]})})},U_=()=>{const{supabase:a}=fs(),t=hs(),[r,o]=M.useState(""),[d,h]=M.useState(""),[x,b]=M.useState(!1),[C,w]=M.useState({text:"",type:""}),[A,N]=M.useState(!1);M.useEffect(()=>{const I=window.location.hash,D=new URLSearchParams(window.location.search).get("recovery");console.log("ResetPassword: Current hash:",I),console.log("ResetPassword: Recovery param:",D);let H,U="";if(I&&I.includes("access_token")?(H=new URLSearchParams(I.substring(1)),U="hash"):D&&(H=new URLSearchParams(decodeURIComponent(D)),U="query"),H){const P=H.get("access_token"),K=H.get("refresh_token"),Z=H.get("type");console.log(`ResetPassword: Extracted params from ${U}:`,{accessToken:!!P,refreshToken:!!K,type:Z}),Z==="recovery"&&P&&K?(console.log("ResetPassword: Setting recovery session..."),a.auth.setSession({access_token:P,refresh_token:K}).then(({data:Y,error:V})=>{V?(console.error("Error setting recovery session:",V),w({text:"Invalid or expired reset link",type:"error"})):(console.log("Recovery session set successfully"),N(!0),w({text:"Please enter your new password",type:"success"}),window.history.replaceState(null,"",window.location.pathname))})):(console.log("ResetPassword: Invalid recovery parameters"),w({text:"Invalid reset link. Please request a new password reset.",type:"error"}))}else console.log("ResetPassword: No recovery parameters found"),w({text:"Invalid reset link. Please request a new password reset.",type:"error"})},[a.auth]);const T=async I=>{if(I.preventDefault(),r.length<6){w({text:"Password must be at least 6 characters",type:"error"});return}if(r!==d){w({text:"Passwords do not match",type:"error"});return}b(!0),w({text:"",type:""});try{const{error:k}=await a.auth.updateUser({password:r});if(k)throw k;w({text:"Password updated successfully! Redirecting to login...",type:"success"}),setTimeout(async()=>{await a.auth.signOut(),t("/login")},2e3)}catch(k){console.error("Error updating password:",k),w({text:k.message||"Failed to update password. Please try again.",type:"error"})}finally{b(!1)}},j=I=>{const k=document.getElementById(I),D=k.nextElementSibling;k.type==="password"?(k.type="text",D&&(D.querySelector(".eye-icon i").className="fas fa-eye-slash")):(k.type="password",D&&(D.querySelector(".eye-icon i").className="fas fa-eye"))};return l.jsx("div",{className:"auth-page",children:l.jsxs("div",{className:"auth-container",children:[l.jsxs("div",{className:"auth-header",children:[l.jsx("div",{className:"app-logo",children:l.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",children:[l.jsx("circle",{cx:"40",cy:"40",r:"35",fill:"var(--primary-color)"}),l.jsx("text",{x:"40",y:"52",fontSize:"35",fill:"white",textAnchor:"middle",fontWeight:"bold",children:"DD"})]})}),l.jsx("h1",{className:"app-name",children:"DigiDad"}),l.jsx("p",{className:"app-tagline",children:"Reset your password"})]}),l.jsxs("form",{id:"resetPasswordForm",className:"auth-form",onSubmit:T,children:[l.jsx("h2",{children:"Reset Password"}),l.jsx("p",{className:"form-subtitle",children:"Enter your new password"}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"password",children:"New Password"}),l.jsxs("div",{className:"password-input",children:[l.jsx("input",{type:"password",id:"password",placeholder:"Enter new password",required:!0,minLength:"6",value:r,onChange:I=>o(I.target.value),disabled:!A}),l.jsx("button",{type:"button",className:"toggle-password",onClick:()=>j("password"),disabled:!A,children:l.jsx("span",{className:"eye-icon",children:l.jsx("i",{className:"fas fa-eye"})})})]}),l.jsx("small",{className:"input-hint",children:"At least 6 characters"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),l.jsxs("div",{className:"password-input",children:[l.jsx("input",{type:"password",id:"confirmPassword",placeholder:"Confirm new password",required:!0,minLength:"6",value:d,onChange:I=>h(I.target.value),disabled:!A}),l.jsx("button",{type:"button",className:"toggle-password",onClick:()=>j("confirmPassword"),disabled:!A,children:l.jsx("span",{className:"eye-icon",children:l.jsx("i",{className:"fas fa-eye"})})})]})]}),l.jsxs("button",{type:"submit",className:"btn-primary",disabled:x||!A,children:[l.jsx("span",{className:"btn-text",children:x?"Updating...":"Update Password"}),x&&l.jsx("span",{className:"btn-loader",style:{display:"inline-block"},children:l.jsx("div",{className:"spinner"})})]}),l.jsx("div",{id:"message",className:"message",style:{display:C.text?"block":"none"},children:C.text})]}),l.jsxs("div",{className:"auth-switch",children:["Remember your password? ",l.jsx(fc,{to:"/login",children:"Login"})]})]})})},Vo={classic_purple:{name:"Classic Purple",category:"Default",background:`
      radial-gradient(circle at 25% 75%, rgba(139, 92, 246, 0.15) 0%, transparent 60%),
      radial-gradient(circle at 75% 25%, rgba(168, 85, 247, 0.12) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(124, 58, 237, 0.08) 0%, transparent 70%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #8b5cf6 0%, #7c3aed 50%, #6d28d9 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)",text:"#f8fafc"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%)",text:"#0f172a"},header:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#f1f5f9"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",text:"#1e293b",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#ffffff"}},electric_dreams:{name:"Electric Dreams",category:"Futuristic",background:`
      radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.2) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.25) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.15) 0%, transparent 60%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0c4a6e 0%, #1e40af 50%, #581c87 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)",text:"#f0f9ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e"},header:{background:"linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)",text:"#ffffff",iconColor:"#f0f9ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",iconColor:"#0ea5e9"},buttons:{background:"linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)",text:"#ffffff",iconColor:"#ffffff"}},dark_professional:{name:"Dark Professional",category:"Dark",background:`
      radial-gradient(circle at 30% 70%, rgba(15, 23, 42, 0.4) 0%, transparent 60%),
      radial-gradient(circle at 70% 30%, rgba(30, 41, 59, 0.3) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(51, 65, 85, 0.2) 0%, transparent 70%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0f172a 0%, #1e293b 50%, #334155 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #475569 0%, #64748b 100%)",text:"#f8fafc"},receivedMessage:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",text:"#e2e8f0"},header:{background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",text:"#ffffff",iconColor:"#e2e8f0"},input:{background:"linear-gradient(135deg, #334155 0%, #475569 100%)",text:"#f8fafc",iconColor:"#94a3b8"},buttons:{background:"linear-gradient(135deg, #475569 0%, #64748b 100%)",text:"#f8fafc",iconColor:"#f8fafc"}},ocean_depths:{name:"Ocean Depths",category:"Nature",background:`
      radial-gradient(circle at 25% 75%, rgba(14, 165, 233, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(2, 132, 199, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(6, 182, 212, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0c4a6e 0%, #075985 50%, #0369a1 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0284c7 0%, #0369a1 100%)",text:"#f0f9ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e"},header:{background:"linear-gradient(135deg, #0c4a6e 0%, #075985 100%)",text:"#ffffff",iconColor:"#f0f9ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",iconColor:"#0284c7"},buttons:{background:"linear-gradient(135deg, #0c4a6e 0%, #075985 100%)",text:"#ffffff",iconColor:"#ffffff"}},forest_mist:{name:"Forest Mist",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(34, 197, 94, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(22, 163, 74, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 60% 40%, rgba(74, 222, 128, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #14532d 0%, #166534 50%, #15803d 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #16a34a 0%, #15803d 100%)",text:"#f0fdf4"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d"},header:{background:"linear-gradient(135deg, #14532d 0%, #166534 100%)",text:"#ffffff",iconColor:"#f0fdf4"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d",iconColor:"#16a34a"},buttons:{background:"linear-gradient(135deg, #14532d 0%, #166534 100%)",text:"#ffffff",iconColor:"#ffffff"}},sunset_glow:{name:"Sunset Glow",category:"Colorful",background:`
      radial-gradient(circle at 25% 75%, rgba(251, 146, 60, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(234, 88, 12, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(249, 115, 22, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #c2410c 0%, #ea580c 50%, #f97316 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #ea580c 0%, #dc2626 100%)",text:"#fff7ed"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412"},header:{background:"linear-gradient(135deg, #c2410c 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#fff7ed"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412",iconColor:"#ea580c"},buttons:{background:"linear-gradient(135deg, #c2410c 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#ffffff"}},cosmic_purple:{name:"Cosmic Purple",category:"Elegant",background:`
      radial-gradient(circle at 30% 70%, rgba(147, 51, 234, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(124, 58, 237, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #581c87 0%, #6b21a8 50%, #7c3aed 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #7c3aed 0%, #6b21a8 100%)",text:"#f3e8ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87"},header:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#f3e8ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#ffffff"}},golden_hour:{name:"Golden Hour",category:"Colorful",background:`
      radial-gradient(circle at 20% 80%, rgba(245, 158, 11, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(217, 119, 6, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(251, 191, 36, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #92400e 0%, #b45309 50%, #d97706 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #d97706 0%, #b45309 100%)",text:"#fffbeb"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#92400e"},header:{background:"linear-gradient(135deg, #92400e 0%, #b45309 100%)",text:"#ffffff",iconColor:"#fffbeb"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#92400e",iconColor:"#d97706"},buttons:{background:"linear-gradient(135deg, #92400e 0%, #b45309 100%)",text:"#ffffff",iconColor:"#ffffff"}},midnight_city:{name:"Midnight City",category:"Dark",background:`
      radial-gradient(circle at 30% 70%, rgba(30, 27, 75, 0.25) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(49, 46, 129, 0.30) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(79, 70, 229, 0.15) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0f0f23 0%, #1e1b4b 50%, #312e81 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #4338ca 0%, #3730a3 100%)",text:"#e0e7ff"},receivedMessage:{background:"linear-gradient(135deg, #1e1b4b 0%, #312e81 100%)",text:"#c7d2fe"},header:{background:"linear-gradient(135deg, #0f0f23 0%, #1e1b4b 100%)",text:"#ffffff",iconColor:"#e0e7ff"},input:{background:"linear-gradient(135deg, #312e81 0%, #4338ca 100%)",text:"#e0e7ff",iconColor:"#a5b4fc"},buttons:{background:"linear-gradient(135deg, #4338ca 0%, #3730a3 100%)",text:"#e0e7ff",iconColor:"#e0e7ff"}},rose_garden:{name:"Rose Garden",category:"Colorful",background:`
      radial-gradient(circle at 25% 75%, rgba(244, 63, 94, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(219, 39, 119, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(236, 72, 153, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #be185d 0%, #db2777 50%, #ec4899 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #db2777 0%, #be185d 100%)",text:"#fdf2f8"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#be185d"},header:{background:"linear-gradient(135deg, #be185d 0%, #db2777 100%)",text:"#ffffff",iconColor:"#fdf2f8"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#be185d",iconColor:"#ec4899"},buttons:{background:"linear-gradient(135deg, #be185d 0%, #db2777 100%)",text:"#ffffff",iconColor:"#ffffff"}},emerald_forest:{name:"Emerald Forest",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.14) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(5, 150, 105, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(52, 211, 153, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #047857 0%, #059669 50%, #10b981 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",text:"#ecfdf5"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #ecfdf5 100%)",text:"#14532d"},header:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ecfdf5"},input:{background:"linear-gradient(135deg, #ffffff 0%, #ecfdf5 100%)",text:"#14532d",iconColor:"#10b981"},buttons:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff"}},nebula:{name:"Nebula",category:"Elegant",background:`
      radial-gradient(circle at 30% 70%, rgba(236, 72, 153, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(139, 92, 246, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #831843 0%, #a21caf 50%, #7c3aed 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #a21caf 0%, #7c3aed 100%)",text:"#fdf2f8"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#831843"},header:{background:"linear-gradient(135deg, #831843 0%, #a21caf 100%)",text:"#ffffff",iconColor:"#fdf2f8"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#831843",iconColor:"#ec4899"},buttons:{background:"linear-gradient(135deg, #831843 0%, #a21caf 100%)",text:"#ffffff",iconColor:"#ffffff"}},cyberpunk:{name:"Cyberpunk",category:"Dark",background:`
      radial-gradient(circle at 25% 75%, rgba(0, 255, 255, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 75% 25%, rgba(255, 0, 255, 0.06) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(0, 255, 0, 0.04) 0%, transparent 60%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #000000 0%, #0a0a0a 50%, #1a1a1a 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #00ffff 0%, #0080ff 100%)",text:"#000000"},receivedMessage:{background:"linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%)",text:"#00ff00"},header:{background:"linear-gradient(135deg, #000000 0%, #1a1a1a 100%)",text:"#00ffff",iconColor:"#00ff00"},input:{background:"linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%)",text:"#00ff00",iconColor:"#00ffff"},buttons:{background:"linear-gradient(135deg, #00ffff 0%, #0080ff 100%)",text:"#000000",iconColor:"#000000"}},telegram_blue:{name:"Telegram Blue",category:"Professional",background:`
      radial-gradient(circle at 30% 70%, rgba(0, 136, 204, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(0, 95, 153, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #003d5b 0%, #0088cc 50%, #3b82f6 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0088cc 0%, #0369a1 100%)",text:"#f0f9ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#003d5b"},header:{background:"linear-gradient(135deg, #003d5b 0%, #0088cc 100%)",text:"#ffffff",iconColor:"#f0f9ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#003d5b",iconColor:"#0088cc"},buttons:{background:"linear-gradient(135deg, #003d5b 0%, #0088cc 100%)",text:"#ffffff",iconColor:"#ffffff"}},spring_vibes:{name:"Spring Vibes",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(255, 222, 233, 0.25) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(181, 255, 252, 0.30) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(236, 252, 203, 0.20) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fce7f3 0%, #ecfdf5 50%, #f0fdfa 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(5, 150, 105, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",text:"#1e293b",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(30, 41, 59, 0.1)"},header:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(4, 120, 87, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#1e293b",iconColor:"#059669",border:"1px solid rgba(5, 150, 105, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff"}},autumn_leaves:{name:"Autumn Leaves",category:"Nature",background:`
      radial-gradient(circle at 25% 75%, rgba(234, 88, 12, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(154, 52, 18, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(245, 158, 11, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #7c2d12 0%, #9a3412 50%, #ea580c 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #ea580c 0%, #dc2626 100%)",text:"#fff7ed"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#7c2d12"},header:{background:"linear-gradient(135deg, #7c2d12 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#fff7ed"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#7c2d12",iconColor:"#ea580c"},buttons:{background:"linear-gradient(135deg, #7c2d12 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#ffffff"}},winter_calm:{name:"Winter Calm",category:"Nature",background:`
      radial-gradient(circle at 30% 70%, rgba(137, 247, 254, 0.22) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(102, 166, 255, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #e0f2fe 0%, #bae6fd 50%, #7dd3fc 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0284c7 0%, #0369a1 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(2, 132, 199, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(12, 74, 110, 0.1)"},header:{background:"linear-gradient(135deg, #0c4a6e 0%, #0284c7 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(12, 74, 110, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",iconColor:"#0284c7",border:"1px solid rgba(2, 132, 199, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #0c4a6e 0%, #0284c7 100%)",text:"#ffffff",iconColor:"#ffffff"}},desert_dunes:{name:"Desert Dunes",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(253, 230, 138, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(251, 191, 36, 0.15) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fef3c7 0%, #fde68a 50%, #facc15 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #ca8a04 0%, #a16207 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(202, 138, 4, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#78350f",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(120, 53, 15, 0.1)"},header:{background:"linear-gradient(135deg, #78350f 0%, #ca8a04 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(120, 53, 15, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#78350f",iconColor:"#ca8a04",border:"1px solid rgba(202, 138, 4, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #78350f 0%, #ca8a04 100%)",text:"#ffffff",iconColor:"#ffffff"}},lavender_fields:{name:"Lavender Fields",category:"Nature",background:`
      radial-gradient(circle at 25% 75%, rgba(196, 181, 253, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(139, 92, 246, 0.15) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(167, 139, 250, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #ede9fe 0%, #c4b5fd 50%, #a78bfa 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)",text:"#f3e8ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87"},header:{background:"linear-gradient(135deg, #581c87 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#f3e8ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #581c87 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#ffffff"}},cherry_blossom:{name:"Cherry Blossom",category:"Nature",background:`
      radial-gradient(circle at 30% 70%, rgba(253, 164, 175, 0.22) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(244, 63, 94, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(251, 113, 133, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fce7f3 0%, #fda4af 50%, #fb7185 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #e11d48 0%, #be185d 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(225, 29, 72, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#9f1239",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(159, 18, 57, 0.1)"},header:{background:"linear-gradient(135deg, #9f1239 0%, #e11d48 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(159, 18, 57, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#9f1239",iconColor:"#f43f5e",border:"1px solid rgba(244, 63, 94, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #9f1239 0%, #e11d48 100%)",text:"#ffffff",iconColor:"#ffffff"}},rainy_day:{name:"Rainy Day",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(156, 163, 175, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(75, 85, 99, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(107, 114, 128, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #f3f4f6 0%, #d1d5db 50%, #9ca3af 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #4b5563 0%, #374151 100%)",text:"#f9fafb"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f9fafb 100%)",text:"#1f2937"},header:{background:"linear-gradient(135deg, #1f2937 0%, #4b5563 100%)",text:"#ffffff",iconColor:"#f9fafb"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f9fafb 100%)",text:"#1f2937",iconColor:"#6b7280"},buttons:{background:"linear-gradient(135deg, #1f2937 0%, #4b5563 100%)",text:"#ffffff",iconColor:"#ffffff"}},sunset_bliss:{name:"Sunset Bliss",category:"Colorful",background:`
      radial-gradient(circle at 25% 75%, rgba(251, 146, 60, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(239, 68, 68, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(245, 158, 11, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fed7aa 0%, #fb923c 50%, #f97316 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",text:"#fef2f2"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412"},header:{background:"linear-gradient(135deg, #9a3412 0%, #dc2626 100%)",text:"#ffffff",iconColor:"#fff7ed"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412",iconColor:"#f97316"},buttons:{background:"linear-gradient(135deg, #9a3412 0%, #dc2626 100%)",text:"#ffffff",iconColor:"#ffffff"}},mint_fresh:{name:"Mint Fresh",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(52, 211, 153, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(134, 239, 172, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #d1fae5 0%, #86efac 50%, #4ade80 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",text:"#f0fdf4"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d"},header:{background:"linear-gradient(135deg, #14532d 0%, #059669 100%)",text:"#ffffff",iconColor:"#f0fdf4"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d",iconColor:"#10b981"},buttons:{background:"linear-gradient(135deg, #14532d 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff"}},royal_elegance:{name:"Royal Elegance",category:"Elegant",background:`
      radial-gradient(circle at 30% 70%, rgba(124, 58, 237, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(139, 92, 246, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #ede9fe 0%, #c4b5fd 50%, #a78bfa 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #6b21a8 0%, #581c87 100%)",text:"#f3e8ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87"},header:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#f3e8ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#ffffff"}}},F2=M.createContext(),P_=({children:a})=>{const{supabase:t}=fs(),[r,o]=M.useState("classic_purple"),[d,h]=M.useState(null),[x,b]=M.useState(!0),[C,w]=M.useState(0);M.useEffect(()=>{document.documentElement.style.setProperty("--scroll-percentage",C)},[C]);const A=async H=>{if(!H){o("classic_purple"),b(!1);return}const U=`digidad_theme_debounce_${H}`,P=Date.now(),K=parseInt(localStorage.getItem(U)||"0");if(P-K<1e3){b(!1);return}localStorage.setItem(U,P.toString());const Z=localStorage.getItem(`digidad_chat_theme_${H}`);Z&&Vo[Z]?o(Z):Z||(o("classic_purple"),localStorage.setItem(`digidad_chat_theme_${H}`,"classic_purple")),b(!1)},N=async(H,U,P)=>{if(U)try{localStorage.setItem(`digidad_chat_theme_${U}`,H)}catch{try{localStorage.setItem(`digidad_chat_theme_${U}`,H)}catch{}}},T=H=>{h(H),b(!0),A(H)},j=async(H,U)=>{if(!Vo[H])return;const P=U||d;if(!P){console.error("No chat ID available for theme selection");return}o(H);const K=JSON.parse(localStorage.getItem("currentUser"));await N(H,P,K?.id),k(H)},I=H=>{if(!H)return!1;let U=H;for(;U&&U!==document.body;){const P=U.className||"",K=typeof P=="string"?P:P.toString?P.toString():"";if(K.includes("home-container")||K.includes("chat-list")||K.includes("chat-item")||K.includes("chat-name")||K.includes("chat-time")||K.includes("last-message")||K.includes("chat-info")||K.includes("chat-header")||K.includes("main-content")||K.includes("sidebar"))return!0;U=U.parentElement}return!1},k=H=>{const U=Vo[H];if(!U)return;const P=document.documentElement;P.style.setProperty("--chat-bg-gradient",U.background),P.style.setProperty("--sent-message-bg",U.sentMessage.background),P.style.setProperty("--sent-message-text",U.sentMessage.text),P.style.setProperty("--sent-message-shadow",U.sentMessage.shadow||"0 2px 8px rgba(0,0,0,0.15)"),P.style.setProperty("--sent-message-border",U.sentMessage.border||"none"),P.style.setProperty("--received-message-bg",U.receivedMessage.background),P.style.setProperty("--received-message-text",U.receivedMessage.text),P.style.setProperty("--received-message-shadow",U.receivedMessage.shadow||"0 2px 8px rgba(0,0,0,0.1)"),P.style.setProperty("--received-message-border",U.receivedMessage.border||"none"),P.style.setProperty("--chat-header-bg",U.header.background),P.style.setProperty("--chat-header-text",U.header.text),P.style.setProperty("--chat-header-icon-color",U.header.iconColor),P.style.setProperty("--chat-header-shadow",U.header.shadow||"0 2px 8px rgba(0,0,0,0.15)"),P.style.setProperty("--chat-input-bg",U.input.background),P.style.setProperty("--chat-input-text",U.input.text),P.style.setProperty("--chat-input-icon-color",U.input.iconColor),P.style.setProperty("--chat-input-border",U.input.border||"none"),P.style.setProperty("--chat-input-shadow",U.input.shadow||"0 2px 8px rgba(0,0,0,0.1)"),P.style.setProperty("--chat-buttons-bg",U.buttons.background),P.style.setProperty("--chat-buttons-text",U.buttons.text),P.style.setProperty("--chat-buttons-icon-color",U.buttons.iconColor);const K=(Y,V,$)=>{document.querySelectorAll(Y).forEach(ue=>{I(ue)||(ue.style[V]=$)})};K(".chat-container","background",U.background),K("#messagesContainer","background",U.background),K(".chat-header","background",U.header.background),K(".chat-header","color",U.header.text),K(".chat-header","boxShadow",U.header.shadow||"0 2px 8px rgba(0,0,0,0.15)"),K(".chat-header","textShadow","0 1px 2px rgba(0,0,0,0.3)"),K(".message-input-area","background",U.input.background),K(".message-input-area","color",U.input.text),K(".message-input-area","border",U.input.border||"none"),K(".message-input-area","boxShadow",U.input.shadow||"0 2px 8px rgba(0,0,0,0.1)"),K(".input-wrapper","background",U.input.background),K(".input-wrapper","border",U.input.border||"none"),K(".input-wrapper","boxShadow",U.input.shadow||"0 2px 8px rgba(0,0,0,0.1)"),K("#messageInput","color",U.input.text),K("#messageInput","textShadow","0 1px 2px rgba(0,0,0,0.1)"),document.querySelectorAll("*").forEach(Y=>{if(I(Y))return;const V=Y.className||"",$=typeof V=="string"?V:V.toString?V.toString():"",q=Y.tagName;if($.includes("chat")&&!$.includes("chat-list")&&!$.includes("chat-item")||q==="BUTTON"&&Y.closest(".chat-container")||$.includes("message")&&Y.closest(".chat-container")){if(q==="BUTTON"&&(Y.style.background=U.buttons.background,Y.style.color=U.buttons.text,Y.style.border="none",Y.style.textShadow="0 1px 2px rgba(0,0,0,0.2)",Y.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",Y.style.transition="all 0.3s ease"),Y.tagName==="I"||Y.tagName==="SVG"){const ue=Y.parentElement?.className||"",fe=typeof ue=="string"?ue:ue.toString?ue.toString():"";fe.includes("chat")&&!fe.includes("chat-list")&&(Y.style.color=U.header.iconColor,Y.style.stroke=U.header.iconColor,Y.style.filter="drop-shadow(0 1px 3px rgba(0,0,0,0.4))",Y.style.transition="all 0.3s ease")}($.includes("message-bubble")||$.includes("message"))&&($.includes("sent")?(Y.style.background=U.sentMessage.background,Y.style.color=U.sentMessage.text,Y.style.border=U.sentMessage.border||"none",Y.style.boxShadow=U.sentMessage.shadow||"0 2px 8px rgba(0,0,0,0.15)",Y.style.textShadow="0 1px 2px rgba(0,0,0,0.2)"):$.includes("received")&&(Y.style.background=U.receivedMessage.background,Y.style.color=U.receivedMessage.text,Y.style.border=U.receivedMessage.border||"none",Y.style.boxShadow=U.receivedMessage.shadow||"0 2px 8px rgba(0,0,0,0.1)",Y.style.textShadow="0 1px 2px rgba(0,0,0,0.1)"))}}),document.body.className=document.body.className.replace(/theme-\w+/g,""),document.body.classList.add(`theme-${H.replace("_","-")}`)};M.useEffect(()=>{!x&&d&&k(r)},[r,d,x]);const D={chatTheme:r,chatThemes:Vo,selectTheme:j,setChatId:T,loading:x,currentThemeData:Vo[r]||Vo.classic_purple,setScrollPercentage:w,currentChatId:d};return l.jsx(F2.Provider,{value:D,children:a})},t1=()=>{const a=M.useContext(F2);if(!a)throw new Error("useChatTheme must be used within a ChatThemeProvider");return a},xt="./",ks=[{id:1,path:`${xt}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`},{id:2,path:`${xt}assets/images/dp-options/1691130988954.jpg`},{id:3,path:`${xt}assets/images/dp-options/aesthetic-cartoon-funny-dp-for-instagram.webp`},{id:4,path:`${xt}assets/images/dp-options/boy-cartoon-dp-with-hoodie.webp`},{id:5,path:`${xt}assets/images/dp-options/download (1).jpg`},{id:6,path:`${xt}assets/images/dp-options/download.jpg`},{id:7,path:`${xt}assets/images/dp-options/funny-profile-picture-wd195eo9rpjy7ax1.jpg`},{id:8,path:`${xt}assets/images/dp-options/funny-whatsapp-dp-for-girls.webp`},{id:9,path:`${xt}assets/images/dp-options/photo_5230962651624575118_y.jpg`},{id:10,path:`${xt}assets/images/dp-options/photo_5230962651624575119_y.jpg`},{id:11,path:`${xt}assets/images/dp-options/photo_5230962651624575120_y.jpg`},{id:12,path:`${xt}assets/images/dp-options/photo_5230962651624575121_y.jpg`},{id:13,path:`${xt}assets/images/dp-options/photo_5230962651624575122_y.jpg`},{id:14,path:`${xt}assets/images/dp-options/photo_5230962651624575123_y.jpg`},{id:15,path:`${xt}assets/images/dp-options/photo_5230962651624575124_y.jpg`},{id:16,path:`${xt}assets/images/dp-options/photo_5230962651624575125_y.jpg`},{id:17,path:`${xt}assets/images/dp-options/photo_5230962651624575126_y.jpg`},{id:18,path:`${xt}assets/images/dp-options/photo_5230962651624575127_y.jpg`},{id:19,path:`${xt}assets/images/dp-options/photo_5235923888607267708_w.jpg`},{id:20,path:`${xt}assets/images/dp-options/photo_5235923888607267709_w.jpg`},{id:21,path:`${xt}assets/images/dp-options/photo_5235923888607267710_w.jpg`},{id:22,path:`${xt}assets/images/dp-options/photo_5235923888607267711_w.jpg`},{id:23,path:`${xt}assets/images/dp-options/photo_5235923888607267712_w.jpg`},{id:24,path:`${xt}assets/images/dp-options/photo_5235923888607267713_w.jpg`},{id:25,path:`${xt}assets/images/dp-options/photo_5235923888607267714_w.jpg`},{id:26,path:`${xt}assets/images/dp-options/photo_5235923888607267715_w.jpg`},{id:27,path:`${xt}assets/images/dp-options/photo_5235923888607267716_w.jpg`},{id:28,path:`${xt}assets/images/dp-options/photo_5235923888607267717_w.jpg`},{id:29,path:`${xt}assets/images/dp-options/photo_5257989785601641848_w.jpg`},{id:30,path:`${xt}assets/images/dp-options/photo_5257989785601641845_w.jpg`},{id:31,path:`${xt}assets/images/dp-options/photo_5257989785601641846_w.jpg`},{id:32,path:`${xt}assets/images/dp-options/photo_5257989785601641850_w.jpg`},{id:33,path:`${xt}assets/images/dp-options/photo_5257989785601641853_w.jpg`},{id:34,path:`${xt}assets/images/dp-options/photo_5257989785601641852_w.jpg`},{id:35,path:`${xt}assets/images/dp-options/photo_5257989785601641849_w.jpg`},{id:36,path:`${xt}assets/images/dp-options/photo_5257989785601641851_w.jpg`},{id:37,path:`${xt}assets/images/dp-options/photo_5257989785601641844_w.jpg`},{id:38,path:`${xt}assets/images/dp-options/photo_5257989785601641779_w.jpg`},{id:39,path:`${xt}assets/images/dp-options/photo_5257989785601641784_w.jpg`},{id:40,path:`${xt}assets/images/dp-options/photo_5257989785601641785_w.jpg`},{id:41,path:`${xt}assets/images/dp-options/photo_5257989785601641781_w.jpg`},{id:42,path:`${xt}assets/images/dp-options/photo_5257989785601641780_w.jpg`},{id:43,path:`${xt}assets/images/dp-options/photo_5257989785601641777_w.jpg`},{id:44,path:`${xt}assets/images/dp-options/photo_5257989785601641778_w.jpg`},{id:45,path:`${xt}assets/images/dp-options/photo_5257989785601641776_w.jpg`},{id:46,path:`${xt}assets/images/dp-options/photo_5257989785601641783_w.jpg`}];const z_=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F_=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,o)=>o?o.toUpperCase():r.toLowerCase()),yx=a=>{const t=F_(a);return t.charAt(0).toUpperCase()+t.slice(1)},H2=(...a)=>a.filter((t,r,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===r).join(" ").trim(),H_=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var q_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const V_=M.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:d="",children:h,iconNode:x,...b},C)=>M.createElement("svg",{ref:C,...q_,width:t,height:t,stroke:a,strokeWidth:o?Number(r)*24/Number(t):r,className:H2("lucide",d),...!h&&!H_(b)&&{"aria-hidden":"true"},...b},[...x.map(([w,A])=>M.createElement(w,A)),...Array.isArray(h)?h:[h]]));const Ye=(a,t)=>{const r=M.forwardRef(({className:o,...d},h)=>M.createElement(V_,{ref:h,iconNode:t,className:H2(`lucide-${z_(yx(a))}`,`lucide-${a}`,o),...d}));return r.displayName=yx(a),r};const G_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Of=Ye("activity",G_);const Y_=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],If=Ye("archive",Y_);const X_=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Q_=Ye("arrow-down",X_);const W_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rl=Ye("arrow-left",W_);const K_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Z_=Ye("arrow-right",K_);const $_=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nd=Ye("ban",$_);const J_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],q2=Ye("bell-off",J_);const eE=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sd=Ye("bell",eE);const tE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],N0=Ye("calendar",tE);const nE=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],wx=Ye("chart-column",nE);const sE=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],T0=Ye("check-check",sE);const rE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V2=Ye("check",rE);const aE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mf=Ye("circle-check-big",aE);const iE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oE=Ye("circle-question-mark",iE);const lE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cE=Ye("circle-x",lE);const uE=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],j0=Ye("clock",uE);const dE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],G2=Ye("copy",dE);const hE=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],fE=Ye("crown",hE);const gE=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],mE=Ye("database",gE);const pE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xE=Ye("download",pE);const yE=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],gd=Ye("ellipsis-vertical",yE);const wE=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qu=Ye("eye-off",wE);const bE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zr=Ye("eye",bE);const vE=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],n1=Ye("file-text",vE);const CE=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],R0=Ye("flag",CE);const SE=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],_E=Ye("heart",SE);const EE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Y2=Ye("image",EE);const AE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],NE=Ye("info",AE);const TE=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],jE=Ye("link",TE);const RE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],bx=Ye("lock",RE);const OE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],IE=Ye("log-out",OE);const ME=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],kE=Ye("map-pin",ME);const DE=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ur=Ye("message-circle",DE);const LE=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Vu=Ye("message-square",LE);const BE=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],UE=Ye("mic-off",BE);const PE=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],zE=Ye("mic",PE);const FE=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],HE=Ye("music",FE);const qE=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],gi=Ye("newspaper",qE);const VE=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],GE=Ye("palette",VE);const YE=[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],XE=Ye("phone-incoming",YE);const QE=[["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],WE=Ye("phone-missed",QE);const KE=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],s1=Ye("phone-off",KE);const ZE=[["path",{d:"m16 8 6-6",key:"oawc05"}],["path",{d:"M22 8V2h-6",key:"oqy2zc"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],$E=Ye("phone-outgoing",ZE);const JE=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Gs=Ye("phone",JE);const eA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vx=Ye("plus",eA);const tA=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],X2=Ye("qr-code",tA);const nA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qi=Ye("refresh-cw",nA);const sA=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Cx=Ye("reply",sA);const rA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],aA=Ye("rotate-ccw",rA);const iA=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],uc=Ye("search",iA);const oA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],lA=Ye("send",oA);const cA=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nc=Ye("settings",cA);const uA=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Q2=Ye("share-2",uA);const dA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],hi=Ye("shield",dA);const hA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],md=Ye("square-pen",hA);const fA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ms=Ye("trash-2",fA);const gA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],mA=Ye("upload",gA);const pA=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xA=Ye("user-check",pA);const yA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],wA=Ye("user-plus",yA);const bA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],vA=Ye("user-x",bA);const CA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],r1=Ye("user",CA);const SA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qi=Ye("users",SA);const _A=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Sx=Ye("video-off",_A);const EA=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],wi=Ye("video",EA);const AA=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],NA=Ye("volume-2",AA);const TA=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],jA=Ye("volume-x",TA);const RA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pd=Ye("x",RA),a1=({items:a=[],icon:t=l.jsx(gd,{size:20}),buttonClassName:r="",menuClassName:o="",align:d="right"})=>{const[h,x]=M.useState(!1),b=M.useRef(null),{currentThemeData:C}=t1();M.useEffect(()=>{const A=T=>{b.current&&!b.current.contains(T.target)&&x(!1)},N=T=>{const j=T.touches[0]||T.changedTouches[0];j&&b.current&&!b.current.contains(j.target)&&x(!1)};return h&&(document.addEventListener("mousedown",A),document.addEventListener("touchstart",N,{passive:!0})),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",N)}},[h]);const w=(A,N)=>{N.preventDefault(),N.stopPropagation(),A.onClick&&A.onClick(),x(!1)};return l.jsxs("div",{className:"dropdown",ref:b,children:[l.jsx("button",{className:`icon-btn ${r}`,onClick:A=>{A.preventDefault(),A.stopPropagation(),x(!h)},onMouseEnter:()=>{},title:"Menu",children:t}),h&&l.jsx("div",{className:`dropdown-menu ${d==="left"?"dropdown-menu-left":""} ${o}`,children:a.map((A,N)=>l.jsx(yy.Fragment,{children:A.divider?l.jsx("div",{className:"dropdown-divider"}):l.jsxs("button",{className:`dropdown-item ${A.danger?"danger":""} ${A.className||""}`,onClick:T=>w(A,T),disabled:A.disabled,style:{...A.style,color:A.danger?"#dc3545":"var(--chat-input-text, #212529)"},children:[A.icon&&l.jsx("span",{className:"dropdown-item-icon",style:{color:A.danger?"#dc3545":"var(--chat-input-icon-color, #667eea)"},children:A.icon}),l.jsx("span",{className:"dropdown-item-label",children:A.label}),A.badge&&l.jsx("span",{className:"dropdown-item-badge",children:A.badge})]})},N))})]})},_a=({isOpen:a,onClose:t,title:r,children:o,size:d="medium",showCloseButton:h=!0,closeOnOverlayClick:x=!0,className:b=""})=>{if(M.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]),M.useEffect(()=>{const w=A=>{A.key==="Escape"&&a&&t()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[a,t]),!a)return null;const C=w=>{x&&w.target===w.currentTarget&&t()};return l.jsx("div",{className:"modal-overlay",onClick:C,children:l.jsxs("div",{className:`modal-container modal-${d} ${b}`,children:[(r||h)&&l.jsxs("div",{className:"modal-header",children:[r&&l.jsx("h2",{className:"modal-title",children:r}),h&&l.jsx("button",{className:"modal-close-btn",onClick:t,children:l.jsx(pd,{size:24})})]}),l.jsx("div",{className:"modal-body",children:o})]})})},OA=({message:a,isSent:t,onDownload:r,onView:o})=>{const[d,h]=M.useState(!1),[x,b]=M.useState(0),C=T=>({image:"fas fa-image",video:"fas fa-video",audio:"fas fa-microphone",document:"fas fa-file-pdf",avatar:"fas fa-user-circle"})[T]||"fas fa-file",w=T=>{if(!T||T===0)return"";const j=1024,I=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(T)/Math.log(j));return Math.round(T/Math.pow(j,k)*100)/100+" "+I[k]},A=async()=>{if(a.media_url){h(!0),b(0);try{const T=setInterval(()=>{b(j=>j>=90?(clearInterval(T),j):j+10)},200);await r(a.media_url,a.id),b(100),setTimeout(()=>{h(!1),b(0)},1e3)}catch(T){console.error("Download failed:",T),h(!1),b(0)}}},N=()=>{if(!a.media_url)return l.jsxs("div",{className:"media-unavailable",children:[l.jsx("i",{className:"fas fa-exclamation-circle"}),l.jsx("span",{children:"Media not available"})]});switch(a.message_type){case"image":return l.jsx("div",{className:"image-preview",style:{backgroundImage:`url(${a.media_url})`},onClick:()=>o(a.media_url,"image"),children:l.jsx("div",{className:"image-overlay",children:l.jsx("i",{className:"fas fa-search-plus"})})});case"video":return l.jsx("div",{className:"video-preview",onClick:()=>o(a.media_url,"video"),children:l.jsx("div",{className:"video-overlay",children:l.jsx("i",{className:"fas fa-play-circle"})})});case"audio":return l.jsx("div",{className:"audio-preview",children:l.jsx("i",{className:"fas fa-music"})});case"document":return l.jsx("div",{className:"document-preview",onClick:()=>o(a.media_url,"document"),children:l.jsx("i",{className:"fas fa-file-pdf"})});default:return l.jsx("div",{className:"file-preview",children:l.jsx("i",{className:"fas fa-file"})})}};return t?l.jsxs("div",{className:"media-message sent",children:[l.jsx("div",{className:"media-preview",children:N()}),l.jsxs("div",{className:"media-details",children:[l.jsx("div",{className:"media-name",children:a.content}),l.jsx("div",{className:"media-size",children:w(a.file_size)})]})]}):l.jsx("div",{className:"media-message received",children:d?l.jsxs("div",{className:"download-progress-container",children:[l.jsx("div",{className:"download-progress-bar",children:l.jsx("div",{className:"download-progress-fill",style:{width:`${x}%`}})}),l.jsxs("div",{className:"download-progress-text",children:[x,"%"]})]}):l.jsxs("div",{className:"media-download-container",children:[l.jsx("div",{className:"media-icon",children:l.jsx("i",{className:C(a.message_type)})}),l.jsxs("div",{className:"media-info",children:[l.jsx("div",{className:"media-name",children:a.content}),l.jsx("div",{className:"media-status",children:"Click to download"})]}),l.jsx("button",{className:"btn-download",onClick:A,children:l.jsx("i",{className:"fas fa-download"})})]})})},IA=({message:a,currentUser:t,isSelected:r,isSelectionMode:o,onSelect:d,onReply:h,onDelete:x,onMediaView:b,onMediaDownload:C})=>{const[w,A]=M.useState(!1),[N,T]=M.useState(!1),[j,I]=M.useState(a.content),[k,D]=M.useState(0),[H,U]=M.useState(0),[P,K]=M.useState(0),[Z,Y]=M.useState(!1),V=M.useRef(null),$=M.useRef(null),q=a.sender_id===t.id,ue=a.reply_to,fe=De=>{De.preventDefault(),o||d()},ie=()=>{o&&d()},be=()=>{h(a),A(!1)},Re=async()=>{try{await navigator.clipboard.writeText(a.content),A(!1)}catch(De){console.error("Failed to copy message:",De)}},G=()=>{navigator.clipboard.writeText(`Forwarded message:
"${a.content}"`),A(!1)},J=()=>{T(!0),A(!1)},oe=async()=>{if(j.trim()&&j!==a.content)try{const{error:De}=await wt.from("messages").update({content:j.trim(),edited_at:new Date().toISOString()}).eq("id",a.id);if(De)throw De;a.content=j.trim(),a.edited_at=new Date().toISOString()}catch(De){console.error("Error editing message:",De)}T(!1)},ke=()=>{I(a.content),T(!1)},Ve=()=>{Y(!0),A(!1)},Ke=async()=>{Y(!1);try{const{error:De}=await wt.from("messages").delete().eq("id",a.id);if(De)throw De;x&&x(a.id)}catch(De){console.error("Error deleting message:",De)}},ne=()=>{Y(!1)},ye=De=>new Date(De).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Le=De=>{D(Date.now()),U(De.touches[0].clientX),K(De.touches[0].clientY)},Ue=De=>{const Je=Date.now()-k,gt=De.changedTouches[0].clientX,Wt=De.changedTouches[0].clientY,ht=gt-H,kt=Wt-P,yn=Math.abs(ht),un=Math.abs(kt);if(yn>50&&yn>un&&ht>0&&!o){be();return}Je>500&&!o&&fe(De)},Xe=async(De,Ce)=>{C&&await C(De,Ce)},Ee=(De,Ce)=>{b&&b(De,Ce,a)},$e=()=>{let De;if(a.message_type==="news_share")try{const Ce=JSON.parse(a.content);De=l.jsxs("div",{className:"news-share-message",onClick:()=>window.open(Ce.link,"_blank"),children:[l.jsxs("div",{className:"news-share-header",children:[l.jsx(gi,{size:16}),l.jsx("span",{children:"Shared News"})]}),l.jsxs("div",{className:"news-share-content",children:[l.jsx("h4",{children:Ce.title}),l.jsx("p",{children:l.jsx("strong",{children:Ce.source})}),l.jsx("div",{className:"news-share-link",children:"Read Full Article "})]})]})}catch{De=l.jsx("p",{className:"message-text",children:a.content})}else if(a.message_type==="reminder")try{const Ce=JSON.parse(a.content);Ce.type==="reminder_request"&&(De=l.jsxs("div",{className:"reminder-message-card",children:[l.jsxs("div",{className:"reminder-header",children:[l.jsx(sd,{size:16,className:"reminder-icon"}),l.jsx("span",{className:"reminder-label",children:"REMINDER REQUEST"})]}),l.jsxs("div",{className:"reminder-content",children:[l.jsx("h4",{className:"reminder-title",children:Ce.title}),Ce.description&&l.jsx("p",{className:"reminder-description",children:Ce.description}),l.jsxs("div",{className:"reminder-details",children:[l.jsxs("div",{className:"reminder-time",children:[l.jsx(j0,{size:16}),new Date(Ce.reminder_time).toLocaleString()]}),Ce.location&&l.jsxs("div",{className:"reminder-location",children:[l.jsx(kE,{size:16}),Ce.location]})]})]})]}))}catch{De=l.jsxs("p",{children:[l.jsx(N0,{size:16})," Reminder message"]})}else["image","video","audio","document"].includes(a.message_type)?De=l.jsx(OA,{message:a,isSent:q,onDownload:Xe,onView:Ee}):De=l.jsx("p",{className:"message-text",children:a.content});return De};return l.jsxs("div",{ref:$,className:`message ${q?"sent":"received"} ${r?"selected":""} ${ue?"replied":""} ${a.is_vanished?"vanished":""}`,onClick:ie,onTouchStart:Le,onTouchEnd:Ue,onContextMenu:De=>{De.preventDefault(),o||A(!w)},children:[o&&l.jsx("div",{className:`selection-indicator ${r?"selected":""}`,children:r&&l.jsx("span",{children:""})}),l.jsxs("div",{className:"message-content",children:[l.jsxs("div",{className:"message-bubble",ref:V,children:[ue&&l.jsxs("div",{className:"replied-message-container",children:[l.jsxs("div",{className:"replied-message-header",children:[l.jsx(Cx,{size:16}),l.jsx("span",{className:"replied-message-user",children:q?"You":"Them"})]}),l.jsx("div",{className:"replied-message-content",children:"Replied message"})]}),N?l.jsxs("div",{className:"message-edit",children:[l.jsx("input",{type:"text",value:j,onChange:De=>I(De.target.value),onKeyDown:De=>{De.key==="Enter"&&oe(),De.key==="Escape"&&ke()},autoFocus:!0}),l.jsxs("div",{className:"edit-actions",children:[l.jsx("button",{onClick:oe,children:"Save"}),l.jsx("button",{onClick:ke,children:"Cancel"})]})]}):$e(),a.vanish_at&&!a.is_vanished&&l.jsxs("div",{className:"vanish-timer",children:[l.jsx(j0,{size:16}),l.jsx("span",{children:"Timer"})]}),q&&l.jsx("span",{className:"message-status",children:a.is_read?l.jsx(T0,{size:16}):l.jsx(V2,{size:16})})]}),l.jsx("div",{className:"message-meta",children:l.jsxs("span",{className:"message-time",children:[ye(a.created_at),a.edited_at&&" (edited)"]})}),w&&!o&&l.jsxs("div",{className:"message-actions",children:[l.jsx("button",{className:"message-arrow-btn",children:l.jsx(gd,{size:16})}),l.jsxs("div",{className:"message-dropdown",children:[l.jsxs("div",{className:"message-option",onClick:be,children:[l.jsx(Cx,{size:16,className:"icon"})," Reply"]}),l.jsxs("div",{className:"message-option",onClick:Re,children:[l.jsx(G2,{size:16,className:"icon"})," Copy"]}),l.jsxs("div",{className:"message-option",onClick:G,children:[l.jsx(Q2,{size:16,className:"icon"})," Forward"]}),q&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"message-option",onClick:J,children:[l.jsx(md,{size:16,className:"icon"})," Edit"]}),l.jsxs("div",{className:"message-option danger",onClick:Ve,children:[l.jsx(Ms,{size:16,className:"icon"})," Delete"]})]})]})]})]}),Z&&l.jsx("div",{className:"delete-modal-overlay",onClick:ne,children:l.jsxs("div",{className:"delete-modal",onClick:De=>De.stopPropagation(),children:[l.jsx("div",{className:"delete-modal-header",children:l.jsx("h3",{children:"Delete Message"})}),l.jsx("div",{className:"delete-modal-body",children:l.jsx("p",{children:"Are you sure you want to delete this message? This action cannot be undone."})}),l.jsxs("div",{className:"delete-modal-actions",children:[l.jsx("button",{className:"delete-cancel-btn",onClick:ne,style:{padding:"10px 20px",marginRight:"10px"},children:"Cancel"}),l.jsx("button",{className:"delete-confirm-btn",onClick:Ke,style:{padding:"10px 20px",background:"#dc3545",color:"white",border:"none",borderRadius:"4px"},children:"Confirm Delete"})]})]})})]})},MA=({messages:a,currentUser:t,selectedMessages:r,isSelectionMode:o,onMessageSelect:d,onReply:h,onDelete:x,onMediaView:b,onMediaDownload:C})=>{const A=(N=>{const T={};return N.forEach(j=>{const k=new Date(j.created_at).toDateString();T[k]||(T[k]=[]),T[k].push(j)}),T})(a);return!a||a.length===0?l.jsx("div",{className:"messages-wrapper",children:l.jsx("div",{className:"no-messages-placeholder",children:l.jsxs("div",{className:"no-messages-content",children:[l.jsx("div",{className:"no-messages-icon",children:""}),l.jsx("h3",{children:"No messages yet"}),l.jsx("p",{children:"Start the conversation by sending a message!"})]})})}):l.jsx("div",{className:"messages-wrapper",children:Object.entries(A).map(([N,T])=>l.jsxs(yy.Fragment,{children:[l.jsx("div",{className:"date-separator",children:l.jsx("span",{children:new Date(T[0].created_at).toLocaleDateString()})}),T.map(j=>l.jsx(IA,{message:j,currentUser:t,isSelected:r.has(j.id),isSelectionMode:o,onSelect:()=>d(j.id),onReply:()=>h(j),onDelete:x,onMediaView:b,onMediaDownload:C},j.id))]},N))})},kA=({isVisible:a,onClose:t,onFileSelect:r})=>{const o=[{id:"camera",name:"Camera",icon:"fas fa-camera",color:"#E91E63"},{id:"gallery",name:"Gallery",icon:"fas fa-images",color:"#9C27B0"},{id:"video",name:"Video",icon:"fas fa-video",color:"#FF5722"},{id:"audio",name:"Audio",icon:"fas fa-microphone",color:"#FF9800"},{id:"location",name:"Location",icon:"fas fa-map-marker-alt",color:"#4CAF50"},{id:"reminder",name:"Reminder",icon:"fas fa-bell",color:"#00BCD4"}],d=h=>{console.log("Option clicked:",h.name),r&&r({type:h.id,name:h.name}),t&&t()};return a?l.jsx("div",{className:"whatsapp-attachment-overlay",children:l.jsxs("div",{className:`whatsapp-attachment-popup ${a?"open":""}`,children:[l.jsxs("div",{className:"whatsapp-attachment-header",children:[l.jsx("h3",{children:"Share"}),l.jsx("button",{onClick:t,className:"whatsapp-attachment-close",children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsx("div",{className:"whatsapp-menu-grid",children:o.map(h=>l.jsxs("div",{className:"whatsapp-menu-item",onClick:()=>d(h),children:[l.jsx("div",{className:"whatsapp-icon-circle",style:{backgroundColor:h.color},children:l.jsx("i",{className:h.icon})}),l.jsx("span",{className:"whatsapp-item-name",children:h.name})]},h.id))})]})}):null},DA=({onSendMessage:a,onTyping:t,replyingTo:r,onCancelReply:o,chatId:d,receiverId:h})=>{const[x,b]=M.useState(""),[C,w]=M.useState(!1),[A,N]=M.useState(!1),[T,j]=M.useState(null),[I,k]=M.useState(!1),D=M.useRef(null),H=["Hello!","How are you?","Thank you!","Sorry","Okay","Yes","No","Please","Good morning","Good night"],U=q=>{b(q.target.value);const ue=D.current;ue&&(ue.style.height="auto",ue.style.height=Math.min(ue.scrollHeight,160)+"px"),t()},P=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),K())},K=()=>{if(x.trim()){a(x.trim()),b("");const q=D.current;q&&(q.style.height="auto")}},Z=()=>{console.log("Attachment button clicked! Current state:",C),w(!C),N(!1),console.log("New state:",!C)},Y=async q=>{k(!0);try{if(q.type==="location"){const ue=` Location: ${q.address}`;a(ue)}else if(q.type==="contact"){const ue=` Contact: ${q.name}${q.phones.length>0?` (${q.phones[0]})`:""}`;a(ue)}else if(q.type==="reminder"){const ue=` Reminder: ${q.message}`;a(ue)}else{const ue=q.fileName||"File";a(ue,{mediaUrl:q.mediaUrl,mediaType:q.mediaType,fileName:q.fileName,fileSize:q.fileSize,mimeType:q.mimeType})}b(""),D.current&&(D.current.style.height="auto")}catch(ue){console.error("Error handling file selection:",ue),alert("Failed to process file: "+ue.message)}finally{k(!1)}},V=q=>{a(q),N(!1)},$=()=>{N(!A),w(!1)};return l.jsxs("div",{className:"chat-input-container",children:[r&&l.jsxs("div",{className:"reply-preview-bar",children:[l.jsxs("div",{className:"reply-preview-content",children:[l.jsxs("div",{className:"reply-author",children:["Replying to ",r.sender_id===JSON.parse(localStorage.getItem("currentUser")).id?"You":"Them"]}),l.jsx("div",{className:"reply-text",children:r.content})]}),l.jsx("button",{className:"reply-close-btn",onClick:o,children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsxs("div",{className:"input-row",children:[l.jsx("button",{className:"btn-attach",onClick:Z,title:"Attach Media",children:l.jsx("i",{className:"fas fa-paperclip"})}),l.jsx("button",{className:"btn-quick-reply",onClick:$,title:"Quick Replies",children:l.jsx("i",{className:"fas fa-comment-dots"})}),l.jsx("textarea",{ref:D,className:"chat-input",placeholder:"Type a message...",value:x,onChange:U,onKeyPress:P,rows:2,disabled:I}),l.jsx("button",{className:"btn-send",onClick:K,disabled:!x.trim()||I,children:l.jsx("span",{id:"sendIcon",children:I?l.jsx("i",{className:"fas fa-spinner fa-spin"}):l.jsx("i",{className:"fas fa-paper-plane"})})})]}),l.jsx(kA,{isVisible:C,onFileSelect:Y,onClose:()=>w(!1),chatId:d,receiverId:h}),A&&l.jsx("div",{className:"quick-replies-menu",children:H.map((q,ue)=>l.jsx("button",{className:"quick-reply-option",onClick:()=>V(q),children:q},ue))})]})},LA=({isVisible:a})=>a?l.jsxs("div",{className:"typing-indicator",children:[l.jsxs("span",{className:"typing-dots",children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]}),l.jsx("span",{className:"typing-text",children:"typing..."})]}):null,BA=()=>{const[a,t]=M.useState(new Map),[r,o]=M.useState(new Map),d=M.useCallback(async(T,j={})=>(console.log("MediaDownloader: Starting download for mediaUrl:",T),r.has(T)&&!j.forceDownload?(console.log("MediaDownloader: Returning cached media"),r.get(T)):new Promise(async(I,k)=>{try{if(console.log("MediaDownloader: Processing URL..."),!T||T==="undefined"||T==="null"){console.error("MediaDownloader: Invalid media URL"),k(new Error("Invalid media URL"));return}const D=h(T);console.log("MediaDownloader: Created fileInfo:",D);const H={mediaId:T,fileInfo:D,progress:0,status:"downloading"};t(Z=>new Map(Z).set(T,H)),b(H,0),console.log("MediaDownloader: Fetching file from:",D.storage_url);const U=await x(D,H);console.log("MediaDownloader: File fetched, size:",U.size);const P=URL.createObjectURL(U),K={mediaId:T,objectUrl:P,blob:U,fileInfo:D};o(Z=>new Map(Z).set(T,K)),b(H,100),H.status="completed",console.log("MediaDownloader: Download completed successfully"),I(K)}catch(D){console.error("MediaDownloader: Download failed:",D),k(D)}finally{t(D=>{const H=new Map(D);return H.delete(T),H})}})),[r]),h=M.useCallback(T=>{const j=T.split("/"),I=j[j.length-1]||"unknown";let k="application/octet-stream";T.includes("/images/")?k="image/jpeg":T.includes("/videos/")?k="video/mp4":T.includes("/audios/")?k="audio/mpeg":T.includes("/documents/")&&(k="application/pdf");let D="unknown";return T.includes("/images/")?D="image":T.includes("/videos/")?D="video":T.includes("/audios/")?D="audio":T.includes("/documents/")&&(D="document"),{id:T,file_name:I,filename:I,file_size:0,mime_type:k,storage_url:T,storage_path:"",storage_bucket:"media",file_type:D}},[]),x=M.useCallback(async(T,j)=>{const I=await fetch(T.storage_url);if(!I.ok)throw new Error("Download failed");const k=I.headers.get("content-length"),D=parseInt(k,10);let H=0;const U=I.body.getReader(),P=[];for(;;){const{done:Z,value:Y}=await U.read();if(Z)break;if(P.push(Y),H+=Y.length,D>0){const V=Math.round(H/D*100);b(j,V)}}return new Blob(P,{type:T.mime_type})},[]),b=M.useCallback((T,j)=>{T.progress=j,window.dispatchEvent(new CustomEvent("download-progress",{detail:{mediaId:T.mediaId,progress:j,status:T.status,fileInfo:T.fileInfo}}))},[]),C=M.useCallback(T=>{const j=a.get(T);return j?{progress:j.progress,status:j.status,fileInfo:j.fileInfo}:null},[a]),w=M.useCallback(()=>{r.forEach(T=>{T.objectUrl&&URL.revokeObjectURL(T.objectUrl)}),o(new Map)},[r]),A=M.useCallback(async T=>{try{console.log("MediaDownloader: Getting file info for mediaId:",T);const{data:j,error:I}=await wt.from("media").select("*").eq("id",T).single();if(I||!j)return console.error("MediaDownloader: Error fetching media record:",I),{success:!1,error:I?.message||"Media not found"};const k={id:j.id,file_name:j.file_name,filename:j.file_name,file_size:j.file_size||0,mime_type:j.mime_type,storage_url:j.storage_url,storage_path:j.storage_path,storage_bucket:j.storage_bucket,file_type:j.file_type};return console.log("MediaDownloader: File info retrieved:",k),{success:!0,data:k}}catch(j){return console.error("MediaDownloader: Error in getFileInfo:",j),{success:!1,error:j.message}}},[]),N=M.useCallback(T=>{const j=r.get(T);j&&j.objectUrl&&URL.revokeObjectURL(j.objectUrl),o(I=>{const k=new Map(I);return k.delete(T),k})},[r]);return{downloadMedia:d,activeDownloads:a,cache:r,getDownloadStatus:C,clearCache:w,getFileInfo:A,removeFromCache:N}},UA=()=>{const[a,t]=M.useState(null),[r,o]=M.useState(!1),[d,h]=M.useState(null),{downloadMedia:x}=BA(),b=M.useCallback(async(j,I=null,k={})=>{try{if(o(!0),h(null),!I){const U=await A(j);if(!U.success)throw new Error(U.error);I=U.data}t({mediaId:j,fileInfo:I,options:k});const H={...await x(I.storage_url),fileInfo:I};t(U=>({...U,media:H})),o(!1)}catch(D){console.error("Error opening media:",D),h("Failed to load media"),o(!1)}},[x]),C=M.useCallback(()=>{t(null),h(null),o(!1)},[]),w=M.useCallback(()=>{if(!a?.fileInfo)return;const{fileInfo:j}=a,I=document.createElement("a");I.href=j.storage_url,I.download=j.file_name,I.click()},[a]),A=M.useCallback(async j=>{try{console.log("MediaViewer: Getting file info for mediaId:",j);const{data:I,error:k}=await wt.from("media").select("*").eq("id",j).single();if(k||!I)return console.error("MediaViewer: Error fetching media record:",k),{success:!1,error:k?.message||"Media not found"};const D={id:I.id,file_name:I.file_name,filename:I.file_name,file_size:I.file_size||0,mime_type:I.mime_type,storage_url:I.storage_url,storage_path:I.storage_path,storage_bucket:I.storage_bucket,file_type:I.file_type};return console.log("MediaViewer: File info retrieved:",D),{success:!0,data:D}}catch(I){return console.error("MediaViewer: Error in getFileInfo:",I),{success:!1,error:I.message}}},[]),N=M.useCallback(j=>{if(j===0)return"0 Bytes";const I=1024,k=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(j)/Math.log(I));return Math.round(j/Math.pow(I,D)*100)/100+" "+k[D]},[]),T=M.useCallback(j=>{if(isNaN(j))return"0:00";const I=Math.floor(j/60),k=Math.floor(j%60);return`${I}:${k.toString().padStart(2,"0")}`},[]);return M.useEffect(()=>()=>{a?.media?.objectUrl&&URL.revokeObjectURL(a.media.objectUrl)},[a]),{currentMedia:a,isLoading:r,error:d,openMedia:b,closeMedia:C,downloadCurrent:w,formatFileSize:N,formatTime:T}},PA=({isOpen:a,onClose:t,mediaId:r,fileInfo:o,options:d={}})=>{const{currentMedia:h,isLoading:x,error:b,openMedia:C,closeMedia:w,downloadCurrent:A,formatFileSize:N}=UA(),[T,j]=M.useState(null),I=M.useRef(null);M.useEffect(()=>{a&&r?C(r,o,d):a||w()},[a,r,o,d,C,w]),M.useEffect(()=>{const H=U=>{U.key==="Escape"&&a&&t()};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a,t]);const k=H=>{H.target===H.currentTarget&&t()},D=()=>{if(!h?.media)return null;const{fileInfo:H,objectUrl:U}=h.media;switch(H.file_type){case"image":case"avatar":return l.jsx("img",{src:U,alt:H.file_name,className:"media-viewer-image",onLoad:()=>console.log("Image loaded"),onError:()=>console.error("Image failed to load")});case"video":return l.jsxs("div",{className:"media-viewer-video-container",children:[l.jsx("video",{ref:I,src:U,controls:!0,className:"media-viewer-video",autoPlay:!1,onLoadedData:()=>console.log("Video loaded"),onError:()=>console.error("Video failed to load")}),T&&l.jsx("div",{className:"media-viewer-controls",children:T})]});case"audio":return l.jsxs("div",{className:"media-viewer-audio-container",children:[l.jsx("div",{className:"audio-icon",children:l.jsx("i",{className:"fas fa-music"})}),l.jsxs("div",{className:"audio-info",children:[l.jsx("h3",{children:H.file_name}),l.jsx("p",{children:N(H.file_size)})]}),l.jsx("audio",{src:U,controls:!0,className:"media-viewer-audio",onLoadedData:()=>console.log("Audio loaded"),onError:()=>console.error("Audio failed to load")})]});case"document":return H.mime_type==="application/pdf"?l.jsx("iframe",{src:U,className:"media-viewer-pdf",title:H.file_name}):l.jsx("div",{className:"media-viewer-document-container",children:l.jsxs("div",{className:"document-preview",children:[l.jsx("i",{className:"fas fa-file-alt fa-5x"}),l.jsx("h3",{children:H.file_name}),l.jsx("p",{children:N(H.file_size)}),l.jsxs("button",{className:"btn-primary",onClick:A,children:[l.jsx("i",{className:"fas fa-download"})," Download"]})]})});default:return l.jsxs("div",{className:"media-viewer-error",children:[l.jsx("i",{className:"fas fa-exclamation-circle"}),l.jsx("p",{children:"Unsupported media type"})]})}};return a?l.jsx("div",{className:"media-viewer-overlay",onClick:k,children:l.jsxs("div",{className:"media-viewer-content",children:[l.jsxs("div",{className:"media-viewer-header",children:[l.jsx("button",{className:"media-viewer-close",onClick:t,title:"Close",children:l.jsx("i",{className:"fas fa-times"})}),l.jsx("div",{className:"media-viewer-info",children:h?.fileInfo&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"media-filename",children:h.fileInfo.file_name}),l.jsx("span",{className:"media-filesize",children:N(h.fileInfo.file_size)})]})}),h?.fileInfo?.file_type!=="avatar"&&!d.hideDownload&&l.jsx("button",{className:"media-viewer-download",onClick:A,title:"Download",children:l.jsx("i",{className:"fas fa-download"})})]}),l.jsxs("div",{className:"media-viewer-body",children:[x&&l.jsxs("div",{className:"media-viewer-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Loading..."})]}),b&&l.jsxs("div",{className:"media-viewer-error",children:[l.jsx("i",{className:"fas fa-exclamation-circle"}),l.jsx("p",{children:b})]}),l.jsx("div",{className:"media-viewer-container",children:D()})]})]})}):null},W2=M.createContext(),zA=({children:a})=>{const[t,r]=M.useState(()=>localStorage.getItem("theme")||"light"),o=()=>{r(h=>h==="light"?"dark":"light")};M.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),t==="dark"?(document.body.classList.add("dark-mode"),document.body.classList.remove("light-mode")):(document.body.classList.add("light-mode"),document.body.classList.remove("dark-mode")),localStorage.setItem("theme",t)},[t]);const d={theme:t,toggleTheme:o,isDark:t==="dark",isLight:t==="light"};return l.jsx(W2.Provider,{value:d,children:a})},al=()=>{const a=M.useContext(W2);if(!a)throw new Error("useTheme must be used within a ThemeProvider");return a},$i=()=>{const{isDark:a}=al(),t=a;return l.jsxs("div",{className:`messaging-loader-overlay transition-colors duration-300 ${t?"bg-slate-900":"bg-gray-100"}`,children:[l.jsx("style",{children:`
        @keyframes simpleBounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-5px); }
        }
        @keyframes floatCloud {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-6px); }
        }
        @keyframes shadowPulse {
          0%, 100% { transform: scaleX(1); opacity: 0.3; }
          50% { transform: scaleX(0.8); opacity: 0.1; }
        }
        @keyframes signalBlink {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 1; }
        }
      `}),l.jsx("div",{className:"relative flex flex-col items-center",children:l.jsxs("svg",{width:"120",height:"80",viewBox:"0 0 120 80",className:"overflow-visible",children:[l.jsxs("g",{style:{animation:"floatCloud 3s ease-in-out infinite"},children:[l.jsx("path",{d:"M85 20 Q92 15 99 20",fill:"none",stroke:t?"#3b82f6":"#2563eb",strokeWidth:"2.5",strokeLinecap:"round",style:{animation:"signalBlink 2s infinite",animationDelay:"0s"}}),l.jsx("path",{d:"M88 28 Q92 25 96 28",fill:"none",stroke:t?"#3b82f6":"#2563eb",strokeWidth:"2.5",strokeLinecap:"round",style:{animation:"signalBlink 2s infinite",animationDelay:"0.5s"}}),l.jsx("path",{d:"M35,55 L85,55 C96.046,55 105,46.046 105,35 C105,23.954 96.046,15 85,15 C82.5,15 80.15,15.5 78,16.5 C74.5,9.5 67.5,5 59,5 C48,5 39,13 37.5,23.5 C36.5,23.2 35.5,23 34.5,23 C21,23 10,34 10,47.5 C10,51.6 13.4,55 17.5,55 L35,55 Z",fill:t?"#1e293b":"#ffffff",stroke:t?"#3b82f6":"#2563eb",strokeWidth:"3",strokeLinejoin:"round",className:"drop-shadow-lg"}),l.jsx("circle",{cx:"40",cy:"37",r:"4",fill:t?"#60a5fa":"#3b82f6",style:{animation:"simpleBounce 1s infinite ease-in-out",animationDelay:"0s"}}),l.jsx("circle",{cx:"60",cy:"37",r:"4",fill:t?"#60a5fa":"#3b82f6",style:{animation:"simpleBounce 1s infinite ease-in-out",animationDelay:"0.2s"}}),l.jsx("circle",{cx:"80",cy:"37",r:"4",fill:t?"#60a5fa":"#3b82f6",style:{animation:"simpleBounce 1s infinite ease-in-out",animationDelay:"0.4s"}})]}),l.jsx("ellipse",{cx:"60",cy:"70",rx:"35",ry:"4",fill:t?"#0f172a":"#cbd5e1",style:{animation:"shadowPulse 3s ease-in-out infinite"}})]})}),l.jsx("div",{className:"mt-6 flex flex-col items-center",children:l.jsx("p",{className:`text-sm font-bold tracking-[0.2em] ${t?"text-blue-400":"text-blue-600"}`,children:"CONNECTING"})})]})},FA=(a,t,r)=>{const{supabase:o}=fs(),d=M.useCallback(h=>{t(h.new)},[t,r]);M.useEffect(()=>{if(!a||!o)return;const h=o.channel(`chat_messages_${a}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${a}`},d).subscribe();return()=>{h.unsubscribe()}},[a,o,d])},HA=(a,t)=>{const{supabase:r}=fs(),[o,d]=M.useState(!1);M.useEffect(()=>{if(!a||!r)return;const x=r.channel(`typing_${a}`).on("broadcast",{event:"typing"},b=>{b.payload.userId!==t&&(d(b.payload.isTyping),b.payload.isTyping&&setTimeout(()=>d(!1),3e3))}).subscribe();return()=>x.unsubscribe()},[a,t,r]);const h=M.useCallback(x=>{if(!r||!a)return;r.channel(`typing_${a}`).send({type:"broadcast",event:"typing",payload:{userId:t,isTyping:x}})},[r,a,t]);return{isOtherUserTyping:o,sendTypingStatus:h}},qA=(a,t)=>{const{supabase:r}=fs();M.useEffect(()=>{if(!a||!r)return;const o=r.channel(`message_status_${a}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`chat_id=eq.${a}`},d=>{t(d.new)}).subscribe();return()=>o.unsubscribe()},[a,t,r])};class _x{static play(t="default"){try{const r={default:"/assets/audio/nice_ring_tones.mp3",message:"/assets/audio/linkedin_notification.mp3",call:"/assets/audio/professional.mp3",reminder:"/assets/audio/Sakura-Girl-Wake-Up-chosic.com_.mp3"},o=r[t]||r.default,d=new Audio(o);d.volume=.5;const h=d.play();return h!==void 0&&h.catch(x=>{console.log("Audio play failed:",x)}),!0}catch(r){return console.error("Error playing notification sound:",r),!1}}static playMessageNotification(){return this.play("message")}static playCallNotification(){return this.play("call")}static playReminderNotification(){return this.play("reminder")}}const O0=()=>{const{chatId:a,otherUserId:t,userId:r}=ld(),o=hs(),{supabase:d}=fs(),{chatTheme:h,chatThemes:x,selectTheme:b,setChatId:C,setScrollPercentage:w}=t1(),{startCall:A}=yi(),{user:N,loading:T,isAuthenticated:j}=$r();M.useEffect(()=>{a&&C(a)},[a,C]);const[I,k]=M.useState([]),[D,H]=M.useState(null),[U,P]=M.useState(null),[K,Z]=M.useState(new Set),[Y,V]=M.useState(!1),[$,q]=M.useState(!1),[ue,fe]=M.useState(!1),[ie,be]=M.useState(!1),[Re,G]=M.useState(0),[J,oe]=M.useState(!0),[ke,Ve]=M.useState(!1),[Ke,ne]=M.useState(!1),[ye,Le]=M.useState(!1),[Ue,Xe]=M.useState(""),[Ee,$e]=M.useState([]),[De,Ce]=M.useState(!1),[Je,gt]=M.useState(!1),[Wt,ht]=M.useState(null),kt=M.useRef(null),yn=M.useRef(null),un=M.useRef(null),Dt=a&&a!=="new"?a:null,{data:St,isLoading:mt,refetch:ns}=GC({queryKey:["messages",Dt],queryFn:async()=>{if(!Dt)return[];const{data:je,error:Me}=await d.from("messages").select("*").eq("chat_id",Dt).order("created_at",{ascending:!0});if(Me)throw Me;return je||[]},enabled:!!Dt});M.useEffect(()=>{St&&k(St)},[St]);const ze=M.useCallback(je=>{k(Me=>Me.some(vn=>vn.id===je.id)?Me:[...Me,je]),je.sender_id!==N?.id&&!$&&_x.playMessageNotification(),J?Rt():G(Me=>Me+1)},[J,N?.id,$]);FA(Dt,ze,N?.id);const{isOtherUserTyping:Ns,sendTypingStatus:Ie}=HA(Dt,N?.id),Fe=M.useCallback(je=>{k(Me=>Me.map(We=>We.id===je.id?je:We))},[]);qA(Dt,Fe),M.useEffect(()=>{if(!T&&!j){o("/login");return}return!T&&j&&N&&nt(),()=>{_t()}},[a,t,r,T,j,N]),M.useEffect(()=>{ss()},[I]),M.useEffect(()=>{const je=JSON.parse(localStorage.getItem("mutedChats")||"{}");q(!!je[a]);const Me=JSON.parse(localStorage.getItem("tempChats")||"{}");fe(!!Me[a])},[a,N]);const nt=async()=>{try{r&&(!a||a==="new")?await Rn(N,r):a&&t&&await rn(t)}catch(je){console.error("Error initializing chat:",je)}},_t=()=>{un.current&&clearTimeout(un.current)},Rn=async(je,Me)=>{try{const{data:We,error:vn}=await d.from("chats").select("id").or(`and(user1_id.eq.${je.id},user2_id.eq.${Me}),and(user1_id.eq.${Me},user2_id.eq.${je.id})`).single();if(We&&!vn){o(`/chat/${We.id}/${Me}`,{replace:!0});return}const{data:Ar,error:dr}=await d.from("chats").insert([{user1_id:je.id,user2_id:Me,last_message:null,last_message_time:new Date().toISOString()}]).select().single();if(dr)throw dr;o(`/chat/${Ar.id}/${Me}`,{replace:!0})}catch(We){console.error("Error handling new chat:",We),o("/",{replace:!0})}},rn=async je=>{try{const{data:Me,error:We}=await d.from("users").select("*").eq("id",je).single();if(We)throw We;H(Me)}catch(Me){console.error("Error loading user info:",Me)}},Gt=async()=>{if(!(!window.confirm(`Block ${D.name}? They won't be able to message or call you.`)||!N))try{const{error:Me}=await d.from("blocked_users").insert([{blocker_id:N.id,blocked_id:D.id}]);if(Me)throw Me;o("/")}catch(Me){console.error("Error blocking user:",Me)}},qn=async(je,Me=null)=>{if(!(!je.trim()&&!Me||!N))try{const We={id:crypto.randomUUID(),chat_id:a,sender_id:N.id,receiver_id:t,content:je.trim()||(Me?Me.fileName:""),message_type:Me?Me.mediaType:"text",is_read:!1};Me&&(We.media_url=Me.mediaUrl,We.media_type=Me.mediaType,We.file_name=Me.fileName,We.file_size=Me.fileSize);const{data:vn,error:Ar}=await d.from("messages").insert([We]).select();if(Ar)throw Ar;vn&&vn[0]&&k(_s=>[..._s,vn[0]]);const dr=Me?` ${Me.fileName}`:je.substring(0,50);await d.from("chats").update({last_message:dr,last_message_time:new Date().toISOString()}).eq("id",a),P(null),_x.playMessageNotification()}catch(We){console.error("Error sending message:",We)}},Qn=()=>{Ie(!0),un.current&&clearTimeout(un.current),un.current=setTimeout(()=>{Ie(!1)},3e3)},ss=()=>{kt.current?.scrollIntoView({behavior:"smooth"}),oe(!0)},Rt=M.useCallback(async()=>{try{if(!N||!a||a==="new")return;await d.from("messages").update({is_read:!0}).eq("chat_id",a).eq("receiver_id",N.id).eq("is_read",!1)}catch(je){console.error("Error marking messages as read:",je)}},[N,a,d]),Ne=je=>{P(je)},dt=()=>{P(null)},ft=je=>{Z(Me=>{const We=new Set(Me);return We.has(je)?We.delete(je):We.add(je),V(We.size>0),We})},Ht=()=>{Z(new Set),V(!1)},Ys=()=>{K.size!==0&&Le(!0)},Er=async()=>{Le(!1);try{const{error:je}=await d.from("messages").delete().in("id",Array.from(K));if(je)throw je;k(Me=>Me.filter(We=>!K.has(We.id))),Ht()}catch(je){console.error("Error deleting messages:",je),alert("Failed to delete messages")}},Ds=()=>{Le(!1)},vt=()=>{const Me=I.filter(We=>K.has(We.id)).map(We=>`${We.sender_id===N.id?"You":D.name}: ${We.content}`).join(`

`);navigator.clipboard.writeText(`Forwarded messages:

${Me}`),Ht(),alert("Messages copied to clipboard for forwarding")},On=()=>{const Me=I.filter(We=>K.has(We.id)).map(We=>We.content).join(`

`);navigator.clipboard.writeText(Me),Ht(),alert("Messages copied to clipboard")},ge=()=>{if(!t||t==="undefined"){alert("User information not available");return}o(`/user-details/${t}`)},qe=()=>{o(`/create-reminder?userId=${t}`)},lt=async()=>{try{const je=!$,Me=JSON.parse(localStorage.getItem("mutedChats")||"{}");je?Me[a]=!0:delete Me[a],localStorage.setItem("mutedChats",JSON.stringify(Me)),q(je)}catch(je){console.error("Error toggling mute:",je)}},an=()=>{ne(!0)},zt=async je=>{if(!(!je.trim()||!a)){Ce(!0);try{const{data:Me,error:We}=await d.from("messages").select("*").eq("chat_id",a).ilike("content",`%${je}%`).order("created_at",{ascending:!1}).limit(50);if(We)throw We;$e(Me||[])}catch(Me){console.error("Error searching messages:",Me),$e([])}finally{Ce(!1)}}},In=je=>{const Me=je.target.value;Xe(Me),Me.trim()?zt(Me):$e([])},X=je=>{const Me=document.getElementById(`message-${je}`);Me&&(Me.scrollIntoView({behavior:"smooth",block:"center"}),Me.style.backgroundColor="rgba(76, 175, 80, 0.2)",setTimeout(()=>{Me.style.backgroundColor=""},2e3)),ne(!1),Xe(""),$e([])},Ae=()=>{Ve(!0)},jt=async je=>{await b(je),Ve(!1)},Mn=async()=>{try{const je=!ue,Me=JSON.parse(localStorage.getItem("tempChats")||"{}");je?Me[a]={enabled:!0,duration:1440*60*1e3}:delete Me[a],localStorage.setItem("tempChats",JSON.stringify(Me)),fe(je)}catch(je){console.error("Error toggling temp chat:",je)}},gs=()=>{alert("Temp chat settings coming soon!")},wn=async()=>{if(window.confirm("Clear all messages in this chat? This cannot be undone."))try{const{error:Me}=await d.from("messages").delete().eq("chat_id",a);if(Me)throw Me;k([]),await d.from("chats").update({last_message:null,last_message_time:new Date().toISOString()}).eq("id",a)}catch(Me){console.error("Error clearing chat:",Me),alert("Failed to clear chat. Please try again.")}},Kt=async()=>{try{const{callId:je}=await A(D.id,"voice");o(`/call/${je}`)}catch(je){console.error("Failed to start voice call:",je),alert("Failed to start call: "+je.message)}},rs=async()=>{try{const{callId:je}=await A(D.id,"video");o(`/call/${je}`)}catch(je){console.error("Failed to start video call:",je),alert("Failed to start call: "+je.message)}},He=je=>{const Me=je.target,We=Me.scrollHeight-Me.scrollTop-Me.clientHeight,vn=We<50;if(be(We>300),oe(vn),Me.scrollHeight>Me.clientHeight){const Ar=Me.scrollTop/(Me.scrollHeight-Me.clientHeight)*100;w(Ar)}else w(0);vn&&Re>0&&(G(0),Rt())},ms=()=>{kt.current?.scrollIntoView({behavior:"smooth"}),be(!1),G(0),oe(!0),Rt()},kn=(je,Me,We)=>{const vn={file_name:We.file_name||"Unknown",file_size:We.file_size||0,mime_type:We.media_type||"image/jpeg",storage_url:je,file_type:Me};ht({fileInfo:vn}),gt(!0)},Zt=async(je,Me)=>{try{const We=document.createElement("a");We.href=je,We.download=`media_${Me}`,We.target="_blank",document.body.appendChild(We),We.click(),document.body.removeChild(We)}catch(We){console.error("Download failed:",We),alert("Failed to download media")}};return!D||!N?l.jsx($i,{}):l.jsxs("div",{className:"chat-screen",children:[l.jsxs("header",{className:"chat-header",children:[l.jsx("button",{className:"back-btn",onClick:()=>o("/"),children:l.jsx(rl,{size:20})}),l.jsxs("div",{className:"chat-user-info",onClick:ge,style:{cursor:"pointer"},children:[l.jsx("div",{className:"user-avatar",children:D.avatar?parseInt(D.avatar)?l.jsx("img",{src:ks.find(je=>je.id===parseInt(D.avatar))?.path||D.avatar,alt:D.name}):l.jsx("img",{src:D.avatar,alt:D.name}):D.name.charAt(0).toUpperCase()}),l.jsxs("div",{className:"user-details",children:[l.jsx("h3",{className:"user-name",children:D.name}),l.jsx("p",{className:"user-status",children:Ns?"typing...":D.is_online?"Online":"Offline"})]})]}),l.jsxs("div",{className:"chat-actions",children:[l.jsx("button",{className:"icon-btn",onClick:Kt,title:"Voice Call",children:l.jsx(Gs,{size:20})}),l.jsx("button",{className:"icon-btn",onClick:rs,title:"Video Call",children:l.jsx(wi,{size:20})}),l.jsx(a1,{items:[{icon:l.jsx(r1,{size:16}),label:"View Contact",onClick:ge},{icon:l.jsx(sd,{size:16}),label:"Create Reminder",onClick:qe},{icon:$?l.jsx(sd,{size:16}):l.jsx(q2,{size:16}),label:$?"Unmute Notifications":"Mute Notifications",onClick:lt},{icon:l.jsx(uc,{size:16}),label:"Search Messages",onClick:an},{icon:l.jsx(GE,{size:16}),label:"Themes",onClick:Ae},{divider:!0},{icon:l.jsx(j0,{size:16}),label:ue?"Disable Temporary Chat":"Enable Temporary Chat",onClick:Mn},{icon:l.jsx(nc,{size:16}),label:"Temp Chat Settings",onClick:gs,disabled:!ue},{icon:l.jsx(Ms,{size:16}),label:"Clear Chat",onClick:wn},{divider:!0},{icon:l.jsx(nd,{size:16}),label:"Block User",onClick:Gt,danger:!0}]})]})]}),Y&&l.jsxs("div",{className:"selection-toolbar",children:[l.jsx("button",{className:"selection-close-btn",onClick:Ht,children:""}),l.jsxs("div",{className:"selection-info",children:[K.size," selected"]}),l.jsxs("div",{className:"selection-actions",children:[l.jsx("button",{className:"selection-action-btn",title:"Copy",onClick:On,children:l.jsx(G2,{size:16})}),l.jsx("button",{className:"selection-action-btn",title:"Forward",onClick:vt,children:l.jsx(Z_,{size:16})}),l.jsx("button",{className:"selection-action-btn",title:"Delete",onClick:Ys,children:l.jsx(Ms,{size:16})})]})]}),l.jsxs("div",{className:"messages-container",onScroll:He,ref:yn,children:[l.jsx(MA,{messages:I,currentUser:N,selectedMessages:K,isSelectionMode:Y,onMessageSelect:ft,onReply:Ne,onDelete:je=>k(Me=>Me.filter(We=>We.id!==je)),onMediaView:kn,onMediaDownload:Zt}),l.jsx(LA,{isVisible:Ns}),l.jsx("div",{ref:kt}),ie&&l.jsxs("button",{className:"scroll-bottom-btn",onClick:ms,children:[l.jsx(Q_,{size:20}),Re>0&&l.jsx("span",{className:"unread-count",children:Re})]})]}),l.jsx(DA,{onSendMessage:qn,onTyping:Qn,replyingTo:U,onCancelReply:dt,chatId:a,receiverId:t}),l.jsx(_a,{isOpen:Ke,onClose:()=>{ne(!1),Xe(""),$e([])},title:"Search Messages",size:"medium",children:l.jsxs("div",{className:"search-modal-content",children:[l.jsx("div",{className:"search-input-container",children:l.jsx("input",{type:"text",placeholder:"Search messages...",value:Ue,onChange:In,className:"search-input",autoFocus:!0})}),l.jsx("div",{className:"search-results",children:De?l.jsx($i,{}):Ee.length>0?Ee.map(je=>l.jsxs("div",{className:"search-result-item",onClick:()=>X(je.id),children:[l.jsx("div",{className:"search-result-content",children:je.content}),l.jsx("div",{className:"search-result-time",children:new Date(je.created_at).toLocaleDateString()})]},je.id)):Ue.trim()?l.jsx("div",{className:"no-results",children:"No messages found"}):l.jsx("div",{className:"search-placeholder",children:"Type to search messages"})})]})}),l.jsx(_a,{isOpen:ye,onClose:Ds,title:`Delete ${K.size} message(s)?`,size:"small",children:l.jsxs("div",{className:"delete-confirmation-content",children:[l.jsx("p",{children:"Are you sure you want to delete the selected messages? This action cannot be undone."}),l.jsxs("div",{className:"delete-modal-actions",children:[l.jsx("button",{className:"delete-cancel-btn",onClick:Ds,children:"Cancel"}),l.jsx("button",{className:"delete-confirm-btn",onClick:Er,children:"Confirm Delete"})]})]})}),l.jsx(_a,{isOpen:ke,onClose:()=>Ve(!1),title:"Choose Theme",size:"large",children:l.jsx("div",{className:"theme-selector",children:l.jsx("div",{className:"theme-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"20px"},children:Object.entries(x).map(([je,Me])=>l.jsxs("div",{className:`theme-card ${h===je?"active":""}`,onClick:()=>jt(je),style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",transition:"all 0.3s ease",transform:h===je?"scale(1.05)":"scale(1)",filter:h===je?"brightness(1.1)":"brightness(1)"},children:[l.jsxs("div",{className:"theme-preview-card",style:{width:"120px",height:"80px",borderRadius:"12px",overflow:"hidden",border:h===je?"3px solid #25d366":"2px solid rgba(0,0,0,0.1)",boxShadow:h===je?"0 8px 25px rgba(37, 211, 102, 0.3)":"0 4px 15px rgba(0,0,0,0.1)",position:"relative",background:"white"},children:[l.jsx("div",{style:{width:"100%",height:"65%",background:Me.background,backgroundSize:"cover",backgroundPosition:"center"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",height:"35%",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)"},children:[l.jsx("div",{style:{width:"32px",height:"10px",borderRadius:"6px",background:Me.sentMessage.background,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),l.jsx("div",{style:{width:"32px",height:"10px",borderRadius:"6px",background:Me.receivedMessage.background,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}})]}),h===je&&l.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"20px",height:"20px",borderRadius:"50%",background:"linear-gradient(135deg, #25d366, #128c7e)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:""})]}),l.jsx("div",{className:"theme-name",style:{marginTop:"12px",fontSize:"13px",fontWeight:"600",color:h===je?"#25d366":"#374151",textAlign:"center",fontFamily:'"Inter", "SF Pro Display", -apple-system, BlinkMacSystemFont, sans-serif',letterSpacing:"0.3px",lineHeight:"1.2",textShadow:h===je?"0 1px 3px rgba(37, 211, 102, 0.2)":"none",transition:"all 0.3s ease"},children:Me.name})]},je))})})}),l.jsx(PA,{isOpen:Je,onClose:()=>{gt(!1),ht(null)},mediaId:Wt?.mediaId,fileInfo:Wt?.fileInfo})]})},VA=a=>{const{supabase:t}=fs(),[r,o]=M.useState([]),[d,h]=M.useState(!0),x=M.useCallback(async C=>{if(!C){h(!1);return}try{const{data:w,error:A}=await t.from("chat_list_view").select("*").or(`user1_id.eq.${C},user2_id.eq.${C}`).order("last_message_time",{ascending:!1});if(A){console.error("Error loading chats from view:",A);const T=localStorage.getItem(`chats_${C}`),j=T?JSON.parse(T):[];o(j),h(!1);return}const N=(w||[]).map(T=>{const j=T.user1_id===C,I={id:j?T.user2_id:T.user1_id,name:j?T.user2_name:T.user1_name,phone:j?T.user2_id:T.user1_id,avatar:j?T.user2_avatar:T.user1_avatar,is_online:j?T.user2_online:T.user1_online};return{id:T.chat_id,otherUser:I,last_message:T.last_message,last_message_time:T.last_message_time,unreadCount:parseInt(T.unread_count)||0}});o(N)}catch(w){console.error("Error loading chats:",w),o([])}finally{h(!1)}},[t]),b=M.useCallback(async C=>{const{data:w}=await t.from("chat_list_view").select("*").eq("chat_id",C).single();if(w&&(w.user1_id===a||w.user2_id===a)){const A=w.user1_id===a,N={id:A?w.user2_id:w.user1_id,name:A?w.user2_name:w.user1_name,phone:A?w.user2_id:w.user1_id,avatar:A?w.user2_avatar:w.user1_avatar,is_online:A?w.user2_online:w.user1_online},T={id:w.chat_id,otherUser:N,last_message:w.last_message,last_message_time:w.last_message_time,unreadCount:parseInt(w.unread_count)||0};o(j=>{const I=j.findIndex(k=>k.id===C);if(I>=0){const k=[...j];return k[I]=T,k.sort((D,H)=>new Date(H.last_message_time)-new Date(D.last_message_time))}else return[T,...j]})}},[a,t]);return M.useEffect(()=>{a?x(a):(o([]),h(!1))},[a,x]),M.useEffect(()=>{if(!a)return;const C=t.channel("chat_list_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async A=>{const N=A.new;(N.sender_id===a||N.receiver_id===a)&&await b(N.chat_id)}).subscribe(),w=t.channel("chat_list_chats").on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats"},A=>{(A.new.user1_id===a||A.new.user2_id===a)&&b(A.new.id)}).subscribe();return()=>{C&&C.unsubscribe(),w&&w.unsubscribe()}},[a,b,t]),{chats:r,setChats:o,loading:d}},GA=()=>{const{supabase:a}=fs(),{user:t,loading:r,signOut:o}=$r(),{theme:d}=al(),h=hs(),{chatId:x,otherUserId:b}=ld(),[C,w]=M.useState(null),[A,N]=M.useState(""),[T,j]=M.useState(!1),[I,k]=M.useState([]),[D,H]=M.useState(!1),[U,P]=M.useState(!0),[K,Z]=M.useState(!1),[Y,V]=M.useState(!1),[$,q]=M.useState(!1),[ue,fe]=M.useState(""),[ie,be]=M.useState(""),[Re,G]=M.useState([]),[J,oe]=M.useState(!1),[ke,Ve]=M.useState(!1),[Ke,ne]=M.useState(null),[ye,Le]=M.useState(!1),[Ue,Xe]=M.useState(""),[Ee,$e]=M.useState(""),[De,Ce]=M.useState(""),[Je,gt]=M.useState(!1),[Wt,ht]=M.useState(!1),[kt,yn]=M.useState(!1),[un,Dt]=M.useState(null),{chats:St,loading:mt}=VA(C?.id?C.id:null),ns=St.filter(ge=>!ge.otherUser?.phone?.includes("1234")&&ge.otherUser?.id!=="support-account");M.useEffect(()=>{r||ze()},[r,t]),M.useEffect(()=>{K&&C&&Ie()},[K]);const ze=async()=>{try{if(!t){console.log(" No valid user found, redirecting to login"),P(!1),h("/login");return}console.log(" Google auth user detected, using user data");const ge={id:t.id,name:t.name,email:t.email,phone:t.phone||"",avatar:t.avatar};w(ge),localStorage.setItem("currentUser",JSON.stringify(ge)),oe(t.is_admin||!1),await Ns(t.id),P(!1)}catch(ge){console.error("Error initializing home:",ge),P(!1)}},Ns=async ge=>{try{const{data:qe,error:lt}=await a.from("users").select("phone").eq("id",ge).single();if(lt){console.error("Error checking profile completion:",lt);return}(!qe||!qe.phone||qe.phone.trim()==="")&&Ve(!0)}catch(qe){console.error("Error in checkProfileCompletion:",qe)}},Ie=async()=>{try{if(!C||!C.id){G([]);return}console.log("Loading saved contacts for user:",C.id);const{data:ge,error:qe}=await a.from("contacts").select(`
          *,
          contact_user:users!contacts_contact_user_id_fkey(*)
        `).eq("user_id",C.id);if(qe){console.error("Error loading contacts from database:",qe),G([]);return}console.log("Loaded contacts:",ge);const lt=ge?ge.map(an=>({id:an.contact_user.id,name:an.contact_user.name,phone:an.contact_user.phone,avatar:an.contact_user.avatar})):[];G(lt)}catch(ge){console.error("Error loading saved contacts:",ge),G([])}},Fe=ge=>{h(`/chat/${ge.id}/${ge.otherUser.id}`)},nt=ge=>{h(ge)},_t=()=>{o(),h("/login")},Rn=async ge=>{ge.preventDefault();const qe=Ue.trim();if(!/^[0-9]{10}$/.test(qe)){alert("Please enter a valid 10-digit phone number");return}if(!Ee||Ee.length<6){alert("Password is required and must be at least 6 characters long");return}if(Ee!==De){alert("Passwords do not match");return}try{yn(!0);const{data:an}=await a.from("users").select("id").eq("id",t.id).single(),zt={id:t.id,name:t.user_metadata?.full_name||t.user_metadata?.name||"User",email:t.email,phone:qe,avatar:t.user_metadata?.avatar_url||null,created_at:new Date().toISOString()};if(Ee&&Ee.length>0&&(zt.password=Ee),an){const{error:X}=await a.from("users").update(zt).eq("id",t.id);if(X){console.error("Database error:",X),alert("Failed to save phone number and password. Please try again.");return}}else{const{error:X}=await a.from("users").insert([zt]);if(X){console.error("Database error:",X),alert("Failed to create account. Please try again.");return}}const In={id:t.id,name:t.user_metadata?.full_name||t.user_metadata?.name||"User",email:t.email,phone:qe,avatar:t.user_metadata?.avatar_url||null};localStorage.setItem("currentUser",JSON.stringify(In)),w(In),Ve(!1),Xe(""),$e(""),Ce("")}catch(an){console.error("Phone submission error:",an),alert("An error occurred. Please try again.")}finally{yn(!1)}},rn=()=>{h("/about")},Gt=()=>{h("/support")},qn=async()=>{try{if(!ue.trim()||!ie.trim()){alert("Please enter both name and phone number");return}if(ie.length!==10){alert("Please enter a valid 10-digit phone number");return}const ge=ie.startsWith("+")?ie.substring(1):ie,{data:qe,error:lt}=await a.from("users").select("id, name, phone").eq("phone",ge).neq("id",C.id).single();if(lt||!qe){alert("No user found with this phone number");return}const{data:an,error:zt}=await a.from("contacts").select("id").eq("user_id",C.id).eq("contact_user_id",qe.id).single();if(an&&!zt){alert("Contact already exists"),V(!1),fe(""),be("");return}const{error:In}=await a.from("contacts").insert([{user_id:C.id,contact_user_id:qe.id}]);if(In){console.error("Error saving contact:",In),alert("Failed to save contact");return}alert("Contact saved successfully!"),fe(""),be(""),V(!1),await Ie()}catch(ge){console.error("Error in handleSaveContact:",ge),alert("Failed to save contact")}},Qn=async ge=>{try{if(!window.confirm("Delete this contact?"))return;const{error:lt}=await a.from("contacts").delete().eq("user_id",C.id).eq("contact_user_id",ge);if(lt){console.error("Error deleting contact:",lt),alert("Failed to delete contact");return}alert("Contact deleted successfully"),await Ie(),Dt(null)}catch(qe){console.error("Error in handleDeleteContact:",qe),alert("Failed to delete contact")}},ss=(ge,qe,lt)=>{qe.stopPropagation();const an=lt<3;Dt({id:un?.id===ge?null:ge,showAbove:an})},Rt=ge=>{un?Dt(null):vt(ge)},Ne=ge=>{alert(`Edit functionality for ${ge.name} coming soon!`),Dt(null)},dt=ge=>ge.split(" ").map(qe=>qe[0]).join("").toUpperCase().slice(0,2),ft=ge=>{if(!ge)return"";const qe=new Date(ge),an=new Date-qe,zt=Math.floor(an/6e4),In=Math.floor(an/36e5),X=Math.floor(an/864e5);return zt<1?"now":zt<60?`${zt}m`:In<24?`${In}h`:`${X}d`},Ht=M.useMemo(()=>ns.filter(ge=>{if(!A)return!0;const qe=A.toLowerCase();return ge.otherUser.name.toLowerCase().includes(qe)||ge.otherUser.phone&&ge.otherUser.phone.includes(qe)}),[ns,A]),Ys=async ge=>{try{if(ge==="1234"){k([{id:"support-account",name:"CaBa Support",phone:"1234",avatar:null,is_online:!0}]),H(!0);return}const qe=ge.startsWith("+")?ge.substring(1):ge,{data:lt,error:an}=await a.from("users").select("id, name, phone, avatar, is_online").eq("phone",qe).neq("id",C?.id).eq("is_admin",!1).limit(1);if(an)throw an;k(lt||[]),H(lt&&lt.length>0)}catch(qe){console.error("Error searching users:",qe),k([]),H(!1)}},Er=ge=>{const qe=ge.target.value;N(qe),/^\d{10}$/.test(qe)?Ys(qe):(k([]),H(!1))},Ds=ge=>{if(ge.id==="support-account"){h("/support"),j(!1),N(""),k([]),H(!1);return}const qe=ns.find(lt=>lt.otherUser.id===ge.id);qe?Fe(qe):h(`/chat/new/${ge.id}`),j(!1),N(""),k([]),H(!1)},vt=ge=>{const qe=ns.find(lt=>lt.otherUser.id===ge.id);qe?Fe(qe):h(`/chat/new/${ge.id}`),Z(!1),q(!1)};if(r||U)return l.jsx($i,{});if(ke)return l.jsx("div",{className:"home-container",children:l.jsx(_a,{isOpen:ke,onClose:()=>{},title:"Complete Your Profile",size:"medium",children:l.jsxs("div",{className:"phone-completion-modal",children:[l.jsxs("div",{className:"phone-modal-header",children:[l.jsx("h3",{children:"Complete Your Profile"}),l.jsx("p",{children:"Please provide your phone number and create a password to complete your account setup."})]}),l.jsxs("form",{onSubmit:Rn,className:"phone-form",children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"phone",children:"Phone Number"}),l.jsx("input",{type:"tel",id:"phone",placeholder:"10 digit mobile number",pattern:"[0-9]{10}",maxLength:"10",required:!0,autoComplete:"tel",value:Ue,onChange:ge=>Xe(ge.target.value.replace(/\D/g,"").slice(0,10)),disabled:kt}),l.jsx("small",{children:"10 digits without country code"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"password",children:"Password (Required for backup login)"}),l.jsxs("div",{className:"password-input",children:[l.jsx("input",{type:Je?"text":"password",id:"password",placeholder:"Create a password (min 6 characters)",minLength:"6",required:!0,value:Ee,onChange:ge=>$e(ge.target.value),disabled:kt}),l.jsx("button",{type:"button",className:"toggle-password",onClick:()=>gt(!Je),children:Je?l.jsx(qu,{size:16}):l.jsx(Zr,{size:16})})]}),l.jsx("small",{children:"Required: Create password for backup login"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),l.jsxs("div",{className:"password-input",children:[l.jsx("input",{type:Wt?"text":"password",id:"confirmPassword",placeholder:"Confirm your password",minLength:"6",required:!0,value:De,onChange:ge=>Ce(ge.target.value),disabled:kt}),l.jsx("button",{type:"button",className:"toggle-password",onClick:()=>ht(!Wt),children:Wt?l.jsx(qu,{size:16}):l.jsx(Zr,{size:16})})]})]}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:kt||Ue.length!==10,children:kt?"Saving...":"Save Profile"})]}),l.jsx("div",{className:"phone-modal-footer",children:l.jsxs("p",{className:"phone-note",children:[l.jsx("strong",{children:"Note:"})," Your phone number will be visible to other users for contact purposes. The password enables backup login access."]})})]})})});if(mt)return l.jsx($i,{});const On=!!x&&!!b;return l.jsxs("div",{className:"home-container",children:[l.jsxs("div",{className:`desktop-layout ${On?"chat-active":""}`,children:[l.jsxs("aside",{className:`sidebar ${On?"visible-on-mobile":"hidden-on-mobile"}`,children:[l.jsxs("div",{className:"sidebar-header",children:[l.jsx("div",{className:"app-logo-small",children:"CB"}),l.jsx("span",{className:"app-name-small",children:"CaBa"})]}),l.jsxs("nav",{className:"sidebar-nav",children:[l.jsxs("button",{className:"sidebar-item active",onClick:()=>nt("/"),children:[l.jsx(Ur,{size:20}),l.jsx("span",{className:"label",children:"Chats"})]}),l.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/calls"),children:[l.jsx(Gs,{size:20}),l.jsx("span",{className:"label",children:"Audio Call"})]}),l.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/qr"),children:[l.jsx(X2,{size:20}),l.jsx("span",{className:"label",children:"QR Code"})]}),l.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/news"),children:[l.jsx(gi,{size:20}),l.jsx("span",{className:"label",children:"News"})]}),l.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/settings"),children:[l.jsx(nc,{size:20}),l.jsx("span",{className:"label",children:"Settings"})]})]}),l.jsx("div",{className:"sidebar-footer",children:l.jsxs("button",{className:"user-profile-link",onClick:()=>nt("/profile"),children:[l.jsx("div",{className:"sidebar-avatar",children:C?.avatar?l.jsx("img",{src:parseInt(C.avatar)?ks.find(ge=>ge.id===parseInt(C.avatar))?.path:C.avatar,alt:C.name}):l.jsx("div",{children:dt(C?.name||"U")})}),l.jsx("span",{className:"user-name",children:C?.name||"User"})]})})]}),l.jsxs("main",{className:`main-content ${On?"hidden-on-mobile":""}`,children:[l.jsxs("header",{className:"top-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("h1",{children:"Chats"})}),l.jsxs("div",{className:"header-right",children:[l.jsx("button",{className:"icon-btn",onClick:()=>j(!T),title:"Search",children:l.jsx(uc,{size:20})}),l.jsx(a1,{items:[{icon:l.jsx(r1,{size:16}),label:"Profile",onClick:()=>nt("/profile")},{icon:l.jsx(nc,{size:16}),label:"Settings",onClick:()=>nt("/settings")},{icon:l.jsx(sd,{size:16}),label:"Check Reminders",onClick:()=>nt("/reminders")},...J?[{icon:l.jsx(fE,{size:16}),label:"Admin Panel",onClick:()=>nt("/admin")}]:[],{divider:!0},{icon:l.jsx(NE,{size:16}),label:"About App",onClick:rn},{icon:l.jsx(oE,{size:16}),label:"Help",onClick:Gt},{divider:!0},{icon:l.jsx(IE,{size:16}),label:"Logout",onClick:_t}]})]})]}),T&&l.jsxs("div",{className:"search-bar",children:[l.jsx(uc,{size:16}),l.jsx("input",{type:"text",placeholder:"Search by phone number...",value:A,onChange:Er}),l.jsx("button",{className:"close-search",onClick:()=>{j(!1),N(""),k([]),H(!1)},children:""})]}),T&&D&&I.length>0&&l.jsx("div",{className:"search-suggestions",children:I.map(ge=>l.jsxs("div",{className:"search-suggestion-item",onClick:()=>Ds(ge),children:[l.jsxs("div",{className:"suggestion-avatar",children:[ge.avatar?parseInt(ge.avatar)?l.jsx("img",{src:ks.find(qe=>qe.id===parseInt(ge.avatar))?.path||ge.avatar,alt:ge.name}):l.jsx("img",{src:ge.avatar,alt:ge.name}):l.jsx("div",{children:dt(ge.name)}),l.jsx("span",{className:`online-status ${ge.is_online?"online":""}`})]}),l.jsxs("div",{className:"suggestion-info",children:[l.jsx("div",{className:"suggestion-name",children:ge.name}),l.jsx("div",{className:"suggestion-phone",children:ge.phone})]})]},ge.id))}),l.jsx("div",{className:"chat-list-wrapper",children:mt?l.jsx("div",{className:"loading-state",children:l.jsx("p",{children:"Loading chats..."})}):Ht.length>0?Ht.map(ge=>l.jsxs("div",{className:"chat-item-card",onClick:()=>Fe(ge),children:[l.jsxs("div",{className:"chat-avatar-wrapper",children:[ge.otherUser?.avatar?l.jsx("img",{src:parseInt(ge.otherUser.avatar)?ks.find(qe=>qe.id===parseInt(ge.otherUser.avatar))?.path:ge.otherUser.avatar,alt:ge.otherUser.name}):dt(ge.otherUser?.name||"U"),l.jsx("span",{className:`online-indicator ${ge.otherUser?.is_online?"online":""}`})]}),l.jsxs("div",{className:"chat-content",children:[l.jsxs("div",{className:"chat-top",children:[l.jsx("h3",{className:"chat-name",children:ge.otherUser?.name||"Unknown"}),l.jsx("span",{className:"chat-time",children:ft(ge.last_message_time)})]}),l.jsxs("div",{className:"chat-bottom",children:[l.jsx("p",{className:"last-message",children:ge.last_message||"No messages yet"}),ge.unreadCount>0&&l.jsx("span",{className:"unread-badge",children:ge.unreadCount})]})]})]},ge.id)):l.jsxs("div",{className:"empty-state",children:[l.jsx(Ur,{size:48}),l.jsx("h3",{children:"No conversations yet"}),l.jsx("p",{children:"Start messaging your contacts"})]})}),l.jsx("button",{className:"fab",title:"New Contact",onClick:()=>Z(!0),children:l.jsx(vx,{size:24})})]}),l.jsx("aside",{className:`right-panel ${On?"visible-on-mobile":""}`,children:On?l.jsx(O0,{},x):l.jsxs("div",{className:"chat-preview-placeholder",children:[l.jsx(Ur,{size:120}),l.jsx("h3",{children:"Welcome to CaBa"}),l.jsx("p",{children:"Messages are end-to-end encrypted"})]})})]}),l.jsxs("nav",{className:`bottom-nav ${On?"hidden":""}`,children:[l.jsxs("button",{className:"nav-item active",onClick:()=>nt("/"),children:[l.jsx(Ur,{size:20}),l.jsx("span",{className:"label",children:"Chats"}),l.jsx("span",{className:"badge",children:"5"})]}),l.jsxs("button",{className:"nav-item",onClick:()=>nt("/news"),children:[l.jsx(gi,{size:20}),l.jsx("span",{className:"label",children:"News"})]}),l.jsxs("button",{className:"nav-item",onClick:()=>nt("/calls"),children:[l.jsx(Gs,{size:20}),l.jsx("span",{className:"label",children:"Audio Call"}),l.jsx("span",{className:"badge",children:"2"})]}),l.jsxs("button",{className:"nav-item",onClick:()=>nt("/settings"),children:[l.jsx(nc,{size:20}),l.jsx("span",{className:"label",children:"Settings"})]})]}),l.jsx(_a,{isOpen:K,onClose:()=>{Z(!1),V(!1),q(!1),fe(""),be("")},title:$?"Select Contact":"New Contact",size:"medium",children:l.jsxs("div",{className:"new-contact-modal",children:[l.jsxs("div",{className:"modal-mode-toggle",children:[l.jsx("button",{className:`mode-btn ${$?"":"active"}`,onClick:()=>q(!1),children:"Manage Contacts"}),l.jsx("button",{className:`mode-btn ${$?"active":""}`,onClick:()=>q(!0),children:"Select Contact"})]}),$?l.jsxs("div",{className:"select-contact-section",children:[l.jsx("h3",{children:"Start Chat With"}),l.jsx("div",{className:"saved-contacts-list",children:Re.length>0?Re.map(ge=>l.jsxs("div",{className:"saved-contact-item",children:[l.jsxs("div",{className:"contact-info",children:[l.jsx("div",{className:"contact-avatar",children:ge.avatar?parseInt(ge.avatar)?l.jsx("img",{src:ks.find(qe=>qe.id===parseInt(ge.avatar))?.path||ge.avatar,alt:ge.name}):l.jsx("img",{src:ge.avatar,alt:ge.name}):l.jsx("div",{children:dt(ge.name)})}),l.jsxs("div",{children:[l.jsx("div",{className:"contact-name",children:ge.name}),l.jsx("div",{className:"contact-phone",children:ge.phone})]})]}),l.jsx("button",{className:"start-chat-btn",onClick:()=>vt(ge),title:"Start Chat",children:" Chat"})]},ge.id)):l.jsx("p",{className:"no-contacts",children:"No saved contacts yet. Add contacts first."})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"add-contact-btn",onClick:()=>V(!Y),children:[l.jsx(vx,{size:20}),"Add New Contact"]}),Y&&l.jsxs("div",{className:"contact-form",children:[l.jsx("input",{type:"text",placeholder:"Contact name",value:ue,onChange:ge=>fe(ge.target.value),className:"contact-input"}),l.jsx("input",{type:"tel",placeholder:"Phone number (10 digits)",value:ie,onChange:ge=>be(ge.target.value.replace(/\D/g,"").slice(0,10)),className:"contact-input"}),l.jsxs("div",{className:"contact-form-actions",children:[l.jsx("button",{className:"btn-primary",onClick:qn,children:"Save Contact"}),l.jsx("button",{className:"btn-secondary",onClick:()=>{V(!1),fe(""),be("")},children:"Cancel"})]})]}),l.jsxs("div",{className:"saved-contacts-section",children:[l.jsx("h3",{children:"Saved Contacts"}),l.jsx("div",{className:"saved-contacts-list",children:Re.length>0?Re.map((ge,qe)=>l.jsxs("div",{className:`saved-contact-item ${un?.id===ge.id?"menu-open":""}`,onClick:()=>Rt(ge),children:[l.jsxs("div",{className:"contact-info",children:[l.jsx("div",{className:"contact-avatar",children:ge.avatar?parseInt(ge.avatar)?l.jsx("img",{src:ks.find(lt=>lt.id===parseInt(ge.avatar))?.path||ge.avatar,alt:ge.name}):l.jsx("img",{src:ge.avatar,alt:ge.name}):l.jsx("div",{children:dt(ge.name)})}),l.jsxs("div",{className:"contact-details",children:[l.jsx("div",{className:"contact-name",children:ge.name}),l.jsx("div",{className:"contact-phone",children:ge.phone})]})]}),l.jsx("button",{className:"contact-menu-btn",onClick:lt=>ss(ge.id,lt,qe),title:"Options",children:l.jsx(gd,{size:18})}),un?.id===ge.id&&l.jsxs("div",{className:`contact-menu ${un.showAbove?"show-above":"show-below"}`,children:[l.jsxs("button",{className:"menu-item edit-item",onClick:lt=>{lt.stopPropagation(),Ne(ge)},children:[l.jsx(md,{size:16}),"Edit"]}),l.jsxs("button",{className:"menu-item delete-item",onClick:lt=>{lt.stopPropagation(),Qn(ge.id)},children:[l.jsx(Ms,{size:16}),"Delete"]})]})]},ge.id)):l.jsx("p",{className:"no-contacts",children:"No saved contacts yet"})})]})]})]})}),l.jsx(_a,{isOpen:ke,onClose:()=>{},title:"Complete Your Profile",size:"medium",children:l.jsxs("div",{className:"phone-completion-modal",children:[l.jsxs("div",{className:"phone-modal-header",children:[l.jsx("h3",{children:"Complete Your Profile"}),l.jsx("p",{children:"Please provide your phone number and create a password to complete your account setup."})]}),l.jsxs("form",{onSubmit:Rn,className:"phone-form",children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"phone",children:"Phone Number"}),l.jsx("input",{type:"tel",id:"phone",placeholder:"10 digit mobile number",pattern:"[0-9]{10}",maxLength:"10",required:!0,autoComplete:"tel",value:Ue,onChange:ge=>Xe(ge.target.value.replace(/\D/g,"").slice(0,10)),disabled:kt}),l.jsx("small",{children:"10 digits without country code"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"password",children:"Password (Required for backup login)"}),l.jsxs("div",{className:"password-input",children:[l.jsx("input",{type:Je?"text":"password",id:"password",placeholder:"Create a password (min 6 characters)",minLength:"6",required:!0,value:Ee,onChange:ge=>$e(ge.target.value),disabled:kt}),l.jsx("button",{type:"button",className:"toggle-password",onClick:()=>gt(!Je),children:Je?l.jsx(qu,{size:16}):l.jsx(Zr,{size:16})})]}),l.jsx("small",{children:"Required: Create password for backup login"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),l.jsxs("div",{className:"password-input",children:[l.jsx("input",{type:Wt?"text":"password",id:"confirmPassword",placeholder:"Confirm your password",minLength:"6",required:!0,value:De,onChange:ge=>Ce(ge.target.value),disabled:kt}),l.jsx("button",{type:"button",className:"toggle-password",onClick:()=>ht(!Wt),children:Wt?l.jsx(qu,{size:16}):l.jsx(Zr,{size:16})})]})]}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:kt||Ue.length!==10,children:kt?"Saving...":"Save Profile"})]}),l.jsx("div",{className:"phone-modal-footer",children:l.jsxs("p",{className:"phone-note",children:[l.jsx("strong",{children:"Note:"})," Your phone number will be visible to other users for contact purposes. The password enables backup login access."]})})]})})]})};var Go={},kf,Ex;function YA(){return Ex||(Ex=1,kf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),kf}var Df={},ui={},Ax;function to(){if(Ax)return ui;Ax=1;let a;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ui.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},ui.getSymbolTotalCodewords=function(o){return t[o]},ui.getBCHDigit=function(r){let o=0;for(;r!==0;)o++,r>>>=1;return o},ui.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');a=o},ui.isKanjiModeEnabled=function(){return typeof a<"u"},ui.toSJIS=function(o){return a(o)},ui}var Lf={},Nx;function i1(){return Nx||(Nx=1,(function(a){a.L={bit:1},a.M={bit:0},a.Q={bit:3},a.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return a.L;case"m":case"medium":return a.M;case"q":case"quartile":return a.Q;case"h":case"high":return a.H;default:throw new Error("Unknown EC Level: "+r)}}a.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},a.from=function(o,d){if(a.isValid(o))return o;try{return t(o)}catch{return d}}})(Lf)),Lf}var Bf,Tx;function XA(){if(Tx)return Bf;Tx=1;function a(){this.buffer=[],this.length=0}return a.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let o=0;o<r;o++)this.putBit((t>>>r-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Bf=a,Bf}var Uf,jx;function QA(){if(jx)return Uf;jx=1;function a(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return a.prototype.set=function(t,r,o,d){const h=t*this.size+r;this.data[h]=o,d&&(this.reservedBit[h]=!0)},a.prototype.get=function(t,r){return this.data[t*this.size+r]},a.prototype.xor=function(t,r,o){this.data[t*this.size+r]^=o},a.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]},Uf=a,Uf}var Pf={},Rx;function WA(){return Rx||(Rx=1,(function(a){const t=to().getSymbolSize;a.getRowColCoords=function(o){if(o===1)return[];const d=Math.floor(o/7)+2,h=t(o),x=h===145?26:Math.ceil((h-13)/(2*d-2))*2,b=[h-7];for(let C=1;C<d-1;C++)b[C]=b[C-1]-x;return b.push(6),b.reverse()},a.getPositions=function(o){const d=[],h=a.getRowColCoords(o),x=h.length;for(let b=0;b<x;b++)for(let C=0;C<x;C++)b===0&&C===0||b===0&&C===x-1||b===x-1&&C===0||d.push([h[b],h[C]]);return d}})(Pf)),Pf}var zf={},Ox;function KA(){if(Ox)return zf;Ox=1;const a=to().getSymbolSize,t=7;return zf.getPositions=function(o){const d=a(o);return[[0,0],[d-t,0],[0,d-t]]},zf}var Ff={},Ix;function ZA(){return Ix||(Ix=1,(function(a){a.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};a.isValid=function(d){return d!=null&&d!==""&&!isNaN(d)&&d>=0&&d<=7},a.from=function(d){return a.isValid(d)?parseInt(d,10):void 0},a.getPenaltyN1=function(d){const h=d.size;let x=0,b=0,C=0,w=null,A=null;for(let N=0;N<h;N++){b=C=0,w=A=null;for(let T=0;T<h;T++){let j=d.get(N,T);j===w?b++:(b>=5&&(x+=t.N1+(b-5)),w=j,b=1),j=d.get(T,N),j===A?C++:(C>=5&&(x+=t.N1+(C-5)),A=j,C=1)}b>=5&&(x+=t.N1+(b-5)),C>=5&&(x+=t.N1+(C-5))}return x},a.getPenaltyN2=function(d){const h=d.size;let x=0;for(let b=0;b<h-1;b++)for(let C=0;C<h-1;C++){const w=d.get(b,C)+d.get(b,C+1)+d.get(b+1,C)+d.get(b+1,C+1);(w===4||w===0)&&x++}return x*t.N2},a.getPenaltyN3=function(d){const h=d.size;let x=0,b=0,C=0;for(let w=0;w<h;w++){b=C=0;for(let A=0;A<h;A++)b=b<<1&2047|d.get(w,A),A>=10&&(b===1488||b===93)&&x++,C=C<<1&2047|d.get(A,w),A>=10&&(C===1488||C===93)&&x++}return x*t.N3},a.getPenaltyN4=function(d){let h=0;const x=d.data.length;for(let C=0;C<x;C++)h+=d.data[C];return Math.abs(Math.ceil(h*100/x/5)-10)*t.N4};function r(o,d,h){switch(o){case a.Patterns.PATTERN000:return(d+h)%2===0;case a.Patterns.PATTERN001:return d%2===0;case a.Patterns.PATTERN010:return h%3===0;case a.Patterns.PATTERN011:return(d+h)%3===0;case a.Patterns.PATTERN100:return(Math.floor(d/2)+Math.floor(h/3))%2===0;case a.Patterns.PATTERN101:return d*h%2+d*h%3===0;case a.Patterns.PATTERN110:return(d*h%2+d*h%3)%2===0;case a.Patterns.PATTERN111:return(d*h%3+(d+h)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}a.applyMask=function(d,h){const x=h.size;for(let b=0;b<x;b++)for(let C=0;C<x;C++)h.isReserved(C,b)||h.xor(C,b,r(d,C,b))},a.getBestMask=function(d,h){const x=Object.keys(a.Patterns).length;let b=0,C=1/0;for(let w=0;w<x;w++){h(w),a.applyMask(w,d);const A=a.getPenaltyN1(d)+a.getPenaltyN2(d)+a.getPenaltyN3(d)+a.getPenaltyN4(d);a.applyMask(w,d),A<C&&(C=A,b=w)}return b}})(Ff)),Ff}var Gu={},Mx;function K2(){if(Mx)return Gu;Mx=1;const a=i1(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Gu.getBlocksCount=function(d,h){switch(h){case a.L:return t[(d-1)*4+0];case a.M:return t[(d-1)*4+1];case a.Q:return t[(d-1)*4+2];case a.H:return t[(d-1)*4+3];default:return}},Gu.getTotalCodewordsCount=function(d,h){switch(h){case a.L:return r[(d-1)*4+0];case a.M:return r[(d-1)*4+1];case a.Q:return r[(d-1)*4+2];case a.H:return r[(d-1)*4+3];default:return}},Gu}var Hf={},Zl={},kx;function $A(){if(kx)return Zl;kx=1;const a=new Uint8Array(512),t=new Uint8Array(256);return(function(){let o=1;for(let d=0;d<255;d++)a[d]=o,t[o]=d,o<<=1,o&256&&(o^=285);for(let d=255;d<512;d++)a[d]=a[d-255]})(),Zl.log=function(o){if(o<1)throw new Error("log("+o+")");return t[o]},Zl.exp=function(o){return a[o]},Zl.mul=function(o,d){return o===0||d===0?0:a[t[o]+t[d]]},Zl}var Dx;function JA(){return Dx||(Dx=1,(function(a){const t=$A();a.mul=function(o,d){const h=new Uint8Array(o.length+d.length-1);for(let x=0;x<o.length;x++)for(let b=0;b<d.length;b++)h[x+b]^=t.mul(o[x],d[b]);return h},a.mod=function(o,d){let h=new Uint8Array(o);for(;h.length-d.length>=0;){const x=h[0];for(let C=0;C<d.length;C++)h[C]^=t.mul(d[C],x);let b=0;for(;b<h.length&&h[b]===0;)b++;h=h.slice(b)}return h},a.generateECPolynomial=function(o){let d=new Uint8Array([1]);for(let h=0;h<o;h++)d=a.mul(d,new Uint8Array([1,t.exp(h)]));return d}})(Hf)),Hf}var qf,Lx;function eN(){if(Lx)return qf;Lx=1;const a=JA();function t(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(o){this.degree=o,this.genPoly=a.generateECPolynomial(this.degree)},t.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const d=new Uint8Array(o.length+this.degree);d.set(o);const h=a.mod(d,this.genPoly),x=this.degree-h.length;if(x>0){const b=new Uint8Array(this.degree);return b.set(h,x),b}return h},qf=t,qf}var Vf={},Gf={},Yf={},Bx;function Z2(){return Bx||(Bx=1,Yf.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Yf}var Wr={},Ux;function $2(){if(Ux)return Wr;Ux=1;const a="[0-9]+",t="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;Wr.KANJI=new RegExp(r,"g"),Wr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Wr.BYTE=new RegExp(o,"g"),Wr.NUMERIC=new RegExp(a,"g"),Wr.ALPHANUMERIC=new RegExp(t,"g");const d=new RegExp("^"+r+"$"),h=new RegExp("^"+a+"$"),x=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Wr.testKanji=function(C){return d.test(C)},Wr.testNumeric=function(C){return h.test(C)},Wr.testAlphanumeric=function(C){return x.test(C)},Wr}var Px;function no(){return Px||(Px=1,(function(a){const t=Z2(),r=$2();a.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},a.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},a.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},a.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},a.MIXED={bit:-1},a.getCharCountIndicator=function(h,x){if(!h.ccBits)throw new Error("Invalid mode: "+h);if(!t.isValid(x))throw new Error("Invalid version: "+x);return x>=1&&x<10?h.ccBits[0]:x<27?h.ccBits[1]:h.ccBits[2]},a.getBestModeForData=function(h){return r.testNumeric(h)?a.NUMERIC:r.testAlphanumeric(h)?a.ALPHANUMERIC:r.testKanji(h)?a.KANJI:a.BYTE},a.toString=function(h){if(h&&h.id)return h.id;throw new Error("Invalid mode")},a.isValid=function(h){return h&&h.bit&&h.ccBits};function o(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"numeric":return a.NUMERIC;case"alphanumeric":return a.ALPHANUMERIC;case"kanji":return a.KANJI;case"byte":return a.BYTE;default:throw new Error("Unknown mode: "+d)}}a.from=function(h,x){if(a.isValid(h))return h;try{return o(h)}catch{return x}}})(Gf)),Gf}var zx;function tN(){return zx||(zx=1,(function(a){const t=to(),r=K2(),o=i1(),d=no(),h=Z2(),x=7973,b=t.getBCHDigit(x);function C(T,j,I){for(let k=1;k<=40;k++)if(j<=a.getCapacity(k,I,T))return k}function w(T,j){return d.getCharCountIndicator(T,j)+4}function A(T,j){let I=0;return T.forEach(function(k){const D=w(k.mode,j);I+=D+k.getBitsLength()}),I}function N(T,j){for(let I=1;I<=40;I++)if(A(T,I)<=a.getCapacity(I,j,d.MIXED))return I}a.from=function(j,I){return h.isValid(j)?parseInt(j,10):I},a.getCapacity=function(j,I,k){if(!h.isValid(j))throw new Error("Invalid QR Code version");typeof k>"u"&&(k=d.BYTE);const D=t.getSymbolTotalCodewords(j),H=r.getTotalCodewordsCount(j,I),U=(D-H)*8;if(k===d.MIXED)return U;const P=U-w(k,j);switch(k){case d.NUMERIC:return Math.floor(P/10*3);case d.ALPHANUMERIC:return Math.floor(P/11*2);case d.KANJI:return Math.floor(P/13);case d.BYTE:default:return Math.floor(P/8)}},a.getBestVersionForData=function(j,I){let k;const D=o.from(I,o.M);if(Array.isArray(j)){if(j.length>1)return N(j,D);if(j.length===0)return 1;k=j[0]}else k=j;return C(k.mode,k.getLength(),D)},a.getEncodedBits=function(j){if(!h.isValid(j)||j<7)throw new Error("Invalid QR Code version");let I=j<<12;for(;t.getBCHDigit(I)-b>=0;)I^=x<<t.getBCHDigit(I)-b;return j<<12|I}})(Vf)),Vf}var Xf={},Fx;function nN(){if(Fx)return Xf;Fx=1;const a=to(),t=1335,r=21522,o=a.getBCHDigit(t);return Xf.getEncodedBits=function(h,x){const b=h.bit<<3|x;let C=b<<10;for(;a.getBCHDigit(C)-o>=0;)C^=t<<a.getBCHDigit(C)-o;return(b<<10|C)^r},Xf}var Qf={},Wf,Hx;function sN(){if(Hx)return Wf;Hx=1;const a=no();function t(r){this.mode=a.NUMERIC,this.data=r.toString()}return t.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(o){let d,h,x;for(d=0;d+3<=this.data.length;d+=3)h=this.data.substr(d,3),x=parseInt(h,10),o.put(x,10);const b=this.data.length-d;b>0&&(h=this.data.substr(d),x=parseInt(h,10),o.put(x,b*3+1))},Wf=t,Wf}var Kf,qx;function rN(){if(qx)return Kf;qx=1;const a=no(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(o){this.mode=a.ALPHANUMERIC,this.data=o}return r.getBitsLength=function(d){return 11*Math.floor(d/2)+6*(d%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(d){let h;for(h=0;h+2<=this.data.length;h+=2){let x=t.indexOf(this.data[h])*45;x+=t.indexOf(this.data[h+1]),d.put(x,11)}this.data.length%2&&d.put(t.indexOf(this.data[h]),6)},Kf=r,Kf}var Zf,Vx;function aN(){if(Vx)return Zf;Vx=1;const a=no();function t(r){this.mode=a.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return t.getBitsLength=function(o){return o*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){for(let o=0,d=this.data.length;o<d;o++)r.put(this.data[o],8)},Zf=t,Zf}var $f,Gx;function iN(){if(Gx)return $f;Gx=1;const a=no(),t=to();function r(o){this.mode=a.KANJI,this.data=o}return r.getBitsLength=function(d){return d*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){let d;for(d=0;d<this.data.length;d++){let h=t.toSJIS(this.data[d]);if(h>=33088&&h<=40956)h-=33088;else if(h>=57408&&h<=60351)h-=49472;else throw new Error("Invalid SJIS character: "+this.data[d]+`
Make sure your charset is UTF-8`);h=(h>>>8&255)*192+(h&255),o.put(h,13)}},$f=r,$f}var Jf={exports:{}},Yx;function oN(){return Yx||(Yx=1,(function(a){var t={single_source_shortest_paths:function(r,o,d){var h={},x={};x[o]=0;var b=t.PriorityQueue.make();b.push(o,0);for(var C,w,A,N,T,j,I,k,D;!b.empty();){C=b.pop(),w=C.value,N=C.cost,T=r[w]||{};for(A in T)T.hasOwnProperty(A)&&(j=T[A],I=N+j,k=x[A],D=typeof x[A]>"u",(D||k>I)&&(x[A]=I,b.push(A,I),h[A]=w))}if(typeof d<"u"&&typeof x[d]>"u"){var H=["Could not find a path from ",o," to ",d,"."].join("");throw new Error(H)}return h},extract_shortest_path_from_predecessor_list:function(r,o){for(var d=[],h=o;h;)d.push(h),r[h],h=r[h];return d.reverse(),d},find_path:function(r,o,d){var h=t.single_source_shortest_paths(r,o,d);return t.extract_shortest_path_from_predecessor_list(h,d)},PriorityQueue:{make:function(r){var o=t.PriorityQueue,d={},h;r=r||{};for(h in o)o.hasOwnProperty(h)&&(d[h]=o[h]);return d.queue=[],d.sorter=r.sorter||o.default_sorter,d},default_sorter:function(r,o){return r.cost-o.cost},push:function(r,o){var d={value:r,cost:o};this.queue.push(d),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};a.exports=t})(Jf)),Jf.exports}var Xx;function lN(){return Xx||(Xx=1,(function(a){const t=no(),r=sN(),o=rN(),d=aN(),h=iN(),x=$2(),b=to(),C=oN();function w(H){return unescape(encodeURIComponent(H)).length}function A(H,U,P){const K=[];let Z;for(;(Z=H.exec(P))!==null;)K.push({data:Z[0],index:Z.index,mode:U,length:Z[0].length});return K}function N(H){const U=A(x.NUMERIC,t.NUMERIC,H),P=A(x.ALPHANUMERIC,t.ALPHANUMERIC,H);let K,Z;return b.isKanjiModeEnabled()?(K=A(x.BYTE,t.BYTE,H),Z=A(x.KANJI,t.KANJI,H)):(K=A(x.BYTE_KANJI,t.BYTE,H),Z=[]),U.concat(P,K,Z).sort(function(V,$){return V.index-$.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function T(H,U){switch(U){case t.NUMERIC:return r.getBitsLength(H);case t.ALPHANUMERIC:return o.getBitsLength(H);case t.KANJI:return h.getBitsLength(H);case t.BYTE:return d.getBitsLength(H)}}function j(H){return H.reduce(function(U,P){const K=U.length-1>=0?U[U.length-1]:null;return K&&K.mode===P.mode?(U[U.length-1].data+=P.data,U):(U.push(P),U)},[])}function I(H){const U=[];for(let P=0;P<H.length;P++){const K=H[P];switch(K.mode){case t.NUMERIC:U.push([K,{data:K.data,mode:t.ALPHANUMERIC,length:K.length},{data:K.data,mode:t.BYTE,length:K.length}]);break;case t.ALPHANUMERIC:U.push([K,{data:K.data,mode:t.BYTE,length:K.length}]);break;case t.KANJI:U.push([K,{data:K.data,mode:t.BYTE,length:w(K.data)}]);break;case t.BYTE:U.push([{data:K.data,mode:t.BYTE,length:w(K.data)}])}}return U}function k(H,U){const P={},K={start:{}};let Z=["start"];for(let Y=0;Y<H.length;Y++){const V=H[Y],$=[];for(let q=0;q<V.length;q++){const ue=V[q],fe=""+Y+q;$.push(fe),P[fe]={node:ue,lastCount:0},K[fe]={};for(let ie=0;ie<Z.length;ie++){const be=Z[ie];P[be]&&P[be].node.mode===ue.mode?(K[be][fe]=T(P[be].lastCount+ue.length,ue.mode)-T(P[be].lastCount,ue.mode),P[be].lastCount+=ue.length):(P[be]&&(P[be].lastCount=ue.length),K[be][fe]=T(ue.length,ue.mode)+4+t.getCharCountIndicator(ue.mode,U))}}Z=$}for(let Y=0;Y<Z.length;Y++)K[Z[Y]].end=0;return{map:K,table:P}}function D(H,U){let P;const K=t.getBestModeForData(H);if(P=t.from(U,K),P!==t.BYTE&&P.bit<K.bit)throw new Error('"'+H+'" cannot be encoded with mode '+t.toString(P)+`.
 Suggested mode is: `+t.toString(K));switch(P===t.KANJI&&!b.isKanjiModeEnabled()&&(P=t.BYTE),P){case t.NUMERIC:return new r(H);case t.ALPHANUMERIC:return new o(H);case t.KANJI:return new h(H);case t.BYTE:return new d(H)}}a.fromArray=function(U){return U.reduce(function(P,K){return typeof K=="string"?P.push(D(K,null)):K.data&&P.push(D(K.data,K.mode)),P},[])},a.fromString=function(U,P){const K=N(U,b.isKanjiModeEnabled()),Z=I(K),Y=k(Z,P),V=C.find_path(Y.map,"start","end"),$=[];for(let q=1;q<V.length-1;q++)$.push(Y.table[V[q]].node);return a.fromArray(j($))},a.rawSplit=function(U){return a.fromArray(N(U,b.isKanjiModeEnabled()))}})(Qf)),Qf}var Qx;function cN(){if(Qx)return Df;Qx=1;const a=to(),t=i1(),r=XA(),o=QA(),d=WA(),h=KA(),x=ZA(),b=K2(),C=eN(),w=tN(),A=nN(),N=no(),T=lN();function j(Y,V){const $=Y.size,q=h.getPositions(V);for(let ue=0;ue<q.length;ue++){const fe=q[ue][0],ie=q[ue][1];for(let be=-1;be<=7;be++)if(!(fe+be<=-1||$<=fe+be))for(let Re=-1;Re<=7;Re++)ie+Re<=-1||$<=ie+Re||(be>=0&&be<=6&&(Re===0||Re===6)||Re>=0&&Re<=6&&(be===0||be===6)||be>=2&&be<=4&&Re>=2&&Re<=4?Y.set(fe+be,ie+Re,!0,!0):Y.set(fe+be,ie+Re,!1,!0))}}function I(Y){const V=Y.size;for(let $=8;$<V-8;$++){const q=$%2===0;Y.set($,6,q,!0),Y.set(6,$,q,!0)}}function k(Y,V){const $=d.getPositions(V);for(let q=0;q<$.length;q++){const ue=$[q][0],fe=$[q][1];for(let ie=-2;ie<=2;ie++)for(let be=-2;be<=2;be++)ie===-2||ie===2||be===-2||be===2||ie===0&&be===0?Y.set(ue+ie,fe+be,!0,!0):Y.set(ue+ie,fe+be,!1,!0)}}function D(Y,V){const $=Y.size,q=w.getEncodedBits(V);let ue,fe,ie;for(let be=0;be<18;be++)ue=Math.floor(be/3),fe=be%3+$-8-3,ie=(q>>be&1)===1,Y.set(ue,fe,ie,!0),Y.set(fe,ue,ie,!0)}function H(Y,V,$){const q=Y.size,ue=A.getEncodedBits(V,$);let fe,ie;for(fe=0;fe<15;fe++)ie=(ue>>fe&1)===1,fe<6?Y.set(fe,8,ie,!0):fe<8?Y.set(fe+1,8,ie,!0):Y.set(q-15+fe,8,ie,!0),fe<8?Y.set(8,q-fe-1,ie,!0):fe<9?Y.set(8,15-fe-1+1,ie,!0):Y.set(8,15-fe-1,ie,!0);Y.set(q-8,8,1,!0)}function U(Y,V){const $=Y.size;let q=-1,ue=$-1,fe=7,ie=0;for(let be=$-1;be>0;be-=2)for(be===6&&be--;;){for(let Re=0;Re<2;Re++)if(!Y.isReserved(ue,be-Re)){let G=!1;ie<V.length&&(G=(V[ie]>>>fe&1)===1),Y.set(ue,be-Re,G),fe--,fe===-1&&(ie++,fe=7)}if(ue+=q,ue<0||$<=ue){ue-=q,q=-q;break}}}function P(Y,V,$){const q=new r;$.forEach(function(Re){q.put(Re.mode.bit,4),q.put(Re.getLength(),N.getCharCountIndicator(Re.mode,Y)),Re.write(q)});const ue=a.getSymbolTotalCodewords(Y),fe=b.getTotalCodewordsCount(Y,V),ie=(ue-fe)*8;for(q.getLengthInBits()+4<=ie&&q.put(0,4);q.getLengthInBits()%8!==0;)q.putBit(0);const be=(ie-q.getLengthInBits())/8;for(let Re=0;Re<be;Re++)q.put(Re%2?17:236,8);return K(q,Y,V)}function K(Y,V,$){const q=a.getSymbolTotalCodewords(V),ue=b.getTotalCodewordsCount(V,$),fe=q-ue,ie=b.getBlocksCount(V,$),be=q%ie,Re=ie-be,G=Math.floor(q/ie),J=Math.floor(fe/ie),oe=J+1,ke=G-J,Ve=new C(ke);let Ke=0;const ne=new Array(ie),ye=new Array(ie);let Le=0;const Ue=new Uint8Array(Y.buffer);for(let Ce=0;Ce<ie;Ce++){const Je=Ce<Re?J:oe;ne[Ce]=Ue.slice(Ke,Ke+Je),ye[Ce]=Ve.encode(ne[Ce]),Ke+=Je,Le=Math.max(Le,Je)}const Xe=new Uint8Array(q);let Ee=0,$e,De;for($e=0;$e<Le;$e++)for(De=0;De<ie;De++)$e<ne[De].length&&(Xe[Ee++]=ne[De][$e]);for($e=0;$e<ke;$e++)for(De=0;De<ie;De++)Xe[Ee++]=ye[De][$e];return Xe}function Z(Y,V,$,q){let ue;if(Array.isArray(Y))ue=T.fromArray(Y);else if(typeof Y=="string"){let G=V;if(!G){const J=T.rawSplit(Y);G=w.getBestVersionForData(J,$)}ue=T.fromString(Y,G||40)}else throw new Error("Invalid data");const fe=w.getBestVersionForData(ue,$);if(!fe)throw new Error("The amount of data is too big to be stored in a QR Code");if(!V)V=fe;else if(V<fe)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+fe+`.
`);const ie=P(V,$,ue),be=a.getSymbolSize(V),Re=new o(be);return j(Re,V),I(Re),k(Re,V),H(Re,$,0),V>=7&&D(Re,V),U(Re,ie),isNaN(q)&&(q=x.getBestMask(Re,H.bind(null,Re,$))),x.applyMask(q,Re),H(Re,$,q),{modules:Re,version:V,errorCorrectionLevel:$,maskPattern:q,segments:ue}}return Df.create=function(V,$){if(typeof V>"u"||V==="")throw new Error("No input text");let q=t.M,ue,fe;return typeof $<"u"&&(q=t.from($.errorCorrectionLevel,t.M),ue=w.from($.version),fe=x.from($.maskPattern),$.toSJISFunc&&a.setToSJISFunction($.toSJISFunc)),Z(V,ue,q,fe)},Df}var e0={},t0={},Wx;function J2(){return Wx||(Wx=1,(function(a){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let o=r.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+r);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(h){return[h,h]}))),o.length===6&&o.push("F","F");const d=parseInt(o.join(""),16);return{r:d>>24&255,g:d>>16&255,b:d>>8&255,a:d&255,hex:"#"+o.slice(0,6).join("")}}a.getOptions=function(o){o||(o={}),o.color||(o.color={});const d=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,h=o.width&&o.width>=21?o.width:void 0,x=o.scale||4;return{width:h,scale:h?4:x,margin:d,color:{dark:t(o.color.dark||"#000000ff"),light:t(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},a.getScale=function(o,d){return d.width&&d.width>=o+d.margin*2?d.width/(o+d.margin*2):d.scale},a.getImageWidth=function(o,d){const h=a.getScale(o,d);return Math.floor((o+d.margin*2)*h)},a.qrToImageData=function(o,d,h){const x=d.modules.size,b=d.modules.data,C=a.getScale(x,h),w=Math.floor((x+h.margin*2)*C),A=h.margin*C,N=[h.color.light,h.color.dark];for(let T=0;T<w;T++)for(let j=0;j<w;j++){let I=(T*w+j)*4,k=h.color.light;if(T>=A&&j>=A&&T<w-A&&j<w-A){const D=Math.floor((T-A)/C),H=Math.floor((j-A)/C);k=N[b[D*x+H]?1:0]}o[I++]=k.r,o[I++]=k.g,o[I++]=k.b,o[I]=k.a}}})(t0)),t0}var Kx;function uN(){return Kx||(Kx=1,(function(a){const t=J2();function r(d,h,x){d.clearRect(0,0,h.width,h.height),h.style||(h.style={}),h.height=x,h.width=x,h.style.height=x+"px",h.style.width=x+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}a.render=function(h,x,b){let C=b,w=x;typeof C>"u"&&(!x||!x.getContext)&&(C=x,x=void 0),x||(w=o()),C=t.getOptions(C);const A=t.getImageWidth(h.modules.size,C),N=w.getContext("2d"),T=N.createImageData(A,A);return t.qrToImageData(T.data,h,C),r(N,w,A),N.putImageData(T,0,0),w},a.renderToDataURL=function(h,x,b){let C=b;typeof C>"u"&&(!x||!x.getContext)&&(C=x,x=void 0),C||(C={});const w=a.render(h,x,C),A=C.type||"image/png",N=C.rendererOpts||{};return w.toDataURL(A,N.quality)}})(e0)),e0}var n0={},Zx;function dN(){if(Zx)return n0;Zx=1;const a=J2();function t(d,h){const x=d.a/255,b=h+'="'+d.hex+'"';return x<1?b+" "+h+'-opacity="'+x.toFixed(2).slice(1)+'"':b}function r(d,h,x){let b=d+h;return typeof x<"u"&&(b+=" "+x),b}function o(d,h,x){let b="",C=0,w=!1,A=0;for(let N=0;N<d.length;N++){const T=Math.floor(N%h),j=Math.floor(N/h);!T&&!w&&(w=!0),d[N]?(A++,N>0&&T>0&&d[N-1]||(b+=w?r("M",T+x,.5+j+x):r("m",C,0),C=0,w=!1),T+1<h&&d[N+1]||(b+=r("h",A),A=0)):C++}return b}return n0.render=function(h,x,b){const C=a.getOptions(x),w=h.modules.size,A=h.modules.data,N=w+C.margin*2,T=C.color.light.a?"<path "+t(C.color.light,"fill")+' d="M0 0h'+N+"v"+N+'H0z"/>':"",j="<path "+t(C.color.dark,"stroke")+' d="'+o(A,w,C.margin)+'"/>',I='viewBox="0 0 '+N+" "+N+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(C.width?'width="'+C.width+'" height="'+C.width+'" ':"")+I+' shape-rendering="crispEdges">'+T+j+`</svg>
`;return typeof b=="function"&&b(null,D),D},n0}var $x;function hN(){if($x)return Go;$x=1;const a=YA(),t=cN(),r=uN(),o=dN();function d(h,x,b,C,w){const A=[].slice.call(arguments,1),N=A.length,T=typeof A[N-1]=="function";if(!T&&!a())throw new Error("Callback required as last argument");if(T){if(N<2)throw new Error("Too few arguments provided");N===2?(w=b,b=x,x=C=void 0):N===3&&(x.getContext&&typeof w>"u"?(w=C,C=void 0):(w=C,C=b,b=x,x=void 0))}else{if(N<1)throw new Error("Too few arguments provided");return N===1?(b=x,x=C=void 0):N===2&&!x.getContext&&(C=b,b=x,x=void 0),new Promise(function(j,I){try{const k=t.create(b,C);j(h(k,x,C))}catch(k){I(k)}})}try{const j=t.create(b,C);w(null,h(j,x,C))}catch(j){w(j)}}return Go.create=t.create,Go.toCanvas=d.bind(null,r.render),Go.toDataURL=d.bind(null,r.renderToDataURL),Go.toString=d.bind(null,function(h,x,b){return o.render(h,b)}),Go}var fN=hN();const gN=id(fN),ew=({userId:a,userName:t,userPhone:r,onDownload:o,onClose:d})=>{const[h,x]=M.useState(""),[b,C]=M.useState(!0),[w,A]=M.useState(null);M.useEffect(()=>{N()},[a,t,r]);const N=async()=>{try{if(C(!0),A(null),!a)throw new Error("User ID is required");const j=`https://mishra-aashu.github.io/CaBa/shared-profile.html?userId=${a}`;console.log("Generating QR code with URL:",j);const I=await gN.toDataURL(j,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});x(I),C(!1)}catch(j){console.error("Error generating QR code:",j),A("Failed to generate QR code. Please try again."),C(!1)}},T=()=>{try{if(h){const j=document.createElement("a");j.download=`${t||"User"}-CaBa-QR.png`,j.href=h,j.click(),o&&o()}}catch(j){console.error("Error downloading QR code:",j),alert("Failed to download QR code")}};return l.jsx("div",{className:"qr-generator-modal",children:l.jsxs("div",{className:"qr-generator-content",children:[l.jsxs("div",{className:"qr-generator-header",children:[l.jsx("h3",{children:"My QR Code"}),l.jsx("button",{className:"qr-close-btn",onClick:d,children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsx("div",{className:"qr-generator-body",children:b?l.jsxs("div",{className:"qr-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Generating QR Code..."})]}):w?l.jsxs("div",{className:"qr-error",children:[l.jsx("p",{children:w}),l.jsx("button",{onClick:N,children:"Try Again"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"qr-canvas-container",children:l.jsx("img",{src:h,alt:"QR Code",className:"qr-canvas",style:{width:"256px",height:"256px"}})}),l.jsxs("div",{className:"qr-info",children:[l.jsx("p",{className:"qr-title",children:t}),r&&l.jsxs("p",{className:"qr-phone",children:[" ",r]}),l.jsx("p",{className:"qr-description",children:"Scan this QR code to view my CaBa profile"})]}),l.jsxs("div",{className:"qr-actions",children:[l.jsxs("button",{className:"qr-download-btn",onClick:T,children:[l.jsx("i",{className:"fas fa-download"}),"Download QR"]}),l.jsxs("button",{className:"qr-share-btn",onClick:()=>{navigator.share?navigator.share({title:`${t} - CaBa Profile`,text:`Connect with ${t} on CaBa!`,url:`${window.location.origin}/shared-profile.html?userId=${a}`}):navigator.clipboard.writeText(`${window.location.origin}/shared-profile.html?userId=${a}`).then(()=>alert("Profile link copied to clipboard!"))},children:[l.jsx("i",{className:"fas fa-share"}),"Share Link"]})]})]})})]})})};var Ge;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ge||(Ge={}));var Jx=new Map([[Ge.QR_CODE,"QR_CODE"],[Ge.AZTEC,"AZTEC"],[Ge.CODABAR,"CODABAR"],[Ge.CODE_39,"CODE_39"],[Ge.CODE_93,"CODE_93"],[Ge.CODE_128,"CODE_128"],[Ge.DATA_MATRIX,"DATA_MATRIX"],[Ge.MAXICODE,"MAXICODE"],[Ge.ITF,"ITF"],[Ge.EAN_13,"EAN_13"],[Ge.EAN_8,"EAN_8"],[Ge.PDF_417,"PDF_417"],[Ge.RSS_14,"RSS_14"],[Ge.RSS_EXPANDED,"RSS_EXPANDED"],[Ge.UPC_A,"UPC_A"],[Ge.UPC_E,"UPC_E"],[Ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),ey;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(ey||(ey={}));function mN(a){return Object.values(Ge).includes(a)}var Aa;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Aa||(Aa={}));var Br=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[Aa.SCAN_TYPE_CAMERA,Aa.SCAN_TYPE_FILE],a})(),tw=(function(){function a(t,r){this.format=t,this.formatName=r}return a.prototype.toString=function(){return this.formatName},a.create=function(t){if(!Jx.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new a(t,Jx.get(t))},a})(),ty=(function(){function a(){}return a.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},a.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},a})(),I0;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(I0||(I0={}));var nw=(function(){function a(){}return a.createFrom=function(t){return{errorMessage:t,type:I0.UNKWOWN_ERROR}},a})(),sw=(function(){function a(t){this.verbose=t}return a.prototype.log=function(t){this.verbose&&console.log(t)},a.prototype.warn=function(t){this.verbose&&console.warn(t)},a.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},a.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},a})();function Kr(a){return typeof a>"u"||a===null}function pN(a,t,r){return a>r?r:a<t?t:a}var Qo=(function(){function a(){}return a.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},a.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),cn=(function(){function a(){}return a.scanningStatus=function(){return"Scanning"},a.idleStatus=function(){return"Idle"},a.errorStatus=function(){return"Error"},a.permissionStatus=function(){return"Permission"},a.noCameraFoundErrorStatus=function(){return"No Cameras"},a.lastMatch=function(t){return"Last Match: ".concat(t)},a.codeScannerTitle=function(){return"Code Scanner"},a.cameraPermissionTitle=function(){return"Request Camera Permissions"},a.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},a.noCameraFound=function(){return"No camera found"},a.scanButtonStopScanningText=function(){return"Stop Scanning"},a.scanButtonStartScanningText=function(){return"Start Scanning"},a.torchOnButton=function(){return"Switch On Torch"},a.torchOffButton=function(){return"Switch Off Torch"},a.torchOnFailedMessage=function(){return"Failed to turn on torch"},a.torchOffFailedMessage=function(){return"Failed to turn off torch"},a.scanButtonScanningStarting=function(){return"Launching Camera..."},a.textIfCameraScanSelected=function(){return"Scan an Image File"},a.textIfFileScanSelected=function(){return"Scan using camera directly"},a.selectCamera=function(){return"Select Camera"},a.fileSelectionChooseImage=function(){return"Choose Image"},a.fileSelectionChooseAnother=function(){return"Choose Another"},a.fileSelectionNoImageSelected=function(){return"No image choosen"},a.anonymousCameraPrefix=function(){return"Anonymous Camera"},a.dragAndDropMessage=function(){return"Or drop an image to scan"},a.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},a.zoom=function(){return"zoom"},a.loadingImage=function(){return"Loading image..."},a.cameraScanAltText=function(){return"Camera based scan"},a.fileScanAltText=function(){return"Fule based scan"},a})(),ny=(function(){function a(){}return a.poweredBy=function(){return"Powered by "},a.reportIssues=function(){return"Report issues"},a})(),rw=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var o=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(d),x=Object.keys(t),b=0,C=x;b<C.length;b++){var w=C[b];if(h.has(w))return r.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},a})(),Jl={exports:{}},xN=Jl.exports,sy;function yN(){return sy||(sy=1,(function(a,t){(function(r,o){o(t)})(xN,(function(r){function o(L){return L==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,n){L.__proto__=n}||function(L,n){for(var i in n)n.hasOwnProperty(i)&&(L[i]=n[i])};function h(L,n){d(L,n);function i(){this.constructor=L}L.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function x(L,n){var i=Object.setPrototypeOf;i?i(L,n):L.__proto__=n}function b(L,n){n===void 0&&(n=L.constructor);var i=Error.captureStackTrace;i&&i(L,n)}var C=(function(L){h(n,L);function n(i){var c=this.constructor,f=L.call(this,i)||this;return Object.defineProperty(f,"name",{value:c.name,enumerable:!1}),x(f,c.prototype),b(f),f}return n})(Error);class w extends C{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}w.kind="Exception";class A extends w{}A.kind="ArgumentException";class N extends w{}N.kind="IllegalArgumentException";class T{constructor(n){if(this.binarizer=n,n===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,c,f){const g=this.binarizer.getLuminanceSource().crop(n,i,c,f);return new T(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends w{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class I{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class k{static arraycopy(n,i,c,f,g){for(;g--;)c[f++]=n[i++]}static currentTimeMillis(){return Date.now()}}class D extends w{}D.kind="IndexOutOfBoundsException";class H extends D{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}H.kind="ArrayIndexOutOfBoundsException";class U{static fill(n,i){for(let c=0,f=n.length;c<f;c++)n[c]=i}static fillWithin(n,i,c,f){U.rangeCheck(n.length,i,c);for(let g=i;g<c;g++)n[g]=f}static rangeCheck(n,i,c){if(i>c)throw new N("fromIndex("+i+") > toIndex("+c+")");if(i<0)throw new H(i);if(c>n)throw new H(c)}static asList(...n){return n}static create(n,i,c){return Array.from({length:n}).map(g=>Array.from({length:i}).fill(c))}static createInt32Array(n,i,c){return Array.from({length:n}).map(g=>Int32Array.from({length:i}).fill(c))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let c=0,f=n.length;c<f;c++)if(n[c]!==i[c])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const c of n)i=31*i+c;return i}static fillUint8Array(n,i){for(let c=0;c!==n.length;c++)n[c]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const c=new Uint8Array(i);return c.set(n),c}return n.slice(0,i)}static copyOfRange(n,i,c){const f=c-i,g=new Int32Array(f);return k.arraycopy(n,i,g,0,f),g}static binarySearch(n,i,c){c===void 0&&(c=U.numberComparator);let f=0,g=n.length-1;for(;f<=g;){const p=g+f>>1,y=c(i,n[p]);if(y>0)f=p+1;else if(y<0)g=p-1;else return p}return-f-1}static numberComparator(n,i){return n-i}}class P{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let c=31;return i=n<<16,i!==0&&(c-=16,n=i),i=n<<8,i!==0&&(c-=8,n=i),i=n<<4,i!==0&&(c-=4,n=i),i=n<<2,i!==0&&(c-=2,n=i),c-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}P.MIN_VALUE_32_BITS=-2147483648,P.MAX_VALUE=Number.MAX_SAFE_INTEGER;class K{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=K.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=K.makeArray(n);k.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const c=this.bits;let f=Math.floor(n/32),g=c[f];g&=~((1<<(n&31))-1);const p=c.length;for(;g===0;){if(++f===p)return i;g=c[f]}const y=f*32+P.numberOfTrailingZeros(g);return y>i?i:y}getNextUnset(n){const i=this.size;if(n>=i)return i;const c=this.bits;let f=Math.floor(n/32),g=~c[f];g&=~((1<<(n&31))-1);const p=c.length;for(;g===0;){if(++f===p)return i;g=~c[f]}const y=f*32+P.numberOfTrailingZeros(g);return y>i?i:y}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new N;if(i===n)return;i--;const c=Math.floor(n/32),f=Math.floor(i/32),g=this.bits;for(let p=c;p<=f;p++){const y=p>c?0:n&31,E=(2<<(p<f?31:i&31))-(1<<y);g[p]|=E}}clear(){const n=this.bits.length,i=this.bits;for(let c=0;c<n;c++)i[c]=0}isRange(n,i,c){if(i<n||n<0||i>this.size)throw new N;if(i===n)return!0;i--;const f=Math.floor(n/32),g=Math.floor(i/32),p=this.bits;for(let y=f;y<=g;y++){const S=y>f?0:n&31,R=(2<<(y<g?31:i&31))-(1<<S)&4294967295;if((p[y]&R)!==(c?R:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let c=i;c>0;c--)this.appendBit((n>>c-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let c=0;c<i;c++)this.appendBit(n.get(c))}xor(n){if(this.size!==n.size)throw new N("Sizes don't match");const i=this.bits;for(let c=0,f=i.length;c<f;c++)i[c]^=n.bits[c]}toBytes(n,i,c,f){for(let g=0;g<f;g++){let p=0;for(let y=0;y<8;y++)this.get(n)&&(p|=1<<7-y),n++;i[c+g]=p}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),c=i+1,f=this.bits;for(let g=0;g<c;g++){let p=f[g];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,n[i-g]=p}if(this.size!==c*32){const g=c*32-this.size;let p=n[0]>>>g;for(let y=1;y<c;y++){const S=n[y];p|=S<<32-g,n[y-1]=p,p=S>>>g}n[c-1]=p}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof K))return!1;const i=n;return this.size===i.size&&U.equals(this.bits,i.bits)}hashCode(){return 31*this.size+U.hashCode(this.bits)}toString(){let n="";for(let i=0,c=this.size;i<c;i++)(i&7)===0&&(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new K(this.size,this.bits.slice())}}var Z;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var Y=Z;class V extends w{static getFormatInstance(){return new V}}V.kind="FormatException";var $;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})($||($={}));class q{constructor(n,i,c,...f){this.valueIdentifier=n,this.name=c,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=f,q.VALUE_IDENTIFIER_TO_ECI.set(n,this),q.NAME_TO_ECI.set(c,this);const g=this.values;for(let p=0,y=g.length;p!==y;p++){const S=g[p];q.VALUES_TO_ECI.set(S,this)}for(const p of f)q.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new V("incorect value");const i=q.VALUES_TO_ECI.get(n);if(i===void 0)throw new V("incorect value");return i}static getCharacterSetECIByName(n){const i=q.NAME_TO_ECI.get(n);if(i===void 0)throw new V("incorect value");return i}equals(n){if(!(n instanceof q))return!1;const i=n;return this.getName()===i.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q($.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q($.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q($.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q($.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q($.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q($.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q($.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q($.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q($.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q($.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q($.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q($.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q($.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q($.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q($.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q($.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q($.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q($.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q($.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q($.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q($.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q($.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q($.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q($.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q($.Big5,28,"Big5"),q.GB18030=new q($.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q($.EUC_KR,30,"EUC_KR","EUC-KR");class ue extends w{}ue.kind="UnsupportedOperationException";class fe{static decode(n,i){const c=this.encodingName(i);return this.customDecoder?this.customDecoder(n,c):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(c)?this.decodeFallback(n,c):new TextDecoder(c).decode(n)}static shouldDecodeOnFallback(n){return!fe.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const c=this.encodingName(i);return this.customEncoder?this.customEncoder(n,c):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof q?n:q.getCharacterSetECIByName(n)}static decodeFallback(n,i){const c=this.encodingCharacterSet(i);if(fe.isDecodeFallbackSupported(c)){let f="";for(let g=0,p=n.length;g<p;g++){let y=n[g].toString(16);y.length<2&&(y="0"+y),f+="%"+y}return decodeURIComponent(f)}if(c.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new ue(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(q.UTF8)||n.equals(q.ISO8859_1)||n.equals(q.ASCII)}static encodeFallback(n){const c=btoa(unescape(encodeURIComponent(n))).split(""),f=[];for(let g=0;g<c.length;g++)f.push(c[g].charCodeAt(0));return new Uint8Array(f)}}class ie{static castAsNonUtf8Char(n,i=null){const c=i?i.getName():this.ISO88591;return fe.decode(new Uint8Array([n]),c)}static guessEncoding(n,i){if(i!=null&&i.get(Y.CHARACTER_SET)!==void 0)return i.get(Y.CHARACTER_SET).toString();const c=n.length;let f=!0,g=!0,p=!0,y=0,S=0,E=0,R=0,B=0,z=0,W=0,te=0,se=0,le=0,pe=0;const Pe=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Be=0;Be<c&&(f||g||p);Be++){const Oe=n[Be]&255;p&&(y>0?(Oe&128)===0?p=!1:y--:(Oe&128)!==0&&((Oe&64)===0?p=!1:(y++,(Oe&32)===0?S++:(y++,(Oe&16)===0?E++:(y++,(Oe&8)===0?R++:p=!1))))),f&&(Oe>127&&Oe<160?f=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&pe++),g&&(B>0?Oe<64||Oe===127||Oe>252?g=!1:B--:Oe===128||Oe===160||Oe>239?g=!1:Oe>160&&Oe<224?(z++,te=0,W++,W>se&&(se=W)):Oe>127?(B++,W=0,te++,te>le&&(le=te)):(W=0,te=0))}return p&&y>0&&(p=!1),g&&B>0&&(g=!1),p&&(Pe||S+E+R>0)?ie.UTF8:g&&(ie.ASSUME_SHIFT_JIS||se>=3||le>=3)?ie.SHIFT_JIS:f&&g?se===2&&z===2||pe*10>=c?ie.SHIFT_JIS:ie.ISO88591:f?ie.ISO88591:g?ie.SHIFT_JIS:p?ie.UTF8:ie.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let c=-1;function f(p,y,S,E,R,B){if(p==="%%")return"%";if(i[++c]===void 0)return;p=E?parseInt(E.substr(1)):void 0;let z=R?parseInt(R.substr(1)):void 0,W;switch(B){case"s":W=i[c];break;case"c":W=i[c][0];break;case"f":W=parseFloat(i[c]).toFixed(p);break;case"p":W=parseFloat(i[c]).toPrecision(p);break;case"e":W=parseFloat(i[c]).toExponential(p);break;case"x":W=parseInt(i[c]).toString(z||16);break;case"d":W=parseFloat(parseInt(i[c],z||10).toPrecision(p)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(z);let te=parseInt(S),se=S&&S[0]+""=="0"?"0":" ";for(;W.length<te;)W=y!==void 0?W+se:se+W;return W}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(g,f)}static getBytes(n,i){return fe.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}ie.SHIFT_JIS=q.SJIS.getName(),ie.GB2312="GB2312",ie.ISO88591=q.ISO8859_1.getName(),ie.EUC_JP="EUC_JP",ie.UTF8=q.UTF8.getName(),ie.PLATFORM_DEFAULT_ENCODING=ie.UTF8,ie.ASSUME_SHIFT_JIS=!1;class be{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=ie.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,c){for(let f=i;i<i+c;f++)this.append(n[f]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class Re{constructor(n,i,c,f){if(this.width=n,this.height=i,this.rowSize=c,this.bits=f,i==null&&(i=n),this.height=i,n<1||i<1)throw new N("Both dimensions must be greater than 0");c==null&&(c=Math.floor((n+31)/32)),this.rowSize=c,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,c=n[0].length,f=new Re(c,i);for(let g=0;g<i;g++){const p=n[g];for(let y=0;y<c;y++)p[y]&&f.set(y,g)}return f}static parseFromString(n,i,c){if(n===null)throw new N("stringRepresentation cannot be null");const f=new Array(n.length);let g=0,p=0,y=-1,S=0,E=0;for(;E<n.length;)if(n.charAt(E)===`
`||n.charAt(E)==="\r"){if(g>p){if(y===-1)y=g-p;else if(g-p!==y)throw new N("row lengths do not match");p=g,S++}E++}else if(n.substring(E,E+i.length)===i)E+=i.length,f[g]=!0,g++;else if(n.substring(E,E+c.length)===c)E+=c.length,f[g]=!1,g++;else throw new N("illegal character encountered: "+n.substring(E));if(g>p){if(y===-1)y=g-p;else if(g-p!==y)throw new N("row lengths do not match");S++}const R=new Re(y,S);for(let B=0;B<g;B++)f[B]&&R.set(Math.floor(B%y),Math.floor(B/y));return R}get(n,i){const c=i*this.rowSize+Math.floor(n/32);return(this.bits[c]>>>(n&31)&1)!==0}set(n,i){const c=i*this.rowSize+Math.floor(n/32);this.bits[c]|=1<<(n&31)&4294967295}unset(n,i){const c=i*this.rowSize+Math.floor(n/32);this.bits[c]&=~(1<<(n&31)&4294967295)}flip(n,i){const c=i*this.rowSize+Math.floor(n/32);this.bits[c]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new N("input matrix dimensions do not match");const i=new K(Math.floor(this.width/32)+1),c=this.rowSize,f=this.bits;for(let g=0,p=this.height;g<p;g++){const y=g*c,S=n.getRow(g,i).getBitArray();for(let E=0;E<c;E++)f[y+E]^=S[E]}}clear(){const n=this.bits,i=n.length;for(let c=0;c<i;c++)n[c]=0}setRegion(n,i,c,f){if(i<0||n<0)throw new N("Left and top must be nonnegative");if(f<1||c<1)throw new N("Height and width must be at least 1");const g=n+c,p=i+f;if(p>this.height||g>this.width)throw new N("The region must fit inside the matrix");const y=this.rowSize,S=this.bits;for(let E=i;E<p;E++){const R=E*y;for(let B=n;B<g;B++)S[R+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new K(this.width):i.clear();const c=this.rowSize,f=this.bits,g=n*c;for(let p=0;p<c;p++)i.setBulk(p*32,f[g+p]);return i}setRow(n,i){k.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let c=new K(n),f=new K(n);for(let g=0,p=Math.floor((i+1)/2);g<p;g++)c=this.getRow(g,c),f=this.getRow(i-1-g,f),c.reverse(),f.reverse(),this.setRow(g,f),this.setRow(i-1-g,c)}getEnclosingRectangle(){const n=this.width,i=this.height,c=this.rowSize,f=this.bits;let g=n,p=i,y=-1,S=-1;for(let E=0;E<i;E++)for(let R=0;R<c;R++){const B=f[E*c+R];if(B!==0){if(E<p&&(p=E),E>S&&(S=E),R*32<g){let z=0;for(;(B<<31-z&4294967295)===0;)z++;R*32+z<g&&(g=R*32+z)}if(R*32+31>y){let z=31;for(;!(B>>>z);)z--;R*32+z>y&&(y=R*32+z)}}}return y<g||S<p?null:Int32Array.from([g,p,y-g+1,S-p+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let c=0;for(;c<i.length&&i[c]===0;)c++;if(c===i.length)return null;const f=c/n;let g=c%n*32;const p=i[c];let y=0;for(;(p<<31-y&4294967295)===0;)y++;return g+=y,Int32Array.from([g,f])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let c=i.length-1;for(;c>=0&&i[c]===0;)c--;if(c<0)return null;const f=Math.floor(c/n);let g=Math.floor(c%n)*32;const p=i[c];let y=31;for(;!(p>>>y);)y--;return g+=y,Int32Array.from([g,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Re))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&U.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+U.hashCode(this.bits),n}toString(n="X ",i="  ",c=`
`){return this.buildToString(n,i,c)}buildToString(n,i,c){let f=new be;for(let g=0,p=this.height;g<p;g++){for(let y=0,S=this.width;y<S;y++)f.append(this.get(y,g)?n:i);f.append(c)}return f.toString()}clone(){return new Re(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends w{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class J extends I{constructor(n){super(n),this.luminances=J.EMPTY,this.buckets=new Int32Array(J.LUMINANCE_BUCKETS)}getBlackRow(n,i){const c=this.getLuminanceSource(),f=c.getWidth();i==null||i.getSize()<f?i=new K(f):i.clear(),this.initArrays(f);const g=c.getRow(n,this.luminances),p=this.buckets;for(let S=0;S<f;S++)p[(g[S]&255)>>J.LUMINANCE_SHIFT]++;const y=J.estimateBlackPoint(p);if(f<3)for(let S=0;S<f;S++)(g[S]&255)<y&&i.set(S);else{let S=g[0]&255,E=g[1]&255;for(let R=1;R<f-1;R++){const B=g[R+1]&255;(E*4-S-B)/2<y&&i.set(R),S=E,E=B}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),c=n.getHeight(),f=new Re(i,c);this.initArrays(i);const g=this.buckets;for(let S=1;S<5;S++){const E=Math.floor(c*S/5),R=n.getRow(E,this.luminances),B=Math.floor(i*4/5);for(let z=Math.floor(i/5);z<B;z++){const W=R[z]&255;g[W>>J.LUMINANCE_SHIFT]++}}const p=J.estimateBlackPoint(g),y=n.getMatrix();for(let S=0;S<c;S++){const E=S*i;for(let R=0;R<i;R++)(y[E+R]&255)<p&&f.set(R,S)}return f}createBinarizer(n){return new J(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let c=0;c<J.LUMINANCE_BUCKETS;c++)i[c]=0}static estimateBlackPoint(n){const i=n.length;let c=0,f=0,g=0;for(let R=0;R<i;R++)n[R]>g&&(f=R,g=n[R]),n[R]>c&&(c=n[R]);let p=0,y=0;for(let R=0;R<i;R++){const B=R-f,z=n[R]*B*B;z>y&&(p=R,y=z)}if(f>p){const R=f;f=p,p=R}if(p-f<=i/16)throw new G;let S=p-1,E=-1;for(let R=p-1;R>f;R--){const B=R-f,z=B*B*(p-R)*(c-n[R]);z>E&&(S=R,E=z)}return S<<J.LUMINANCE_SHIFT}}J.LUMINANCE_BITS=5,J.LUMINANCE_SHIFT=8-J.LUMINANCE_BITS,J.LUMINANCE_BUCKETS=1<<J.LUMINANCE_BITS,J.EMPTY=Uint8ClampedArray.from([0]);class oe extends J{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),c=n.getHeight();if(i>=oe.MINIMUM_DIMENSION&&c>=oe.MINIMUM_DIMENSION){const f=n.getMatrix();let g=i>>oe.BLOCK_SIZE_POWER;(i&oe.BLOCK_SIZE_MASK)!==0&&g++;let p=c>>oe.BLOCK_SIZE_POWER;(c&oe.BLOCK_SIZE_MASK)!==0&&p++;const y=oe.calculateBlackPoints(f,g,p,i,c),S=new Re(i,c);oe.calculateThresholdForBlock(f,g,p,i,c,y,S),this.matrix=S}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new oe(n)}static calculateThresholdForBlock(n,i,c,f,g,p,y){const S=g-oe.BLOCK_SIZE,E=f-oe.BLOCK_SIZE;for(let R=0;R<c;R++){let B=R<<oe.BLOCK_SIZE_POWER;B>S&&(B=S);const z=oe.cap(R,2,c-3);for(let W=0;W<i;W++){let te=W<<oe.BLOCK_SIZE_POWER;te>E&&(te=E);const se=oe.cap(W,2,i-3);let le=0;for(let Pe=-2;Pe<=2;Pe++){const Be=p[z+Pe];le+=Be[se-2]+Be[se-1]+Be[se]+Be[se+1]+Be[se+2]}const pe=le/25;oe.thresholdBlock(n,te,B,pe,f,y)}}}static cap(n,i,c){return n<i?i:n>c?c:n}static thresholdBlock(n,i,c,f,g,p){for(let y=0,S=c*g+i;y<oe.BLOCK_SIZE;y++,S+=g)for(let E=0;E<oe.BLOCK_SIZE;E++)(n[S+E]&255)<=f&&p.set(i+E,c+y)}static calculateBlackPoints(n,i,c,f,g){const p=g-oe.BLOCK_SIZE,y=f-oe.BLOCK_SIZE,S=new Array(c);for(let E=0;E<c;E++){S[E]=new Int32Array(i);let R=E<<oe.BLOCK_SIZE_POWER;R>p&&(R=p);for(let B=0;B<i;B++){let z=B<<oe.BLOCK_SIZE_POWER;z>y&&(z=y);let W=0,te=255,se=0;for(let pe=0,Pe=R*f+z;pe<oe.BLOCK_SIZE;pe++,Pe+=f){for(let Be=0;Be<oe.BLOCK_SIZE;Be++){const Oe=n[Pe+Be]&255;W+=Oe,Oe<te&&(te=Oe),Oe>se&&(se=Oe)}if(se-te>oe.MIN_DYNAMIC_RANGE)for(pe++,Pe+=f;pe<oe.BLOCK_SIZE;pe++,Pe+=f)for(let Be=0;Be<oe.BLOCK_SIZE;Be++)W+=n[Pe+Be]&255}let le=W>>oe.BLOCK_SIZE_POWER*2;if(se-te<=oe.MIN_DYNAMIC_RANGE&&(le=te/2,E>0&&B>0)){const pe=(S[E-1][B]+2*S[E][B-1]+S[E-1][B-1])/4;te<pe&&(le=pe)}S[E][B]=le}}return S}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class ke{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,c,f){throw new ue("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ue("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ue("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new be;for(let c=0;c<this.height;c++){const f=this.getRow(c,n);for(let g=0;g<this.width;g++){const p=f[g]&255;let y;p<64?y="#":p<128?y="+":p<192?y=".":y=" ",i.append(y)}i.append(`
`)}return i.toString()}}class Ve extends ke{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const c=this.delegate.getRow(n,i),f=this.getWidth();for(let g=0;g<f;g++)c[g]=255-(c[g]&255);return c}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(i);for(let f=0;f<i;f++)c[f]=255-(n[f]&255);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,c,f){return new Ve(this.delegate.crop(n,i,c,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ve(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ve(this.delegate.rotateCounterClockwise45())}}class Ke extends ke{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=Ke.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return Ke.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,c){const f=new Uint8ClampedArray(i*c);for(let g=0,p=0,y=n.length;g<y;g+=4,p++){let S;if(n[g+3]===0)S=255;else{const R=n[g],B=n[g+1],z=n[g+2];S=306*R+601*B+117*z+512>>10}f[p]=S}return f}getRow(n,i){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const c=this.getWidth(),f=n*c;return i===null?i=this.buffer.slice(f,f+c):(i.length<c&&(i=new Uint8ClampedArray(c)),i.set(this.buffer.slice(f,f+c))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,c,f){return super.crop(n,i,c,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),c=i.getContext("2d"),f=n*Ke.DEGREE_TO_RADIANS,g=this.canvas.width,p=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(f))*g+Math.abs(Math.sin(f))*p),S=Math.ceil(Math.abs(Math.sin(f))*g+Math.abs(Math.cos(f))*p);return i.width=y,i.height=S,c.translate(y/2,S/2),c.rotate(f),c.drawImage(this.canvas,g/-2,p/-2),this.buffer=Ke.makeBufferFromCanvasImageData(i),this}invert(){return new Ve(this)}}Ke.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(n,i,c){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ye=(globalThis||Ou||self||window||void 0)&&(globalThis||Ou||self||window||void 0).__awaiter||function(L,n,i,c){function f(g){return g instanceof i?g:new i(function(p){p(g)})}return new(i||(i=Promise))(function(g,p){function y(R){try{E(c.next(R))}catch(B){p(B)}}function S(R){try{E(c.throw(R))}catch(B){p(B)}}function E(R){R.done?g(R.value):f(R.value).then(y,S)}E((c=c.apply(L,n||[])).next())})};class Le{constructor(n,i=500,c){this.reader=n,this.timeBetweenScansMillis=i,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ye(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const c of n){const f=c.kind==="video"?"videoinput":c.kind;if(f!=="videoinput")continue;const g=c.deviceId||c.id,p=c.label||`Video device ${i.length+1}`,y=c.groupId,S={deviceId:g,label:p,kind:f,groupId:y};i.push(S)}return i})}getVideoInputDevices(){return ye(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new ne(i.deviceId,i.label))})}findDeviceById(n){return ye(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(c=>c.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return ye(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return ye(this,void 0,void 0,function*(){this.reset();let c;n?c={deviceId:{exact:n}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeOnceFromConstraints(f,i)})}decodeOnceFromConstraints(n,i){return ye(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(c,i)})}decodeOnceFromStream(n,i){return ye(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(n,i,c){return ye(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,c)})}decodeFromVideoDevice(n,i,c){return ye(this,void 0,void 0,function*(){let f;n?f={deviceId:{exact:n}}:f={facingMode:"environment"};const g={video:f};return yield this.decodeFromConstraints(g,i,c)})}decodeFromConstraints(n,i,c){return ye(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(f,i,c)})}decodeFromStream(n,i,c){return ye(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(f,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return ye(this,void 0,void 0,function*(){const c=this.prepareVideoElement(i);return this.addVideoSource(c,n),this.videoElement=c,this.stream=n,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(n){return new Promise((i,c)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ye(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const c=document.getElementById(n);if(!c)throw new A(`element with id '${n}' not found`);if(c.nodeName.toLowerCase()!==i.toLowerCase())throw new A(`element with id '${n}' must be an ${i} element`);return c}decodeFromImage(n,i){if(!n&&!i)throw new A("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new A("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,c){if(n===void 0&&i===void 0)throw new A("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,c):this.decodeFromVideoElementContinuously(n,c)}decodeFromImageElement(n){if(!n)throw new A("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let c;return this.isImageLoaded(i)?c=this.decodeOnce(i,!1,!0):c=this._decodeOnLoadImage(i),c}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const c=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(c,i)}_decodeFromVideoElementSetup(n){if(!n)throw new A("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new A("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const c=this._decodeOnLoadImage(i);return i.src=n,c}decodeFromVideoUrl(n){if(!n)throw new A("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),c=this.decodeFromVideoElement(i);return i.src=n,c}decodeFromVideoUrlContinuously(n,i){if(!n)throw new A("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(c,i);return c.src=n,f}_decodeOnLoadImage(n){return new Promise((i,c)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,c),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ye(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return ye(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,c=!0){this._stopAsyncDecode=!1;const f=(g,p)=>{if(this._stopAsyncDecode){p(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(n);g(y)}catch(y){const S=i&&y instanceof G,R=(y instanceof j||y instanceof V)&&c;if(S||R)return setTimeout(f,this._timeBetweenDecodingAttempts,g,p);p(y)}};return new Promise((g,p)=>f(g,p))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(n);i(f,null),setTimeout(c,this.timeBetweenScansMillis)}catch(f){i(null,f);const g=f instanceof j||f instanceof V,p=f instanceof G;(g||p)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,c){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,c=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),c=new Ke(i),f=new oe(c);return new T(f)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const c=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=c}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let c,f;return typeof n<"u"&&(n instanceof HTMLVideoElement?(c=n.videoWidth,f=n.videoHeight):n instanceof HTMLImageElement&&(c=n.naturalWidth||n.width,f=n.naturalHeight||n.height)),i.style.width=c+"px",i.style.height=f+"px",i.width=c,i.height=f,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(n,i,c=i==null?0:8*i.length,f,g,p=k.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=c,this.resultPoints=f,this.format=g,this.timestamp=p,this.text=n,this.rawBytes=i,c==null?this.numBits=i==null?0:8*i.length:this.numBits=c,this.resultPoints=f,this.format=g,this.resultMetadata=null,p==null?this.timestamp=k.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const c=new Array(i.length+n.length);k.arraycopy(i,0,c,0,i.length),k.arraycopy(n,0,c,i.length,n.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Xe;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var Ee=Xe,$e;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($e||($e={}));var De=$e;class Ce{constructor(n,i,c,f,g=-1,p=-1){this.rawBytes=n,this.text=i,this.byteSegments=c,this.ecLevel=f,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=p,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Je{exp(n){return this.expTable[n]}log(n){if(n===0)throw new N;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class gt{constructor(n,i){if(i.length===0)throw new N;this.field=n;const c=i.length;if(c>1&&i[0]===0){let f=1;for(;f<c&&i[f]===0;)f++;f===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-f),k.arraycopy(i,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let c;if(n===1){c=0;for(let p=0,y=i.length;p!==y;p++){const S=i[p];c=Je.addOrSubtract(c,S)}return c}c=i[0];const f=i.length,g=this.field;for(let p=1;p<f;p++)c=Je.addOrSubtract(g.multiply(n,c),i[p]);return c}addOrSubtract(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,c=n.coefficients;if(i.length>c.length){const p=i;i=c,c=p}let f=new Int32Array(c.length);const g=c.length-i.length;k.arraycopy(c,0,f,0,g);for(let p=g;p<c.length;p++)f[p]=Je.addOrSubtract(i[p-g],c[p]);return new gt(this.field,f)}multiply(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,c=i.length,f=n.coefficients,g=f.length,p=new Int32Array(c+g-1),y=this.field;for(let S=0;S<c;S++){const E=i[S];for(let R=0;R<g;R++)p[S+R]=Je.addOrSubtract(p[S+R],y.multiply(E,f[R]))}return new gt(y,p)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,c=this.field,f=new Int32Array(i),g=this.coefficients;for(let p=0;p<i;p++)f[p]=c.multiply(g[p],n);return new gt(c,f)}multiplyByMonomial(n,i){if(n<0)throw new N;if(i===0)return this.field.getZero();const c=this.coefficients,f=c.length,g=new Int32Array(f+n),p=this.field;for(let y=0;y<f;y++)g[y]=p.multiply(c[y],i);return new gt(p,g)}divide(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new N("Divide by 0");const i=this.field;let c=i.getZero(),f=this;const g=n.getCoefficient(n.getDegree()),p=i.inverse(g);for(;f.getDegree()>=n.getDegree()&&!f.isZero();){const y=f.getDegree()-n.getDegree(),S=i.multiply(f.getCoefficient(f.getDegree()),p),E=n.multiplyByMonomial(y,S),R=i.buildMonomial(y,S);c=c.addOrSubtract(R),f=f.addOrSubtract(E)}return[c,f]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let c=this.getCoefficient(i);if(c!==0){if(c<0?(n+=" - ",c=-c):n.length>0&&(n+=" + "),i===0||c!==1){const f=this.field.log(c);f===0?n+="1":f===1?n+="a":(n+="a^",n+=f)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class Wt extends w{}Wt.kind="ArithmeticException";class ht extends Je{constructor(n,i,c){super(),this.primitive=n,this.size=i,this.generatorBase=c;const f=new Int32Array(i);let g=1;for(let y=0;y<i;y++)f[y]=g,g*=2,g>=i&&(g^=n,g&=i-1);this.expTable=f;const p=new Int32Array(i);for(let y=0;y<i-1;y++)p[f[y]]=y;this.logTable=p,this.zero=new gt(this,Int32Array.from([0])),this.one=new gt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new N;if(i===0)return this.zero;const c=new Int32Array(n+1);return c[0]=i,new gt(this,c)}inverse(n){if(n===0)throw new Wt;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+P.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class kt extends w{}kt.kind="ReedSolomonException";class yn extends w{}yn.kind="IllegalStateException";class un{constructor(n){this.field=n}decode(n,i){const c=this.field,f=new gt(c,n),g=new Int32Array(i);let p=!0;for(let W=0;W<i;W++){const te=f.evaluateAt(c.exp(W+c.getGeneratorBase()));g[g.length-1-W]=te,te!==0&&(p=!1)}if(p)return;const y=new gt(c,g),S=this.runEuclideanAlgorithm(c.buildMonomial(i,1),y,i),E=S[0],R=S[1],B=this.findErrorLocations(E),z=this.findErrorMagnitudes(R,B);for(let W=0;W<B.length;W++){const te=n.length-1-c.log(B[W]);if(te<0)throw new kt("Bad error location");n[te]=ht.addOrSubtract(n[te],z[W])}}runEuclideanAlgorithm(n,i,c){if(n.getDegree()<i.getDegree()){const W=n;n=i,i=W}const f=this.field;let g=n,p=i,y=f.getZero(),S=f.getOne();for(;p.getDegree()>=(c/2|0);){let W=g,te=y;if(g=p,y=S,g.isZero())throw new kt("r_{i-1} was zero");p=W;let se=f.getZero();const le=g.getCoefficient(g.getDegree()),pe=f.inverse(le);for(;p.getDegree()>=g.getDegree()&&!p.isZero();){const Pe=p.getDegree()-g.getDegree(),Be=f.multiply(p.getCoefficient(p.getDegree()),pe);se=se.addOrSubtract(f.buildMonomial(Pe,Be)),p=p.addOrSubtract(g.multiplyByMonomial(Pe,Be))}if(S=se.multiply(y).addOrSubtract(te),p.getDegree()>=g.getDegree())throw new yn("Division algorithm failed to reduce polynomial?")}const E=S.getCoefficient(0);if(E===0)throw new kt("sigmaTilde(0) was zero");const R=f.inverse(E),B=S.multiplyScalar(R),z=p.multiplyScalar(R);return[B,z]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const c=new Int32Array(i);let f=0;const g=this.field;for(let p=1;p<g.getSize()&&f<i;p++)n.evaluateAt(p)===0&&(c[f]=g.inverse(p),f++);if(f!==i)throw new kt("Error locator degree does not match number of roots");return c}findErrorMagnitudes(n,i){const c=i.length,f=new Int32Array(c),g=this.field;for(let p=0;p<c;p++){const y=g.inverse(i[p]);let S=1;for(let E=0;E<c;E++)if(p!==E){const R=g.multiply(i[E],y),B=(R&1)===0?R|1:R&-2;S=g.multiply(S,B)}f[p]=g.multiply(n.evaluateAt(y),g.inverse(S)),g.getGeneratorBase()!==0&&(f[p]=g.multiply(f[p],y))}return f}}var Dt;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(Dt||(Dt={}));class St{decode(n){this.ddata=n;let i=n.getBits(),c=this.extractBits(i),f=this.correctBits(c),g=St.convertBoolArrayToByteArray(f),p=St.getEncodedData(f),y=new Ce(g,p,null,null);return y.setNumBits(f.length),y}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,c=Dt.UPPER,f=Dt.UPPER,g="",p=0;for(;p<i;)if(f===Dt.BINARY){if(i-p<5)break;let y=St.readCode(n,p,5);if(p+=5,y===0){if(i-p<11)break;y=St.readCode(n,p,11)+31,p+=11}for(let S=0;S<y;S++){if(i-p<8){p=i;break}const E=St.readCode(n,p,8);g+=ie.castAsNonUtf8Char(E),p+=8}f=c}else{let y=f===Dt.DIGIT?4:5;if(i-p<y)break;let S=St.readCode(n,p,y);p+=y;let E=St.getCharacter(f,S);E.startsWith("CTRL_")?(c=f,f=St.getTable(E.charAt(5)),E.charAt(6)==="L"&&(c=f)):(g+=E,f=c)}return g}static getTable(n){switch(n){case"L":return Dt.LOWER;case"P":return Dt.PUNCT;case"M":return Dt.MIXED;case"D":return Dt.DIGIT;case"B":return Dt.BINARY;case"U":default:return Dt.UPPER}}static getCharacter(n,i){switch(n){case Dt.UPPER:return St.UPPER_TABLE[i];case Dt.LOWER:return St.LOWER_TABLE[i];case Dt.MIXED:return St.MIXED_TABLE[i];case Dt.PUNCT:return St.PUNCT_TABLE[i];case Dt.DIGIT:return St.DIGIT_TABLE[i];default:throw new yn("Bad table")}}correctBits(n){let i,c;this.ddata.getNbLayers()<=2?(c=6,i=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(c=8,i=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(c=10,i=ht.AZTEC_DATA_10):(c=12,i=ht.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),g=n.length/c;if(g<f)throw new V;let p=n.length%c,y=new Int32Array(g);for(let z=0;z<g;z++,p+=c)y[z]=St.readCode(n,p,c);try{new un(i).decode(y,g-f)}catch(z){throw new V(z)}let S=(1<<c)-1,E=0;for(let z=0;z<f;z++){let W=y[z];if(W===0||W===S)throw new V;(W===1||W===S-1)&&E++}let R=new Array(f*c-E),B=0;for(let z=0;z<f;z++){let W=y[z];if(W===1||W===S-1)R.fill(W>1,B,B+c-1),B+=c-1;else for(let te=c-1;te>=0;--te)R[B++]=(W&1<<te)!==0}return R}extractBits(n){let i=this.ddata.isCompact(),c=this.ddata.getNbLayers(),f=(i?11:14)+c*4,g=new Int32Array(f),p=new Array(this.totalBitsInLayer(c,i));if(i)for(let y=0;y<g.length;y++)g[y]=y;else{let y=f+1+2*P.truncDivision(P.truncDivision(f,2)-1,15),S=f/2,E=P.truncDivision(y,2);for(let R=0;R<S;R++){let B=R+P.truncDivision(R,15);g[S-R-1]=E-B-1,g[S+R]=E+B+1}}for(let y=0,S=0;y<c;y++){let E=(c-y)*4+(i?9:12),R=y*2,B=f-1-R;for(let z=0;z<E;z++){let W=z*2;for(let te=0;te<2;te++)p[S+W+te]=n.get(g[R+te],g[R+z]),p[S+2*E+W+te]=n.get(g[R+z],g[B-te]),p[S+4*E+W+te]=n.get(g[B-te],g[B-z]),p[S+6*E+W+te]=n.get(g[B-z],g[R+te])}S+=E*8}return p}static readCode(n,i,c){let f=0;for(let g=i;g<i+c;g++)f<<=1,n[g]&&(f|=1);return f}static readByte(n,i){let c=n.length-i;return c>=8?St.readCode(n,i,8):St.readCode(n,i,c)<<8-c}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let c=0;c<i.length;c++)i[c]=St.readByte(n,8*c);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}St.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],St.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],St.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],St.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],St.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,c,f){const g=n-c,p=i-f;return Math.sqrt(g*g+p*p)}static sum(n){let i=0;for(let c=0,f=n.length;c!==f;c++){const g=n[c];i+=g}return i}}class ns{static floatToIntBits(n){return n}}ns.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof ze){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*ns.floatToIntBits(this.x)+ns.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),c=this.distance(n[1],n[2]),f=this.distance(n[0],n[2]);let g,p,y;if(c>=i&&c>=f?(p=n[0],g=n[1],y=n[2]):f>=c&&f>=i?(p=n[1],g=n[0],y=n[2]):(p=n[2],g=n[0],y=n[1]),this.crossProductZ(g,p,y)<0){const S=g;g=y,y=S}n[0]=g,n[1]=p,n[2]=y}static distance(n,i){return mt.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,c){const f=i.x,g=i.y;return(c.x-f)*(n.y-g)-(c.y-g)*(n.x-f)}}class Ns{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Ie extends Ns{constructor(n,i,c,f,g){super(n,i),this.compact=c,this.nbDatablocks=f,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Fe{constructor(n,i,c,f){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=Fe.INIT_SIZE),c==null&&(c=n.getWidth()/2|0),f==null&&(f=n.getHeight()/2|0);const g=i/2|0;if(this.leftInit=c-g,this.rightInit=c+g,this.upInit=f-g,this.downInit=f+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let n=this.leftInit,i=this.rightInit,c=this.upInit,f=this.downInit,g=!1,p=!0,y=!1,S=!1,E=!1,R=!1,B=!1;const z=this.width,W=this.height;for(;p;){p=!1;let te=!0;for(;(te||!S)&&i<z;)te=this.containsBlackPoint(c,f,i,!1),te?(i++,p=!0,S=!0):S||i++;if(i>=z){g=!0;break}let se=!0;for(;(se||!E)&&f<W;)se=this.containsBlackPoint(n,i,f,!0),se?(f++,p=!0,E=!0):E||f++;if(f>=W){g=!0;break}let le=!0;for(;(le||!R)&&n>=0;)le=this.containsBlackPoint(c,f,n,!1),le?(n--,p=!0,R=!0):R||n--;if(n<0){g=!0;break}let pe=!0;for(;(pe||!B)&&c>=0;)pe=this.containsBlackPoint(n,i,c,!0),pe?(c--,p=!0,B=!0):B||c--;if(c<0){g=!0;break}p&&(y=!0)}if(!g&&y){const te=i-n;let se=null;for(let Be=1;se===null&&Be<te;Be++)se=this.getBlackPointOnSegment(n,f-Be,n+Be,f);if(se==null)throw new G;let le=null;for(let Be=1;le===null&&Be<te;Be++)le=this.getBlackPointOnSegment(n,c+Be,n+Be,c);if(le==null)throw new G;let pe=null;for(let Be=1;pe===null&&Be<te;Be++)pe=this.getBlackPointOnSegment(i,c+Be,i-Be,c);if(pe==null)throw new G;let Pe=null;for(let Be=1;Pe===null&&Be<te;Be++)Pe=this.getBlackPointOnSegment(i,f-Be,i-Be,f);if(Pe==null)throw new G;return this.centerEdges(Pe,se,pe,le)}else throw new G}getBlackPointOnSegment(n,i,c,f){const g=mt.round(mt.distance(n,i,c,f)),p=(c-n)/g,y=(f-i)/g,S=this.image;for(let E=0;E<g;E++){const R=mt.round(n+E*p),B=mt.round(i+E*y);if(S.get(R,B))return new ze(R,B)}return null}centerEdges(n,i,c,f){const g=n.getX(),p=n.getY(),y=i.getX(),S=i.getY(),E=c.getX(),R=c.getY(),B=f.getX(),z=f.getY(),W=Fe.CORR;return g<this.width/2?[new ze(B-W,z+W),new ze(y+W,S+W),new ze(E-W,R-W),new ze(g+W,p-W)]:[new ze(B+W,z+W),new ze(y+W,S-W),new ze(E-W,R+W),new ze(g-W,p-W)]}containsBlackPoint(n,i,c,f){const g=this.image;if(f){for(let p=n;p<=i;p++)if(g.get(p,c))return!0}else for(let p=n;p<=i;p++)if(g.get(c,p))return!0;return!1}}Fe.INIT_SIZE=10,Fe.CORR=1;class nt{static checkAndNudgePoints(n,i){const c=n.getWidth(),f=n.getHeight();let g=!0;for(let p=0;p<i.length&&g;p+=2){const y=Math.floor(i[p]),S=Math.floor(i[p+1]);if(y<-1||y>c||S<-1||S>f)throw new G;g=!1,y===-1?(i[p]=0,g=!0):y===c&&(i[p]=c-1,g=!0),S===-1?(i[p+1]=0,g=!0):S===f&&(i[p+1]=f-1,g=!0)}g=!0;for(let p=i.length-2;p>=0&&g;p-=2){const y=Math.floor(i[p]),S=Math.floor(i[p+1]);if(y<-1||y>c||S<-1||S>f)throw new G;g=!1,y===-1?(i[p]=0,g=!0):y===c&&(i[p]=c-1,g=!0),S===-1?(i[p+1]=0,g=!0):S===f&&(i[p+1]=f-1,g=!0)}}}class _t{constructor(n,i,c,f,g,p,y,S,E){this.a11=n,this.a21=i,this.a31=c,this.a12=f,this.a22=g,this.a32=p,this.a13=y,this.a23=S,this.a33=E}static quadrilateralToQuadrilateral(n,i,c,f,g,p,y,S,E,R,B,z,W,te,se,le){const pe=_t.quadrilateralToSquare(n,i,c,f,g,p,y,S);return _t.squareToQuadrilateral(E,R,B,z,W,te,se,le).times(pe)}transformPoints(n){const i=n.length,c=this.a11,f=this.a12,g=this.a13,p=this.a21,y=this.a22,S=this.a23,E=this.a31,R=this.a32,B=this.a33;for(let z=0;z<i;z+=2){const W=n[z],te=n[z+1],se=g*W+S*te+B;n[z]=(c*W+p*te+E)/se,n[z+1]=(f*W+y*te+R)/se}}transformPointsWithValues(n,i){const c=this.a11,f=this.a12,g=this.a13,p=this.a21,y=this.a22,S=this.a23,E=this.a31,R=this.a32,B=this.a33,z=n.length;for(let W=0;W<z;W++){const te=n[W],se=i[W],le=g*te+S*se+B;n[W]=(c*te+p*se+E)/le,i[W]=(f*te+y*se+R)/le}}static squareToQuadrilateral(n,i,c,f,g,p,y,S){const E=n-c+g-y,R=i-f+p-S;if(E===0&&R===0)return new _t(c-n,g-c,n,f-i,p-f,i,0,0,1);{const B=c-g,z=y-g,W=f-p,te=S-p,se=B*te-z*W,le=(E*te-z*R)/se,pe=(B*R-E*W)/se;return new _t(c-n+le*c,y-n+pe*y,n,f-i+le*f,S-i+pe*S,i,le,pe,1)}}static quadrilateralToSquare(n,i,c,f,g,p,y,S){return _t.squareToQuadrilateral(n,i,c,f,g,p,y,S).buildAdjoint()}buildAdjoint(){return new _t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new _t(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Rn extends nt{sampleGrid(n,i,c,f,g,p,y,S,E,R,B,z,W,te,se,le,pe,Pe,Be){const Oe=_t.quadrilateralToQuadrilateral(f,g,p,y,S,E,R,B,z,W,te,se,le,pe,Pe,Be);return this.sampleGridWithTransform(n,i,c,Oe)}sampleGridWithTransform(n,i,c,f){if(i<=0||c<=0)throw new G;const g=new Re(i,c),p=new Float32Array(2*i);for(let y=0;y<c;y++){const S=p.length,E=y+.5;for(let R=0;R<S;R+=2)p[R]=R/2+.5,p[R+1]=E;f.transformPoints(p),nt.checkAndNudgePoints(n,p);try{for(let R=0;R<S;R+=2)n.get(Math.floor(p[R]),Math.floor(p[R+1]))&&g.set(R/2,y)}catch{throw new G}}return g}}class rn{static setGridSampler(n){rn.gridSampler=n}static getInstance(){return rn.gridSampler}}rn.gridSampler=new Rn;class Gt{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qn{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),c=this.getBullsEyeCorners(i);if(n){let p=c[0];c[0]=c[2],c[2]=p}this.extractParameters(c);let f=this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),g=this.getMatrixCornerPoints(c);return new Ie(f,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new G;let i=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(c,i);let f=0;for(let p=0;p<4;p++){let y=c[(this.shift+p)%4];this.compact?(f<<=7,f+=y>>1&127):(f<<=10,f+=(y>>2&992)+(y>>1&31))}let g=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(n,i){let c=0;n.forEach((f,g,p)=>{let y=(f>>i-2<<1)+(f&1);c=(c<<3)+y}),c=((c&1)<<11)+(c>>1);for(let f=0;f<4;f++)if(P.bitCount(c^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new G}getCorrectedParameterData(n,i){let c,f;i?(c=7,f=2):(c=10,f=4);let g=c-f,p=new Int32Array(c);for(let S=c-1;S>=0;--S)p[S]=n&15,n>>=4;try{new un(ht.AZTEC_PARAM).decode(p,g)}catch{throw new G}let y=0;for(let S=0;S<f;S++)y=(y<<4)+p[S];return y}getBullsEyeCorners(n){let i=n,c=n,f=n,g=n,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(i,p,1,-1),z=this.getFirstDifferent(c,p,1,1),W=this.getFirstDifferent(f,p,-1,1),te=this.getFirstDifferent(g,p,-1,-1);if(this.nbCenterLayers>2){let se=this.distancePoint(te,B)*this.nbCenterLayers/(this.distancePoint(g,i)*(this.nbCenterLayers+2));if(se<.75||se>1.25||!this.isWhiteOrBlackRectangle(B,z,W,te))break}i=B,c=z,f=W,g=te,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let y=new ze(i.getX()+.5,i.getY()-.5),S=new ze(c.getX()+.5,c.getY()+.5),E=new ze(f.getX()-.5,f.getY()+.5),R=new ze(g.getX()-.5,g.getY()-.5);return this.expandSquare([y,S,E,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,c,f;try{let y=new Fe(this.image).detect();n=y[0],i=y[1],c=y[2],f=y[3]}catch{let S=this.image.getWidth()/2,E=this.image.getHeight()/2;n=this.getFirstDifferent(new Gt(S+7,E-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Gt(S+7,E+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Gt(S-7,E+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Gt(S-7,E-7),!1,-1,-1).toResultPoint()}let g=mt.round((n.getX()+f.getX()+i.getX()+c.getX())/4),p=mt.round((n.getY()+f.getY()+i.getY()+c.getY())/4);try{let y=new Fe(this.image,15,g,p).detect();n=y[0],i=y[1],c=y[2],f=y[3]}catch{n=this.getFirstDifferent(new Gt(g+7,p-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Gt(g+7,p+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new Gt(g-7,p+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Gt(g-7,p-7),!1,-1,-1).toResultPoint()}return g=mt.round((n.getX()+f.getX()+i.getX()+c.getX())/4),p=mt.round((n.getY()+f.getY()+i.getY()+c.getY())/4),new Gt(g,p)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,c,f,g){let p=rn.getInstance(),y=this.getDimension(),S=y/2-this.nbCenterLayers,E=y/2+this.nbCenterLayers;return p.sampleGrid(n,y,y,S,S,E,S,E,E,S,E,i.getX(),i.getY(),c.getX(),c.getY(),f.getX(),f.getY(),g.getX(),g.getY())}sampleLine(n,i,c){let f=0,g=this.distanceResultPoint(n,i),p=g/c,y=n.getX(),S=n.getY(),E=p*(i.getX()-n.getX())/g,R=p*(i.getY()-n.getY())/g;for(let B=0;B<c;B++)this.image.get(mt.round(y+B*E),mt.round(S+B*R))&&(f|=1<<c-B-1);return f}isWhiteOrBlackRectangle(n,i,c,f){let g=3;n=new Gt(n.getX()-g,n.getY()+g),i=new Gt(i.getX()-g,i.getY()-g),c=new Gt(c.getX()+g,c.getY()-g),f=new Gt(f.getX()+g,f.getY()+g);let p=this.getColor(f,n);if(p===0)return!1;let y=this.getColor(n,i);return y!==p||(y=this.getColor(i,c),y!==p)?!1:(y=this.getColor(c,f),y===p)}getColor(n,i){let c=this.distancePoint(n,i),f=(i.getX()-n.getX())/c,g=(i.getY()-n.getY())/c,p=0,y=n.getX(),S=n.getY(),E=this.image.get(n.getX(),n.getY()),R=Math.ceil(c);for(let z=0;z<R;z++)y+=f,S+=g,this.image.get(mt.round(y),mt.round(S))!==E&&p++;let B=p/c;return B>.1&&B<.9?0:B<=.1===E?1:-1}getFirstDifferent(n,i,c,f){let g=n.getX()+c,p=n.getY()+f;for(;this.isValid(g,p)&&this.image.get(g,p)===i;)g+=c,p+=f;for(g-=c,p-=f;this.isValid(g,p)&&this.image.get(g,p)===i;)g+=c;for(g-=c;this.isValid(g,p)&&this.image.get(g,p)===i;)p+=f;return p-=f,new Gt(g,p)}expandSquare(n,i,c){let f=c/(2*i),g=n[0].getX()-n[2].getX(),p=n[0].getY()-n[2].getY(),y=(n[0].getX()+n[2].getX())/2,S=(n[0].getY()+n[2].getY())/2,E=new ze(y+f*g,S+f*p),R=new ze(y-f*g,S-f*p);g=n[1].getX()-n[3].getX(),p=n[1].getY()-n[3].getY(),y=(n[1].getX()+n[3].getX())/2,S=(n[1].getY()+n[3].getY())/2;let B=new ze(y+f*g,S+f*p),z=new ze(y-f*g,S-f*p);return[E,B,R,z]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=mt.round(n.getX()),c=mt.round(n.getY());return this.isValid(i,c)}distancePoint(n,i){return mt.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return mt.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(P.truncDivision(this.nbLayers-4,8)+1)+15}}class Qn{decode(n,i=null){let c=null,f=new qn(n.getBlackMatrix()),g=null,p=null;try{let R=f.detectMirror(!1);g=R.getPoints(),this.reportFoundResultPoints(i,g),p=new St().decode(R)}catch(R){c=R}if(p==null)try{let R=f.detectMirror(!0);g=R.getPoints(),this.reportFoundResultPoints(i,g),p=new St().decode(R)}catch(R){throw c??R}let y=new Ue(p.getText(),p.getRawBytes(),p.getNumBits(),g,Ee.AZTEC,k.currentTimeMillis()),S=p.getByteSegments();S!=null&&y.putMetadata(De.BYTE_SEGMENTS,S);let E=p.getECLevel();return E!=null&&y.putMetadata(De.ERROR_CORRECTION_LEVEL,E),y}reportFoundResultPoints(n,i){if(n!=null){let c=n.get(Y.NEED_RESULT_POINT_CALLBACK);c!=null&&i.forEach((f,g,p)=>{c.foundPossibleResultPoint(f)})}}reset(){}}class ss extends Le{constructor(n=500){super(new Qn,n)}}class Rt{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(Y.TRY_HARDER)===!0&&n.isRotateSupported()){const g=n.rotateCounterClockwise(),p=this.doDecode(g,i),y=p.getResultMetadata();let S=270;y!==null&&y.get(De.ORIENTATION)===!0&&(S=S+y.get(De.ORIENTATION)%360),p.putMetadata(De.ORIENTATION,S);const E=p.getResultPoints();if(E!==null){const R=g.getHeight();for(let B=0;B<E.length;B++)E[B]=new ze(R-E[B].getY()-1,E[B].getX())}return p}else throw new G}}reset(){}doDecode(n,i){const c=n.getWidth(),f=n.getHeight();let g=new K(c);const p=i&&i.get(Y.TRY_HARDER)===!0,y=Math.max(1,f>>(p?8:5));let S;p?S=f:S=15;const E=Math.trunc(f/2);for(let R=0;R<S;R++){const B=Math.trunc((R+1)/2),z=(R&1)===0,W=E+y*(z?B:-B);if(W<0||W>=f)break;try{g=n.getBlackRow(W,g)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(g.reverse(),i&&i.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const se=new Map;i.forEach((le,pe)=>se.set(pe,le)),se.delete(Y.NEED_RESULT_POINT_CALLBACK),i=se}try{const se=this.decodeRow(W,g,i);if(te===1){se.putMetadata(De.ORIENTATION,180);const le=se.getResultPoints();le!==null&&(le[0]=new ze(c-le[0].getX()-1,le[0].getY()),le[1]=new ze(c-le[1].getX()-1,le[1].getY()))}return se}catch{}}}throw new G}static recordPattern(n,i,c){const f=c.length;for(let E=0;E<f;E++)c[E]=0;const g=n.getSize();if(i>=g)throw new G;let p=!n.get(i),y=0,S=i;for(;S<g;){if(n.get(S)!==p)c[y]++;else{if(++y===f)break;c[y]=1,p=!p}S++}if(!(y===f||y===f-1&&S===g))throw new G}static recordPatternInReverse(n,i,c){let f=c.length,g=n.get(i);for(;i>0&&f>=0;)n.get(--i)!==g&&(f--,g=!g);if(f>=0)throw new G;Rt.recordPattern(n,i+1,c)}static patternMatchVariance(n,i,c){const f=n.length;let g=0,p=0;for(let E=0;E<f;E++)g+=n[E],p+=i[E];if(g<p)return Number.POSITIVE_INFINITY;const y=g/p;c*=y;let S=0;for(let E=0;E<f;E++){const R=n[E],B=i[E]*y,z=R>B?R-B:B-R;if(z>c)return Number.POSITIVE_INFINITY;S+=z}return S/g}}class Ne extends Rt{static findStartPattern(n){const i=n.getSize(),c=n.getNextSet(0);let f=0,g=Int32Array.from([0,0,0,0,0,0]),p=c,y=!1;const S=6;for(let E=c;E<i;E++)if(n.get(E)!==y)g[f]++;else{if(f===S-1){let R=Ne.MAX_AVG_VARIANCE,B=-1;for(let z=Ne.CODE_START_A;z<=Ne.CODE_START_C;z++){const W=Rt.patternMatchVariance(g,Ne.CODE_PATTERNS[z],Ne.MAX_INDIVIDUAL_VARIANCE);W<R&&(R=W,B=z)}if(B>=0&&n.isRange(Math.max(0,p-(E-p)/2),p,!1))return Int32Array.from([p,E,B]);p+=g[0]+g[1],g=g.slice(2,g.length-1),g[f-1]=0,g[f]=0,f--}else f++;g[f]=1,y=!y}throw new G}static decodeCode(n,i,c){Rt.recordPattern(n,c,i);let f=Ne.MAX_AVG_VARIANCE,g=-1;for(let p=0;p<Ne.CODE_PATTERNS.length;p++){const y=Ne.CODE_PATTERNS[p],S=this.patternMatchVariance(i,y,Ne.MAX_INDIVIDUAL_VARIANCE);S<f&&(f=S,g=p)}if(g>=0)return g;throw new G}decodeRow(n,i,c){const f=c&&c.get(Y.ASSUME_GS1)===!0,g=Ne.findStartPattern(i),p=g[2];let y=0;const S=new Uint8Array(20);S[y++]=p;let E;switch(p){case Ne.CODE_START_A:E=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:E=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:E=Ne.CODE_CODE_C;break;default:throw new V}let R=!1,B=!1,z="",W=g[0],te=g[1];const se=Int32Array.from([0,0,0,0,0,0]);let le=0,pe=0,Pe=p,Be=0,Oe=!0,Nt=!1,yt=!1;for(;!R;){const aa=B;switch(B=!1,le=pe,pe=Ne.decodeCode(i,se,te),S[y++]=pe,pe!==Ne.CODE_STOP&&(Oe=!0),pe!==Ne.CODE_STOP&&(Be++,Pe+=Be*pe),W=te,te+=se.reduce((Tc,ml)=>Tc+ml,0),pe){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new V}switch(E){case Ne.CODE_CODE_A:if(pe<64)yt===Nt?z+=String.fromCharCode(32+pe):z+=String.fromCharCode(32+pe+128),yt=!1;else if(pe<96)yt===Nt?z+=String.fromCharCode(pe-64):z+=String.fromCharCode(pe+64),yt=!1;else switch(pe!==Ne.CODE_STOP&&(Oe=!1),pe){case Ne.CODE_FNC_1:f&&(z.length===0?z+="]C1":z+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!Nt&&yt?(Nt=!0,yt=!1):Nt&&yt?(Nt=!1,yt=!1):yt=!0;break;case Ne.CODE_SHIFT:B=!0,E=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:E=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:E=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:R=!0;break}break;case Ne.CODE_CODE_B:if(pe<96)yt===Nt?z+=String.fromCharCode(32+pe):z+=String.fromCharCode(32+pe+128),yt=!1;else switch(pe!==Ne.CODE_STOP&&(Oe=!1),pe){case Ne.CODE_FNC_1:f&&(z.length===0?z+="]C1":z+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!Nt&&yt?(Nt=!0,yt=!1):Nt&&yt?(Nt=!1,yt=!1):yt=!0;break;case Ne.CODE_SHIFT:B=!0,E=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:E=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:E=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:R=!0;break}break;case Ne.CODE_CODE_C:if(pe<100)pe<10&&(z+="0"),z+=pe;else switch(pe!==Ne.CODE_STOP&&(Oe=!1),pe){case Ne.CODE_FNC_1:f&&(z.length===0?z+="]C1":z+="");break;case Ne.CODE_CODE_A:E=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:E=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:R=!0;break}break}aa&&(E=E===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const Pn=te-W;if(te=i.getNextUnset(te),!i.isRange(te,Math.min(i.getSize(),te+(te-W)/2),!1))throw new G;if(Pe-=Be*le,Pe%103!==le)throw new j;const Us=z.length;if(Us===0)throw new G;Us>0&&Oe&&(E===Ne.CODE_CODE_C?z=z.substring(0,Us-2):z=z.substring(0,Us-1));const ps=(g[1]+g[0])/2,sn=W+Pn/2,os=S.length,Os=new Uint8Array(os);for(let aa=0;aa<os;aa++)Os[aa]=S[aa];const za=[new ze(ps,n),new ze(sn,n)];return new Ue(z,Os,0,za,Ee.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class dt extends Rt{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,c){let f=this.counters;f.fill(0),this.decodeRowResult="";let g=dt.findAsteriskPattern(i,f),p=i.getNextSet(g[1]),y=i.getSize(),S,E;do{dt.recordPattern(i,p,f);let se=dt.toNarrowWidePattern(f);if(se<0)throw new G;S=dt.patternToChar(se),this.decodeRowResult+=S,E=p;for(let le of f)p+=le;p=i.getNextSet(p)}while(S!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let se of f)R+=se;let B=p-E-R;if(p!==y&&B*2<R)throw new G;if(this.usingCheckDigit){let se=this.decodeRowResult.length-1,le=0;for(let pe=0;pe<se;pe++)le+=dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pe));if(this.decodeRowResult.charAt(se)!==dt.ALPHABET_STRING.charAt(le%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,se)}if(this.decodeRowResult.length===0)throw new G;let z;this.extendedMode?z=dt.decodeExtended(this.decodeRowResult):z=this.decodeRowResult;let W=(g[1]+g[0])/2,te=E+R/2;return new Ue(z,null,0,[new ze(W,n),new ze(te,n)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let c=n.getSize(),f=n.getNextSet(0),g=0,p=f,y=!1,S=i.length;for(let E=f;E<c;E++)if(n.get(E)!==y)i[g]++;else{if(g===S-1){if(this.toNarrowWidePattern(i)===dt.ASTERISK_ENCODING&&n.isRange(Math.max(0,p-Math.floor((E-p)/2)),p,!1))return[p,E];p+=i[0]+i[1],i.copyWithin(0,2,2+g-1),i[g-1]=0,i[g]=0,g--}else g++;i[g]=1,y=!y}throw new G}static toNarrowWidePattern(n){let i=n.length,c=0,f;do{let g=2147483647;for(let S of n)S<g&&S>c&&(g=S);c=g,f=0;let p=0,y=0;for(let S=0;S<i;S++){let E=n[S];E>c&&(y|=1<<i-1-S,f++,p+=E)}if(f===3){for(let S=0;S<i&&f>0;S++){let E=n[S];if(E>c&&(f--,E*2>=p))return-1}return y}}while(f>3);return-1}static patternToChar(n){for(let i=0;i<dt.CHARACTER_ENCODINGS.length;i++)if(dt.CHARACTER_ENCODINGS[i]===n)return dt.ALPHABET_STRING.charAt(i);if(n===dt.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(n){let i=n.length,c="";for(let f=0;f<i;f++){let g=n.charAt(f);if(g==="+"||g==="$"||g==="%"||g==="/"){let p=n.charAt(f+1),y="\0";switch(g){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new V;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new V;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="";else throw new V;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new V;break}c+=y,f++}else c+=g}return c}}dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],dt.ASTERISK_ENCODING=148;class ft extends Rt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,c){let f=this.decodeStart(i),g=this.decodeEnd(i),p=new be;ft.decodeMiddle(i,f[1],g[0],p);let y=p.toString(),S=null;c!=null&&(S=c.get(Y.ALLOWED_LENGTHS)),S==null&&(S=ft.DEFAULT_ALLOWED_LENGTHS);let E=y.length,R=!1,B=0;for(let te of S){if(E===te){R=!0;break}te>B&&(B=te)}if(!R&&E>B&&(R=!0),!R)throw new V;const z=[new ze(f[1],n),new ze(g[0],n)];return new Ue(y,null,0,z,Ee.ITF,new Date().getTime())}static decodeMiddle(n,i,c,f){let g=new Int32Array(10),p=new Int32Array(5),y=new Int32Array(5);for(g.fill(0),p.fill(0),y.fill(0);i<c;){Rt.recordPattern(n,i,g);for(let E=0;E<5;E++){let R=2*E;p[E]=g[R],y[E]=g[R+1]}let S=ft.decodeDigit(p);f.append(S.toString()),S=this.decodeDigit(y),f.append(S.toString()),g.forEach(function(E){i+=E})}}decodeStart(n){let i=ft.skipWhiteSpace(n),c=ft.findGuardPattern(n,i,ft.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(n,c[0]),c}validateQuietZone(n,i){let c=this.narrowLineWidth*10;c=c<i?c:i;for(let f=i-1;c>0&&f>=0&&!n.get(f);f--)c--;if(c!==0)throw new G}static skipWhiteSpace(n){const i=n.getSize(),c=n.getNextSet(0);if(c===i)throw new G;return c}decodeEnd(n){n.reverse();try{let i=ft.skipWhiteSpace(n),c;try{c=ft.findGuardPattern(n,i,ft.END_PATTERN_REVERSED[0])}catch(g){g instanceof G&&(c=ft.findGuardPattern(n,i,ft.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,c[0]);let f=c[0];return c[0]=n.getSize()-c[1],c[1]=n.getSize()-f,c}finally{n.reverse()}}static findGuardPattern(n,i,c){let f=c.length,g=new Int32Array(f),p=n.getSize(),y=!1,S=0,E=i;g.fill(0);for(let R=i;R<p;R++)if(n.get(R)!==y)g[S]++;else{if(S===f-1){if(Rt.patternMatchVariance(g,c,ft.MAX_INDIVIDUAL_VARIANCE)<ft.MAX_AVG_VARIANCE)return[E,R];E+=g[0]+g[1],k.arraycopy(g,2,g,0,S-1),g[S-1]=0,g[S]=0,S--}else S++;g[S]=1,y=!y}throw new G}static decodeDigit(n){let i=ft.MAX_AVG_VARIANCE,c=-1,f=ft.PATTERNS.length;for(let g=0;g<f;g++){let p=ft.PATTERNS[g],y=Rt.patternMatchVariance(n,p,ft.MAX_INDIVIDUAL_VARIANCE);y<i?(i=y,c=g):y===i&&(c=-1)}if(c>=0)return c%10;throw new G}}ft.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ft.MAX_AVG_VARIANCE=.38,ft.MAX_INDIVIDUAL_VARIANCE=.5,ft.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ft.START_PATTERN=Int32Array.from([1,1,1,1]),ft.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ht extends Rt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,c,f=0,g=Int32Array.from([0,0,0]);for(;!i;){g=Int32Array.from([0,0,0]),c=Ht.findGuardPattern(n,f,!1,this.START_END_PATTERN,g);let p=c[0];f=c[1];let y=p-(f-p);y>=0&&(i=n.isRange(y,p,!1))}return c}static checkChecksum(n){return Ht.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let c=parseInt(n.charAt(i-1),10);return Ht.getStandardUPCEANChecksum(n.substring(0,i-1))===c}static getStandardUPCEANChecksum(n){let i=n.length,c=0;for(let f=i-1;f>=0;f-=2){let g=n.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new V;c+=g}c*=3;for(let f=i-2;f>=0;f-=2){let g=n.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new V;c+=g}return(1e3-c)%10}static decodeEnd(n,i){return Ht.findGuardPattern(n,i,!1,Ht.START_END_PATTERN,new Int32Array(Ht.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,c,f){return this.findGuardPattern(n,i,c,f,new Int32Array(f.length))}static findGuardPattern(n,i,c,f,g){let p=n.getSize();i=c?n.getNextUnset(i):n.getNextSet(i);let y=0,S=i,E=f.length,R=c;for(let B=i;B<p;B++)if(n.get(B)!==R)g[y]++;else{if(y===E-1){if(Rt.patternMatchVariance(g,f,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return Int32Array.from([S,B]);S+=g[0]+g[1];let z=g.slice(2,g.length-1);for(let W=0;W<y-1;W++)g[W]=z[W];g[y-1]=0,g[y]=0,y--}else y++;g[y]=1,R=!R}throw new G}static decodeDigit(n,i,c,f){this.recordPattern(n,c,i);let g=this.MAX_AVG_VARIANCE,p=-1,y=f.length;for(let S=0;S<y;S++){let E=f[S],R=Rt.patternMatchVariance(i,E,Ht.MAX_INDIVIDUAL_VARIANCE);R<g&&(g=R,p=S)}if(p>=0)return p;throw new G}}Ht.MAX_AVG_VARIANCE=.48,Ht.MAX_INDIVIDUAL_VARIANCE=.7,Ht.START_END_PATTERN=Int32Array.from([1,1,1]),Ht.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ht.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ht.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ys{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,c){let f=this.decodeRowStringBuffer,g=this.decodeMiddle(i,c,f),p=f.toString(),y=Ys.parseExtensionString(p),S=[new ze((c[0]+c[1])/2,n),new ze(g,n)],E=new Ue(p,null,0,S,Ee.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(n,i,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=n.getSize(),p=i[1],y=0;for(let E=0;E<5&&p<g;E++){let R=Ht.decodeDigit(n,f,p,Ht.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let B of f)p+=B;R>=10&&(y|=1<<4-E),E!==4&&(p=n.getNextSet(p),p=n.getNextUnset(p))}if(c.length!==5)throw new G;let S=this.determineCheckDigit(y);if(Ys.extensionChecksum(c.toString())!==S)throw new G;return p}static extensionChecksum(n){let i=n.length,c=0;for(let f=i-2;f>=0;f-=2)c+=n.charAt(f).charCodeAt(0)-48;c*=3;for(let f=i-1;f>=0;f-=2)c+=n.charAt(f).charCodeAt(0)-48;return c*=3,c%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new G}static parseExtensionString(n){if(n.length!==5)return null;let i=Ys.parseExtension5String(n);return i==null?null:new Map([[De.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let c=parseInt(n.substring(1)),f=(c/100).toString(),g=c%100,p=g<10?"0"+g:g.toString();return i+f+"."+p}}class Er{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,c){let f=this.decodeRowStringBuffer,g=this.decodeMiddle(i,c,f),p=f.toString(),y=Er.parseExtensionString(p),S=[new ze((c[0]+c[1])/2,n),new ze(g,n)],E=new Ue(p,null,0,S,Ee.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(n,i,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=n.getSize(),p=i[1],y=0;for(let S=0;S<2&&p<g;S++){let E=Ht.decodeDigit(n,f,p,Ht.L_AND_G_PATTERNS);c+=String.fromCharCode(48+E%10);for(let R of f)p+=R;E>=10&&(y|=1<<1-S),S!==1&&(p=n.getNextSet(p),p=n.getNextUnset(p))}if(c.length!==2)throw new G;if(parseInt(c.toString())%4!==y)throw new G;return p}static parseExtensionString(n){return n.length!==2?null:new Map([[De.ISSUE_NUMBER,parseInt(n)]])}}class Ds{static decodeRow(n,i,c){let f=Ht.findGuardPattern(i,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ys().decodeRow(n,i,f)}catch{return new Er().decodeRow(n,i,f)}}}Ds.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class vt extends Ht{constructor(){super(),this.decodeRowStringBuffer="",vt.L_AND_G_PATTERNS=vt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=vt.L_PATTERNS[n-10],c=new Int32Array(i.length);for(let f=0;f<i.length;f++)c[f]=i[i.length-f-1];vt.L_AND_G_PATTERNS[n]=c}}decodeRow(n,i,c){let f=vt.findStartGuardPattern(i),g=c==null?null:c.get(Y.NEED_RESULT_POINT_CALLBACK);if(g!=null){const Oe=new ze((f[0]+f[1])/2,n);g.foundPossibleResultPoint(Oe)}let p=this.decodeMiddle(i,f,this.decodeRowStringBuffer),y=p.rowOffset,S=p.resultString;if(g!=null){const Oe=new ze(y,n);g.foundPossibleResultPoint(Oe)}let E=this.decodeEnd(i,y);if(g!=null){const Oe=new ze((E[0]+E[1])/2,n);g.foundPossibleResultPoint(Oe)}let R=E[1],B=R+(R-E[0]);if(B>=i.getSize()||!i.isRange(R,B,!1))throw new G;let z=S.toString();if(z.length<8)throw new V;if(!vt.checkChecksum(z))throw new j;let W=(f[1]+f[0])/2,te=(E[1]+E[0])/2,se=this.getBarcodeFormat(),le=[new ze(W,n),new ze(te,n)],pe=new Ue(z,null,0,le,se,new Date().getTime()),Pe=0;try{let Oe=Ds.decodeRow(n,i,E[1]);pe.putMetadata(De.UPC_EAN_EXTENSION,Oe.getText()),pe.putAllMetadata(Oe.getResultMetadata()),pe.addResultPoints(Oe.getResultPoints()),Pe=Oe.getText().length}catch{}let Be=c==null?null:c.get(Y.ALLOWED_EAN_EXTENSIONS);if(Be!=null){let Oe=!1;for(let Nt in Be)if(Pe.toString()===Nt){Oe=!0;break}if(!Oe)throw new G}return pe}decodeEnd(n,i){return vt.findGuardPattern(n,i,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return vt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let c=parseInt(n.charAt(i-1),10);return vt.getStandardUPCEANChecksum(n.substring(0,i-1))===c}static getStandardUPCEANChecksum(n){let i=n.length,c=0;for(let f=i-1;f>=0;f-=2){let g=n.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new V;c+=g}c*=3;for(let f=i-2;f>=0;f-=2){let g=n.charAt(f).charCodeAt(0)-48;if(g<0||g>9)throw new V;c+=g}return(1e3-c)%10}}class On extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,c){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=n.getSize(),p=i[1],y=0;for(let E=0;E<6&&p<g;E++){let R=vt.decodeDigit(n,f,p,vt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let B of f)p+=B;R>=10&&(y|=1<<5-E)}c=On.determineFirstDigit(c,y),p=vt.findGuardPattern(n,p,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&p<g;E++){let R=vt.decodeDigit(n,f,p,vt.L_PATTERNS);c+=String.fromCharCode(48+R);for(let B of f)p+=B}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(n,i){for(let c=0;c<10;c++)if(i===this.FIRST_DIGIT_ENCODINGS[c])return n=String.fromCharCode(48+c)+n,n;throw new G}}On.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ge extends vt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,c){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=n.getSize(),p=i[1];for(let S=0;S<4&&p<g;S++){let E=vt.decodeDigit(n,f,p,vt.L_PATTERNS);c+=String.fromCharCode(48+E);for(let R of f)p+=R}p=vt.findGuardPattern(n,p,!0,vt.MIDDLE_PATTERN,new Int32Array(vt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<4&&p<g;S++){let E=vt.decodeDigit(n,f,p,vt.L_PATTERNS);c+=String.fromCharCode(48+E);for(let R of f)p+=R}return{rowOffset:p,resultString:c}}getBarcodeFormat(){return Ee.EAN_8}}class qe extends vt{constructor(){super(...arguments),this.ean13Reader=new On}getBarcodeFormat(){return Ee.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,c))}decodeMiddle(n,i,c){return this.ean13Reader.decodeMiddle(n,i,c)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let c=new Ue(i.substring(1),null,null,n.getResultPoints(),Ee.UPC_A);return n.getResultMetadata()!=null&&c.putAllMetadata(n.getResultMetadata()),c}else throw new G}reset(){this.ean13Reader.reset()}}class lt extends vt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,c){const f=this.decodeMiddleCounters.map(E=>E);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const g=n.getSize();let p=i[1],y=0;for(let E=0;E<6&&p<g;E++){const R=lt.decodeDigit(n,f,p,lt.L_AND_G_PATTERNS);c+=String.fromCharCode(48+R%10);for(let B of f)p+=B;R>=10&&(y|=1<<5-E)}let S=lt.determineNumSysAndCheckDigit(c,y);return{rowOffset:p,resultString:S}}decodeEnd(n,i){return lt.findGuardPatternWithoutCounters(n,i,!0,lt.MIDDLE_END_PATTERN)}checkChecksum(n){return vt.checkChecksum(lt.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let c=0;c<=1;c++)for(let f=0;f<10;f++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][f]){let g=String.fromCharCode(48+c),p=String.fromCharCode(48+f);return g+n+p}throw G.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(g=>g.charCodeAt(0)),c=new be;c.append(n.charAt(0));let f=i[5];switch(f){case 0:case 1:case 2:c.appendChars(i,0,2),c.append(f),c.append("0000"),c.appendChars(i,2,3);break;case 3:c.appendChars(i,0,3),c.append("00000"),c.appendChars(i,3,2);break;case 4:c.appendChars(i,0,4),c.append("00000"),c.append(i[4]);break;default:c.appendChars(i,0,5),c.append("0000"),c.append(f);break}return n.length>=8&&c.append(n.charAt(7)),c.toString()}}lt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),lt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class an extends Rt{constructor(n){super();let i=n==null?null:n.get(Y.POSSIBLE_FORMATS),c=[];o(i)?(c.push(new On),c.push(new qe),c.push(new ge),c.push(new lt)):(i.indexOf(Ee.EAN_13)>-1&&c.push(new On),i.indexOf(Ee.UPC_A)>-1&&c.push(new qe),i.indexOf(Ee.EAN_8)>-1&&c.push(new ge),i.indexOf(Ee.UPC_E)>-1&&c.push(new lt)),this.readers=c}decodeRow(n,i,c){for(let f of this.readers)try{const g=f.decodeRow(n,i,c),p=g.getBarcodeFormat()===Ee.EAN_13&&g.getText().charAt(0)==="0",y=c==null?null:c.get(Y.POSSIBLE_FORMATS),S=y==null||y.includes(Ee.UPC_A);if(p&&S){const E=g.getRawBytes(),R=new Ue(g.getText().substring(1),E,E?E.length:null,g.getResultPoints(),Ee.UPC_A);return R.putAllMetadata(g.getResultMetadata()),R}return g}catch{}throw new G}reset(){for(let n of this.readers)n.reset()}}class zt extends Rt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let c=0;c<i.length;c++)if(Rt.patternMatchVariance(n,i[c],zt.MAX_INDIVIDUAL_VARIANCE)<zt.MAX_AVG_VARIANCE)return c;throw new G}static count(n){return mt.sum(new Int32Array(n))}static increment(n,i){let c=0,f=i[0];for(let g=1;g<n.length;g++)i[g]>f&&(f=i[g],c=g);n[c]++}static decrement(n,i){let c=0,f=i[0];for(let g=1;g<n.length;g++)i[g]<f&&(f=i[g],c=g);n[c]--}static isFinderPattern(n){let i=n[0]+n[1],c=i+n[2]+n[3],f=i/c;if(f>=zt.MIN_FINDER_PATTERN_RATIO&&f<=zt.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of n)y>p&&(p=y),y<g&&(g=y);return p<10*g}return!1}}zt.MAX_AVG_VARIANCE=.2,zt.MAX_INDIVIDUAL_VARIANCE=.45,zt.MIN_FINDER_PATTERN_RATIO=9.5/12,zt.MAX_FINDER_PATTERN_RATIO=12.5/14;class In{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof In))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class X{constructor(n,i,c,f,g){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new ze(c,g)),this.resultPoints.push(new ze(f,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof X))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class Ae{constructor(){}static getRSSvalue(n,i,c){let f=0;for(let S of n)f+=S;let g=0,p=0,y=n.length;for(let S=0;S<y-1;S++){let E;for(E=1,p|=1<<S;E<n[S];E++,p&=~(1<<S)){let R=Ae.combins(f-E-1,y-S-2);if(c&&p===0&&f-E-(y-S-1)>=y-S-1&&(R-=Ae.combins(f-E-(y-S),y-S-2)),y-S-1>1){let B=0;for(let z=f-E-(y-S-2);z>i;z--)B+=Ae.combins(f-E-z-1,y-S-3);R-=B*(y-1-S)}else f-E>i&&R--;g+=R}f-=E}return g}static combins(n,i){let c,f;n-i>i?(f=i,c=n-i):(f=n-i,c=i);let g=1,p=1;for(let y=n;y>c;y--)g*=y,p<=f&&(g/=p,p++);for(;p<=f;)g/=p,p++;return g}}class jt{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let c=12*i,f=new K(c),g=0,y=n[0].getRightChar().getValue();for(let S=11;S>=0;--S)(y&1<<S)!=0&&f.set(g),g++;for(let S=1;S<n.length;++S){let E=n[S],R=E.getLeftChar().getValue();for(let B=11;B>=0;--B)(R&1<<B)!=0&&f.set(g),g++;if(E.getRightChar()!=null){let B=E.getRightChar().getValue();for(let z=11;z>=0;--z)(B&1<<z)!=0&&f.set(g),g++}}return f}}class Mn{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class gs{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class wn extends gs{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===wn.FNC1}}wn.FNC1="$";class Kt extends gs{constructor(n,i,c){super(n),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class rs extends gs{constructor(n,i,c){if(super(n),i<0||i>10||c<0||c>10)throw new V;this.firstDigit=i,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===rs.FNC1}isSecondDigitFNC1(){return this.secondDigit===rs.FNC1}isAnyFNC1(){return this.firstDigit===rs.FNC1||this.secondDigit===rs.FNC1}}rs.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new G;let i=n.substring(0,2);for(let g of He.TWO_DIGIT_DATA_LENGTH)if(g[0]===i)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,g[2],n):He.processFixedAI(2,g[1],n);if(n.length<3)throw new G;let c=n.substring(0,3);for(let g of He.THREE_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,g[2],n):He.processFixedAI(3,g[1],n);for(let g of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,g[2],n):He.processFixedAI(4,g[1],n);if(n.length<4)throw new G;let f=n.substring(0,4);for(let g of He.FOUR_DIGIT_DATA_LENGTH)if(g[0]===f)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,g[2],n):He.processFixedAI(4,g[1],n);throw new G}static processFixedAI(n,i,c){if(c.length<n)throw new G;let f=c.substring(0,n);if(c.length<n+i)throw new G;let g=c.substring(n,n+i),p=c.substring(n+i),y="("+f+")"+g,S=He.parseFieldsInGeneralPurpose(p);return S==null?y:y+S}static processVariableAI(n,i,c){let f=c.substring(0,n),g;c.length<n+i?g=c.length:g=n+i;let p=c.substring(n,g),y=c.substring(g),S="("+f+")"+p,E=He.parseFieldsInGeneralPurpose(y);return E==null?S:S+E}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class ms{constructor(n){this.buffer=new be,this.information=n}decodeAllCodes(n,i){let c=i,f=null;do{let g=this.decodeGeneralPurposeField(c,f),p=He.parseFieldsInGeneralPurpose(g.getNewString());if(p!=null&&n.append(p),g.isRemaining()?f=""+g.getRemainingValue():f=null,c===g.getNewPosition())break;c=g.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(n,4);return g===0?new rs(this.information.getSize(),rs.FNC1,rs.FNC1):new rs(this.information.getSize(),g-1,rs.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),c=(i-8)/11,f=(i-8)%11;return new rs(n+7,c,f)}extractNumericValueFromBitArray(n,i){return ms.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,c){let f=0;for(let g=0;g<c;++g)n.get(i+g)&&(f|=1<<c-g-1);return f}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let c=this.parseBlocks();return c!=null&&c.isRemaining()?new Kt(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new Kt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let c=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(c!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new Kt(this.current.getPosition(),this.buffer.toString()):i=new Kt(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Mn(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new Kt(this.current.getPosition(),this.buffer.toString());return new Mn(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Mn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Kt(this.current.getPosition(),this.buffer.toString());return new Mn(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Mn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new Kt(this.current.getPosition(),this.buffer.toString());return new Mn(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Mn(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,7);if(c>=64&&c<116)return!0;if(n+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(n,8);return f>=232&&f<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new wn(n+5,wn.FNC1);if(i>=5&&i<15)return new wn(n+5,"0"+(i-5));let c=this.extractNumericValueFromBitArray(n,7);if(c>=64&&c<90)return new wn(n+7,""+(c+1));if(c>=90&&c<116)return new wn(n+7,""+(c+7));let f=this.extractNumericValueFromBitArray(n,8),g;switch(f){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new V}return new wn(n+8,g)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,6);return c>=16&&c<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new wn(n+5,wn.FNC1);if(i>=5&&i<15)return new wn(n+5,"0"+(i-5));let c=this.extractNumericValueFromBitArray(n,6);if(c>=32&&c<58)return new wn(n+6,""+(c+33));let f;switch(c){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new yn("Decoding invalid alphanumeric value: "+c)}return new wn(n+6,f)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class kn{constructor(n){this.information=n,this.generalDecoder=new ms(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Zt extends kn{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let c=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,c)}encodeCompressedGtinWithoutAI(n,i,c){for(let f=0;f<4;++f){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*f,10);g/100===0&&n.append("0"),g/10===0&&n.append("0"),n.append(g)}Zt.appendCheckDigit(n,c)}static appendCheckDigit(n,i){let c=0;for(let f=0;f<13;f++){let g=n.charAt(f+i).charCodeAt(0)-48;c+=(f&1)===0?3*g:g}c=10-c%10,c===10&&(c=0),n.append(c)}}Zt.GTIN_SIZE=40;class je extends Zt{constructor(n){super(n)}parseInformation(){let n=new be;n.append("(01)");let i=n.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(je.HEADER_SIZE,4);return n.append(c),this.encodeCompressedGtinWithoutAI(n,je.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,je.HEADER_SIZE+44)}}je.HEADER_SIZE=4;class Me extends kn{constructor(n){super(n)}parseInformation(){let n=new be;return this.getGeneralDecoder().decodeAllCodes(n,Me.HEADER_SIZE)}}Me.HEADER_SIZE=5;class We extends Zt{constructor(n){super(n)}encodeCompressedWeight(n,i,c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(i,c);this.addWeightCode(n,f);let g=this.checkWeight(f),p=1e5;for(let y=0;y<5;++y)g/p===0&&n.append("0"),p/=10;n.append(g)}}class vn extends We{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=vn.HEADER_SIZE+We.GTIN_SIZE+vn.WEIGHT_SIZE)throw new G;let n=new be;return this.encodeCompressedGtin(n,vn.HEADER_SIZE),this.encodeCompressedWeight(n,vn.HEADER_SIZE+We.GTIN_SIZE,vn.WEIGHT_SIZE),n.toString()}}vn.HEADER_SIZE=5,vn.WEIGHT_SIZE=15;class Ar extends vn{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class dr extends vn{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class _s extends Zt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<_s.HEADER_SIZE+Zt.GTIN_SIZE)throw new G;let n=new be;this.encodeCompressedGtin(n,_s.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(_s.HEADER_SIZE+Zt.GTIN_SIZE,_s.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(_s.HEADER_SIZE+Zt.GTIN_SIZE+_s.LAST_DIGIT_SIZE,null);return n.append(c.getNewString()),n.toString()}}_s.HEADER_SIZE=8,_s.LAST_DIGIT_SIZE=2;class Bn extends Zt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Bn.HEADER_SIZE+Zt.GTIN_SIZE)throw new G;let n=new be;this.encodeCompressedGtin(n,Bn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Bn.HEADER_SIZE+Zt.GTIN_SIZE,Bn.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(Bn.HEADER_SIZE+Zt.GTIN_SIZE+Bn.LAST_DIGIT_SIZE,Bn.FIRST_THREE_DIGITS_SIZE);c/100==0&&n.append("0"),c/10==0&&n.append("0"),n.append(c);let f=this.getGeneralDecoder().decodeGeneralPurposeField(Bn.HEADER_SIZE+Zt.GTIN_SIZE+Bn.LAST_DIGIT_SIZE+Bn.FIRST_THREE_DIGITS_SIZE,null);return n.append(f.getNewString()),n.toString()}}Bn.HEADER_SIZE=8,Bn.LAST_DIGIT_SIZE=2,Bn.FIRST_THREE_DIGITS_SIZE=10;class $t extends We{constructor(n,i,c){super(n),this.dateCode=c,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE+$t.DATE_SIZE)throw new G;let n=new be;return this.encodeCompressedGtin(n,$t.HEADER_SIZE),this.encodeCompressedWeight(n,$t.HEADER_SIZE+$t.GTIN_SIZE,$t.WEIGHT_SIZE),this.encodeCompressedDate(n,$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i,$t.DATE_SIZE);if(c==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let f=c%32;c/=32;let g=c%12+1;c/=12;let p=c;p/10==0&&n.append("0"),n.append(p),g/10==0&&n.append("0"),n.append(g),f/10==0&&n.append("0"),n.append(f)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}$t.HEADER_SIZE=8,$t.WEIGHT_SIZE=20,$t.DATE_SIZE=16;function Ta(L){try{if(L.get(1))return new je(L);if(!L.get(2))return new Me(L);switch(ms.extractNumericValueFromBitArray(L,1,4)){case 4:return new Ar(L);case 5:return new dr(L)}switch(ms.extractNumericValueFromBitArray(L,1,5)){case 12:return new _s(L);case 13:return new Bn(L)}switch(ms.extractNumericValueFromBitArray(L,1,7)){case 56:return new $t(L,"310","11");case 57:return new $t(L,"320","11");case 58:return new $t(L,"310","13");case 59:return new $t(L,"320","13");case 60:return new $t(L,"310","15");case 61:return new $t(L,"320","15");case 62:return new $t(L,"310","17");case 63:return new $t(L,"320","17")}}catch(n){throw console.log(n),new yn("unknown decoder: "+L)}}class Ts{constructor(n,i,c,f){this.leftchar=n,this.rightchar=i,this.finderpattern=c,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof Ts?Ts.equalsOrNull(n.leftchar,i.leftchar)&&Ts.equalsOrNull(n.rightchar,i.rightchar)&&Ts.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:Ts.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Un{constructor(n,i,c){this.pairs=n,this.rowNumber=i,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof Un?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let c;return n.forEach((f,g)=>{i.forEach(p=>{f.getLeftChar().getValue()===p.getLeftChar().getValue()&&f.getRightChar().getValue()===p.getRightChar().getValue()&&f.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(c=!0)})}),c}}class Te extends zt{constructor(n){super(...arguments),this.pairs=new Array(Te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,c){this.pairs.length=0,this.startFromEven=!1;try{return Te.constructResult(this.decodeRow2pairs(n,i))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Te.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let c=!1;for(;!c;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(g){if(g instanceof G){if(!this.pairs.length)throw new G;c=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(n,!1),f){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new G}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(c){this.verbose&&console.log(c)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let c=i;c<this.rows.length;c++){let f=this.rows[c];this.pairs.length=0;for(let p of n)this.pairs.push(p.getPairs());if(this.pairs.push(f.getPairs()),!Te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(n);g.push(f);try{return this.checkRows(g,c+1)}catch(p){this.verbose&&console.log(p)}}throw new G}static isValidSequence(n){for(let i of Te.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let c=!0;for(let f=0;f<n.length;f++)if(n[f].getFinderPattern().getValue()!=i[f]){c=!1;break}if(c)return!0}return!1}storeRow(n,i){let c=0,f=!1,g=!1;for(;c<this.rows.length;){let p=this.rows[c];if(p.getRowNumber()>n){g=p.isEquivalent(this.pairs);break}f=p.isEquivalent(this.pairs),c++}g||f||Te.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new Un(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let c of i)if(c.getPairs().length!==n.length){for(let f of c.getPairs())for(let g of n)if(Ts.equals(f,g))break}}static isPartialRow(n,i){for(let c of i){let f=!0;for(let g of n){let p=!1;for(let y of c.getPairs())if(g.equals(y)){p=!0;break}if(!p){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=jt.buildBitArray(n),f=Ta(i).parseInformation(),g=n[0].getFinderPattern().getResultPoints(),p=n[n.length-1].getFinderPattern().getResultPoints(),y=[g[0],g[1],p[0],p[1]];return new Ue(f,null,null,y,Ee.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),c=n.getRightChar();if(c==null)return!1;let f=c.getChecksumPortion(),g=2;for(let y=1;y<this.pairs.size();++y){let S=this.pairs.get(y);f+=S.getLeftChar().getChecksumPortion(),g++;let E=S.getRightChar();E!=null&&(f+=E.getChecksumPortion(),g++)}return f%=211,211*(g-4)+f==i.getValue()}static getNextSecondBar(n,i){let c;return n.get(i)?(c=n.getNextUnset(i),c=n.getNextSet(c)):(c=n.getNextSet(i),c=n.getNextUnset(c)),c}retrieveNextPair(n,i,c){let f=i.length%2==0;this.startFromEven&&(f=!f);let g,p=!0,y=-1;do this.findNextPair(n,i,y),g=this.parseFoundFinderPattern(n,c,f),g==null?y=Te.getNextSecondBar(n,this.startEnd[0]):p=!1;while(p);let S=this.decodeDataCharacter(n,g,f,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new G;let E;try{E=this.decodeDataCharacter(n,g,f,!1)}catch(R){E=null,this.verbose&&console.log(R)}return new Ts(S,E,g,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,c){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let g=n.getSize(),p;c>=0?p=c:this.isEmptyPair(i)?p=0:p=i[i.length-1].getFinderPattern().getStartEnd()[1];let y=i.length%2!=0;this.startFromEven&&(y=!y);let S=!1;for(;p<g&&(S=!n.get(p),!!S);)p++;let E=0,R=p;for(let B=p;B<g;B++)if(n.get(B)!=S)f[E]++;else{if(E==3){if(y&&Te.reverseCounters(f),Te.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=B;return}y&&Te.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,E--}else E++;f[E]=1,S=!S}throw new G}static reverseCounters(n){let i=n.length;for(let c=0;c<i/2;++c){let f=n[c];n[c]=n[i-c-1],n[i-c-1]=f}}parseFoundFinderPattern(n,i,c){let f,g,p;if(c){let E=this.startEnd[0]-1;for(;E>=0&&!n.get(E);)E--;E++,f=this.startEnd[0]-E,g=E,p=this.startEnd[1]}else g=this.startEnd[0],p=n.getNextUnset(this.startEnd[1]+1),f=p-this.startEnd[1];let y=this.getDecodeFinderCounters();k.arraycopy(y,0,y,1,y.length-1),y[0]=f;let S;try{S=this.parseFinderValue(y,Te.FINDER_PATTERNS)}catch{return null}return new X(S,[g,p],g,p,i)}decodeDataCharacter(n,i,c,f){let g=this.getDataCharacterCounters();for(let sn=0;sn<g.length;sn++)g[sn]=0;if(f)Te.recordPatternInReverse(n,i.getStartEnd()[0],g);else{Te.recordPattern(n,i.getStartEnd()[1],g);for(let sn=0,os=g.length-1;sn<os;sn++,os--){let Os=g[sn];g[sn]=g[os],g[os]=Os}}let p=17,y=mt.sum(new Int32Array(g))/p,S=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(y-S)/S>.3)throw new G;let E=this.getOddCounts(),R=this.getEvenCounts(),B=this.getOddRoundingErrors(),z=this.getEvenRoundingErrors();for(let sn=0;sn<g.length;sn++){let os=1*g[sn]/y,Os=os+.5;if(Os<1){if(os<.3)throw new G;Os=1}else if(Os>8){if(os>8.7)throw new G;Os=8}let za=sn/2;(sn&1)==0?(E[za]=Os,B[za]=os-Os):(R[za]=Os,z[za]=os-Os)}this.adjustOddEvenCounts(p);let W=4*i.getValue()+(c?0:2)+(f?0:1)-1,te=0,se=0;for(let sn=E.length-1;sn>=0;sn--){if(Te.isNotA1left(i,c,f)){let os=Te.WEIGHTS[W][2*sn];se+=E[sn]*os}te+=E[sn]}let le=0;for(let sn=R.length-1;sn>=0;sn--)if(Te.isNotA1left(i,c,f)){let os=Te.WEIGHTS[W][2*sn+1];le+=R[sn]*os}let pe=se+le;if((te&1)!=0||te>13||te<4)throw new G;let Pe=(13-te)/2,Be=Te.SYMBOL_WIDEST[Pe],Oe=9-Be,Nt=Ae.getRSSvalue(E,Be,!0),yt=Ae.getRSSvalue(R,Oe,!1),Pn=Te.EVEN_TOTAL_SUBSET[Pe],Us=Te.GSUM[Pe],ps=Nt*Pn+yt+Us;return new In(ps,pe)}static isNotA1left(n,i,c){return!(n.getValue()==0&&i&&c)}adjustOddEvenCounts(n){let i=mt.sum(new Int32Array(this.getOddCounts())),c=mt.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1;i>13?g=!0:i<4&&(f=!0);let p=!1,y=!1;c>13?y=!0:c<4&&(p=!0);let S=i+c-n,E=(i&1)==1,R=(c&1)==0;if(S==1)if(E){if(R)throw new G;g=!0}else{if(!R)throw new G;y=!0}else if(S==-1)if(E){if(R)throw new G;f=!0}else{if(!R)throw new G;p=!0}else if(S==0){if(E){if(!R)throw new G;i<c?(f=!0,y=!0):(g=!0,p=!0)}else if(R)throw new G}else throw new G;if(f){if(g)throw new G;Te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new G;Te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Te.SYMBOL_WIDEST=[7,5,4,3,1],Te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Te.GSUM=[0,348,1388,2948,3988],Te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Te.FINDER_PAT_A=0,Te.FINDER_PAT_B=1,Te.FINDER_PAT_C=2,Te.FINDER_PAT_D=3,Te.FINDER_PAT_E=4,Te.FINDER_PAT_F=5,Te.FINDER_PATTERN_SEQUENCES=[[Te.FINDER_PAT_A,Te.FINDER_PAT_A],[Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B],[Te.FINDER_PAT_A,Te.FINDER_PAT_C,Te.FINDER_PAT_B,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_C],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_E,Te.FINDER_PAT_B,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F],[Te.FINDER_PAT_A,Te.FINDER_PAT_A,Te.FINDER_PAT_B,Te.FINDER_PAT_B,Te.FINDER_PAT_C,Te.FINDER_PAT_D,Te.FINDER_PAT_D,Te.FINDER_PAT_E,Te.FINDER_PAT_E,Te.FINDER_PAT_F,Te.FINDER_PAT_F]],Te.MAX_PAIRS=11;class pc extends In{constructor(n,i,c){super(n,i),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class tn extends zt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,c){const f=this.decodePair(i,!1,n,c);tn.addOrTally(this.possibleLeftPairs,f),i.reverse();let g=this.decodePair(i,!0,n,c);tn.addOrTally(this.possibleRightPairs,g),i.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&tn.checkChecksum(p,y))return tn.constructResult(p,y)}throw new G}static addOrTally(n,i){if(i==null)return;let c=!1;for(let f of n)if(f.getValue()===i.getValue()){f.incrementCount(),c=!0;break}c||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let c=4537077*n.getValue()+i.getValue(),f=new String(c).toString(),g=new be;for(let E=13-f.length;E>0;E--)g.append("0");g.append(f);let p=0;for(let E=0;E<13;E++){let R=g.charAt(E).charCodeAt(0)-48;p+=(E&1)===0?3*R:R}p=10-p%10,p===10&&(p=0),g.append(p.toString());let y=n.getFinderPattern().getResultPoints(),S=i.getFinderPattern().getResultPoints();return new Ue(g.toString(),null,0,[y[0],y[1],S[0],S[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(n,i){let c=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,f=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,c===f}decodePair(n,i,c,f){try{let g=this.findFinderPattern(n,i),p=this.parseFoundFinderPattern(n,c,i,g),y=f==null?null:f.get(Y.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(g[0]+g[1])/2;i&&(R=n.getSize()-1-R),y.foundPossibleResultPoint(new ze(R,c))}let S=this.decodeDataCharacter(n,p,!0),E=this.decodeDataCharacter(n,p,!1);return new pc(1597*S.getValue()+E.getValue(),S.getChecksumPortion()+4*E.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(n,i,c){let f=this.getDataCharacterCounters();for(let le=0;le<f.length;le++)f[le]=0;if(c)Rt.recordPatternInReverse(n,i.getStartEnd()[0],f);else{Rt.recordPattern(n,i.getStartEnd()[1]+1,f);for(let le=0,pe=f.length-1;le<pe;le++,pe--){let Pe=f[le];f[le]=f[pe],f[pe]=Pe}}let g=c?16:15,p=mt.sum(new Int32Array(f))/g,y=this.getOddCounts(),S=this.getEvenCounts(),E=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let le=0;le<f.length;le++){let pe=f[le]/p,Pe=Math.floor(pe+.5);Pe<1?Pe=1:Pe>8&&(Pe=8);let Be=Math.floor(le/2);(le&1)===0?(y[Be]=Pe,E[Be]=pe-Pe):(S[Be]=Pe,R[Be]=pe-Pe)}this.adjustOddEvenCounts(c,g);let B=0,z=0;for(let le=y.length-1;le>=0;le--)z*=9,z+=y[le],B+=y[le];let W=0,te=0;for(let le=S.length-1;le>=0;le--)W*=9,W+=S[le],te+=S[le];let se=z+3*W;if(c){if((B&1)!==0||B>12||B<4)throw new G;let le=(12-B)/2,pe=tn.OUTSIDE_ODD_WIDEST[le],Pe=9-pe,Be=Ae.getRSSvalue(y,pe,!1),Oe=Ae.getRSSvalue(S,Pe,!0),Nt=tn.OUTSIDE_EVEN_TOTAL_SUBSET[le],yt=tn.OUTSIDE_GSUM[le];return new In(Be*Nt+Oe+yt,se)}else{if((te&1)!==0||te>10||te<4)throw new G;let le=(10-te)/2,pe=tn.INSIDE_ODD_WIDEST[le],Pe=9-pe,Be=Ae.getRSSvalue(y,pe,!0),Oe=Ae.getRSSvalue(S,Pe,!1),Nt=tn.INSIDE_ODD_TOTAL_SUBSET[le],yt=tn.INSIDE_GSUM[le];return new In(Oe*Nt+Be+yt,se)}}findFinderPattern(n,i){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=n.getSize(),g=!1,p=0;for(;p<f&&(g=!n.get(p),i!==g);)p++;let y=0,S=p;for(let E=p;E<f;E++)if(n.get(E)!==g)c[y]++;else{if(y===3){if(zt.isFinderPattern(c))return[S,E];S+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,y--}else y++;c[y]=1,g=!g}throw new G}parseFoundFinderPattern(n,i,c,f){let g=n.get(f[0]),p=f[0]-1;for(;p>=0&&g!==n.get(p);)p--;p++;const y=f[0]-p,S=this.getDecodeFinderCounters(),E=new Int32Array(S.length);k.arraycopy(S,0,E,1,S.length-1),E[0]=y;const R=this.parseFinderValue(E,tn.FINDER_PATTERNS);let B=p,z=f[1];return c&&(B=n.getSize()-1-B,z=n.getSize()-1-z),new X(R,[p,f[1]],B,z,i)}adjustOddEvenCounts(n,i){let c=mt.sum(new Int32Array(this.getOddCounts())),f=mt.sum(new Int32Array(this.getEvenCounts())),g=!1,p=!1,y=!1,S=!1;n?(c>12?p=!0:c<4&&(g=!0),f>12?S=!0:f<4&&(y=!0)):(c>11?p=!0:c<5&&(g=!0),f>10?S=!0:f<4&&(y=!0));let E=c+f-i,R=(c&1)===(n?1:0),B=(f&1)===1;if(E===1)if(R){if(B)throw new G;p=!0}else{if(!B)throw new G;S=!0}else if(E===-1)if(R){if(B)throw new G;g=!0}else{if(!B)throw new G;y=!0}else if(E===0){if(R){if(!B)throw new G;c<f?(g=!0,S=!0):(p=!0,y=!0)}else if(B)throw new G}else throw new G;if(g){if(p)throw new G;zt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&zt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(S)throw new G;zt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&zt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tn.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],tn.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],tn.OUTSIDE_GSUM=[0,161,961,2015,2715],tn.INSIDE_GSUM=[0,336,1036,1516],tn.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],tn.INSIDE_ODD_WIDEST=[2,4,6,8],tn.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Xs extends Rt{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const c=n?n.get(Y.POSSIBLE_FORMATS):null,f=n&&n.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;c?((c.includes(Ee.EAN_13)||c.includes(Ee.UPC_A)||c.includes(Ee.EAN_8)||c.includes(Ee.UPC_E))&&this.readers.push(new an(n)),c.includes(Ee.CODE_39)&&this.readers.push(new dt(f)),c.includes(Ee.CODE_128)&&this.readers.push(new Ne),c.includes(Ee.ITF)&&this.readers.push(new ft),c.includes(Ee.RSS_14)&&this.readers.push(new tn),c.includes(Ee.RSS_EXPANDED)&&this.readers.push(new Te(this.verbose))):(this.readers.push(new an(n)),this.readers.push(new dt),this.readers.push(new an(n)),this.readers.push(new Ne),this.readers.push(new ft),this.readers.push(new tn),this.readers.push(new Te(this.verbose)))}decodeRow(n,i,c){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(n,i,c)}catch{}throw new G}reset(){this.readers.forEach(n=>n.reset())}}class yd extends Le{constructor(n=500,i){super(new Xs(i),n,i)}}class Vt{constructor(n,i,c){this.ecCodewords=n,this.ecBlocks=[i],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class qt{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(n,i,c,f,g,p){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=c,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=g,this.ecBlocks=p;let y=0;const S=p.getECCodewords(),E=p.getECBlocks();for(let R of E)y+=R.getCount()*(R.getDataCodewords()+S);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if((n&1)!==0||(i&1)!==0)throw new V;for(let c of Ot.VERSIONS)if(c.symbolSizeRows===n&&c.symbolSizeColumns===i)return c;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new Ot(1,10,10,8,8,new Vt(5,new qt(1,3))),new Ot(2,12,12,10,10,new Vt(7,new qt(1,5))),new Ot(3,14,14,12,12,new Vt(10,new qt(1,8))),new Ot(4,16,16,14,14,new Vt(12,new qt(1,12))),new Ot(5,18,18,16,16,new Vt(14,new qt(1,18))),new Ot(6,20,20,18,18,new Vt(18,new qt(1,22))),new Ot(7,22,22,20,20,new Vt(20,new qt(1,30))),new Ot(8,24,24,22,22,new Vt(24,new qt(1,36))),new Ot(9,26,26,24,24,new Vt(28,new qt(1,44))),new Ot(10,32,32,14,14,new Vt(36,new qt(1,62))),new Ot(11,36,36,16,16,new Vt(42,new qt(1,86))),new Ot(12,40,40,18,18,new Vt(48,new qt(1,114))),new Ot(13,44,44,20,20,new Vt(56,new qt(1,144))),new Ot(14,48,48,22,22,new Vt(68,new qt(1,174))),new Ot(15,52,52,24,24,new Vt(42,new qt(2,102))),new Ot(16,64,64,14,14,new Vt(56,new qt(2,140))),new Ot(17,72,72,16,16,new Vt(36,new qt(4,92))),new Ot(18,80,80,18,18,new Vt(48,new qt(4,114))),new Ot(19,88,88,20,20,new Vt(56,new qt(4,144))),new Ot(20,96,96,22,22,new Vt(68,new qt(4,174))),new Ot(21,104,104,24,24,new Vt(56,new qt(6,136))),new Ot(22,120,120,18,18,new Vt(68,new qt(6,175))),new Ot(23,132,132,20,20,new Vt(62,new qt(8,163))),new Ot(24,144,144,22,22,new Vt(62,new qt(8,156),new qt(2,155))),new Ot(25,8,18,6,16,new Vt(7,new qt(1,5))),new Ot(26,8,32,6,14,new Vt(11,new qt(1,10))),new Ot(27,12,26,10,24,new Vt(14,new qt(1,16))),new Ot(28,12,36,10,16,new Vt(18,new qt(1,22))),new Ot(29,16,36,14,16,new Vt(24,new qt(1,32))),new Ot(30,16,48,14,22,new Vt(28,new qt(1,49)))]}}Ot.VERSIONS=Ot.buildVersions();class ja{constructor(n){const i=n.getHeight();if(i<8||i>144||(i&1)!==0)throw new V;this.version=ja.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Re(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),c=n.getWidth();return Ot.getVersionForDimensions(i,c)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,c=4,f=0;const g=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let y=!1,S=!1,E=!1,R=!1;do if(c===g&&f===0&&!y)n[i++]=this.readCorner1(g,p)&255,c-=2,f+=2,y=!0;else if(c===g-2&&f===0&&(p&3)!==0&&!S)n[i++]=this.readCorner2(g,p)&255,c-=2,f+=2,S=!0;else if(c===g+4&&f===2&&(p&7)===0&&!E)n[i++]=this.readCorner3(g,p)&255,c-=2,f+=2,E=!0;else if(c===g-2&&f===0&&(p&7)===4&&!R)n[i++]=this.readCorner4(g,p)&255,c-=2,f+=2,R=!0;else{do c<g&&f>=0&&!this.readMappingMatrix.get(f,c)&&(n[i++]=this.readUtah(c,f,g,p)&255),c-=2,f+=2;while(c>=0&&f<p);c+=1,f+=3;do c>=0&&f<p&&!this.readMappingMatrix.get(f,c)&&(n[i++]=this.readUtah(c,f,g,p)&255),c+=2,f-=2;while(c<g&&f>=0);c+=3,f+=1}while(c<g||f<p);if(i!==this.version.getTotalCodewords())throw new V;return n}readModule(n,i,c,f){return n<0&&(n+=c,i+=4-(c+4&7)),i<0&&(i+=f,n+=4-(f+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,c,f){let g=0;return this.readModule(n-2,i-2,c,f)&&(g|=1),g<<=1,this.readModule(n-2,i-1,c,f)&&(g|=1),g<<=1,this.readModule(n-1,i-2,c,f)&&(g|=1),g<<=1,this.readModule(n-1,i-1,c,f)&&(g|=1),g<<=1,this.readModule(n-1,i,c,f)&&(g|=1),g<<=1,this.readModule(n,i-2,c,f)&&(g|=1),g<<=1,this.readModule(n,i-1,c,f)&&(g|=1),g<<=1,this.readModule(n,i,c,f)&&(g|=1),g}readCorner1(n,i){let c=0;return this.readModule(n-1,0,n,i)&&(c|=1),c<<=1,this.readModule(n-1,1,n,i)&&(c|=1),c<<=1,this.readModule(n-1,2,n,i)&&(c|=1),c<<=1,this.readModule(0,i-2,n,i)&&(c|=1),c<<=1,this.readModule(0,i-1,n,i)&&(c|=1),c<<=1,this.readModule(1,i-1,n,i)&&(c|=1),c<<=1,this.readModule(2,i-1,n,i)&&(c|=1),c<<=1,this.readModule(3,i-1,n,i)&&(c|=1),c}readCorner2(n,i){let c=0;return this.readModule(n-3,0,n,i)&&(c|=1),c<<=1,this.readModule(n-2,0,n,i)&&(c|=1),c<<=1,this.readModule(n-1,0,n,i)&&(c|=1),c<<=1,this.readModule(0,i-4,n,i)&&(c|=1),c<<=1,this.readModule(0,i-3,n,i)&&(c|=1),c<<=1,this.readModule(0,i-2,n,i)&&(c|=1),c<<=1,this.readModule(0,i-1,n,i)&&(c|=1),c<<=1,this.readModule(1,i-1,n,i)&&(c|=1),c}readCorner3(n,i){let c=0;return this.readModule(n-1,0,n,i)&&(c|=1),c<<=1,this.readModule(n-1,i-1,n,i)&&(c|=1),c<<=1,this.readModule(0,i-3,n,i)&&(c|=1),c<<=1,this.readModule(0,i-2,n,i)&&(c|=1),c<<=1,this.readModule(0,i-1,n,i)&&(c|=1),c<<=1,this.readModule(1,i-3,n,i)&&(c|=1),c<<=1,this.readModule(1,i-2,n,i)&&(c|=1),c<<=1,this.readModule(1,i-1,n,i)&&(c|=1),c}readCorner4(n,i){let c=0;return this.readModule(n-3,0,n,i)&&(c|=1),c<<=1,this.readModule(n-2,0,n,i)&&(c|=1),c<<=1,this.readModule(n-1,0,n,i)&&(c|=1),c<<=1,this.readModule(0,i-2,n,i)&&(c|=1),c<<=1,this.readModule(0,i-1,n,i)&&(c|=1),c<<=1,this.readModule(1,i-1,n,i)&&(c|=1),c<<=1,this.readModule(2,i-1,n,i)&&(c|=1),c<<=1,this.readModule(3,i-1,n,i)&&(c|=1),c}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new N("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),p=i/f|0,y=c/g|0,S=p*f,E=y*g,R=new Re(E,S);for(let B=0;B<p;++B){const z=B*f;for(let W=0;W<y;++W){const te=W*g;for(let se=0;se<f;++se){const le=B*(f+2)+1+se,pe=z+se;for(let Pe=0;Pe<g;++Pe){const Be=W*(g+2)+1+Pe;if(n.get(Be,le)){const Oe=te+Pe;R.set(Oe,pe)}}}}}return R}}class Ra{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const c=i.getECBlocks();let f=0;const g=c.getECBlocks();for(let se of g)f+=se.getCount();const p=new Array(f);let y=0;for(let se of g)for(let le=0;le<se.getCount();le++){const pe=se.getDataCodewords(),Pe=c.getECCodewords()+pe;p[y++]=new Ra(pe,new Uint8Array(Pe))}const E=p[0].codewords.length-c.getECCodewords(),R=E-1;let B=0;for(let se=0;se<R;se++)for(let le=0;le<y;le++)p[le].codewords[se]=n[B++];const z=i.getVersionNumber()===24,W=z?8:y;for(let se=0;se<W;se++)p[se].codewords[E-1]=n[B++];const te=p[0].codewords.length;for(let se=E;se<te;se++)for(let le=0;le<y;le++){const pe=z?(le+8)%y:le,Pe=z&&pe>7?se-1:se;p[pe].codewords[Pe]=n[B++]}if(B!==n.length)throw new N;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Qs{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new N(""+n);let i=0,c=this.bitOffset,f=this.byteOffset;const g=this.bytes;if(c>0){const p=8-c,y=n<p?n:p,S=p-y,E=255>>8-y<<S;i=(g[f]&E)>>S,n-=y,c+=y,c===8&&(c=0,f++)}if(n>0){for(;n>=8;)i=i<<8|g[f]&255,f++,n-=8;if(n>0){const p=8-n,y=255>>p<<p;i=i<<n|(g[f]&y)>>p,c+=n}}return this.bitOffset=c,this.byteOffset=f,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Yt;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(Yt||(Yt={}));class Nr{static decode(n){const i=new Qs(n),c=new be,f=new be,g=new Array;let p=Yt.ASCII_ENCODE;do if(p===Yt.ASCII_ENCODE)p=this.decodeAsciiSegment(i,c,f);else{switch(p){case Yt.C40_ENCODE:this.decodeC40Segment(i,c);break;case Yt.TEXT_ENCODE:this.decodeTextSegment(i,c);break;case Yt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,c);break;case Yt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,c);break;case Yt.BASE256_ENCODE:this.decodeBase256Segment(i,c,g);break;default:throw new V}p=Yt.ASCII_ENCODE}while(p!==Yt.PAD_ENCODE&&i.available()>0);return f.length()>0&&c.append(f.toString()),new Ce(n,c.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(n,i,c){let f=!1;do{let g=n.readBits(8);if(g===0)throw new V;if(g<=128)return f&&(g+=128),i.append(String.fromCharCode(g-1)),Yt.ASCII_ENCODE;if(g===129)return Yt.PAD_ENCODE;if(g<=229){const p=g-130;p<10&&i.append("0"),i.append(""+p)}else switch(g){case 230:return Yt.C40_ENCODE;case 231:return Yt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:i.append("[)>05"),c.insert(0,"");break;case 237:i.append("[)>06"),c.insert(0,"");break;case 238:return Yt.ANSIX12_ENCODE;case 239:return Yt.TEXT_ENCODE;case 240:return Yt.EDIFACT_ENCODE;case 241:break;default:if(g!==254||n.available()!==0)throw new V;break}}while(n.available()>0);return Yt.ASCII_ENCODE}static decodeC40Segment(n,i){let c=!1;const f=[];let g=0;do{if(n.available()===8)return;const p=n.readBits(8);if(p===254)return;this.parseTwoBytes(p,n.readBits(8),f);for(let y=0;y<3;y++){const S=f[y];switch(g){case 0:if(S<3)g=S+1;else if(S<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[S];c?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):i.append(E)}else throw new V;break;case 1:c?(i.append(String.fromCharCode(S+128)),c=!1):i.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[S];c?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):i.append(E)}else switch(S){case 27:i.append("");break;case 30:c=!0;break;default:throw new V}g=0;break;case 3:c?(i.append(String.fromCharCode(S+224)),c=!1):i.append(String.fromCharCode(S+96)),g=0;break;default:throw new V}}}while(n.available()>0)}static decodeTextSegment(n,i){let c=!1,f=[],g=0;do{if(n.available()===8)return;const p=n.readBits(8);if(p===254)return;this.parseTwoBytes(p,n.readBits(8),f);for(let y=0;y<3;y++){const S=f[y];switch(g){case 0:if(S<3)g=S+1;else if(S<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[S];c?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):i.append(E)}else throw new V;break;case 1:c?(i.append(String.fromCharCode(S+128)),c=!1):i.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[S];c?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):i.append(E)}else switch(S){case 27:i.append("");break;case 30:c=!0;break;default:throw new V}g=0;break;case 3:if(S<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[S];c?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),c=!1):i.append(E),g=0}else throw new V;break;default:throw new V}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const c=[];do{if(n.available()===8)return;const f=n.readBits(8);if(f===254)return;this.parseTwoBytes(f,n.readBits(8),c);for(let g=0;g<3;g++){const p=c[g];switch(p){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(p<14)i.append(String.fromCharCode(p+44));else if(p<40)i.append(String.fromCharCode(p+51));else throw new V;break}}}while(n.available()>0)}static parseTwoBytes(n,i,c){let f=(n<<8)+i-1,g=Math.floor(f/1600);c[0]=g,f-=g*1600,g=Math.floor(f/40),c[1]=g,c[2]=f-g*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let c=0;c<4;c++){let f=n.readBits(6);if(f===31){const g=8-n.getBitOffset();g!==8&&n.readBits(g);return}(f&32)===0&&(f|=64),i.append(String.fromCharCode(f))}}while(n.available()>0)}static decodeBase256Segment(n,i,c){let f=1+n.getByteOffset();const g=this.unrandomize255State(n.readBits(8),f++);let p;if(g===0?p=n.available()/8|0:g<250?p=g:p=250*(g-249)+this.unrandomize255State(n.readBits(8),f++),p<0)throw new V;const y=new Uint8Array(p);for(let S=0;S<p;S++){if(n.available()<8)throw new V;y[S]=this.unrandomize255State(n.readBits(8),f++)}c.push(y);try{i.append(fe.decode(y,ie.ISO88591))}catch(S){throw new yn("Platform does not support required encoding: "+S.message)}}static unrandomize255State(n,i){const c=149*i%255+1,f=n-c;return f>=0?f:f+256}}Nr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Nr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Nr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Nr.TEXT_SHIFT2_SET_CHARS=Nr.C40_SHIFT2_SET_CHARS,Nr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class wd{constructor(){this.rsDecoder=new un(ht.DATA_MATRIX_FIELD_256)}decode(n){const i=new ja(n),c=i.getVersion(),f=i.readCodewords(),g=Ra.getDataBlocks(f,c);let p=0;for(let E of g)p+=E.getNumDataCodewords();const y=new Uint8Array(p),S=g.length;for(let E=0;E<S;E++){const R=g[E],B=R.getCodewords(),z=R.getNumDataCodewords();this.correctErrors(B,z);for(let W=0;W<z;W++)y[W*S+E]=B[W]}return Nr.decode(y)}correctErrors(n,i){const c=new Int32Array(n);try{this.rsDecoder.decode(c,n.length-i)}catch{throw new j}for(let f=0;f<i;f++)n[f]=c[f]}}class Cn{constructor(n){this.image=n,this.rectangleDetector=new Fe(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new G;i=this.shiftToModuleCenter(i);const c=i[0],f=i[1],g=i[2],p=i[3];let y=this.transitionsBetween(c,p)+1,S=this.transitionsBetween(g,p)+1;(y&1)===1&&(y+=1),(S&1)===1&&(S+=1),4*y<7*S&&4*S<7*y&&(y=S=Math.max(y,S));let E=Cn.sampleGrid(this.image,c,f,g,p,y,S);return new Ns(E,[c,f,g,p])}static shiftPoint(n,i,c){let f=(i.getX()-n.getX())/(c+1),g=(i.getY()-n.getY())/(c+1);return new ze(n.getX()+f,n.getY()+g)}static moveAway(n,i,c){let f=n.getX(),g=n.getY();return f<i?f-=1:f+=1,g<c?g-=1:g+=1,new ze(f,g)}detectSolid1(n){let i=n[0],c=n[1],f=n[3],g=n[2],p=this.transitionsBetween(i,c),y=this.transitionsBetween(c,f),S=this.transitionsBetween(f,g),E=this.transitionsBetween(g,i),R=p,B=[g,i,c,f];return R>y&&(R=y,B[0]=i,B[1]=c,B[2]=f,B[3]=g),R>S&&(R=S,B[0]=c,B[1]=f,B[2]=g,B[3]=i),R>E&&(B[0]=f,B[1]=g,B[2]=i,B[3]=c),B}detectSolid2(n){let i=n[0],c=n[1],f=n[2],g=n[3],p=this.transitionsBetween(i,g),y=Cn.shiftPoint(c,f,(p+1)*4),S=Cn.shiftPoint(f,c,(p+1)*4),E=this.transitionsBetween(y,i),R=this.transitionsBetween(S,g);return E<R?(n[0]=i,n[1]=c,n[2]=f,n[3]=g):(n[0]=c,n[1]=f,n[2]=g,n[3]=i),n}correctTopRight(n){let i=n[0],c=n[1],f=n[2],g=n[3],p=this.transitionsBetween(i,g),y=this.transitionsBetween(c,g),S=Cn.shiftPoint(i,c,(y+1)*4),E=Cn.shiftPoint(f,c,(p+1)*4);p=this.transitionsBetween(S,g),y=this.transitionsBetween(E,g);let R=new ze(g.getX()+(f.getX()-c.getX())/(p+1),g.getY()+(f.getY()-c.getY())/(p+1)),B=new ze(g.getX()+(i.getX()-c.getX())/(y+1),g.getY()+(i.getY()-c.getY())/(y+1));if(!this.isValid(R))return this.isValid(B)?B:null;if(!this.isValid(B))return R;let z=this.transitionsBetween(S,R)+this.transitionsBetween(E,R),W=this.transitionsBetween(S,B)+this.transitionsBetween(E,B);return z>W?R:B}shiftToModuleCenter(n){let i=n[0],c=n[1],f=n[2],g=n[3],p=this.transitionsBetween(i,g)+1,y=this.transitionsBetween(f,g)+1,S=Cn.shiftPoint(i,c,y*4),E=Cn.shiftPoint(f,c,p*4);p=this.transitionsBetween(S,g)+1,y=this.transitionsBetween(E,g)+1,(p&1)===1&&(p+=1),(y&1)===1&&(y+=1);let R=(i.getX()+c.getX()+f.getX()+g.getX())/4,B=(i.getY()+c.getY()+f.getY()+g.getY())/4;i=Cn.moveAway(i,R,B),c=Cn.moveAway(c,R,B),f=Cn.moveAway(f,R,B),g=Cn.moveAway(g,R,B);let z,W;return S=Cn.shiftPoint(i,c,y*4),S=Cn.shiftPoint(S,g,p*4),z=Cn.shiftPoint(c,i,y*4),z=Cn.shiftPoint(z,f,p*4),E=Cn.shiftPoint(f,g,y*4),E=Cn.shiftPoint(E,c,p*4),W=Cn.shiftPoint(g,f,y*4),W=Cn.shiftPoint(W,i,p*4),[S,z,E,W]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,c,f,g,p,y){return rn.getInstance().sampleGrid(n,p,y,.5,.5,p-.5,.5,p-.5,y-.5,.5,y-.5,i.getX(),i.getY(),g.getX(),g.getY(),f.getX(),f.getY(),c.getX(),c.getY())}transitionsBetween(n,i){let c=Math.trunc(n.getX()),f=Math.trunc(n.getY()),g=Math.trunc(i.getX()),p=Math.trunc(i.getY()),y=Math.abs(p-f)>Math.abs(g-c);if(y){let se=c;c=f,f=se,se=g,g=p,p=se}let S=Math.abs(g-c),E=Math.abs(p-f),R=-S/2,B=f<p?1:-1,z=c<g?1:-1,W=0,te=this.image.get(y?f:c,y?c:f);for(let se=c,le=f;se!==g;se+=z){let pe=this.image.get(y?le:se,y?se:le);if(pe!==te&&(W++,te=pe),R+=E,R>0){if(le===p)break;le+=B,R-=S}}return W}}class Tr{constructor(){this.decoder=new wd}decode(n,i=null){let c,f;if(i!=null&&i.has(Y.PURE_BARCODE)){const E=Tr.extractPureBits(n.getBlackMatrix());c=this.decoder.decode(E),f=Tr.NO_POINTS}else{const E=new Cn(n.getBlackMatrix()).detect();c=this.decoder.decode(E.getBits()),f=E.getPoints()}const g=c.getRawBytes(),p=new Ue(c.getText(),g,8*g.length,f,Ee.DATA_MATRIX,k.currentTimeMillis()),y=c.getByteSegments();y!=null&&p.putMetadata(De.BYTE_SEGMENTS,y);const S=c.getECLevel();return S!=null&&p.putMetadata(De.ERROR_CORRECTION_LEVEL,S),p}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),c=n.getBottomRightOnBit();if(i==null||c==null)throw new G;const f=this.moduleSize(i,n);let g=i[1];const p=c[1];let y=i[0];const E=(c[0]-y+1)/f,R=(p-g+1)/f;if(E<=0||R<=0)throw new G;const B=f/2;g+=B,y+=B;const z=new Re(E,R);for(let W=0;W<R;W++){const te=g+W*f;for(let se=0;se<E;se++)n.get(y+se*f,te)&&z.set(se,W)}return z}static moduleSize(n,i){const c=i.getWidth();let f=n[0];const g=n[1];for(;f<c&&i.get(f,g);)f++;if(f===c)throw new G;const p=f-n[0];if(p===0)throw new G;return p}}Tr.NO_POINTS=[];class so extends Le{constructor(n=500){super(new Tr,n)}}var Oa;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(Oa||(Oa={}));class Tt{constructor(n,i,c){this.value=n,this.stringValue=i,this.bits=c,Tt.FOR_BITS.set(c,this),Tt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return Tt.L;case"M":return Tt.M;case"Q":return Tt.Q;case"H":return Tt.H;default:throw new A(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof Tt))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=Tt.FOR_BITS.size)throw new N;return Tt.FOR_BITS.get(n)}}Tt.FOR_BITS=new Map,Tt.FOR_VALUE=new Map,Tt.L=new Tt(Oa.L,"L",1),Tt.M=new Tt(Oa.M,"M",0),Tt.Q=new Tt(Oa.Q,"Q",3),Tt.H=new Tt(Oa.H,"H",2);class Wn{constructor(n){this.errorCorrectionLevel=Tt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return P.bitCount(n^i)}static decodeFormatInformation(n,i){const c=Wn.doDecodeFormatInformation(n,i);return c!==null?c:Wn.doDecodeFormatInformation(n^Wn.FORMAT_INFO_MASK_QR,i^Wn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let c=Number.MAX_SAFE_INTEGER,f=0;for(const g of Wn.FORMAT_INFO_DECODE_LOOKUP){const p=g[0];if(p===n||p===i)return new Wn(g[1]);let y=Wn.numBitsDiffering(n,p);y<c&&(f=g[1],c=y),n!==i&&(y=Wn.numBitsDiffering(i,p),y<c&&(f=g[1],c=y))}return c<=3?new Wn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Wn))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Wn.FORMAT_INFO_MASK_QR=21522,Wn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const c of i)n+=c.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(n,i,...c){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=c;let f=0;const g=c[0].getECCodewordsPerBlock(),p=c[0].getECBlocks();for(const y of p)f+=y.getCount()*(y.getDataCodewords()+g);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new V;try{return this.getVersionForNumber((n-17)/4)}catch{throw new V}}static getVersionForNumber(n){if(n<1||n>40)throw new N;return Ze.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,c=0;for(let f=0;f<Ze.VERSION_DECODE_INFO.length;f++){const g=Ze.VERSION_DECODE_INFO[f];if(g===n)return Ze.getVersionForNumber(f+7);const p=Wn.numBitsDiffering(n,g);p<i&&(c=f+7,i=p)}return i<=3?Ze.getVersionForNumber(c):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new Re(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const c=this.alignmentPatternCenters.length;for(let f=0;f<c;f++){const g=this.alignmentPatternCenters[f]-2;for(let p=0;p<c;p++)f===0&&(p===0||p===c-1)||f===c-1&&p===0||i.setRegion(this.alignmentPatternCenters[p]-2,g,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}Ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ze.VERSIONS=[new Ze(1,new Int32Array(0),new ce(7,new Q(1,19)),new ce(10,new Q(1,16)),new ce(13,new Q(1,13)),new ce(17,new Q(1,9))),new Ze(2,Int32Array.from([6,18]),new ce(10,new Q(1,34)),new ce(16,new Q(1,28)),new ce(22,new Q(1,22)),new ce(28,new Q(1,16))),new Ze(3,Int32Array.from([6,22]),new ce(15,new Q(1,55)),new ce(26,new Q(1,44)),new ce(18,new Q(2,17)),new ce(22,new Q(2,13))),new Ze(4,Int32Array.from([6,26]),new ce(20,new Q(1,80)),new ce(18,new Q(2,32)),new ce(26,new Q(2,24)),new ce(16,new Q(4,9))),new Ze(5,Int32Array.from([6,30]),new ce(26,new Q(1,108)),new ce(24,new Q(2,43)),new ce(18,new Q(2,15),new Q(2,16)),new ce(22,new Q(2,11),new Q(2,12))),new Ze(6,Int32Array.from([6,34]),new ce(18,new Q(2,68)),new ce(16,new Q(4,27)),new ce(24,new Q(4,19)),new ce(28,new Q(4,15))),new Ze(7,Int32Array.from([6,22,38]),new ce(20,new Q(2,78)),new ce(18,new Q(4,31)),new ce(18,new Q(2,14),new Q(4,15)),new ce(26,new Q(4,13),new Q(1,14))),new Ze(8,Int32Array.from([6,24,42]),new ce(24,new Q(2,97)),new ce(22,new Q(2,38),new Q(2,39)),new ce(22,new Q(4,18),new Q(2,19)),new ce(26,new Q(4,14),new Q(2,15))),new Ze(9,Int32Array.from([6,26,46]),new ce(30,new Q(2,116)),new ce(22,new Q(3,36),new Q(2,37)),new ce(20,new Q(4,16),new Q(4,17)),new ce(24,new Q(4,12),new Q(4,13))),new Ze(10,Int32Array.from([6,28,50]),new ce(18,new Q(2,68),new Q(2,69)),new ce(26,new Q(4,43),new Q(1,44)),new ce(24,new Q(6,19),new Q(2,20)),new ce(28,new Q(6,15),new Q(2,16))),new Ze(11,Int32Array.from([6,30,54]),new ce(20,new Q(4,81)),new ce(30,new Q(1,50),new Q(4,51)),new ce(28,new Q(4,22),new Q(4,23)),new ce(24,new Q(3,12),new Q(8,13))),new Ze(12,Int32Array.from([6,32,58]),new ce(24,new Q(2,92),new Q(2,93)),new ce(22,new Q(6,36),new Q(2,37)),new ce(26,new Q(4,20),new Q(6,21)),new ce(28,new Q(7,14),new Q(4,15))),new Ze(13,Int32Array.from([6,34,62]),new ce(26,new Q(4,107)),new ce(22,new Q(8,37),new Q(1,38)),new ce(24,new Q(8,20),new Q(4,21)),new ce(22,new Q(12,11),new Q(4,12))),new Ze(14,Int32Array.from([6,26,46,66]),new ce(30,new Q(3,115),new Q(1,116)),new ce(24,new Q(4,40),new Q(5,41)),new ce(20,new Q(11,16),new Q(5,17)),new ce(24,new Q(11,12),new Q(5,13))),new Ze(15,Int32Array.from([6,26,48,70]),new ce(22,new Q(5,87),new Q(1,88)),new ce(24,new Q(5,41),new Q(5,42)),new ce(30,new Q(5,24),new Q(7,25)),new ce(24,new Q(11,12),new Q(7,13))),new Ze(16,Int32Array.from([6,26,50,74]),new ce(24,new Q(5,98),new Q(1,99)),new ce(28,new Q(7,45),new Q(3,46)),new ce(24,new Q(15,19),new Q(2,20)),new ce(30,new Q(3,15),new Q(13,16))),new Ze(17,Int32Array.from([6,30,54,78]),new ce(28,new Q(1,107),new Q(5,108)),new ce(28,new Q(10,46),new Q(1,47)),new ce(28,new Q(1,22),new Q(15,23)),new ce(28,new Q(2,14),new Q(17,15))),new Ze(18,Int32Array.from([6,30,56,82]),new ce(30,new Q(5,120),new Q(1,121)),new ce(26,new Q(9,43),new Q(4,44)),new ce(28,new Q(17,22),new Q(1,23)),new ce(28,new Q(2,14),new Q(19,15))),new Ze(19,Int32Array.from([6,30,58,86]),new ce(28,new Q(3,113),new Q(4,114)),new ce(26,new Q(3,44),new Q(11,45)),new ce(26,new Q(17,21),new Q(4,22)),new ce(26,new Q(9,13),new Q(16,14))),new Ze(20,Int32Array.from([6,34,62,90]),new ce(28,new Q(3,107),new Q(5,108)),new ce(26,new Q(3,41),new Q(13,42)),new ce(30,new Q(15,24),new Q(5,25)),new ce(28,new Q(15,15),new Q(10,16))),new Ze(21,Int32Array.from([6,28,50,72,94]),new ce(28,new Q(4,116),new Q(4,117)),new ce(26,new Q(17,42)),new ce(28,new Q(17,22),new Q(6,23)),new ce(30,new Q(19,16),new Q(6,17))),new Ze(22,Int32Array.from([6,26,50,74,98]),new ce(28,new Q(2,111),new Q(7,112)),new ce(28,new Q(17,46)),new ce(30,new Q(7,24),new Q(16,25)),new ce(24,new Q(34,13))),new Ze(23,Int32Array.from([6,30,54,78,102]),new ce(30,new Q(4,121),new Q(5,122)),new ce(28,new Q(4,47),new Q(14,48)),new ce(30,new Q(11,24),new Q(14,25)),new ce(30,new Q(16,15),new Q(14,16))),new Ze(24,Int32Array.from([6,28,54,80,106]),new ce(30,new Q(6,117),new Q(4,118)),new ce(28,new Q(6,45),new Q(14,46)),new ce(30,new Q(11,24),new Q(16,25)),new ce(30,new Q(30,16),new Q(2,17))),new Ze(25,Int32Array.from([6,32,58,84,110]),new ce(26,new Q(8,106),new Q(4,107)),new ce(28,new Q(8,47),new Q(13,48)),new ce(30,new Q(7,24),new Q(22,25)),new ce(30,new Q(22,15),new Q(13,16))),new Ze(26,Int32Array.from([6,30,58,86,114]),new ce(28,new Q(10,114),new Q(2,115)),new ce(28,new Q(19,46),new Q(4,47)),new ce(28,new Q(28,22),new Q(6,23)),new ce(30,new Q(33,16),new Q(4,17))),new Ze(27,Int32Array.from([6,34,62,90,118]),new ce(30,new Q(8,122),new Q(4,123)),new ce(28,new Q(22,45),new Q(3,46)),new ce(30,new Q(8,23),new Q(26,24)),new ce(30,new Q(12,15),new Q(28,16))),new Ze(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new Q(3,117),new Q(10,118)),new ce(28,new Q(3,45),new Q(23,46)),new ce(30,new Q(4,24),new Q(31,25)),new ce(30,new Q(11,15),new Q(31,16))),new Ze(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new Q(7,116),new Q(7,117)),new ce(28,new Q(21,45),new Q(7,46)),new ce(30,new Q(1,23),new Q(37,24)),new ce(30,new Q(19,15),new Q(26,16))),new Ze(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new Q(5,115),new Q(10,116)),new ce(28,new Q(19,47),new Q(10,48)),new ce(30,new Q(15,24),new Q(25,25)),new ce(30,new Q(23,15),new Q(25,16))),new Ze(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new Q(13,115),new Q(3,116)),new ce(28,new Q(2,46),new Q(29,47)),new ce(30,new Q(42,24),new Q(1,25)),new ce(30,new Q(23,15),new Q(28,16))),new Ze(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new Q(17,115)),new ce(28,new Q(10,46),new Q(23,47)),new ce(30,new Q(10,24),new Q(35,25)),new ce(30,new Q(19,15),new Q(35,16))),new Ze(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new Q(17,115),new Q(1,116)),new ce(28,new Q(14,46),new Q(21,47)),new ce(30,new Q(29,24),new Q(19,25)),new ce(30,new Q(11,15),new Q(46,16))),new Ze(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new Q(13,115),new Q(6,116)),new ce(28,new Q(14,46),new Q(23,47)),new ce(30,new Q(44,24),new Q(7,25)),new ce(30,new Q(59,16),new Q(1,17))),new Ze(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new Q(12,121),new Q(7,122)),new ce(28,new Q(12,47),new Q(26,48)),new ce(30,new Q(39,24),new Q(14,25)),new ce(30,new Q(22,15),new Q(41,16))),new Ze(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new Q(6,121),new Q(14,122)),new ce(28,new Q(6,47),new Q(34,48)),new ce(30,new Q(46,24),new Q(10,25)),new ce(30,new Q(2,15),new Q(64,16))),new Ze(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new Q(17,122),new Q(4,123)),new ce(28,new Q(29,46),new Q(14,47)),new ce(30,new Q(49,24),new Q(10,25)),new ce(30,new Q(24,15),new Q(46,16))),new Ze(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new Q(4,122),new Q(18,123)),new ce(28,new Q(13,46),new Q(32,47)),new ce(30,new Q(48,24),new Q(14,25)),new ce(30,new Q(42,15),new Q(32,16))),new Ze(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new Q(20,117),new Q(4,118)),new ce(28,new Q(40,47),new Q(7,48)),new ce(30,new Q(43,24),new Q(22,25)),new ce(30,new Q(10,15),new Q(67,16))),new Ze(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new Q(19,118),new Q(6,119)),new ce(28,new Q(18,47),new Q(31,48)),new ce(30,new Q(34,24),new Q(34,25)),new ce(30,new Q(20,15),new Q(61,16)))];var Vn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(Vn||(Vn={}));class js{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let c=0;c<i;c++)for(let f=0;f<i;f++)this.isMasked(c,f)&&n.flip(f,c)}}js.values=new Map([[Vn.DATA_MASK_000,new js(Vn.DATA_MASK_000,(L,n)=>(L+n&1)===0)],[Vn.DATA_MASK_001,new js(Vn.DATA_MASK_001,(L,n)=>(L&1)===0)],[Vn.DATA_MASK_010,new js(Vn.DATA_MASK_010,(L,n)=>n%3===0)],[Vn.DATA_MASK_011,new js(Vn.DATA_MASK_011,(L,n)=>(L+n)%3===0)],[Vn.DATA_MASK_100,new js(Vn.DATA_MASK_100,(L,n)=>(Math.floor(L/2)+Math.floor(n/3)&1)===0)],[Vn.DATA_MASK_101,new js(Vn.DATA_MASK_101,(L,n)=>L*n%6===0)],[Vn.DATA_MASK_110,new js(Vn.DATA_MASK_110,(L,n)=>L*n%6<3)],[Vn.DATA_MASK_111,new js(Vn.DATA_MASK_111,(L,n)=>(L+n+L*n%3&1)===0)]]);class Ia{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new V;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let g=0;g<6;g++)n=this.copyBit(g,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let g=5;g>=0;g--)n=this.copyBit(8,g,n);const i=this.bitMatrix.getHeight();let c=0;const f=i-7;for(let g=i-1;g>=f;g--)c=this.copyBit(8,g,c);for(let g=i-8;g<i;g++)c=this.copyBit(g,8,c);if(this.parsedFormatInfo=Wn.decodeFormatInformation(n,c),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return Ze.getVersionForNumber(i);let c=0;const f=n-11;for(let p=5;p>=0;p--)for(let y=n-9;y>=f;y--)c=this.copyBit(y,p,c);let g=Ze.decodeVersionInformation(c);if(g!==null&&g.getDimensionForVersion()===n)return this.parsedVersion=g,g;c=0;for(let p=5;p>=0;p--)for(let y=n-9;y>=f;y--)c=this.copyBit(p,y,c);if(g=Ze.decodeVersionInformation(c),g!==null&&g.getDimensionForVersion()===n)return this.parsedVersion=g,g;throw new V}copyBit(n,i,c){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?c<<1|1:c<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),c=js.values.get(n.getDataMask()),f=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,f);const g=i.buildFunctionPattern();let p=!0;const y=new Uint8Array(i.getTotalCodewords());let S=0,E=0,R=0;for(let B=f-1;B>0;B-=2){B===6&&B--;for(let z=0;z<f;z++){const W=p?f-1-z:z;for(let te=0;te<2;te++)g.get(B-te,W)||(R++,E<<=1,this.bitMatrix.get(B-te,W)&&(E|=1),R===8&&(y[S++]=E,R=0,E=0))}p=!p}if(S!==i.getTotalCodewords())throw new V;return y}remask(){if(this.parsedFormatInfo===null)return;const n=js.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,c=n.getWidth();i<c;i++)for(let f=i+1,g=n.getHeight();f<g;f++)n.get(i,f)!==n.get(f,i)&&(n.flip(f,i),n.flip(i,f))}}class il{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,c){if(n.length!==i.getTotalCodewords())throw new N;const f=i.getECBlocksForLevel(c);let g=0;const p=f.getECBlocks();for(const te of p)g+=te.getCount();const y=new Array(g);let S=0;for(const te of p)for(let se=0;se<te.getCount();se++){const le=te.getDataCodewords(),pe=f.getECCodewordsPerBlock()+le;y[S++]=new il(le,new Uint8Array(pe))}const E=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==E;)R--;R++;const B=E-f.getECCodewordsPerBlock();let z=0;for(let te=0;te<B;te++)for(let se=0;se<S;se++)y[se].codewords[te]=n[z++];for(let te=R;te<S;te++)y[te].codewords[B]=n[z++];const W=y[0].codewords.length;for(let te=B;te<W;te++)for(let se=0;se<S;se++){const le=se<R?te:te+1;y[se].codewords[le]=n[z++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Rs;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(Rs||(Rs={}));class rt{constructor(n,i,c,f){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=c,this.bits=f,rt.FOR_BITS.set(f,this),rt.FOR_VALUE.set(n,this)}static forBits(n){const i=rt.FOR_BITS.get(n);if(i===void 0)throw new N;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let c;return i<=9?c=0:i<=26?c=1:c=2,this.characterCountBitsForVersions[c]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof rt))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}rt.FOR_BITS=new Map,rt.FOR_VALUE=new Map,rt.TERMINATOR=new rt(Rs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),rt.NUMERIC=new rt(Rs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),rt.ALPHANUMERIC=new rt(Rs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),rt.STRUCTURED_APPEND=new rt(Rs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),rt.BYTE=new rt(Rs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),rt.ECI=new rt(Rs.ECI,"ECI",Int32Array.from([0,0,0]),7),rt.KANJI=new rt(Rs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),rt.FNC1_FIRST_POSITION=new rt(Rs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),rt.FNC1_SECOND_POSITION=new rt(Rs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),rt.HANZI=new rt(Rs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class gn{static decode(n,i,c,f){const g=new Qs(n);let p=new be;const y=new Array;let S=-1,E=-1;try{let R=null,B=!1,z;do{if(g.available()<4)z=rt.TERMINATOR;else{const W=g.readBits(4);z=rt.forBits(W)}switch(z){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:B=!0;break;case rt.STRUCTURED_APPEND:if(g.available()<16)throw new V;S=g.readBits(8),E=g.readBits(8);break;case rt.ECI:const W=gn.parseECIValue(g);if(R=q.getCharacterSetECIByValue(W),R===null)throw new V;break;case rt.HANZI:const te=g.readBits(4),se=g.readBits(z.getCharacterCountBits(i));te===gn.GB2312_SUBSET&&gn.decodeHanziSegment(g,p,se);break;default:const le=g.readBits(z.getCharacterCountBits(i));switch(z){case rt.NUMERIC:gn.decodeNumericSegment(g,p,le);break;case rt.ALPHANUMERIC:gn.decodeAlphanumericSegment(g,p,le,B);break;case rt.BYTE:gn.decodeByteSegment(g,p,le,R,y,f);break;case rt.KANJI:gn.decodeKanjiSegment(g,p,le);break;default:throw new V}break}}while(z!==rt.TERMINATOR)}catch{throw new V}return new Ce(n,p.toString(),y.length===0?null:y,c===null?null:c.toString(),S,E)}static decodeHanziSegment(n,i,c){if(c*13>n.available())throw new V;const f=new Uint8Array(2*c);let g=0;for(;c>0;){const p=n.readBits(13);let y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,f[g]=y>>8&255,f[g+1]=y&255,g+=2,c--}try{i.append(fe.decode(f,ie.GB2312))}catch(p){throw new V(p)}}static decodeKanjiSegment(n,i,c){if(c*13>n.available())throw new V;const f=new Uint8Array(2*c);let g=0;for(;c>0;){const p=n.readBits(13);let y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,f[g]=y>>8,f[g+1]=y,g+=2,c--}try{i.append(fe.decode(f,ie.SHIFT_JIS))}catch(p){throw new V(p)}}static decodeByteSegment(n,i,c,f,g,p){if(8*c>n.available())throw new V;const y=new Uint8Array(c);for(let E=0;E<c;E++)y[E]=n.readBits(8);let S;f===null?S=ie.guessEncoding(y,p):S=f.getName();try{i.append(fe.decode(y,S))}catch(E){throw new V(E)}g.push(y)}static toAlphaNumericChar(n){if(n>=gn.ALPHANUMERIC_CHARS.length)throw new V;return gn.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,c,f){const g=i.length();for(;c>1;){if(n.available()<11)throw new V;const p=n.readBits(11);i.append(gn.toAlphaNumericChar(Math.floor(p/45))),i.append(gn.toAlphaNumericChar(p%45)),c-=2}if(c===1){if(n.available()<6)throw new V;i.append(gn.toAlphaNumericChar(n.readBits(6)))}if(f)for(let p=g;p<i.length();p++)i.charAt(p)==="%"&&(p<i.length()-1&&i.charAt(p+1)==="%"?i.deleteCharAt(p+1):i.setCharAt(p,""))}static decodeNumericSegment(n,i,c){for(;c>=3;){if(n.available()<10)throw new V;const f=n.readBits(10);if(f>=1e3)throw new V;i.append(gn.toAlphaNumericChar(Math.floor(f/100))),i.append(gn.toAlphaNumericChar(Math.floor(f/10)%10)),i.append(gn.toAlphaNumericChar(f%10)),c-=3}if(c===2){if(n.available()<7)throw new V;const f=n.readBits(7);if(f>=100)throw new V;i.append(gn.toAlphaNumericChar(Math.floor(f/10))),i.append(gn.toAlphaNumericChar(f%10))}else if(c===1){if(n.available()<4)throw new V;const f=n.readBits(4);if(f>=10)throw new V;i.append(gn.toAlphaNumericChar(f))}}static parseECIValue(n){const i=n.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const c=n.readBits(8);return(i&63)<<8&4294967295|c}if((i&224)===192){const c=n.readBits(16);return(i&31)<<16&4294967295|c}throw new V}}gn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",gn.GB2312_SUBSET=1;class xc{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class bd{constructor(){this.rsDecoder=new un(ht.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(Re.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const c=new Ia(n);let f=null;try{return this.decodeBitMatrixParser(c,i)}catch(g){f=g}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();const g=this.decodeBitMatrixParser(c,i);return g.setOther(new xc(!0)),g}catch(g){throw f!==null?f:g}}decodeBitMatrixParser(n,i){const c=n.readVersion(),f=n.readFormatInformation().getErrorCorrectionLevel(),g=n.readCodewords(),p=il.getDataBlocks(g,c,f);let y=0;for(const R of p)y+=R.getNumDataCodewords();const S=new Uint8Array(y);let E=0;for(const R of p){const B=R.getCodewords(),z=R.getNumDataCodewords();this.correctErrors(B,z);for(let W=0;W<z;W++)S[E++]=B[W]}return gn.decode(S,c,f,i)}correctErrors(n,i){const c=new Int32Array(n);try{this.rsDecoder.decode(c,n.length-i)}catch{throw new j}for(let f=0;f<i;f++)n[f]=c[f]}}class Ma extends ze{constructor(n,i,c){super(n,i),this.estimatedModuleSize=c}aboutEquals(n,i,c){if(Math.abs(i-this.getY())<=n&&Math.abs(c-this.getX())<=n){const f=Math.abs(n-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(n,i,c){const f=(this.getX()+i)/2,g=(this.getY()+n)/2,p=(this.estimatedModuleSize+c)/2;return new Ma(f,g,p)}}class Ls{constructor(n,i,c,f,g,p,y){this.image=n,this.startX=i,this.startY=c,this.width=f,this.height=g,this.moduleSize=p,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,c=this.width,f=n+c,g=this.startY+i/2,p=new Int32Array(3),y=this.image;for(let S=0;S<i;S++){const E=g+((S&1)===0?Math.floor((S+1)/2):-Math.floor((S+1)/2));p[0]=0,p[1]=0,p[2]=0;let R=n;for(;R<f&&!y.get(R,E);)R++;let B=0;for(;R<f;){if(y.get(R,E))if(B===1)p[1]++;else if(B===2){if(this.foundPatternCross(p)){const z=this.handlePossibleCenter(p,E,R);if(z!==null)return z}p[0]=p[2],p[1]=1,p[2]=0,B=1}else p[++B]++;else B===1&&B++,p[B]++;R++}if(this.foundPatternCross(p)){const z=this.handlePossibleCenter(p,E,f);if(z!==null)return z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,c=i/2;for(let f=0;f<3;f++)if(Math.abs(i-n[f])>=c)return!1;return!0}crossCheckVertical(n,i,c,f){const g=this.image,p=g.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let S=n;for(;S>=0&&g.get(i,S)&&y[1]<=c;)y[1]++,S--;if(S<0||y[1]>c)return NaN;for(;S>=0&&!g.get(i,S)&&y[0]<=c;)y[0]++,S--;if(y[0]>c)return NaN;for(S=n+1;S<p&&g.get(i,S)&&y[1]<=c;)y[1]++,S++;if(S===p||y[1]>c)return NaN;for(;S<p&&!g.get(i,S)&&y[2]<=c;)y[2]++,S++;if(y[2]>c)return NaN;const E=y[0]+y[1]+y[2];return 5*Math.abs(E-f)>=2*f?NaN:this.foundPatternCross(y)?Ls.centerFromEnd(y,S):NaN}handlePossibleCenter(n,i,c){const f=n[0]+n[1]+n[2],g=Ls.centerFromEnd(n,c),p=this.crossCheckVertical(i,g,2*n[1],f);if(!isNaN(p)){const y=(n[0]+n[1]+n[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(y,p,g))return E.combineEstimate(p,g,y);const S=new Ma(g,p,y);this.possibleCenters.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return null}}class bi extends ze{constructor(n,i,c,f){super(n,i),this.estimatedModuleSize=c,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,c){if(Math.abs(i-this.getY())<=n&&Math.abs(c-this.getX())<=n){const f=Math.abs(n-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(n,i,c){const f=this.count+1,g=(this.count*this.getX()+i)/f,p=(this.count*this.getY()+n)/f,y=(this.count*this.estimatedModuleSize+c)/f;return new bi(g,p,y,f)}}class ol{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Sn{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(Y.TRY_HARDER)!==void 0,c=n!=null&&n.get(Y.PURE_BARCODE)!==void 0,f=this.image,g=f.getHeight(),p=f.getWidth();let y=Math.floor(3*g/(4*Sn.MAX_MODULES));(y<Sn.MIN_SKIP||i)&&(y=Sn.MIN_SKIP);let S=!1;const E=new Int32Array(5);for(let B=y-1;B<g&&!S;B+=y){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let z=0;for(let W=0;W<p;W++)if(f.get(W,B))(z&1)===1&&z++,E[z]++;else if((z&1)===0)if(z===4)if(Sn.foundPatternCross(E)){if(this.handlePossibleCenter(E,B,W,c)===!0)if(y=2,this.hasSkipped===!0)S=this.haveMultiplyConfirmedCenters();else{const se=this.findRowSkip();se>E[2]&&(B+=se-E[2]-y,W=p-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,z=3;continue}z=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,z=3;else E[++z]++;else E[z]++;Sn.foundPatternCross(E)&&this.handlePossibleCenter(E,B,p,c)===!0&&(y=E[0],this.hasSkipped&&(S=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return ze.orderBestPatterns(R),new ol(R)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let g=0;g<5;g++){const p=n[g];if(p===0)return!1;i+=p}if(i<7)return!1;const c=i/7,f=c/2;return Math.abs(c-n[0])<f&&Math.abs(c-n[1])<f&&Math.abs(3*c-n[2])<3*f&&Math.abs(c-n[3])<f&&Math.abs(c-n[4])<f}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,c,f){const g=this.getCrossCheckStateCount();let p=0;const y=this.image;for(;n>=p&&i>=p&&y.get(i-p,n-p);)g[2]++,p++;if(n<p||i<p)return!1;for(;n>=p&&i>=p&&!y.get(i-p,n-p)&&g[1]<=c;)g[1]++,p++;if(n<p||i<p||g[1]>c)return!1;for(;n>=p&&i>=p&&y.get(i-p,n-p)&&g[0]<=c;)g[0]++,p++;if(g[0]>c)return!1;const S=y.getHeight(),E=y.getWidth();for(p=1;n+p<S&&i+p<E&&y.get(i+p,n+p);)g[2]++,p++;if(n+p>=S||i+p>=E)return!1;for(;n+p<S&&i+p<E&&!y.get(i+p,n+p)&&g[3]<c;)g[3]++,p++;if(n+p>=S||i+p>=E||g[3]>=c)return!1;for(;n+p<S&&i+p<E&&y.get(i+p,n+p)&&g[4]<c;)g[4]++,p++;if(g[4]>=c)return!1;const R=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(R-f)<2*f&&Sn.foundPatternCross(g)}crossCheckVertical(n,i,c,f){const g=this.image,p=g.getHeight(),y=this.getCrossCheckStateCount();let S=n;for(;S>=0&&g.get(i,S);)y[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(i,S)&&y[1]<=c;)y[1]++,S--;if(S<0||y[1]>c)return NaN;for(;S>=0&&g.get(i,S)&&y[0]<=c;)y[0]++,S--;if(y[0]>c)return NaN;for(S=n+1;S<p&&g.get(i,S);)y[2]++,S++;if(S===p)return NaN;for(;S<p&&!g.get(i,S)&&y[3]<c;)y[3]++,S++;if(S===p||y[3]>=c)return NaN;for(;S<p&&g.get(i,S)&&y[4]<c;)y[4]++,S++;if(y[4]>=c)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-f)>=2*f?NaN:Sn.foundPatternCross(y)?Sn.centerFromEnd(y,S):NaN}crossCheckHorizontal(n,i,c,f){const g=this.image,p=g.getWidth(),y=this.getCrossCheckStateCount();let S=n;for(;S>=0&&g.get(S,i);)y[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(S,i)&&y[1]<=c;)y[1]++,S--;if(S<0||y[1]>c)return NaN;for(;S>=0&&g.get(S,i)&&y[0]<=c;)y[0]++,S--;if(y[0]>c)return NaN;for(S=n+1;S<p&&g.get(S,i);)y[2]++,S++;if(S===p)return NaN;for(;S<p&&!g.get(S,i)&&y[3]<c;)y[3]++,S++;if(S===p||y[3]>=c)return NaN;for(;S<p&&g.get(S,i)&&y[4]<c;)y[4]++,S++;if(y[4]>=c)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-f)>=f?NaN:Sn.foundPatternCross(y)?Sn.centerFromEnd(y,S):NaN}handlePossibleCenter(n,i,c,f){const g=n[0]+n[1]+n[2]+n[3]+n[4];let p=Sn.centerFromEnd(n,c),y=this.crossCheckVertical(i,Math.floor(p),n[2],g);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),n[2],g),!isNaN(p)&&(!f||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),n[2],g)))){const S=g/7;let E=!1;const R=this.possibleCenters;for(let B=0,z=R.length;B<z;B++){const W=R[B];if(W.aboutEquals(S,y,p)){R[B]=W.combineEstimate(y,p,S),E=!0;break}}if(!E){const B=new bi(p,y,S);R.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const c of this.possibleCenters)if(c.getCount()>=Sn.CENTER_QUORUM)if(i==null)i=c;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-c.getX())-Math.abs(i.getY()-c.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const c=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=Sn.CENTER_QUORUM&&(n++,i+=p.getEstimatedModuleSize());if(n<3)return!1;const f=i/c;let g=0;for(const p of this.possibleCenters)g+=Math.abs(p.getEstimatedModuleSize()-f);return g<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new G;const i=this.possibleCenters;let c;if(n>3){let f=0,g=0;for(const S of this.possibleCenters){const E=S.getEstimatedModuleSize();f+=E,g+=E*E}c=f/n;let p=Math.sqrt(g/n-c*c);i.sort((S,E)=>{const R=Math.abs(E.getEstimatedModuleSize()-c),B=Math.abs(S.getEstimatedModuleSize()-c);return R<B?-1:R>B?1:0});const y=Math.max(.2*c,p);for(let S=0;S<i.length&&i.length>3;S++){const E=i[S];Math.abs(E.getEstimatedModuleSize()-c)>y&&(i.splice(S,1),S--)}}if(i.length>3){let f=0;for(const g of i)f+=g.getEstimatedModuleSize();c=f/i.length,i.sort((g,p)=>{if(p.getCount()===g.getCount()){const y=Math.abs(p.getEstimatedModuleSize()-c),S=Math.abs(g.getEstimatedModuleSize()-c);return y<S?1:y>S?-1:0}else return p.getCount()-g.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Sn.CENTER_QUORUM=2,Sn.MIN_SKIP=3,Sn.MAX_MODULES=57;class hr{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(Y.NEED_RESULT_POINT_CALLBACK);const c=new Sn(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(c)}processFinderPatternInfo(n){const i=n.getTopLeft(),c=n.getTopRight(),f=n.getBottomLeft(),g=this.calculateModuleSize(i,c,f);if(g<1)throw new G("No pattern found in proccess finder.");const p=hr.computeDimension(i,c,f,g),y=Ze.getProvisionalVersionForDimension(p),S=y.getDimensionForVersion()-7;let E=null;if(y.getAlignmentPatternCenters().length>0){const W=c.getX()-i.getX()+f.getX(),te=c.getY()-i.getY()+f.getY(),se=1-3/S,le=Math.floor(i.getX()+se*(W-i.getX())),pe=Math.floor(i.getY()+se*(te-i.getY()));for(let Pe=4;Pe<=16;Pe<<=1)try{E=this.findAlignmentInRegion(g,le,pe,Pe);break}catch(Be){if(!(Be instanceof G))throw Be}}const R=hr.createTransform(i,c,f,E,p),B=hr.sampleGrid(this.image,R,p);let z;return E===null?z=[f,i,c]:z=[f,i,c,E],new Ns(B,z)}static createTransform(n,i,c,f,g){const p=g-3.5;let y,S,E,R;return f!==null?(y=f.getX(),S=f.getY(),E=p-3,R=E):(y=i.getX()-n.getX()+c.getX(),S=i.getY()-n.getY()+c.getY(),E=p,R=p),_t.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,E,R,3.5,p,n.getX(),n.getY(),i.getX(),i.getY(),y,S,c.getX(),c.getY())}static sampleGrid(n,i,c){return rn.getInstance().sampleGridWithTransform(n,c,c,i)}static computeDimension(n,i,c,f){const g=mt.round(ze.distance(n,i)/f),p=mt.round(ze.distance(n,c)/f);let y=Math.floor((g+p)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new G("Dimensions could be not found.")}return y}calculateModuleSize(n,i,c){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,c))/2}calculateModuleSizeOneWay(n,i){const c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(c)?f/7:isNaN(f)?c/7:(c+f)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,c,f){let g=this.sizeOfBlackWhiteBlackRun(n,i,c,f),p=1,y=n-(c-n);y<0?(p=n/(n-y),y=0):y>=this.image.getWidth()&&(p=(this.image.getWidth()-1-n)/(y-n),y=this.image.getWidth()-1);let S=Math.floor(i-(f-i)*p);return p=1,S<0?(p=i/(i-S),S=0):S>=this.image.getHeight()&&(p=(this.image.getHeight()-1-i)/(S-i),S=this.image.getHeight()-1),y=Math.floor(n+(y-n)*p),g+=this.sizeOfBlackWhiteBlackRun(n,i,y,S),g-1}sizeOfBlackWhiteBlackRun(n,i,c,f){const g=Math.abs(f-i)>Math.abs(c-n);if(g){let W=n;n=i,i=W,W=c,c=f,f=W}const p=Math.abs(c-n),y=Math.abs(f-i);let S=-p/2;const E=n<c?1:-1,R=i<f?1:-1;let B=0;const z=c+E;for(let W=n,te=i;W!==z;W+=E){const se=g?te:W,le=g?W:te;if(B===1===this.image.get(se,le)){if(B===2)return mt.distance(W,te,n,i);B++}if(S+=y,S>0){if(te===f)break;te+=R,S-=p}}return B===2?mt.distance(c+E,f,n,i):NaN}findAlignmentInRegion(n,i,c,f){const g=Math.floor(f*n),p=Math.max(0,i-g),y=Math.min(this.image.getWidth()-1,i+g);if(y-p<n*3)throw new G("Alignment top exceeds estimated module size.");const S=Math.max(0,c-g),E=Math.min(this.image.getHeight()-1,c+g);if(E-S<n*3)throw new G("Alignment bottom exceeds estimated module size.");return new Ls(this.image,p,S,y-p,E-S,n,this.resultPointCallback).find()}}class jr{constructor(){this.decoder=new bd}getDecoder(){return this.decoder}decode(n,i){let c,f;if(i!=null&&i.get(Y.PURE_BARCODE)!==void 0){const S=jr.extractPureBits(n.getBlackMatrix());c=this.decoder.decodeBitMatrix(S,i),f=jr.NO_POINTS}else{const S=new hr(n.getBlackMatrix()).detect(i);c=this.decoder.decodeBitMatrix(S.getBits(),i),f=S.getPoints()}c.getOther()instanceof xc&&c.getOther().applyMirroredCorrection(f);const g=new Ue(c.getText(),c.getRawBytes(),void 0,f,Ee.QR_CODE,void 0),p=c.getByteSegments();p!==null&&g.putMetadata(De.BYTE_SEGMENTS,p);const y=c.getECLevel();return y!==null&&g.putMetadata(De.ERROR_CORRECTION_LEVEL,y),c.hasStructuredAppend()&&(g.putMetadata(De.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),g.putMetadata(De.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),g}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),c=n.getBottomRightOnBit();if(i===null||c===null)throw new G;const f=this.moduleSize(i,n);let g=i[1],p=c[1],y=i[0],S=c[0];if(y>=S||g>=p)throw new G;if(p-g!==S-y&&(S=y+(p-g),S>=n.getWidth()))throw new G;const E=Math.round((S-y+1)/f),R=Math.round((p-g+1)/f);if(E<=0||R<=0)throw new G;if(R!==E)throw new G;const B=Math.floor(f/2);g+=B,y+=B;const z=y+Math.floor((E-1)*f)-S;if(z>0){if(z>B)throw new G;y-=z}const W=g+Math.floor((R-1)*f)-p;if(W>0){if(W>B)throw new G;g-=W}const te=new Re(E,R);for(let se=0;se<R;se++){const le=g+Math.floor(se*f);for(let pe=0;pe<E;pe++)n.get(y+Math.floor(pe*f),le)&&te.set(pe,se)}return te}static moduleSize(n,i){const c=i.getHeight(),f=i.getWidth();let g=n[0],p=n[1],y=!0,S=0;for(;g<f&&p<c;){if(y!==i.get(g,p)){if(++S===5)break;y=!y}g++,p++}if(g===f||p===c)throw new G;return(g-n[0])/7}}jr.NO_POINTS=new Array;class it{PDF417Common(){}static getBitCountSum(n){return mt.sum(n)}static toIntArray(n){if(n==null||!n.length)return it.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let c=0;for(const f of n)i[c++]=f;return i}static getCodeword(n){const i=U.binarySearch(it.SYMBOL_TABLE,n&262143);return i<0?-1:(it.CODEWORD_TABLE[i]-1)%it.NUMBER_OF_CODEWORDS}}it.NUMBER_OF_CODEWORDS=929,it.MAX_CODEWORDS_IN_BARCODE=it.NUMBER_OF_CODEWORDS-1,it.MIN_ROWS_IN_BARCODE=3,it.MAX_ROWS_IN_BARCODE=90,it.MODULES_IN_CODEWORD=17,it.MODULES_IN_STOP_PATTERN=18,it.BARS_IN_MODULE=8,it.EMPTY_INT_ARRAY=new Int32Array([]),it.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),it.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class yc{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class pt{static detectMultiple(n,i,c){let f=n.getBlackMatrix(),g=pt.detect(c,f);return g.length||(f=f.clone(),f.rotate180(),g=pt.detect(c,f)),new yc(f,g)}static detect(n,i){const c=new Array;let f=0,g=0,p=!1;for(;f<i.getHeight();){const y=pt.findVertices(i,f,g);if(y[0]==null&&y[3]==null){if(!p)break;p=!1,g=0;for(const S of c)S[1]!=null&&(f=Math.trunc(Math.max(f,S[1].getY()))),S[3]!=null&&(f=Math.max(f,Math.trunc(S[3].getY())));f+=pt.ROW_STEP;continue}if(p=!0,c.push(y),!n)break;y[2]!=null?(g=Math.trunc(y[2].getX()),f=Math.trunc(y[2].getY())):(g=Math.trunc(y[4].getX()),f=Math.trunc(y[4].getY()))}return c}static findVertices(n,i,c){const f=n.getHeight(),g=n.getWidth(),p=new Array(8);return pt.copyToResult(p,pt.findRowsWithPattern(n,f,g,i,c,pt.START_PATTERN),pt.INDEXES_START_PATTERN),p[4]!=null&&(c=Math.trunc(p[4].getX()),i=Math.trunc(p[4].getY())),pt.copyToResult(p,pt.findRowsWithPattern(n,f,g,i,c,pt.STOP_PATTERN),pt.INDEXES_STOP_PATTERN),p}static copyToResult(n,i,c){for(let f=0;f<c.length;f++)n[c[f]]=i[f]}static findRowsWithPattern(n,i,c,f,g,p){const y=new Array(4);let S=!1;const E=new Int32Array(p.length);for(;f<i;f+=pt.ROW_STEP){let B=pt.findGuardPattern(n,g,f,c,!1,p,E);if(B!=null){for(;f>0;){const z=pt.findGuardPattern(n,g,--f,c,!1,p,E);if(z!=null)B=z;else{f++;break}}y[0]=new ze(B[0],f),y[1]=new ze(B[1],f),S=!0;break}}let R=f+1;if(S){let B=0,z=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<i;R++){const W=pt.findGuardPattern(n,z[0],R,c,!1,p,E);if(W!=null&&Math.abs(z[0]-W[0])<pt.MAX_PATTERN_DRIFT&&Math.abs(z[1]-W[1])<pt.MAX_PATTERN_DRIFT)z=W,B=0;else{if(B>pt.SKIPPED_ROW_COUNT_MAX)break;B++}}R-=B+1,y[2]=new ze(z[0],R),y[3]=new ze(z[1],R)}return R-f<pt.BARCODE_MIN_HEIGHT&&U.fill(y,null),y}static findGuardPattern(n,i,c,f,g,p,y){U.fillWithin(y,0,y.length,0);let S=i,E=0;for(;n.get(S,c)&&S>0&&E++<pt.MAX_PIXEL_DRIFT;)S--;let R=S,B=0,z=p.length;for(let W=g;R<f;R++)if(n.get(R,c)!==W)y[B]++;else{if(B===z-1){if(pt.patternMatchVariance(y,p,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return new Int32Array([S,R]);S+=y[0]+y[1],k.arraycopy(y,2,y,0,B-1),y[B-1]=0,y[B]=0,B--}else B++;y[B]=1,W=!W}return B===z-1&&pt.patternMatchVariance(y,p,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE?new Int32Array([S,R-1]):null}static patternMatchVariance(n,i,c){let f=n.length,g=0,p=0;for(let E=0;E<f;E++)g+=n[E],p+=i[E];if(g<p)return 1/0;let y=g/p;c*=y;let S=0;for(let E=0;E<f;E++){let R=n[E],B=i[E]*y,z=R>B?R-B:B-R;if(z>c)return 1/0;S+=z}return S/g}}pt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),pt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),pt.MAX_AVG_VARIANCE=.42,pt.MAX_INDIVIDUAL_VARIANCE=.8,pt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),pt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),pt.MAX_PIXEL_DRIFT=3,pt.MAX_PATTERN_DRIFT=5,pt.SKIPPED_ROW_COUNT_MAX=25,pt.ROW_STEP=5,pt.BARCODE_MIN_HEIGHT=10;class mn{constructor(n,i){if(i.length===0)throw new N;this.field=n;let c=i.length;if(c>1&&i[0]===0){let f=1;for(;f<c&&i[f]===0;)f++;f===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-f),k.arraycopy(i,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let f=0;for(let g of this.coefficients)f=this.field.add(f,g);return f}let i=this.coefficients[0],c=this.coefficients.length;for(let f=1;f<c;f++)i=this.field.add(this.field.multiply(n,i),this.coefficients[f]);return i}add(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,c=n.coefficients;if(i.length>c.length){let p=i;i=c,c=p}let f=new Int32Array(c.length),g=c.length-i.length;k.arraycopy(c,0,f,0,g);for(let p=g;p<c.length;p++)f[p]=this.field.add(i[p-g],c[p]);return new mn(this.field,f)}subtract(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof mn?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new mn(this.field,new Int32Array([0]));let i=this.coefficients,c=i.length,f=n.coefficients,g=f.length,p=new Int32Array(c+g-1);for(let y=0;y<c;y++){let S=i[y];for(let E=0;E<g;E++)p[y+E]=this.field.add(p[y+E],this.field.multiply(S,f[E]))}return new mn(this.field,p)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let c=0;c<n;c++)i[c]=this.field.subtract(0,this.coefficients[c]);return new mn(this.field,i)}multiplyScalar(n){if(n===0)return new mn(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,c=new Int32Array(i);for(let f=0;f<i;f++)c[f]=this.field.multiply(this.coefficients[f],n);return new mn(this.field,c)}multiplyByMonomial(n,i){if(n<0)throw new N;if(i===0)return new mn(this.field,new Int32Array([0]));let c=this.coefficients.length,f=new Int32Array(c+n);for(let g=0;g<c;g++)f[g]=this.field.multiply(this.coefficients[g],i);return new mn(this.field,f)}toString(){let n=new be;for(let i=this.getDegree();i>=0;i--){let c=this.getCoefficient(i);c!==0&&(c<0?(n.append(" - "),c=-c):n.length()>0&&n.append(" + "),(i===0||c!==1)&&n.append(c),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class ll{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new N;return this.logTable[n]}inverse(n){if(n===0)throw new Wt;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Jr extends ll{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let c=1;for(let f=0;f<n;f++)this.expTable[f]=c,c=c*i%n;for(let f=0;f<n-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new mn(this,new Int32Array([0])),this.one=new mn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new N;if(i===0)return this.zero;let c=new Int32Array(n+1);return c[0]=i,new mn(this,c)}}Jr.PDF417_GF=new Jr(it.NUMBER_OF_CODEWORDS,3);class Rr{constructor(){this.field=Jr.PDF417_GF}decode(n,i,c){let f=new mn(this.field,n),g=new Int32Array(i),p=!1;for(let te=i;te>0;te--){let se=f.evaluateAt(this.field.exp(te));g[i-te]=se,se!==0&&(p=!0)}if(!p)return 0;let y=this.field.getOne();if(c!=null)for(const te of c){let se=this.field.exp(n.length-1-te),le=new mn(this.field,new Int32Array([this.field.subtract(0,se),1]));y=y.multiply(le)}let S=new mn(this.field,g),E=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),S,i),R=E[0],B=E[1],z=this.findErrorLocations(R),W=this.findErrorMagnitudes(B,R,z);for(let te=0;te<z.length;te++){let se=n.length-1-this.field.log(z[te]);if(se<0)throw j.getChecksumInstance();n[se]=this.field.subtract(n[se],W[te])}return z.length}runEuclideanAlgorithm(n,i,c){if(n.getDegree()<i.getDegree()){let z=n;n=i,i=z}let f=n,g=i,p=this.field.getZero(),y=this.field.getOne();for(;g.getDegree()>=Math.round(c/2);){let z=f,W=p;if(f=g,p=y,f.isZero())throw j.getChecksumInstance();g=z;let te=this.field.getZero(),se=f.getCoefficient(f.getDegree()),le=this.field.inverse(se);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){let pe=g.getDegree()-f.getDegree(),Pe=this.field.multiply(g.getCoefficient(g.getDegree()),le);te=te.add(this.field.buildMonomial(pe,Pe)),g=g.subtract(f.multiplyByMonomial(pe,Pe))}y=te.multiply(p).subtract(W).negative()}let S=y.getCoefficient(0);if(S===0)throw j.getChecksumInstance();let E=this.field.inverse(S),R=y.multiply(E),B=g.multiply(E);return[R,B]}findErrorLocations(n){let i=n.getDegree(),c=new Int32Array(i),f=0;for(let g=1;g<this.field.getSize()&&f<i;g++)n.evaluateAt(g)===0&&(c[f]=this.field.inverse(g),f++);if(f!==i)throw j.getChecksumInstance();return c}findErrorMagnitudes(n,i,c){let f=i.getDegree(),g=new Int32Array(f);for(let E=1;E<=f;E++)g[f-E]=this.field.multiply(E,i.getCoefficient(E));let p=new mn(this.field,g),y=c.length,S=new Int32Array(y);for(let E=0;E<y;E++){let R=this.field.inverse(c[E]),B=this.field.subtract(0,n.evaluateAt(R)),z=this.field.inverse(p.evaluateAt(R));S[E]=this.field.multiply(B,z)}return S}}class Or{constructor(n,i,c,f,g){n instanceof Or?this.constructor_2(n):this.constructor_1(n,i,c,f,g)}constructor_1(n,i,c,f,g){const p=i==null||c==null,y=f==null||g==null;if(p&&y)throw new G;p?(i=new ze(0,f.getY()),c=new ze(0,g.getY())):y&&(f=new ze(n.getWidth()-1,i.getY()),g=new ze(n.getWidth()-1,c.getY())),this.image=n,this.topLeft=i,this.bottomLeft=c,this.topRight=f,this.bottomRight=g,this.minX=Math.trunc(Math.min(i.getX(),c.getX())),this.maxX=Math.trunc(Math.max(f.getX(),g.getX())),this.minY=Math.trunc(Math.min(i.getY(),f.getY())),this.maxY=Math.trunc(Math.max(c.getY(),g.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new Or(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,c){let f=this.topLeft,g=this.bottomLeft,p=this.topRight,y=this.bottomRight;if(n>0){let S=c?this.topLeft:this.topRight,E=Math.trunc(S.getY()-n);E<0&&(E=0);let R=new ze(S.getX(),E);c?f=R:p=R}if(i>0){let S=c?this.bottomLeft:this.bottomRight,E=Math.trunc(S.getY()+i);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let R=new ze(S.getX(),E);c?g=R:y=R}return new Or(this.image,f,g,p,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ro{constructor(n,i,c,f){this.columnCount=n,this.errorCorrectionLevel=f,this.rowCountUpperPart=i,this.rowCountLowerPart=c,this.rowCount=i+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ka{constructor(){this.buffer=""}static form(n,i){let c=-1;function f(p,y,S,E,R,B){if(p==="%%")return"%";if(i[++c]===void 0)return;p=E?parseInt(E.substr(1)):void 0;let z=R?parseInt(R.substr(1)):void 0,W;switch(B){case"s":W=i[c];break;case"c":W=i[c][0];break;case"f":W=parseFloat(i[c]).toFixed(p);break;case"p":W=parseFloat(i[c]).toPrecision(p);break;case"e":W=parseFloat(i[c]).toExponential(p);break;case"x":W=parseInt(i[c]).toString(z||16);break;case"d":W=parseFloat(parseInt(i[c],z||10).toPrecision(p)).toFixed(0);break}W=typeof W=="object"?JSON.stringify(W):(+W).toString(z);let te=parseInt(S),se=S&&S[0]+""=="0"?"0":" ";for(;W.length<te;)W=y!==void 0?W+se:se+W;return W}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(g,f)}format(n,...i){this.buffer+=ka.form(n,i)}toString(){return this.buffer}}class Fr{constructor(n){this.boundingBox=new Or(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let c=1;c<Fr.MAX_NEARBY_DISTANCE;c++){let f=this.imageRowToCodewordIndex(n)-c;if(f>=0&&(i=this.codewords[f],i!=null)||(f=this.imageRowToCodewordIndex(n)+c,f<this.codewords.length&&(i=this.codewords[f],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new ka;let i=0;for(const c of this.codewords){if(c==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,c.getRowNumber(),c.getValue())}return n.toString()}}Fr.MAX_NEARBY_DISTANCE=5;class Hr{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[c,f]of this.values.entries()){const g={getKey:()=>c,getValue:()=>f};g.getValue()>n?(n=g.getValue(),i=[],i.push(g.getKey())):g.getValue()===n&&i.push(g.getKey())}return it.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class cl extends Fr{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let c=this.getBoundingBox(),f=this._isLeft?c.getTopLeft():c.getTopRight(),g=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.imageRowToCodewordIndex(Math.trunc(g.getY())),S=-1,E=1,R=0;for(let B=p;B<y;B++){if(i[B]==null)continue;let z=i[B],W=z.getRowNumber()-S;if(W===0)R++;else if(W===1)E=Math.max(E,R),R=1,S=z.getRowNumber();else if(W<0||z.getRowNumber()>=n.getRowCount()||W>B)i[B]=null;else{let te;E>2?te=(E-2)*W:te=W;let se=te>=B;for(let le=1;le<=te&&!se;le++)se=i[B-le]!=null;se?i[B]=null:(S=z.getRowNumber(),R=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let c of this.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=i.length)continue;i[f]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),c=this._isLeft?i.getTopLeft():i.getTopRight(),f=this._isLeft?i.getBottomLeft():i.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.getCodewords(),S=-1;for(let E=g;E<p;E++){if(y[E]==null)continue;let R=y[E];R.setRowNumberAsRowIndicatorColumn();let B=R.getRowNumber()-S;B===0||(B===1?S=R.getRowNumber():R.getRowNumber()>=n.getRowCount()?y[E]=null:S=R.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new Hr,c=new Hr,f=new Hr,g=new Hr;for(let y of n){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let S=y.getValue()%30,E=y.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:c.setValue(S*3+1);break;case 1:g.setValue(S/3),f.setValue(S%3);break;case 2:i.setValue(S+1);break}}if(i.getValue().length===0||c.getValue().length===0||f.getValue().length===0||g.getValue().length===0||i.getValue()[0]<1||c.getValue()[0]+f.getValue()[0]<it.MIN_ROWS_IN_BARCODE||c.getValue()[0]+f.getValue()[0]>it.MAX_ROWS_IN_BARCODE)return null;let p=new ro(i.getValue()[0],c.getValue()[0],f.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(n,p),p}removeIncorrectCodewords(n,i){for(let c=0;c<n.length;c++){let f=n[c];if(n[c]==null)continue;let g=f.getValue()%30,p=f.getRowNumber();if(p>i.getRowCount()){n[c]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:g*3+1!==i.getRowCountUpperPart()&&(n[c]=null);break;case 1:(Math.trunc(g/3)!==i.getErrorCorrectionLevel()||g%3!==i.getRowCountLowerPart())&&(n[c]=null);break;case 2:g+1!==i.getColumnCount()&&(n[c]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Kn{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=it.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let c=this.detectionResultColumns[i].getCodewords();for(let f=0;f<c.length;f++)c[f]!=null&&(c[f].hasValidRowNumber()||this.adjustRowNumbers(i,f,c))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<n.length;c++)if(n[c]!=null&&i[c]!=null&&n[c].getRowNumber()===i[c].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let g=this.detectionResultColumns[f].getCodewords()[c];g!=null&&(g.setRowNumber(n[c].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<i.length;c++){if(i[c]==null)continue;let f=i[c].getRowNumber(),g=0;for(let p=this.barcodeColumnCount+1;p>0&&g<this.ADJUST_ROW_NUMBER_SKIP;p--){let y=this.detectionResultColumns[p].getCodewords()[c];y!=null&&(g=Kn.adjustRowNumberIfValid(f,g,y),y.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let c=0;c<i.length;c++){if(i[c]==null)continue;let f=i[c].getRowNumber(),g=0;for(let p=1;p<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;p++){let y=this.detectionResultColumns[p].getCodewords()[c];y!=null&&(g=Kn.adjustRowNumberIfValid(f,g,y),y.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,c){return c==null||c.hasValidRowNumber()||(c.isValidRowNumber(n)?(c.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,c){if(!this.detectionResultColumns[n-1])return;let f=c[i],g=this.detectionResultColumns[n-1].getCodewords(),p=g;this.detectionResultColumns[n+1]!=null&&(p=this.detectionResultColumns[n+1].getCodewords());let y=new Array(14);y[2]=g[i],y[3]=p[i],i>0&&(y[0]=c[i-1],y[4]=g[i-1],y[5]=p[i-1]),i>1&&(y[8]=c[i-2],y[10]=g[i-2],y[11]=p[i-2]),i<c.length-1&&(y[1]=c[i+1],y[6]=g[i+1],y[7]=p[i+1]),i<c.length-2&&(y[9]=c[i+2],y[12]=g[i+2],y[13]=p[i+2]);for(let S of y)if(Kn.adjustRowNumber(f,S))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new ka;for(let c=0;c<n.getCodewords().length;c++){i.format("CW %3d:",c);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){i.format("    |   ");continue}let g=this.detectionResultColumns[f].getCodewords()[c];if(g==null){i.format("    |   ");continue}i.format(" %3d|%3d",g.getRowNumber(),g.getValue())}i.format("%n")}return i.toString()}}class Ws{constructor(n,i,c,f){this.rowNumber=Ws.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(c),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Ws.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Ws.BARCODE_ROW_UNKNOWN=-1;class as{static initialize(){for(let n=0;n<it.SYMBOL_TABLE.length;n++){let i=it.SYMBOL_TABLE[n],c=i&1;for(let f=0;f<it.BARS_IN_MODULE;f++){let g=0;for(;(i&1)===c;)g+=1,i>>=1;c=i&1,as.RATIOS_TABLE[n]||(as.RATIOS_TABLE[n]=new Array(it.BARS_IN_MODULE)),as.RATIOS_TABLE[n][it.BARS_IN_MODULE-f-1]=Math.fround(g/it.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=as.getDecodedCodewordValue(as.sampleBitCounts(n));return i!==-1?i:as.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=mt.sum(n),c=new Int32Array(it.BARS_IN_MODULE),f=0,g=0;for(let p=0;p<it.MODULES_IN_CODEWORD;p++){let y=i/(2*it.MODULES_IN_CODEWORD)+p*i/it.MODULES_IN_CODEWORD;g+n[f]<=y&&(g+=n[f],f++),c[f]++}return c}static getDecodedCodewordValue(n){let i=as.getBitValue(n);return it.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let c=0;c<n.length;c++)for(let f=0;f<n[c];f++)i=i<<1|(c%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=mt.sum(n),c=new Array(it.BARS_IN_MODULE);if(i>1)for(let p=0;p<c.length;p++)c[p]=Math.fround(n[p]/i);let f=ns.MAX_VALUE,g=-1;this.bSymbolTableReady||as.initialize();for(let p=0;p<as.RATIOS_TABLE.length;p++){let y=0,S=as.RATIOS_TABLE[p];for(let E=0;E<it.BARS_IN_MODULE;E++){let R=Math.fround(S[E]-c[E]);if(y+=Math.fround(R*R),y>=f)break}y<f&&(f=y,g=it.SYMBOL_TABLE[p])}return g}}as.bSymbolTableReady=!1,as.RATIOS_TABLE=new Array(it.SYMBOL_TABLE.length).map(L=>new Array(it.BARS_IN_MODULE));class Da{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class wc{static parseLong(n,i=void 0){return parseInt(n,i)}}class ao extends w{}ao.kind="NullPointerException";class ul{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,c){if(n==null)throw new ao;if(i<0||i>n.length||c<0||i+c>n.length||i+c<0)throw new D;if(c===0)return;for(let f=0;f<c;f++)this.write(n[i+f])}flush(){}close(){}}class vi extends w{}class io extends ul{constructor(n=32){if(super(),this.count=0,n<0)throw new N("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let c=this.buf.length<<1;if(c-n<0&&(c=n),c<0){if(n<0)throw new vi;c=P.MAX_VALUE}this.buf=U.copyOfUint8Array(this.buf,c)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,c){if(i<0||i>n.length||c<0||i+c-n.length>0)throw new D;this.ensureCapacity(this.count+c),k.arraycopy(n,i,this.buf,this.count,c),this.count+=c}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return U.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Jt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Jt||(Jt={}));function bc(){if(typeof window<"u")return window.BigInt||null;if(typeof Ou<"u")return Ou.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let oo;function qr(L){if(typeof oo>"u"&&(oo=bc()),oo===null)throw new Error("BigInt is not supported!");return oo(L)}function dl(){let L=[];L[0]=qr(1);let n=qr(900);L[1]=n;for(let i=2;i<16;i++)L[i]=L[i-1]*n;return L}class xe{static decode(n,i){let c=new be(""),f=q.ISO8859_1;c.enableDecoding(f);let g=1,p=n[g++],y=new Da;for(;g<n[0];){switch(p){case xe.TEXT_COMPACTION_MODE_LATCH:g=xe.textCompaction(n,g,c);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:g=xe.byteCompaction(p,n,f,g,c);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(n[g++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:g=xe.numericCompaction(n,g,c);break;case xe.ECI_CHARSET:q.getCharacterSetECIByValue(n[g++]);break;case xe.ECI_GENERAL_PURPOSE:g+=2;break;case xe.ECI_USER_DEFINED:g++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=xe.decodeMacroBlock(n,g,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new V;default:g--,g=xe.textCompaction(n,g,c);break}if(g<n.length)p=n[g++];else throw V.getFormatInstance()}if(c.length()===0)throw V.getFormatInstance();let S=new Ce(null,c.toString(),null,i);return S.setOther(y),S}static decodeMacroBlock(n,i,c){if(i+xe.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw V.getFormatInstance();let f=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,i++)f[y]=n[i];c.setSegmentIndex(P.parseInt(xe.decodeBase900toBase10(f,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new be;i=xe.textCompaction(n,i,g),c.setFileId(g.toString());let p=-1;for(n[i]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=i+1);i<n[0];)switch(n[i]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new be;i=xe.textCompaction(n,i+1,y),c.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let S=new be;i=xe.textCompaction(n,i+1,S),c.setSender(S.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new be;i=xe.textCompaction(n,i+1,E),c.setAddressee(E.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new be;i=xe.numericCompaction(n,i+1,R),c.setSegmentCount(P.parseInt(R.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new be;i=xe.numericCompaction(n,i+1,B),c.setTimestamp(wc.parseLong(B.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let z=new be;i=xe.numericCompaction(n,i+1,z),c.setChecksum(P.parseInt(z.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let W=new be;i=xe.numericCompaction(n,i+1,W),c.setFileSize(wc.parseLong(W.toString()));break;default:throw V.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:i++,c.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(p!==-1){let y=i-p;c.isLastSegment()&&y--,c.setOptionalData(U.copyOfRange(n,p,p+y))}return i}static textCompaction(n,i,c){let f=new Int32Array((n[0]-i)*2),g=new Int32Array((n[0]-i)*2),p=0,y=!1;for(;i<n[0]&&!y;){let S=n[i++];if(S<xe.TEXT_COMPACTION_MODE_LATCH)f[p]=S/30,f[p+1]=S%30,p+=2;else switch(S){case xe.TEXT_COMPACTION_MODE_LATCH:f[p++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:i--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[p]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,S=n[i++],g[p]=S,p++;break}}return xe.decodeTextCompaction(f,g,p,c),i}static decodeTextCompaction(n,i,c,f){let g=Jt.ALPHA,p=Jt.ALPHA,y=0;for(;y<c;){let S=n[y],E="";switch(g){case Jt.ALPHA:if(S<26)E=String.fromCharCode(65+S);else switch(S){case 26:E=" ";break;case xe.LL:g=Jt.LOWER;break;case xe.ML:g=Jt.MIXED;break;case xe.PS:p=g,g=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(i[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:g=Jt.ALPHA;break}break;case Jt.LOWER:if(S<26)E=String.fromCharCode(97+S);else switch(S){case 26:E=" ";break;case xe.AS:p=g,g=Jt.ALPHA_SHIFT;break;case xe.ML:g=Jt.MIXED;break;case xe.PS:p=g,g=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(i[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:g=Jt.ALPHA;break}break;case Jt.MIXED:if(S<xe.PL)E=xe.MIXED_CHARS[S];else switch(S){case xe.PL:g=Jt.PUNCT;break;case 26:E=" ";break;case xe.LL:g=Jt.LOWER;break;case xe.AL:g=Jt.ALPHA;break;case xe.PS:p=g,g=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(i[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:g=Jt.ALPHA;break}break;case Jt.PUNCT:if(S<xe.PAL)E=xe.PUNCT_CHARS[S];else switch(S){case xe.PAL:g=Jt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(i[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:g=Jt.ALPHA;break}break;case Jt.ALPHA_SHIFT:if(g=p,S<26)E=String.fromCharCode(65+S);else switch(S){case 26:E=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:g=Jt.ALPHA;break}break;case Jt.PUNCT_SHIFT:if(g=p,S<xe.PAL)E=xe.PUNCT_CHARS[S];else switch(S){case xe.PAL:g=Jt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(i[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:g=Jt.ALPHA;break}break}E!==""&&f.append(E),y++}}static byteCompaction(n,i,c,f,g){let p=new io,y=0,S=0,E=!1;switch(n){case xe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),B=i[f++];for(;f<i[0]&&!E;)switch(R[y++]=B,S=900*S+B,B=i[f++],B){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,E=!0;break;default:if(y%5===0&&y>0){for(let z=0;z<6;++z)p.write(Number(qr(S)>>qr(8*(5-z))));S=0,y=0}break}f===i[0]&&B<xe.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=B);for(let z=0;z<y;z++)p.write(R[z]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;f<i[0]&&!E;){let z=i[f++];if(z<xe.TEXT_COMPACTION_MODE_LATCH)y++,S=900*S+z;else switch(z){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,E=!0;break}if(y%5===0&&y>0){for(let W=0;W<6;++W)p.write(Number(qr(S)>>qr(8*(5-W))));S=0,y=0}}break}return g.append(fe.decode(p.toByteArray(),c)),f}static numericCompaction(n,i,c){let f=0,g=!1,p=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!g;){let y=n[i++];if(i===n[0]&&(g=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)p[f]=y,f++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:i--,g=!0;break}(f%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||g)&&f>0&&(c.append(xe.decodeBase900toBase10(p,f)),f=0)}return i}static decodeBase900toBase10(n,i){let c=qr(0);for(let g=0;g<i;g++)c+=xe.EXP900[i-g-1]*qr(n[g]);let f=c.toString();if(f.charAt(0)!=="1")throw new V;return f.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=bc()?dl():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Et{constructor(){}static decode(n,i,c,f,g,p,y){let S=new Or(n,i,c,f,g),E=null,R=null,B;for(let te=!0;;te=!1){if(i!=null&&(E=Et.getRowIndicatorColumn(n,S,i,!0,p,y)),f!=null&&(R=Et.getRowIndicatorColumn(n,S,f,!1,p,y)),B=Et.merge(E,R),B==null)throw G.getNotFoundInstance();let se=B.getBoundingBox();if(te&&se!=null&&(se.getMinY()<S.getMinY()||se.getMaxY()>S.getMaxY()))S=se;else break}B.setBoundingBox(S);let z=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,E),B.setDetectionResultColumn(z,R);let W=E!=null;for(let te=1;te<=z;te++){let se=W?te:z-te;if(B.getDetectionResultColumn(se)!==void 0)continue;let le;se===0||se===z?le=new cl(S,se===0):le=new Fr(S),B.setDetectionResultColumn(se,le);let pe=-1,Pe=pe;for(let Be=S.getMinY();Be<=S.getMaxY();Be++){if(pe=Et.getStartColumn(B,se,Be,W),pe<0||pe>S.getMaxX()){if(Pe===-1)continue;pe=Pe}let Oe=Et.detectCodeword(n,S.getMinX(),S.getMaxX(),W,pe,Be,p,y);Oe!=null&&(le.setCodeword(Be,Oe),Pe=pe,p=Math.min(p,Oe.getWidth()),y=Math.max(y,Oe.getWidth()))}}return Et.createDecoderResult(B)}static merge(n,i){if(n==null&&i==null)return null;let c=Et.getBarcodeMetadata(n,i);if(c==null)return null;let f=Or.merge(Et.adjustBoundingBox(n),Et.adjustBoundingBox(i));return new Kn(c,f)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let c=Et.getMax(i),f=0;for(let y of i)if(f+=c-y,y>0)break;let g=n.getCodewords();for(let y=0;f>0&&g[y]==null;y++)f--;let p=0;for(let y=i.length-1;y>=0&&(p+=c-i[y],!(i[y]>0));y--);for(let y=g.length-1;p>0&&g[y]==null;y--)p--;return n.getBoundingBox().addMissingRows(f,p,n.isLeft())}static getMax(n){let i=-1;for(let c of n)i=Math.max(i,c);return i}static getBarcodeMetadata(n,i){let c;if(n==null||(c=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let f;return i==null||(f=i.getBarcodeMetadata())==null?c:c.getColumnCount()!==f.getColumnCount()&&c.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&c.getRowCount()!==f.getRowCount()?null:c}static getRowIndicatorColumn(n,i,c,f,g,p){let y=new cl(i,f);for(let S=0;S<2;S++){let E=S===0?1:-1,R=Math.trunc(Math.trunc(c.getX()));for(let B=Math.trunc(Math.trunc(c.getY()));B<=i.getMaxY()&&B>=i.getMinY();B+=E){let z=Et.detectCodeword(n,0,n.getWidth(),f,R,B,g,p);z!=null&&(y.setCodeword(B,z),f?R=z.getStartX():R=z.getEndX())}}return y}static adjustCodewordCount(n,i){let c=i[0][1],f=c.getValue(),g=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Et.getNumberOfECCodeWords(n.getBarcodeECLevel());if(f.length===0){if(g<1||g>it.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();c.setValue(g)}else f[0]!==g&&c.setValue(g)}static createDecoderResult(n){let i=Et.createBarcodeMatrix(n);Et.adjustCodewordCount(n,i);let c=new Array,f=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),g=[],p=new Array;for(let S=0;S<n.getBarcodeRowCount();S++)for(let E=0;E<n.getBarcodeColumnCount();E++){let R=i[S][E+1].getValue(),B=S*n.getBarcodeColumnCount()+E;R.length===0?c.push(B):R.length===1?f[B]=R[0]:(p.push(B),g.push(R))}let y=new Array(g.length);for(let S=0;S<y.length;S++)y[S]=g[S];return Et.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),f,it.toIntArray(c),it.toIntArray(p),y)}static createDecoderResultFromAmbiguousValues(n,i,c,f,g){let p=new Int32Array(f.length),y=100;for(;y-- >0;){for(let S=0;S<p.length;S++)i[f[S]]=g[S][p[S]];try{return Et.decodeCodewords(i,n,c)}catch(S){if(!(S instanceof j))throw S}if(p.length===0)throw j.getChecksumInstance();for(let S=0;S<p.length;S++)if(p[S]<g[S].length-1){p[S]++;break}else if(p[S]=0,S===p.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let f=0;f<i.length;f++)for(let g=0;g<i[f].length;g++)i[f][g]=new Hr;let c=0;for(let f of n.getDetectionResultColumns()){if(f!=null){for(let g of f.getCodewords())if(g!=null){let p=g.getRowNumber();if(p>=0){if(p>=i.length)continue;i[p][c].setValue(g.getValue())}}}c++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,c,f){let g=f?1:-1,p=null;if(Et.isValidBarcodeColumn(n,i-g)&&(p=n.getDetectionResultColumn(i-g).getCodeword(c)),p!=null)return f?p.getEndX():p.getStartX();if(p=n.getDetectionResultColumn(i).getCodewordNearby(c),p!=null)return f?p.getStartX():p.getEndX();if(Et.isValidBarcodeColumn(n,i-g)&&(p=n.getDetectionResultColumn(i-g).getCodewordNearby(c)),p!=null)return f?p.getEndX():p.getStartX();let y=0;for(;Et.isValidBarcodeColumn(n,i-g);){i-=g;for(let S of n.getDetectionResultColumn(i).getCodewords())if(S!=null)return(f?S.getEndX():S.getStartX())+g*y*(S.getEndX()-S.getStartX());y++}return f?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,c,f,g,p,y,S){g=Et.adjustCodewordStartColumn(n,i,c,f,g,p);let E=Et.getModuleBitCount(n,i,c,f,g,p);if(E==null)return null;let R,B=mt.sum(E);if(f)R=g+B;else{for(let te=0;te<E.length/2;te++){let se=E[te];E[te]=E[E.length-1-te],E[E.length-1-te]=se}R=g,g=R-B}if(!Et.checkCodewordSkew(B,y,S))return null;let z=as.getDecodedValue(E),W=it.getCodeword(z);return W===-1?null:new Ws(g,R,Et.getCodewordBucketNumber(z),W)}static getModuleBitCount(n,i,c,f,g,p){let y=g,S=new Int32Array(8),E=0,R=f?1:-1,B=f;for(;(f?y<c:y>=i)&&E<S.length;)n.get(y,p)===B?(S[E]++,y+=R):(E++,B=!B);return E===S.length||y===(f?c:i)&&E===S.length-1?S:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,c,f,g,p){let y=g,S=f?-1:1;for(let E=0;E<2;E++){for(;(f?y>=i:y<c)&&f===n.get(y,p);){if(Math.abs(g-y)>Et.CODEWORD_SKEW_SIZE)return g;y+=S}S=-S,f=!f}return y}static checkCodewordSkew(n,i,c){return i-Et.CODEWORD_SKEW_SIZE<=n&&n<=c+Et.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,c){if(n.length===0)throw V.getFormatInstance();let f=1<<i+1,g=Et.correctErrors(n,c,f);Et.verifyCodewordCount(n,f);let p=xe.decode(n,""+i);return p.setErrorsCorrected(g),p.setErasures(c.length),p}static correctErrors(n,i,c){if(i!=null&&i.length>c/2+Et.MAX_ERRORS||c<0||c>Et.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return Et.errorCorrection.decode(n,c,i)}static verifyCodewordCount(n,i){if(n.length<4)throw V.getFormatInstance();let c=n[0];if(c>n.length)throw V.getFormatInstance();if(c===0)if(i<n.length)n[0]=n.length-i;else throw V.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),c=0,f=i.length-1;for(;!((n&1)!==c&&(c=n&1,f--,f<0));)i[f]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Et.getCodewordBucketNumber(Et.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new ka;for(let c=0;c<n.length;c++){i.format("Row %2d: ",c);for(let f=0;f<n[c].length;f++){let g=n[c][f];g.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}i.format("%n")}return i.toString()}}Et.CODEWORD_SKEW_SIZE=2,Et.MAX_ERRORS=3,Et.MAX_EC_CODEWORDS=512,Et.errorCorrection=new Rr;class is{decode(n,i=null){let c=is.decode(n,i,!1);if(c==null||c.length===0||c[0]==null)throw G.getNotFoundInstance();return c[0]}decodeMultiple(n,i=null){try{return is.decode(n,i,!0)}catch(c){throw c instanceof V||c instanceof j?G.getNotFoundInstance():c}}static decode(n,i,c){const f=new Array,g=pt.detectMultiple(n,i,c);for(const p of g.getPoints()){const y=Et.decode(g.getBits(),p[4],p[5],p[6],p[7],is.getMinCodewordWidth(p),is.getMaxCodewordWidth(p)),S=new Ue(y.getText(),y.getRawBytes(),void 0,p,Ee.PDF_417);S.putMetadata(De.ERROR_CORRECTION_LEVEL,y.getECLevel());const E=y.getOther();E!=null&&S.putMetadata(De.PDF417_EXTRA_METADATA,E),f.push(S)}return f.map(p=>p)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?P.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(is.getMaxWidth(n[0],n[4]),is.getMaxWidth(n[6],n[2])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN),Math.max(is.getMaxWidth(n[1],n[5]),is.getMaxWidth(n[7],n[3])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(is.getMinWidth(n[0],n[4]),is.getMinWidth(n[6],n[2])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN),Math.min(is.getMinWidth(n[1],n[5]),is.getMinWidth(n[7],n[3])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN)))}reset(){}}class lo extends w{}lo.kind="ReaderException";class vc{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!o(n)&&n.get(Y.TRY_HARDER)===!0,c=o(n)?null:n.get(Y.POSSIBLE_FORMATS),f=new Array;if(!o(c)){const g=c.some(p=>p===Ee.UPC_A||p===Ee.UPC_E||p===Ee.EAN_13||p===Ee.EAN_8||p===Ee.CODABAR||p===Ee.CODE_39||p===Ee.CODE_93||p===Ee.CODE_128||p===Ee.ITF||p===Ee.RSS_14||p===Ee.RSS_EXPANDED);g&&!i&&f.push(new Xs(n,this.verbose)),c.includes(Ee.QR_CODE)&&f.push(new jr),c.includes(Ee.DATA_MATRIX)&&f.push(new Tr),c.includes(Ee.AZTEC)&&f.push(new Qn),c.includes(Ee.PDF_417)&&f.push(new is),g&&i&&f.push(new Xs(n,this.verbose))}f.length===0&&(i||f.push(new Xs(n,this.verbose)),f.push(new jr),f.push(new Tr),f.push(new Qn),f.push(new is),i&&f.push(new Xs(n,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new lo("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(c){if(c instanceof lo)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class Cc extends Le{constructor(n=null,i=500){const c=new vc;c.setHints(n),super(c,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class vd extends Le{constructor(n=500){super(new is,n)}}class Cd extends Le{constructor(n=500){super(new jr,n)}}var hl;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(hl||(hl={}));var Gn=hl;class Ci{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new gt(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let c=i[i.length-1];const f=this.field;for(let g=i.length;g<=n;g++){const p=c.multiply(new gt(f,Int32Array.from([1,f.exp(g-1+f.getGeneratorBase())])));i.push(p),c=p}}return i[n]}encode(n,i){if(i===0)throw new N("No error correction bytes");const c=n.length-i;if(c<=0)throw new N("No data bytes provided");const f=this.buildGenerator(i),g=new Int32Array(c);k.arraycopy(n,0,g,0,c);let p=new gt(this.field,g);p=p.multiplyByMonomial(i,1);const S=p.divide(f)[1].getCoefficients(),E=i-S.length;for(let R=0;R<E;R++)n[c+R]=0;k.arraycopy(S,0,n,c+E,S.length)}}class Nn{constructor(){}static applyMaskPenaltyRule1(n){return Nn.applyMaskPenaltyRule1Internal(n,!0)+Nn.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const c=n.getArray(),f=n.getWidth(),g=n.getHeight();for(let p=0;p<g-1;p++){const y=c[p];for(let S=0;S<f-1;S++){const E=y[S];E===y[S+1]&&E===c[p+1][S]&&E===c[p+1][S+1]&&i++}}return Nn.N2*i}static applyMaskPenaltyRule3(n){let i=0;const c=n.getArray(),f=n.getWidth(),g=n.getHeight();for(let p=0;p<g;p++)for(let y=0;y<f;y++){const S=c[p];y+6<f&&S[y]===1&&S[y+1]===0&&S[y+2]===1&&S[y+3]===1&&S[y+4]===1&&S[y+5]===0&&S[y+6]===1&&(Nn.isWhiteHorizontal(S,y-4,y)||Nn.isWhiteHorizontal(S,y+7,y+11))&&i++,p+6<g&&c[p][y]===1&&c[p+1][y]===0&&c[p+2][y]===1&&c[p+3][y]===1&&c[p+4][y]===1&&c[p+5][y]===0&&c[p+6][y]===1&&(Nn.isWhiteVertical(c,y,p-4,p)||Nn.isWhiteVertical(c,y,p+7,p+11))&&i++}return i*Nn.N3}static isWhiteHorizontal(n,i,c){i=Math.max(i,0),c=Math.min(c,n.length);for(let f=i;f<c;f++)if(n[f]===1)return!1;return!0}static isWhiteVertical(n,i,c,f){c=Math.max(c,0),f=Math.min(f,n.length);for(let g=c;g<f;g++)if(n[g][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const c=n.getArray(),f=n.getWidth(),g=n.getHeight();for(let S=0;S<g;S++){const E=c[S];for(let R=0;R<f;R++)E[R]===1&&i++}const p=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-p)*10/p)*Nn.N4}static getDataMaskBit(n,i,c){let f,g;switch(n){case 0:f=c+i&1;break;case 1:f=c&1;break;case 2:f=i%3;break;case 3:f=(c+i)%3;break;case 4:f=Math.floor(c/2)+Math.floor(i/3)&1;break;case 5:g=c*i,f=(g&1)+g%3;break;case 6:g=c*i,f=(g&1)+g%3&1;break;case 7:g=c*i,f=g%3+(c+i&1)&1;break;default:throw new N("Invalid mask pattern: "+n)}return f===0}static applyMaskPenaltyRule1Internal(n,i){let c=0;const f=i?n.getHeight():n.getWidth(),g=i?n.getWidth():n.getHeight(),p=n.getArray();for(let y=0;y<f;y++){let S=0,E=-1;for(let R=0;R<g;R++){const B=i?p[y][R]:p[R][y];B===E?S++:(S>=5&&(c+=Nn.N1+(S-5)),S=1,E=B)}S>=5&&(c+=Nn.N1+(S-5))}return c}}Nn.N1=3,Nn.N2=3,Nn.N3=40,Nn.N4=10;class co{constructor(n,i){this.width=n,this.height=i;const c=new Array(i);for(let f=0;f!==i;f++)c[f]=new Uint8Array(n);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,c){this.bytes[i][n]=c}setBoolean(n,i,c){this.bytes[i][n]=c?1:0}clear(n){for(const i of this.bytes)U.fill(i,n)}equals(n){if(!(n instanceof co))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let c=0,f=this.height;c<f;++c){const g=this.bytes[c],p=i.bytes[c];for(let y=0,S=this.width;y<S;++y)if(g[y]!==p[y])return!1}return!0}toString(){const n=new be;for(let i=0,c=this.height;i<c;++i){const f=this.bytes[i];for(let g=0,p=this.width;g<p;++g)switch(f[g]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class ea{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new be;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<ea.NUM_MASK_PATTERNS}}ea.NUM_MASK_PATTERNS=8;class nn extends w{}nn.kind="WriterException";class ot{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,c,f,g){ot.clearMatrix(g),ot.embedBasicPatterns(c,g),ot.embedTypeInfo(i,f,g),ot.maybeEmbedVersionInfo(c,g),ot.embedDataBits(n,f,g)}static embedBasicPatterns(n,i){ot.embedPositionDetectionPatternsAndSeparators(i),ot.embedDarkDotAtLeftBottomCorner(i),ot.maybeEmbedPositionAdjustmentPatterns(n,i),ot.embedTimingPatterns(i)}static embedTypeInfo(n,i,c){const f=new K;ot.makeTypeInfoBits(n,i,f);for(let g=0,p=f.getSize();g<p;++g){const y=f.get(f.getSize()-1-g),S=ot.TYPE_INFO_COORDINATES[g],E=S[0],R=S[1];if(c.setBoolean(E,R,y),g<8){const B=c.getWidth()-g-1;c.setBoolean(B,8,y)}else{const z=c.getHeight()-7+(g-8);c.setBoolean(8,z,y)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const c=new K;ot.makeVersionInfoBits(n,c);let f=17;for(let g=0;g<6;++g)for(let p=0;p<3;++p){const y=c.get(f);f--,i.setBoolean(g,i.getHeight()-11+p,y),i.setBoolean(i.getHeight()-11+p,g,y)}}static embedDataBits(n,i,c){let f=0,g=-1,p=c.getWidth()-1,y=c.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);y>=0&&y<c.getHeight();){for(let S=0;S<2;++S){const E=p-S;if(!ot.isEmpty(c.get(E,y)))continue;let R;f<n.getSize()?(R=n.get(f),++f):R=!1,i!==255&&Nn.getDataMaskBit(i,E,y)&&(R=!R),c.setBoolean(E,y,R)}y+=g}g=-g,y+=g,p-=2}if(f!==n.getSize())throw new nn("Not all bits consumed: "+f+"/"+n.getSize())}static findMSBSet(n){return 32-P.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new N("0 polynomial");const c=ot.findMSBSet(i);for(n<<=c-1;ot.findMSBSet(n)>=c;)n^=i<<ot.findMSBSet(n)-c;return n}static makeTypeInfoBits(n,i,c){if(!ea.isValidMaskPattern(i))throw new nn("Invalid mask pattern");const f=n.getBits()<<3|i;c.appendBits(f,5);const g=ot.calculateBCHCode(f,ot.TYPE_INFO_POLY);c.appendBits(g,10);const p=new K;if(p.appendBits(ot.TYPE_INFO_MASK_PATTERN,15),c.xor(p),c.getSize()!==15)throw new nn("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const c=ot.calculateBCHCode(n.getVersionNumber(),ot.VERSION_INFO_POLY);if(i.appendBits(c,12),i.getSize()!==18)throw new nn("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const c=(i+1)%2;ot.isEmpty(n.get(i,6))&&n.setNumber(i,6,c),ot.isEmpty(n.get(6,i))&&n.setNumber(6,i,c)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new nn;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,c){for(let f=0;f<8;++f){if(!ot.isEmpty(c.get(n+f,i)))throw new nn;c.setNumber(n+f,i,0)}}static embedVerticalSeparationPattern(n,i,c){for(let f=0;f<7;++f){if(!ot.isEmpty(c.get(n,i+f)))throw new nn;c.setNumber(n,i+f,0)}}static embedPositionAdjustmentPattern(n,i,c){for(let f=0;f<5;++f){const g=ot.POSITION_ADJUSTMENT_PATTERN[f];for(let p=0;p<5;++p)c.setNumber(n+p,i+f,g[p])}}static embedPositionDetectionPattern(n,i,c){for(let f=0;f<7;++f){const g=ot.POSITION_DETECTION_PATTERN[f];for(let p=0;p<7;++p)c.setNumber(n+p,i+f,g[p])}}static embedPositionDetectionPatternsAndSeparators(n){const i=ot.POSITION_DETECTION_PATTERN[0].length;ot.embedPositionDetectionPattern(0,0,n),ot.embedPositionDetectionPattern(n.getWidth()-i,0,n),ot.embedPositionDetectionPattern(0,n.getWidth()-i,n);const c=8;ot.embedHorizontalSeparationPattern(0,c-1,n),ot.embedHorizontalSeparationPattern(n.getWidth()-c,c-1,n),ot.embedHorizontalSeparationPattern(0,n.getWidth()-c,n);const f=7;ot.embedVerticalSeparationPattern(f,0,n),ot.embedVerticalSeparationPattern(n.getHeight()-f-1,0,n),ot.embedVerticalSeparationPattern(f,n.getHeight()-f,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const c=n.getVersionNumber()-1,f=ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let g=0,p=f.length;g!==p;g++){const y=f[g];if(y>=0)for(let S=0;S!==p;S++){const E=f[S];E>=0&&ot.isEmpty(i.get(E,y))&&ot.embedPositionAdjustmentPattern(E-2,y-2,i)}}}}ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ot.VERSION_INFO_POLY=7973,ot.TYPE_INFO_POLY=1335,ot.TYPE_INFO_MASK_PATTERN=21522;class Sd{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class pn{constructor(){}static calculateMaskPenalty(n){return Nn.applyMaskPenaltyRule1(n)+Nn.applyMaskPenaltyRule2(n)+Nn.applyMaskPenaltyRule3(n)+Nn.applyMaskPenaltyRule4(n)}static encode(n,i,c=null){let f=pn.DEFAULT_BYTE_MODE_ENCODING;const g=c!==null&&c.get(Gn.CHARACTER_SET)!==void 0;g&&(f=c.get(Gn.CHARACTER_SET).toString());const p=this.chooseMode(n,f),y=new K;if(p===rt.BYTE&&(g||pn.DEFAULT_BYTE_MODE_ENCODING!==f)){const Be=q.getCharacterSetECIByName(f);Be!==void 0&&this.appendECI(Be,y)}this.appendModeInfo(p,y);const S=new K;this.appendBytes(n,p,S,f);let E;if(c!==null&&c.get(Gn.QR_VERSION)!==void 0){const Be=Number.parseInt(c.get(Gn.QR_VERSION).toString(),10);E=Ze.getVersionForNumber(Be);const Oe=this.calculateBitsNeeded(p,y,S,E);if(!this.willFit(Oe,E,i))throw new nn("Data too big for requested version")}else E=this.recommendVersion(i,p,y,S);const R=new K;R.appendBitArray(y);const B=p===rt.BYTE?S.getSizeInBytes():n.length;this.appendLengthInfo(B,E,p,R),R.appendBitArray(S);const z=E.getECBlocksForLevel(i),W=E.getTotalCodewords()-z.getTotalECCodewords();this.terminateBits(W,R);const te=this.interleaveWithECBytes(R,E.getTotalCodewords(),W,z.getNumBlocks()),se=new ea;se.setECLevel(i),se.setMode(p),se.setVersion(E);const le=E.getDimensionForVersion(),pe=new co(le,le),Pe=this.chooseMaskPattern(te,i,E,pe);return se.setMaskPattern(Pe),ot.buildMatrix(te,i,E,Pe,pe),se.setMatrix(pe),se}static recommendVersion(n,i,c,f){const g=this.calculateBitsNeeded(i,c,f,Ze.getVersionForNumber(1)),p=this.chooseVersion(g,n),y=this.calculateBitsNeeded(i,c,f,p);return this.chooseVersion(y,n)}static calculateBitsNeeded(n,i,c,f){return i.getSize()+n.getCharacterCountBits(f)+c.getSize()}static getAlphanumericCode(n){return n<pn.ALPHANUMERIC_TABLE.length?pn.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(q.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return rt.KANJI;let c=!1,f=!1;for(let g=0,p=n.length;g<p;++g){const y=n.charAt(g);if(pn.isDigit(y))c=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)f=!0;else return rt.BYTE}return f?rt.ALPHANUMERIC:c?rt.NUMERIC:rt.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=fe.encode(n,q.SJIS)}catch{return!1}const c=i.length;if(c%2!==0)return!1;for(let f=0;f<c;f+=2){const g=i[f]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(n,i,c,f){let g=Number.MAX_SAFE_INTEGER,p=-1;for(let y=0;y<ea.NUM_MASK_PATTERNS;y++){ot.buildMatrix(n,i,c,y,f);let S=this.calculateMaskPenalty(f);S<g&&(g=S,p=y)}return p}static chooseVersion(n,i){for(let c=1;c<=40;c++){const f=Ze.getVersionForNumber(c);if(pn.willFit(n,f,i))return f}throw new nn("Data too big")}static willFit(n,i,c){const f=i.getTotalCodewords(),p=i.getECBlocksForLevel(c).getTotalECCodewords(),y=f-p,S=(n+7)/8;return y>=S}static terminateBits(n,i){const c=n*8;if(i.getSize()>c)throw new nn("data bits cannot fit in the QR Code"+i.getSize()+" > "+c);for(let p=0;p<4&&i.getSize()<c;++p)i.appendBit(!1);const f=i.getSize()&7;if(f>0)for(let p=f;p<8;p++)i.appendBit(!1);const g=n-i.getSizeInBytes();for(let p=0;p<g;++p)i.appendBits((p&1)===0?236:17,8);if(i.getSize()!==c)throw new nn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,c,f,g,p){if(f>=c)throw new nn("Block ID too large");const y=n%c,S=c-y,E=Math.floor(n/c),R=E+1,B=Math.floor(i/c),z=B+1,W=E-B,te=R-z;if(W!==te)throw new nn("EC bytes mismatch");if(c!==S+y)throw new nn("RS blocks mismatch");if(n!==(B+W)*S+(z+te)*y)throw new nn("Total bytes mismatch");f<S?(g[0]=B,p[0]=W):(g[0]=z,p[0]=te)}static interleaveWithECBytes(n,i,c,f){if(n.getSizeInBytes()!==c)throw new nn("Number of bits and data bytes does not match");let g=0,p=0,y=0;const S=new Array;for(let R=0;R<f;++R){const B=new Int32Array(1),z=new Int32Array(1);pn.getNumDataBytesAndNumECBytesForBlockID(i,c,f,R,B,z);const W=B[0],te=new Uint8Array(W);n.toBytes(8*g,te,0,W);const se=pn.generateECBytes(te,z[0]);S.push(new Sd(te,se)),p=Math.max(p,W),y=Math.max(y,se.length),g+=B[0]}if(c!==g)throw new nn("Data bytes does not match offset");const E=new K;for(let R=0;R<p;++R)for(const B of S){const z=B.getDataBytes();R<z.length&&E.appendBits(z[R],8)}for(let R=0;R<y;++R)for(const B of S){const z=B.getErrorCorrectionBytes();R<z.length&&E.appendBits(z[R],8)}if(i!==E.getSizeInBytes())throw new nn("Interleaving error: "+i+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(n,i){const c=n.length,f=new Int32Array(c+i);for(let p=0;p<c;p++)f[p]=n[p]&255;new Ci(ht.QR_CODE_FIELD_256).encode(f,i);const g=new Uint8Array(i);for(let p=0;p<i;p++)g[p]=f[c+p];return g}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,c,f){const g=c.getCharacterCountBits(i);if(n>=1<<g)throw new nn(n+" is bigger than "+((1<<g)-1));f.appendBits(n,g)}static appendBytes(n,i,c,f){switch(i){case rt.NUMERIC:pn.appendNumericBytes(n,c);break;case rt.ALPHANUMERIC:pn.appendAlphanumericBytes(n,c);break;case rt.BYTE:pn.append8BitBytes(n,c,f);break;case rt.KANJI:pn.appendKanjiBytes(n,c);break;default:throw new nn("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=pn.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const c=n.length;let f=0;for(;f<c;){const g=pn.getDigit(n.charAt(f));if(f+2<c){const p=pn.getDigit(n.charAt(f+1)),y=pn.getDigit(n.charAt(f+2));i.appendBits(g*100+p*10+y,10),f+=3}else if(f+1<c){const p=pn.getDigit(n.charAt(f+1));i.appendBits(g*10+p,7),f+=2}else i.appendBits(g,4),f++}}static appendAlphanumericBytes(n,i){const c=n.length;let f=0;for(;f<c;){const g=pn.getAlphanumericCode(n.charCodeAt(f));if(g===-1)throw new nn;if(f+1<c){const p=pn.getAlphanumericCode(n.charCodeAt(f+1));if(p===-1)throw new nn;i.appendBits(g*45+p,11),f+=2}else i.appendBits(g,6),f++}}static append8BitBytes(n,i,c){let f;try{f=fe.encode(n,c)}catch(g){throw new nn(g)}for(let g=0,p=f.length;g!==p;g++){const y=f[g];i.appendBits(y,8)}}static appendKanjiBytes(n,i){let c;try{c=fe.encode(n,q.SJIS)}catch(g){throw new nn(g)}const f=c.length;for(let g=0;g<f;g+=2){const p=c[g]&255,y=c[g+1]&255,S=p<<8&4294967295|y;let E=-1;if(S>=33088&&S<=40956?E=S-33088:S>=57408&&S<=60351&&(E=S-49472),E===-1)throw new nn("Invalid byte sequence");const R=(E>>8)*192+(E&255);i.appendBits(R,13)}}static appendECI(n,i){i.appendBits(rt.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}pn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),pn.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class ta{write(n,i,c,f=null){if(n.length===0)throw new N("Found empty contents");if(i<0||c<0)throw new N("Requested dimensions are too small: "+i+"x"+c);let g=Tt.L,p=ta.QUIET_ZONE_SIZE;f!==null&&(f.get(Gn.ERROR_CORRECTION)!==void 0&&(g=Tt.fromString(f.get(Gn.ERROR_CORRECTION).toString())),f.get(Gn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Gn.MARGIN).toString(),10)));const y=pn.encode(n,g,f);return this.renderResult(y,i,c,p)}writeToDom(n,i,c,f,g=null){typeof n=="string"&&(n=document.querySelector(n));const p=this.write(i,c,f,g);n&&n.appendChild(p)}renderResult(n,i,c,f){const g=n.getMatrix();if(g===null)throw new yn;const p=g.getWidth(),y=g.getHeight(),S=p+f*2,E=y+f*2,R=Math.max(i,S),B=Math.max(c,E),z=Math.min(Math.floor(R/S),Math.floor(B/E)),W=Math.floor((R-p*z)/2),te=Math.floor((B-y*z)/2),se=this.createSVGElement(R,B);for(let le=0,pe=te;le<y;le++,pe+=z)for(let Pe=0,Be=W;Pe<p;Pe++,Be+=z)if(g.get(Pe,le)===1){const Oe=this.createSvgRectElement(Be,pe,z,z);se.appendChild(Oe)}return se}createSVGElement(n,i){const c=document.createElementNS(ta.SVG_NS,"svg");return c.setAttributeNS(null,"height",n.toString()),c.setAttributeNS(null,"width",i.toString()),c}createSvgRectElement(n,i,c,f){const g=document.createElementNS(ta.SVG_NS,"rect");return g.setAttributeNS(null,"x",n.toString()),g.setAttributeNS(null,"y",i.toString()),g.setAttributeNS(null,"height",c.toString()),g.setAttributeNS(null,"width",f.toString()),g.setAttributeNS(null,"fill","#000000"),g}}ta.QUIET_ZONE_SIZE=4,ta.SVG_NS="http://www.w3.org/2000/svg";class La{encode(n,i,c,f,g){if(n.length===0)throw new N("Found empty contents");if(i!==Ee.QR_CODE)throw new N("Can only encode QR_CODE, but got "+i);if(c<0||f<0)throw new N(`Requested dimensions are too small: ${c}x${f}`);let p=Tt.L,y=La.QUIET_ZONE_SIZE;g!==null&&(g.get(Gn.ERROR_CORRECTION)!==void 0&&(p=Tt.fromString(g.get(Gn.ERROR_CORRECTION).toString())),g.get(Gn.MARGIN)!==void 0&&(y=Number.parseInt(g.get(Gn.MARGIN).toString(),10)));const S=pn.encode(n,p,g);return La.renderResult(S,c,f,y)}static renderResult(n,i,c,f){const g=n.getMatrix();if(g===null)throw new yn;const p=g.getWidth(),y=g.getHeight(),S=p+f*2,E=y+f*2,R=Math.max(i,S),B=Math.max(c,E),z=Math.min(Math.floor(R/S),Math.floor(B/E)),W=Math.floor((R-p*z)/2),te=Math.floor((B-y*z)/2),se=new Re(R,B);for(let le=0,pe=te;le<y;le++,pe+=z)for(let Pe=0,Be=W;Pe<p;Pe++,Be+=z)g.get(Pe,le)===1&&se.setRegion(Be,pe,z,z);return se}}La.QUIET_ZONE_SIZE=4;class _d{encode(n,i,c,f,g){let p;switch(i){case Ee.QR_CODE:p=new La;break;default:throw new N("No encoder available for format "+i)}return p.encode(n,i,c,f,g)}}class fr extends ke{constructor(n,i,c,f,g,p,y,S){if(super(p,y),this.yuvData=n,this.dataWidth=i,this.dataHeight=c,this.left=f,this.top=g,f+p>i||g+y>c)throw new N("Crop rectangle does not fit within image data.");S&&this.reverseHorizontal(p,y)}getRow(n,i){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const c=this.getWidth();(i==null||i.length<c)&&(i=new Uint8ClampedArray(c));const f=(n+this.top)*this.dataWidth+this.left;return k.arraycopy(this.yuvData,f,i,0,c),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const c=n*i,f=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return k.arraycopy(this.yuvData,g,f,0,c),f;for(let p=0;p<i;p++){const y=p*n;k.arraycopy(this.yuvData,g,f,y,n),g+=this.dataWidth}return f}isCropSupported(){return!0}crop(n,i,c,f){return new fr(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,c,f,!1)}renderThumbnail(){const n=this.getWidth()/fr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/fr.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(n*i),f=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let p=0;p<i;p++){const y=p*n;for(let S=0;S<n;S++){const E=f[g+S*fr.THUMBNAIL_SCALE_FACTOR]&255;c[y+S]=4278190080|E*65793}g+=this.dataWidth*fr.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/fr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const c=this.yuvData;for(let f=0,g=this.top*this.dataWidth+this.left;f<i;f++,g+=this.dataWidth){const p=g+n/2;for(let y=g,S=g+n-1;y<p;y++,S--){const E=c[y];c[y]=c[S],c[S]=E}}}invert(){return new Ve(this)}}fr.THUMBNAIL_SCALE_FACTOR=2;class fl extends ke{constructor(n,i,c,f,g,p,y){if(super(i,c),this.dataWidth=f,this.dataHeight=g,this.left=p,this.top=y,n.BYTES_PER_ELEMENT===4){const S=i*c,E=new Uint8ClampedArray(S);for(let R=0;R<S;R++){const B=n[R],z=B>>16&255,W=B>>7&510,te=B&255;E[R]=(z+W+te)/4&255}this.luminances=E}else this.luminances=n;if(f===void 0&&(this.dataWidth=i),g===void 0&&(this.dataHeight=c),p===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+c>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const c=this.getWidth();(i==null||i.length<c)&&(i=new Uint8ClampedArray(c));const f=(n+this.top)*this.dataWidth+this.left;return k.arraycopy(this.luminances,f,i,0,c),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const c=n*i,f=new Uint8ClampedArray(c);let g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return k.arraycopy(this.luminances,g,f,0,c),f;for(let p=0;p<i;p++){const y=p*n;k.arraycopy(this.luminances,g,f,y,n),g+=this.dataWidth}return f}isCropSupported(){return!0}crop(n,i,c,f){return new fl(this.luminances,c,f,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new Ve(this)}}class Sc extends q{static forName(n){return this.getCharacterSetECIByName(n)}}class Si{}Si.ISO_8859_1=q.ISO8859_1;class Ba{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class _c{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class Ec{constructor(n){this.previous=n}getPrevious(){return this.previous}}class na extends Ec{constructor(n,i,c){super(n),this.value=i,this.bitCount=c}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new na(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new na(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+P.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class uo extends na{constructor(n,i,c){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=c}appendTo(n,i){for(let c=0;c<this.binaryShiftByteCount;c++)(c===0||c===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):c===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+c],8)}addBinaryShift(n,i){return new uo(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ac(L,n,i){return new uo(L,n,i)}function Ua(L,n,i){return new na(L,n,i)}const Pa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Vr=0,ho=1,Bs=2,gl=3,Ks=4,_i=new na(null,0,0),sa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ed(L){for(let n of L)U.fill(n,-1);return L[Vr][Ks]=0,L[ho][Ks]=0,L[ho][Vr]=28,L[gl][Ks]=0,L[Bs][Ks]=0,L[Bs][Vr]=15,L}const Ei=Ed(U.createInt32Array(6,6));class Zs{constructor(n,i,c,f){this.token=n,this.mode=i,this.binaryShiftByteCount=c,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let c=this.bitCount,f=this.token;if(n!==this.mode){let p=sa[this.mode][n];f=Ua(f,p&65535,p>>16),c+=p>>16}let g=n===Bs?4:5;return f=Ua(f,i,g),new Zs(f,n,0,c+g)}shiftAndAppend(n,i){let c=this.token,f=this.mode===Bs?4:5;return c=Ua(c,Ei[this.mode][n],f),c=Ua(c,i,5),new Zs(c,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(n){let i=this.token,c=this.mode,f=this.bitCount;if(this.mode===Ks||this.mode===Bs){let y=sa[c][Vr];i=Ua(i,y&65535,y>>16),f+=y>>16,c=Vr}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Zs(i,c,this.binaryShiftByteCount+1,f+g);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(n+1)),p}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=Ac(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Zs(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(sa[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=Zs.calculateBinaryShiftCost(n)-Zs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let f=this.endBinaryShift(n.length).token;f!==null;f=f.getPrevious())i.unshift(f);let c=new K;for(const f of i)f.appendTo(c,n);return c}toString(){return ie.format("%s bits=%d bytes=%d",Pa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Zs.INITIAL_STATE=new Zs(_i,Vr,0,0);function Nc(L){const n=ie.getCharCode(" "),i=ie.getCharCode("."),c=ie.getCharCode(",");L[Vr][n]=1;const f=ie.getCharCode("Z"),g=ie.getCharCode("A");for(let z=g;z<=f;z++)L[Vr][z]=z-g+2;L[ho][n]=1;const p=ie.getCharCode("z"),y=ie.getCharCode("a");for(let z=y;z<=p;z++)L[ho][z]=z-y+2;L[Bs][n]=1;const S=ie.getCharCode("9"),E=ie.getCharCode("0");for(let z=E;z<=S;z++)L[Bs][z]=z-E+2;L[Bs][c]=12,L[Bs][i]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let z=0;z<R.length;z++)L[gl][ie.getCharCode(R[z])]=z;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let z=0;z<B.length;z++)ie.getCharCode(B[z])>0&&(L[Ks][ie.getCharCode(B[z])]=z);return L}const Ai=Nc(U.createInt32Array(5,256));class ra{constructor(n){this.text=n}encode(){const n=ie.getCharCode(" "),i=ie.getCharCode(`
`);let c=_c.singletonList(Zs.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let p,y=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case ie.getCharCode("\r"):p=y===i?2:0;break;case ie.getCharCode("."):p=y===n?3:0;break;case ie.getCharCode(","):p=y===n?4:0;break;case ie.getCharCode(":"):p=y===n?5:0;break;default:p=0}p>0?(c=ra.updateStateListForPair(c,g,p),g++):c=this.updateStateListForChar(c,g)}return _c.min(c,(g,p)=>g.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const c=[];for(let f of n)this.updateStateForChar(f,i,c);return ra.simplifyStates(c)}updateStateForChar(n,i,c){let f=this.text[i]&255,g=Ai[n.getMode()][f]>0,p=null;for(let y=0;y<=Ks;y++){let S=Ai[y][f];if(S>0){if(p==null&&(p=n.endBinaryShift(i)),!g||y===n.getMode()||y===Bs){const E=p.latchAndAppend(y,S);c.push(E)}if(!g&&Ei[n.getMode()][y]>=0){const E=p.shiftAndAppend(y,S);c.push(E)}}}if(n.getBinaryShiftByteCount()>0||Ai[n.getMode()][f]===0){let y=n.addBinaryShiftChar(i);c.push(y)}}static updateStateListForPair(n,i,c){const f=[];for(let g of n)this.updateStateForPair(g,i,c,f);return this.simplifyStates(f)}static updateStateForPair(n,i,c,f){let g=n.endBinaryShift(i);if(f.push(g.latchAndAppend(Ks,c)),n.getMode()!==Ks&&f.push(g.shiftAndAppend(Ks,c)),c===3||c===4){let p=g.latchAndAppend(Bs,16-c).latchAndAppend(Bs,1);f.push(p)}if(n.getBinaryShiftByteCount()>0){let p=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);f.push(p)}}static simplifyStates(n){let i=[];for(const c of n){let f=!0;for(const g of i){if(g.isBetterThanOrEqualTo(c)){f=!1;break}c.isBetterThanOrEqualTo(g)&&(i=i.filter(p=>p!==g))}f&&i.push(c)}return i}}class Lt{constructor(){}static encodeBytes(n){return Lt.encode(n,Lt.DEFAULT_EC_PERCENT,Lt.DEFAULT_AZTEC_LAYERS)}static encode(n,i,c){let f=new ra(n).encode(),g=P.truncDivision(f.getSize()*i,100)+11,p=f.getSize()+g,y,S,E,R,B;if(c!==Lt.DEFAULT_AZTEC_LAYERS){if(y=c<0,S=Math.abs(c),S>(y?Lt.MAX_NB_BITS_COMPACT:Lt.MAX_NB_BITS))throw new N(ie.format("Illegal value %s for layers",c));E=Lt.totalBitsInLayer(S,y),R=Lt.WORD_SIZE[S];let Oe=E-E%R;if(B=Lt.stuffBits(f,R),B.getSize()+g>Oe)throw new N("Data to large for user specified layer");if(y&&B.getSize()>R*64)throw new N("Data to large for user specified layer")}else{R=0,B=null;for(let Oe=0;;Oe++){if(Oe>Lt.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(y=Oe<=3,S=y?Oe+1:Oe,E=Lt.totalBitsInLayer(S,y),p>E)continue;(B==null||R!==Lt.WORD_SIZE[S])&&(R=Lt.WORD_SIZE[S],B=Lt.stuffBits(f,R));let Nt=E-E%R;if(!(y&&B.getSize()>R*64)&&B.getSize()+g<=Nt)break}}let z=Lt.generateCheckWords(B,E,R),W=B.getSize()/R,te=Lt.generateModeMessage(y,S,W),se=(y?11:14)+S*4,le=new Int32Array(se),pe;if(y){pe=se;for(let Oe=0;Oe<le.length;Oe++)le[Oe]=Oe}else{pe=se+1+2*P.truncDivision(P.truncDivision(se,2)-1,15);let Oe=P.truncDivision(se,2),Nt=P.truncDivision(pe,2);for(let yt=0;yt<Oe;yt++){let Pn=yt+P.truncDivision(yt,15);le[Oe-yt-1]=Nt-Pn-1,le[Oe+yt]=Nt+Pn+1}}let Pe=new Re(pe);for(let Oe=0,Nt=0;Oe<S;Oe++){let yt=(S-Oe)*4+(y?9:12);for(let Pn=0;Pn<yt;Pn++){let Us=Pn*2;for(let ps=0;ps<2;ps++)z.get(Nt+Us+ps)&&Pe.set(le[Oe*2+ps],le[Oe*2+Pn]),z.get(Nt+yt*2+Us+ps)&&Pe.set(le[Oe*2+Pn],le[se-1-Oe*2-ps]),z.get(Nt+yt*4+Us+ps)&&Pe.set(le[se-1-Oe*2-ps],le[se-1-Oe*2-Pn]),z.get(Nt+yt*6+Us+ps)&&Pe.set(le[se-1-Oe*2-Pn],le[Oe*2+ps])}Nt+=yt*8}if(Lt.drawModeMessage(Pe,y,pe,te),y)Lt.drawBullsEye(Pe,P.truncDivision(pe,2),5);else{Lt.drawBullsEye(Pe,P.truncDivision(pe,2),7);for(let Oe=0,Nt=0;Oe<P.truncDivision(se,2)-1;Oe+=15,Nt+=16)for(let yt=P.truncDivision(pe,2)&1;yt<pe;yt+=2)Pe.set(P.truncDivision(pe,2)-Nt,yt),Pe.set(P.truncDivision(pe,2)+Nt,yt),Pe.set(yt,P.truncDivision(pe,2)-Nt),Pe.set(yt,P.truncDivision(pe,2)+Nt)}let Be=new Ba;return Be.setCompact(y),Be.setSize(pe),Be.setLayers(S),Be.setCodeWords(W),Be.setMatrix(Pe),Be}static drawBullsEye(n,i,c){for(let f=0;f<c;f+=2)for(let g=i-f;g<=i+f;g++)n.set(g,i-f),n.set(g,i+f),n.set(i-f,g),n.set(i+f,g);n.set(i-c,i-c),n.set(i-c+1,i-c),n.set(i-c,i-c+1),n.set(i+c,i-c),n.set(i+c,i-c+1),n.set(i+c,i+c-1)}static generateModeMessage(n,i,c){let f=new K;return n?(f.appendBits(i-1,2),f.appendBits(c-1,6),f=Lt.generateCheckWords(f,28,4)):(f.appendBits(i-1,5),f.appendBits(c-1,11),f=Lt.generateCheckWords(f,40,4)),f}static drawModeMessage(n,i,c,f){let g=P.truncDivision(c,2);if(i)for(let p=0;p<7;p++){let y=g-3+p;f.get(p)&&n.set(y,g-5),f.get(p+7)&&n.set(g+5,y),f.get(20-p)&&n.set(y,g+5),f.get(27-p)&&n.set(g-5,y)}else for(let p=0;p<10;p++){let y=g-5+p+P.truncDivision(p,5);f.get(p)&&n.set(y,g-7),f.get(p+10)&&n.set(g+7,y),f.get(29-p)&&n.set(y,g+7),f.get(39-p)&&n.set(g-7,y)}}static generateCheckWords(n,i,c){let f=n.getSize()/c,g=new Ci(Lt.getGF(c)),p=P.truncDivision(i,c),y=Lt.bitsToWords(n,c,p);g.encode(y,p-f);let S=i%c,E=new K;E.appendBits(0,S);for(const R of Array.from(y))E.appendBits(R,c);return E}static bitsToWords(n,i,c){let f=new Int32Array(c),g,p;for(g=0,p=n.getSize()/i;g<p;g++){let y=0;for(let S=0;S<i;S++)y|=n.get(g*i+S)?1<<i-S-1:0;f[g]=y}return f}static getGF(n){switch(n){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new N("Unsupported word size "+n)}}static stuffBits(n,i){let c=new K,f=n.getSize(),g=(1<<i)-2;for(let p=0;p<f;p+=i){let y=0;for(let S=0;S<i;S++)(p+S>=f||n.get(p+S))&&(y|=1<<i-1-S);(y&g)===g?(c.appendBits(y&g,i),p--):(y&g)===0?(c.appendBits(y|1,i),p--):c.appendBits(y,i)}return c}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Lt.DEFAULT_EC_PERCENT=33,Lt.DEFAULT_AZTEC_LAYERS=0,Lt.MAX_NB_BITS=32,Lt.MAX_NB_BITS_COMPACT=4,Lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ni{encode(n,i,c,f){return this.encodeWithHints(n,i,c,f,null)}encodeWithHints(n,i,c,f,g){let p=Si.ISO_8859_1,y=Lt.DEFAULT_EC_PERCENT,S=Lt.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(Gn.CHARACTER_SET)&&(p=Sc.forName(g.get(Gn.CHARACTER_SET).toString())),g.has(Gn.ERROR_CORRECTION)&&(y=P.parseInt(g.get(Gn.ERROR_CORRECTION).toString())),g.has(Gn.AZTEC_LAYERS)&&(S=P.parseInt(g.get(Gn.AZTEC_LAYERS).toString()))),Ni.encodeLayers(n,i,c,f,p,y,S)}static encodeLayers(n,i,c,f,g,p,y){if(i!==Ee.AZTEC)throw new N("Can only encode AZTEC, but got "+i);let S=Lt.encode(ie.getBytes(n,g),p,y);return Ni.renderResult(S,c,f)}static renderResult(n,i,c){let f=n.getMatrix();if(f==null)throw new yn;let g=f.getWidth(),p=f.getHeight(),y=Math.max(i,g),S=Math.max(c,p),E=Math.min(y/g,S/p),R=(y-g*E)/2,B=(S-p*E)/2,z=new Re(y,S);for(let W=0,te=B;W<p;W++,te+=E)for(let se=0,le=R;se<g;se++,le+=E)f.get(se,W)&&z.setRegion(le,te,E,E);return z}}r.AbstractExpandedDecoder=kn,r.ArgumentException=A,r.ArithmeticException=Wt,r.AztecCode=Ba,r.AztecCodeReader=Qn,r.AztecCodeWriter=Ni,r.AztecDecoder=St,r.AztecDetector=qn,r.AztecDetectorResult=Ie,r.AztecEncoder=Lt,r.AztecHighLevelEncoder=ra,r.AztecPoint=Gt,r.BarcodeFormat=Ee,r.Binarizer=I,r.BinaryBitmap=T,r.BitArray=K,r.BitMatrix=Re,r.BitSource=Qs,r.BrowserAztecCodeReader=ss,r.BrowserBarcodeReader=yd,r.BrowserCodeReader=Le,r.BrowserDatamatrixCodeReader=so,r.BrowserMultiFormatReader=Cc,r.BrowserPDF417Reader=vd,r.BrowserQRCodeReader=Cd,r.BrowserQRCodeSvgWriter=ta,r.CharacterSetECI=q,r.ChecksumException=j,r.Code128Reader=Ne,r.Code39Reader=dt,r.DataMatrixDecodedBitStreamParser=Nr,r.DataMatrixReader=Tr,r.DecodeHintType=Y,r.DecoderResult=Ce,r.DefaultGridSampler=Rn,r.DetectorResult=Ns,r.EAN13Reader=On,r.EncodeHintType=Gn,r.Exception=w,r.FormatException=V,r.GenericGF=ht,r.GenericGFPoly=gt,r.GlobalHistogramBinarizer=J,r.GridSampler=nt,r.GridSamplerInstance=rn,r.HTMLCanvasElementLuminanceSource=Ke,r.HybridBinarizer=oe,r.ITFReader=ft,r.IllegalArgumentException=N,r.IllegalStateException=yn,r.InvertedLuminanceSource=Ve,r.LuminanceSource=ke,r.MathUtils=mt,r.MultiFormatOneDReader=Xs,r.MultiFormatReader=vc,r.MultiFormatWriter=_d,r.NotFoundException=G,r.OneDReader=Rt,r.PDF417DecodedBitStreamParser=xe,r.PDF417DecoderErrorCorrection=Rr,r.PDF417Reader=is,r.PDF417ResultMetadata=Da,r.PerspectiveTransform=_t,r.PlanarYUVLuminanceSource=fr,r.QRCodeByteMatrix=co,r.QRCodeDataMask=js,r.QRCodeDecodedBitStreamParser=gn,r.QRCodeDecoderErrorCorrectionLevel=Tt,r.QRCodeDecoderFormatInformation=Wn,r.QRCodeEncoder=pn,r.QRCodeEncoderQRCode=ea,r.QRCodeMaskUtil=Nn,r.QRCodeMatrixUtil=ot,r.QRCodeMode=rt,r.QRCodeReader=jr,r.QRCodeVersion=Ze,r.QRCodeWriter=La,r.RGBLuminanceSource=fl,r.RSS14Reader=tn,r.RSSExpandedReader=Te,r.ReaderException=lo,r.ReedSolomonDecoder=un,r.ReedSolomonEncoder=Ci,r.ReedSolomonException=kt,r.Result=Ue,r.ResultMetadataType=De,r.ResultPoint=ze,r.StringUtils=ie,r.UnsupportedOperationException=ue,r.VideoInputDevice=ne,r.WhiteRectangleDetector=Fe,r.WriterException=nn,r.ZXingArrays=U,r.ZXingCharset=Sc,r.ZXingInteger=P,r.ZXingStandardCharsets=Si,r.ZXingStringBuilder=be,r.ZXingStringEncoding=fe,r.ZXingSystem=k,r.createAbstractExpandedDecoder=Ta,Object.defineProperty(r,"__esModule",{value:!0})}))})(Jl,Jl.exports)),Jl.exports}var An=yN();const wN=id(An),bN=xy({__proto__:null,default:wN},[An]);var ry=(function(){function a(t,r,o){if(this.formatMap=new Map([[Ge.QR_CODE,An.BarcodeFormat.QR_CODE],[Ge.AZTEC,An.BarcodeFormat.AZTEC],[Ge.CODABAR,An.BarcodeFormat.CODABAR],[Ge.CODE_39,An.BarcodeFormat.CODE_39],[Ge.CODE_93,An.BarcodeFormat.CODE_93],[Ge.CODE_128,An.BarcodeFormat.CODE_128],[Ge.DATA_MATRIX,An.BarcodeFormat.DATA_MATRIX],[Ge.MAXICODE,An.BarcodeFormat.MAXICODE],[Ge.ITF,An.BarcodeFormat.ITF],[Ge.EAN_13,An.BarcodeFormat.EAN_13],[Ge.EAN_8,An.BarcodeFormat.EAN_8],[Ge.PDF_417,An.BarcodeFormat.PDF_417],[Ge.RSS_14,An.BarcodeFormat.RSS_14],[Ge.RSS_EXPANDED,An.BarcodeFormat.RSS_EXPANDED],[Ge.UPC_A,An.BarcodeFormat.UPC_A],[Ge.UPC_E,An.BarcodeFormat.UPC_E],[Ge.UPC_EAN_EXTENSION,An.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!bN)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=o;var d=this.createZXingFormats(t),h=new Map;h.set(An.DecodeHintType.POSSIBLE_FORMATS,d),h.set(An.DecodeHintType.TRY_HARDER,!1),this.hints=h}return a.prototype.decodeAsync=function(t){var r=this;return new Promise(function(o,d){try{o(r.decode(t))}catch(h){d(h)}})},a.prototype.decode=function(t){var r=new An.MultiFormatReader(this.verbose,this.hints),o=new An.HTMLCanvasElementLuminanceSource(t),d=new An.BinaryBitmap(new An.HybridBinarizer(o)),h=r.decode(d);return{text:h.text,format:tw.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,o,d){t.set(r,o)}),t},a.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},a.prototype.createZXingFormats=function(t){for(var r=[],o=0,d=t;o<d.length;o++){var h=d[o];this.formatMap.has(h)?r.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return r},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),vN=function(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})},CN=function(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},ay=(function(){function a(t,r,o){if(this.formatMap=new Map([[Ge.QR_CODE,"qr_code"],[Ge.AZTEC,"aztec"],[Ge.CODABAR,"codabar"],[Ge.CODE_39,"code_39"],[Ge.CODE_93,"code_93"],[Ge.CODE_128,"code_128"],[Ge.DATA_MATRIX,"data_matrix"],[Ge.ITF,"itf"],[Ge.EAN_13,"ean_13"],[Ge.EAN_8,"ean_8"],[Ge.PDF_417,"pdf417"],[Ge.UPC_A,"upc_a"],[Ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=o;var d=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},a.prototype.decodeAsync=function(t){return vN(this,void 0,void 0,function(){var r,o;return CN(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=d.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(r),[2,{text:o.rawValue,format:tw.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(t){for(var r=null,o=0,d=0,h=t;d<h.length;d++){var x=h[d],b=x.boundingBox.width*x.boundingBox.height;b>o&&(o=b,r=x)}if(!r)throw"No largest barcode found";return r},a.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],o=0,d=t;o<d.length;o++){var h=d[o];this.formatMap.has(h)?r.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},a.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},a.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,o,d){t.set(r,o)}),t},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),iy=function(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})},oy=function(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},SN=(function(){function a(t,r,o,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,r&&ay.isSupported()?(this.primaryDecoder=new ay(t,o,d),this.secondaryDecoder=new ry(t,o,d)):this.primaryDecoder=new ry(t,o,d)}return a.prototype.decodeAsync=function(t){return iy(this,void 0,void 0,function(){var r;return oy(this,function(o){switch(o.label){case 0:r=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(t){return iy(this,void 0,void 0,function(){var r,o;return oy(this,function(d){switch(d.label){case 0:r=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,d.sent()];case 3:if(o=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw o;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,o=this.executionResults;r<o.length;r++){var d=o[r];t+=d}var h=t/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),o1=(function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(o[h]=d[h])},a(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");a(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}})(),rd=function(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})},ad=function(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},aw=(function(){function a(t,r){this.name=t,this.track=r}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(t){var r={};r[this.name]=t;var o={advanced:[r]};return this.track.applyConstraints(o)},a.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},a})(),_N=(function(a){o1(t,a);function t(r,o){return a.call(this,r,o)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var o={};o[this.name]=r;var d={advanced:[o]};return this.track.applyConstraints(d)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),o=r[this.name];return{min:o.min,max:o.max,step:o.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(aw),EN=(function(a){o1(t,a);function t(r){return a.call(this,"zoom",r)||this}return t})(_N),AN=(function(a){o1(t,a);function t(r){return a.call(this,"torch",r)||this}return t})(aw),NN=(function(){function a(t){this.track=t}return a.prototype.zoomFeature=function(){return new EN(this.track)},a.prototype.torchFeature=function(){return new AN(this.track)},a})(),TN=(function(){function a(t,r,o){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return a.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},a.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var o=t.surface.clientWidth,d=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(o,d),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(t,r,o,d){return rd(this,void 0,void 0,function(){var h,x;return ad(this,function(b){switch(b.label){case 0:return h=new a(t,r,d),o.aspectRatio?(x={aspectRatio:o.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:b.sent(),b.label=2;case 2:return h.setupSurface(),[2,h]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(t){this.failIfClosed();var r=this,o=function(){setTimeout(t,200),r.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(t){return rd(this,void 0,void 0,function(){return ad(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,o){var d=t.mediaStream.getVideoTracks(),h=d.length,x=0;t.mediaStream.getVideoTracks().forEach(function(b){t.mediaStream.removeTrack(b),b.stop(),++x,x>=h&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},a.prototype.getCapabilities=function(){return new NN(this.getFirstTrackOrFail())},a})(),jN=(function(){function a(t){this.mediaStream=t}return a.prototype.render=function(t,r,o){return rd(this,void 0,void 0,function(){return ad(this,function(d){return[2,TN.create(t,this.mediaStream,r,o)]})})},a.create=function(t){return rd(this,void 0,void 0,function(){var r,o;return ad(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return o=d.sent(),[2,new a(o)]}})})},a})(),ly=function(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})},cy=function(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},RN=(function(){function a(){}return a.failIfNotSupported=function(){return ly(this,void 0,void 0,function(){return cy(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(t){return ly(this,void 0,void 0,function(){return cy(this,function(r){return[2,jN.create(t)]})})},a})(),ON=function(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})},IN=function(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},MN=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var t=Qo.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(t=Qo.insecureContextCameraQueryError()),Promise.reject(t)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},a.getCamerasFromMediaDevices=function(){return ON(this,void 0,void 0,function(){var t,r,o,d,h,x,b;return IN(this,function(C){switch(C.label){case 0:return t=function(w){for(var A=w.getVideoTracks(),N=0,T=A;N<T.length;N++){var j=T[N];j.enabled=!1,j.stop(),w.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=C.sent(),d=[],h=0,x=o;h<x.length;h++)b=x[h],b.kind==="videoinput"&&d.push({id:b.deviceId,label:b.label});return t(r),[2,d]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var o=function(h){for(var x=[],b=0,C=h;b<C.length;b++){var w=C[b];w.kind==="video"&&x.push({id:w.id,label:w.label})}t(x)},d=MediaStreamTrack;d.getSources(o)})},a})(),Ln;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(Ln||(Ln={}));var kN=(function(){function a(){this.state=Ln.NOT_STARTED,this.onGoingTransactionNewState=Ln.UNKNOWN}return a.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},a.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===Ln.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ln.UNKNOWN,this.directTransition(t)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ln.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ln.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ln.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(t){switch(this.state){case Ln.UNKNOWN:throw"Transition from unknown is not allowed";case Ln.NOT_STARTED:this.failIfNewStateIs(t,[Ln.PAUSED]);break;case Ln.SCANNING:break;case Ln.PAUSED:break}},a.prototype.failIfNewStateIs=function(t,r){for(var o=0,d=r;o<d.length;o++){var h=d[o];if(t===h)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},a})(),DN=(function(){function a(t){this.stateManager=t}return a.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},a.prototype.directTransition=function(t){this.stateManager.directTransition(t)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===Ln.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==Ln.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ln.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===Ln.PAUSED},a})(),LN=(function(){function a(){}return a.create=function(){return new DN(new kN)},a})(),BN=(function(){var a=function(t,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(o[h]=d[h])},a(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");a(t,r);function o(){this.constructor=t}t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}})(),ar=(function(a){BN(t,a);function t(){return a!==null&&a.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(Br),UN=(function(){function a(t,r){this.logger=r,this.fps=ar.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ar.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?rw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!Kr(this.qrbox)},a.create=function(t,r){return new a(t,r)},a})(),M0=(function(){function a(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var o;typeof r=="boolean"?this.verbose=r===!0:r&&(o=r,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new sw(this.verbose),this.qrcode=new SN(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=LN.create()}return a.prototype.start=function(t,r,o,d){var h=this;if(!t)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;d?x=d:x=this.verbose?this.logger.log:function(){};var b=UN.create(r,this.logger);this.clearElement();var C=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=C,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:ar.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var N=this,T=this.stateManagerProxy.startTransition(Ln.SCANNING);return new Promise(function(j,I){var k=w?b.videoConstraints:N.createVideoConstraints(t);if(!k){T.cancel(),I("videoConstraints should be defined");return}var D={};(!w||b.aspectRatio)&&(D.aspectRatio=b.aspectRatio);var H={onRenderSurfaceReady:function(U,P){N.setupUi(U,P,b),N.isScanning=!0,N.foreverScan(b,o,x)}};RN.failIfNotSupported().then(function(U){U.create(k).then(function(P){return P.render(h.element,D,H).then(function(K){N.renderedCamera=K,T.execute(),j(null)}).catch(function(K){T.cancel(),I(K)})}).catch(function(P){T.cancel(),I(Qo.errorGettingUserMedia(P))})}).catch(function(U){T.cancel(),I(Qo.cameraStreamingNotSupported())})})},a.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ln.PAUSED),this.showPausedState(),(Kr(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Ln.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Ln.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(t.element){var h=document.getElementById(ar.SHADED_REGION_ELEMENT_ID);h&&t.element.removeChild(h)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),o(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),r.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(t,r){var o=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Kr(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,h){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(t);var x=new Image;x.onload=function(){var b=x.width,C=x.height,w=document.getElementById(o.elementId),A=w.clientWidth?w.clientWidth:ar.DEFAULT_WIDTH,N=Math.max(w.clientHeight?w.clientHeight:C,ar.FILE_SCAN_MIN_HEIGHT),T=o.computeCanvasDrawConfig(b,C,A,N);if(r){var j=o.createCanvasElement(A,N,"qr-canvas-visible");j.style.display="inline-block",w.appendChild(j);var I=j.getContext("2d");if(!I)throw"Unable to get 2d context from canvas";I.canvas.width=A,I.canvas.height=N,I.drawImage(x,0,0,b,C,T.x,T.y,T.width,T.height)}var k=ar.FILE_SCAN_HIDDEN_CANVAS_PADDING,D=Math.max(x.width,T.width),H=Math.max(x.height,T.height),U=D+2*k,P=H+2*k,K=o.createCanvasElement(U,P);w.appendChild(K);var Z=K.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=U,Z.canvas.height=P,Z.drawImage(x,0,0,b,C,k,k,D,H);try{o.qrcode.decodeRobustlyAsync(K).then(function(Y){d(ty.createFromQrcodeResult(Y))}).catch(h)}catch(Y){h("QR code parse error, error = ".concat(Y))}},x.onerror=h,x.onabort=h,x.onstalled=h,x.onsuspend=h,x.src=URL.createObjectURL(t)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return MN.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(t){if(t){if(!rw.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(t){var r=[Ge.QR_CODE,Ge.AZTEC,Ge.CODABAR,Ge.CODE_39,Ge.CODE_93,Ge.CODE_128,Ge.DATA_MATRIX,Ge.MAXICODE,Ge.ITF,Ge.EAN_13,Ge.EAN_8,Ge.PDF_417,Ge.RSS_14,Ge.RSS_EXPANDED,Ge.UPC_A,Ge.UPC_E,Ge.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],d=0,h=t.formatsToSupport;d<h.length;d++){var x=h[d];mN(x)?o.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Kr(t))return!0;if(!Kr(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Kr(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return Kr(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(t,r,o){var d=this,h=o.qrbox;this.validateQrboxConfig(h);var x=this.toQrdimensions(t,r,h),b=function(w){if(w<ar.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ar.MIN_QR_BOX_SIZE,"px.")},C=function(w){return w>t&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=t),w};b(x.width),b(x.height),x.width=C(x.width)},a.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(t,r,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(t,r)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return o},a.prototype.setupUi=function(t,r,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,o);var d=Kr(o.qrbox)?{width:t,height:r}:o.qrbox;this.validateQrboxConfig(d);var h=this.toQrdimensions(t,r,d);h.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=o.isShadedBoxEnabled()&&h.height<=r,b={x:0,y:0,width:t,height:r},C=x?this.getShadedRegionBounds(t,r,h):b,w=this.createCanvasElement(C.width,C.height),A={willReadFrequently:!0},N=w.getContext("2d",A);N.canvas.width=C.width,N.canvas.height=C.height,this.element.append(w),x&&this.possiblyInsertShadingElement(this.element,t,r,h),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=N,this.canvasElement=w},a.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Qo.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},a.prototype.scanContext=function(t,r){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return t(d.text,ty.createFromQrcodeResult(d)),o.possiblyUpdateShaders(!0),!0}).catch(function(d){o.possiblyUpdateShaders(!1);var h=Qo.codeParseError(d);return r(h,nw.createFrom(h)),!1})},a.prototype.foreverScan=function(t,r,o){var d=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),x=h.videoWidth/h.clientWidth,b=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*x,w=this.qrRegion.height*b,A=this.qrRegion.x*x,N=this.qrRegion.y*b;this.context.drawImage(h,A,N,C,w,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(t,r,o)},d.getTimeoutFps(t.fps))};this.scanContext(r,o).then(function(j){!j&&t.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(r,o).finally(function(){T()})):T()}).catch(function(j){d.logger.logError("Error happend while scanning context",j),T()})}},a.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",o="deviceId",d={user:!0,environment:!0},h="exact",x=function(I){if(I in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(I,"'")},b=Object.keys(t);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var C=Object.keys(t)[0];if(C!==r&&C!==o)throw"Only '".concat(r,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(C===r){var w=t.facingMode;if(typeof w=="string"){if(x(w))return{facingMode:w}}else if(typeof w=="object")if(h in w){if(x(w["".concat(h)]))return{facingMode:{exact:w["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var A=typeof w;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var N=t.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(h in N)return{deviceId:{exact:N["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var T=typeof N;throw"Invalid type of 'deviceId' = ".concat(T)}}}var j=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},a.prototype.computeCanvasDrawConfig=function(t,r,o,d){if(t<=o&&r<=d){var h=(o-t)/2,x=(d-r)/2;return{x:h,y:x,width:t,height:r}}else{var b=t,C=r;return t>o&&(r=o/t*r,t=o),r>d&&(t=d/r*t,r=d),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(C)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,o,d)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},a.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?ar.BORDER_SHADER_MATCH_COLOR:ar.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(t,r,o){var d=t,h=r,x=document.createElement("canvas");return x.style.width="".concat(d,"px"),x.style.height="".concat(h,"px"),x.style.display="none",x.id=Kr(o)?"qr-canvas":o,x},a.prototype.getShadedRegionBounds=function(t,r,o){if(o.width>t||o.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-o.width)/2,y:(r-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(t,r,o,d){if(!(r-d.width<1||o-d.height<1)){var h=document.createElement("div");h.style.position="absolute";var x=(r-d.width)/2,b=(o-d.height)/2;if(h.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(ar.SHADED_REGION_ELEMENT_ID),r-d.width<11||o-d.height<11)this.hasBorderShaders=!1;else{var C=5,w=40;this.insertShaderBorders(h,w,C,-C,null,0,!0),this.insertShaderBorders(h,w,C,-C,null,0,!1),this.insertShaderBorders(h,w,C,null,-C,0,!0),this.insertShaderBorders(h,w,C,null,-C,0,!1),this.insertShaderBorders(h,C,w+C,-C,null,-C,!0),this.insertShaderBorders(h,C,w+C,null,-C,-C,!0),this.insertShaderBorders(h,C,w+C,-C,null,-C,!1),this.insertShaderBorders(h,C,w+C,null,-C,-C,!1),this.hasBorderShaders=!0}t.append(h)}},a.prototype.insertShaderBorders=function(t,r,o,d,h,x,b){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=ar.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(r,"px"),C.style.height="".concat(o,"px"),d!==null&&(C.style.top="".concat(d,"px")),h!==null&&(C.style.bottom="".concat(h,"px")),b?C.style.left="".concat(x,"px"):C.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),t.appendChild(C)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(t){return 1e3/t},a})(),l1="data:image/svg+xml;base64,",PN=l1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",zN=l1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",uy=l1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",FN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",dy=(function(){function a(){}return a.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},a})(),HN=(function(){function a(){this.data=dy.createDefault();var t=localStorage.getItem(a.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return a.prototype.hasCameraPermissions=function(){return this.data.hasPermission},a.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},a.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},a.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},a.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},a.prototype.reset=function(){this.data=dy.createDefault(),this.flush()},a.prototype.flush=function(){localStorage.setItem(a.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},a.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",a})(),qN=(function(){function a(){this.infoDiv=document.createElement("div")}return a.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=ny.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var o=document.createElement("br"),d=document.createElement("br");this.infoDiv.appendChild(o),this.infoDiv.appendChild(d);var h=document.createElement("a");h.innerText=ny.reportIssues(),h.href="https://github.com/mebjas/html5-qrcode/issues",h.target="new",h.style.color="white",this.infoDiv.appendChild(h),t.appendChild(this.infoDiv)},a.prototype.show=function(){this.infoDiv.style.display="block"},a.prototype.hide=function(){this.infoDiv.style.display="none"},a})(),VN=(function(){function a(t,r){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=r,this.infoIcon=document.createElement("img")}return a.prototype.renderInto=function(t){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=uy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(o){return r.onHoverIn()},this.infoIcon.onmouseout=function(o){return r.onHoverOut()},this.infoIcon.onclick=function(o){return r.onClick()},t.appendChild(this.infoIcon)},a.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},a.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},a.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=FN,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=uy,this.infoIcon.style.opacity="0.6")},a})(),GN=(function(){function a(){var t=this;this.infoDiv=new qN,this.infoIcon=new VN(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return a.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},a})(),YN=function(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})},XN=function(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},hy=(function(){function a(){}return a.hasPermissions=function(){return YN(this,void 0,void 0,function(){var t,r,o,d;return XN(this,function(h){switch(h.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=h.sent(),r=0,o=t;r<o.length;r++)if(d=o[r],d.kind==="videoinput"&&d.label)return[2,!0];return[2,!1]}})})},a})(),di=(function(){function a(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return a.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},a.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},a.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var o=r[t];if(a.isCameraScanType(o))return!0}return!1},a.isCameraScanType=function(t){return t===Aa.SCAN_TYPE_CAMERA},a.isFileScanType=function(t){return t===Aa.SCAN_TYPE_FILE},a.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Br.DEFAULT_SUPPORTED_SCAN_TYPE;var r=Br.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var o=0,d=t;o<d.length;o++){var h=d[o];if(!Br.DEFAULT_SUPPORTED_SCAN_TYPE.includes(h))throw"Unsupported scan type ".concat(h)}return t},a})(),cr=(function(){function a(){}return a.ALL_ELEMENT_CLASS="html5-qrcode-element",a.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",a.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",a.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",a.TORCH_BUTTON_ID="html5-qrcode-button-torch",a.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",a.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",a.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",a.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",a.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",a.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",a})(),Ca=(function(){function a(){}return a.createElement=function(t,r){var o=document.createElement(t);return o.id=r,o.classList.add(cr.ALL_ELEMENT_CLASS),t==="button"&&o.setAttribute("type","button"),o},a})(),iw=function(a,t,r,o){function d(h){return h instanceof r?h:new r(function(x){x(h)})}return new(r||(r=Promise))(function(h,x){function b(A){try{w(o.next(A))}catch(N){x(N)}}function C(A){try{w(o.throw(A))}catch(N){x(N)}}function w(A){A.done?h(A.value):d(A.value).then(b,C)}w((o=o.apply(a,t||[])).next())})},ow=function(a,t){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,d,h,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(w){return function(A){return C([w,A])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(r=0)),r;)try{if(o=1,d&&(h=w[0]&2?d.return:w[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,w[1])).done)return h;switch(d=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,d=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){r.label=w[1];break}if(w[0]===6&&r.label<h[1]){r.label=h[1],h=w;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(w);break}h[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(a,r)}catch(A){w=[6,A],d=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},fy=(function(){function a(t,r,o){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=r,this.onTorchActionFailureCallback=o}return a.prototype.isTorchEnabled=function(){return this.isTorchOn},a.prototype.flipState=function(){return iw(this,void 0,void 0,function(){var t,r;return ow(this,function(o){switch(o.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return o.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return r=o.sent(),this.propagateFailure(t,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},a.prototype.updateUiBasedOnLatestSettings=function(t,r){t===r?(this.buttonController.setText(r?cn.torchOffButton():cn.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},a.prototype.propagateFailure=function(t,r){var o=t?cn.torchOnFailedMessage():cn.torchOffFailedMessage();r&&(o+="; Error = "+r),this.onTorchActionFailureCallback(o)},a.prototype.reset=function(){this.isTorchOn=!1},a})(),QN=(function(){function a(t,r){this.onTorchActionFailureCallback=r,this.torchButton=Ca.createElement("button",cr.TORCH_BUTTON_ID),this.torchController=new fy(t,this,r)}return a.prototype.render=function(t,r){var o=this;this.torchButton.innerText=cn.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var d=this;this.torchButton.addEventListener("click",function(h){return iw(o,void 0,void 0,function(){return ow(this,function(x){switch(x.label){case 0:return[4,d.torchController.flipState()];case 1:return x.sent(),d.torchController.isTorchEnabled()?(d.torchButton.classList.remove(cr.TORCH_BUTTON_CLASS_TORCH_OFF),d.torchButton.classList.add(cr.TORCH_BUTTON_CLASS_TORCH_ON)):(d.torchButton.classList.remove(cr.TORCH_BUTTON_CLASS_TORCH_ON),d.torchButton.classList.add(cr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},a.prototype.updateTorchCapability=function(t){this.torchController=new fy(t,this,this.onTorchActionFailureCallback)},a.prototype.getTorchButton=function(){return this.torchButton},a.prototype.hide=function(){this.torchButton.style.display="none"},a.prototype.show=function(){this.torchButton.style.display="inline-block"},a.prototype.disable=function(){this.torchButton.disabled=!0},a.prototype.enable=function(){this.torchButton.disabled=!1},a.prototype.setText=function(t){this.torchButton.innerText=t},a.prototype.reset=function(){this.torchButton.innerText=cn.torchOnButton(),this.torchController.reset()},a.create=function(t,r,o,d){var h=new a(r,d);return h.render(t,o),h},a})(),WN=(function(){function a(t,r,o){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",t.appendChild(this.fileBasedScanRegion);var d=document.createElement("label");d.setAttribute("for",this.getFileScanInputId()),d.style.display="inline-block",this.fileBasedScanRegion.appendChild(d),this.fileSelectionButton=Ca.createElement("button",cr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(b){d.click()}),d.append(this.fileSelectionButton),this.fileScanInput=Ca.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",d.appendChild(this.fileScanInput);var h=this;this.fileScanInput.addEventListener("change",function(b){if(!(b==null||b.target==null)){var C=b.target;if(!(C.files&&C.files.length===0)){var w=C.files,A=w[0],N=A.name;h.setImageNameToButton(N),o(A)}}});var x=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(x),this.fileBasedScanRegion.addEventListener("dragenter",function(b){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(b){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(b){h.fileBasedScanRegion.style.border=h.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(b){b.stopPropagation(),b.preventDefault(),h.fileBasedScanRegion.style.border=h.fileBasedScanRegionDefaultBorder();var C=b.dataTransfer;if(C){var w=C.files;if(!w||w.length===0)return;for(var A=!1,N=0;N<w.length;++N){var T=w.item(N);if(T){var j=/image.*/;if(T.type.match(j)){A=!0;var I=T.name;h.setImageNameToButton(I),o(T),x.innerText=cn.dragAndDropMessage();break}}}A||(x.innerText=cn.dragAndDropMessageOnlyImages())}})}return a.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},a.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},a.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},a.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},a.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},a.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},a.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},a.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=cn.dragAndDropMessage(),t.style.fontWeight="400",t},a.prototype.setImageNameToButton=function(t){var r=20;if(t.length>r){var o=t.substring(0,8),d=t.length,h=t.substring(d-8,d);t="".concat(o,"....").concat(h)}var x=cn.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=x},a.prototype.setInitialValueToButton=function(){var t=cn.fileSelectionChooseImage()+" - "+cn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},a.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},a.create=function(t,r,o){var d=new a(t,r,o);return d},a})(),KN=(function(){function a(t){this.selectElement=Ca.createElement("select",cr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return a.prototype.render=function(t){var r=document.createElement("span");r.style.marginRight="10px";var o=this.cameras.length;if(o===0)throw new Error("No cameras found");if(o===1)r.style.display="none";else{var d=cn.selectCamera();r.innerText="".concat(d," (").concat(this.cameras.length,")  ")}for(var h=1,x=0,b=this.cameras;x<b.length;x++){var C=b[x],w=C.id,A=C.label==null?w:C.label;(!A||A==="")&&(A=[cn.anonymousCameraPrefix(),h++].join(" "));var N=document.createElement("option");N.value=w,N.innerText=A,this.options.push(N),this.selectElement.appendChild(N)}r.appendChild(this.selectElement),t.appendChild(r)},a.prototype.disable=function(){this.selectElement.disabled=!0},a.prototype.isDisabled=function(){return this.selectElement.disabled===!0},a.prototype.enable=function(){this.selectElement.disabled=!1},a.prototype.getValue=function(){return this.selectElement.value},a.prototype.hasValue=function(t){for(var r=0,o=this.options;r<o.length;r++){var d=o[r];if(d.value===t)return!0}return!1},a.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},a.prototype.hasSingleItem=function(){return this.cameras.length===1},a.prototype.numCameras=function(){return this.cameras.length},a.create=function(t,r){var o=new a(r);return o.render(t),o},a})(),ZN=(function(){function a(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ca.createElement("input",cr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return a.prototype.render=function(t,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var o=cn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(o),this.rangeText.style.marginRight="10px";var d=this;this.rangeInput.addEventListener("input",function(){return d.onValueChange()}),this.rangeInput.addEventListener("change",function(){return d.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},a.prototype.onValueChange=function(){var t=cn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},a.prototype.setValues=function(t,r,o,d){this.rangeInput.min=t.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=d.toString(),this.rangeInput.value=o.toString(),this.onValueChange()},a.prototype.show=function(){this.zoomElementContainer.style.display="block"},a.prototype.hide=function(){this.zoomElementContainer.style.display="none"},a.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},a.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},a.create=function(t,r){var o=new a;return o.render(t,r),o},a})(),ir;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(ir||(ir={}));function $N(a){return{fps:a.fps,qrbox:a.qrbox,aspectRatio:a.aspectRatio,disableFlip:a.disableFlip,videoConstraints:a.videoConstraints}}function JN(a,t){return{formatsToSupport:a.formatsToSupport,useBarCodeDetectorIfSupported:a.useBarCodeDetectorIfSupported,experimentalFeatures:a.experimentalFeatures,verbose:t}}var lw=(function(){function a(t,r,o){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(r),this.verbose=o===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new di(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new sw(this.verbose),this.persistedDataManager=new HN,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return a.prototype.render=function(t,r){var o=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(h,x){if(t)t(h,x);else{if(o.lastMatchFound===h)return;o.lastMatchFound=h,o.setHeaderMessage(cn.lastMatch(h),ir.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(h,x){r&&r(h,x)};var d=document.getElementById(this.elementId);if(!d)throw"HTML Element with id=".concat(this.elementId," not found");d.innerHTML="",this.createBasicLayout(d),this.html5Qrcode=new M0(this.getScanRegionId(),JN(this.config,this.verbose))},a.prototype.pause=function(t){(Kr(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},a.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},a.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},a.prototype.clear=function(){var t=this,r=function(){var o=document.getElementById(t.elementId);o&&(o.innerHTML="",t.resetBasicLayout(o))};return this.html5Qrcode?new Promise(function(o,d){if(!t.html5Qrcode){o();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(h){if(!t.html5Qrcode){o();return}t.html5Qrcode.clear(),r(),o()}).catch(function(h){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",h),d(h)}):(t.html5Qrcode.clear(),r(),o())}):Promise.resolve()},a.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},a.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},a.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},a.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Br.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Br.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Br.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Br.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Br.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Br.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Br.DEFAULT_SUPPORTED_SCAN_TYPE}},a.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var r=document.createElement("div"),o=this.getScanRegionId();r.id=o,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",t.appendChild(r),di.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var d=document.createElement("div"),h=this.getDashboardId();d.id=h,d.style.width="100%",t.appendChild(d),this.setupInitialDashboard(d)},a.prototype.resetBasicLayout=function(t){t.style.border="none"},a.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},a.prototype.createHeader=function(t){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",t.appendChild(r);var o=new GN;o.renderInto(r);var d=document.createElement("div");d.id=this.getHeaderMessageContainerId(),d.style.display="none",d.style.textAlign="center",d.style.fontSize="14px",d.style.padding="2px 10px",d.style.margin="4px",d.style.borderTop="1px solid #f6f6f6",r.appendChild(d)},a.prototype.createSection=function(t){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",t.appendChild(r)},a.prototype.createCameraListUi=function(t,r,o){var d=this;d.showHideScanTypeSwapLink(!1),d.setHeaderMessage(cn.cameraPermissionRequesting());var h=function(){o||d.createPermissionButton(t,r)};M0.getCameras().then(function(x){d.persistedDataManager.setHasPermission(!0),d.showHideScanTypeSwapLink(!0),d.resetHeaderMessage(),x&&x.length>0?(t.removeChild(r),d.renderCameraSelection(x)):(d.setHeaderMessage(cn.noCameraFound(),ir.STATUS_WARNING),h())}).catch(function(x){d.persistedDataManager.setHasPermission(!1),o?o.disabled=!1:h(),d.setHeaderMessage(x,ir.STATUS_WARNING),d.showHideScanTypeSwapLink(!0)})},a.prototype.createPermissionButton=function(t,r){var o=this,d=Ca.createElement("button",this.getCameraPermissionButtonId());d.innerText=cn.cameraPermissionTitle(),d.addEventListener("click",function(){d.disabled=!0,o.createCameraListUi(t,r,d)}),r.appendChild(d)},a.prototype.createPermissionsUi=function(t,r){var o=this;if(di.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){hy.hasPermissions().then(function(d){d?o.createCameraListUi(t,r):(o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(t,r))}).catch(function(d){o.persistedDataManager.setHasPermission(!1),o.createPermissionButton(t,r)});return}this.createPermissionButton(t,r)},a.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");t.appendChild(r);var o=document.createElement("div");o.id=this.getDashboardSectionCameraScanRegionId(),o.style.display=di.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(o);var d=document.createElement("div");d.style.textAlign="center",o.appendChild(d),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(o,d),this.renderFileScanUi(r)},a.prototype.renderFileScanUi=function(t){var r=di.isFileScanType(this.currentScanType),o=this,d=function(h){if(!o.html5Qrcode)throw"html5Qrcode not defined";di.isFileScanType(o.currentScanType)&&(o.setHeaderMessage(cn.loadingImage()),o.html5Qrcode.scanFileV2(h,!0).then(function(x){o.resetHeaderMessage(),o.qrCodeSuccessCallback(x.decodedText,x)}).catch(function(x){o.setHeaderMessage(x,ir.STATUS_WARNING),o.qrCodeErrorCallback(x,nw.createFrom(x))}))};this.fileSelectionUi=WN.create(t,r,d)},a.prototype.renderCameraSelection=function(t){var r=this,o=this,d=document.getElementById(this.getDashboardSectionCameraScanRegionId());d.style.textAlign="center";var h=ZN.create(d,!1),x=function(k){var D=k.zoomFeature();if(D.isSupported()){h.setOnCameraZoomValueChangeCallback(function(U){D.apply(U)});var H=1;r.config.defaultZoomValueIfSupported&&(H=r.config.defaultZoomValueIfSupported),H=pN(H,D.min(),D.max()),h.setValues(D.min(),D.max(),H,D.step()),h.show()}},b=KN.create(d,t),C=document.createElement("span"),w=Ca.createElement("button",cr.CAMERA_START_BUTTON_ID);w.innerText=cn.scanButtonStartScanningText(),C.appendChild(w);var A=Ca.createElement("button",cr.CAMERA_STOP_BUTTON_ID);A.innerText=cn.scanButtonStopScanningText(),A.style.display="none",A.disabled=!0,C.appendChild(A);var N,T=function(k){if(!k.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(k.torchFeature()):N=QN.create(C,k.torchFeature(),{display:"none",marginLeft:"5px"},function(D){o.setHeaderMessage(D,ir.STATUS_WARNING)}),N.show()};d.appendChild(C);var j=function(k){k||(w.style.display="none"),w.innerText=cn.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,k&&(w.style.display="inline-block")};if(w.addEventListener("click",function(k){w.innerText=cn.scanButtonScanningStarting(),b.disable(),w.disabled=!0,w.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!1),o.resetHeaderMessage();var D=b.getValue();o.persistedDataManager.setLastUsedCameraId(D),o.html5Qrcode.start(D,$N(o.config),o.qrCodeSuccessCallback,o.qrCodeErrorCallback).then(function(H){A.disabled=!1,A.style.display="inline-block",j(!1);var U=o.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&T(U),r.config.showZoomSliderIfSupported===!0&&x(U)}).catch(function(H){o.showHideScanTypeSwapLink(!0),b.enable(),j(!0),o.setHeaderMessage(H,ir.STATUS_WARNING)})}),b.hasSingleItem()&&w.click(),A.addEventListener("click",function(k){if(!o.html5Qrcode)throw"html5Qrcode not defined";A.disabled=!0,o.html5Qrcode.stop().then(function(D){r.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!0),b.enable(),w.disabled=!1,A.style.display="none",w.style.display="inline-block",N&&(N.reset(),N.hide()),h.removeOnCameraZoomValueChangeCallback(),h.hide(),o.insertCameraScanImageToScanRegion()}).catch(function(D){A.disabled=!1,o.setHeaderMessage(D,ir.STATUS_WARNING)})}),o.persistedDataManager.getLastUsedCameraId()){var I=o.persistedDataManager.getLastUsedCameraId();b.hasValue(I)?(b.setValue(I),w.click()):o.persistedDataManager.resetLastUsedCameraId()}},a.prototype.createSectionSwap=function(){var t=this,r=cn.textIfCameraScanSelected(),o=cn.textIfFileScanSelected(),d=document.getElementById(this.getDashboardSectionId()),h=document.createElement("div");h.style.textAlign="center";var x=Ca.createElement("span",this.getDashboardSectionSwapLinkId());x.style.textDecoration="underline",x.style.cursor="pointer",x.innerText=di.isCameraScanType(this.currentScanType)?r:o,x.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,di.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),x.innerText=o,t.currentScanType=Aa.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),x.innerText=r,t.currentScanType=Aa.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),h.appendChild(x),d.appendChild(h)},a.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){hy.hasPermissions().then(function(o){if(o){var d=document.getElementById(r.getCameraPermissionButtonId());if(!d)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";d.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(o){r.persistedDataManager.setHasPermission(!1)});return}},a.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},a.prototype.setHeaderMessage=function(t,r){r||(r=ir.STATUS_DEFAULT);var o=this.getHeaderMessageDiv();switch(o.innerText=t,o.style.display="block",r){case ir.STATUS_SUCCESS:o.style.background="rgba(106, 175, 80, 0.26)",o.style.color="#477735";break;case ir.STATUS_WARNING:o.style.background="rgba(203, 36, 49, 0.14)",o.style.color="#cb2431";break;case ir.STATUS_DEFAULT:default:o.style.background="rgba(0, 0, 0, 0)",o.style.color="rgb(17, 17, 17)";break}},a.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},a.prototype.insertCameraScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(o){r.innerHTML="<br>",r.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=PN,this.cameraScanImage.alt=cn.cameraScanAltText()},a.prototype.insertFileScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(o){r.innerHTML="<br>",r.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=zN,this.fileScanImage.alt=cn.fileScanAltText()},a.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},a.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},a.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},a.prototype.getDashboardSectionSwapLinkId=function(){return cr.SCAN_TYPE_CHANGE_ANCHOR_ID},a.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},a.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},a.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},a.prototype.getCameraPermissionButtonId=function(){return cr.CAMERA_PERMISSION_BUTTON_ID},a.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},a.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},a.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},a})();const e4=Object.freeze(Object.defineProperty({__proto__:null,Html5Qrcode:M0,get Html5QrcodeScanType(){return Aa},Html5QrcodeScanner:lw,get Html5QrcodeScannerState(){return Ln},get Html5QrcodeSupportedFormats(){return Ge}},Symbol.toStringTag,{value:"Module"})),cw=({onScan:a,onClose:t,onError:r})=>{const o=M.useRef(null),d=M.useRef(null),[h,x]=M.useState(!1),[b,C]=M.useState("");M.useEffect(()=>()=>{N()},[]);const w=()=>{try{C(""),x(!0);const j={fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1,videoConstraints:{facingMode:"environment"}};d.current=new lw("qr-reader",j,!1),d.current.render((I,k)=>{A(I,k)},I=>{I.includes("No QR code found")||console.warn("QR scan error:",I)})}catch(j){console.error("Error initializing QR scanner:",j),C("Failed to initialize camera. Please check camera permissions."),x(!1),r&&r(j)}},A=(j,I)=>{try{N(),x(!1);let k;try{k=JSON.parse(j)}catch{k={type:"url",url:j}}a&&a(k)}catch(k){console.error("Error processing QR scan result:",k),C("Invalid QR code format")}},N=()=>{if(d.current){try{d.current.clear()}catch(j){console.warn("Error cleaning up QR scanner:",j)}d.current=null}},T=async j=>{const I=j.target.files[0];if(I)try{C(""),x(!0);const{Html5Qrcode:k}=await hd(async()=>{const{Html5Qrcode:U}=await Promise.resolve().then(()=>e4);return{Html5Qrcode:U}},void 0,import.meta.url),D=new k("hidden-qr-reader"),H=await D.scanFile(I,!1);D.clear(),A(H,{})}catch(k){console.error("Error scanning uploaded file:",k),C("Failed to scan QR code from image. Please ensure the image contains a valid QR code."),x(!1)}};return l.jsxs("div",{className:"qr-scanner-modal",children:[l.jsx("div",{id:"hidden-qr-reader",style:{display:"none"}}),l.jsxs("div",{className:"qr-scanner-content",children:[l.jsxs("div",{className:"qr-scanner-header",children:[l.jsx("h3",{children:"Scan QR Code"}),l.jsx("button",{className:"qr-close-btn",onClick:t,children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsx("div",{className:"qr-scanner-body",children:b?l.jsxs("div",{className:"qr-error",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("p",{children:b}),l.jsxs("button",{className:"qr-retry-btn",onClick:w,children:[l.jsx("i",{className:"fas fa-redo"}),"Try Again"]})]}):h?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"qr-reader-container",children:l.jsx("div",{id:"qr-reader",ref:o,className:"qr-reader"})}),l.jsxs("div",{className:"qr-scanner-info",children:[l.jsx("p",{children:"Position the QR code within the frame"}),l.jsxs("div",{className:"qr-scanner-tips",children:[l.jsxs("div",{className:"tip",children:[l.jsx("i",{className:"fas fa-lightbulb"}),l.jsx("span",{children:"Ensure good lighting"})]}),l.jsxs("div",{className:"tip",children:[l.jsx("i",{className:"fas fa-hand-paper"}),l.jsx("span",{children:"Hold steady"})]})]})]}),l.jsx("div",{className:"qr-scanner-actions",children:l.jsxs("button",{className:"qr-stop-btn",onClick:()=>{N(),x(!1)},children:[l.jsx("i",{className:"fas fa-stop"}),"Stop Scanning"]})})]}):l.jsxs("div",{className:"qr-start-section",children:[l.jsx("div",{className:"qr-start-icon",children:l.jsx("i",{className:"fas fa-camera"})}),l.jsx("p",{children:"Scan QR codes to connect with CaBa users"}),l.jsxs("button",{className:"qr-start-btn",onClick:w,children:[l.jsx("i",{className:"fas fa-qrcode"}),"Start Scanning"]}),l.jsxs("div",{className:"qr-alternative",children:[l.jsx("span",{children:"or"}),l.jsxs("label",{className:"qr-upload-btn",children:[l.jsx("i",{className:"fas fa-upload"}),"Upload from Gallery",l.jsx("input",{type:"file",accept:"image/*",onChange:T,style:{display:"none"}})]})]})]})})]})]})},xd=()=>{const a=hs(),t=Na(),r=[{path:"/",icon:Ur,label:"Chats"},{path:"/calls",icon:Gs,label:"Calls"},{path:"/qr",icon:X2,label:"QR Code"},{path:"/news",icon:gi,label:"News"},{path:"/settings",icon:nc,label:"Settings"}],o=d=>d==="/"?t.pathname==="/"||t.pathname.startsWith("/chat"):t.pathname.startsWith(d);return l.jsx("nav",{className:"bottom-nav",children:r.map(({path:d,icon:h,label:x})=>l.jsxs("button",{className:`nav-item ${o(d)?"active":""}`,onClick:()=>a(d),children:[l.jsx(h,{size:20}),l.jsx("span",{className:"label",children:x})]},d))})},t4=()=>{const a=hs(),{user:t}=$r(),[r,o]=M.useState(!1),[d,h]=M.useState(!1),[x,b]=M.useState(null),[C,w]=M.useState(!1),A=I=>{h(!1);try{const k=JSON.parse(I);k.id&&k.name?(b(k),w(!0)):k.url&&window.open(k.url,"_blank")}catch{I.startsWith("http")?window.open(I,"_blank"):alert("Invalid QR code format")}},N=()=>{if(!x)return;let I=JSON.parse(localStorage.getItem("CaBa_contacts")||"[]");I.some(k=>k.id===x.id)?alert("User already in contacts"):(I.push({id:x.id,name:x.name,phone:x.phone,about:x.about,addedAt:new Date().toISOString()}),localStorage.setItem("CaBa_contacts",JSON.stringify(I)),alert(`${x.name} added to contacts!`)),w(!1),b(null)},T=()=>{x&&(a(`/chat/new/${x.id}`),w(!1),b(null))};if(!t)return l.jsxs("div",{className:"qr-page",children:[l.jsxs("div",{className:"qr-page-header",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/"),children:l.jsx("i",{className:"fas fa-arrow-left"})}),l.jsx("h1",{children:"QR Code"})]}),l.jsx("div",{className:"qr-page-content",children:l.jsx("p",{children:"Please log in to use QR code features"})})]});console.log("QR Page - User object:",t);const j={id:t.id||"",name:t.name||t.user_metadata?.full_name||t.user_metadata?.name||"User",phone:t.phone||t.user_metadata?.phone||"",email:t.email||""};return l.jsxs("div",{className:"qr-page",children:[l.jsxs("div",{className:"qr-page-header",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/"),children:l.jsx("i",{className:"fas fa-arrow-left"})}),l.jsx("h1",{children:"QR Code"})]}),l.jsxs("div",{className:"qr-page-content",children:[l.jsxs("div",{className:"qr-options",children:[l.jsxs("div",{className:"qr-option-card",onClick:()=>o(!0),children:[l.jsx("div",{className:"qr-option-icon",children:l.jsx("i",{className:"fas fa-qrcode"})}),l.jsx("h3",{children:"My QR Code"}),l.jsx("p",{children:"Generate and share your profile QR code"})]}),l.jsxs("div",{className:"qr-option-card",onClick:()=>h(!0),children:[l.jsx("div",{className:"qr-option-icon",children:l.jsx("i",{className:"fas fa-camera"})}),l.jsx("h3",{children:"Scan QR Code"}),l.jsx("p",{children:"Scan QR codes to add contacts or visit links"})]})]}),l.jsxs("div",{className:"qr-info-section",children:[l.jsx("h3",{children:"How QR Codes Work"}),l.jsxs("div",{className:"qr-info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("i",{className:"fas fa-user-plus"}),l.jsx("h4",{children:"Add Contacts"}),l.jsx("p",{children:"Scan someone's QR code to instantly add them to your contacts"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("i",{className:"fas fa-share"}),l.jsx("h4",{children:"Share Profile"}),l.jsx("p",{children:"Share your QR code so others can view your profile and start chatting"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("i",{className:"fas fa-mobile-alt"}),l.jsx("h4",{children:"Cross-Platform"}),l.jsx("p",{children:"Works across all devices and platforms"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("i",{className:"fas fa-shield-alt"}),l.jsx("h4",{children:"Secure"}),l.jsx("p",{children:"End-to-end encrypted and secure"})]})]})]})]}),r&&t&&l.jsx(ew,{userId:j.id,userName:j.name,userPhone:j.phone,onClose:()=>o(!1)}),d&&l.jsx(cw,{onScan:A,onClose:()=>h(!1)}),C&&x&&l.jsx("div",{className:"modal",style:{display:"flex"},children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"User Found"}),l.jsx("button",{className:"close-modal",onClick:()=>{w(!1),b(null)},children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsxs("div",{className:"modal-body",style:{textAlign:"center"},children:[l.jsx("div",{style:{marginBottom:"20px"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:[l.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--primary-color)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px",color:"white",fontSize:"24px"},children:x.name.split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2)}),l.jsxs("div",{style:{textAlign:"left"},children:[l.jsx("h3",{style:{margin:"0",color:"var(--text-primary)"},children:x.name}),l.jsx("p",{style:{margin:"5px 0",color:"var(--text-secondary)"},children:x.phone}),x.about&&l.jsx("p",{style:{margin:"0",color:"var(--text-secondary)",fontSize:"14px"},children:x.about})]})]})}),l.jsxs("div",{className:"action-buttons",style:{display:"flex",gap:"10px",justifyContent:"center"},children:[l.jsxs("button",{className:"btn-primary",onClick:N,children:[l.jsx("i",{className:"fas fa-user-plus"}),"Add to Contacts"]}),l.jsxs("button",{className:"btn-secondary",onClick:T,children:[l.jsx("i",{className:"fas fa-comments"}),"Start Chat"]})]})]})]})}),l.jsx(xd,{})]})},n4=()=>{const{supabase:a}=fs(),{user:t,loading:r}=$r(),[o,d]=M.useState(null),[h,x]=M.useState(!0),[b,C]=M.useState({chats:0,calls:0,contacts:0}),[w,A]=M.useState(!1),[N,T]=M.useState(!1),[j,I]=M.useState(!1),[k,D]=M.useState(!1),[H,U]=M.useState(!1),[P,K]=M.useState(null),[Z,Y]=M.useState({name:"",about:"",email:""});M.useEffect(()=>{r||V()},[t,r]);const V=async()=>{try{if(!t)return;const G=localStorage.getItem(`digidad_profile_${t.id}`);if(G){const Ve=JSON.parse(G);d(Ve),$()}const{data:J,error:oe}=await a.from("users").select("*").eq("id",t.id).single();let ke;if(oe&&oe.code==="PGRST116"){const{data:Ve,error:Ke}=await a.from("users").insert([{id:t.id,name:t.name||"User",phone:t.phone||"",email:t.email,avatar:t.avatar||null,about:"Hey there! I am using CaBa",is_online:!1,last_seen:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(Ke)throw Ke;ke=Ve}else{if(oe)throw oe;ke=J}localStorage.setItem(`digidad_profile_${t.id}`,JSON.stringify(ke)),d(ke),$()}catch(G){console.error("Error loading profile:",G)}finally{x(!1)}},$=()=>{const G=JSON.parse(localStorage.getItem("CaBa_contacts")||"[]");C({chats:G.length||0,calls:0,contacts:G.length||0})},q=G=>G.split(" ").map(J=>J[0]).join("").toUpperCase().slice(0,2),ue=()=>{Y({name:o.name,about:o.about||"",email:o.email||""}),A(!0)},fe=async()=>{try{const{name:G,about:J,email:oe}=Z;if(G.length<3){alert("Name must be at least 3 characters");return}const{error:ke}=await a.from("users").update({name:G,about:J,email:oe||null}).eq("id",t.id);if(ke)throw ke;const Ve={...o,name:G,about:J,email:oe};d(Ve),localStorage.setItem(`digidad_profile_${t.id}`,JSON.stringify(Ve)),localStorage.setItem("currentUser",JSON.stringify(Ve)),A(!1),alert("Profile updated successfully")}catch(G){console.error("Error updating profile:",G),alert("Failed to update profile")}},ie=async G=>{try{const{error:J}=await a.from("users").update({avatar:G.toString()}).eq("id",t.id);if(J)throw J;const oe={...o,avatar:G.toString()};d(oe),localStorage.setItem(`digidad_profile_${t.id}`,JSON.stringify(oe)),localStorage.setItem("currentUser",JSON.stringify(oe)),T(!1),alert("Profile picture updated")}catch(J){console.error("Error selecting DP:",J),alert("Failed to update profile picture")}},be=G=>{D(!1);try{const J=JSON.parse(G);J.id&&J.name&&(K(J),U(!0))}catch{alert("Invalid QR code format")}},Re=()=>{let G=JSON.parse(localStorage.getItem("CaBa_contacts")||"[]");G.some(J=>J.id===P.id)?alert("User already in contacts"):(G.push({id:P.id,name:P.name,phone:P.phone,about:P.about,addedAt:new Date().toISOString()}),localStorage.setItem("CaBa_contacts",JSON.stringify(G)),alert(`${P.name} added to contacts`),$()),U(!1)};return h?l.jsx("div",{className:"profile-screen",children:l.jsx("div",{style:{textAlign:"center",padding:"50px"},children:"Loading..."})}):o?l.jsxs("div",{className:"profile-screen",children:[l.jsxs("header",{className:"profile-header",children:[l.jsx("button",{className:"back-btn",onClick:()=>window.history.back(),children:l.jsx("span",{className:"icon",children:""})}),l.jsx("h1",{children:"Profile"}),l.jsx("button",{className:"icon-btn",onClick:ue,children:l.jsx("i",{className:"fas fa-edit"})})]}),l.jsxs("div",{className:"profile-content",children:[l.jsx("div",{className:"profile-picture-section",children:l.jsx("div",{className:"profile-avatar",onClick:()=>T(!0),children:o.avatar?l.jsx("img",{src:parseInt(o.avatar)?ks.find(G=>G.id===parseInt(o.avatar))?.path:o.avatar,alt:"Profile Picture",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):l.jsx("div",{className:"profile-initials",children:q(o.name)})})}),l.jsxs("div",{className:"profile-info-section",children:[l.jsxs("div",{className:"info-item",children:[l.jsxs("div",{className:"info-label",children:[l.jsx("i",{className:"fas fa-user"}),l.jsx("span",{className:"label",children:"Name"})]}),l.jsx("div",{className:"info-value",children:l.jsx("span",{children:o.name})})]}),l.jsxs("div",{className:"info-item",children:[l.jsxs("div",{className:"info-label",children:[l.jsx("i",{className:"fas fa-info-circle"}),l.jsx("span",{className:"label",children:"About"})]}),l.jsx("div",{className:"info-value",children:l.jsx("span",{children:o.about||"Hey there! I am using CaBa"})})]}),l.jsxs("div",{className:"info-item",children:[l.jsxs("div",{className:"info-label",children:[l.jsx("i",{className:"fas fa-phone"}),l.jsx("span",{className:"label",children:"Phone"})]}),l.jsx("div",{className:"info-value",children:l.jsx("span",{children:o.phone})})]}),l.jsxs("div",{className:"info-item",children:[l.jsxs("div",{className:"info-label",children:[l.jsx("i",{className:"fas fa-envelope"}),l.jsx("span",{className:"label",children:"Email"})]}),l.jsx("div",{className:"info-value",children:l.jsx("span",{children:o.email||"Not set"})})]})]}),l.jsxs("div",{className:"profile-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("h3",{children:b.chats}),l.jsx("p",{children:"Chats"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("h3",{children:b.calls}),l.jsx("p",{children:"Calls"})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("h3",{children:b.contacts}),l.jsx("p",{children:"Contacts"})]})]}),l.jsxs("div",{className:"profile-actions",children:[l.jsxs("button",{className:"action-btn",onClick:()=>I(!0),children:[l.jsx("i",{className:"fas fa-qrcode"}),l.jsx("span",{className:"label",children:"My QR Code"})]}),l.jsxs("button",{className:"action-btn",onClick:()=>D(!0),children:[l.jsx("i",{className:"fas fa-camera"}),l.jsx("span",{className:"label",children:"Scan QR Code"})]})]})]}),w&&l.jsx("div",{className:"modal",style:{display:"flex"},children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Edit Profile"}),l.jsx("button",{className:"close-modal",onClick:()=>A(!1),children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("form",{onSubmit:G=>{G.preventDefault(),fe()},children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"editName",children:"Full Name"}),l.jsx("input",{type:"text",id:"editName",value:Z.name,onChange:G=>Y({...Z,name:G.target.value}),required:!0,minLength:"3"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"editAbout",children:"About"}),l.jsx("textarea",{id:"editAbout",rows:"3",maxLength:"150",value:Z.about,onChange:G=>Y({...Z,about:G.target.value})})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"editEmail",children:"Email"}),l.jsx("input",{type:"email",id:"editEmail",value:Z.email,onChange:G=>Y({...Z,email:G.target.value})})]}),l.jsx("button",{type:"submit",className:"btn-primary",children:"Save Changes"})]})})]})}),N&&l.jsx("div",{className:"modal",style:{display:"flex"},children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Choose Profile Picture"}),l.jsx("button",{className:"close-modal",onClick:()=>T(!1),children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsx("div",{className:"modal-body",children:l.jsx("div",{className:"dp-options-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"10px"},children:ks.map(G=>l.jsx("img",{src:G.path,alt:`DP ${G.id}`,style:{width:"80px",height:"80px",borderRadius:"8px",cursor:"pointer",objectFit:"cover"},onClick:()=>ie(G.id)},G.id))})})]})}),j&&o&&l.jsx(ew,{userId:o.id,userName:o.name,userPhone:o.phone,onClose:()=>I(!1)}),k&&l.jsx(cw,{onScan:be,onClose:()=>D(!1)}),H&&P&&l.jsx("div",{className:"modal",style:{display:"flex"},children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"User Found"}),l.jsx("button",{className:"close-modal",onClick:()=>U(!1),children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsxs("div",{className:"modal-body",style:{textAlign:"center"},children:[l.jsx("div",{style:{marginBottom:"20px"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:[l.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--primary-color)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px",color:"white",fontSize:"24px"},children:q(P.name)}),l.jsxs("div",{style:{textAlign:"left"},children:[l.jsx("h3",{style:{margin:"0",color:"var(--text-primary)"},children:P.name}),l.jsx("p",{style:{margin:"5px 0",color:"var(--text-secondary)"},children:P.phone}),P.about&&l.jsx("p",{style:{margin:"0",color:"var(--text-secondary)",fontSize:"14px"},children:P.about})]})]})}),l.jsx("div",{className:"action-buttons",style:{display:"flex",gap:"10px",justifyContent:"center"},children:l.jsxs("button",{className:"btn-primary",onClick:Re,children:[l.jsx("i",{className:"fas fa-user-plus"}),"Add to Contacts"]})})]})]})})]}):l.jsx("div",{className:"profile-screen",children:l.jsx("div",{style:{textAlign:"center",padding:"50px"},children:"Please log in to view profile"})})},s4=()=>{const a=hs(),{supabase:t}=fs(),{theme:r,toggleTheme:o}=al(),{chatTheme:d,chatThemes:h,selectTheme:x,currentThemeData:b}=t1(),C="./",[w,A]=M.useState({messageNotifications:!0,callNotifications:!0,notificationSound:!0,vibrate:!0,enterToSend:!1,readReceipts:!0,lastSeen:!0,showOnlineStatus:!0,allowEveryoneMessage:!0,profileVisible:!0,storageUsage:{app:0,media:0,total:0},callRingtone:"fm-freemusic-give-me-a-smile(chosic.com).mp3"}),[N,T]=M.useState(!1),[j,I]=M.useState(!1),[k,D]=M.useState(!1),[H,U]=M.useState(!1),[P,K]=M.useState(null),[Z,Y]=M.useState("fm-freemusic-give-me-a-smile(chosic.com).mp3"),V=[{file:"fm-freemusic-give-me-a-smile(chosic.com).mp3",name:"Give Me a Smile"},{file:"gio_office_0610.mp3",name:"Office"},{file:"Journey(chosic.com).mp3",name:"Journey"},{file:"Lights(chosic.com).mp3",name:"Lights"},{file:"nice_ring_tones.mp3",name:"Nice Ring"},{file:"PeriTune_Alleyway-chosic.com_.mp3",name:"Alleyway"},{file:"PeriTune_Village_Fete-chosic.com_.mp3",name:"Village Fete"},{file:"professional.mp3",name:"Professional"},{file:"roa-music-summer-madness(chosic.com).mp3",name:"Summer Madness"},{file:"Run-Amok(chosic.com).mp3",name:"Run Amok"},{file:"Sakura-Girl-Daisy-chosic.com_.mp3",name:"Daisy"},{file:"Sakura-Girl-Wake-Up-chosic.com_.mp3",name:"Wake Up"},{file:"smta_own_tone.mp3",name:"Own Tone"},{file:"-Spring-field-(chosic.com).mp3",name:"Spring Field"}];M.useEffect(()=>($(),()=>{P&&P.pause()}),[]);const $=()=>{const Ce={...w};Ce.messageNotifications=localStorage.getItem("messageNotifications")!=="false",Ce.callNotifications=localStorage.getItem("callNotifications")!=="false",Ce.notificationSound=localStorage.getItem("notificationSound")!=="false",Ce.vibrate=localStorage.getItem("vibrate")!=="false",Ce.enterToSend=localStorage.getItem("enterToSend")==="true",Ce.readReceipts=localStorage.getItem("readReceipts")!=="false",Ce.lastSeen=localStorage.getItem("lastSeen")!=="false",Ce.showOnlineStatus=localStorage.getItem("showOnlineStatus")!=="false",Ce.allowEveryoneMessage=localStorage.getItem("allowEveryoneMessage")!=="false",Ce.profileVisible=localStorage.getItem("profileVisible")!=="false",Ce.callRingtone=localStorage.getItem("callRingtone")||"fm-freemusic-give-me-a-smile(chosic.com).mp3",A(Ce),Y(Ce.callRingtone),q()},q=async()=>{try{let Ce=0,Je=0;for(let Wt in localStorage)localStorage.hasOwnProperty(Wt)&&(Ce+=localStorage[Wt].length+Wt.length);const gt=Ce+Je;A(Wt=>({...Wt,storageUsage:{app:Ce,media:Je,total:gt}}))}catch(Ce){console.error("Error calculating storage:",Ce)}},ue=Ce=>{const Je=Ce/1024,gt=Je/1024;return gt>=1?`${gt.toFixed(2)} MB`:`${Je.toFixed(2)} KB`},fe=()=>{o(),alert(`${r==="dark"?"Light":"Dark"} mode enabled`)},ie=()=>{U(!0)},be=async Ce=>{await x(Ce),U(!1),alert(`Chat theme "${h[Ce].name}" applied`)},Re=Ce=>{const Je=!w[Ce];localStorage.setItem(Ce,Je.toString()),A(gt=>({...gt,[Ce]:Je}))},G=()=>{D(!0)},J=Ce=>{P&&(P.pause(),P.currentTime=0);const Je=new Audio(`${C}assets/audio/${Ce}`);Je.volume=.7,Je.play().catch(gt=>{console.log("Could not play ringtone:",gt),alert("Could not play ringtone")}),K(Je),setTimeout(()=>{P===Je&&(Je.pause(),Je.currentTime=0,K(null))},1e4)},oe=Ce=>{localStorage.setItem("callRingtone",Ce),A(Je=>({...Je,callRingtone:Ce})),Y(Ce),P&&(P.pause(),K(null)),D(!1),alert("Call ringtone updated")},ke=async()=>{if(confirm("This will clear all cached media files. Continue?"))try{alert("Clearing media storage..."),await q(),alert("Media storage cleared successfully")}catch(Ce){console.error("Error clearing media storage:",Ce),alert("Failed to clear media storage")}},Ve=async()=>{if(confirm("This will clear app cache and temporary data. Continue?"))try{alert("Clearing app storage..."),Object.keys(localStorage).forEach(Je=>{["currentUser","rememberMe","theme","messageNotifications","callNotifications","notificationSound","vibrate","enterToSend","readReceipts","lastSeen","mutedUsers","showOnlineStatus","allowEveryoneMessage","profileVisible"].includes(Je)||localStorage.removeItem(Je)}),await q(),alert("App storage cleared successfully")}catch(Ce){console.error("Error clearing app storage:",Ce),alert("Failed to clear app storage")}},Ke=async()=>{if(confirm("This will clear all cached data. Continue?"))try{alert("Clearing all cache..."),await ke(),await Ve(),alert("All cache cleared successfully")}catch(Ce){console.error("Error clearing cache:",Ce),alert("Failed to clear cache")}},ne=async()=>{if(confirm("Are you sure you want to delete your account? This action cannot be undone.")&&confirm("This will permanently delete all your messages, calls, and data. Continue?"))try{const Ce=localStorage.getItem("currentUser");if(!Ce){alert("No user session found"),a("/login");return}const Je=JSON.parse(Ce),{error:gt}=await t.from("users").delete().eq("id",Je.id);if(gt){console.error("Error deleting user data:",gt),alert("Failed to delete account");return}localStorage.clear(),alert("Account deleted successfully"),a("/login")}catch(Ce){console.error("Error deleting account:",Ce),alert("Failed to delete account")}},ye=()=>alert("Security settings coming soon"),Le=()=>a("/blocked"),Ue=()=>alert("Auto download settings coming soon"),Xe=()=>alert("Help center coming soon"),Ee=()=>alert("Contact support coming soon"),$e=()=>alert("Terms & Privacy coming soon"),De=()=>alert("You are using the latest version (1.0.0)");return l.jsxs("div",{className:"settings-screen",children:[l.jsxs("header",{className:"settings-header",children:[l.jsx("button",{className:"back-btn",onClick:()=>a(-1),children:l.jsx("i",{className:"fas fa-arrow-left"})}),l.jsx("h1",{children:"Settings"})]}),l.jsxs("div",{className:"settings-content",children:[l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{className:"section-title",children:"Account"}),l.jsxs("div",{className:"settings-item",onClick:()=>a("/profile"),children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-user"}),l.jsx("span",{className:"label",children:"Profile"})]}),l.jsx("i",{className:"fas fa-chevron-right"})]}),l.jsxs("div",{className:"settings-item",onClick:()=>T(!N),children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-lock"}),l.jsx("span",{className:"label",children:"Privacy"})]}),l.jsx("span",{className:"icon arrow",style:{transform:N?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:""})]}),N&&l.jsxs("div",{className:"privacy-options",children:[l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-eye"}),l.jsx("span",{className:"label",children:"Show Online Status"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.showOnlineStatus,onChange:()=>Re("showOnlineStatus")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-envelope"}),l.jsx("span",{className:"label",children:"Allow Everyone to Message"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.allowEveryoneMessage,onChange:()=>Re("allowEveryoneMessage")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-user"}),l.jsx("span",{className:"label",children:"Profile Visible to Everyone"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.profileVisible,onChange:()=>Re("profileVisible")}),l.jsx("span",{className:"toggle-slider"})]})]})]}),l.jsxs("div",{className:"settings-item",onClick:ye,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-shield-alt"}),l.jsx("span",{className:"label",children:"Security"})]}),l.jsx("span",{className:"icon arrow",children:""})]}),l.jsxs("div",{className:"settings-item",onClick:Le,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-ban"}),l.jsx("span",{className:"label",children:"Blocked Users"})]}),l.jsx("span",{className:"icon arrow",children:""})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{className:"section-title",children:"Appearance"}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-moon"}),l.jsx("span",{className:"label",children:"Dark Mode"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:r==="dark",onChange:fe}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item",onClick:fe,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-palette"}),l.jsx("span",{className:"label",children:"Theme"})]}),l.jsxs("div",{className:"item-right",children:[l.jsx("span",{className:"value",children:r==="dark"?"Dark":"Light"}),l.jsx("span",{className:"icon arrow",children:""})]})]}),l.jsxs("div",{className:"settings-item",onClick:ie,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-comments"}),l.jsx("span",{className:"label",children:"Chat Theme"})]}),l.jsxs("div",{className:"item-right",children:[l.jsx("span",{className:"value",children:b.name}),l.jsx("span",{className:"icon arrow",children:""})]})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{className:"section-title",children:"Notifications"}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-bell"}),l.jsx("span",{className:"label",children:"Message Notifications"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.messageNotifications,onChange:()=>Re("messageNotifications")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-phone"}),l.jsx("span",{className:"label",children:"Call Notifications"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.callNotifications,onChange:()=>Re("callNotifications")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-music"}),l.jsx("span",{className:"label",children:"Call Ringtone"})]}),l.jsxs("button",{className:"btn-primary",onClick:G,children:[l.jsx("i",{className:"fas fa-music"}),"Choose Ringtone"]})]}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-volume-up"}),l.jsx("span",{className:"label",children:"Notification Sound"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.notificationSound,onChange:()=>Re("notificationSound")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-mobile-alt"}),l.jsx("span",{className:"label",children:"Vibrate"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.vibrate,onChange:()=>Re("vibrate")}),l.jsx("span",{className:"toggle-slider"})]})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{className:"section-title",children:"Chat Settings"}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-keyboard"}),l.jsx("span",{className:"label",children:"Enter to Send"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.enterToSend,onChange:()=>Re("enterToSend")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-check"}),l.jsx("span",{className:"label",children:"Read Receipts"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.readReceipts,onChange:()=>Re("readReceipts")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-clock"}),l.jsx("span",{className:"label",children:"Last Seen"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:w.lastSeen,onChange:()=>Re("lastSeen")}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"settings-item",onClick:Ue,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-arrow-down"}),l.jsx("span",{className:"label",children:"Auto Download Media"})]}),l.jsx("span",{className:"icon arrow",children:""})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{className:"section-title",children:"Storage and Data"}),l.jsxs("div",{className:"settings-item",onClick:()=>I(!j),children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-save"}),l.jsx("span",{className:"label",children:"Storage Usage"})]}),l.jsxs("div",{className:"item-right",children:[l.jsx("span",{className:"value",children:ue(w.storageUsage.total)}),l.jsx("span",{className:"icon arrow",style:{transform:j?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:""})]})]}),j&&l.jsxs("div",{className:"storage-details",children:[l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-images"}),l.jsx("span",{className:"label",children:"Media Storage"})]}),l.jsxs("div",{className:"item-right",children:[l.jsx("span",{className:"value",children:ue(w.storageUsage.media)}),l.jsx("button",{className:"clear-btn",onClick:ke,children:l.jsx("i",{className:"fas fa-trash-alt"})})]})]}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-mobile-alt"}),l.jsx("span",{className:"label",children:"App Storage"})]}),l.jsxs("div",{className:"item-right",children:[l.jsx("span",{className:"value",children:ue(w.storageUsage.app)}),l.jsx("button",{className:"clear-btn",onClick:Ve,children:l.jsx("i",{className:"fas fa-trash-alt"})})]})]})]}),l.jsxs("div",{className:"settings-item",onClick:Ke,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-trash"}),l.jsx("span",{className:"label",children:"Clear All Cache"})]}),l.jsx("span",{className:"icon arrow",children:""})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{className:"section-title",children:"Help & Support"}),l.jsxs("div",{className:"settings-item",onClick:Xe,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-question"}),l.jsx("span",{className:"label",children:"Help Center"})]}),l.jsx("span",{className:"icon arrow",children:""})]}),l.jsxs("div",{className:"settings-item",onClick:Ee,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-envelope"}),l.jsx("span",{className:"label",children:"Contact Us"})]}),l.jsx("span",{className:"icon arrow",children:""})]}),l.jsxs("div",{className:"settings-item",onClick:$e,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-file"}),l.jsx("span",{className:"label",children:"Terms & Privacy Policy"})]}),l.jsx("span",{className:"icon arrow",children:""})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{className:"section-title",children:"About"}),l.jsxs("div",{className:"settings-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-info"}),l.jsx("span",{className:"label",children:"App Version"})]}),l.jsx("span",{className:"value",children:"1.0.0"})]}),l.jsxs("div",{className:"settings-item",onClick:De,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-sync"}),l.jsx("span",{className:"label",children:"Check for Updates"})]}),l.jsx("span",{className:"icon arrow",children:""})]})]}),l.jsx("div",{className:"settings-section danger-section",children:l.jsxs("div",{className:"settings-item danger",onClick:ne,children:[l.jsxs("div",{className:"item-left",children:[l.jsx("i",{className:"fas fa-exclamation-triangle"}),l.jsx("span",{className:"label",children:"Delete Account"})]}),l.jsx("span",{className:"icon arrow",children:""})]})})]}),k&&l.jsx("div",{className:"modal",style:{display:"flex"},children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Choose Call Ringtone"}),l.jsx("button",{className:"close-modal",onClick:()=>D(!1),children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsx("div",{className:"modal-body",children:l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:V.map(Ce=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",border:"1px solid #ddd",borderRadius:"8px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[l.jsx("i",{className:"fas fa-music"}),l.jsx("span",{children:Ce.name})]}),l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx("button",{onClick:()=>J(Ce.file),style:{padding:"5px 10px",border:"none",borderRadius:"4px",background:"#007bff",color:"white",cursor:"pointer"},children:l.jsx("i",{className:"fas fa-play"})}),l.jsx("button",{onClick:()=>oe(Ce.file),style:{padding:"5px 10px",border:"none",borderRadius:"4px",background:"#28a745",color:"white",cursor:"pointer"},children:"Confirm"})]})]},Ce.file))})})]})}),H&&l.jsx("div",{className:"modal",style:{display:"flex"},children:l.jsxs("div",{className:"modal-content",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Choose Chat Theme"}),l.jsx("button",{className:"close-modal",onClick:()=>U(!1),children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsx("div",{className:"modal-body",children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},children:Object.entries(h).map(([Ce,Je])=>l.jsxs("div",{className:`theme-item ${d===Ce?"active":""}`,onClick:()=>be(Ce),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s",border:d===Ce?"3px solid var(--primary-color)":"1px solid #ddd",height:"80px"},children:[l.jsx("div",{style:{width:"100%",height:"60%",background:Je.background,backgroundSize:"cover",backgroundPosition:"center"}}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 8px",height:"40%"},children:[l.jsx("div",{style:{width:"35px",height:"8px",borderRadius:"4px",background:Je.sentMessage.background}}),l.jsx("div",{style:{width:"35px",height:"8px",borderRadius:"4px",background:Je.receivedMessage.background}})]}),l.jsx("div",{style:{position:"absolute",bottom:"5px",left:"8px",right:"8px",fontSize:"0.7rem",fontWeight:"500",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.5)",textAlign:"center"},children:Je.name})]},Ce))})})]})}),l.jsx(xd,{})]})},r4=()=>{const{supabase:a}=fs(),[t,r]=M.useState(null),[o,d]=M.useState([]),[h,x]=M.useState([]),[b,C]=M.useState(!0),[w,A]=M.useState(null);M.useEffect(()=>{N()},[]);const N=async()=>{try{const U=localStorage.getItem("currentUser");if(!U){A("No user logged in"),C(!1);return}let P;try{if(P=JSON.parse(U),!P||!P.id){A("Invalid user data"),C(!1);return}}catch{A("Invalid user data"),C(!1);return}r(P),await T(P),await j(P),C(!1)}catch(U){console.error("Error initializing news:",U),A("Failed to load news"),C(!1)}},T=async U=>{try{const{data:P,error:K}=await a.from("statuses").select("*").eq("user_id",U.id).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(K)throw K;d(P||[])}catch(P){console.error("Error loading my status:",P)}},j=async U=>{try{const P=`digidad_statuses_${U.id}`;let K=null;try{const q=localStorage.getItem(P);q&&(K=JSON.parse(q),x(K))}catch(q){console.warn("Error loading cached statuses:",q)}const{data:Z,error:Y}=await a.from("statuses").select(`
          *,
          user:users(*)
        `).neq("user_id",U.id).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(Y)throw Y;const V={};Z&&Z.length>0&&Z.forEach(q=>{V[q.user_id]||(V[q.user_id]={user:q.user,statuses:[]}),V[q.user_id].statuses.push(q)});const $=Object.values(V);try{localStorage.setItem(P,JSON.stringify($))}catch(q){console.warn("Error caching statuses:",q)}x($)}catch(P){console.error("Error loading recent statuses:",P),h.length||A("Failed to load recent updates")}},I=U=>U?U.split(" ").map(P=>P[0]).join("").toUpperCase().slice(0,2):"U",k=U=>{try{const P=new Date(U);if(isNaN(P.getTime()))return"now";const Z=new Date-P,Y=Math.floor(Z/6e4),V=Math.floor(Z/36e5),$=Math.floor(Z/864e5);return Y<1?"now":Y<60?`${Y}m`:V<24?`${V}h`:`${$}d`}catch{return"now"}},D=()=>{alert("Status feature coming soon")},H=(U,P)=>{alert(`Viewing ${U.name}'s status`)};return b?l.jsxs("div",{className:"news-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading news..."})]}):w?l.jsxs("div",{className:"news-error",children:[l.jsxs("p",{children:[l.jsx(pd,{size:16})," ",w]}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):l.jsxs("div",{className:"news-container",children:[l.jsx("header",{className:"news-header",children:l.jsxs("h1",{children:[l.jsx("i",{className:"fas fa-newspaper"})," Latest News Feed"]})}),l.jsx("div",{className:"my-status-section",children:l.jsxs("div",{className:"my-status",onClick:o.length>0?()=>H(t):void 0,children:[l.jsx("div",{className:"status-avatar",children:l.jsx("div",{className:"avatar-circle",children:t?.avatar?l.jsx("img",{src:t.avatar,alt:t?.name||"User"}):I(t?.name||"User")})}),l.jsxs("div",{className:"status-info",children:[l.jsx("h3",{children:"My Status"}),l.jsx("p",{children:o.length>0?`${o.length} update${o.length>1?"s":""}`:"Tap to add status"})]}),l.jsx("button",{className:"add-status-btn",onClick:D,children:l.jsx("i",{className:"fas fa-plus"})})]})}),l.jsxs("div",{className:"recent-statuses-section",children:[l.jsx("h2",{children:"Recent Updates"}),l.jsx("div",{className:"recent-status-list",children:h.length>0?h.filter(({user:U,statuses:P})=>U&&P&&P.length>0).map(({user:U,statuses:P})=>l.jsxs("div",{className:"status-item",onClick:()=>H(U),children:[l.jsx("div",{className:"status-avatar",children:l.jsx("div",{className:"avatar-circle",children:U.avatar?l.jsx("img",{src:U.avatar,alt:U.name||"User"}):I(U.name||"User")})}),l.jsxs("div",{className:"status-info",children:[l.jsx("h3",{children:U.name||"User"}),l.jsx("p",{children:P[0]?.created_at?k(P[0].created_at):"now"})]})]},U.id)):l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"No recent updates"}),l.jsx("small",{children:"Check back later"})]})})]}),l.jsx(xd,{})]})},a4=()=>{const{supabase:a}=fs(),{theme:t}=al(),[r,o]=M.useState(null),[d,h]=M.useState([]),[x,b]=M.useState(!0),[C,w]=M.useState(null),[A,N]=M.useState("all"),[T,j]=M.useState("upcoming");M.useEffect(()=>{I()},[]);const I=async()=>{try{const G=localStorage.getItem("currentUser");if(!G){w("No user logged in"),b(!1);return}const J=JSON.parse(G);o(J),await k(J),b(!1)}catch(G){console.error("Error initializing reminders:",G),w("Failed to load reminders"),b(!1)}},k=async G=>{try{let J=a.from("reminders").select(`
          *,
          sender:users!reminders_sender_id_fkey(id, name, avatar, phone),
          receiver:users!reminders_receiver_id_fkey(id, name, avatar, phone)
        `);A==="sent"?J=J.eq("sender_id",G.id):A==="received"?J=J.eq("receiver_id",G.id):A==="pending"?J=J.eq("receiver_id",G.id).eq("status","pending"):A==="accepted"?J=J.eq("status","accepted"):J=J.or(`sender_id.eq.${G.id},receiver_id.eq.${G.id}`);const{data:oe,error:ke}=await J.order("reminder_time",{ascending:!0});if(ke)throw ke;h(oe||[])}catch(J){console.error("Error loading reminders:",J),w("Failed to load reminders")}},D=G=>{N(G),r&&k(r)},H=G=>{j(G)},U=async G=>{try{const{error:J}=await a.from("reminders").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("id",G);if(J)throw J;alert("Reminder accepted"),k(r)}catch(J){console.error("Error accepting reminder:",J),alert("Failed to accept reminder")}},P=async G=>{try{const{error:J}=await a.from("reminders").update({status:"rejected"}).eq("id",G);if(J)throw J;alert("Reminder rejected"),k(r)}catch(J){console.error("Error rejecting reminder:",J),alert("Failed to reject reminder")}},K=async G=>{try{const{error:J}=await a.from("reminders").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",G);if(J)throw J;alert("Reminder completed"),k(r)}catch(J){console.error("Error completing reminder:",J),alert("Failed to complete reminder")}},Z=async G=>{const J=parseInt(prompt("Snooze for how many minutes?","10"));if(!(!J||J<1))try{const oe=new Date;oe.setMinutes(oe.getMinutes()+J);const{error:ke}=await a.from("reminders").update({status:"snoozed",snooze_until:oe.toISOString(),snooze_count:a.sql`snooze_count + 1`}).eq("id",G);if(ke)throw ke;alert(`Snoozed for ${J} minutes`),k(r)}catch(oe){console.error("Error snoozing reminder:",oe),alert("Failed to snooze reminder")}},Y=G=>{const J=new Date,oe=G-J,ke=Math.floor(oe/(1e3*60*60*24)),Ve=G.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:G.getFullYear()!==J.getFullYear()?"numeric":void 0}),Ke=G.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return ke===0?`Today, ${Ke}`:ke===1?`Tomorrow, ${Ke}`:ke===-1?`Yesterday, ${Ke}`:ke>0&&ke<7?`${G.toLocaleDateString("en-IN",{weekday:"long"})}, ${Ke}`:`${Ve}, ${Ke}`},V=G=>({pending:"fa-clock",accepted:"fa-check",rejected:"fa-times",completed:"fa-check-circle",snoozed:"fa-hourglass-half",cancelled:"fa-ban"})[G]||"fa-circle",$=G=>({general:"fa-bell",medicine:"fa-pills",meeting:"fa-users",appointment:"fa-calendar-check",birthday:"fa-birthday-cake",task:"fa-tasks",other:"fa-ellipsis-h"})[G]||"fa-bell",q=G=>G.split(" ").map(J=>J[0]).join("").toUpperCase().slice(0,2),ue=new Date,fe=d.filter(G=>new Date(G.reminder_time)>ue&&!["completed","cancelled"].includes(G.status)),ie=d.filter(G=>new Date(G.reminder_time)<=ue||["completed","cancelled"].includes(G.status)),be=d.filter(G=>G.is_recurring),Re=()=>{switch(T){case"upcoming":return fe;case"past":return ie;case"recurring":return be;default:return fe}};return x?l.jsxs("div",{className:"reminders-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading reminders..."})]}):C?l.jsxs("div",{className:"reminders-error",children:[l.jsxs("p",{children:[l.jsx(pd,{size:16})," ",C]}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):l.jsxs("div",{className:"reminders-container",children:[l.jsxs("header",{className:"app-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("button",{className:"back-btn",onClick:()=>window.history.back(),children:l.jsx("i",{className:"fas fa-arrow-left"})})}),l.jsx("div",{className:"header-center",children:l.jsx("h1",{children:"Reminders"})}),l.jsxs("div",{className:"header-right",children:[l.jsx("button",{className:"icon-btn",onClick:()=>alert("Create reminder"),children:l.jsx("i",{className:"fas fa-plus"})}),l.jsx("button",{className:"icon-btn",onClick:()=>alert("Settings"),children:l.jsx("i",{className:"fas fa-cog"})})]})]}),l.jsx("div",{className:"filter-chips",children:["all","pending","accepted","sent","received"].map(G=>l.jsxs("button",{className:`chip ${A===G?"active":""}`,onClick:()=>D(G),children:[l.jsx("i",{className:`fas fa-${G==="all"?"list":G==="pending"?"clock":G==="accepted"?"check":G==="sent"?"paper-plane":"inbox"}`}),G.charAt(0).toUpperCase()+G.slice(1)]},G))}),l.jsx("div",{className:"tabs",children:["upcoming","past","recurring"].map(G=>l.jsx("button",{className:`tab ${T===G?"active":""}`,onClick:()=>H(G),children:G.charAt(0).toUpperCase()+G.slice(1)},G))}),l.jsx("main",{className:"reminders-list",children:Re().length>0?Re().map(G=>{const J=G.sender_id===r.id,oe=J?G.receiver:G.sender,ke=new Date(G.reminder_time),Ve=!J&&G.status==="pending",Ke=G.status==="accepted",ne=G.status==="accepted";return l.jsxs("div",{className:`reminder-card priority-${G.priority}`,children:[l.jsxs("div",{className:"reminder-header",children:[l.jsxs("div",{children:[l.jsx("div",{className:"reminder-title",children:G.title}),l.jsxs("div",{className:"reminder-user",children:[l.jsx("div",{className:"avatar-placeholder",children:oe.avatar?l.jsx("img",{src:oe.avatar,alt:oe.name}):q(oe.name)}),l.jsx("i",{className:`fas fa-${J?"paper-plane":"inbox"}`}),J?"To":"From",": ",oe.name]})]}),l.jsxs("span",{className:`reminder-status status-${G.status}`,children:[l.jsx("i",{className:`fas ${V(G.status)}`}),G.status]})]}),l.jsxs("div",{className:"reminder-details",children:[l.jsxs("div",{className:"reminder-time",children:[l.jsx("i",{className:"fas fa-clock"}),Y(ke)]}),G.location&&l.jsxs("div",{className:"reminder-location",children:[l.jsx("i",{className:"fas fa-map-marker-alt"}),G.location]}),G.description&&l.jsx("div",{className:"reminder-description",children:G.description})]}),l.jsxs("div",{className:"reminder-meta",children:[l.jsxs("span",{className:`reminder-category category-${G.category}`,children:[l.jsx("i",{className:`fas ${$(G.category)}`}),G.category]}),G.is_recurring&&l.jsxs("span",{className:"reminder-category",children:[l.jsx("i",{className:"fas fa-redo"}),G.recurring_type]})]}),(Ve||Ke||ne)&&l.jsxs("div",{className:"reminder-actions",children:[Ve&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"btn-action btn-accept",onClick:()=>U(G.id),children:[l.jsx("i",{className:"fas fa-check"}),"Accept"]}),l.jsxs("button",{className:"btn-action btn-reject",onClick:()=>P(G.id),children:[l.jsx("i",{className:"fas fa-times"}),"Reject"]})]}),Ke&&l.jsxs("button",{className:"btn-action btn-complete",onClick:()=>K(G.id),children:[l.jsx("i",{className:"fas fa-check-circle"}),"Complete"]}),ne&&l.jsxs("button",{className:"btn-action btn-snooze",onClick:()=>Z(G.id),children:[l.jsx("i",{className:"fas fa-clock"}),"Snooze"]})]})]},G.id)}):l.jsxs("div",{className:"empty-state",children:[l.jsx("i",{className:"fas fa-bell-slash"}),l.jsx("h3",{children:"No Reminders"}),l.jsx("p",{children:"You don't have any reminders in this category"}),l.jsxs("button",{className:"btn-primary",onClick:()=>alert("Create reminder"),children:[l.jsx("i",{className:"fas fa-plus"})," Create Reminder"]})]})}),l.jsx("button",{className:"fab",onClick:()=>alert("Create reminder"),children:l.jsx("i",{className:"fas fa-plus"})})]})},i4=({onBack:a})=>{const[t,r]=M.useState(null),[o,d]=M.useState(null),[h,x]=M.useState([]),[b,C]=M.useState({title:"",description:"",date:"",time:"",location:"",category:"general",priority:"medium",isRecurring:!1,recurringType:"daily",soundEnabled:!0,vibrationEnabled:!0}),[w,A]=M.useState(!1);M.useEffect(()=>{N()},[]);const N=async()=>{try{const D=localStorage.getItem("currentUser");if(!D){alert("No user logged in");return}const H=JSON.parse(D);r(H),await T(H)}catch(D){console.error("Error initializing create reminder:",D)}},T=async D=>{try{const{data:H,error:U}=await wt.from("contacts").select(`
          *,
          contact_user:users!contacts_contact_user_id_fkey(*)
        `).eq("user_id",D.id);if(U)throw U;const P=H.map(Z=>Z.contact_user),{data:K}=await wt.from("chats").select(`
          user1:users!chats_user1_id_fkey(*),
          user2:users!chats_user2_id_fkey(*)
        `).or(`user1_id.eq.${D.id},user2_id.eq.${D.id}`);K&&K.forEach(Z=>{const Y=Z.user1.id===D.id?Z.user2:Z.user1;P.find(V=>V.id===Y.id)||P.push(Y)}),x(P)}catch(H){console.error("Error loading contacts:",H)}},j=(D,H)=>{C(U=>({...U,[D]:H}))},I=async D=>{if(D.preventDefault(),!o){alert("Please select a recipient");return}if(!b.title.trim()){alert("Please enter a title");return}if(!b.date||!b.time){alert("Please select date and time");return}const H=new Date(`${b.date}T${b.time}`);if(H<new Date){alert("Reminder time cannot be in the past");return}A(!0);try{const U={sender_id:t.id,receiver_id:o.id,title:b.title.trim(),description:b.description.trim()||null,reminder_time:H.toISOString(),location:b.location.trim()||null,category:b.category,priority:b.priority,sound_enabled:b.soundEnabled,vibration_enabled:b.vibrationEnabled,is_recurring:b.isRecurring,status:"pending",requires_acceptance:!0};b.isRecurring&&(U.recurring_type=b.recurringType);const{data:P,error:K}=await wt.from("reminders").insert(U).select().single();if(K)throw K;alert("Reminder created successfully"),a&&a()}catch(U){console.error("Error creating reminder:",U),alert("Failed to create reminder")}finally{A(!1)}},k=D=>D.split(" ").map(H=>H[0]).join("").toUpperCase().slice(0,2);return t?l.jsxs("div",{className:"create-reminder-container",children:[l.jsxs("header",{className:"app-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("button",{className:"back-btn",onClick:a,children:l.jsx("i",{className:"fas fa-arrow-left"})})}),l.jsx("div",{className:"header-center",children:l.jsx("h1",{children:"Create Reminder"})}),l.jsx("div",{className:"header-right",children:l.jsx("button",{className:"icon-btn",onClick:I,disabled:w,children:l.jsx("i",{className:"fas fa-check"})})})]}),l.jsxs("form",{onSubmit:I,className:"reminder-form",children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("i",{className:"fas fa-user"}),"Remind To *"]}),l.jsxs("div",{className:"recipient-selector",onClick:()=>alert("Select contact - feature not implemented"),children:[l.jsx("div",{className:"selected-recipient",children:o?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"avatar-placeholder",children:o.avatar?l.jsx("img",{src:o.avatar,alt:o.name}):k(o.name)}),l.jsx("span",{children:o.name})]}):l.jsxs(l.Fragment,{children:[l.jsx("i",{className:"fas fa-user-plus"}),l.jsx("span",{children:"Select Contact"})]})}),l.jsx("i",{className:"fas fa-chevron-right"})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("i",{className:"fas fa-heading"}),"Title *"]}),l.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Take Medicine, Meeting with Dr.",value:b.title,onChange:D=>j("title",D.target.value),required:!0})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("i",{className:"fas fa-align-left"}),"Description (Optional)"]}),l.jsx("textarea",{className:"form-textarea",placeholder:"Add additional details...",rows:"3",value:b.description,onChange:D=>j("description",D.target.value)})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("i",{className:"fas fa-calendar-alt"}),"Date & Time *"]}),l.jsxs("div",{className:"datetime-group",children:[l.jsx("input",{type:"date",className:"form-input",value:b.date,onChange:D=>j("date",D.target.value),required:!0}),l.jsx("input",{type:"time",className:"form-input",value:b.time,onChange:D=>j("time",D.target.value),required:!0})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("i",{className:"fas fa-map-marker-alt"}),"Location (Optional)"]}),l.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Home, Office, Hospital",value:b.location,onChange:D=>j("location",D.target.value)})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("i",{className:"fas fa-tag"}),"Category"]}),l.jsxs("select",{className:"form-select",value:b.category,onChange:D=>j("category",D.target.value),children:[l.jsx("option",{value:"general",children:"General"}),l.jsx("option",{value:"medicine",children:"Medicine"}),l.jsx("option",{value:"meeting",children:"Meeting"}),l.jsx("option",{value:"appointment",children:"Appointment"}),l.jsx("option",{value:"birthday",children:"Birthday"}),l.jsx("option",{value:"task",children:"Task"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label",children:[l.jsx("i",{className:"fas fa-flag"}),"Priority"]}),l.jsx("div",{className:"priority-selector",children:["low","medium","high","urgent"].map(D=>l.jsxs("button",{type:"button",className:`priority-btn ${b.priority===D?"active":""}`,onClick:()=>j("priority",D),children:[l.jsx("i",{className:"fas fa-flag"})," ",D.charAt(0).toUpperCase()+D.slice(1)]},D))})]}),l.jsxs("div",{className:"form-section",children:[l.jsxs("label",{className:"form-label toggle-label",children:[l.jsxs("span",{children:[l.jsx("i",{className:"fas fa-redo"}),"Recurring Reminder"]}),l.jsxs("label",{className:"toggle",children:[l.jsx("input",{type:"checkbox",checked:b.isRecurring,onChange:D=>j("isRecurring",D.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]}),b.isRecurring&&l.jsx("div",{className:"recurring-options",children:l.jsxs("select",{className:"form-select",value:b.recurringType,onChange:D=>j("recurringType",D.target.value),children:[l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"monthly",children:"Monthly"}),l.jsx("option",{value:"yearly",children:"Yearly"})]})})]}),l.jsx("div",{className:"form-section",children:l.jsxs("label",{className:"form-label toggle-label",children:[l.jsxs("span",{children:[l.jsx("i",{className:"fas fa-volume-up"}),"Sound"]}),l.jsxs("label",{className:"toggle",children:[l.jsx("input",{type:"checkbox",checked:b.soundEnabled,onChange:D=>j("soundEnabled",D.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]})}),l.jsx("div",{className:"form-section",children:l.jsxs("label",{className:"form-label toggle-label",children:[l.jsxs("span",{children:[l.jsx("i",{className:"fas fa-mobile-alt"}),"Vibration"]}),l.jsxs("label",{className:"toggle",children:[l.jsx("input",{type:"checkbox",checked:b.vibrationEnabled,onChange:D=>j("vibrationEnabled",D.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]})}),l.jsxs("button",{type:"submit",className:"btn-submit",disabled:w,children:[l.jsx("i",{className:"fas fa-bell"}),w?"Creating...":"Create Reminder"]})]})]}):l.jsx("div",{children:"Loading..."})};function o4(a){const[t,r]=M.useState([]),[o,d]=M.useState(!0),[h,x]=M.useState(null),[b,C]=M.useState(0),w=M.useCallback(async()=>{if(a)try{d(!0);const N=await us.getCallHistory(a);r(N||[])}catch(N){x(N.message)}finally{d(!1)}},[a]),A=M.useCallback(async()=>{if(a)try{const N=await us.getMissedCallsCount(a);C(N||0)}catch(N){console.error("Error fetching missed count:",N)}},[a]);return M.useEffect(()=>{w(),A()},[w,A]),{history:t,loading:o,error:h,missedCount:b,refetch:w}}function l4({userId:a,userAvatar:t,userName:r}){const{history:o,loading:d,error:h,missedCount:x}=o4(a),{startCall:b,callState:C}=yi(),w=N=>{const T=new Date(N),I=Math.floor((new Date-T)/(1e3*60*60*24));return I===0?T.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):I===1?"Yesterday":I<7?T.toLocaleDateString([],{weekday:"short"}):T.toLocaleDateString([],{month:"short",day:"numeric"})},A=async(N,T)=>{if(C!=="idle"){console.log("Already in a call");return}try{await b(N,T)}catch(j){console.error("Failed to start call:",j)}};return d?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"})}):h?l.jsx("div",{className:"text-center p-8 text-red-500",children:"Error loading call history"}):l.jsx("div",{className:"call-history-wrapper",children:l.jsxs("div",{className:"call-history-card",children:[l.jsxs("div",{className:"call-history-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("h2",{className:"call-history-title",children:"Call History"}),x>0&&l.jsxs("span",{className:"missed-calls-badge",children:[x," missed"]})]}),t&&l.jsx("div",{className:"user-avatar-header",children:l.jsx("div",{className:"avatar-circle",children:t?parseInt(t)?l.jsx("img",{src:ks.find(N=>N.id===parseInt(t))?.path||t,alt:r||"User"}):l.jsx("img",{src:t,alt:r||"User"}):r?.charAt(0)||"?"})})]}),l.jsx("div",{children:o.length>0?o.map(N=>l.jsxs("div",{className:"call-item",children:[l.jsx("div",{className:"call-avatar",children:N.other_user_avatar?parseInt(N.other_user_avatar)?l.jsx("img",{src:ks.find(T=>T.id===parseInt(N.other_user_avatar))?.path||N.other_user_avatar,alt:N.other_user_name}):l.jsx("img",{src:N.other_user_avatar,alt:N.other_user_name}):N.other_user_name?.charAt(0)||"?"}),l.jsxs("div",{className:"call-details",children:[l.jsx("h3",{className:"call-name",children:N.other_user_name||"Unknown"}),l.jsxs("div",{className:"call-status-row",children:[N.call_status==="missed"?l.jsx(WE,{size:14,className:"status-icon missed"}):N.caller_id===a?l.jsx($E,{size:14,className:"status-icon outgoing"}):l.jsx(XE,{size:14,className:"status-icon incoming"}),l.jsx("span",{className:"call-time-text",children:w(N.started_at)})]})]}),l.jsx("button",{className:"call-action-btn",onClick:()=>A(N.other_user_id,N.call_type),disabled:C!=="idle",children:N.call_type==="video"?l.jsx(wi,{size:22}):l.jsx(Gs,{size:22})})]},N.id)):l.jsxs("div",{className:"empty-state",children:[l.jsx(Gs,{size:48}),l.jsx("h3",{children:"No call history"}),l.jsx("p",{children:"Your calls will appear here"})]})})]})})}function gy({receiverId:a,callType:t="video",size:r="md"}){const{startCall:o,callState:d}=yi(),h=async()=>{if(d!=="idle"){console.log("Already in a call");return}try{await o(a,t)}catch(C){console.error("Failed to start call:",C)}},x={sm:"w-10 h-10",md:"w-12 h-12",lg:"w-14 h-14"},b={sm:18,md:22,lg:26};return l.jsx("button",{onClick:h,disabled:d!=="idle",className:`${x[r]} rounded-full flex items-center justify-center transition-all ${t==="video"?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:t==="video"?l.jsx(wi,{size:b[r],className:"text-white"}):l.jsx(Gs,{size:b[r],className:"text-white"})})}function uw(){const a=hs(),{callState:t,incomingCall:r,callerInfo:o,answerCall:d,rejectCall:h}=yi(),x=M.useRef(null),b=M.useRef(!1);if(t!=="ringing"||!r)return null;const C=r.signal_data?.callType==="video",w=()=>{if(!b.current&&x.current){b.current=!0;try{const N=new(window.AudioContext||window.webkitAudioContext),T=N.createOscillator(),j=N.createGain();T.connect(j),j.connect(N.destination),T.frequency.setValueAtTime(800,N.currentTime),T.frequency.setValueAtTime(600,N.currentTime+.1),j.gain.setValueAtTime(.3,N.currentTime),j.gain.exponentialRampToValueAtTime(.01,N.currentTime+.3),T.start(N.currentTime),T.stop(N.currentTime+.3);const I=setInterval(()=>{if(t==="ringing"){const k=N.createOscillator(),D=N.createGain();k.connect(D),D.connect(N.destination),k.frequency.setValueAtTime(800,N.currentTime),k.frequency.setValueAtTime(600,N.currentTime+.1),D.gain.setValueAtTime(.3,N.currentTime),D.gain.exponentialRampToValueAtTime(.01,N.currentTime+.3),k.start(N.currentTime),k.stop(N.currentTime+.3)}else clearInterval(I)},2e3);return()=>clearInterval(I)}catch(N){console.warn("Could not play ringtone:",N),"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200])}}},A=async N=>{if(w(),N===d)try{await N(),a(`/call/${r.call_id}`)}catch(T){console.error("Error answering call:",T)}else N()};return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 text-center max-w-sm w-full mx-4 shadow-2xl",children:[l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"w-32 h-32 mx-auto rounded-full overflow-hidden ring-4 ring-green-500 animate-pulse",children:o?.avatar?l.jsx("img",{src:o.avatar,alt:o.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-4xl font-bold text-white",children:o?.name?.charAt(0)||"?"})}),l.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-green-500 px-4 py-1 rounded-full",children:l.jsxs("span",{className:"text-white text-sm font-medium flex items-center gap-1",children:[C?l.jsx(wi,{size:14}):l.jsx(Gs,{size:14}),C?"Video Call":"Voice Call"]})})]}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:o?.name||"Unknown Caller"}),l.jsx("p",{className:"text-gray-400 mb-8",children:o?.phone||"Incoming call..."}),l.jsxs("div",{className:"flex justify-center gap-8",children:[l.jsx("button",{onClick:()=>A(h),className:"w-16 h-16 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-all hover:scale-110 shadow-lg shadow-red-500/30",children:l.jsx(s1,{className:"w-7 h-7 text-white"})}),l.jsx("button",{onClick:()=>A(d),className:"w-16 h-16 rounded-full bg-green-500 hover:bg-green-600 flex items-center justify-center transition-all hover:scale-110 shadow-lg shadow-green-500/30 animate-bounce",children:l.jsx(Gs,{className:"w-7 h-7 text-white"})})]}),l.jsx("p",{className:"text-gray-500 text-sm mt-6",children:"Tap to answer or reject"})]})})}const c4=()=>{hs();const{theme:a}=al(),{startCall:t,answerCall:r}=yi(),[o,d]=M.useState(null),[h,x]=M.useState([]),[b,C]=M.useState([]),[w,A]=M.useState(""),[N,T]=M.useState(!0),[j,I]=M.useState(null);M.useEffect(()=>{k(),U()},[]);const k=async()=>{try{const Z=localStorage.getItem("currentUser");if(!Z){alert("No user logged in"),T(!1);return}const Y=JSON.parse(Z);if(!Y.avatar)Y.avatar=Math.floor(Math.random()*46)+1;else if(typeof Y.avatar=="string"&&!Y.avatar.startsWith("http")){const V=parseInt(Y.avatar);isNaN(V)&&(Y.avatar=Math.floor(Math.random()*46)+1)}d(Y),await Promise.all([D(Y),H(Y)]),T(!1)}catch(Z){console.error("Error initializing calls:",Z),T(!1)}},D=async Z=>{try{const{data:Y,error:V}=await wt.from("contacts").select("contact_user_id").eq("user_id",Z.id);if(V)throw V;let $=[];if(Y&&Y.length>0){const ue=Y.map(fe=>fe.contact_user_id).filter(fe=>fe);if(ue.length>0){const{data:fe,error:ie}=await wt.from("users").select("*").in("id",ue);!ie&&fe&&($=fe)}}const{data:q}=await wt.from("chats").select(`
          user1:users!chats_user1_id_fkey(*),
          user2:users!chats_user2_id_fkey(*)
        `).or(`user1_id.eq.${Z.id},user2_id.eq.${Z.id}`);q&&q.forEach(ue=>{const fe=ue.user1.id===Z.id?ue.user2:ue.user1;fe&&fe.id&&!$.find(ie=>ie.id===fe.id)&&$.push(fe)}),x($)}catch(Y){console.error("Error loading contacts:",Y)}},H=async Z=>{try{const{data:Y,error:V}=await wt.from("call_history").select(`
          *,
          caller:users!call_history_caller_id_fkey(name, avatar),
          receiver:users!call_history_receiver_id_fkey(name, avatar)
        `).or(`caller_id.eq.${Z.id},receiver_id.eq.${Z.id}`).order("created_at",{ascending:!1}).limit(50);if(V)throw V;const $=Y.map(q=>({...q,otherUser:q.caller_id===Z.id?q.receiver:q.caller})).filter(q=>q.otherUser&&q.otherUser.id);C($)}catch(Y){console.error("Error loading call history:",Y)}},U=async()=>{const Z=localStorage.getItem("pendingCall");if(Z)try{const V=JSON.parse(Z);localStorage.removeItem("pendingCall"),await t(V.contact.id,V.type)}catch(V){console.error("Error parsing pending call:",V)}const Y=localStorage.getItem("pendingIncomingCall");if(Y)try{const V=JSON.parse(Y);localStorage.removeItem("pendingIncomingCall"),setActiveCall(V)}catch(V){console.error("Error parsing pending incoming call:",V)}},P=h.filter(Z=>{if(!Z||!Z.id)return!1;if(!w)return!0;const Y=w.toLowerCase();return Z.name.toLowerCase().includes(Y)||Z.phone&&Z.phone.includes(Y)}),K=Z=>Z.split(" ").map(Y=>Y[0]).join("").toUpperCase().slice(0,2);return N?l.jsxs("div",{className:"calls-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading contacts..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"calls-container",children:[l.jsxs("header",{className:"app-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("button",{className:"back-btn",onClick:()=>window.history.back(),children:l.jsx("i",{className:"fas fa-arrow-left"})})}),l.jsx("div",{className:"header-center",children:l.jsx("h1",{children:"Calls"})}),l.jsx("div",{className:"header-right"})]}),l.jsx("div",{className:"search-container",children:l.jsxs("div",{className:"search-box",children:[l.jsx("i",{className:"fas fa-search"}),l.jsx("input",{type:"text",placeholder:"Search contacts...",value:w,onChange:Z=>A(Z.target.value)})]})}),l.jsx("div",{className:"call-history-section",children:l.jsx(l4,{userId:o?.id,userAvatar:o?.avatar,userName:o?.name})}),l.jsxs("div",{className:"contacts-section",children:[l.jsx("h3",{children:"Contacts"}),l.jsx("div",{className:"contacts-list",children:P.length>0?P.map(Z=>l.jsxs("div",{className:"contact-item",children:[l.jsxs("div",{className:"contact-avatar",children:[l.jsx("div",{className:"avatar-circle",children:Z.avatar?parseInt(Z.avatar)?l.jsx("img",{src:ks.find(Y=>Y.id===parseInt(Z.avatar))?.path||Z.avatar,alt:Z.name}):l.jsx("img",{src:Z.avatar,alt:Z.name}):K(Z.name)}),l.jsx("span",{className:`online-status ${Z.is_online?"online":""}`})]}),l.jsxs("div",{className:"contact-info",children:[l.jsx("h4",{children:Z.name}),l.jsx("p",{children:Z.phone||"No phone"})]}),l.jsxs("div",{className:"call-buttons",children:[l.jsx(gy,{receiverId:Z.id,callType:"voice",size:"md"}),l.jsx(gy,{receiverId:Z.id,callType:"video",size:"md"})]})]},Z.id)):l.jsxs("div",{className:"empty-state",children:[l.jsx("i",{className:"fas fa-user-slash"}),l.jsx("h3",{children:"No contacts found"}),l.jsx("p",{children:"Add contacts to start making calls"})]})})]})]}),l.jsx(uw,{}),l.jsx(xd,{})]})},u4=({onBack:a})=>{const[t,r]=M.useState(null),[o,d]=M.useState([]),[h,x]=M.useState(!0),[b,C]=M.useState(null);M.useEffect(()=>{w()},[]);const w=async()=>{try{const I=localStorage.getItem("currentUser");if(!I){alert("No user logged in"),x(!1);return}const k=JSON.parse(I);r(k),await A(k),x(!1)}catch(I){console.error("Error initializing blocked:",I),x(!1)}},A=async I=>{try{const{data:k,error:D}=await wt.from("blocked_users").select(`
          id,
          blocked_id,
          created_at,
          users!blocked_users_blocked_id_fkey (
            id,
            name,
            phone,
            avatar,
            about
          )
        `).eq("blocker_id",I.id).order("created_at",{ascending:!1});if(D)throw D;d(k||[])}catch(k){console.error("Error loading blocked users:",k),alert("Failed to load blocked users")}},N=(I,k)=>{C({blockId:I,userName:k})},T=async()=>{if(b)try{const{error:I}=await wt.from("blocked_users").delete().eq("id",b.blockId);if(I)throw I;C(null),await A(t),alert("User unblocked successfully")}catch(I){console.error("Error unblocking user:",I),alert("Failed to unblock user")}},j=I=>I.split(" ").map(k=>k[0]).join("").toUpperCase().slice(0,2);return h?l.jsxs("div",{className:"blocked-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading blocked users..."})]}):l.jsxs("div",{className:"blocked-container",children:[l.jsxs("header",{className:"app-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("button",{className:"back-btn",onClick:a,children:l.jsx("i",{className:"fas fa-arrow-left"})})}),l.jsx("div",{className:"header-center",children:l.jsx("h1",{children:"Blocked Users"})}),l.jsx("div",{className:"header-right"})]}),l.jsx("div",{className:"blocked-content",children:o.length>0?l.jsx("div",{className:"blocked-users-list",children:o.map(I=>{const k=I.users;return k?l.jsxs("div",{className:"blocked-user-item",children:[l.jsx("div",{className:"blocked-user-avatar",children:k.avatar?l.jsx("img",{src:k.avatar,alt:k.name}):j(k.name)}),l.jsxs("div",{className:"blocked-user-info",children:[l.jsx("div",{className:"blocked-user-name",children:k.name}),l.jsx("div",{className:"blocked-user-phone",children:k.phone})]}),l.jsx("div",{className:"blocked-user-actions",children:l.jsx("button",{className:"unblock-btn",onClick:()=>N(I.id,k.name),children:"Unblock"})})]},I.id):null})}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{children:"No blocked users"}),l.jsx("p",{children:"You haven't blocked any users yet."})]})}),b&&l.jsx("div",{className:"modal",onClick:()=>C(null),children:l.jsxs("div",{className:"modal-content",onClick:I=>I.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Unblock User"}),l.jsx("button",{className:"close-modal",onClick:()=>C(null),children:l.jsx("i",{className:"fas fa-times"})})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("p",{children:["Are you sure you want to unblock ",l.jsx("strong",{children:b.userName}),"?"]}),l.jsx("p",{className:"modal-note",children:"You will be able to receive messages and calls from this user again."}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"btn-secondary",onClick:()=>C(null),children:"Cancel"}),l.jsx("button",{className:"btn-danger",onClick:T,children:"Unblock"})]})]})]})})]})},d4=()=>{const{id:a}=ld(),t=hs(),{supabase:r}=fs(),{startCall:o}=yi(),[d,h]=M.useState(null),[x,b]=M.useState(null),[C,w]=M.useState(!0),[A,N]=M.useState(!1),[T,j]=M.useState(!1),[I,k]=M.useState(!1),[D,H]=M.useState({images:0,links:0,docs:0}),[U,P]=M.useState([]),[K,Z]=M.useState(""),[Y,V]=M.useState(""),[$,q]=M.useState(""),[ue,fe]=M.useState(!1),[ie,be]=M.useState(!1),[Re,G]=M.useState(!1),[J,oe]=M.useState(!1),[ke,Ve]=M.useState(""),[Ke,ne]=M.useState("");M.useEffect(()=>{if(!a||a==="undefined"||a==="null"){t("/");return}ye()},[a]);const ye=async()=>{try{const Ie=localStorage.getItem("currentUser");if(!Ie){t("/login");return}const Fe=JSON.parse(Ie);b(Fe);const nt=`digidad_user_${a}`;let _t=localStorage.getItem(nt),Rn;_t&&(_t=JSON.parse(_t),h(_t),await Le(Fe,a));try{const{data:rn,error:Gt}=await r.from("users").select("*").eq("id",a).single();if(Gt)throw Gt;Rn=rn,localStorage.setItem(nt,JSON.stringify(Rn)),(!_t||JSON.stringify(_t)!==JSON.stringify(Rn))&&(h(Rn),await Le(Fe,a))}catch(rn){console.warn("Network error loading user details:",rn),_t||h({id:a,name:"Unknown User",phone:"N/A",avatar:null,about:"User information not available"})}w(!1)}catch(Ie){console.error("Error loading user details:",Ie),w(!1)}},Le=async(Ie,Fe)=>{try{const nt=JSON.parse(localStorage.getItem("mutedChats")||"{}"),_t=[Ie.id,Fe].sort().join("_");N(!!nt[_t]),await Ue(Ie.id,Fe),await Xe(Ie.id,Fe),await Ee(Ie.id,Fe)}catch(nt){console.error("Error loading additional data:",nt)}},Ue=async(Ie,Fe)=>{try{const{data:nt,error:_t}=await r.from("contacts").select("*").eq("user_id",Ie).eq("contact_user_id",Fe);j(nt&&nt.length>0)}catch(nt){console.error("Error checking contact status:",nt)}},Xe=async(Ie,Fe)=>{try{const{data:nt,error:_t}=await r.from("blocked_users").select("*").eq("blocker_id",Ie).eq("blocked_id",Fe);k(nt&&nt.length>0)}catch(nt){console.error("Error checking block status:",nt)}},Ee=async(Ie,Fe)=>{try{const{data:nt}=await r.from("chats").select("id").or(`and(user1_id.eq.${Ie},user2_id.eq.${Fe}),and(user1_id.eq.${Fe},user2_id.eq.${Ie})`).single();if(!nt){H({images:0,links:0,docs:0});return}const{data:_t,error:Rn}=await r.from("messages").select("message_type, content").eq("chat_id",nt.id);if(Rn)throw Rn;let rn=0,Gt=0,qn=0;_t.forEach(Qn=>{Qn.message_type==="image"?rn++:Qn.message_type==="document"?qn++:Qn.content&&(Qn.content.includes("http://")||Qn.content.includes("https://"))&&Gt++}),H({images:rn,links:Gt,docs:qn})}catch(nt){console.error("Error loading media count:",nt),H({images:0,links:0,docs:0})}},$e=Ie=>Ie?.split(" ").map(Fe=>Fe[0]).join("").toUpperCase().slice(0,2)||"U",De=async()=>{try{if(!x||!d)return;const{data:Ie}=await r.from("chats").select("*").or(`and(user1_id.eq.${x.id},user2_id.eq.${d.id}),and(user1_id.eq.${d.id},user2_id.eq.${x.id})`).single();if(Ie)t(`/chat/${Ie.id}/${d.id}`);else{const Fe={user1_id:x.id,user2_id:d.id,last_message:null,last_message_time:new Date().toISOString(),unread_count:0},{data:nt,error:_t}=await r.from("chats").insert([Fe]).select();if(_t)throw _t;if(nt&&nt[0])t(`/chat/${nt[0].id}/${d.id}`);else throw new Error("Failed to create chat")}}catch(Ie){console.error("Error navigating to chat:",Ie),alert("Failed to open chat")}},Ce=async()=>{try{const{callId:Ie}=await o(d.id,"voice");t(`/call/${Ie}`)}catch(Ie){console.error("Failed to start voice call:",Ie),alert("Failed to start call: "+Ie.message)}},Je=async()=>{try{const{callId:Ie}=await o(d.id,"video");t(`/call/${Ie}`)}catch(Ie){console.error("Failed to start video call:",Ie),alert("Failed to start call: "+Ie.message)}},gt=()=>{const Ie=[x.id,a].sort().join("_"),Fe=JSON.parse(localStorage.getItem("mutedChats")||"{}");A?delete Fe[Ie]:Fe[Ie]=!0,localStorage.setItem("mutedChats",JSON.stringify(Fe)),N(!A)},Wt=async()=>{try{if(!x||!d)return;const{data:Ie}=await r.from("contacts").select("*").eq("user_id",x.id).eq("contact_user_id",d.id).single();if(Ie){alert("Contact already exists");return}const{error:Fe}=await r.from("contacts").insert([{user_id:x.id,contact_user_id:d.id,contact_name:d.name}]);if(Fe)throw Fe;j(!0),alert("Contact added successfully")}catch(Ie){console.error("Error adding contact:",Ie),alert("Failed to add contact")}},ht=()=>{const Ie=`${d.name}
${d.phone||""}`;navigator.share?navigator.share({title:"Share Contact",text:Ie}):navigator.clipboard.writeText(Ie).then(()=>{alert("Contact info copied")})},kt=async()=>{try{if(!x||!d)return;const{data:Ie,error:Fe}=await r.from("chats").select("id").or(`and(user1_id.eq.${x.id},user2_id.eq.${d.id}),and(user1_id.eq.${d.id},user2_id.eq.${x.id})`).single();if(Fe||!Ie){alert("No chat history found with this user");return}const{data:nt,error:_t}=await r.from("messages").select("*").eq("chat_id",Ie.id).order("created_at",{ascending:!0});if(_t)throw _t;if(!nt||nt.length===0){alert("No messages to export");return}const Rn=nt.map(ss=>({timestamp:new Date(ss.created_at).toLocaleString(),sender:ss.sender_id===x.id?"You":d.name,message:ss.content})),rn=[["Timestamp","Sender","Message"],...Rn.map(ss=>[ss.timestamp,ss.sender,ss.message])].map(ss=>ss.map(Rt=>`"${Rt}"`).join(",")).join(`
`),Gt=new Blob([rn],{type:"text/csv;charset=utf-8;"}),qn=document.createElement("a"),Qn=URL.createObjectURL(Gt);qn.setAttribute("href",Qn),qn.setAttribute("download",`chat_${d.name}_${new Date().toISOString().split("T")[0]}.csv`),qn.style.visibility="hidden",document.body.appendChild(qn),qn.click(),document.body.removeChild(qn),alert("Chat exported successfully!")}catch(Ie){console.error("Error exporting chat:",Ie),alert("Failed to export chat")}},yn=()=>{if(!T){alert("Please add this user to contacts first");return}r.from("contacts").select("*").eq("user_id",x.id).eq("contact_user_id",a).single().then(({data:Ie,error:Fe})=>{if(Fe&&Fe.code!=="PGRST116"){console.error("Error fetching contact:",Fe),alert("Failed to load contact info");return}Z(Ie?.contact_name||d.name),V(d.phone||""),x.id===a&&q(d.about||""),be(!0)})},un=async()=>{try{if(!K.trim()){alert("Name is required");return}const Ie={user_id:x.id,contact_user_id:a,contact_name:K.trim(),updated_at:new Date().toISOString()},{data:Fe}=await r.from("contacts").select("id").eq("user_id",x.id).eq("contact_user_id",a).single();if(Fe?await r.from("contacts").update(Ie).eq("id",Fe.id):await r.from("contacts").insert([Ie]),x.id===a){const nt={name:K.trim(),phone:Y.trim(),updated_at:new Date().toISOString()};$.trim()&&(nt.about=$.trim()),await r.from("users").update(nt).eq("id",x.id)}h({...d,name:K.trim(),phone:Y.trim(),about:$.trim()}),be(!1),alert("Contact updated successfully")}catch(Ie){console.error("Error saving contact:",Ie),alert("Failed to update contact")}},Dt=()=>{I?mt():fe(!0)},St=async()=>{try{const{error:Ie}=await r.from("blocked_users").insert([{blocker_id:x.id,blocked_id:a}]);if(Ie)throw Ie;k(!0),fe(!1),alert("Contact blocked")}catch(Ie){console.error("Error blocking contact:",Ie),alert("Failed to block contact")}},mt=async()=>{try{const{error:Ie}=await r.from("blocked_users").delete().eq("blocker_id",x.id).eq("blocked_id",a);if(Ie)throw Ie;k(!1),alert("Contact unblocked")}catch(Ie){console.error("Error unblocking contact:",Ie),alert("Failed to unblock contact")}},ns=()=>{G(!0)},ze=async()=>{try{if(!ke.trim()){alert("Please select a reason");return}const{error:Ie}=await r.from("reports").insert([{reporter_id:x.id,reported_id:a,reason:ke,details:Ke}]);if(Ie)throw Ie;G(!1),Ve(""),ne(""),alert("Report submitted")}catch(Ie){console.error("Error submitting report:",Ie),alert("Failed to submit report")}},Ns=async()=>{if(confirm(`Delete chat with ${d.name}? This will delete all messages.`))try{const{data:Fe}=await r.from("chats").select("id").or(`and(user1_id.eq.${x.id},user2_id.eq.${d.id}),and(user1_id.eq.${d.id},user2_id.eq.${x.id})`).single();Fe&&(await r.from("messages").delete().eq("chat_id",Fe.id),await r.from("chats").delete().eq("id",Fe.id)),alert("Contact deleted"),t("/")}catch(Fe){console.error("Error deleting contact:",Fe),alert("Failed to delete contact")}};return C?l.jsx($i,{}):d?l.jsxs("div",{className:"user-details-screen",children:[l.jsxs("header",{className:"user-details-header",children:[l.jsx("button",{className:"back-btn",onClick:()=>t(-1),children:l.jsx(rl,{size:24})}),l.jsx("h1",{children:"Contact Info"}),l.jsx(a1,{trigger:l.jsx(gd,{size:24}),items:[{icon:l.jsx(md,{size:16}),label:"Edit Contact",onClick:yn,disabled:!T}]})]}),l.jsxs("div",{className:"user-profile-section",children:[l.jsx("div",{className:"user-details-avatar",id:"userDetailAvatar",onClick:()=>d.avatar&&oe(!0),style:{cursor:d.avatar?"pointer":"default"},children:d.avatar?parseInt(d.avatar)?l.jsx("img",{id:"userDetailImg",src:ks.find(Ie=>Ie.id===parseInt(d.avatar))?.path,alt:d.name}):l.jsx("img",{id:"userDetailImg",src:d.avatar,alt:d.name}):l.jsx("div",{className:"dp-preview-initials",id:"userDetailInitials",children:$e(d.name)})}),l.jsx("h2",{className:"user-detail-name",id:"userDetailName",children:d.name}),l.jsx("p",{className:"user-detail-phone",id:"userDetailPhone",children:d.phone||"+91 0000000000"})]}),l.jsxs("div",{className:"user-actions",children:[l.jsx("button",{className:"action-btn",id:"messageUserBtn",onClick:De,children:l.jsx(Ur,{size:24,style:{color:"white"}})}),l.jsx("button",{className:"action-btn",id:"voiceCallUserBtn",onClick:Ce,children:l.jsx(Gs,{size:24,style:{color:"white"}})}),l.jsx("button",{className:"action-btn",id:"videoCallUserBtn",onClick:Je,children:l.jsx(wi,{size:24,style:{color:"white"}})})]}),l.jsxs("div",{className:"user-info-sections",children:[l.jsxs("div",{className:"info-section",children:[l.jsx("h3",{className:"section-header",children:"Media, Links, and Docs"}),l.jsxs("div",{className:"media-preview",children:[l.jsxs("div",{className:"media-item",children:[l.jsx(Y2,{className:"icon",size:20}),l.jsx("span",{className:"count",id:"mediaCount",children:D.images})]}),l.jsxs("div",{className:"media-item",children:[l.jsx(jE,{className:"icon",size:20}),l.jsx("span",{className:"count",id:"linksCount",children:D.links})]}),l.jsxs("div",{className:"media-item",children:[l.jsx(n1,{className:"icon",size:20}),l.jsx("span",{className:"count",id:"docsCount",children:D.docs})]})]})]}),l.jsx("div",{className:"info-section",children:l.jsxs("div",{className:"settings-item toggle-item",children:[l.jsxs("div",{className:"item-left",children:[l.jsx(q2,{className:"icon",size:20}),l.jsx("span",{className:"label",children:"Mute Notifications"})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",id:"muteUserToggle",checked:A,onChange:gt}),l.jsx("span",{className:"toggle-slider"})]})]})}),l.jsxs("div",{className:"info-section",children:[!T&&l.jsx("div",{className:"settings-item",id:"addToContactsBtn",onClick:Wt,children:l.jsxs("div",{className:"item-left",children:[l.jsx(wA,{className:"icon",size:20}),l.jsx("span",{className:"label",children:"Add to Contacts"})]})}),l.jsx("div",{className:"settings-item",id:"shareContactBtn",onClick:ht,children:l.jsxs("div",{className:"item-left",children:[l.jsx(Q2,{className:"icon",size:20}),l.jsx("span",{className:"label",children:"Share Contact"})]})}),l.jsx("div",{className:"settings-item",id:"exportChatBtn",onClick:kt,children:l.jsxs("div",{className:"item-left",children:[l.jsx(xE,{className:"icon",size:20}),l.jsx("span",{className:"label",children:"Export Chat"})]})})]}),l.jsxs("div",{className:"info-section",id:"groupsSection",children:[l.jsx("h3",{className:"section-header",children:"Groups in Common"}),l.jsx("div",{id:"commonGroups",children:l.jsx("p",{className:"no-data",children:"No groups in common"})})]}),l.jsxs("div",{className:"info-section danger-section",children:[l.jsx("div",{className:"settings-item danger",id:"blockContactBtn",onClick:Dt,children:l.jsxs("div",{className:"item-left",children:[l.jsx(nd,{className:"icon",size:20}),l.jsx("span",{className:"label",children:I?"Unblock Contact":"Block Contact"})]})}),l.jsx("div",{className:"settings-item danger",id:"reportContactBtn",onClick:ns,children:l.jsxs("div",{className:"item-left",children:[l.jsx(R0,{className:"icon",size:20}),l.jsx("span",{className:"label",children:"Report Contact"})]})}),l.jsx("div",{className:"settings-item danger",id:"deleteContactBtn",onClick:Ns,children:l.jsxs("div",{className:"item-left",children:[l.jsx(Ms,{className:"icon",size:20}),l.jsx("span",{className:"label",children:"Delete Contact"})]})})]})]}),l.jsx(_a,{isOpen:ue,onClose:()=>fe(!1),title:"Block Contact",size:"small",children:l.jsxs("div",{className:"modal-content-text",children:[l.jsxs("p",{children:["Block ",d.name,"?"]}),l.jsx("p",{className:"warning-text",children:"Blocked contacts will no longer be able to call you or send you messages."}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"btn-secondary",onClick:()=>fe(!1),children:"Cancel"}),l.jsx("button",{className:"btn-danger",onClick:St,children:"Block"})]})]})}),l.jsx(_a,{isOpen:ie,onClose:()=>be(!1),title:"Edit Contact",size:"small",children:l.jsxs("div",{className:"edit-contact-form",children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{children:"Contact Name"}),l.jsx("input",{type:"text",value:K,onChange:Ie=>Z(Ie.target.value),placeholder:"Enter name"})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"btn-secondary",onClick:()=>be(!1),children:"Cancel"}),l.jsx("button",{className:"btn-primary",onClick:un,children:"Save"})]})]})}),l.jsx(_a,{isOpen:Re,onClose:()=>G(!1),title:"Report Contact",size:"small",children:l.jsxs("div",{className:"report-form",children:[l.jsx("p",{children:"Why are you reporting this contact?"}),l.jsxs("div",{className:"report-reasons",children:[l.jsxs("label",{className:"report-reason-item",children:[l.jsx("input",{type:"radio",name:"report",value:"spam",checked:ke==="spam",onChange:Ie=>Ve(Ie.target.value)}),l.jsx("span",{children:"Spam"})]}),l.jsxs("label",{className:"report-reason-item",children:[l.jsx("input",{type:"radio",name:"report",value:"harassment",checked:ke==="harassment",onChange:Ie=>Ve(Ie.target.value)}),l.jsx("span",{children:"Harassment"})]}),l.jsxs("label",{className:"report-reason-item",children:[l.jsx("input",{type:"radio",name:"report",value:"inappropriate",checked:ke==="inappropriate",onChange:Ie=>Ve(Ie.target.value)}),l.jsx("span",{children:"Inappropriate Content"})]}),l.jsxs("label",{className:"report-reason-item",children:[l.jsx("input",{type:"radio",name:"report",value:"other",checked:ke==="other",onChange:Ie=>Ve(Ie.target.value)}),l.jsx("span",{children:"Other"})]})]}),l.jsxs("div",{className:"modal-actions",children:[l.jsx("button",{className:"btn-secondary",onClick:()=>G(!1),children:"Cancel"}),l.jsx("button",{className:"btn-danger",onClick:ze,children:"Report"})]})]})}),J&&l.jsx("div",{className:"modal-backdrop",onClick:()=>oe(!1),children:l.jsxs("div",{className:"modal-content",onClick:Ie=>Ie.stopPropagation(),children:[l.jsx("button",{className:"close-modal-btn",onClick:()=>oe(!1),children:""}),l.jsx("div",{className:"image-modal-content",children:d.avatar&&l.jsx("img",{src:parseInt(d.avatar)?ks.find(Ie=>Ie.id===parseInt(d.avatar))?.path:d.avatar,alt:d.name,className:"full-screen-image",onClick:()=>oe(!1)})})]})})]}):l.jsxs("div",{className:"user-details-error",children:[l.jsx("p",{children:"User not found"}),l.jsx("button",{onClick:()=>t("/"),children:"Go Back"})]})},h4=({userId:a,onBack:t})=>{const[r,o]=M.useState(null),[d,h]=M.useState(null),[x,b]=M.useState(!0);M.useEffect(()=>{C()},[a]);const C=async()=>{try{const j=localStorage.getItem("currentUser");j&&h(JSON.parse(j)),await w(a),b(!1)}catch(j){console.error("Error initializing shared profile:",j),b(!1)}},w=async j=>{try{const{data:I,error:k}=await wt.from("users").select("id, name, phone, avatar, about, created_at").eq("id",j).single();if(k)throw k;o(I)}catch(I){console.error("Error loading shared profile:",I),alert("Profile not found")}},A=()=>{alert("Add to contacts - feature not implemented")},N=()=>{alert("Start chat - feature not implemented")},T=j=>j.split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2);return x?l.jsxs("div",{className:"shared-profile-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading profile..."})]}):r?l.jsxs("div",{className:"shared-profile-container",children:[l.jsxs("header",{className:"app-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("button",{className:"back-btn",onClick:t,children:l.jsx("i",{className:"fas fa-arrow-left"})})}),l.jsx("div",{className:"header-center",children:l.jsx("h1",{children:"Profile"})}),l.jsx("div",{className:"header-right",children:!d&&l.jsxs("div",{className:"auth-actions",children:[l.jsxs("button",{className:"btn-primary",onClick:()=>alert("Login - feature not implemented"),children:[l.jsx("i",{className:"fas fa-sign-in-alt"})," Login"]}),l.jsxs("button",{className:"btn-secondary",onClick:()=>alert("Sign up - feature not implemented"),children:[l.jsx("i",{className:"fas fa-user-plus"})," Sign Up"]})]})})]}),l.jsxs("div",{className:"profile-content",children:[l.jsx("div",{className:"profile-picture-section",children:l.jsx("div",{className:"profile-avatar",children:r.avatar?parseInt(r.avatar)?l.jsx("img",{src:ks.find(j=>j.id===parseInt(r.avatar))?.path||r.avatar,alt:r.name}):l.jsx("img",{src:r.avatar,alt:r.name}):l.jsx("div",{className:"profile-initials",children:T(r.name)})})}),l.jsxs("div",{className:"profile-info-section",children:[l.jsxs("div",{className:"info-item",children:[l.jsxs("div",{className:"info-label",children:[l.jsx("i",{className:"fas fa-user"}),l.jsx("span",{className:"label",children:"Name"})]}),l.jsx("div",{className:"info-value",children:l.jsx("span",{children:r.name})})]}),l.jsxs("div",{className:"info-item",children:[l.jsxs("div",{className:"info-label",children:[l.jsx("i",{className:"fas fa-info-circle"}),l.jsx("span",{className:"label",children:"About"})]}),l.jsx("div",{className:"info-value",children:l.jsx("span",{children:r.about||"Hey there! I am using CaBa"})})]}),l.jsxs("div",{className:"info-item",children:[l.jsxs("div",{className:"info-label",children:[l.jsx("i",{className:"fas fa-phone"}),l.jsx("span",{className:"label",children:"Phone"})]}),l.jsx("div",{className:"info-value",children:l.jsx("span",{children:r.phone||"Not provided"})})]})]}),d&&l.jsxs("div",{className:"profile-actions",children:[l.jsxs("button",{className:"action-btn",onClick:A,children:[l.jsx("i",{className:"fas fa-user-plus"}),l.jsx("span",{className:"label",children:"Add to Contacts"})]}),l.jsxs("button",{className:"action-btn",onClick:N,children:[l.jsx("i",{className:"fas fa-comment"}),l.jsx("span",{className:"label",children:"Chat"})]})]})]})]}):l.jsxs("div",{className:"shared-profile-error",children:[l.jsxs("p",{children:[l.jsx(pd,{size:16})," Profile not found"]}),l.jsx("button",{onClick:t,children:"Go Back"})]})},f4=()=>{const a=hs();return l.jsxs("div",{className:"about-container",children:[l.jsxs("header",{className:"about-header",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/"),children:l.jsx(rl,{size:24})}),l.jsx("h1",{children:"About CaBa"})]}),l.jsxs("div",{className:"about-content",children:[l.jsxs("div",{className:"about-hero",children:[l.jsx("div",{className:"app-logo-large",children:l.jsx("span",{className:"logo-text",children:"CB"})}),l.jsx("h2",{children:"CaBa Messaging App"}),l.jsx("p",{className:"version",children:"Version 1.0.0"}),l.jsx("p",{className:"tagline",children:"Connect, Communicate, Care"})]}),l.jsxs("div",{className:"about-section",children:[l.jsx("div",{className:"section-icon",children:l.jsx(_E,{size:32})}),l.jsx("h3",{children:"Our Purpose"}),l.jsx("p",{children:"CaBa is designed to bring people closer together through secure, private, and reliable communication. Whether you're chatting with friends, family, or colleagues, CaBa ensures your conversations remain private and your connections stay strong."}),l.jsxs("div",{className:"purpose-features",children:[l.jsxs("div",{className:"feature-item",children:[l.jsx(Ur,{size:20}),l.jsx("span",{children:"Instant Messaging"})]}),l.jsxs("div",{className:"feature-item",children:[l.jsx(Gs,{size:20}),l.jsx("span",{children:"Voice & Video Calls"})]}),l.jsxs("div",{className:"feature-item",children:[l.jsx(Qi,{size:20}),l.jsx("span",{children:"Group Chats"})]}),l.jsxs("div",{className:"feature-item",children:[l.jsx(hi,{size:20}),l.jsx("span",{children:"End-to-End Encryption"})]})]})]}),l.jsxs("div",{className:"about-section",children:[l.jsx("div",{className:"section-icon",children:l.jsx(hi,{size:32})}),l.jsx("h3",{children:"How We Keep Your Chats & Calls Safe"}),l.jsxs("div",{className:"security-grid",children:[l.jsxs("div",{className:"security-item",children:[l.jsx(bx,{size:24}),l.jsx("h4",{children:"End-to-End Encryption"}),l.jsx("p",{children:"All your messages, calls, and media are encrypted from the moment they leave your device until they reach the intended recipient. Only you and the person you're communicating with can read or listen to them."})]}),l.jsxs("div",{className:"security-item",children:[l.jsx(hi,{size:24}),l.jsx("h4",{children:"Secure Servers"}),l.jsx("p",{children:"Our servers use industry-standard security protocols and are regularly audited for vulnerabilities. Your data is stored securely and never shared with third parties without your consent."})]}),l.jsxs("div",{className:"security-item",children:[l.jsx(Zr,{size:24}),l.jsx("h4",{children:"Privacy First"}),l.jsx("p",{children:"We don't track your location, read your messages, or analyze your behavior for advertising. Your privacy is our top priority, and we only collect the minimum data necessary to provide our service."})]})]})]}),l.jsxs("div",{className:"about-section",children:[l.jsx("div",{className:"section-icon",children:l.jsx(Zr,{size:32})}),l.jsx("h3",{children:"Your Privacy Matters"}),l.jsxs("div",{className:"privacy-points",children:[l.jsxs("div",{className:"privacy-point",children:[l.jsx("div",{className:"privacy-icon",children:l.jsx(bx,{size:20})}),l.jsxs("div",{children:[l.jsx("h4",{children:"Data Encryption"}),l.jsx("p",{children:"Your messages are encrypted in transit and at rest using AES-256 encryption."})]})]}),l.jsxs("div",{className:"privacy-point",children:[l.jsx("div",{className:"privacy-icon",children:l.jsx(hi,{size:20})}),l.jsxs("div",{children:[l.jsx("h4",{children:"No Tracking"}),l.jsx("p",{children:"We don't track your location or monitor your online activity."})]})]}),l.jsxs("div",{className:"privacy-point",children:[l.jsx("div",{className:"privacy-icon",children:l.jsx(Zr,{size:20})}),l.jsxs("div",{children:[l.jsx("h4",{children:"Device Control"}),l.jsx("p",{children:"You control who can contact you and what information is shared."})]})]}),l.jsxs("div",{className:"privacy-point",children:[l.jsx("div",{className:"privacy-icon",children:l.jsx(Ms,{size:20})}),l.jsxs("div",{children:[l.jsx("h4",{children:"Data Deletion"}),l.jsx("p",{children:"You can delete your account and all associated data at any time."})]})]}),l.jsxs("div",{className:"privacy-point",children:[l.jsx("div",{className:"privacy-icon",children:l.jsx(hi,{size:20})}),l.jsxs("div",{children:[l.jsx("h4",{children:"Secure Authentication"}),l.jsx("p",{children:"Multi-factor authentication and secure login methods protect your account."})]})]}),l.jsxs("div",{className:"privacy-point",children:[l.jsx("div",{className:"privacy-icon",children:l.jsx(n1,{size:20})}),l.jsxs("div",{children:[l.jsx("h4",{children:"Minimal Data Collection"}),l.jsx("p",{children:"We only collect what's necessary: your name, phone number, and profile information."})]})]})]})]}),l.jsxs("div",{className:"about-section",children:[l.jsx("h3",{children:"Key Features"}),l.jsxs("div",{className:"features-grid",children:[l.jsxs("div",{className:"feature-card",children:[l.jsx(Ur,{size:24}),l.jsx("h4",{children:"Real-time Messaging"}),l.jsx("p",{children:"Send and receive messages instantly with read receipts and typing indicators."})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx(Gs,{size:24}),l.jsx("h4",{children:"HD Voice & Video Calls"}),l.jsx("p",{children:"Crystal clear voice calls and high-definition video calls with screen sharing."})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx(Qi,{size:24}),l.jsx("h4",{children:"Group Conversations"}),l.jsx("p",{children:"Create groups for family, friends, or work with up to 1000 members."})]}),l.jsxs("div",{className:"feature-card",children:[l.jsx(hi,{size:24}),l.jsx("h4",{children:"Advanced Security"}),l.jsx("p",{children:"Self-destructing messages, two-factor authentication, and biometric login."})]})]})]}),l.jsxs("div",{className:"about-footer",children:[l.jsx("p",{children:"Thank you for choosing CaBa for your communication needs."}),l.jsx("p",{className:"copyright",children:" 2024 CaBa Messaging App. All rights reserved."})]})]})]})},g4=()=>{const a=hs(),[t,r]=M.useState([{id:1,text:" Welcome to CaBa Support!",sender:"support",timestamp:new Date(Date.now()-3e5),status:"read"},{id:2,text:"How can we help you today? Feel free to share your questions, suggestions, or any issues you're facing with the app.",sender:"support",timestamp:new Date(Date.now()-24e4),status:"read"},{id:3,text:"You can also check our About page for detailed information about privacy, security, and app features.",sender:"support",timestamp:new Date(Date.now()-18e4),status:"read"}]),[o,d]=M.useState(""),h=M.useRef(null),x=()=>{h.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{x()},[t]);const b=()=>{if(!o.trim())return;const A=JSON.parse(localStorage.getItem("currentUser")||"{}"),N={id:Date.now(),text:o,sender:"user",timestamp:new Date,status:"sent",userName:A.name||"Unknown User",userPhone:A.phone||"Unknown",isRead:!1};r(j=>[...j,N]),d("");const T=JSON.parse(localStorage.getItem("supportMessages")||"[]");T.push(N),localStorage.setItem("supportMessages",JSON.stringify(T)),setTimeout(()=>{const j={id:Date.now()+1,text:"Thank you for your message! Our support team will review it and get back to you soon. In the meantime, you can check our About page for more information.",sender:"support",timestamp:new Date,status:"read"};r(I=>[...I,j])},2e3)},C=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),b())},w=A=>A.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return l.jsxs("div",{className:"support-chat-container",children:[l.jsxs("header",{className:"support-chat-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("button",{className:"back-btn",onClick:()=>a("/"),children:l.jsx(rl,{size:24})})}),l.jsxs("div",{className:"header-center",children:[l.jsx("div",{className:"support-avatar",children:l.jsx("div",{className:"support-initials",children:"CS"})}),l.jsxs("div",{className:"support-info",children:[l.jsx("h3",{children:"CaBa Support"}),l.jsx("span",{className:"support-status",children:"Online"})]})]}),l.jsx("div",{className:"header-right",children:l.jsx("span",{className:"support-verified",children:l.jsx(T0,{size:16})})})]}),l.jsx("div",{className:"support-messages",children:l.jsxs("div",{className:"messages-list",children:[t.map(A=>l.jsx("div",{className:`message-item ${A.sender==="user"?"user-message":"support-message"}`,children:l.jsxs("div",{className:"message-content",children:[l.jsx("p",{children:A.text}),l.jsxs("div",{className:"message-footer",children:[l.jsx("span",{className:"message-time",children:w(A.timestamp)}),A.sender==="user"&&l.jsx("span",{className:"message-status",children:A.status==="sent"?l.jsx(V2,{size:14}):l.jsx(T0,{size:14})})]})]})},A.id)),l.jsx("div",{ref:h})]})}),l.jsx("div",{className:"support-input-area",children:l.jsxs("div",{className:"input-container",children:[l.jsx("input",{type:"text",placeholder:"Type your message...",value:o,onChange:A=>d(A.target.value),onKeyPress:C,className:"message-input"}),l.jsx("button",{className:"send-btn",onClick:b,disabled:!o.trim(),children:l.jsx(lA,{size:20})})]})})]})},s0=a=>{if(!a)return`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`;if(parseInt(a)){const t=ks.find(r=>r.id===parseInt(a));return t?t.path:`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}return a},m4=()=>{const a=hs(),{supabase:t}=fs(),{user:r}=$r(),[o,d]=M.useState(null),[h,x]=M.useState("dashboard"),[b,C]=M.useState(!0),[w,A]=M.useState({totalUsers:0,totalMessages:0,onlineUsers:0,totalChats:0,totalNews:0,totalReports:0,totalMedia:0,totalCalls:0}),[N,T]=M.useState([]),[j,I]=M.useState([]),[k,D]=M.useState([]),[H,U]=M.useState([]),[P,K]=M.useState([]),[Z,Y]=M.useState([]),[V,$]=M.useState([]),[q,ue]=M.useState([]),[fe,ie]=M.useState([]),[be,Re]=M.useState([]),[G,J]=M.useState([]),[oe,ke]=M.useState(""),[Ve,Ke]=M.useState(null),[ne,ye]=M.useState(!1),[Le,Ue]=M.useState(!1),[Xe,Ee]=M.useState(null),[$e,De]=M.useState(!1),[Ce,Je]=M.useState({open:!1,messageId:null,userName:"",message:""}),[gt,Wt]=M.useState(""),[ht,kt]=M.useState({users:!1,messages:!1,news:!1,reports:!1,logs:!1,support:!1,blocked:!1,groups:!1,reminders:!1,statuses:!1,"media-transfers":!1});M.useEffect(()=>{yn()},[]),M.useEffect(()=>{o&&un()},[o,h]);const yn=async()=>{try{if(!r){console.log(" No valid user found in Admin, redirecting to login"),a("/login");return}const{data:X,error:Ae}=await t.from("users").select("*").eq("id",r.id).single();if(Ae||!X||!X.is_admin){a("/");return}X.is_admin&&console.log("Admin access granted for user:",X.name),d(X)}catch{a("/")}},un=async()=>{if(h){kt(X=>({...X,[h]:!0}));try{switch(h){case"dashboard":await Dt();break;case"users":await St();break;case"messages":await mt();break;case"news":await ns();break;case"reports":await ze();break;case"logs":await Ns();break;case"support":await Ie();break;case"blocked":await Fe();break;case"groups":await nt();break;case"reminders":await _t();break;case"statuses":await Rn();break;case"media-transfers":await rn();break}}catch(X){o?.is_admin&&console.error("Error loading data:",X)}finally{kt(X=>({...X,[h]:!1}))}}},Dt=async()=>{try{const[X,Ae,jt,Mn,gs,wn,Kt]=await Promise.all([t.from("users").select("id, is_online",{count:"exact"}),t.from("messages").select("*",{count:"exact",head:!0}),t.from("chats").select("*",{count:"exact",head:!0}),t.from("news_articles").select("*",{count:"exact",head:!0}),t.from("reports").select("*",{count:"exact",head:!0}),t.from("media").select("*",{count:"exact",head:!0}),t.from("call_history").select("*",{count:"exact",head:!0})]),rs=X.data?.filter(He=>He.is_online).length||0;A({totalUsers:X.count||0,totalMessages:Ae.count||0,onlineUsers:rs,totalChats:jt.count||0,totalNews:Mn.count||0,totalReports:gs.count||0,totalMedia:wn.count||0,totalCalls:Kt.count||0})}catch(X){console.error("Error loading stats:",X)}},St=async()=>{try{const{data:X,error:Ae}=await t.from("users").select("*").order("created_at",{ascending:!1});if(Ae){console.error("Error loading users:",Ae);try{const{data:jt,error:Mn}=await t.from("users").select("id, name, email, phone, avatar, is_admin, is_online, created_at").order("created_at",{ascending:!1});if(Mn){console.error("Error with simple user query:",Mn),T([]);return}T(jt||[])}catch(jt){console.error("Simple user query failed:",jt),T([])}}else if(X&&X.length>0)try{const jt=X.map(Kt=>Kt.id),{data:Mn}=await t.from("messages").select("sender_id").in("sender_id",jt),gs={};Mn?.forEach(Kt=>{gs[Kt.sender_id]=(gs[Kt.sender_id]||0)+1});const wn=X.map(Kt=>({...Kt,message_count:gs[Kt.id]||0}));T(wn)}catch(jt){console.warn("Could not load additional user data:",jt),T(X)}else T([])}catch(X){console.error("Error loading users:",X),T([])}},mt=async()=>{try{const{data:X,error:Ae}=await t.from("messages").select("*").order("created_at",{ascending:!1}).limit(100);if(Ae){console.error("Error loading messages:",Ae),I([]);return}if(X&&X.length>0)try{const jt=[...new Set(X.map(Kt=>Kt.sender_id))],{data:Mn}=await t.from("users").select("id, name, avatar").in("id",jt),gs={};Mn?.forEach(Kt=>{gs[Kt.id]=Kt});const wn=X.map(Kt=>({...Kt,users:gs[Kt.sender_id]||{name:"Unknown User",avatar:null}}));I(wn)}catch(jt){console.warn("Could not load additional message data:",jt),I(X.map(Mn=>({...Mn,users:{name:"Unknown User",avatar:null}})))}else I([])}catch(X){console.error("Error loading messages:",X),I([])}},ns=async()=>{try{const{data:X,error:Ae}=await t.from("news_articles").select("*").order("created_at",{ascending:!1});!Ae&&X&&D(X)}catch(X){o?.is_admin&&console.error("Error loading news:",X)}},ze=async()=>{try{const{data:X,error:Ae}=await t.from("reports").select(`
          *,
          users!reporter_id(name),
          messages(content)
        `).order("created_at",{ascending:!1});!Ae&&X&&U(X)}catch(X){o?.is_admin&&console.error("Error loading reports:",X)}},Ns=async()=>{try{const{data:X,error:Ae}=await t.from("admin_logs").select(`
          *,
          users!admin_id(name)
        `).order("created_at",{ascending:!1}).limit(100);!Ae&&X&&K(X)}catch(X){o?.is_admin&&console.error("Error loading admin logs:",X)}},Ie=async()=>{De(!0);try{const{data:X,error:Ae}=await t.rpc("get_support_messages_for_admin");!Ae&&X?Y(X):(o?.is_admin&&console.error("Error loading support messages:",Ae),Y([]))}catch(X){o?.is_admin&&console.error("Error loading support messages:",X),Y([])}finally{De(!1)}},Fe=async()=>{try{const{data:X,error:Ae}=await t.from("blocked_users").select(`
          *,
          blocker:users!blocker_id(name, email),
          blocked:users!blocked_id(name, email)
        `).order("created_at",{ascending:!1});!Ae&&X&&$(X)}catch(X){o?.is_admin&&console.error("Error loading blocked users:",X)}},nt=async()=>{try{const{data:X,error:Ae}=await t.from("groups").select(`
          *,
          creator:users!created_by(name),
          members:group_members(count)
        `).order("created_at",{ascending:!1});!Ae&&X&&ue(X)}catch(X){o?.is_admin&&console.error("Error loading groups:",X)}},_t=async()=>{try{const{data:X,error:Ae}=await t.from("reminders").select(`
          *,
          sender:users!sender_id(name),
          receiver:users!receiver_id(name)
        `).order("created_at",{ascending:!1}).limit(100);!Ae&&X&&ie(X)}catch(X){o?.is_admin&&console.error("Error loading reminders:",X)}},Rn=async()=>{try{const{data:X,error:Ae}=await t.from("statuses").select(`
          *,
          user:users(name, avatar)
        `).order("created_at",{ascending:!1}).limit(100);!Ae&&X&&Re(X)}catch(X){o?.is_admin&&console.error("Error loading statuses:",X)}},rn=async()=>{try{const{data:X,error:Ae}=await t.from("media_transfers").select(`
          *,
          sender:users!sender_id(name),
          receiver:users!receiver_id(name)
        `).order("created_at",{ascending:!1}).limit(100);!Ae&&X&&J(X)}catch(X){o?.is_admin&&console.error("Error loading media transfers:",X)}},Gt=async X=>{if(confirm("Are you sure you want to remove admin privileges from this user?"))try{const{error:Ae}=await t.from("users").update({is_admin:!1}).eq("id",X);Ae?alert("Error removing admin privileges: "+Ae.message):(await Ne("demote_admin",`Removed admin privileges from user ${X}`),St(),alert("Admin privileges removed successfully"))}catch(Ae){o?.is_admin&&console.error("Error demoting admin:",Ae),alert("Error removing admin privileges")}},qn=async X=>{if(confirm("Are you sure you want to grant admin privileges to this user?"))try{const{error:Ae}=await t.from("users").update({is_admin:!0}).eq("id",X);Ae?alert("Error granting admin privileges: "+Ae.message):(await Ne("promote_admin",`Granted admin privileges to user ${X}`),St(),alert("Admin privileges granted successfully"))}catch(Ae){o?.is_admin&&console.error("Error promoting to admin:",Ae),alert("Error granting admin privileges")}},Qn=async X=>{if(confirm("Are you sure you want to delete this message?"))try{const{error:Ae}=await t.from("messages").delete().eq("id",X);Ae||(await Ne("delete_message",`Deleted message ${X}`),mt(),alert("Message deleted successfully"))}catch(Ae){o?.is_admin&&console.error("Error deleting message:",Ae),alert("Error deleting message")}},ss=async X=>{if(confirm("Are you sure you want to delete this article?"))try{const{error:Ae}=await t.from("news_articles").delete().eq("id",X);Ae||(await Ne("delete_news",`Deleted news article ${X}`),ns(),alert("Article deleted successfully"))}catch(Ae){o?.is_admin&&console.error("Error deleting article:",Ae),alert("Error deleting article")}},Rt=async(X,Ae)=>{try{const{error:jt}=await t.from("reports").update({status:Ae,resolved_at:new Date().toISOString(),admin_notes:`Resolved by admin: ${Ae}`}).eq("id",X);jt||(await Ne("resolve_report",`Resolved report ${X} as ${Ae}`),ze())}catch(jt){o?.is_admin&&console.error("Error resolving report:",jt)}},Ne=async(X,Ae)=>{try{await t.from("admin_logs").insert({admin_id:r.id,action:X,details:{description:Ae},ip_address:"admin-panel",user_agent:navigator.userAgent})}catch(jt){o?.is_admin&&console.error("Error logging admin action:",jt)}},dt=async X=>{try{const{data:Ae,error:jt}=await t.rpc(X);jt?alert(`Error running ${X}: ${jt.message}`):(await Ne("maintenance",`Ran ${X}`),alert(`${X} completed successfully`),un())}catch(Ae){o?.is_admin&&console.error(`Error running ${X}:`,Ae),alert(`Error running ${X}`)}},ft=async X=>{const Ae=Z.find(jt=>jt.id===X);Ae&&Je({open:!0,messageId:X,userName:Ae.user_name,message:Ae.message})},Ht=async()=>{if(!gt.trim()){alert("Please enter a response");return}try{const{data:X,error:Ae}=await t.rpc("respond_to_support_message",{p_message_id:Ce.messageId,p_response:gt.trim(),p_admin_id:r.id});!Ae&&X?(await Ne("support_response",`Responded to support message from ${Ce.userName}`),alert("Response sent successfully"),Je({open:!1,messageId:null,userName:"",message:""}),Wt(""),Ie()):alert("Error sending response")}catch(X){o?.is_admin&&console.error("Error responding to support message:",X),alert("Error sending response")}},Ys=async X=>{try{const{data:Ae,error:jt}=await t.rpc("mark_support_message_read",{p_message_id:X});!jt&&Ae&&Ie()}catch(Ae){o?.is_admin&&console.error("Error marking message as read:",Ae)}},Er=async(X,Ae)=>{try{const{error:jt}=await t.from("blocked_users").delete().eq("blocker_id",X).eq("blocked_id",Ae);jt?alert("Error unblocking users: "+jt.message):(await Ne("unblock_users",`Unblocked user ${Ae} from ${X}`),Fe(),alert("Users unblocked successfully"))}catch(jt){o?.is_admin&&console.error("Error unblocking users:",jt),alert("Error unblocking users")}},Ds=async X=>{try{const{error:Ae}=await t.from("groups").delete().eq("id",X);Ae?alert("Error deleting group: "+Ae.message):(await Ne("delete_group",`Deleted group ${X}`),nt(),alert("Group deleted successfully"))}catch(Ae){o?.is_admin&&console.error("Error deleting group:",Ae),alert("Error deleting group")}},vt=async X=>{try{const{error:Ae}=await t.from("reminders").delete().eq("id",X);Ae?alert("Error deleting reminder: "+Ae.message):(await Ne("delete_reminder",`Deleted reminder ${X}`),_t(),alert("Reminder deleted successfully"))}catch(Ae){o?.is_admin&&console.error("Error deleting reminder:",Ae),alert("Error deleting reminder")}},On=async X=>{try{const{error:Ae}=await t.from("statuses").delete().eq("id",X);Ae?alert("Error deleting status: "+Ae.message):(await Ne("delete_status",`Deleted status ${X}`),Rn(),alert("Status deleted successfully"))}catch(Ae){o?.is_admin&&console.error("Error deleting status:",Ae),alert("Error deleting status")}},ge=async X=>{try{const{error:Ae}=await t.from("media_transfers").delete().eq("id",X);Ae?alert("Error deleting media transfer: "+Ae.message):(await Ne("delete_media_transfer",`Deleted media transfer ${X}`),rn(),alert("Media transfer deleted successfully"))}catch(Ae){o?.is_admin&&console.error("Error deleting media transfer:",Ae),alert("Error deleting media transfer")}},qe=X=>new Date(X).toLocaleString(),lt=X=>{switch(X){case"image":return l.jsx(Y2,{size:16});case"video":return l.jsx(wi,{size:16});case"audio":return l.jsx(HE,{size:16});case"document":return l.jsx(n1,{size:16});default:return l.jsx(Vu,{size:16})}},an=X=>X?X.split(" ").map(Ae=>Ae[0]).join("").toUpperCase().slice(0,2):"U",zt=N.filter(X=>X.name?.toLowerCase().includes(oe.toLowerCase())||X.email?.toLowerCase().includes(oe.toLowerCase())||X.phone?.includes(oe)),In=j.filter(X=>X.content?.toLowerCase().includes(oe.toLowerCase())||X.users?.name?.toLowerCase().includes(oe.toLowerCase()));return b&&!o?l.jsxs("div",{className:"admin-loading",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading admin panel..."})]}):o?.is_admin?l.jsxs("div",{className:"admin-container",children:[l.jsxs("header",{className:"admin-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/"),children:l.jsx(rl,{size:24})}),l.jsx("h1",{children:"Admin Panel"})]}),l.jsx("div",{className:"header-right",children:l.jsxs("span",{className:"admin-badge",children:[l.jsx(hi,{size:16}),"Admin"]})})]}),l.jsxs("div",{className:"admin-content",children:[l.jsxs("div",{className:"admin-sidebar",children:[l.jsx("div",{className:"sidebar-header",children:l.jsx("h3",{children:"Admin Panel"})}),l.jsx("nav",{className:"sidebar-nav",children:[{id:"dashboard",label:"Dashboard",icon:wx},{id:"users",label:"Users",icon:Qi},{id:"messages",label:"Messages",icon:Vu},{id:"blocked",label:"Blocked Users",icon:nd},{id:"groups",label:"Groups",icon:Qi},{id:"reminders",label:"Reminders",icon:N0},{id:"statuses",label:"Statuses",icon:Of},{id:"media-transfers",label:"Media Transfers",icon:If},{id:"news",label:"News",icon:gi},{id:"reports",label:"Reports",icon:R0},{id:"logs",label:"Admin Logs",icon:Of},{id:"support",label:"Support",icon:Ur},{id:"maintenance",label:"Maintenance",icon:mE}].map(X=>l.jsxs("button",{className:`nav-item ${h===X.id?"active":""}`,onClick:()=>x(X.id),children:[l.jsx(X.icon,{size:20}),l.jsx("span",{children:X.label})]},X.id))})]}),l.jsxs("div",{className:"main-content",children:[h==="dashboard"&&l.jsxs("div",{className:"dashboard-content",children:[l.jsxs("div",{className:"stats-grid",children:[l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(Qi,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.totalUsers}),l.jsx("p",{children:"Total Users"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(Vu,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.totalMessages}),l.jsx("p",{children:"Total Messages"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(wx,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.onlineUsers}),l.jsx("p",{children:"Online Users"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(Ur,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.totalChats}),l.jsx("p",{children:"Total Chats"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(gi,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.totalNews}),l.jsx("p",{children:"News Articles"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(R0,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.totalReports}),l.jsx("p",{children:"Pending Reports"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(Gs,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.totalCalls}),l.jsx("p",{children:"Total Calls"})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:l.jsx(If,{size:24})}),l.jsxs("div",{className:"stat-info",children:[l.jsx("h3",{children:w.totalMedia}),l.jsx("p",{children:"Media Files"})]})]})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsx("h3",{children:"Quick Actions"}),l.jsxs("div",{className:"actions-grid",children:[l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_expired_sessions"),children:[l.jsx(qi,{size:20}),"Clean Sessions"]}),l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_expired_signaling"),children:[l.jsx(qi,{size:20}),"Clean Signaling"]}),l.jsxs("button",{className:"action-btn",onClick:()=>dt("vanish_expired_messages"),children:[l.jsx(Ms,{size:20}),"Clean Messages"]}),l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_old_news_articles"),children:[l.jsx(gi,{size:20}),"Clean News"]})]})]})]}),h==="users"&&l.jsxs("div",{className:"users-content",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"User Management"}),l.jsxs("div",{className:"search-bar",children:[l.jsx(uc,{size:20}),l.jsx("input",{type:"text",placeholder:"Search users...",value:oe,onChange:X=>ke(X.target.value)})]})]}),ht.users?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading users..."})]}):l.jsx("div",{className:"users-list",children:zt.length>0?zt.map(X=>l.jsxs("div",{className:"user-item",children:[l.jsxs("div",{className:"user-info",children:[l.jsx("img",{src:s0(X.avatar),alt:X.name||"User",className:"user-avatar",onError:Ae=>{Ae.target.src=`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}}),l.jsxs("div",{className:"user-details",children:[l.jsx("h4",{children:X.name||"Unknown User"}),l.jsxs("p",{children:[X.email||"No email","  ",X.phone||"No phone"]}),l.jsxs("small",{children:["Joined: ",X.created_at?qe(X.created_at):"Unknown"]}),X.message_count!==void 0&&l.jsxs("small",{children:["Messages: ",X.message_count]})]})]}),l.jsxs("div",{className:"user-status",children:[l.jsx("span",{className:`status ${X.is_online?"online":"offline"}`,children:X.is_online?"Online":"Offline"}),X.is_admin&&l.jsx("span",{className:"admin-tag",children:"Admin"})]}),l.jsxs("div",{className:"user-actions",children:[l.jsx("button",{className:"action-btn small",onClick:()=>{Ke(X),ye(!0)},title:"View Details",children:l.jsx(Zr,{size:16})}),X.is_admin?l.jsxs("button",{className:"action-btn small danger",onClick:()=>Gt(X.id),title:"Remove Admin",children:[l.jsx(vA,{size:16}),"Demote"]}):l.jsxs("button",{className:"action-btn small success",onClick:()=>qn(X.id),title:"Make Admin",children:[l.jsx(xA,{size:16}),"Promote"]})]})]},X.id)):l.jsxs("div",{className:"no-data",children:[l.jsx(Qi,{size:48}),l.jsx("p",{children:oe?"No users found matching your search":"No users found"}),oe&&l.jsx("button",{className:"action-btn",onClick:()=>ke(""),children:"Clear Search"})]})})]}),h==="messages"&&l.jsxs("div",{className:"messages-content",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Message Moderation"}),l.jsxs("div",{className:"search-bar",children:[l.jsx(uc,{size:20}),l.jsx("input",{type:"text",placeholder:"Search messages...",value:oe,onChange:X=>ke(X.target.value)})]})]}),l.jsx("div",{className:"messages-list",children:In.map(X=>l.jsxs("div",{className:"message-item",children:[l.jsxs("div",{className:"message-header",children:[l.jsxs("div",{className:"sender-info",children:[l.jsx("img",{src:s0(X.users?.avatar),alt:X.users?.name,className:"sender-avatar",onError:Ae=>{Ae.target.src=`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}}),l.jsx("span",{className:"sender-name",children:X.users?.name})]}),l.jsxs("div",{className:"message-meta",children:[lt(X.message_type),l.jsx("span",{className:"message-time",children:qe(X.created_at)})]})]}),l.jsx("div",{className:"message-content",children:l.jsx("p",{children:X.content})}),l.jsxs("div",{className:"message-actions",children:[l.jsx("button",{className:"action-btn small",onClick:()=>{Ee(X),Ue(!0)},children:l.jsx(Zr,{size:16})}),l.jsx("button",{className:"action-btn small danger",onClick:()=>Qn(X.id),children:l.jsx(Ms,{size:16})})]})]},X.id))})]}),h==="news"&&l.jsxs("div",{className:"news-content",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"News Management"}),l.jsxs("button",{className:"action-btn",children:[l.jsx(mA,{size:20}),"Add Article"]})]}),l.jsx("div",{className:"news-list",children:k.map(X=>l.jsxs("div",{className:"news-item",children:[l.jsxs("div",{className:"news-info",children:[l.jsx("h4",{children:X.title}),l.jsx("p",{children:X.summary}),l.jsxs("div",{className:"news-meta",children:[l.jsxs("span",{children:["Views: ",X.view_count]}),l.jsxs("span",{children:["Shares: ",X.share_count]}),l.jsxs("span",{children:["Published: ",qe(X.published_at)]})]})]}),l.jsxs("div",{className:"news-actions",children:[l.jsx("button",{className:"action-btn small",children:l.jsx(md,{size:16})}),l.jsx("button",{className:"action-btn small danger",onClick:()=>ss(X.id),children:l.jsx(Ms,{size:16})})]})]},X.id))})]}),h==="reports"&&l.jsxs("div",{className:"reports-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Reports Management"})}),l.jsx("div",{className:"reports-list",children:H.map(X=>l.jsxs("div",{className:"report-item",children:[l.jsxs("div",{className:"report-info",children:[l.jsxs("h4",{children:[X.report_type," Report"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Reporter:"})," ",X.users?.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Reason:"})," ",X.reason]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Description:"})," ",X.description]}),l.jsxs("small",{children:["Reported: ",qe(X.created_at)]})]}),l.jsx("div",{className:"report-status",children:l.jsx("span",{className:`status ${X.status}`,children:X.status})}),l.jsx("div",{className:"report-actions",children:X.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"action-btn small success",onClick:()=>Rt(X.id,"resolved"),children:l.jsx(Mf,{size:16})}),l.jsx("button",{className:"action-btn small danger",onClick:()=>Rt(X.id,"dismissed"),children:l.jsx(cE,{size:16})})]})})]},X.id))})]}),h==="logs"&&l.jsxs("div",{className:"logs-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Admin Activity Logs"})}),l.jsx("div",{className:"logs-list",children:P.map(X=>l.jsx("div",{className:"log-item",children:l.jsxs("div",{className:"log-info",children:[l.jsx("h4",{children:X.action}),l.jsxs("p",{children:[l.jsx("strong",{children:"Admin:"})," ",X.users?.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Details:"})," ",X.details?.description]}),l.jsx("small",{children:qe(X.created_at)})]})},X.id))})]}),h==="support"&&l.jsxs("div",{className:"support-content",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Support Messages"}),l.jsxs("button",{className:"action-btn",onClick:Ie,children:[l.jsx(qi,{size:20}),"Refresh"]})]}),l.jsx("div",{className:"support-messages-list",children:Z.length>0?Z.map(X=>l.jsxs("div",{className:`support-message-item ${X.is_read?"read":"unread"}`,children:[l.jsxs("div",{className:"message-header",children:[l.jsxs("div",{className:"user-info",children:[l.jsx("div",{className:"user-avatar",children:X.user_name?l.jsx("div",{children:an(X.user_name)}):l.jsx(r1,{size:20})}),l.jsxs("div",{children:[l.jsx("span",{className:"user-name",children:X.user_name||"Unknown User"}),l.jsxs("span",{className:"user-phone",children:["(",X.user_phone||"N/A",")"]}),l.jsx("div",{className:"user-email",children:X.user_email})]})]}),l.jsxs("div",{className:"message-meta",children:[l.jsx("span",{className:"message-time",children:qe(X.created_at)}),!X.is_read&&l.jsx("span",{className:"unread-indicator",children:"New"})]})]}),l.jsxs("div",{className:"message-content",children:[l.jsxs("div",{className:"user-message",children:[l.jsx("strong",{children:"User:"})," ",X.message]}),X.admin_response&&l.jsxs("div",{className:"admin-response",children:[l.jsxs("strong",{children:["Admin (",X.admin_name,"):"]})," ",X.admin_response,l.jsxs("small",{children:["Responded: ",qe(X.responded_at)]})]})]}),!X.admin_response&&l.jsxs("div",{className:"message-actions",children:[l.jsxs("button",{className:"action-btn small success",onClick:()=>ft(X.id),children:[l.jsx(Ur,{size:16}),"Respond"]}),l.jsxs("button",{className:"action-btn small",onClick:()=>Ys(X.id),children:[l.jsx(Mf,{size:16}),"Mark Read"]})]})]},X.id)):l.jsxs("div",{className:"no-messages",children:[l.jsx(Vu,{size:48}),l.jsx("p",{children:"No support messages yet"})]})})]}),h==="blocked"&&l.jsxs("div",{className:"blocked-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Blocked Users Management"})}),l.jsxs("div",{className:"blocked-list",children:[V.map(X=>l.jsxs("div",{className:"blocked-item",children:[l.jsxs("div",{className:"blocked-info",children:[l.jsx("h4",{children:"Block Relationship"}),l.jsxs("p",{children:[l.jsx("strong",{children:"Blocker:"})," ",X.blocker?.name," (",X.blocker?.email,")"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Blocked:"})," ",X.blocked?.name," (",X.blocked?.email,")"]}),l.jsxs("small",{children:["Blocked: ",qe(X.created_at)]})]}),l.jsx("div",{className:"blocked-actions",children:l.jsxs("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to unblock this user?")&&Er(X.blocker_id,X.blocked_id)},children:[l.jsx(Mf,{size:16}),"Unblock"]})})]},X.id)),V.length===0&&l.jsxs("div",{className:"no-data",children:[l.jsx(nd,{size:48}),l.jsx("p",{children:"No blocked users found"})]})]})]}),h==="groups"&&l.jsxs("div",{className:"groups-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Groups Management"})}),l.jsxs("div",{className:"groups-list",children:[q.map(X=>l.jsxs("div",{className:"group-item",children:[l.jsxs("div",{className:"group-info",children:[l.jsx("h4",{children:X.name}),l.jsx("p",{children:X.description}),l.jsxs("div",{className:"group-meta",children:[l.jsxs("span",{children:["Created by: ",X.creator?.name]}),l.jsxs("span",{children:["Members: ",X.members?.[0]?.count||0]}),l.jsxs("span",{children:["Created: ",qe(X.created_at)]})]})]}),l.jsxs("div",{className:"group-actions",children:[l.jsxs("button",{className:"action-btn small",children:[l.jsx(Zr,{size:16}),"View"]}),l.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this group?")&&Ds(X.id)},children:l.jsx(Ms,{size:16})})]})]},X.id)),q.length===0&&l.jsxs("div",{className:"no-data",children:[l.jsx(Qi,{size:48}),l.jsx("p",{children:"No groups found"})]})]})]}),h==="reminders"&&l.jsxs("div",{className:"reminders-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Reminders Management"})}),l.jsxs("div",{className:"reminders-list",children:[fe.map(X=>l.jsxs("div",{className:"reminder-item",children:[l.jsxs("div",{className:"reminder-info",children:[l.jsx("h4",{children:X.title}),l.jsx("p",{children:X.description}),l.jsxs("div",{className:"reminder-meta",children:[l.jsxs("span",{children:["From: ",X.sender?.name]}),l.jsxs("span",{children:["To: ",X.receiver?.name]}),l.jsxs("span",{children:["Due: ",qe(X.reminder_time)]}),l.jsxs("span",{children:["Status: ",X.status]}),l.jsxs("span",{children:["Priority: ",X.priority]})]})]}),l.jsx("div",{className:"reminder-actions",children:l.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this reminder?")&&vt(X.id)},children:l.jsx(Ms,{size:16})})})]},X.id)),fe.length===0&&l.jsxs("div",{className:"no-data",children:[l.jsx(N0,{size:48}),l.jsx("p",{children:"No reminders found"})]})]})]}),h==="statuses"&&l.jsxs("div",{className:"statuses-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Status Management"})}),l.jsxs("div",{className:"statuses-list",children:[be.map(X=>l.jsxs("div",{className:"status-item",children:[l.jsxs("div",{className:"status-info",children:[l.jsxs("div",{className:"status-user",children:[l.jsx("img",{src:s0(X.user?.avatar),alt:X.user?.name,className:"status-avatar",onError:Ae=>{Ae.target.src=`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}}),l.jsx("span",{children:X.user?.name})]}),l.jsx("p",{children:X.content}),l.jsxs("div",{className:"status-meta",children:[l.jsxs("span",{children:["Views: ",X.view_count]}),l.jsxs("span",{children:["Expires: ",qe(X.expires_at)]}),l.jsxs("span",{children:["Posted: ",qe(X.created_at)]})]})]}),l.jsx("div",{className:"status-actions",children:l.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this status?")&&On(X.id)},children:l.jsx(Ms,{size:16})})})]},X.id)),be.length===0&&l.jsxs("div",{className:"no-data",children:[l.jsx(Of,{size:48}),l.jsx("p",{children:"No statuses found"})]})]})]}),h==="media-transfers"&&l.jsxs("div",{className:"media-transfers-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Media Transfers Management"})}),l.jsxs("div",{className:"media-transfers-list",children:[G.map(X=>l.jsxs("div",{className:"transfer-item",children:[l.jsxs("div",{className:"transfer-info",children:[l.jsx("h4",{children:X.filename}),l.jsxs("p",{children:["Original: ",X.original_filename]}),l.jsxs("div",{className:"transfer-meta",children:[l.jsxs("span",{children:["From: ",X.sender?.name]}),l.jsxs("span",{children:["To: ",X.receiver?.name]}),l.jsxs("span",{children:["Size: ",(X.file_size/1024/1024).toFixed(2)," MB"]}),l.jsxs("span",{children:["Status: ",X.status]}),l.jsxs("span",{children:["Downloads: ",X.download_count,"/",X.max_downloads]})]})]}),l.jsx("div",{className:"transfer-actions",children:l.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this transfer?")&&ge(X.id)},children:l.jsx(Ms,{size:16})})})]},X.id)),G.length===0&&l.jsxs("div",{className:"no-data",children:[l.jsx(If,{size:48}),l.jsx("p",{children:"No media transfers found"})]})]})]}),h==="maintenance"&&l.jsxs("div",{className:"maintenance-content",children:[l.jsx("div",{className:"section-header",children:l.jsx("h2",{children:"Database Maintenance"})}),l.jsxs("div",{className:"maintenance-grid",children:[l.jsxs("div",{className:"maintenance-card",children:[l.jsx("h3",{children:"Cleanup Functions"}),l.jsxs("div",{className:"maintenance-actions",children:[l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_expired_sessions"),children:[l.jsx(qi,{size:20}),"Clean Expired Sessions"]}),l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_expired_signaling"),children:[l.jsx(qi,{size:20}),"Clean Expired Signaling"]}),l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_expired_statuses"),children:[l.jsx(qi,{size:20}),"Clean Expired Statuses"]}),l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_expired_reset_tokens"),children:[l.jsx(qi,{size:20}),"Clean Reset Tokens"]})]})]}),l.jsxs("div",{className:"maintenance-card",children:[l.jsx("h3",{children:"Message Management"}),l.jsxs("div",{className:"maintenance-actions",children:[l.jsxs("button",{className:"action-btn",onClick:()=>dt("vanish_expired_messages"),children:[l.jsx(Ms,{size:20}),"Vanish Expired Messages"]}),l.jsxs("button",{className:"action-btn",onClick:()=>dt("delete_vanished_messages"),children:[l.jsx(Ms,{size:20}),"Delete Vanished Messages"]})]})]}),l.jsxs("div",{className:"maintenance-card",children:[l.jsx("h3",{children:"Content Management"}),l.jsx("div",{className:"maintenance-actions",children:l.jsxs("button",{className:"action-btn",onClick:()=>dt("cleanup_old_news_articles"),children:[l.jsx(gi,{size:20}),"Clean Old News Articles"]})})]})]})]})]})]}),Ce.open&&l.jsx("div",{className:"modal-overlay",children:l.jsxs("div",{className:"modal-content response-modal",children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Respond to Support Message"}),l.jsx("button",{className:"close-btn",onClick:()=>Je({open:!1,messageId:null,userName:"",message:""}),children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"original-message",children:[l.jsxs("h4",{children:["From: ",Ce.userName]}),l.jsx("p",{children:Ce.message})]}),l.jsxs("div",{className:"response-form",children:[l.jsx("label",{htmlFor:"response",children:"Your Response:"}),l.jsx("textarea",{id:"response",value:gt,onChange:X=>Wt(X.target.value),placeholder:"Type your response to the user...",rows:6})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"btn-secondary",onClick:()=>Je({open:!1,messageId:null,userName:"",message:""}),children:"Cancel"}),l.jsx("button",{className:"btn-primary",onClick:Ht,disabled:!gt.trim(),children:"Send Response"})]})]})})]}):l.jsx("div",{className:"admin-container",children:l.jsx("div",{className:"admin-blank",children:l.jsxs("div",{className:"blank-content",children:[l.jsx(hi,{size:64}),l.jsx("h2",{children:"Access Restricted"}),l.jsx("p",{children:"You don't have permission to access this panel."})]})})})},p4=({onComplete:a})=>{const t=hs(),{isDark:r}=al(),o=r,d=o?"#25D366":"#00a884";return M.useEffect(()=>{const h=setTimeout(()=>{const b=new URLSearchParams(window.location.search).get("redirect");t(b==="login"?"/login":"/"),a()},3e3);return()=>clearTimeout(h)},[t,a]),l.jsxs("div",{className:`intro-overlay transition-colors duration-500 overflow-hidden
      ${o?"bg-[#111b21]":"bg-white"}`,children:[l.jsx("style",{children:`
        /* 1. BALL ANIMATION */
        @keyframes ballDrop {
          0% { transform: translateY(-80px) scale(1); opacity: 1; }
          30% { transform: translateY(0) scale(1); opacity: 1; }
          35% { transform: translateY(5px) scale(1.4, 0.6); opacity: 1; }
          36% { opacity: 0; }
          90% { opacity: 0; }
          91% { transform: translateY(0) scale(1); opacity: 1; }
          100% { transform: translateY(-80px) scale(1); opacity: 1; }
        }

        /* 2. LOGO REVEAL */
        @keyframes logoCycle {
          0%, 35% { transform: scale(0); opacity: 0; }
          36% { transform: scale(1.2, 0.8); opacity: 1; }
          45% { transform: scale(1); opacity: 1; }
          85% { transform: scale(1); opacity: 1; }
          90% { transform: scale(0); opacity: 0; }
          100% { transform: scale(0); opacity: 0; }
        }

        /* 3. STROKE DRAWING */
        @keyframes drawStroke {
          0%, 35% { stroke-dashoffset: 200; }
          50% { stroke-dashoffset: 0; }
          85% { stroke-dashoffset: 0; }
          90% { stroke-dashoffset: 200; }
        }

        /* 4. TEXT SLIDE */
        @keyframes textSlide {
          0%, 40% { opacity: 0; transform: translateX(-20px); }
          50% { opacity: 1; transform: translateX(0); }
          85% { opacity: 1; transform: translateX(0); }
          90% { opacity: 0; transform: translateX(-10px); }
        }

        /* 5. DOT WAVE (Improved) */
        @keyframes dotWave {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-4px); }
        }

        /* 6. SHOCKWAVE RIPPLE (New) */
        @keyframes rippleEffect {
          0%, 30% { width: 0px; height: 0px; opacity: 0; border-width: 0px; }
          31% { width: 10px; height: 5px; opacity: 0.8; border-width: 4px; }
          50% { width: 120px; height: 20px; opacity: 0; border-width: 0px; }
          100% { width: 120px; height: 20px; opacity: 0; border-width: 0px; }
        }

        /* 7. SPLASH PARTICLES (New) */
        @keyframes splashOut {
          0%, 30% { transform: translate(0,0) scale(0); opacity: 0; }
          31% { transform: translate(0,0) scale(1); opacity: 1; }
          45% { opacity: 0; } /* Fade out quickly as they move */
          100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }

        @keyframes shadowJump {
          0%, 100% { transform: scale(0.3); opacity: 0.1; }
          35% { transform: scale(1.2); opacity: 0.4; }
          90% { transform: scale(0.3); opacity: 0.1; }
        }
      `}),l.jsxs("div",{className:"relative flex flex-col items-center h-48 justify-center",children:[l.jsx("div",{className:"absolute top-[50%] left-[50%] w-0 h-0 z-0",children:[...Array(6)].map((h,x)=>{const b=x*60*(Math.PI/180),C=40,w=Math.cos(b)*C+"px",A=Math.sin(b)*C-20+"px";return l.jsx("div",{className:"absolute w-1.5 h-1.5 rounded-full",style:{backgroundColor:d,"--tx":w,"--ty":A,animation:"splashOut 3s ease-out infinite"}},x)})}),l.jsx("div",{className:"absolute w-5 h-5 rounded-full z-20",style:{backgroundColor:d,animation:"ballDrop 3s cubic-bezier(0.45, 0, 0.55, 1) infinite"}}),l.jsx("div",{className:"relative z-10 flex items-center justify-center",style:{animation:"logoCycle 3s cubic-bezier(0.175, 0.885, 0.32, 1.275) infinite",transformOrigin:"bottom center"},children:l.jsxs("svg",{width:"180",height:"80",viewBox:"0 0 180 80",className:"overflow-visible",children:[l.jsxs("g",{transform:"translate(40, 40)",children:[l.jsx("path",{d:"M 25 -15 A 28 28 0 1 0 25 20",fill:"none",stroke:d,strokeWidth:"7",strokeLinecap:"round",strokeDasharray:"200",style:{animation:"drawStroke 3s ease-in-out infinite"},transform:"rotate(-15)"}),l.jsx("path",{d:"M -15 22 L -25 35 L -5 27 Z",fill:d,style:{animation:"logoCycle 3s infinite"}}),l.jsx("circle",{cx:"-12",cy:"5",r:"4.5",fill:d,style:{animation:"dotWave 1s ease-in-out infinite",animationDelay:"0s"}}),l.jsx("circle",{cx:"0",cy:"5",r:"4.5",fill:d,style:{animation:"dotWave 1s ease-in-out infinite",animationDelay:"0.15s"}}),l.jsx("circle",{cx:"12",cy:"5",r:"4.5",fill:d,style:{animation:"dotWave 1s ease-in-out infinite",animationDelay:"0.3s"}})]}),l.jsx("text",{x:"80",y:"58",fontFamily:"Arial, sans-serif",fontWeight:"bold",fontSize:"48",fill:d,style:{animation:"textSlide 3s ease-out infinite"},children:"aBa"})]})}),l.jsx("div",{className:"absolute bottom-6 rounded-[100%] border-solid box-border z-0",style:{borderColor:d,animation:"rippleEffect 3s linear infinite"}}),l.jsx("div",{className:`absolute bottom-6 w-16 h-1.5 rounded-full blur-sm transition-colors duration-500
            ${o?"bg-black/40":"bg-gray-400/40"}`,style:{animation:"shadowJump 3s cubic-bezier(0.45, 0, 0.55, 1) infinite"}})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-xs font-bold tracking-[0.3em] uppercase transition-colors duration-500",style:{color:d,opacity:.8},children:"Loading"})})]})};function x4(){const{callId:a}=ld(),t=hs(),{callState:r,callType:o,localStream:d,remoteStream:h,callerInfo:x,receiverInfo:b,isMuted:C,isVideoOff:w,isSpeakerOn:A,callDuration:N,endCall:T,toggleMute:j,toggleVideo:I,switchCamera:k}=yi(),D=M.useRef(null),H=M.useRef(null),[U,P]=M.useState(!0);M.useEffect(()=>{D.current&&d&&(D.current.srcObject=d)},[d]),M.useEffect(()=>{H.current&&h&&(H.current.srcObject=h)},[h]),M.useEffect(()=>{if(r==="connected"){const $=setTimeout(()=>P(!1),5e3);return()=>clearTimeout($)}},[r,U]),M.useEffect(()=>{["calling","connecting","connected"].includes(r)||t("/",{replace:!0})},[r,t]);const K=$=>{const q=Math.floor($/60),ue=$%60;return`${q.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}`},Z=x||b,Y=o==="video",V=async()=>{await T(),t("/",{replace:!0})};return l.jsxs("div",{className:"min-h-screen bg-gray-900",children:[l.jsx("div",{className:`fixed top-0 left-0 right-0 z-10 bg-black/80 backdrop-blur-sm transition-opacity ${U?"opacity-100":"opacity-0"}`,children:l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsx("button",{onClick:()=>t(-1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:l.jsx(rl,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{className:"text-center flex-1",children:[l.jsxs("p",{className:"text-white/60 text-sm",children:[r==="calling"&&" Calling...",r==="connecting"&&" Connecting...",r==="connected"&&K(N)]}),l.jsx("h3",{className:"text-white font-semibold text-lg",children:Z?.name||"Unknown"})]}),l.jsx("div",{className:"w-10"})," "]})}),l.jsxs("div",{className:"h-screen flex items-center justify-center cursor-pointer",onClick:()=>P(!U),children:[Y&&l.jsx("video",{ref:H,autoPlay:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover"}),!Y&&l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-40 h-40 mx-auto rounded-full overflow-hidden ring-4 ring-white/20 mb-6",children:Z?.avatar?l.jsx("img",{src:Z.avatar,alt:Z.name,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-6xl font-bold text-white",children:Z?.name?.charAt(0)||"?"})}),l.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:Z?.name||"Unknown"}),l.jsxs("p",{className:"text-white/60",children:[r==="calling"&&"Calling...",r==="connecting"&&"Connecting...",r==="connected"&&`Connected  ${K(N)}`]})]})}),Y&&d&&l.jsxs("div",{className:"absolute top-20 right-4 w-32 h-44 rounded-2xl overflow-hidden shadow-2xl border-2 border-white/20",children:[l.jsx("video",{ref:D,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-cover ${w?"hidden":""}`}),w&&l.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:l.jsx(Sx,{className:"w-8 h-8 text-gray-500"})})]})]}),l.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-10 bg-black/80 backdrop-blur-sm p-8 transition-opacity ${U?"opacity-100":"opacity-0"}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-6",children:[l.jsx("button",{onClick:$=>{$.stopPropagation(),j()},className:`w-14 h-14 rounded-full flex items-center justify-center transition-all ${C?"bg-red-500":"bg-white/20 hover:bg-white/30"}`,children:C?l.jsx(UE,{className:"w-6 h-6 text-white"}):l.jsx(zE,{className:"w-6 h-6 text-white"})}),Y&&l.jsx("button",{onClick:$=>{$.stopPropagation(),I()},className:`w-14 h-14 rounded-full flex items-center justify-center transition-all ${w?"bg-red-500":"bg-white/20 hover:bg-white/30"}`,children:w?l.jsx(Sx,{className:"w-6 h-6 text-white"}):l.jsx(wi,{className:"w-6 h-6 text-white"})}),l.jsx("button",{onClick:$=>{$.stopPropagation(),V()},className:"w-16 h-16 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-all shadow-lg shadow-red-500/30",children:l.jsx(s1,{className:"w-7 h-7 text-white"})}),Y&&l.jsx("button",{onClick:$=>{$.stopPropagation(),k()},className:"w-14 h-14 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-all",children:l.jsx(aA,{className:"w-6 h-6 text-white"})}),!Y&&l.jsx("button",{onClick:$=>$.stopPropagation(),className:`w-14 h-14 rounded-full flex items-center justify-center transition-all ${A?"bg-blue-500":"bg-white/20 hover:bg-white/30"}`,children:A?l.jsx(NA,{className:"w-6 h-6 text-white"}):l.jsx(jA,{className:"w-6 h-6 text-white"})})]})})]})}function y4(){const a=hs(),{callState:t,callType:r,callId:o,callerInfo:d,receiverInfo:h,endCall:x}=yi();if(!["calling","connecting","connected"].includes(t))return null;const b=d||h,C=r==="video",w=()=>{o&&a(`/call/${o}`)},A=N=>{N.stopPropagation(),x()};return l.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-4 py-2 rounded-full shadow-lg cursor-pointer hover:bg-green-600 transition-colors flex items-center gap-2 animate-pulse",onClick:w,title:"Click to view active call",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[C?l.jsx(wi,{size:16}):l.jsx(Gs,{size:16}),l.jsxs("span",{className:"text-sm font-medium",children:[t==="calling"&&"Calling...",t==="connecting"&&"Connecting...",t==="connected"&&"On Call"]})]}),l.jsx("span",{className:"text-sm max-w-24 truncate",children:b?.name||"Unknown"}),l.jsx("button",{onClick:A,className:"ml-2 bg-red-500 hover:bg-red-600 rounded-full p-1 transition-colors",title:"End Call",children:l.jsx(s1,{size:14})})]})}const w4=()=>{const{user:a,loading:t,isAuthenticated:r}=$r();return null},b4="__capgo_keep_url_path_after_reload",r0="__capgo_history_stack__",my=100,v4=typeof window<"u"&&typeof document<"u"&&typeof history<"u";if(v4){const a=window;if(!a.__capgoHistoryPatched){a.__capgoHistoryPatched=!0;const t=()=>{try{if(a.__capgoKeepUrlPathAfterReload)return!0}catch{}try{return window.localStorage.getItem(b4)==="1"}catch{return!1}},r=()=>{try{const Z=window.sessionStorage.getItem(r0);if(!Z)return{stack:[],index:-1};const Y=JSON.parse(Z);return!Y||!Array.isArray(Y.stack)||typeof Y.index!="number"?{stack:[],index:-1}:Y}catch{return{stack:[],index:-1}}},o=(Z,Y)=>{try{window.sessionStorage.setItem(r0,JSON.stringify({stack:Z,index:Y}))}catch{}},d=()=>{try{window.sessionStorage.removeItem(r0)}catch{}},h=Z=>{try{const Y=Z??window.location.href,V=new URL(Y instanceof URL?Y.toString():Y,window.location.href);return`${V.pathname}${V.search}${V.hash}`}catch{return null}},x=(Z,Y)=>{if(Z.length<=my)return{stack:Z,index:Y};const V=Z.length-my,$=Z.slice(V),q=Math.max(0,Y-V);return{stack:$,index:q}},b=Z=>{document.readyState==="complete"||document.readyState==="interactive"?Z():window.addEventListener("DOMContentLoaded",Z,{once:!0})};let C=!1,w=!1,A=!1;const N=()=>{if(!C)return;const Z=r(),Y=h();if(Y){if(Z.stack.length===0){Z.stack.push(Y),Z.index=0,o(Z.stack,Z.index);return}(Z.index<0||Z.index>=Z.stack.length)&&(Z.index=Z.stack.length-1),Z.stack[Z.index]!==Y&&(Z.stack[Z.index]=Y,o(Z.stack,Z.index))}},T=(Z,Y)=>{if(!C||w)return;const V=h(Z);if(!V)return;let{stack:$,index:q}=r();$.length===0?($.push(V),q=$.length-1):Y?((q<0||q>=$.length)&&(q=$.length-1),$[q]=V):q>=$.length-1?($.push(V),q=$.length-1):($=$.slice(0,q+1),$.push(V),q=$.length-1),{stack:$,index:q}=x($,q),o($,q)},j=()=>{if(!C||w)return;const Z=r();if(Z.stack.length===0){N();return}const Y=Z.index>=0&&Z.index<Z.stack.length?Z.index:Z.stack.length-1,V=h();if(Z.stack.length===1&&V===Z.stack[0])return;const $=Z.stack[0];if(!$)return;w=!0;try{history.replaceState(history.state,document.title,$);for(let fe=1;fe<Z.stack.length;fe+=1)history.pushState(history.state,document.title,Z.stack[fe])}catch{w=!1;return}w=!1;const q=Z.stack.length-1,ue=Y-q;ue!==0?history.go(ue):(history.replaceState(history.state,document.title,Z.stack[Y]),window.dispatchEvent(new PopStateEvent("popstate")))},I=()=>{!C||A||(A=!0,b(()=>{A=!1,j()}))};let k=null,D=null;const H=()=>{if(!C||w)return;const Z=h();if(!Z)return;const Y=r(),V=Y.stack.lastIndexOf(Z);V>=0?Y.index=V:(Y.stack.push(Z),Y.index=Y.stack.length-1);const $=x(Y.stack,Y.index);o($.stack,$.index)},U=()=>{k&&D||(k=history.pushState,D=history.replaceState,history.pushState=function(Y,V,$){const q=k.call(history,Y,V,$);return T($,!1),q},history.replaceState=function(Y,V,$){const q=D.call(history,Y,V,$);return T($,!0),q},window.addEventListener("popstate",H))},P=()=>{k&&(history.pushState=k,k=null),D&&(history.replaceState=D,D=null),window.removeEventListener("popstate",H)},K=Z=>{if(C===Z){C&&(N(),I());return}C=Z,C?(U(),N(),I()):(P(),d())};window.addEventListener("CapacitorUpdaterKeepUrlPathAfterReload",Z=>{var Y;const V=Z,$=(Y=V?.detail)===null||Y===void 0?void 0:Y.enabled;typeof $=="boolean"?(a.__capgoKeepUrlPathAfterReload=$,K($)):(a.__capgoKeepUrlPathAfterReload=!0,K(!0))}),K(t())}}const C4=eo("CapacitorUpdater",{web:()=>hd(()=>import("./web-CGX60MQa.js"),[],import.meta.url).then(a=>new a.CapacitorUpdaterWeb)});var Wo;(function(a){a.Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS"})(Wo||(Wo={}));var sc;(function(a){a.Rear="REAR",a.Front="FRONT"})(sc||(sc={}));var py;(function(a){a.Uri="uri",a.Base64="base64",a.DataUrl="dataUrl"})(py||(py={}));class S4 extends fd{async getPhoto(t){return new Promise(async(r,o)=>{if(t.webUseInput||t.source===Wo.Photos)this.fileInputExperience(t,r,o);else if(t.source===Wo.Prompt){let d=document.querySelector("pwa-action-sheet");d||(d=document.createElement("pwa-action-sheet"),document.body.appendChild(d)),d.header=t.promptLabelHeader||"Photo",d.cancelable=!1,d.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],d.addEventListener("onSelection",async h=>{h.detail===0?this.fileInputExperience(t,r,o):this.cameraExperience(t,r,o)})}else this.cameraExperience(t,r,o)})}async pickImages(t){return new Promise(async(r,o)=>{this.multipleFileInputExperience(r,o)})}async cameraExperience(t,r,o){if(customElements.get("pwa-camera-modal")){const d=document.createElement("pwa-camera-modal");d.facingMode=t.direction===sc.Front?"user":"environment",document.body.appendChild(d);try{await d.componentOnReady(),d.addEventListener("onPhoto",async h=>{const x=h.detail;x===null?o(new Zo("User cancelled photos app")):x instanceof Error?o(x):r(await this._getCameraPhoto(x,t)),d.dismiss(),document.body.removeChild(d)}),d.present()}catch{this.fileInputExperience(t,r,o)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,r,o)}fileInputExperience(t,r,o){let d=document.querySelector("#_capacitor-camera-input");const h=()=>{var x;(x=d.parentNode)===null||x===void 0||x.removeChild(d)};d||(d=document.createElement("input"),d.id="_capacitor-camera-input",d.type="file",d.hidden=!0,document.body.appendChild(d),d.addEventListener("change",x=>{const b=d.files[0];let C="jpeg";if(b.type==="image/png"?C="png":b.type==="image/gif"&&(C="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const w=new FileReader;w.addEventListener("load",()=>{if(t.resultType==="dataUrl")r({dataUrl:w.result,format:C});else if(t.resultType==="base64"){const A=w.result.split(",")[1];r({base64String:A,format:C})}h()}),w.readAsDataURL(b)}else r({webPath:URL.createObjectURL(b),format:C}),h()}),d.addEventListener("cancel",x=>{o(new Zo("User cancelled photos app")),h()})),d.accept="image/*",d.capture=!0,t.source===Wo.Photos||t.source===Wo.Prompt?d.removeAttribute("capture"):t.direction===sc.Front?d.capture="user":t.direction===sc.Rear&&(d.capture="environment"),d.click()}multipleFileInputExperience(t,r){let o=document.querySelector("#_capacitor-camera-input-multiple");const d=()=>{var h;(h=o.parentNode)===null||h===void 0||h.removeChild(o)};o||(o=document.createElement("input"),o.id="_capacitor-camera-input-multiple",o.type="file",o.hidden=!0,o.multiple=!0,document.body.appendChild(o),o.addEventListener("change",h=>{const x=[];for(let b=0;b<o.files.length;b++){const C=o.files[b];let w="jpeg";C.type==="image/png"?w="png":C.type==="image/gif"&&(w="gif"),x.push({webPath:URL.createObjectURL(C),format:w})}t({photos:x}),d()}),o.addEventListener("cancel",h=>{r(new Zo("User cancelled photos app")),d()})),o.accept="image/*",o.click()}_getCameraPhoto(t,r){return new Promise((o,d)=>{const h=new FileReader,x=t.type.split("/")[1];r.resultType==="uri"?o({webPath:URL.createObjectURL(t),format:x,saved:!1}):(h.readAsDataURL(t),h.onloadend=()=>{const b=h.result;r.resultType==="dataUrl"?o({dataUrl:b,format:x,saved:!1}):o({base64String:b.split(",")[1],format:x,saved:!1})},h.onerror=b=>{d(b)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const _4=eo("Camera",{web:()=>new S4}),E4=eo("App",{web:()=>hd(()=>import("./web-C-aQY-ip.js"),[],import.meta.url).then(a=>new a.AppWeb)}),A4=()=>{const{supabase:a,validateSessionAndRefresh:t,ensureConnected:r}=fs();M.useEffect(()=>{const o=()=>{console.log("Visibility changed:",document.visibilityState),document.visibilityState==="visible"&&(console.log("App resumed, validating session..."),t&&t())};document.addEventListener("visibilitychange",o);let d;return pi.isNativePlatform()&&(d=E4.addListener("appStateChange",h=>{console.log("App state changed:",h),h.isActive&&(console.log("App resumed on native, validating session..."),t&&t())})),()=>{document.removeEventListener("visibilitychange",o),d&&d.remove()}},[a,t,r])};C4.notifyAppReady();const vs=({children:a})=>{const{user:t,loading:r,isAuthenticated:o}=$r();return r?l.jsx($i,{}):o?a:l.jsx(Ty,{to:"/login",replace:!0})},Yu=({children:a})=>{const{isAuthenticated:t,loading:r}=$r();return r?l.jsx($i,{}):t?l.jsx(Ty,{to:"/",replace:!0}):a},N4=({children:a})=>{const{user:t}=$r();return l.jsx(k_,{currentUser:t,children:a})};function T4(){const[a,t]=M.useState(!0),{supabase:r}=fs();A4();const o=new OC({defaultOptions:{queries:{refetchOnWindowFocus:!0,refetchOnReconnect:!0}}});return M.useEffect(()=>{const{pathname:d,search:h}=window.location;if(h.startsWith("?/")){const x=h.slice(2).replace(/~and~/g,"&");window.history.replaceState(null,"",d+x)}if(r){const{data:{subscription:x}}=r.auth.onAuthStateChange(async(b,C)=>{b==="SIGNED_IN"&&C?.user&&console.log("Google OAuth success, redirecting to home")});return()=>x?.unsubscribe()}},[r]),M.useEffect(()=>{(async()=>{if(pi.isNativePlatform())try{const h=await _4.requestPermissions();h.camera==="granted"||h.camera==="limited"?console.log("Camera Permission Granted by Android!"):console.log("Camera Permission Denied!")}catch(h){console.error("Error asking permissions:",h)}})()},[]),l.jsx(MC,{client:o,children:l.jsxs(N4,{children:[a?l.jsx(p4,{onComplete:()=>t(!1)}):l.jsxs(jv,{children:[l.jsx(Hn,{path:"/",element:l.jsx(vs,{children:l.jsx(GA,{})})}),l.jsx(Hn,{path:"/login",element:l.jsx(Yu,{children:l.jsx(D_,{})})}),l.jsx(Hn,{path:"/signup",element:l.jsx(Yu,{children:l.jsx(L_,{})})}),l.jsx(Hn,{path:"/forgot-password",element:l.jsx(Yu,{children:l.jsx(B_,{})})}),l.jsx(Hn,{path:"/reset-password",element:l.jsx(Yu,{children:l.jsx(U_,{})})}),l.jsx(Hn,{path:"/chat/:chatId/:otherUserId",element:l.jsx(vs,{children:l.jsx(O0,{})})}),l.jsx(Hn,{path:"/chat/new/:userId",element:l.jsx(vs,{children:l.jsx(O0,{})})}),l.jsx(Hn,{path:"/call/:callId",element:l.jsx(vs,{children:l.jsx(x4,{})})}),l.jsx(Hn,{path:"/profile",element:l.jsx(vs,{children:l.jsx(n4,{})})}),l.jsx(Hn,{path:"/settings",element:l.jsx(vs,{children:l.jsx(s4,{})})}),l.jsx(Hn,{path:"/news",element:l.jsx(vs,{children:l.jsx(r4,{})})}),l.jsx(Hn,{path:"/reminders",element:l.jsx(vs,{children:l.jsx(a4,{})})}),l.jsx(Hn,{path:"/create-reminder",element:l.jsx(vs,{children:l.jsx(i4,{})})}),l.jsx(Hn,{path:"/calls",element:l.jsx(vs,{children:l.jsx(c4,{})})}),l.jsx(Hn,{path:"/qr",element:l.jsx(vs,{children:l.jsx(t4,{})})}),l.jsx(Hn,{path:"/blocked",element:l.jsx(vs,{children:l.jsx(u4,{})})}),l.jsx(Hn,{path:"/about",element:l.jsx(vs,{children:l.jsx(f4,{})})}),l.jsx(Hn,{path:"/support",element:l.jsx(vs,{children:l.jsx(g4,{})})}),l.jsx(Hn,{path:"/admin",element:l.jsx(vs,{children:l.jsx(m4,{})})}),l.jsx(Hn,{path:"/user-details/:id",element:l.jsx(vs,{children:l.jsx(d4,{})})}),l.jsx(Hn,{path:"/shared-profile/:id",element:l.jsx(vs,{children:l.jsx(h4,{})})})]}),l.jsx(y4,{}),l.jsx(uw,{}),l.jsx(w4,{})]})})}Ub.createRoot(document.getElementById("root")).render(l.jsx(M.StrictMode,{children:l.jsx($v,{children:l.jsx(x_,{children:l.jsx(R_,{children:l.jsx(zA,{children:l.jsx(P_,{children:l.jsx(T4,{})})})})})})}));export{fd as W};
