function kx(o,n){for(var a=0;a<n.length;a++){const c=n[a];if(typeof c!="string"&&!Array.isArray(c)){for(const h in c)if(h!=="default"&&!(h in o)){const f=Object.getOwnPropertyDescriptor(c,h);f&&Object.defineProperty(o,h,f.get?f:{enumerable:!0,get:()=>c[h]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const f of h)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function a(h){const f={};return h.integrity&&(f.integrity=h.integrity),h.referrerPolicy&&(f.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?f.credentials="include":h.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(h){if(h.ep)return;h.ep=!0;const f=a(h);fetch(h.href,f)}})();var yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Dw(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var n=o.default;if(typeof n=="function"){var a=function c(){var h=!1;try{h=this instanceof c}catch{}return h?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(o).forEach(function(c){var h=Object.getOwnPropertyDescriptor(o,c);Object.defineProperty(a,c,h.get?h:{enumerable:!0,get:function(){return o[c]}})}),a}var Qh={exports:{}},Pl={};var zm;function Lw(){if(zm)return Pl;zm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(c,h,f){var x=null;if(f!==void 0&&(x=""+f),h.key!==void 0&&(x=""+h.key),"key"in h){f={};for(var v in h)v!=="key"&&(f[v]=h[v])}else f=h;return h=f.ref,{$$typeof:o,type:c,key:x,ref:h!==void 0?h:null,props:f}}return Pl.Fragment=n,Pl.jsx=a,Pl.jsxs=a,Pl}var Fm;function Bw(){return Fm||(Fm=1,Qh.exports=Lw()),Qh.exports}var i=Bw(),Kh={exports:{}},bt={};var Hm;function Uw(){if(Hm)return bt;Hm=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),x=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),R=Symbol.iterator;function T(ne){return ne===null||typeof ne!="object"?null:(ne=R&&ne[R]||ne["@@iterator"],typeof ne=="function"?ne:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,U={};function H(ne,pe,Le){this.props=ne,this.context=pe,this.refs=U,this.updater=Le||O}H.prototype.isReactComponent={},H.prototype.setState=function(ne,pe){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,pe,"setState")},H.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function B(){}B.prototype=H.prototype;function P(ne,pe,Le){this.props=ne,this.context=pe,this.refs=U,this.updater=Le||O}var Q=P.prototype=new B;Q.constructor=P,D(Q,H.prototype),Q.isPureReactComponent=!0;var Z=Array.isArray;function Y(){}var X={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function q(ne,pe,Le){var Ue=Le.ref;return{$$typeof:o,type:ne,key:pe,ref:Ue!==void 0?Ue:null,props:Le}}function xe(ne,pe){return q(ne.type,pe,ne.props)}function we(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===o}function me(ne){var pe={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Le){return pe[Le]})}var Ce=/\/+/g;function Oe(ne,pe){return typeof ne=="object"&&ne!==null&&ne.key!=null?me(""+ne.key):pe.toString(36)}function V(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(Y,Y):(ne.status="pending",ne.then(function(pe){ne.status==="pending"&&(ne.status="fulfilled",ne.value=pe)},function(pe){ne.status==="pending"&&(ne.status="rejected",ne.reason=pe)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function $(ne,pe,Le,Ue,We){var Ne=typeof ne;(Ne==="undefined"||Ne==="boolean")&&(ne=null);var $e=!1;if(ne===null)$e=!0;else switch(Ne){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(ne.$$typeof){case o:case n:$e=!0;break;case A:return $e=ne._init,$($e(ne._payload),pe,Le,Ue,We)}}if($e)return We=We(ne),$e=Ue===""?"."+Oe(ne,0):Ue,Z(We)?(Le="",$e!=null&&(Le=$e.replace(Ce,"$&/")+"/"),$(We,pe,Le,"",function(Je){return Je})):We!=null&&(we(We)&&(We=xe(We,Le+(We.key==null||ne&&ne.key===We.key?"":(""+We.key).replace(Ce,"$&/")+"/")+$e)),pe.push(We)),1;$e=0;var De=Ue===""?".":Ue+":";if(Z(ne))for(var ve=0;ve<ne.length;ve++)Ue=ne[ve],Ne=De+Oe(Ue,ve),$e+=$(Ue,pe,Le,Ne,We);else if(ve=T(ne),typeof ve=="function")for(ne=ve.call(ne),ve=0;!(Ue=ne.next()).done;)Ue=Ue.value,Ne=De+Oe(Ue,ve++),$e+=$(Ue,pe,Le,Ne,We);else if(Ne==="object"){if(typeof ne.then=="function")return $(V(ne),pe,Le,Ue,We);throw pe=String(ne),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.")}return $e}function ie(ne,pe,Le){if(ne==null)return ne;var Ue=[],We=0;return $(ne,Ue,"","",function(Ne){return pe.call(Le,Ne,We++)}),Ue}function ke(ne){if(ne._status===-1){var pe=ne._result;pe=pe(),pe.then(function(Le){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Le)},function(Le){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Le)}),ne._status===-1&&(ne._status=0,ne._result=pe)}if(ne._status===1)return ne._result.default;throw ne._result}var Ge=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var pe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(pe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},Ke={map:ie,forEach:function(ne,pe,Le){ie(ne,function(){pe.apply(this,arguments)},Le)},count:function(ne){var pe=0;return ie(ne,function(){pe++}),pe},toArray:function(ne){return ie(ne,function(pe){return pe})||[]},only:function(ne){if(!we(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return bt.Activity=N,bt.Children=Ke,bt.Component=H,bt.Fragment=a,bt.Profiler=h,bt.PureComponent=P,bt.StrictMode=c,bt.Suspense=C,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,bt.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return X.H.useMemoCache(ne)}},bt.cache=function(ne){return function(){return ne.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(ne,pe,Le){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var Ue=D({},ne.props),We=ne.key;if(pe!=null)for(Ne in pe.key!==void 0&&(We=""+pe.key),pe)!ee.call(pe,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&pe.ref===void 0||(Ue[Ne]=pe[Ne]);var Ne=arguments.length-2;if(Ne===1)Ue.children=Le;else if(1<Ne){for(var $e=Array(Ne),De=0;De<Ne;De++)$e[De]=arguments[De+2];Ue.children=$e}return q(ne.type,We,Ue)},bt.createContext=function(ne){return ne={$$typeof:x,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:f,_context:ne},ne},bt.createElement=function(ne,pe,Le){var Ue,We={},Ne=null;if(pe!=null)for(Ue in pe.key!==void 0&&(Ne=""+pe.key),pe)ee.call(pe,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(We[Ue]=pe[Ue]);var $e=arguments.length-2;if($e===1)We.children=Le;else if(1<$e){for(var De=Array($e),ve=0;ve<$e;ve++)De[ve]=arguments[ve+2];We.children=De}if(ne&&ne.defaultProps)for(Ue in $e=ne.defaultProps,$e)We[Ue]===void 0&&(We[Ue]=$e[Ue]);return q(ne,Ne,We)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(ne){return{$$typeof:v,render:ne}},bt.isValidElement=we,bt.lazy=function(ne){return{$$typeof:A,_payload:{_status:-1,_result:ne},_init:ke}},bt.memo=function(ne,pe){return{$$typeof:w,type:ne,compare:pe===void 0?null:pe}},bt.startTransition=function(ne){var pe=X.T,Le={};X.T=Le;try{var Ue=ne(),We=X.S;We!==null&&We(Le,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(Y,Ge)}catch(Ne){Ge(Ne)}finally{pe!==null&&Le.types!==null&&(pe.types=Le.types),X.T=pe}},bt.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},bt.use=function(ne){return X.H.use(ne)},bt.useActionState=function(ne,pe,Le){return X.H.useActionState(ne,pe,Le)},bt.useCallback=function(ne,pe){return X.H.useCallback(ne,pe)},bt.useContext=function(ne){return X.H.useContext(ne)},bt.useDebugValue=function(){},bt.useDeferredValue=function(ne,pe){return X.H.useDeferredValue(ne,pe)},bt.useEffect=function(ne,pe){return X.H.useEffect(ne,pe)},bt.useEffectEvent=function(ne){return X.H.useEffectEvent(ne)},bt.useId=function(){return X.H.useId()},bt.useImperativeHandle=function(ne,pe,Le){return X.H.useImperativeHandle(ne,pe,Le)},bt.useInsertionEffect=function(ne,pe){return X.H.useInsertionEffect(ne,pe)},bt.useLayoutEffect=function(ne,pe){return X.H.useLayoutEffect(ne,pe)},bt.useMemo=function(ne,pe){return X.H.useMemo(ne,pe)},bt.useOptimistic=function(ne,pe){return X.H.useOptimistic(ne,pe)},bt.useReducer=function(ne,pe,Le){return X.H.useReducer(ne,pe,Le)},bt.useRef=function(ne){return X.H.useRef(ne)},bt.useState=function(ne){return X.H.useState(ne)},bt.useSyncExternalStore=function(ne,pe,Le){return X.H.useSyncExternalStore(ne,pe,Le)},bt.useTransition=function(){return X.H.useTransition()},bt.version="19.2.0",bt}var qm;function d0(){return qm||(qm=1,Kh.exports=Uw()),Kh.exports}var M=d0();const Dx=Gu(M);var Zh={exports:{}},zl={},$h={exports:{}},Jh={};var Vm;function Pw(){return Vm||(Vm=1,(function(o){function n($,ie){var ke=$.length;$.push(ie);e:for(;0<ke;){var Ge=ke-1>>>1,Ke=$[Ge];if(0<h(Ke,ie))$[Ge]=ie,$[ke]=Ke,ke=Ge;else break e}}function a($){return $.length===0?null:$[0]}function c($){if($.length===0)return null;var ie=$[0],ke=$.pop();if(ke!==ie){$[0]=ke;e:for(var Ge=0,Ke=$.length,ne=Ke>>>1;Ge<ne;){var pe=2*(Ge+1)-1,Le=$[pe],Ue=pe+1,We=$[Ue];if(0>h(Le,ke))Ue<Ke&&0>h(We,Le)?($[Ge]=We,$[Ue]=ke,Ge=Ue):($[Ge]=Le,$[pe]=ke,Ge=pe);else if(Ue<Ke&&0>h(We,ke))$[Ge]=We,$[Ue]=ke,Ge=Ue;else break e}}return ie}function h($,ie){var ke=$.sortIndex-ie.sortIndex;return ke!==0?ke:$.id-ie.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;o.unstable_now=function(){return f.now()}}else{var x=Date,v=x.now();o.unstable_now=function(){return x.now()-v}}var C=[],w=[],A=1,N=null,R=3,T=!1,O=!1,D=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function Q($){for(var ie=a(w);ie!==null;){if(ie.callback===null)c(w);else if(ie.startTime<=$)c(w),ie.sortIndex=ie.expirationTime,n(C,ie);else break;ie=a(w)}}function Z($){if(D=!1,Q($),!O)if(a(C)!==null)O=!0,Y||(Y=!0,me());else{var ie=a(w);ie!==null&&V(Z,ie.startTime-$)}}var Y=!1,X=-1,ee=5,q=-1;function xe(){return U?!0:!(o.unstable_now()-q<ee)}function we(){if(U=!1,Y){var $=o.unstable_now();q=$;var ie=!0;try{e:{O=!1,D&&(D=!1,B(X),X=-1),T=!0;var ke=R;try{t:{for(Q($),N=a(C);N!==null&&!(N.expirationTime>$&&xe());){var Ge=N.callback;if(typeof Ge=="function"){N.callback=null,R=N.priorityLevel;var Ke=Ge(N.expirationTime<=$);if($=o.unstable_now(),typeof Ke=="function"){N.callback=Ke,Q($),ie=!0;break t}N===a(C)&&c(C),Q($)}else c(C);N=a(C)}if(N!==null)ie=!0;else{var ne=a(w);ne!==null&&V(Z,ne.startTime-$),ie=!1}}break e}finally{N=null,R=ke,T=!1}ie=void 0}}finally{ie?me():Y=!1}}}var me;if(typeof P=="function")me=function(){P(we)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,Oe=Ce.port2;Ce.port1.onmessage=we,me=function(){Oe.postMessage(null)}}else me=function(){H(we,0)};function V($,ie){X=H(function(){$(o.unstable_now())},ie)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function($){$.callback=null},o.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<$?Math.floor(1e3/$):5},o.unstable_getCurrentPriorityLevel=function(){return R},o.unstable_next=function($){switch(R){case 1:case 2:case 3:var ie=3;break;default:ie=R}var ke=R;R=ie;try{return $()}finally{R=ke}},o.unstable_requestPaint=function(){U=!0},o.unstable_runWithPriority=function($,ie){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ke=R;R=$;try{return ie()}finally{R=ke}},o.unstable_scheduleCallback=function($,ie,ke){var Ge=o.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Ge+ke:Ge):ke=Ge,$){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ke+Ke,$={id:A++,callback:ie,priorityLevel:$,startTime:ke,expirationTime:Ke,sortIndex:-1},ke>Ge?($.sortIndex=ke,n(w,$),a(C)===null&&$===a(w)&&(D?(B(X),X=-1):D=!0,V(Z,ke-Ge))):($.sortIndex=Ke,n(C,$),O||T||(O=!0,Y||(Y=!0,me()))),$},o.unstable_shouldYield=xe,o.unstable_wrapCallback=function($){var ie=R;return function(){var ke=R;R=ie;try{return $.apply(this,arguments)}finally{R=ke}}}})(Jh)),Jh}var Gm;function zw(){return Gm||(Gm=1,$h.exports=Pw()),$h.exports}var ef={exports:{}},Cs={};var Ym;function Fw(){if(Ym)return Cs;Ym=1;var o=d0();function n(C){var w="https://react.dev/errors/"+C;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)w+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+C+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var c={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},h=Symbol.for("react.portal");function f(C,w,A){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:N==null?null:""+N,children:C,containerInfo:w,implementation:A}}var x=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(C,w){if(C==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Cs.createPortal=function(C,w){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(n(299));return f(C,w,null,A)},Cs.flushSync=function(C){var w=x.T,A=c.p;try{if(x.T=null,c.p=2,C)return C()}finally{x.T=w,c.p=A,c.d.f()}},Cs.preconnect=function(C,w){typeof C=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,c.d.C(C,w))},Cs.prefetchDNS=function(C){typeof C=="string"&&c.d.D(C)},Cs.preinit=function(C,w){if(typeof C=="string"&&w&&typeof w.as=="string"){var A=w.as,N=v(A,w.crossOrigin),R=typeof w.integrity=="string"?w.integrity:void 0,T=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;A==="style"?c.d.S(C,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:N,integrity:R,fetchPriority:T}):A==="script"&&c.d.X(C,{crossOrigin:N,integrity:R,fetchPriority:T,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Cs.preinitModule=function(C,w){if(typeof C=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var A=v(w.as,w.crossOrigin);c.d.M(C,{crossOrigin:A,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&c.d.M(C)},Cs.preload=function(C,w){if(typeof C=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var A=w.as,N=v(A,w.crossOrigin);c.d.L(C,A,{crossOrigin:N,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Cs.preloadModule=function(C,w){if(typeof C=="string")if(w){var A=v(w.as,w.crossOrigin);c.d.m(C,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:A,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else c.d.m(C)},Cs.requestFormReset=function(C){c.d.r(C)},Cs.unstable_batchedUpdates=function(C,w){return C(w)},Cs.useFormState=function(C,w,A){return x.H.useFormState(C,w,A)},Cs.useFormStatus=function(){return x.H.useHostTransitionStatus()},Cs.version="19.2.0",Cs}var Xm;function Hw(){if(Xm)return ef.exports;Xm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),ef.exports=Fw(),ef.exports}var Wm;function qw(){if(Wm)return zl;Wm=1;var o=zw(),n=d0(),a=Hw();function c(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var s=e,u=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(u=s.return),e=s.return;while(e)}return s.tag===3?u:null}function x(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function v(e){if(e.tag===31){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function C(e){if(f(e)!==e)throw Error(c(188))}function w(e){var s=e.alternate;if(!s){if(s=f(e),s===null)throw Error(c(188));return s!==e?null:e}for(var u=e,m=s;;){var b=u.return;if(b===null)break;var S=b.alternate;if(S===null){if(m=b.return,m!==null){u=m;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===u)return C(b),e;if(S===m)return C(b),s;S=S.sibling}throw Error(c(188))}if(u.return!==m.return)u=b,m=S;else{for(var I=!1,F=b.child;F;){if(F===u){I=!0,u=b,m=S;break}if(F===m){I=!0,m=b,u=S;break}F=F.sibling}if(!I){for(F=S.child;F;){if(F===u){I=!0,u=S,m=b;break}if(F===m){I=!0,m=S,u=b;break}F=F.sibling}if(!I)throw Error(c(189))}}if(u.alternate!==m)throw Error(c(190))}if(u.tag!==3)throw Error(c(188));return u.stateNode.current===u?e:s}function A(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=A(e),s!==null)return s;e=e.sibling}return null}var N=Object.assign,R=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),P=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=we&&e[we]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Symbol.for("react.client.reference");function Oe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ce?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case D:return"Fragment";case H:return"Profiler";case U:return"StrictMode";case Z:return"Suspense";case Y:return"SuspenseList";case q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case P:return e.displayName||"Context";case B:return(e._context.displayName||"Context")+".Consumer";case Q:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return s=e.displayName||null,s!==null?s:Oe(e.type)||"Memo";case ee:s=e._payload,e=e._init;try{return Oe(e(s))}catch{}}return null}var V=Array.isArray,$=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},Ge=[],Ke=-1;function ne(e){return{current:e}}function pe(e){0>Ke||(e.current=Ge[Ke],Ge[Ke]=null,Ke--)}function Le(e,s){Ke++,Ge[Ke]=e.current,e.current=s}var Ue=ne(null),We=ne(null),Ne=ne(null),$e=ne(null);function De(e,s){switch(Le(Ne,s),Le(We,e),Le(Ue,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?cm(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=cm(s),e=um(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}pe(Ue),Le(Ue,e)}function ve(){pe(Ue),pe(We),pe(Ne)}function Je(e){e.memoizedState!==null&&Le($e,e);var s=Ue.current,u=um(s,e.type);s!==u&&(Le(We,e),Le(Ue,u))}function mt(e){We.current===e&&(pe(Ue),pe(We)),$e.current===e&&(pe($e),Dl._currentValue=ke)}var Wt,ft;function Mt(e){if(Wt===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);Wt=s&&s[1]||"",ft=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+e+ft}var xn=!1;function cn(e,s){if(!e||xn)return"";xn=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(s){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(ye){var de=ye}Reflect.construct(e,[],Ae)}else{try{Ae.call()}catch(ye){de=ye}e.call(Ae.prototype)}}else{try{throw Error()}catch(ye){de=ye}(Ae=e())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(ye){if(ye&&de&&typeof ye.stack=="string")return[ye.stack,de.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),I=S[0],F=S[1];if(I&&F){var J=I.split(`
`),ue=F.split(`
`);for(b=m=0;m<J.length&&!J[m].includes("DetermineComponentFrameRoot");)m++;for(;b<ue.length&&!ue[b].includes("DetermineComponentFrameRoot");)b++;if(m===J.length||b===ue.length)for(m=J.length-1,b=ue.length-1;1<=m&&0<=b&&J[m]!==ue[b];)b--;for(;1<=m&&0<=b;m--,b--)if(J[m]!==ue[b]){if(m!==1||b!==1)do if(m--,b--,0>b||J[m]!==ue[b]){var be=`
`+J[m].replace(" at new "," at ");return e.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",e.displayName)),be}while(1<=m&&0<=b);break}}}finally{xn=!1,Error.prepareStackTrace=u}return(u=e?e.displayName||e.name:"")?Mt(u):""}function qt(e,s){switch(e.tag){case 26:case 27:case 5:return Mt(e.type);case 16:return Mt("Lazy");case 13:return e.child!==s&&s!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return cn(e.type,!1);case 11:return cn(e.type.render,!1);case 1:return cn(e.type,!0);case 31:return Mt("Activity");default:return""}}function At(e){try{var s="",u=null;do s+=qt(e,u),u=e,e=e.return;while(e);return s}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var ht=Object.prototype.hasOwnProperty,Hn=o.unstable_scheduleCallback,ze=o.unstable_cancelCallback,Is=o.unstable_shouldYield,Me=o.unstable_requestPaint,Fe=o.unstable_now,nt=o.unstable_getCurrentPriorityLevel,Ct=o.unstable_ImmediatePriority,Tn=o.unstable_UserBlockingPriority,sn=o.unstable_NormalPriority,Vt=o.unstable_LowPriority,qn=o.unstable_IdlePriority,jn=o.log,ts=o.unstable_setDisableYieldValue,Ut=null,je=null;function lt(e){if(typeof jn=="function"&&ts(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Ut,e)}catch{}}var gt=Math.clz32?Math.clz32:va,Qt=Math.log,Os=Math.LN2;function va(e){return e>>>=0,e===0?32:31-(Qt(e)/Os|0)|0}var qs=256,wt=262144,Rn=4194304;function he(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qe(e,s,u){var m=e.pendingLanes;if(m===0)return 0;var b=0,S=e.suspendedLanes,I=e.pingedLanes;e=e.warmLanes;var F=m&134217727;return F!==0?(m=F&~S,m!==0?b=he(m):(I&=F,I!==0?b=he(I):u||(u=F&~e,u!==0&&(b=he(u))))):(F=m&~S,F!==0?b=he(F):I!==0?b=he(I):u||(u=m&~e,u!==0&&(b=he(u)))),b===0?0:s!==0&&s!==b&&(s&S)===0&&(S=b&-b,u=s&-s,S>=u||S===32&&(u&4194048)!==0)?s:b}function ct(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function an(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pt(){var e=Rn;return Rn<<=1,(Rn&62914560)===0&&(Rn=4194304),e}function In(e){for(var s=[],u=0;31>u;u++)s.push(e);return s}function G(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,s,u,m,b,S){var I=e.pendingLanes;e.pendingLanes=u,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=u,e.entangledLanes&=u,e.errorRecoveryDisabledLanes&=u,e.shellSuspendCounter=0;var F=e.entanglements,J=e.expirationTimes,ue=e.hiddenUpdates;for(u=I&~u;0<u;){var be=31-gt(u),Ae=1<<be;F[be]=0,J[be]=-1;var de=ue[be];if(de!==null)for(ue[be]=null,be=0;be<de.length;be++){var ye=de[be];ye!==null&&(ye.lane&=-536870913)}u&=~Ae}m!==0&&Tt(e,m,0),S!==0&&b===0&&e.tag!==0&&(e.suspendedLanes|=S&~(I&~s))}function Tt(e,s,u){e.pendingLanes|=s,e.suspendedLanes&=~s;var m=31-gt(s);e.entangledLanes|=s,e.entanglements[m]=e.entanglements[m]|1073741824|u&261930}function On(e,s){var u=e.entangledLanes|=s;for(e=e.entanglements;u;){var m=31-gt(u),b=1<<m;b&s|e[m]&s&&(e[m]|=s),u&=~b}}function ds(e,s){var u=s&-s;return u=(u&42)!==0?1:yn(u),(u&(e.suspendedLanes|s))!==0?0:u}function yn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Kt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ns(){var e=ie.p;return e!==0?e:(e=window.event,e===void 0?32:Mm(e.type))}function He(e,s){var u=ie.p;try{return ie.p=e,s()}finally{ie.p=u}}var hs=Math.random().toString(36).slice(2),Ee="__reactFiber$"+hs,_e="__reactProps$"+hs,Ve="__reactContainer$"+hs,Dn="__reactEvents$"+hs,Vs="__reactListeners$"+hs,fs="__reactHandles$"+hs,Wi="__reactResources$"+hs,fi="__reactMarker$"+hs;function Ms(e){delete e[Ee],delete e[_e],delete e[Dn],delete e[Vs],delete e[fs]}function Ln(e){var s=e[Ee];if(s)return s;for(var u=e.parentNode;u;){if(s=u[Ve]||u[Ee]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(e=xm(e);e!==null;){if(u=e[Ee])return u;e=xm(e)}return s}e=u,u=e.parentNode}return null}function Zt(e){if(e=e[Ee]||e[Ve]){var s=e.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return e}return null}function _r(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(c(33))}function Ss(e){var s=e[Wi];return s||(s=e[Wi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Bn(e){e[fi]=!0}var Re=new Set,sc={};function en(e,s){Gs(e,s),Gs(e+"Capture",s)}function Gs(e,s){for(sc[e]=s,e=0;e<s.length;e++)Re.add(s[e])}var td=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Ft={};function jt(e){return ht.call(Ft,e)?!0:ht.call(Ht,e)?!1:td.test(e)?Ft[e]=!0:(Ht[e]=!0,!1)}function Sr(e,s,u){if(jt(s))if(u===null)e.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var m=s.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+u)}}function Er(e,s,u){if(u===null)e.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+u)}}function Ys(e,s,u,m){if(m===null)e.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(u);return}e.setAttributeNS(s,u,""+m)}}function Gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ca(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nd(e,s,u){var m=Object.getOwnPropertyDescriptor(e.constructor.prototype,s);if(!e.hasOwnProperty(s)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,S=m.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return b.call(this)},set:function(I){u=""+I,S.call(this,I)}}),Object.defineProperty(e,s,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(I){u=""+I},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function bn(e){if(!e._valueTracker){var s=Ca(e)?"checked":"value";e._valueTracker=nd(e,s,""+e[s])}}function _a(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var u=s.getValue(),m="";return e&&(m=Ca(e)?e.checked?"true":"false":e.value),e=m,e!==u?(s.setValue(e),!0):!1}function Qi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ar=/[\n"\\]/g;function Nt(e){return e.replace(Ar,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Wn(e,s,u,m,b,S,I,F){e.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?e.type=I:e.removeAttribute("type"),s!=null?I==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+Gt(s)):e.value!==""+Gt(s)&&(e.value=""+Gt(s)):I!=="submit"&&I!=="reset"||e.removeAttribute("value"),s!=null?W(e,I,Gt(s)):u!=null?W(e,I,Gt(u)):m!=null&&e.removeAttribute("value"),b==null&&S!=null&&(e.defaultChecked=!!S),b!=null&&(e.checked=b&&typeof b!="function"&&typeof b!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?e.name=""+Gt(F):e.removeAttribute("name")}function le(e,s,u,m,b,S,I,F){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.type=S),s!=null||u!=null){if(!(S!=="submit"&&S!=="reset"||s!=null)){bn(e);return}u=u!=null?""+Gt(u):"",s=s!=null?""+Gt(s):u,F||s===e.value||(e.value=s),e.defaultValue=s}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,e.checked=F?e.checked:!!m,e.defaultChecked=!!m,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(e.name=I),bn(e)}function W(e,s,u){s==="number"&&Qi(e.ownerDocument)===e||e.defaultValue===""+u||(e.defaultValue=""+u)}function Ze(e,s,u,m){if(e=e.options,s){s={};for(var b=0;b<u.length;b++)s["$"+u[b]]=!0;for(u=0;u<e.length;u++)b=s.hasOwnProperty("$"+e[u].value),e[u].selected!==b&&(e[u].selected=b),b&&m&&(e[u].defaultSelected=!0)}else{for(u=""+Gt(u),s=null,b=0;b<e.length;b++){if(e[b].value===u){e[b].selected=!0,m&&(e[b].defaultSelected=!0);return}s!==null||e[b].disabled||(s=e[b])}s!==null&&(s.selected=!0)}}function Vn(e,s,u){if(s!=null&&(s=""+Gt(s),s!==e.value&&(e.value=s),u==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=u!=null?""+Gt(u):""}function Es(e,s,u,m){if(s==null){if(m!=null){if(u!=null)throw Error(c(92));if(V(m)){if(1<m.length)throw Error(c(93));m=m[0]}u=m}u==null&&(u=""),s=u}u=Gt(s),e.defaultValue=u,m=e.textContent,m===u&&m!==""&&m!==null&&(e.value=m),bn(e)}function Nr(e,s){if(s){var u=e.firstChild;if(u&&u===e.lastChild&&u.nodeType===3){u.nodeValue=s;return}}e.textContent=s}var Zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function As(e,s,u){var m=s.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":m?e.setProperty(s,u):typeof u!="number"||u===0||Zo.has(s)?s==="float"?e.cssFloat=u:e[s]=(""+u).trim():e[s]=u+"px"}function at(e,s,u){if(s!=null&&typeof s!="object")throw Error(c(62));if(e=e.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||s!=null&&s.hasOwnProperty(m)||(m.indexOf("--")===0?e.setProperty(m,""):m==="float"?e.cssFloat="":e[m]="");for(var b in s)m=s[b],s.hasOwnProperty(b)&&u[b]!==m&&As(e,b,m)}else for(var S in s)s.hasOwnProperty(S)&&As(e,S,s[S])}function fn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ac=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tr(e){return sd.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ks(){}var gi=null;function $o(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vn=null,ca=null;function Sa(e){var s=Zt(e);if(s&&(e=s.stateNode)){var u=e[_e]||null;e:switch(e=s.stateNode,s.type){case"input":if(Wn(e,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),s=u.name,u.type==="radio"&&s!=null){for(u=e;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Nt(""+s)+'"][type="radio"]'),s=0;s<u.length;s++){var m=u[s];if(m!==e&&m.form===e.form){var b=m[_e]||null;if(!b)throw Error(c(90));Wn(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(s=0;s<u.length;s++)m=u[s],m.form===e.form&&_a(m)}break e;case"textarea":Vn(e,u.value,u.defaultValue);break e;case"select":s=u.value,s!=null&&Ze(e,!!u.multiple,s,!1)}}}var it=!1;function rc(e,s,u){if(it)return e(s,u);it=!0;try{var m=e(s);return m}finally{if(it=!1,(vn!==null||ca!==null)&&(Kc(),vn&&(s=vn,e=ca,ca=vn=null,Sa(s),e)))for(s=0;s<e.length;s++)Sa(e[s])}}function pt(e,s){var u=e.stateNode;if(u===null)return null;var m=u[_e]||null;if(m===null)return null;u=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(e=e.type,m=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!m;break e;default:e=!1}if(e)return null;if(u&&typeof u!="function")throw Error(c(231,s,typeof u));return u}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(gn)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{Jo=!1}var Ea=null,Aa=null,Ki=null;function jr(){if(Ki)return Ki;var e,s=Aa,u=s.length,m,b="value"in Ea?Ea.value:Ea.textContent,S=b.length;for(e=0;e<u&&s[e]===b[e];e++);var I=u-e;for(m=1;m<=I&&s[u-m]===b[S-m];m++);return Ki=b.slice(e,1<m?1-m:void 0)}function Ba(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Ua(){return!0}function el(){return!1}function Qn(e){function s(u,m,b,S,I){this._reactName=u,this._targetInst=b,this.type=m,this.nativeEvent=S,this.target=I,this.currentTarget=null;for(var F in e)e.hasOwnProperty(F)&&(u=e[F],this[F]=u?u(S):S[F]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ua:el,this.isPropagationStopped=el,this}return N(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),s}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ss=Qn(Xs),Rr=N({},Xs,{view:0,detail:0}),ic=Qn(Rr),Zi,tl,mi,$i=N({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mi&&(mi&&e.type==="mousemove"?(Zi=e.screenX-mi.screenX,tl=e.screenY-mi.screenY):tl=Zi=0,mi=e),Zi)},movementY:function(e){return"movementY"in e?e.movementY:tl}}),$t=Qn($i),oc=N({},$i,{dataTransfer:0}),Ji=Qn(oc),Pa=N({},Rr,{relatedTarget:0}),nl=Qn(Pa),ge=N({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),_t=Qn(ge),as=N({},Xs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eo=Qn(as),lc=N({},Xs,{data:0}),cc=Qn(lc),ad={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gn(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=sl[e])?!!s[e]:!1}function pi(){return Gn}var En=N({},Rr,{key:function(e){if(e.key){var s=ad[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(e){return e.type==="keypress"?Ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),to=Qn(En),Qa=N({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tn=Qn(Qa),ot=N({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),id=Qn(ot),mn=N({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ka=Qn(mn),Ir=N({},$i,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),od=Qn(Ir),ua=N({},Xs,{newState:0,oldState:0}),al=Qn(ua),uc=[9,13,27,32],xi=gn&&"CompositionEvent"in window,Or=null;gn&&"documentMode"in document&&(Or=document.documentMode);var dc=gn&&"TextEvent"in window&&!Or,hc=gn&&(!xi||Or&&8<Or&&11>=Or),Za=" ",no=!1;function fc(e,s){switch(e){case"keyup":return uc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kr=!1;function za(e,s){switch(e){case"compositionend":return Mr(s);case"keypress":return s.which!==32?null:(no=!0,Za);case"textInput":return e=s.data,e===Za&&no?null:e;default:return null}}function so(e,s){if(kr)return e==="compositionend"||!xi&&fc(e,s)?(e=jr(),Ki=Aa=Ea=null,kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hc&&s.locale!=="ko"?null:s.data;default:return null}}var Ds={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rl(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Ds[e.type]:s==="textarea"}function Ws(e,s,u,m){vn?ca?ca.push(m):ca=[m]:vn=m,s=su(s,"onChange"),0<s.length&&(u=new ss("onChange","change",null,u,m),e.push({event:u,listeners:s}))}var yi=null,$a=null;function ld(e){sm(e,0)}function wi(e){var s=_r(e);if(_a(s))return e}function Qs(e,s){if(e==="change")return s}var gc=!1;if(gn){var bi;if(gn){var Ja="oninput"in document;if(!Ja){var kt=document.createElement("div");kt.setAttribute("oninput","return;"),Ja=typeof kt.oninput=="function"}bi=Ja}else bi=!1;gc=bi&&(!document.documentMode||9<document.documentMode)}function vi(){yi&&(yi.detachEvent("onpropertychange",k),$a=yi=null)}function k(e){if(e.propertyName==="value"&&wi($a)){var s=[];Ws(s,$a,e,$o(e)),rc(ld,s)}}function t(e,s,u){e==="focusin"?(vi(),yi=s,$a=u,yi.attachEvent("onpropertychange",k)):e==="focusout"&&vi()}function r(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wi($a)}function l(e,s){if(e==="click")return wi(s)}function d(e,s){if(e==="input"||e==="change")return wi(s)}function g(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var p=typeof Object.is=="function"?Object.is:g;function y(e,s){if(p(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var u=Object.keys(e),m=Object.keys(s);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var b=u[m];if(!ht.call(s,b)||!p(e[b],s[b]))return!1}return!0}function _(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E(e,s){var u=_(e);e=0;for(var m;u;){if(u.nodeType===3){if(m=e+u.textContent.length,e<=s&&m>=s)return{node:u,offset:s-e};e=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=_(u)}}function j(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?j(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function L(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Qi(e.document);s instanceof e.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)e=s.contentWindow;else break;s=Qi(e.document)}return s}function z(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var K=gn&&"documentMode"in document&&11>=document.documentMode,te=null,se=null,oe=null,fe=!1;function Pe(e,s,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;fe||te==null||te!==Qi(m)||(m=te,"selectionStart"in m&&z(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),oe&&y(oe,m)||(oe=m,m=su(se,"onSelect"),0<m.length&&(s=new ss("onSelect","select",null,s,u),e.push({event:s,listeners:m}),s.target=te)))}function Be(e,s){var u={};return u[e.toLowerCase()]=s.toLowerCase(),u["Webkit"+e]="webkit"+s,u["Moz"+e]="moz"+s,u}var Ie={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionrun:Be("Transition","TransitionRun"),transitionstart:Be("Transition","TransitionStart"),transitioncancel:Be("Transition","TransitionCancel"),transitionend:Be("Transition","TransitionEnd")},Et={},yt={};gn&&(yt=document.createElement("div").style,"AnimationEvent"in window||(delete Ie.animationend.animation,delete Ie.animationiteration.animation,delete Ie.animationstart.animation),"TransitionEvent"in window||delete Ie.transitionend.transition);function Un(e){if(Et[e])return Et[e];if(!Ie[e])return e;var s=Ie[e],u;for(u in s)if(s.hasOwnProperty(u)&&u in yt)return Et[e]=s[u];return e}var Ls=Un("animationend"),gs=Un("animationiteration"),nn=Un("animationstart"),rs=Un("transitionrun"),Ns=Un("transitionstart"),Dr=Un("transitioncancel"),er=Un("transitionend"),mc=new Map,il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");il.push("scrollEnd");function Na(e,s){mc.set(e,s),en(s,[e])}var pc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},da=[],ao=0,cd=0;function xc(){for(var e=ao,s=cd=ao=0;s<e;){var u=da[s];da[s++]=null;var m=da[s];da[s++]=null;var b=da[s];da[s++]=null;var S=da[s];if(da[s++]=null,m!==null&&b!==null){var I=m.pending;I===null?b.next=b:(b.next=I.next,I.next=b),m.pending=b}S!==0&&U0(u,b,S)}}function yc(e,s,u,m){da[ao++]=e,da[ao++]=s,da[ao++]=u,da[ao++]=m,cd|=m,e.lanes|=m,e=e.alternate,e!==null&&(e.lanes|=m)}function ud(e,s,u,m){return yc(e,s,u,m),wc(e)}function Ci(e,s){return yc(e,null,null,s),wc(e)}function U0(e,s,u){e.lanes|=u;var m=e.alternate;m!==null&&(m.lanes|=u);for(var b=!1,S=e.return;S!==null;)S.childLanes|=u,m=S.alternate,m!==null&&(m.childLanes|=u),S.tag===22&&(e=S.stateNode,e===null||e._visibility&1||(b=!0)),e=S,S=S.return;return e.tag===3?(S=e.stateNode,b&&s!==null&&(b=31-gt(u),e=S.hiddenUpdates,m=e[b],m===null?e[b]=[s]:m.push(s),s.lane=u|536870912),S):null}function wc(e){if(50<Tl)throw Tl=0,wh=null,Error(c(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var ro={};function yy(e,s,u,m){this.tag=e,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,s,u,m){return new yy(e,s,u,m)}function dd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tr(e,s){var u=e.alternate;return u===null?(u=Ks(e.tag,s,e.key,e.mode),u.elementType=e.elementType,u.type=e.type,u.stateNode=e.stateNode,u.alternate=e,e.alternate=u):(u.pendingProps=s,u.type=e.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=e.flags&65011712,u.childLanes=e.childLanes,u.lanes=e.lanes,u.child=e.child,u.memoizedProps=e.memoizedProps,u.memoizedState=e.memoizedState,u.updateQueue=e.updateQueue,s=e.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=e.sibling,u.index=e.index,u.ref=e.ref,u.refCleanup=e.refCleanup,u}function P0(e,s){e.flags&=65011714;var u=e.alternate;return u===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=u.childLanes,e.lanes=u.lanes,e.child=u.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=u.memoizedProps,e.memoizedState=u.memoizedState,e.updateQueue=u.updateQueue,e.type=u.type,s=u.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function bc(e,s,u,m,b,S){var I=0;if(m=e,typeof e=="function")dd(e)&&(I=1);else if(typeof e=="string")I=_w(e,u,Ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case q:return e=Ks(31,u,s,b),e.elementType=q,e.lanes=S,e;case D:return _i(u.children,b,S,s);case U:I=8,b|=24;break;case H:return e=Ks(12,u,s,b|2),e.elementType=H,e.lanes=S,e;case Z:return e=Ks(13,u,s,b),e.elementType=Z,e.lanes=S,e;case Y:return e=Ks(19,u,s,b),e.elementType=Y,e.lanes=S,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:I=10;break e;case B:I=9;break e;case Q:I=11;break e;case X:I=14;break e;case ee:I=16,m=null;break e}I=29,u=Error(c(130,e===null?"null":typeof e,"")),m=null}return s=Ks(I,u,s,b),s.elementType=e,s.type=m,s.lanes=S,s}function _i(e,s,u,m){return e=Ks(7,e,m,s),e.lanes=u,e}function hd(e,s,u){return e=Ks(6,e,null,s),e.lanes=u,e}function z0(e){var s=Ks(18,null,null,0);return s.stateNode=e,s}function fd(e,s,u){return s=Ks(4,e.children!==null?e.children:[],e.key,s),s.lanes=u,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var F0=new WeakMap;function ha(e,s){if(typeof e=="object"&&e!==null){var u=F0.get(e);return u!==void 0?u:(s={value:e,source:s,stack:At(s)},F0.set(e,s),s)}return{value:e,source:s,stack:At(s)}}var io=[],oo=0,vc=null,ol=0,fa=[],ga=0,Lr=null,Fa=1,Ha="";function nr(e,s){io[oo++]=ol,io[oo++]=vc,vc=e,ol=s}function H0(e,s,u){fa[ga++]=Fa,fa[ga++]=Ha,fa[ga++]=Lr,Lr=e;var m=Fa;e=Ha;var b=32-gt(m)-1;m&=~(1<<b),u+=1;var S=32-gt(s)+b;if(30<S){var I=b-b%5;S=(m&(1<<I)-1).toString(32),m>>=I,b-=I,Fa=1<<32-gt(s)+b|u<<b|m,Ha=S+e}else Fa=1<<S|u<<b|m,Ha=e}function gd(e){e.return!==null&&(nr(e,1),H0(e,1,0))}function md(e){for(;e===vc;)vc=io[--oo],io[oo]=null,ol=io[--oo],io[oo]=null;for(;e===Lr;)Lr=fa[--ga],fa[ga]=null,Ha=fa[--ga],fa[ga]=null,Fa=fa[--ga],fa[ga]=null}function q0(e,s){fa[ga++]=Fa,fa[ga++]=Ha,fa[ga++]=Lr,Fa=s.id,Ha=s.overflow,Lr=e}var ms=null,Cn=null,zt=!1,Br=null,ma=!1,pd=Error(c(519));function Ur(e){var s=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ll(ha(s,e)),pd}function V0(e){var s=e.stateNode,u=e.type,m=e.memoizedProps;switch(s[Ee]=e,s[_e]=m,u){case"dialog":It("cancel",s),It("close",s);break;case"iframe":case"object":case"embed":It("load",s);break;case"video":case"audio":for(u=0;u<Rl.length;u++)It(Rl[u],s);break;case"source":It("error",s);break;case"img":case"image":case"link":It("error",s),It("load",s);break;case"details":It("toggle",s);break;case"input":It("invalid",s),le(s,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":It("invalid",s);break;case"textarea":It("invalid",s),Es(s,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||s.textContent===""+u||m.suppressHydrationWarning===!0||om(s.textContent,u)?(m.popover!=null&&(It("beforetoggle",s),It("toggle",s)),m.onScroll!=null&&It("scroll",s),m.onScrollEnd!=null&&It("scrollend",s),m.onClick!=null&&(s.onclick=ks),s=!0):s=!1,s||Ur(e,!0)}function G0(e){for(ms=e.return;ms;)switch(ms.tag){case 5:case 31:case 13:ma=!1;return;case 27:case 3:ma=!0;return;default:ms=ms.return}}function lo(e){if(e!==ms)return!1;if(!zt)return G0(e),zt=!0,!1;var s=e.tag,u;if((u=s!==3&&s!==27)&&((u=s===5)&&(u=e.type,u=!(u!=="form"&&u!=="button")||kh(e.type,e.memoizedProps)),u=!u),u&&Cn&&Ur(e),G0(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Cn=pm(e)}else if(s===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Cn=pm(e)}else s===27?(s=Cn,$r(e.type)?(e=Ph,Ph=null,Cn=e):Cn=s):Cn=ms?xa(e.stateNode.nextSibling):null;return!0}function Si(){Cn=ms=null,zt=!1}function xd(){var e=Br;return e!==null&&(zs===null?zs=e:zs.push.apply(zs,e),Br=null),e}function ll(e){Br===null?Br=[e]:Br.push(e)}var yd=ne(null),Ei=null,sr=null;function Pr(e,s,u){Le(yd,s._currentValue),s._currentValue=u}function ar(e){e._currentValue=yd.current,pe(yd)}function wd(e,s,u){for(;e!==null;){var m=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),e===u)break;e=e.return}}function bd(e,s,u,m){var b=e.child;for(b!==null&&(b.return=e);b!==null;){var S=b.dependencies;if(S!==null){var I=b.child;S=S.firstContext;e:for(;S!==null;){var F=S;S=b;for(var J=0;J<s.length;J++)if(F.context===s[J]){S.lanes|=u,F=S.alternate,F!==null&&(F.lanes|=u),wd(S.return,u,e),m||(I=null);break e}S=F.next}}else if(b.tag===18){if(I=b.return,I===null)throw Error(c(341));I.lanes|=u,S=I.alternate,S!==null&&(S.lanes|=u),wd(I,u,e),I=null}else I=b.child;if(I!==null)I.return=b;else for(I=b;I!==null;){if(I===e){I=null;break}if(b=I.sibling,b!==null){b.return=I.return,I=b;break}I=I.return}b=I}}function co(e,s,u,m){e=null;for(var b=s,S=!1;b!==null;){if(!S){if((b.flags&524288)!==0)S=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var I=b.alternate;if(I===null)throw Error(c(387));if(I=I.memoizedProps,I!==null){var F=b.type;p(b.pendingProps.value,I.value)||(e!==null?e.push(F):e=[F])}}else if(b===$e.current){if(I=b.alternate,I===null)throw Error(c(387));I.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(e!==null?e.push(Dl):e=[Dl])}b=b.return}e!==null&&bd(s,e,u,m),s.flags|=262144}function Cc(e){for(e=e.firstContext;e!==null;){if(!p(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ai(e){Ei=e,sr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ps(e){return Y0(Ei,e)}function _c(e,s){return Ei===null&&Ai(e),Y0(e,s)}function Y0(e,s){var u=s._currentValue;if(s={context:s,memoizedValue:u,next:null},sr===null){if(e===null)throw Error(c(308));sr=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else sr=sr.next=s;return u}var wy=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(u,m){e.push(m)}};this.abort=function(){s.aborted=!0,e.forEach(function(u){return u()})}},by=o.unstable_scheduleCallback,vy=o.unstable_NormalPriority,Kn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vd(){return{controller:new wy,data:new Map,refCount:0}}function cl(e){e.refCount--,e.refCount===0&&by(vy,function(){e.controller.abort()})}var ul=null,Cd=0,uo=0,ho=null;function Cy(e,s){if(ul===null){var u=ul=[];Cd=0,uo=Eh(),ho={status:"pending",value:void 0,then:function(m){u.push(m)}}}return Cd++,s.then(X0,X0),s}function X0(){if(--Cd===0&&ul!==null){ho!==null&&(ho.status="fulfilled");var e=ul;ul=null,uo=0,ho=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function _y(e,s){var u=[],m={status:"pending",value:null,reason:null,then:function(b){u.push(b)}};return e.then(function(){m.status="fulfilled",m.value=s;for(var b=0;b<u.length;b++)(0,u[b])(s)},function(b){for(m.status="rejected",m.reason=b,b=0;b<u.length;b++)(0,u[b])(void 0)}),m}var W0=$.S;$.S=function(e,s){Ig=Fe(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Cy(e,s),W0!==null&&W0(e,s)};var Ni=ne(null);function _d(){var e=Ni.current;return e!==null?e:pn.pooledCache}function Sc(e,s){s===null?Le(Ni,Ni.current):Le(Ni,s.pool)}function Q0(){var e=_d();return e===null?null:{parent:Kn._currentValue,pool:e}}var fo=Error(c(460)),Sd=Error(c(474)),Ec=Error(c(542)),Ac={then:function(){}};function K0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Z0(e,s,u){switch(u=e[u],u===void 0?e.push(s):u!==s&&(s.then(ks,ks),s=u),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,J0(e),e;default:if(typeof s.status=="string")s.then(ks,ks);else{if(e=pn,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=s,e.status="pending",e.then(function(m){if(s.status==="pending"){var b=s;b.status="fulfilled",b.value=m}},function(m){if(s.status==="pending"){var b=s;b.status="rejected",b.reason=m}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,J0(e),e}throw ji=s,fo}}function Ti(e){try{var s=e._init;return s(e._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ji=u,fo):u}}var ji=null;function $0(){if(ji===null)throw Error(c(459));var e=ji;return ji=null,e}function J0(e){if(e===fo||e===Ec)throw Error(c(483))}var go=null,dl=0;function Nc(e){var s=dl;return dl+=1,go===null&&(go=[]),Z0(go,e,s)}function hl(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Tc(e,s){throw s.$$typeof===R?Error(c(525)):(e=Object.prototype.toString.call(s),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function e1(e){function s(re,ae){if(e){var ce=re.deletions;ce===null?(re.deletions=[ae],re.flags|=16):ce.push(ae)}}function u(re,ae){if(!e)return null;for(;ae!==null;)s(re,ae),ae=ae.sibling;return null}function m(re){for(var ae=new Map;re!==null;)re.key!==null?ae.set(re.key,re):ae.set(re.index,re),re=re.sibling;return ae}function b(re,ae){return re=tr(re,ae),re.index=0,re.sibling=null,re}function S(re,ae,ce){return re.index=ce,e?(ce=re.alternate,ce!==null?(ce=ce.index,ce<ae?(re.flags|=67108866,ae):ce):(re.flags|=67108866,ae)):(re.flags|=1048576,ae)}function I(re){return e&&re.alternate===null&&(re.flags|=67108866),re}function F(re,ae,ce,Se){return ae===null||ae.tag!==6?(ae=hd(ce,re.mode,Se),ae.return=re,ae):(ae=b(ae,ce),ae.return=re,ae)}function J(re,ae,ce,Se){var rt=ce.type;return rt===D?be(re,ae,ce.props.children,Se,ce.key):ae!==null&&(ae.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ee&&Ti(rt)===ae.type)?(ae=b(ae,ce.props),hl(ae,ce),ae.return=re,ae):(ae=bc(ce.type,ce.key,ce.props,null,re.mode,Se),hl(ae,ce),ae.return=re,ae)}function ue(re,ae,ce,Se){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==ce.containerInfo||ae.stateNode.implementation!==ce.implementation?(ae=fd(ce,re.mode,Se),ae.return=re,ae):(ae=b(ae,ce.children||[]),ae.return=re,ae)}function be(re,ae,ce,Se,rt){return ae===null||ae.tag!==7?(ae=_i(ce,re.mode,Se,rt),ae.return=re,ae):(ae=b(ae,ce),ae.return=re,ae)}function Ae(re,ae,ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=hd(""+ae,re.mode,ce),ae.return=re,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case T:return ce=bc(ae.type,ae.key,ae.props,null,re.mode,ce),hl(ce,ae),ce.return=re,ce;case O:return ae=fd(ae,re.mode,ce),ae.return=re,ae;case ee:return ae=Ti(ae),Ae(re,ae,ce)}if(V(ae)||me(ae))return ae=_i(ae,re.mode,ce,null),ae.return=re,ae;if(typeof ae.then=="function")return Ae(re,Nc(ae),ce);if(ae.$$typeof===P)return Ae(re,_c(re,ae),ce);Tc(re,ae)}return null}function de(re,ae,ce,Se){var rt=ae!==null?ae.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return rt!==null?null:F(re,ae,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case T:return ce.key===rt?J(re,ae,ce,Se):null;case O:return ce.key===rt?ue(re,ae,ce,Se):null;case ee:return ce=Ti(ce),de(re,ae,ce,Se)}if(V(ce)||me(ce))return rt!==null?null:be(re,ae,ce,Se,null);if(typeof ce.then=="function")return de(re,ae,Nc(ce),Se);if(ce.$$typeof===P)return de(re,ae,_c(re,ce),Se);Tc(re,ce)}return null}function ye(re,ae,ce,Se,rt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return re=re.get(ce)||null,F(ae,re,""+Se,rt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case T:return re=re.get(Se.key===null?ce:Se.key)||null,J(ae,re,Se,rt);case O:return re=re.get(Se.key===null?ce:Se.key)||null,ue(ae,re,Se,rt);case ee:return Se=Ti(Se),ye(re,ae,ce,Se,rt)}if(V(Se)||me(Se))return re=re.get(ce)||null,be(ae,re,Se,rt,null);if(typeof Se.then=="function")return ye(re,ae,ce,Nc(Se),rt);if(Se.$$typeof===P)return ye(re,ae,ce,_c(ae,Se),rt);Tc(ae,Se)}return null}function Qe(re,ae,ce,Se){for(var rt=null,Yt=null,et=ae,St=ae=0,Lt=null;et!==null&&St<ce.length;St++){et.index>St?(Lt=et,et=null):Lt=et.sibling;var Xt=de(re,et,ce[St],Se);if(Xt===null){et===null&&(et=Lt);break}e&&et&&Xt.alternate===null&&s(re,et),ae=S(Xt,ae,St),Yt===null?rt=Xt:Yt.sibling=Xt,Yt=Xt,et=Lt}if(St===ce.length)return u(re,et),zt&&nr(re,St),rt;if(et===null){for(;St<ce.length;St++)et=Ae(re,ce[St],Se),et!==null&&(ae=S(et,ae,St),Yt===null?rt=et:Yt.sibling=et,Yt=et);return zt&&nr(re,St),rt}for(et=m(et);St<ce.length;St++)Lt=ye(et,re,St,ce[St],Se),Lt!==null&&(e&&Lt.alternate!==null&&et.delete(Lt.key===null?St:Lt.key),ae=S(Lt,ae,St),Yt===null?rt=Lt:Yt.sibling=Lt,Yt=Lt);return e&&et.forEach(function(si){return s(re,si)}),zt&&nr(re,St),rt}function ut(re,ae,ce,Se){if(ce==null)throw Error(c(151));for(var rt=null,Yt=null,et=ae,St=ae=0,Lt=null,Xt=ce.next();et!==null&&!Xt.done;St++,Xt=ce.next()){et.index>St?(Lt=et,et=null):Lt=et.sibling;var si=de(re,et,Xt.value,Se);if(si===null){et===null&&(et=Lt);break}e&&et&&si.alternate===null&&s(re,et),ae=S(si,ae,St),Yt===null?rt=si:Yt.sibling=si,Yt=si,et=Lt}if(Xt.done)return u(re,et),zt&&nr(re,St),rt;if(et===null){for(;!Xt.done;St++,Xt=ce.next())Xt=Ae(re,Xt.value,Se),Xt!==null&&(ae=S(Xt,ae,St),Yt===null?rt=Xt:Yt.sibling=Xt,Yt=Xt);return zt&&nr(re,St),rt}for(et=m(et);!Xt.done;St++,Xt=ce.next())Xt=ye(et,re,St,Xt.value,Se),Xt!==null&&(e&&Xt.alternate!==null&&et.delete(Xt.key===null?St:Xt.key),ae=S(Xt,ae,St),Yt===null?rt=Xt:Yt.sibling=Xt,Yt=Xt);return e&&et.forEach(function(kw){return s(re,kw)}),zt&&nr(re,St),rt}function hn(re,ae,ce,Se){if(typeof ce=="object"&&ce!==null&&ce.type===D&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case T:e:{for(var rt=ce.key;ae!==null;){if(ae.key===rt){if(rt=ce.type,rt===D){if(ae.tag===7){u(re,ae.sibling),Se=b(ae,ce.props.children),Se.return=re,re=Se;break e}}else if(ae.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ee&&Ti(rt)===ae.type){u(re,ae.sibling),Se=b(ae,ce.props),hl(Se,ce),Se.return=re,re=Se;break e}u(re,ae);break}else s(re,ae);ae=ae.sibling}ce.type===D?(Se=_i(ce.props.children,re.mode,Se,ce.key),Se.return=re,re=Se):(Se=bc(ce.type,ce.key,ce.props,null,re.mode,Se),hl(Se,ce),Se.return=re,re=Se)}return I(re);case O:e:{for(rt=ce.key;ae!==null;){if(ae.key===rt)if(ae.tag===4&&ae.stateNode.containerInfo===ce.containerInfo&&ae.stateNode.implementation===ce.implementation){u(re,ae.sibling),Se=b(ae,ce.children||[]),Se.return=re,re=Se;break e}else{u(re,ae);break}else s(re,ae);ae=ae.sibling}Se=fd(ce,re.mode,Se),Se.return=re,re=Se}return I(re);case ee:return ce=Ti(ce),hn(re,ae,ce,Se)}if(V(ce))return Qe(re,ae,ce,Se);if(me(ce)){if(rt=me(ce),typeof rt!="function")throw Error(c(150));return ce=rt.call(ce),ut(re,ae,ce,Se)}if(typeof ce.then=="function")return hn(re,ae,Nc(ce),Se);if(ce.$$typeof===P)return hn(re,ae,_c(re,ce),Se);Tc(re,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ae!==null&&ae.tag===6?(u(re,ae.sibling),Se=b(ae,ce),Se.return=re,re=Se):(u(re,ae),Se=hd(ce,re.mode,Se),Se.return=re,re=Se),I(re)):u(re,ae)}return function(re,ae,ce,Se){try{dl=0;var rt=hn(re,ae,ce,Se);return go=null,rt}catch(et){if(et===fo||et===Ec)throw et;var Yt=Ks(29,et,null,re.mode);return Yt.lanes=Se,Yt.return=re,Yt}finally{}}}var Ri=e1(!0),t1=e1(!1),zr=!1;function Ed(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(e,s,u){var m=e.updateQueue;if(m===null)return null;if(m=m.shared,(Jt&2)!==0){var b=m.pending;return b===null?s.next=s:(s.next=b.next,b.next=s),m.pending=s,s=wc(e),U0(e,null,u),s}return yc(e,m,s,u),wc(e)}function fl(e,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194048)!==0)){var m=s.lanes;m&=e.pendingLanes,u|=m,s.lanes=u,On(e,u)}}function Nd(e,s){var u=e.updateQueue,m=e.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var b=null,S=null;if(u=u.firstBaseUpdate,u!==null){do{var I={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};S===null?b=S=I:S=S.next=I,u=u.next}while(u!==null);S===null?b=S=s:S=S.next=s}else b=S=s;u={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},e.updateQueue=u;return}e=u.lastBaseUpdate,e===null?u.firstBaseUpdate=s:e.next=s,u.lastBaseUpdate=s}var Td=!1;function gl(){if(Td){var e=ho;if(e!==null)throw e}}function ml(e,s,u,m){Td=!1;var b=e.updateQueue;zr=!1;var S=b.firstBaseUpdate,I=b.lastBaseUpdate,F=b.shared.pending;if(F!==null){b.shared.pending=null;var J=F,ue=J.next;J.next=null,I===null?S=ue:I.next=ue,I=J;var be=e.alternate;be!==null&&(be=be.updateQueue,F=be.lastBaseUpdate,F!==I&&(F===null?be.firstBaseUpdate=ue:F.next=ue,be.lastBaseUpdate=J))}if(S!==null){var Ae=b.baseState;I=0,be=ue=J=null,F=S;do{var de=F.lane&-536870913,ye=de!==F.lane;if(ye?(Dt&de)===de:(m&de)===de){de!==0&&de===uo&&(Td=!0),be!==null&&(be=be.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Qe=e,ut=F;de=s;var hn=u;switch(ut.tag){case 1:if(Qe=ut.payload,typeof Qe=="function"){Ae=Qe.call(hn,Ae,de);break e}Ae=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=ut.payload,de=typeof Qe=="function"?Qe.call(hn,Ae,de):Qe,de==null)break e;Ae=N({},Ae,de);break e;case 2:zr=!0}}de=F.callback,de!==null&&(e.flags|=64,ye&&(e.flags|=8192),ye=b.callbacks,ye===null?b.callbacks=[de]:ye.push(de))}else ye={lane:de,tag:F.tag,payload:F.payload,callback:F.callback,next:null},be===null?(ue=be=ye,J=Ae):be=be.next=ye,I|=de;if(F=F.next,F===null){if(F=b.shared.pending,F===null)break;ye=F,F=ye.next,ye.next=null,b.lastBaseUpdate=ye,b.shared.pending=null}}while(!0);be===null&&(J=Ae),b.baseState=J,b.firstBaseUpdate=ue,b.lastBaseUpdate=be,S===null&&(b.shared.lanes=0),Xr|=I,e.lanes=I,e.memoizedState=Ae}}function n1(e,s){if(typeof e!="function")throw Error(c(191,e));e.call(s)}function s1(e,s){var u=e.callbacks;if(u!==null)for(e.callbacks=null,e=0;e<u.length;e++)n1(u[e],s)}var mo=ne(null),jc=ne(0);function a1(e,s){e=fr,Le(jc,e),Le(mo,s),fr=e|s.baseLanes}function jd(){Le(jc,fr),Le(mo,mo.current)}function Rd(){fr=jc.current,pe(mo),pe(jc)}var Zs=ne(null),pa=null;function qr(e){var s=e.alternate;Le(Yn,Yn.current&1),Le(Zs,e),pa===null&&(s===null||mo.current!==null||s.memoizedState!==null)&&(pa=e)}function Id(e){Le(Yn,Yn.current),Le(Zs,e),pa===null&&(pa=e)}function r1(e){e.tag===22?(Le(Yn,Yn.current),Le(Zs,e),pa===null&&(pa=e)):Vr()}function Vr(){Le(Yn,Yn.current),Le(Zs,Zs.current)}function $s(e){pe(Zs),pa===e&&(pa=null),pe(Yn)}var Yn=ne(0);function Rc(e){for(var s=e;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Bh(u)||Uh(u)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rr=0,vt=null,un=null,Zn=null,Ic=!1,po=!1,Ii=!1,Oc=0,pl=0,xo=null,Sy=0;function Pn(){throw Error(c(321))}function Od(e,s){if(s===null)return!1;for(var u=0;u<s.length&&u<e.length;u++)if(!p(e[u],s[u]))return!1;return!0}function Md(e,s,u,m,b,S){return rr=S,vt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=e===null||e.memoizedState===null?H1:Wd,Ii=!1,S=u(m,b),Ii=!1,po&&(S=o1(s,u,m,b)),i1(e),S}function i1(e){$.H=wl;var s=un!==null&&un.next!==null;if(rr=0,Zn=un=vt=null,Ic=!1,pl=0,xo=null,s)throw Error(c(300));e===null||$n||(e=e.dependencies,e!==null&&Cc(e)&&($n=!0))}function o1(e,s,u,m){vt=e;var b=0;do{if(po&&(xo=null),pl=0,po=!1,25<=b)throw Error(c(301));if(b+=1,Zn=un=null,e.updateQueue!=null){var S=e.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}$.H=q1,S=s(u,m)}while(po);return S}function Ey(){var e=$.H,s=e.useState()[0];return s=typeof s.then=="function"?xl(s):s,e=e.useState()[0],(un!==null?un.memoizedState:null)!==e&&(vt.flags|=1024),s}function kd(){var e=Oc!==0;return Oc=0,e}function Dd(e,s,u){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~u}function Ld(e){if(Ic){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Ic=!1}rr=0,Zn=un=vt=null,po=!1,pl=Oc=0,xo=null}function Ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zn===null?vt.memoizedState=Zn=e:Zn=Zn.next=e,Zn}function Xn(){if(un===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=un.next;var s=Zn===null?vt.memoizedState:Zn.next;if(s!==null)Zn=s,un=e;else{if(e===null)throw vt.alternate===null?Error(c(467)):Error(c(310));un=e,e={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},Zn===null?vt.memoizedState=Zn=e:Zn=Zn.next=e}return Zn}function Mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(e){var s=pl;return pl+=1,xo===null&&(xo=[]),e=Z0(xo,e,s),s=vt,(Zn===null?s.memoizedState:Zn.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?H1:Wd),e}function kc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xl(e);if(e.$$typeof===P)return ps(e)}throw Error(c(438,String(e)))}function Bd(e){var s=null,u=vt.updateQueue;if(u!==null&&(s=u.memoCache),s==null){var m=vt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(s={data:m.data.map(function(b){return b.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),u===null&&(u=Mc(),vt.updateQueue=u),u.memoCache=s,u=s.data[s.index],u===void 0)for(u=s.data[s.index]=Array(e),m=0;m<e;m++)u[m]=xe;return s.index++,u}function ir(e,s){return typeof s=="function"?s(e):s}function Dc(e){var s=Xn();return Ud(s,un,e)}function Ud(e,s,u){var m=e.queue;if(m===null)throw Error(c(311));m.lastRenderedReducer=u;var b=e.baseQueue,S=m.pending;if(S!==null){if(b!==null){var I=b.next;b.next=S.next,S.next=I}s.baseQueue=b=S,m.pending=null}if(S=e.baseState,b===null)e.memoizedState=S;else{s=b.next;var F=I=null,J=null,ue=s,be=!1;do{var Ae=ue.lane&-536870913;if(Ae!==ue.lane?(Dt&Ae)===Ae:(rr&Ae)===Ae){var de=ue.revertLane;if(de===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ae===uo&&(be=!0);else if((rr&de)===de){ue=ue.next,de===uo&&(be=!0);continue}else Ae={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},J===null?(F=J=Ae,I=S):J=J.next=Ae,vt.lanes|=de,Xr|=de;Ae=ue.action,Ii&&u(S,Ae),S=ue.hasEagerState?ue.eagerState:u(S,Ae)}else de={lane:Ae,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},J===null?(F=J=de,I=S):J=J.next=de,vt.lanes|=Ae,Xr|=Ae;ue=ue.next}while(ue!==null&&ue!==s);if(J===null?I=S:J.next=F,!p(S,e.memoizedState)&&($n=!0,be&&(u=ho,u!==null)))throw u;e.memoizedState=S,e.baseState=I,e.baseQueue=J,m.lastRenderedState=S}return b===null&&(m.lanes=0),[e.memoizedState,m.dispatch]}function Pd(e){var s=Xn(),u=s.queue;if(u===null)throw Error(c(311));u.lastRenderedReducer=e;var m=u.dispatch,b=u.pending,S=s.memoizedState;if(b!==null){u.pending=null;var I=b=b.next;do S=e(S,I.action),I=I.next;while(I!==b);p(S,s.memoizedState)||($n=!0),s.memoizedState=S,s.baseQueue===null&&(s.baseState=S),u.lastRenderedState=S}return[S,m]}function l1(e,s,u){var m=vt,b=Xn(),S=zt;if(S){if(u===void 0)throw Error(c(407));u=u()}else u=s();var I=!p((un||b).memoizedState,u);if(I&&(b.memoizedState=u,$n=!0),b=b.queue,Hd(d1.bind(null,m,b,e),[e]),b.getSnapshot!==s||I||Zn!==null&&Zn.memoizedState.tag&1){if(m.flags|=2048,yo(9,{destroy:void 0},u1.bind(null,m,b,u,s),null),pn===null)throw Error(c(349));S||(rr&127)!==0||c1(m,s,u)}return u}function c1(e,s,u){e.flags|=16384,e={getSnapshot:s,value:u},s=vt.updateQueue,s===null?(s=Mc(),vt.updateQueue=s,s.stores=[e]):(u=s.stores,u===null?s.stores=[e]:u.push(e))}function u1(e,s,u,m){s.value=u,s.getSnapshot=m,h1(s)&&f1(e)}function d1(e,s,u){return u(function(){h1(s)&&f1(e)})}function h1(e){var s=e.getSnapshot;e=e.value;try{var u=s();return!p(e,u)}catch{return!0}}function f1(e){var s=Ci(e,2);s!==null&&Fs(s,e,2)}function zd(e){var s=Ts();if(typeof e=="function"){var u=e;if(e=u(),Ii){lt(!0);try{u()}finally{lt(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:e},s}function g1(e,s,u,m){return e.baseState=u,Ud(e,un,typeof m=="function"?m:ir)}function Ay(e,s,u,m,b){if(Uc(e))throw Error(c(485));if(e=s.action,e!==null){var S={payload:b,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){S.listeners.push(I)}};$.T!==null?u(!0):S.isTransition=!1,m(S),u=s.pending,u===null?(S.next=s.pending=S,m1(s,S)):(S.next=u.next,s.pending=u.next=S)}}function m1(e,s){var u=s.action,m=s.payload,b=e.state;if(s.isTransition){var S=$.T,I={};$.T=I;try{var F=u(b,m),J=$.S;J!==null&&J(I,F),p1(e,s,F)}catch(ue){Fd(e,s,ue)}finally{S!==null&&I.types!==null&&(S.types=I.types),$.T=S}}else try{S=u(b,m),p1(e,s,S)}catch(ue){Fd(e,s,ue)}}function p1(e,s,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){x1(e,s,m)},function(m){return Fd(e,s,m)}):x1(e,s,u)}function x1(e,s,u){s.status="fulfilled",s.value=u,y1(s),e.state=u,s=e.pending,s!==null&&(u=s.next,u===s?e.pending=null:(u=u.next,s.next=u,m1(e,u)))}function Fd(e,s,u){var m=e.pending;if(e.pending=null,m!==null){m=m.next;do s.status="rejected",s.reason=u,y1(s),s=s.next;while(s!==m)}e.action=null}function y1(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function w1(e,s){return s}function b1(e,s){if(zt){var u=pn.formState;if(u!==null){e:{var m=vt;if(zt){if(Cn){t:{for(var b=Cn,S=ma;b.nodeType!==8;){if(!S){b=null;break t}if(b=xa(b.nextSibling),b===null){b=null;break t}}S=b.data,b=S==="F!"||S==="F"?b:null}if(b){Cn=xa(b.nextSibling),m=b.data==="F!";break e}}Ur(m)}m=!1}m&&(s=u[0])}}return u=Ts(),u.memoizedState=u.baseState=s,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w1,lastRenderedState:s},u.queue=m,u=P1.bind(null,vt,m),m.dispatch=u,m=zd(!1),S=Xd.bind(null,vt,!1,m.queue),m=Ts(),b={state:s,dispatch:null,action:e,pending:null},m.queue=b,u=Ay.bind(null,vt,b,S,u),b.dispatch=u,m.memoizedState=e,[s,u,!1]}function v1(e){var s=Xn();return C1(s,un,e)}function C1(e,s,u){if(s=Ud(e,s,w1)[0],e=Dc(ir)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var m=xl(s)}catch(I){throw I===fo?Ec:I}else m=s;s=Xn();var b=s.queue,S=b.dispatch;return u!==s.memoizedState&&(vt.flags|=2048,yo(9,{destroy:void 0},Ny.bind(null,b,u),null)),[m,S,e]}function Ny(e,s){e.action=s}function _1(e){var s=Xn(),u=un;if(u!==null)return C1(s,u,e);Xn(),s=s.memoizedState,u=Xn();var m=u.queue.dispatch;return u.memoizedState=e,[s,m,!1]}function yo(e,s,u,m){return e={tag:e,create:u,deps:m,inst:s,next:null},s=vt.updateQueue,s===null&&(s=Mc(),vt.updateQueue=s),u=s.lastEffect,u===null?s.lastEffect=e.next=e:(m=u.next,u.next=e,e.next=m,s.lastEffect=e),e}function S1(){return Xn().memoizedState}function Lc(e,s,u,m){var b=Ts();vt.flags|=e,b.memoizedState=yo(1|s,{destroy:void 0},u,m===void 0?null:m)}function Bc(e,s,u,m){var b=Xn();m=m===void 0?null:m;var S=b.memoizedState.inst;un!==null&&m!==null&&Od(m,un.memoizedState.deps)?b.memoizedState=yo(s,S,u,m):(vt.flags|=e,b.memoizedState=yo(1|s,S,u,m))}function E1(e,s){Lc(8390656,8,e,s)}function Hd(e,s){Bc(2048,8,e,s)}function Ty(e){vt.flags|=4;var s=vt.updateQueue;if(s===null)s=Mc(),vt.updateQueue=s,s.events=[e];else{var u=s.events;u===null?s.events=[e]:u.push(e)}}function A1(e){var s=Xn().memoizedState;return Ty({ref:s,nextImpl:e}),function(){if((Jt&2)!==0)throw Error(c(440));return s.impl.apply(void 0,arguments)}}function N1(e,s){return Bc(4,2,e,s)}function T1(e,s){return Bc(4,4,e,s)}function j1(e,s){if(typeof s=="function"){e=e();var u=s(e);return function(){typeof u=="function"?u():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function R1(e,s,u){u=u!=null?u.concat([e]):null,Bc(4,4,j1.bind(null,s,e),u)}function qd(){}function I1(e,s){var u=Xn();s=s===void 0?null:s;var m=u.memoizedState;return s!==null&&Od(s,m[1])?m[0]:(u.memoizedState=[e,s],e)}function O1(e,s){var u=Xn();s=s===void 0?null:s;var m=u.memoizedState;if(s!==null&&Od(s,m[1]))return m[0];if(m=e(),Ii){lt(!0);try{e()}finally{lt(!1)}}return u.memoizedState=[m,s],m}function Vd(e,s,u){return u===void 0||(rr&1073741824)!==0&&(Dt&261930)===0?e.memoizedState=s:(e.memoizedState=u,e=Mg(),vt.lanes|=e,Xr|=e,u)}function M1(e,s,u,m){return p(u,s)?u:mo.current!==null?(e=Vd(e,u,m),p(e,s)||($n=!0),e):(rr&42)===0||(rr&1073741824)!==0&&(Dt&261930)===0?($n=!0,e.memoizedState=u):(e=Mg(),vt.lanes|=e,Xr|=e,s)}function k1(e,s,u,m,b){var S=ie.p;ie.p=S!==0&&8>S?S:8;var I=$.T,F={};$.T=F,Xd(e,!1,s,u);try{var J=b(),ue=$.S;if(ue!==null&&ue(F,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var be=_y(J,m);yl(e,s,be,ta(e))}else yl(e,s,m,ta(e))}catch(Ae){yl(e,s,{then:function(){},status:"rejected",reason:Ae},ta())}finally{ie.p=S,I!==null&&F.types!==null&&(I.types=F.types),$.T=I}}function jy(){}function Gd(e,s,u,m){if(e.tag!==5)throw Error(c(476));var b=D1(e).queue;k1(e,b,s,ke,u===null?jy:function(){return L1(e),u(m)})}function D1(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:ke},next:null};var u={};return s.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:u},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function L1(e){var s=D1(e);s.next===null&&(s=e.alternate.memoizedState),yl(e,s.next.queue,{},ta())}function Yd(){return ps(Dl)}function B1(){return Xn().memoizedState}function U1(){return Xn().memoizedState}function Ry(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var u=ta();e=Fr(u);var m=Hr(s,e,u);m!==null&&(Fs(m,s,u),fl(m,s,u)),s={cache:vd()},e.payload=s;return}s=s.return}}function Iy(e,s,u){var m=ta();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Uc(e)?z1(s,u):(u=ud(e,s,u,m),u!==null&&(Fs(u,e,m),F1(u,s,m)))}function P1(e,s,u){var m=ta();yl(e,s,u,m)}function yl(e,s,u,m){var b={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Uc(e))z1(s,b);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=s.lastRenderedReducer,S!==null))try{var I=s.lastRenderedState,F=S(I,u);if(b.hasEagerState=!0,b.eagerState=F,p(F,I))return yc(e,s,b,0),pn===null&&xc(),!1}catch{}finally{}if(u=ud(e,s,b,m),u!==null)return Fs(u,e,m),F1(u,s,m),!0}return!1}function Xd(e,s,u,m){if(m={lane:2,revertLane:Eh(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Uc(e)){if(s)throw Error(c(479))}else s=ud(e,u,m,2),s!==null&&Fs(s,e,2)}function Uc(e){var s=e.alternate;return e===vt||s!==null&&s===vt}function z1(e,s){po=Ic=!0;var u=e.pending;u===null?s.next=s:(s.next=u.next,u.next=s),e.pending=s}function F1(e,s,u){if((u&4194048)!==0){var m=s.lanes;m&=e.pendingLanes,u|=m,s.lanes=u,On(e,u)}}var wl={readContext:ps,use:kc,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};wl.useEffectEvent=Pn;var H1={readContext:ps,use:kc,useCallback:function(e,s){return Ts().memoizedState=[e,s===void 0?null:s],e},useContext:ps,useEffect:E1,useImperativeHandle:function(e,s,u){u=u!=null?u.concat([e]):null,Lc(4194308,4,j1.bind(null,s,e),u)},useLayoutEffect:function(e,s){return Lc(4194308,4,e,s)},useInsertionEffect:function(e,s){Lc(4,2,e,s)},useMemo:function(e,s){var u=Ts();s=s===void 0?null:s;var m=e();if(Ii){lt(!0);try{e()}finally{lt(!1)}}return u.memoizedState=[m,s],m},useReducer:function(e,s,u){var m=Ts();if(u!==void 0){var b=u(s);if(Ii){lt(!0);try{u(s)}finally{lt(!1)}}}else b=s;return m.memoizedState=m.baseState=b,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:b},m.queue=e,e=e.dispatch=Iy.bind(null,vt,e),[m.memoizedState,e]},useRef:function(e){var s=Ts();return e={current:e},s.memoizedState=e},useState:function(e){e=zd(e);var s=e.queue,u=P1.bind(null,vt,s);return s.dispatch=u,[e.memoizedState,u]},useDebugValue:qd,useDeferredValue:function(e,s){var u=Ts();return Vd(u,e,s)},useTransition:function(){var e=zd(!1);return e=k1.bind(null,vt,e.queue,!0,!1),Ts().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,u){var m=vt,b=Ts();if(zt){if(u===void 0)throw Error(c(407));u=u()}else{if(u=s(),pn===null)throw Error(c(349));(Dt&127)!==0||c1(m,s,u)}b.memoizedState=u;var S={value:u,getSnapshot:s};return b.queue=S,E1(d1.bind(null,m,S,e),[e]),m.flags|=2048,yo(9,{destroy:void 0},u1.bind(null,m,S,u,s),null),u},useId:function(){var e=Ts(),s=pn.identifierPrefix;if(zt){var u=Ha,m=Fa;u=(m&~(1<<32-gt(m)-1)).toString(32)+u,s="_"+s+"R_"+u,u=Oc++,0<u&&(s+="H"+u.toString(32)),s+="_"}else u=Sy++,s="_"+s+"r_"+u.toString(32)+"_";return e.memoizedState=s},useHostTransitionStatus:Yd,useFormState:b1,useActionState:b1,useOptimistic:function(e){var s=Ts();s.memoizedState=s.baseState=e;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=u,s=Xd.bind(null,vt,!0,u),u.dispatch=s,[e,s]},useMemoCache:Bd,useCacheRefresh:function(){return Ts().memoizedState=Ry.bind(null,vt)},useEffectEvent:function(e){var s=Ts(),u={impl:e};return s.memoizedState=u,function(){if((Jt&2)!==0)throw Error(c(440));return u.impl.apply(void 0,arguments)}}},Wd={readContext:ps,use:kc,useCallback:I1,useContext:ps,useEffect:Hd,useImperativeHandle:R1,useInsertionEffect:N1,useLayoutEffect:T1,useMemo:O1,useReducer:Dc,useRef:S1,useState:function(){return Dc(ir)},useDebugValue:qd,useDeferredValue:function(e,s){var u=Xn();return M1(u,un.memoizedState,e,s)},useTransition:function(){var e=Dc(ir)[0],s=Xn().memoizedState;return[typeof e=="boolean"?e:xl(e),s]},useSyncExternalStore:l1,useId:B1,useHostTransitionStatus:Yd,useFormState:v1,useActionState:v1,useOptimistic:function(e,s){var u=Xn();return g1(u,un,e,s)},useMemoCache:Bd,useCacheRefresh:U1};Wd.useEffectEvent=A1;var q1={readContext:ps,use:kc,useCallback:I1,useContext:ps,useEffect:Hd,useImperativeHandle:R1,useInsertionEffect:N1,useLayoutEffect:T1,useMemo:O1,useReducer:Pd,useRef:S1,useState:function(){return Pd(ir)},useDebugValue:qd,useDeferredValue:function(e,s){var u=Xn();return un===null?Vd(u,e,s):M1(u,un.memoizedState,e,s)},useTransition:function(){var e=Pd(ir)[0],s=Xn().memoizedState;return[typeof e=="boolean"?e:xl(e),s]},useSyncExternalStore:l1,useId:B1,useHostTransitionStatus:Yd,useFormState:_1,useActionState:_1,useOptimistic:function(e,s){var u=Xn();return un!==null?g1(u,un,e,s):(u.baseState=e,[e,u.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:U1};q1.useEffectEvent=A1;function Qd(e,s,u,m){s=e.memoizedState,u=u(m,s),u=u==null?s:N({},s,u),e.memoizedState=u,e.lanes===0&&(e.updateQueue.baseState=u)}var Kd={enqueueSetState:function(e,s,u){e=e._reactInternals;var m=ta(),b=Fr(m);b.payload=s,u!=null&&(b.callback=u),s=Hr(e,b,m),s!==null&&(Fs(s,e,m),fl(s,e,m))},enqueueReplaceState:function(e,s,u){e=e._reactInternals;var m=ta(),b=Fr(m);b.tag=1,b.payload=s,u!=null&&(b.callback=u),s=Hr(e,b,m),s!==null&&(Fs(s,e,m),fl(s,e,m))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var u=ta(),m=Fr(u);m.tag=2,s!=null&&(m.callback=s),s=Hr(e,m,u),s!==null&&(Fs(s,e,u),fl(s,e,u))}};function V1(e,s,u,m,b,S,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(m,S,I):s.prototype&&s.prototype.isPureReactComponent?!y(u,m)||!y(b,S):!0}function G1(e,s,u,m){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,m),s.state!==e&&Kd.enqueueReplaceState(s,s.state,null)}function Oi(e,s){var u=s;if("ref"in s){u={};for(var m in s)m!=="ref"&&(u[m]=s[m])}if(e=e.defaultProps){u===s&&(u=N({},u));for(var b in e)u[b]===void 0&&(u[b]=e[b])}return u}function Y1(e){pc(e)}function X1(e){console.error(e)}function W1(e){pc(e)}function Pc(e,s){try{var u=e.onUncaughtError;u(s.value,{componentStack:s.stack})}catch(m){setTimeout(function(){throw m})}}function Q1(e,s,u){try{var m=e.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Zd(e,s,u){return u=Fr(u),u.tag=3,u.payload={element:null},u.callback=function(){Pc(e,s)},u}function K1(e){return e=Fr(e),e.tag=3,e}function Z1(e,s,u,m){var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var S=m.value;e.payload=function(){return b(S)},e.callback=function(){Q1(s,u,m)}}var I=u.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(e.callback=function(){Q1(s,u,m),typeof b!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var F=m.stack;this.componentDidCatch(m.value,{componentStack:F!==null?F:""})})}function Oy(e,s,u,m,b){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(s=u.alternate,s!==null&&co(s,u,b,!0),u=Zs.current,u!==null){switch(u.tag){case 31:case 13:return pa===null?Zc():u.alternate===null&&zn===0&&(zn=3),u.flags&=-257,u.flags|=65536,u.lanes=b,m===Ac?u.flags|=16384:(s=u.updateQueue,s===null?u.updateQueue=new Set([m]):s.add(m),Ch(e,m,b)),!1;case 22:return u.flags|=65536,m===Ac?u.flags|=16384:(s=u.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=s):(u=s.retryQueue,u===null?s.retryQueue=new Set([m]):u.add(m)),Ch(e,m,b)),!1}throw Error(c(435,u.tag))}return Ch(e,m,b),Zc(),!1}if(zt)return s=Zs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=b,m!==pd&&(e=Error(c(422),{cause:m}),ll(ha(e,u)))):(m!==pd&&(s=Error(c(423),{cause:m}),ll(ha(s,u))),e=e.current.alternate,e.flags|=65536,b&=-b,e.lanes|=b,m=ha(m,u),b=Zd(e.stateNode,m,b),Nd(e,b),zn!==4&&(zn=2)),!1;var S=Error(c(520),{cause:m});if(S=ha(S,u),Nl===null?Nl=[S]:Nl.push(S),zn!==4&&(zn=2),s===null)return!0;m=ha(m,u),u=s;do{switch(u.tag){case 3:return u.flags|=65536,e=b&-b,u.lanes|=e,e=Zd(u.stateNode,m,e),Nd(u,e),!1;case 1:if(s=u.type,S=u.stateNode,(u.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wr===null||!Wr.has(S))))return u.flags|=65536,b&=-b,u.lanes|=b,b=K1(b),Z1(b,e,u,m),Nd(u,b),!1}u=u.return}while(u!==null);return!1}var $d=Error(c(461)),$n=!1;function xs(e,s,u,m){s.child=e===null?t1(s,null,u,m):Ri(s,e.child,u,m)}function $1(e,s,u,m,b){u=u.render;var S=s.ref;if("ref"in m){var I={};for(var F in m)F!=="ref"&&(I[F]=m[F])}else I=m;return Ai(s),m=Md(e,s,u,I,S,b),F=kd(),e!==null&&!$n?(Dd(e,s,b),or(e,s,b)):(zt&&F&&gd(s),s.flags|=1,xs(e,s,m,b),s.child)}function J1(e,s,u,m,b){if(e===null){var S=u.type;return typeof S=="function"&&!dd(S)&&S.defaultProps===void 0&&u.compare===null?(s.tag=15,s.type=S,eg(e,s,S,m,b)):(e=bc(u.type,null,m,s,s.mode,b),e.ref=s.ref,e.return=s,s.child=e)}if(S=e.child,!ih(e,b)){var I=S.memoizedProps;if(u=u.compare,u=u!==null?u:y,u(I,m)&&e.ref===s.ref)return or(e,s,b)}return s.flags|=1,e=tr(S,m),e.ref=s.ref,e.return=s,s.child=e}function eg(e,s,u,m,b){if(e!==null){var S=e.memoizedProps;if(y(S,m)&&e.ref===s.ref)if($n=!1,s.pendingProps=m=S,ih(e,b))(e.flags&131072)!==0&&($n=!0);else return s.lanes=e.lanes,or(e,s,b)}return Jd(e,s,u,m,b)}function tg(e,s,u,m){var b=m.children,S=e!==null?e.memoizedState:null;if(e===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((s.flags&128)!==0){if(S=S!==null?S.baseLanes|u:u,e!==null){for(m=s.child=e.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~S}else m=0,s.child=null;return ng(e,s,S,u,m)}if((u&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&Sc(s,S!==null?S.cachePool:null),S!==null?a1(s,S):jd(),r1(s);else return m=s.lanes=536870912,ng(e,s,S!==null?S.baseLanes|u:u,u,m)}else S!==null?(Sc(s,S.cachePool),a1(s,S),Vr(),s.memoizedState=null):(e!==null&&Sc(s,null),jd(),Vr());return xs(e,s,b,u),s.child}function bl(e,s){return e!==null&&e.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ng(e,s,u,m,b){var S=_d();return S=S===null?null:{parent:Kn._currentValue,pool:S},s.memoizedState={baseLanes:u,cachePool:S},e!==null&&Sc(s,null),jd(),r1(s),e!==null&&co(e,s,m,!0),s.childLanes=b,null}function zc(e,s){return s=Hc({mode:s.mode,children:s.children},e.mode),s.ref=e.ref,e.child=s,s.return=e,s}function sg(e,s,u){return Ri(s,e.child,null,u),e=zc(s,s.pendingProps),e.flags|=2,$s(s),s.memoizedState=null,e}function My(e,s,u){var m=s.pendingProps,b=(s.flags&128)!==0;if(s.flags&=-129,e===null){if(zt){if(m.mode==="hidden")return e=zc(s,m),s.lanes=536870912,bl(null,e);if(Id(s),(e=Cn)?(e=mm(e,ma),e=e!==null&&e.data==="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:Lr!==null?{id:Fa,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},u=z0(e),u.return=s,s.child=u,ms=s,Cn=null)):e=null,e===null)throw Ur(s);return s.lanes=536870912,null}return zc(s,m)}var S=e.memoizedState;if(S!==null){var I=S.dehydrated;if(Id(s),b)if(s.flags&256)s.flags&=-257,s=sg(e,s,u);else if(s.memoizedState!==null)s.child=e.child,s.flags|=128,s=null;else throw Error(c(558));else if($n||co(e,s,u,!1),b=(u&e.childLanes)!==0,$n||b){if(m=pn,m!==null&&(I=ds(m,u),I!==0&&I!==S.retryLane))throw S.retryLane=I,Ci(e,I),Fs(m,e,I),$d;Zc(),s=sg(e,s,u)}else e=S.treeContext,Cn=xa(I.nextSibling),ms=s,zt=!0,Br=null,ma=!1,e!==null&&q0(s,e),s=zc(s,m),s.flags|=4096;return s}return e=tr(e.child,{mode:m.mode,children:m.children}),e.ref=s.ref,s.child=e,e.return=s,e}function Fc(e,s){var u=s.ref;if(u===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(c(284));(e===null||e.ref!==u)&&(s.flags|=4194816)}}function Jd(e,s,u,m,b){return Ai(s),u=Md(e,s,u,m,void 0,b),m=kd(),e!==null&&!$n?(Dd(e,s,b),or(e,s,b)):(zt&&m&&gd(s),s.flags|=1,xs(e,s,u,b),s.child)}function ag(e,s,u,m,b,S){return Ai(s),s.updateQueue=null,u=o1(s,m,u,b),i1(e),m=kd(),e!==null&&!$n?(Dd(e,s,S),or(e,s,S)):(zt&&m&&gd(s),s.flags|=1,xs(e,s,u,S),s.child)}function rg(e,s,u,m,b){if(Ai(s),s.stateNode===null){var S=ro,I=u.contextType;typeof I=="object"&&I!==null&&(S=ps(I)),S=new u(m,S),s.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Kd,s.stateNode=S,S._reactInternals=s,S=s.stateNode,S.props=m,S.state=s.memoizedState,S.refs={},Ed(s),I=u.contextType,S.context=typeof I=="object"&&I!==null?ps(I):ro,S.state=s.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(Qd(s,u,I,m),S.state=s.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(I=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),I!==S.state&&Kd.enqueueReplaceState(S,S.state,null),ml(s,m,S,b),gl(),S.state=s.memoizedState),typeof S.componentDidMount=="function"&&(s.flags|=4194308),m=!0}else if(e===null){S=s.stateNode;var F=s.memoizedProps,J=Oi(u,F);S.props=J;var ue=S.context,be=u.contextType;I=ro,typeof be=="object"&&be!==null&&(I=ps(be));var Ae=u.getDerivedStateFromProps;be=typeof Ae=="function"||typeof S.getSnapshotBeforeUpdate=="function",F=s.pendingProps!==F,be||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(F||ue!==I)&&G1(s,S,m,I),zr=!1;var de=s.memoizedState;S.state=de,ml(s,m,S,b),gl(),ue=s.memoizedState,F||de!==ue||zr?(typeof Ae=="function"&&(Qd(s,u,Ae,m),ue=s.memoizedState),(J=zr||V1(s,u,J,m,de,ue,I))?(be||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=ue),S.props=m,S.state=ue,S.context=I,m=J):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{S=s.stateNode,Ad(e,s),I=s.memoizedProps,be=Oi(u,I),S.props=be,Ae=s.pendingProps,de=S.context,ue=u.contextType,J=ro,typeof ue=="object"&&ue!==null&&(J=ps(ue)),F=u.getDerivedStateFromProps,(ue=typeof F=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(I!==Ae||de!==J)&&G1(s,S,m,J),zr=!1,de=s.memoizedState,S.state=de,ml(s,m,S,b),gl();var ye=s.memoizedState;I!==Ae||de!==ye||zr||e!==null&&e.dependencies!==null&&Cc(e.dependencies)?(typeof F=="function"&&(Qd(s,u,F,m),ye=s.memoizedState),(be=zr||V1(s,u,be,m,de,ye,J)||e!==null&&e.dependencies!==null&&Cc(e.dependencies))?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,ye,J),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,ye,J)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=ye),S.props=m,S.state=ye,S.context=J,m=be):(typeof S.componentDidUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&de===e.memoizedState||(s.flags|=1024),m=!1)}return S=m,Fc(e,s),m=(s.flags&128)!==0,S||m?(S=s.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:S.render(),s.flags|=1,e!==null&&m?(s.child=Ri(s,e.child,null,b),s.child=Ri(s,null,u,b)):xs(e,s,u,b),s.memoizedState=S.state,e=s.child):e=or(e,s,b),e}function ig(e,s,u,m){return Si(),s.flags|=256,xs(e,s,u,m),s.child}var eh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function th(e){return{baseLanes:e,cachePool:Q0()}}function nh(e,s,u){return e=e!==null?e.childLanes&~u:0,s&&(e|=ea),e}function og(e,s,u){var m=s.pendingProps,b=!1,S=(s.flags&128)!==0,I;if((I=S)||(I=e!==null&&e.memoizedState===null?!1:(Yn.current&2)!==0),I&&(b=!0,s.flags&=-129),I=(s.flags&32)!==0,s.flags&=-33,e===null){if(zt){if(b?qr(s):Vr(),(e=Cn)?(e=mm(e,ma),e=e!==null&&e.data!=="&"?e:null,e!==null&&(s.memoizedState={dehydrated:e,treeContext:Lr!==null?{id:Fa,overflow:Ha}:null,retryLane:536870912,hydrationErrors:null},u=z0(e),u.return=s,s.child=u,ms=s,Cn=null)):e=null,e===null)throw Ur(s);return Uh(e)?s.lanes=32:s.lanes=536870912,null}var F=m.children;return m=m.fallback,b?(Vr(),b=s.mode,F=Hc({mode:"hidden",children:F},b),m=_i(m,b,u,null),F.return=s,m.return=s,F.sibling=m,s.child=F,m=s.child,m.memoizedState=th(u),m.childLanes=nh(e,I,u),s.memoizedState=eh,bl(null,m)):(qr(s),sh(s,F))}var J=e.memoizedState;if(J!==null&&(F=J.dehydrated,F!==null)){if(S)s.flags&256?(qr(s),s.flags&=-257,s=ah(e,s,u)):s.memoizedState!==null?(Vr(),s.child=e.child,s.flags|=128,s=null):(Vr(),F=m.fallback,b=s.mode,m=Hc({mode:"visible",children:m.children},b),F=_i(F,b,u,null),F.flags|=2,m.return=s,F.return=s,m.sibling=F,s.child=m,Ri(s,e.child,null,u),m=s.child,m.memoizedState=th(u),m.childLanes=nh(e,I,u),s.memoizedState=eh,s=bl(null,m));else if(qr(s),Uh(F)){if(I=F.nextSibling&&F.nextSibling.dataset,I)var ue=I.dgst;I=ue,m=Error(c(419)),m.stack="",m.digest=I,ll({value:m,source:null,stack:null}),s=ah(e,s,u)}else if($n||co(e,s,u,!1),I=(u&e.childLanes)!==0,$n||I){if(I=pn,I!==null&&(m=ds(I,u),m!==0&&m!==J.retryLane))throw J.retryLane=m,Ci(e,m),Fs(I,e,m),$d;Bh(F)||Zc(),s=ah(e,s,u)}else Bh(F)?(s.flags|=192,s.child=e.child,s=null):(e=J.treeContext,Cn=xa(F.nextSibling),ms=s,zt=!0,Br=null,ma=!1,e!==null&&q0(s,e),s=sh(s,m.children),s.flags|=4096);return s}return b?(Vr(),F=m.fallback,b=s.mode,J=e.child,ue=J.sibling,m=tr(J,{mode:"hidden",children:m.children}),m.subtreeFlags=J.subtreeFlags&65011712,ue!==null?F=tr(ue,F):(F=_i(F,b,u,null),F.flags|=2),F.return=s,m.return=s,m.sibling=F,s.child=m,bl(null,m),m=s.child,F=e.child.memoizedState,F===null?F=th(u):(b=F.cachePool,b!==null?(J=Kn._currentValue,b=b.parent!==J?{parent:J,pool:J}:b):b=Q0(),F={baseLanes:F.baseLanes|u,cachePool:b}),m.memoizedState=F,m.childLanes=nh(e,I,u),s.memoizedState=eh,bl(e.child,m)):(qr(s),u=e.child,e=u.sibling,u=tr(u,{mode:"visible",children:m.children}),u.return=s,u.sibling=null,e!==null&&(I=s.deletions,I===null?(s.deletions=[e],s.flags|=16):I.push(e)),s.child=u,s.memoizedState=null,u)}function sh(e,s){return s=Hc({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Hc(e,s){return e=Ks(22,e,null,s),e.lanes=0,e}function ah(e,s,u){return Ri(s,e.child,null,u),e=sh(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function lg(e,s,u){e.lanes|=s;var m=e.alternate;m!==null&&(m.lanes|=s),wd(e.return,s,u)}function rh(e,s,u,m,b,S){var I=e.memoizedState;I===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:b,treeForkCount:S}:(I.isBackwards=s,I.rendering=null,I.renderingStartTime=0,I.last=m,I.tail=u,I.tailMode=b,I.treeForkCount=S)}function cg(e,s,u){var m=s.pendingProps,b=m.revealOrder,S=m.tail;m=m.children;var I=Yn.current,F=(I&2)!==0;if(F?(I=I&1|2,s.flags|=128):I&=1,Le(Yn,I),xs(e,s,m,u),m=zt?ol:0,!F&&e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lg(e,u,s);else if(e.tag===19)lg(e,u,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(b){case"forwards":for(u=s.child,b=null;u!==null;)e=u.alternate,e!==null&&Rc(e)===null&&(b=u),u=u.sibling;u=b,u===null?(b=s.child,s.child=null):(b=u.sibling,u.sibling=null),rh(s,!1,b,u,S,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,b=s.child,s.child=null;b!==null;){if(e=b.alternate,e!==null&&Rc(e)===null){s.child=b;break}e=b.sibling,b.sibling=u,u=b,b=e}rh(s,!0,u,null,S,m);break;case"together":rh(s,!1,null,null,void 0,m);break;default:s.memoizedState=null}return s.child}function or(e,s,u){if(e!==null&&(s.dependencies=e.dependencies),Xr|=s.lanes,(u&s.childLanes)===0)if(e!==null){if(co(e,s,u,!1),(u&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(c(153));if(s.child!==null){for(e=s.child,u=tr(e,e.pendingProps),s.child=u,u.return=s;e.sibling!==null;)e=e.sibling,u=u.sibling=tr(e,e.pendingProps),u.return=s;u.sibling=null}return s.child}function ih(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&Cc(e)))}function ky(e,s,u){switch(s.tag){case 3:De(s,s.stateNode.containerInfo),Pr(s,Kn,e.memoizedState.cache),Si();break;case 27:case 5:Je(s);break;case 4:De(s,s.stateNode.containerInfo);break;case 10:Pr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Id(s),null;break;case 13:var m=s.memoizedState;if(m!==null)return m.dehydrated!==null?(qr(s),s.flags|=128,null):(u&s.child.childLanes)!==0?og(e,s,u):(qr(s),e=or(e,s,u),e!==null?e.sibling:null);qr(s);break;case 19:var b=(e.flags&128)!==0;if(m=(u&s.childLanes)!==0,m||(co(e,s,u,!1),m=(u&s.childLanes)!==0),b){if(m)return cg(e,s,u);s.flags|=128}if(b=s.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Le(Yn,Yn.current),m)break;return null;case 22:return s.lanes=0,tg(e,s,u,s.pendingProps);case 24:Pr(s,Kn,e.memoizedState.cache)}return or(e,s,u)}function ug(e,s,u){if(e!==null)if(e.memoizedProps!==s.pendingProps)$n=!0;else{if(!ih(e,u)&&(s.flags&128)===0)return $n=!1,ky(e,s,u);$n=(e.flags&131072)!==0}else $n=!1,zt&&(s.flags&1048576)!==0&&H0(s,ol,s.index);switch(s.lanes=0,s.tag){case 16:e:{var m=s.pendingProps;if(e=Ti(s.elementType),s.type=e,typeof e=="function")dd(e)?(m=Oi(e,m),s.tag=1,s=rg(null,s,e,m,u)):(s.tag=0,s=Jd(null,s,e,m,u));else{if(e!=null){var b=e.$$typeof;if(b===Q){s.tag=11,s=$1(null,s,e,m,u);break e}else if(b===X){s.tag=14,s=J1(null,s,e,m,u);break e}}throw s=Oe(e)||e,Error(c(306,s,""))}}return s;case 0:return Jd(e,s,s.type,s.pendingProps,u);case 1:return m=s.type,b=Oi(m,s.pendingProps),rg(e,s,m,b,u);case 3:e:{if(De(s,s.stateNode.containerInfo),e===null)throw Error(c(387));m=s.pendingProps;var S=s.memoizedState;b=S.element,Ad(e,s),ml(s,m,null,u);var I=s.memoizedState;if(m=I.cache,Pr(s,Kn,m),m!==S.cache&&bd(s,[Kn],u,!0),gl(),m=I.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:I.cache},s.updateQueue.baseState=S,s.memoizedState=S,s.flags&256){s=ig(e,s,m,u);break e}else if(m!==b){b=ha(Error(c(424)),s),ll(b),s=ig(e,s,m,u);break e}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Cn=xa(e.firstChild),ms=s,zt=!0,Br=null,ma=!0,u=t1(s,null,m,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Si(),m===b){s=or(e,s,u);break e}xs(e,s,m,u)}s=s.child}return s;case 26:return Fc(e,s),e===null?(u=vm(s.type,null,s.pendingProps,null))?s.memoizedState=u:zt||(u=s.type,e=s.pendingProps,m=au(Ne.current).createElement(u),m[Ee]=s,m[_e]=e,ys(m,u,e),Bn(m),s.stateNode=m):s.memoizedState=vm(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Je(s),e===null&&zt&&(m=s.stateNode=ym(s.type,s.pendingProps,Ne.current),ms=s,ma=!0,b=Cn,$r(s.type)?(Ph=b,Cn=xa(m.firstChild)):Cn=b),xs(e,s,s.pendingProps.children,u),Fc(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&zt&&((b=m=Cn)&&(m=uw(m,s.type,s.pendingProps,ma),m!==null?(s.stateNode=m,ms=s,Cn=xa(m.firstChild),ma=!1,b=!0):b=!1),b||Ur(s)),Je(s),b=s.type,S=s.pendingProps,I=e!==null?e.memoizedProps:null,m=S.children,kh(b,S)?m=null:I!==null&&kh(b,I)&&(s.flags|=32),s.memoizedState!==null&&(b=Md(e,s,Ey,null,null,u),Dl._currentValue=b),Fc(e,s),xs(e,s,m,u),s.child;case 6:return e===null&&zt&&((e=u=Cn)&&(u=dw(u,s.pendingProps,ma),u!==null?(s.stateNode=u,ms=s,Cn=null,e=!0):e=!1),e||Ur(s)),null;case 13:return og(e,s,u);case 4:return De(s,s.stateNode.containerInfo),m=s.pendingProps,e===null?s.child=Ri(s,null,m,u):xs(e,s,m,u),s.child;case 11:return $1(e,s,s.type,s.pendingProps,u);case 7:return xs(e,s,s.pendingProps,u),s.child;case 8:return xs(e,s,s.pendingProps.children,u),s.child;case 12:return xs(e,s,s.pendingProps.children,u),s.child;case 10:return m=s.pendingProps,Pr(s,s.type,m.value),xs(e,s,m.children,u),s.child;case 9:return b=s.type._context,m=s.pendingProps.children,Ai(s),b=ps(b),m=m(b),s.flags|=1,xs(e,s,m,u),s.child;case 14:return J1(e,s,s.type,s.pendingProps,u);case 15:return eg(e,s,s.type,s.pendingProps,u);case 19:return cg(e,s,u);case 31:return My(e,s,u);case 22:return tg(e,s,u,s.pendingProps);case 24:return Ai(s),m=ps(Kn),e===null?(b=_d(),b===null&&(b=pn,S=vd(),b.pooledCache=S,S.refCount++,S!==null&&(b.pooledCacheLanes|=u),b=S),s.memoizedState={parent:m,cache:b},Ed(s),Pr(s,Kn,b)):((e.lanes&u)!==0&&(Ad(e,s),ml(s,null,null,u),gl()),b=e.memoizedState,S=s.memoizedState,b.parent!==m?(b={parent:m,cache:m},s.memoizedState=b,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=b),Pr(s,Kn,m)):(m=S.cache,Pr(s,Kn,m),m!==b.cache&&bd(s,[Kn],u,!0))),xs(e,s,s.pendingProps.children,u),s.child;case 29:throw s.pendingProps}throw Error(c(156,s.tag))}function lr(e){e.flags|=4}function oh(e,s,u,m,b){if((s=(e.mode&32)!==0)&&(s=!1),s){if(e.flags|=16777216,(b&335544128)===b)if(e.stateNode.complete)e.flags|=8192;else if(Bg())e.flags|=8192;else throw ji=Ac,Sd}else e.flags&=-16777217}function dg(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Am(s))if(Bg())e.flags|=8192;else throw ji=Ac,Sd}function qc(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Pt():536870912,e.lanes|=s,Co|=s)}function vl(e,s){if(!zt)switch(e.tailMode){case"hidden":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?e.tail=null:u.sibling=null;break;case"collapsed":u=e.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:m.sibling=null}}function _n(e){var s=e.alternate!==null&&e.alternate.child===e.child,u=0,m=0;if(s)for(var b=e.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=e,b=b.sibling;else for(b=e.child;b!==null;)u|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=e,b=b.sibling;return e.subtreeFlags|=m,e.childLanes=u,s}function Dy(e,s,u){var m=s.pendingProps;switch(md(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(s),null;case 1:return _n(s),null;case 3:return u=s.stateNode,m=null,e!==null&&(m=e.memoizedState.cache),s.memoizedState.cache!==m&&(s.flags|=2048),ar(Kn),ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(lo(s)?lr(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xd())),_n(s),null;case 26:var b=s.type,S=s.memoizedState;return e===null?(lr(s),S!==null?(_n(s),dg(s,S)):(_n(s),oh(s,b,null,m,u))):S?S!==e.memoizedState?(lr(s),_n(s),dg(s,S)):(_n(s),s.flags&=-16777217):(e=e.memoizedProps,e!==m&&lr(s),_n(s),oh(s,b,e,m,u)),null;case 27:if(mt(s),u=Ne.current,b=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==m&&lr(s);else{if(!m){if(s.stateNode===null)throw Error(c(166));return _n(s),null}e=Ue.current,lo(s)?V0(s):(e=ym(b,m,u),s.stateNode=e,lr(s))}return _n(s),null;case 5:if(mt(s),b=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==m&&lr(s);else{if(!m){if(s.stateNode===null)throw Error(c(166));return _n(s),null}if(S=Ue.current,lo(s))V0(s);else{var I=au(Ne.current);switch(S){case 1:S=I.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:S=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":S=I.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":S=I.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":S=I.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof m.is=="string"?I.createElement("select",{is:m.is}):I.createElement("select"),m.multiple?S.multiple=!0:m.size&&(S.size=m.size);break;default:S=typeof m.is=="string"?I.createElement(b,{is:m.is}):I.createElement(b)}}S[Ee]=s,S[_e]=m;e:for(I=s.child;I!==null;){if(I.tag===5||I.tag===6)S.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===s)break e;for(;I.sibling===null;){if(I.return===null||I.return===s)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}s.stateNode=S;e:switch(ys(S,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&lr(s)}}return _n(s),oh(s,s.type,e===null?null:e.memoizedProps,s.pendingProps,u),null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==m&&lr(s);else{if(typeof m!="string"&&s.stateNode===null)throw Error(c(166));if(e=Ne.current,lo(s)){if(e=s.stateNode,u=s.memoizedProps,m=null,b=ms,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}e[Ee]=s,e=!!(e.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||om(e.nodeValue,u)),e||Ur(s,!0)}else e=au(e).createTextNode(m),e[Ee]=s,s.stateNode=e}return _n(s),null;case 31:if(u=s.memoizedState,e===null||e.memoizedState!==null){if(m=lo(s),u!==null){if(e===null){if(!m)throw Error(c(318));if(e=s.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(557));e[Ee]=s}else Si(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_n(s),e=!1}else u=xd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),e=!0;if(!e)return s.flags&256?($s(s),s):($s(s),null);if((s.flags&128)!==0)throw Error(c(558))}return _n(s),null;case 13:if(m=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(b=lo(s),m!==null&&m.dehydrated!==null){if(e===null){if(!b)throw Error(c(318));if(b=s.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(c(317));b[Ee]=s}else Si(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_n(s),b=!1}else b=xd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=b),b=!0;if(!b)return s.flags&256?($s(s),s):($s(s),null)}return $s(s),(s.flags&128)!==0?(s.lanes=u,s):(u=m!==null,e=e!==null&&e.memoizedState!==null,u&&(m=s.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),S=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==b&&(m.flags|=2048)),u!==e&&u&&(s.child.flags|=8192),qc(s,s.updateQueue),_n(s),null);case 4:return ve(),e===null&&jh(s.stateNode.containerInfo),_n(s),null;case 10:return ar(s.type),_n(s),null;case 19:if(pe(Yn),m=s.memoizedState,m===null)return _n(s),null;if(b=(s.flags&128)!==0,S=m.rendering,S===null)if(b)vl(m,!1);else{if(zn!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(S=Rc(e),S!==null){for(s.flags|=128,vl(m,!1),e=S.updateQueue,s.updateQueue=e,qc(s,e),s.subtreeFlags=0,e=u,u=s.child;u!==null;)P0(u,e),u=u.sibling;return Le(Yn,Yn.current&1|2),zt&&nr(s,m.treeForkCount),s.child}e=e.sibling}m.tail!==null&&Fe()>Wc&&(s.flags|=128,b=!0,vl(m,!1),s.lanes=4194304)}else{if(!b)if(e=Rc(S),e!==null){if(s.flags|=128,b=!0,e=e.updateQueue,s.updateQueue=e,qc(s,e),vl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!zt)return _n(s),null}else 2*Fe()-m.renderingStartTime>Wc&&u!==536870912&&(s.flags|=128,b=!0,vl(m,!1),s.lanes=4194304);m.isBackwards?(S.sibling=s.child,s.child=S):(e=m.last,e!==null?e.sibling=S:s.child=S,m.last=S)}return m.tail!==null?(e=m.tail,m.rendering=e,m.tail=e.sibling,m.renderingStartTime=Fe(),e.sibling=null,u=Yn.current,Le(Yn,b?u&1|2:u&1),zt&&nr(s,m.treeForkCount),e):(_n(s),null);case 22:case 23:return $s(s),Rd(),m=s.memoizedState!==null,e!==null?e.memoizedState!==null!==m&&(s.flags|=8192):m&&(s.flags|=8192),m?(u&536870912)!==0&&(s.flags&128)===0&&(_n(s),s.subtreeFlags&6&&(s.flags|=8192)):_n(s),u=s.updateQueue,u!==null&&qc(s,u.retryQueue),u=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),m=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(m=s.memoizedState.cachePool.pool),m!==u&&(s.flags|=2048),e!==null&&pe(Ni),null;case 24:return u=null,e!==null&&(u=e.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ar(Kn),_n(s),null;case 25:return null;case 30:return null}throw Error(c(156,s.tag))}function Ly(e,s){switch(md(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return ar(Kn),ve(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return mt(s),null;case 31:if(s.memoizedState!==null){if($s(s),s.alternate===null)throw Error(c(340));Si()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 13:if($s(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(c(340));Si()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return pe(Yn),null;case 4:return ve(),null;case 10:return ar(s.type),null;case 22:case 23:return $s(s),Rd(),e!==null&&pe(Ni),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return ar(Kn),null;case 25:return null;default:return null}}function hg(e,s){switch(md(s),s.tag){case 3:ar(Kn),ve();break;case 26:case 27:case 5:mt(s);break;case 4:ve();break;case 31:s.memoizedState!==null&&$s(s);break;case 13:$s(s);break;case 19:pe(Yn);break;case 10:ar(s.type);break;case 22:case 23:$s(s),Rd(),e!==null&&pe(Ni);break;case 24:ar(Kn)}}function Cl(e,s){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var b=m.next;u=b;do{if((u.tag&e)===e){m=void 0;var S=u.create,I=u.inst;m=S(),I.destroy=m}u=u.next}while(u!==b)}}catch(F){on(s,s.return,F)}}function Gr(e,s,u){try{var m=s.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var S=b.next;m=S;do{if((m.tag&e)===e){var I=m.inst,F=I.destroy;if(F!==void 0){I.destroy=void 0,b=s;var J=u,ue=F;try{ue()}catch(be){on(b,J,be)}}}m=m.next}while(m!==S)}}catch(be){on(s,s.return,be)}}function fg(e){var s=e.updateQueue;if(s!==null){var u=e.stateNode;try{s1(s,u)}catch(m){on(e,e.return,m)}}}function gg(e,s,u){u.props=Oi(e.type,e.memoizedProps),u.state=e.memoizedState;try{u.componentWillUnmount()}catch(m){on(e,s,m)}}function _l(e,s){try{var u=e.ref;if(u!==null){switch(e.tag){case 26:case 27:case 5:var m=e.stateNode;break;case 30:m=e.stateNode;break;default:m=e.stateNode}typeof u=="function"?e.refCleanup=u(m):u.current=m}}catch(b){on(e,s,b)}}function qa(e,s){var u=e.ref,m=e.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(b){on(e,s,b)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(b){on(e,s,b)}else u.current=null}function mg(e){var s=e.type,u=e.memoizedProps,m=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(b){on(e,e.return,b)}}function lh(e,s,u){try{var m=e.stateNode;aw(m,e.type,u,s),m[_e]=s}catch(b){on(e,e.return,b)}}function pg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$r(e.type)||e.tag===4}function ch(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$r(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uh(e,s,u){var m=e.tag;if(m===5||m===6)e=e.stateNode,s?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(e,s):(s=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,s.appendChild(e),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=ks));else if(m!==4&&(m===27&&$r(e.type)&&(u=e.stateNode,s=null),e=e.child,e!==null))for(uh(e,s,u),e=e.sibling;e!==null;)uh(e,s,u),e=e.sibling}function Vc(e,s,u){var m=e.tag;if(m===5||m===6)e=e.stateNode,s?u.insertBefore(e,s):u.appendChild(e);else if(m!==4&&(m===27&&$r(e.type)&&(u=e.stateNode),e=e.child,e!==null))for(Vc(e,s,u),e=e.sibling;e!==null;)Vc(e,s,u),e=e.sibling}function xg(e){var s=e.stateNode,u=e.memoizedProps;try{for(var m=e.type,b=s.attributes;b.length;)s.removeAttributeNode(b[0]);ys(s,m,u),s[Ee]=e,s[_e]=u}catch(S){on(e,e.return,S)}}var cr=!1,Jn=!1,dh=!1,yg=typeof WeakSet=="function"?WeakSet:Set,cs=null;function By(e,s){if(e=e.containerInfo,Oh=du,e=L(e),z(e)){if("selectionStart"in e)var u={start:e.selectionStart,end:e.selectionEnd};else e:{u=(u=e.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var b=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{u.nodeType,S.nodeType}catch{u=null;break e}var I=0,F=-1,J=-1,ue=0,be=0,Ae=e,de=null;t:for(;;){for(var ye;Ae!==u||b!==0&&Ae.nodeType!==3||(F=I+b),Ae!==S||m!==0&&Ae.nodeType!==3||(J=I+m),Ae.nodeType===3&&(I+=Ae.nodeValue.length),(ye=Ae.firstChild)!==null;)de=Ae,Ae=ye;for(;;){if(Ae===e)break t;if(de===u&&++ue===b&&(F=I),de===S&&++be===m&&(J=I),(ye=Ae.nextSibling)!==null)break;Ae=de,de=Ae.parentNode}Ae=ye}u=F===-1||J===-1?null:{start:F,end:J}}else u=null}u=u||{start:0,end:0}}else u=null;for(Mh={focusedElem:e,selectionRange:u},du=!1,cs=s;cs!==null;)if(s=cs,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,cs=e;else for(;cs!==null;){switch(s=cs,S=s.alternate,e=s.flags,s.tag){case 0:if((e&4)!==0&&(e=s.updateQueue,e=e!==null?e.events:null,e!==null))for(u=0;u<e.length;u++)b=e[u],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&S!==null){e=void 0,u=s,b=S.memoizedProps,S=S.memoizedState,m=u.stateNode;try{var Qe=Oi(u.type,b);e=m.getSnapshotBeforeUpdate(Qe,S),m.__reactInternalSnapshotBeforeUpdate=e}catch(ut){on(u,u.return,ut)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,u=e.nodeType,u===9)Lh(e);else if(u===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Lh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=s.sibling,e!==null){e.return=s.return,cs=e;break}cs=s.return}}function wg(e,s,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:dr(e,u),m&4&&Cl(5,u);break;case 1:if(dr(e,u),m&4)if(e=u.stateNode,s===null)try{e.componentDidMount()}catch(I){on(u,u.return,I)}else{var b=Oi(u.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(b,s,e.__reactInternalSnapshotBeforeUpdate)}catch(I){on(u,u.return,I)}}m&64&&fg(u),m&512&&_l(u,u.return);break;case 3:if(dr(e,u),m&64&&(e=u.updateQueue,e!==null)){if(s=null,u.child!==null)switch(u.child.tag){case 27:case 5:s=u.child.stateNode;break;case 1:s=u.child.stateNode}try{s1(e,s)}catch(I){on(u,u.return,I)}}break;case 27:s===null&&m&4&&xg(u);case 26:case 5:dr(e,u),s===null&&m&4&&mg(u),m&512&&_l(u,u.return);break;case 12:dr(e,u);break;case 31:dr(e,u),m&4&&Cg(e,u);break;case 13:dr(e,u),m&4&&_g(e,u),m&64&&(e=u.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(u=Yy.bind(null,u),hw(e,u))));break;case 22:if(m=u.memoizedState!==null||cr,!m){s=s!==null&&s.memoizedState!==null||Jn,b=cr;var S=Jn;cr=m,(Jn=s)&&!S?hr(e,u,(u.subtreeFlags&8772)!==0):dr(e,u),cr=b,Jn=S}break;case 30:break;default:dr(e,u)}}function bg(e){var s=e.alternate;s!==null&&(e.alternate=null,bg(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Ms(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var An=null,Bs=!1;function ur(e,s,u){for(u=u.child;u!==null;)vg(e,s,u),u=u.sibling}function vg(e,s,u){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Ut,u)}catch{}switch(u.tag){case 26:Jn||qa(u,s),ur(e,s,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Jn||qa(u,s);var m=An,b=Bs;$r(u.type)&&(An=u.stateNode,Bs=!1),ur(e,s,u),Ol(u.stateNode),An=m,Bs=b;break;case 5:Jn||qa(u,s);case 6:if(m=An,b=Bs,An=null,ur(e,s,u),An=m,Bs=b,An!==null)if(Bs)try{(An.nodeType===9?An.body:An.nodeName==="HTML"?An.ownerDocument.body:An).removeChild(u.stateNode)}catch(S){on(u,s,S)}else try{An.removeChild(u.stateNode)}catch(S){on(u,s,S)}break;case 18:An!==null&&(Bs?(e=An,fm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,u.stateNode),Ro(e)):fm(An,u.stateNode));break;case 4:m=An,b=Bs,An=u.stateNode.containerInfo,Bs=!0,ur(e,s,u),An=m,Bs=b;break;case 0:case 11:case 14:case 15:Gr(2,u,s),Jn||Gr(4,u,s),ur(e,s,u);break;case 1:Jn||(qa(u,s),m=u.stateNode,typeof m.componentWillUnmount=="function"&&gg(u,s,m)),ur(e,s,u);break;case 21:ur(e,s,u);break;case 22:Jn=(m=Jn)||u.memoizedState!==null,ur(e,s,u),Jn=m;break;default:ur(e,s,u)}}function Cg(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ro(e)}catch(u){on(s,s.return,u)}}}function _g(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ro(e)}catch(u){on(s,s.return,u)}}function Uy(e){switch(e.tag){case 31:case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new yg),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new yg),s;default:throw Error(c(435,e.tag))}}function Gc(e,s){var u=Uy(e);s.forEach(function(m){if(!u.has(m)){u.add(m);var b=Xy.bind(null,e,m);m.then(b,b)}})}function Us(e,s){var u=s.deletions;if(u!==null)for(var m=0;m<u.length;m++){var b=u[m],S=e,I=s,F=I;e:for(;F!==null;){switch(F.tag){case 27:if($r(F.type)){An=F.stateNode,Bs=!1;break e}break;case 5:An=F.stateNode,Bs=!1;break e;case 3:case 4:An=F.stateNode.containerInfo,Bs=!0;break e}F=F.return}if(An===null)throw Error(c(160));vg(S,I,b),An=null,Bs=!1,S=b.alternate,S!==null&&(S.return=null),b.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Sg(s,e),s=s.sibling}var Ta=null;function Sg(e,s){var u=e.alternate,m=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Us(s,e),Ps(e),m&4&&(Gr(3,e,e.return),Cl(3,e),Gr(5,e,e.return));break;case 1:Us(s,e),Ps(e),m&512&&(Jn||u===null||qa(u,u.return)),m&64&&cr&&(e=e.updateQueue,e!==null&&(m=e.callbacks,m!==null&&(u=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var b=Ta;if(Us(s,e),Ps(e),m&512&&(Jn||u===null||qa(u,u.return)),m&4){var S=u!==null?u.memoizedState:null;if(m=e.memoizedState,u===null)if(m===null)if(e.stateNode===null){e:{m=e.type,u=e.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":S=b.getElementsByTagName("title")[0],(!S||S[fi]||S[Ee]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=b.createElement(m),b.head.insertBefore(S,b.querySelector("head > title"))),ys(S,m,u),S[Ee]=e,Bn(S),m=S;break e;case"link":var I=Sm("link","href",b).get(m+(u.href||""));if(I){for(var F=0;F<I.length;F++)if(S=I[F],S.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&S.getAttribute("rel")===(u.rel==null?null:u.rel)&&S.getAttribute("title")===(u.title==null?null:u.title)&&S.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){I.splice(F,1);break t}}S=b.createElement(m),ys(S,m,u),b.head.appendChild(S);break;case"meta":if(I=Sm("meta","content",b).get(m+(u.content||""))){for(F=0;F<I.length;F++)if(S=I[F],S.getAttribute("content")===(u.content==null?null:""+u.content)&&S.getAttribute("name")===(u.name==null?null:u.name)&&S.getAttribute("property")===(u.property==null?null:u.property)&&S.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&S.getAttribute("charset")===(u.charSet==null?null:u.charSet)){I.splice(F,1);break t}}S=b.createElement(m),ys(S,m,u),b.head.appendChild(S);break;default:throw Error(c(468,m))}S[Ee]=e,Bn(S),m=S}e.stateNode=m}else Em(b,e.type,e.stateNode);else e.stateNode=_m(b,m,e.memoizedProps);else S!==m?(S===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):S.count--,m===null?Em(b,e.type,e.stateNode):_m(b,m,e.memoizedProps)):m===null&&e.stateNode!==null&&lh(e,e.memoizedProps,u.memoizedProps)}break;case 27:Us(s,e),Ps(e),m&512&&(Jn||u===null||qa(u,u.return)),u!==null&&m&4&&lh(e,e.memoizedProps,u.memoizedProps);break;case 5:if(Us(s,e),Ps(e),m&512&&(Jn||u===null||qa(u,u.return)),e.flags&32){b=e.stateNode;try{Nr(b,"")}catch(Qe){on(e,e.return,Qe)}}m&4&&e.stateNode!=null&&(b=e.memoizedProps,lh(e,b,u!==null?u.memoizedProps:b)),m&1024&&(dh=!0);break;case 6:if(Us(s,e),Ps(e),m&4){if(e.stateNode===null)throw Error(c(162));m=e.memoizedProps,u=e.stateNode;try{u.nodeValue=m}catch(Qe){on(e,e.return,Qe)}}break;case 3:if(ou=null,b=Ta,Ta=ru(s.containerInfo),Us(s,e),Ta=b,Ps(e),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Ro(s.containerInfo)}catch(Qe){on(e,e.return,Qe)}dh&&(dh=!1,Eg(e));break;case 4:m=Ta,Ta=ru(e.stateNode.containerInfo),Us(s,e),Ps(e),Ta=m;break;case 12:Us(s,e),Ps(e);break;case 31:Us(s,e),Ps(e),m&4&&(m=e.updateQueue,m!==null&&(e.updateQueue=null,Gc(e,m)));break;case 13:Us(s,e),Ps(e),e.child.flags&8192&&e.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Xc=Fe()),m&4&&(m=e.updateQueue,m!==null&&(e.updateQueue=null,Gc(e,m)));break;case 22:b=e.memoizedState!==null;var J=u!==null&&u.memoizedState!==null,ue=cr,be=Jn;if(cr=ue||b,Jn=be||J,Us(s,e),Jn=be,cr=ue,Ps(e),m&8192)e:for(s=e.stateNode,s._visibility=b?s._visibility&-2:s._visibility|1,b&&(u===null||J||cr||Jn||Mi(e)),u=null,s=e;;){if(s.tag===5||s.tag===26){if(u===null){J=u=s;try{if(S=J.stateNode,b)I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{F=J.stateNode;var Ae=J.memoizedProps.style,de=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;F.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(Qe){on(J,J.return,Qe)}}}else if(s.tag===6){if(u===null){J=s;try{J.stateNode.nodeValue=b?"":J.memoizedProps}catch(Qe){on(J,J.return,Qe)}}}else if(s.tag===18){if(u===null){J=s;try{var ye=J.stateNode;b?gm(ye,!0):gm(J.stateNode,!1)}catch(Qe){on(J,J.return,Qe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;u===s&&(u=null),s=s.return}u===s&&(u=null),s.sibling.return=s.return,s=s.sibling}m&4&&(m=e.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,Gc(e,u))));break;case 19:Us(s,e),Ps(e),m&4&&(m=e.updateQueue,m!==null&&(e.updateQueue=null,Gc(e,m)));break;case 30:break;case 21:break;default:Us(s,e),Ps(e)}}function Ps(e){var s=e.flags;if(s&2){try{for(var u,m=e.return;m!==null;){if(pg(m)){u=m;break}m=m.return}if(u==null)throw Error(c(160));switch(u.tag){case 27:var b=u.stateNode,S=ch(e);Vc(e,S,b);break;case 5:var I=u.stateNode;u.flags&32&&(Nr(I,""),u.flags&=-33);var F=ch(e);Vc(e,F,I);break;case 3:case 4:var J=u.stateNode.containerInfo,ue=ch(e);uh(e,ue,J);break;default:throw Error(c(161))}}catch(be){on(e,e.return,be)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Eg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Eg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function dr(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)wg(e,s.alternate,s),s=s.sibling}function Mi(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:Gr(4,s,s.return),Mi(s);break;case 1:qa(s,s.return);var u=s.stateNode;typeof u.componentWillUnmount=="function"&&gg(s,s.return,u),Mi(s);break;case 27:Ol(s.stateNode);case 26:case 5:qa(s,s.return),Mi(s);break;case 22:s.memoizedState===null&&Mi(s);break;case 30:Mi(s);break;default:Mi(s)}e=e.sibling}}function hr(e,s,u){for(u=u&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var m=s.alternate,b=e,S=s,I=S.flags;switch(S.tag){case 0:case 11:case 15:hr(b,S,u),Cl(4,S);break;case 1:if(hr(b,S,u),m=S,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ue){on(m,m.return,ue)}if(m=S,b=m.updateQueue,b!==null){var F=m.stateNode;try{var J=b.shared.hiddenCallbacks;if(J!==null)for(b.shared.hiddenCallbacks=null,b=0;b<J.length;b++)n1(J[b],F)}catch(ue){on(m,m.return,ue)}}u&&I&64&&fg(S),_l(S,S.return);break;case 27:xg(S);case 26:case 5:hr(b,S,u),u&&m===null&&I&4&&mg(S),_l(S,S.return);break;case 12:hr(b,S,u);break;case 31:hr(b,S,u),u&&I&4&&Cg(b,S);break;case 13:hr(b,S,u),u&&I&4&&_g(b,S);break;case 22:S.memoizedState===null&&hr(b,S,u),_l(S,S.return);break;case 30:break;default:hr(b,S,u)}s=s.sibling}}function hh(e,s){var u=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==u&&(e!=null&&e.refCount++,u!=null&&cl(u))}function fh(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&cl(e))}function ja(e,s,u,m){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ag(e,s,u,m),s=s.sibling}function Ag(e,s,u,m){var b=s.flags;switch(s.tag){case 0:case 11:case 15:ja(e,s,u,m),b&2048&&Cl(9,s);break;case 1:ja(e,s,u,m);break;case 3:ja(e,s,u,m),b&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&cl(e)));break;case 12:if(b&2048){ja(e,s,u,m),e=s.stateNode;try{var S=s.memoizedProps,I=S.id,F=S.onPostCommit;typeof F=="function"&&F(I,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(J){on(s,s.return,J)}}else ja(e,s,u,m);break;case 31:ja(e,s,u,m);break;case 13:ja(e,s,u,m);break;case 23:break;case 22:S=s.stateNode,I=s.alternate,s.memoizedState!==null?S._visibility&2?ja(e,s,u,m):Sl(e,s):S._visibility&2?ja(e,s,u,m):(S._visibility|=2,wo(e,s,u,m,(s.subtreeFlags&10256)!==0||!1)),b&2048&&hh(I,s);break;case 24:ja(e,s,u,m),b&2048&&fh(s.alternate,s);break;default:ja(e,s,u,m)}}function wo(e,s,u,m,b){for(b=b&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var S=e,I=s,F=u,J=m,ue=I.flags;switch(I.tag){case 0:case 11:case 15:wo(S,I,F,J,b),Cl(8,I);break;case 23:break;case 22:var be=I.stateNode;I.memoizedState!==null?be._visibility&2?wo(S,I,F,J,b):Sl(S,I):(be._visibility|=2,wo(S,I,F,J,b)),b&&ue&2048&&hh(I.alternate,I);break;case 24:wo(S,I,F,J,b),b&&ue&2048&&fh(I.alternate,I);break;default:wo(S,I,F,J,b)}s=s.sibling}}function Sl(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var u=e,m=s,b=m.flags;switch(m.tag){case 22:Sl(u,m),b&2048&&hh(m.alternate,m);break;case 24:Sl(u,m),b&2048&&fh(m.alternate,m);break;default:Sl(u,m)}s=s.sibling}}var El=8192;function bo(e,s,u){if(e.subtreeFlags&El)for(e=e.child;e!==null;)Ng(e,s,u),e=e.sibling}function Ng(e,s,u){switch(e.tag){case 26:bo(e,s,u),e.flags&El&&e.memoizedState!==null&&Sw(u,Ta,e.memoizedState,e.memoizedProps);break;case 5:bo(e,s,u);break;case 3:case 4:var m=Ta;Ta=ru(e.stateNode.containerInfo),bo(e,s,u),Ta=m;break;case 22:e.memoizedState===null&&(m=e.alternate,m!==null&&m.memoizedState!==null?(m=El,El=16777216,bo(e,s,u),El=m):bo(e,s,u));break;default:bo(e,s,u)}}function Tg(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function Al(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var m=s[u];cs=m,Rg(m,e)}Tg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jg(e),e=e.sibling}function jg(e){switch(e.tag){case 0:case 11:case 15:Al(e),e.flags&2048&&Gr(9,e,e.return);break;case 3:Al(e);break;case 12:Al(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Yc(e)):Al(e);break;default:Al(e)}}function Yc(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var u=0;u<s.length;u++){var m=s[u];cs=m,Rg(m,e)}Tg(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:Gr(8,s,s.return),Yc(s);break;case 22:u=s.stateNode,u._visibility&2&&(u._visibility&=-3,Yc(s));break;default:Yc(s)}e=e.sibling}}function Rg(e,s){for(;cs!==null;){var u=cs;switch(u.tag){case 0:case 11:case 15:Gr(8,u,s);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:cl(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,cs=m;else e:for(u=e;cs!==null;){m=cs;var b=m.sibling,S=m.return;if(bg(m),m===u){cs=null;break e}if(b!==null){b.return=S,cs=b;break e}cs=S}}}var Py={getCacheForType:function(e){var s=ps(Kn),u=s.data.get(e);return u===void 0&&(u=e(),s.data.set(e,u)),u},cacheSignal:function(){return ps(Kn).controller.signal}},zy=typeof WeakMap=="function"?WeakMap:Map,Jt=0,pn=null,Rt=null,Dt=0,rn=0,Js=null,Yr=!1,vo=!1,gh=!1,fr=0,zn=0,Xr=0,ki=0,mh=0,ea=0,Co=0,Nl=null,zs=null,ph=!1,Xc=0,Ig=0,Wc=1/0,Qc=null,Wr=null,is=0,Qr=null,_o=null,gr=0,xh=0,yh=null,Og=null,Tl=0,wh=null;function ta(){return(Jt&2)!==0&&Dt!==0?Dt&-Dt:$.T!==null?Eh():ns()}function Mg(){if(ea===0)if((Dt&536870912)===0||zt){var e=wt;wt<<=1,(wt&3932160)===0&&(wt=262144),ea=e}else ea=536870912;return e=Zs.current,e!==null&&(e.flags|=32),ea}function Fs(e,s,u){(e===pn&&(rn===2||rn===9)||e.cancelPendingCommit!==null)&&(So(e,0),Kr(e,Dt,ea,!1)),G(e,u),((Jt&2)===0||e!==pn)&&(e===pn&&((Jt&2)===0&&(ki|=u),zn===4&&Kr(e,Dt,ea,!1)),Va(e))}function kg(e,s,u){if((Jt&6)!==0)throw Error(c(327));var m=!u&&(s&127)===0&&(s&e.expiredLanes)===0||ct(e,s),b=m?qy(e,s):vh(e,s,!0),S=m;do{if(b===0){vo&&!m&&Kr(e,s,0,!1);break}else{if(u=e.current.alternate,S&&!Fy(u)){b=vh(e,s,!1),S=!1;continue}if(b===2){if(S=s,e.errorRecoveryDisabledLanes&S)var I=0;else I=e.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){s=I;e:{var F=e;b=Nl;var J=F.current.memoizedState.isDehydrated;if(J&&(So(F,I).flags|=256),I=vh(F,I,!1),I!==2){if(gh&&!J){F.errorRecoveryDisabledLanes|=S,ki|=S,b=4;break e}S=zs,zs=b,S!==null&&(zs===null?zs=S:zs.push.apply(zs,S))}b=I}if(S=!1,b!==2)continue}}if(b===1){So(e,0),Kr(e,s,0,!0);break}e:{switch(m=e,S=b,S){case 0:case 1:throw Error(c(345));case 4:if((s&4194048)!==s)break;case 6:Kr(m,s,ea,!Yr);break e;case 2:zs=null;break;case 3:case 5:break;default:throw Error(c(329))}if((s&62914560)===s&&(b=Xc+300-Fe(),10<b)){if(Kr(m,s,ea,!Yr),qe(m,0,!0)!==0)break e;gr=s,m.timeoutHandle=dm(Dg.bind(null,m,u,zs,Qc,ph,s,ea,ki,Co,Yr,S,"Throttled",-0,0),b);break e}Dg(m,u,zs,Qc,ph,s,ea,ki,Co,Yr,S,null,-0,0)}}break}while(!0);Va(e)}function Dg(e,s,u,m,b,S,I,F,J,ue,be,Ae,de,ye){if(e.timeoutHandle=-1,Ae=s.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ks},Ng(s,S,Ae);var Qe=(S&62914560)===S?Xc-Fe():(S&4194048)===S?Ig-Fe():0;if(Qe=Ew(Ae,Qe),Qe!==null){gr=S,e.cancelPendingCommit=Qe(qg.bind(null,e,s,S,u,m,b,I,F,J,be,Ae,null,de,ye)),Kr(e,S,I,!ue);return}}qg(e,s,S,u,m,b,I,F,J)}function Fy(e){for(var s=e;;){var u=s.tag;if((u===0||u===11||u===15)&&s.flags&16384&&(u=s.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var b=u[m],S=b.getSnapshot;b=b.value;try{if(!p(S(),b))return!1}catch{return!1}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Kr(e,s,u,m){s&=~mh,s&=~ki,e.suspendedLanes|=s,e.pingedLanes&=~s,m&&(e.warmLanes|=s),m=e.expirationTimes;for(var b=s;0<b;){var S=31-gt(b),I=1<<S;m[S]=-1,b&=~I}u!==0&&Tt(e,u,s)}function Kc(){return(Jt&6)===0?(jl(0),!1):!0}function bh(){if(Rt!==null){if(rn===0)var e=Rt.return;else e=Rt,sr=Ei=null,Ld(e),go=null,dl=0,e=Rt;for(;e!==null;)hg(e.alternate,e),e=e.return;Rt=null}}function So(e,s){var u=e.timeoutHandle;u!==-1&&(e.timeoutHandle=-1,ow(u)),u=e.cancelPendingCommit,u!==null&&(e.cancelPendingCommit=null,u()),gr=0,bh(),pn=e,Rt=u=tr(e.current,null),Dt=s,rn=0,Js=null,Yr=!1,vo=ct(e,s),gh=!1,Co=ea=mh=ki=Xr=zn=0,zs=Nl=null,ph=!1,(s&8)!==0&&(s|=s&32);var m=e.entangledLanes;if(m!==0)for(e=e.entanglements,m&=s;0<m;){var b=31-gt(m),S=1<<b;s|=e[b],m&=~S}return fr=s,xc(),u}function Lg(e,s){vt=null,$.H=wl,s===fo||s===Ec?(s=$0(),rn=3):s===Sd?(s=$0(),rn=4):rn=s===$d?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Js=s,Rt===null&&(zn=1,Pc(e,ha(s,e.current)))}function Bg(){var e=Zs.current;return e===null?!0:(Dt&4194048)===Dt?pa===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?e===pa:!1}function Ug(){var e=$.H;return $.H=wl,e===null?wl:e}function Pg(){var e=$.A;return $.A=Py,e}function Zc(){zn=4,Yr||(Dt&4194048)!==Dt&&Zs.current!==null||(vo=!0),(Xr&134217727)===0&&(ki&134217727)===0||pn===null||Kr(pn,Dt,ea,!1)}function vh(e,s,u){var m=Jt;Jt|=2;var b=Ug(),S=Pg();(pn!==e||Dt!==s)&&(Qc=null,So(e,s)),s=!1;var I=zn;e:do try{if(rn!==0&&Rt!==null){var F=Rt,J=Js;switch(rn){case 8:bh(),I=6;break e;case 3:case 2:case 9:case 6:Zs.current===null&&(s=!0);var ue=rn;if(rn=0,Js=null,Eo(e,F,J,ue),u&&vo){I=0;break e}break;default:ue=rn,rn=0,Js=null,Eo(e,F,J,ue)}}Hy(),I=zn;break}catch(be){Lg(e,be)}while(!0);return s&&e.shellSuspendCounter++,sr=Ei=null,Jt=m,$.H=b,$.A=S,Rt===null&&(pn=null,Dt=0,xc()),I}function Hy(){for(;Rt!==null;)zg(Rt)}function qy(e,s){var u=Jt;Jt|=2;var m=Ug(),b=Pg();pn!==e||Dt!==s?(Qc=null,Wc=Fe()+500,So(e,s)):vo=ct(e,s);e:do try{if(rn!==0&&Rt!==null){s=Rt;var S=Js;t:switch(rn){case 1:rn=0,Js=null,Eo(e,s,S,1);break;case 2:case 9:if(K0(S)){rn=0,Js=null,Fg(s);break}s=function(){rn!==2&&rn!==9||pn!==e||(rn=7),Va(e)},S.then(s,s);break e;case 3:rn=7;break e;case 4:rn=5;break e;case 7:K0(S)?(rn=0,Js=null,Fg(s)):(rn=0,Js=null,Eo(e,s,S,7));break;case 5:var I=null;switch(Rt.tag){case 26:I=Rt.memoizedState;case 5:case 27:var F=Rt;if(I?Am(I):F.stateNode.complete){rn=0,Js=null;var J=F.sibling;if(J!==null)Rt=J;else{var ue=F.return;ue!==null?(Rt=ue,$c(ue)):Rt=null}break t}}rn=0,Js=null,Eo(e,s,S,5);break;case 6:rn=0,Js=null,Eo(e,s,S,6);break;case 8:bh(),zn=6;break e;default:throw Error(c(462))}}Vy();break}catch(be){Lg(e,be)}while(!0);return sr=Ei=null,$.H=m,$.A=b,Jt=u,Rt!==null?0:(pn=null,Dt=0,xc(),zn)}function Vy(){for(;Rt!==null&&!Is();)zg(Rt)}function zg(e){var s=ug(e.alternate,e,fr);e.memoizedProps=e.pendingProps,s===null?$c(e):Rt=s}function Fg(e){var s=e,u=s.alternate;switch(s.tag){case 15:case 0:s=ag(u,s,s.pendingProps,s.type,void 0,Dt);break;case 11:s=ag(u,s,s.pendingProps,s.type.render,s.ref,Dt);break;case 5:Ld(s);default:hg(u,s),s=Rt=P0(s,fr),s=ug(u,s,fr)}e.memoizedProps=e.pendingProps,s===null?$c(e):Rt=s}function Eo(e,s,u,m){sr=Ei=null,Ld(s),go=null,dl=0;var b=s.return;try{if(Oy(e,b,s,u,Dt)){zn=1,Pc(e,ha(u,e.current)),Rt=null;return}}catch(S){if(b!==null)throw Rt=b,S;zn=1,Pc(e,ha(u,e.current)),Rt=null;return}s.flags&32768?(zt||m===1?e=!0:vo||(Dt&536870912)!==0?e=!1:(Yr=e=!0,(m===2||m===9||m===3||m===6)&&(m=Zs.current,m!==null&&m.tag===13&&(m.flags|=16384))),Hg(s,e)):$c(s)}function $c(e){var s=e;do{if((s.flags&32768)!==0){Hg(s,Yr);return}e=s.return;var u=Dy(s.alternate,s,fr);if(u!==null){Rt=u;return}if(s=s.sibling,s!==null){Rt=s;return}Rt=s=e}while(s!==null);zn===0&&(zn=5)}function Hg(e,s){do{var u=Ly(e.alternate,e);if(u!==null){u.flags&=32767,Rt=u;return}if(u=e.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!s&&(e=e.sibling,e!==null)){Rt=e;return}Rt=e=u}while(e!==null);zn=6,Rt=null}function qg(e,s,u,m,b,S,I,F,J){e.cancelPendingCommit=null;do Jc();while(is!==0);if((Jt&6)!==0)throw Error(c(327));if(s!==null){if(s===e.current)throw Error(c(177));if(S=s.lanes|s.childLanes,S|=cd,Te(e,u,S,I,F,J),e===pn&&(Rt=pn=null,Dt=0),_o=s,Qr=e,gr=u,xh=S,yh=b,Og=m,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Wy(sn,function(){return Wg(),null})):(e.callbackNode=null,e.callbackPriority=0),m=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||m){m=$.T,$.T=null,b=ie.p,ie.p=2,I=Jt,Jt|=4;try{By(e,s,u)}finally{Jt=I,ie.p=b,$.T=m}}is=1,Vg(),Gg(),Yg()}}function Vg(){if(is===1){is=0;var e=Qr,s=_o,u=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null;var m=ie.p;ie.p=2;var b=Jt;Jt|=4;try{Sg(s,e);var S=Mh,I=L(e.containerInfo),F=S.focusedElem,J=S.selectionRange;if(I!==F&&F&&F.ownerDocument&&j(F.ownerDocument.documentElement,F)){if(J!==null&&z(F)){var ue=J.start,be=J.end;if(be===void 0&&(be=ue),"selectionStart"in F)F.selectionStart=ue,F.selectionEnd=Math.min(be,F.value.length);else{var Ae=F.ownerDocument||document,de=Ae&&Ae.defaultView||window;if(de.getSelection){var ye=de.getSelection(),Qe=F.textContent.length,ut=Math.min(J.start,Qe),hn=J.end===void 0?ut:Math.min(J.end,Qe);!ye.extend&&ut>hn&&(I=hn,hn=ut,ut=I);var re=E(F,ut),ae=E(F,hn);if(re&&ae&&(ye.rangeCount!==1||ye.anchorNode!==re.node||ye.anchorOffset!==re.offset||ye.focusNode!==ae.node||ye.focusOffset!==ae.offset)){var ce=Ae.createRange();ce.setStart(re.node,re.offset),ye.removeAllRanges(),ut>hn?(ye.addRange(ce),ye.extend(ae.node,ae.offset)):(ce.setEnd(ae.node,ae.offset),ye.addRange(ce))}}}}for(Ae=[],ye=F;ye=ye.parentNode;)ye.nodeType===1&&Ae.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Ae.length;F++){var Se=Ae[F];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}du=!!Oh,Mh=Oh=null}finally{Jt=b,ie.p=m,$.T=u}}e.current=s,is=2}}function Gg(){if(is===2){is=0;var e=Qr,s=_o,u=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||u){u=$.T,$.T=null;var m=ie.p;ie.p=2;var b=Jt;Jt|=4;try{wg(e,s.alternate,s)}finally{Jt=b,ie.p=m,$.T=u}}is=3}}function Yg(){if(is===4||is===3){is=0,Me();var e=Qr,s=_o,u=gr,m=Og;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?is=5:(is=0,_o=Qr=null,Xg(e,e.pendingLanes));var b=e.pendingLanes;if(b===0&&(Wr=null),Kt(u),s=s.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Ut,s,void 0,(s.current.flags&128)===128)}catch{}if(m!==null){s=$.T,b=ie.p,ie.p=2,$.T=null;try{for(var S=e.onRecoverableError,I=0;I<m.length;I++){var F=m[I];S(F.value,{componentStack:F.stack})}}finally{$.T=s,ie.p=b}}(gr&3)!==0&&Jc(),Va(e),b=e.pendingLanes,(u&261930)!==0&&(b&42)!==0?e===wh?Tl++:(Tl=0,wh=e):Tl=0,jl(0)}}function Xg(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,cl(s)))}function Jc(){return Vg(),Gg(),Yg(),Wg()}function Wg(){if(is!==5)return!1;var e=Qr,s=xh;xh=0;var u=Kt(gr),m=$.T,b=ie.p;try{ie.p=32>u?32:u,$.T=null,u=yh,yh=null;var S=Qr,I=gr;if(is=0,_o=Qr=null,gr=0,(Jt&6)!==0)throw Error(c(331));var F=Jt;if(Jt|=4,jg(S.current),Ag(S,S.current,I,u),Jt=F,jl(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Ut,S)}catch{}return!0}finally{ie.p=b,$.T=m,Xg(e,s)}}function Qg(e,s,u){s=ha(u,s),s=Zd(e.stateNode,s,2),e=Hr(e,s,2),e!==null&&(G(e,2),Va(e))}function on(e,s,u){if(e.tag===3)Qg(e,e,u);else for(;s!==null;){if(s.tag===3){Qg(s,e,u);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Wr===null||!Wr.has(m))){e=ha(u,e),u=K1(2),m=Hr(s,u,2),m!==null&&(Z1(u,m,s,e),G(m,2),Va(m));break}}s=s.return}}function Ch(e,s,u){var m=e.pingCache;if(m===null){m=e.pingCache=new zy;var b=new Set;m.set(s,b)}else b=m.get(s),b===void 0&&(b=new Set,m.set(s,b));b.has(u)||(gh=!0,b.add(u),e=Gy.bind(null,e,s,u),s.then(e,e))}function Gy(e,s,u){var m=e.pingCache;m!==null&&m.delete(s),e.pingedLanes|=e.suspendedLanes&u,e.warmLanes&=~u,pn===e&&(Dt&u)===u&&(zn===4||zn===3&&(Dt&62914560)===Dt&&300>Fe()-Xc?(Jt&2)===0&&So(e,0):mh|=u,Co===Dt&&(Co=0)),Va(e)}function Kg(e,s){s===0&&(s=Pt()),e=Ci(e,s),e!==null&&(G(e,s),Va(e))}function Yy(e){var s=e.memoizedState,u=0;s!==null&&(u=s.retryLane),Kg(e,u)}function Xy(e,s){var u=0;switch(e.tag){case 31:case 13:var m=e.stateNode,b=e.memoizedState;b!==null&&(u=b.retryLane);break;case 19:m=e.stateNode;break;case 22:m=e.stateNode._retryCache;break;default:throw Error(c(314))}m!==null&&m.delete(s),Kg(e,u)}function Wy(e,s){return Hn(e,s)}var eu=null,Ao=null,_h=!1,tu=!1,Sh=!1,Zr=0;function Va(e){e!==Ao&&e.next===null&&(Ao===null?eu=Ao=e:Ao=Ao.next=e),tu=!0,_h||(_h=!0,Ky())}function jl(e,s){if(!Sh&&tu){Sh=!0;do for(var u=!1,m=eu;m!==null;){if(e!==0){var b=m.pendingLanes;if(b===0)var S=0;else{var I=m.suspendedLanes,F=m.pingedLanes;S=(1<<31-gt(42|e)+1)-1,S&=b&~(I&~F),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(u=!0,em(m,S))}else S=Dt,S=qe(m,m===pn?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||ct(m,S)||(u=!0,em(m,S));m=m.next}while(u);Sh=!1}}function Qy(){Zg()}function Zg(){tu=_h=!1;var e=0;Zr!==0&&iw()&&(e=Zr);for(var s=Fe(),u=null,m=eu;m!==null;){var b=m.next,S=$g(m,s);S===0?(m.next=null,u===null?eu=b:u.next=b,b===null&&(Ao=u)):(u=m,(e!==0||(S&3)!==0)&&(tu=!0)),m=b}is!==0&&is!==5||jl(e),Zr!==0&&(Zr=0)}function $g(e,s){for(var u=e.suspendedLanes,m=e.pingedLanes,b=e.expirationTimes,S=e.pendingLanes&-62914561;0<S;){var I=31-gt(S),F=1<<I,J=b[I];J===-1?((F&u)===0||(F&m)!==0)&&(b[I]=an(F,s)):J<=s&&(e.expiredLanes|=F),S&=~F}if(s=pn,u=Dt,u=qe(e,e===s?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),m=e.callbackNode,u===0||e===s&&(rn===2||rn===9)||e.cancelPendingCommit!==null)return m!==null&&m!==null&&ze(m),e.callbackNode=null,e.callbackPriority=0;if((u&3)===0||ct(e,u)){if(s=u&-u,s===e.callbackPriority)return s;switch(m!==null&&ze(m),Kt(u)){case 2:case 8:u=Tn;break;case 32:u=sn;break;case 268435456:u=qn;break;default:u=sn}return m=Jg.bind(null,e),u=Hn(u,m),e.callbackPriority=s,e.callbackNode=u,s}return m!==null&&m!==null&&ze(m),e.callbackPriority=2,e.callbackNode=null,2}function Jg(e,s){if(is!==0&&is!==5)return e.callbackNode=null,e.callbackPriority=0,null;var u=e.callbackNode;if(Jc()&&e.callbackNode!==u)return null;var m=Dt;return m=qe(e,e===pn?m:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),m===0?null:(kg(e,m,s),$g(e,Fe()),e.callbackNode!=null&&e.callbackNode===u?Jg.bind(null,e):null)}function em(e,s){if(Jc())return null;kg(e,s,!0)}function Ky(){lw(function(){(Jt&6)!==0?Hn(Ct,Qy):Zg()})}function Eh(){if(Zr===0){var e=uo;e===0&&(e=qs,qs<<=1,(qs&261888)===0&&(qs=256)),Zr=e}return Zr}function tm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Tr(""+e)}function nm(e,s){var u=s.ownerDocument.createElement("input");return u.name=s.name,u.value=s.value,e.id&&u.setAttribute("form",e.id),s.parentNode.insertBefore(u,s),e=new FormData(e),u.parentNode.removeChild(u),e}function Zy(e,s,u,m,b){if(s==="submit"&&u&&u.stateNode===b){var S=tm((b[_e]||null).action),I=m.submitter;I&&(s=(s=I[_e]||null)?tm(s.formAction):I.getAttribute("formAction"),s!==null&&(S=s,I=null));var F=new ss("action","action",null,m,b);e.push({event:F,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Zr!==0){var J=I?nm(b,I):new FormData(b);Gd(u,{pending:!0,data:J,method:b.method,action:S},null,J)}}else typeof S=="function"&&(F.preventDefault(),J=I?nm(b,I):new FormData(b),Gd(u,{pending:!0,data:J,method:b.method,action:S},S,J))},currentTarget:b}]})}}for(var Ah=0;Ah<il.length;Ah++){var Nh=il[Ah],$y=Nh.toLowerCase(),Jy=Nh[0].toUpperCase()+Nh.slice(1);Na($y,"on"+Jy)}Na(Ls,"onAnimationEnd"),Na(gs,"onAnimationIteration"),Na(nn,"onAnimationStart"),Na("dblclick","onDoubleClick"),Na("focusin","onFocus"),Na("focusout","onBlur"),Na(rs,"onTransitionRun"),Na(Ns,"onTransitionStart"),Na(Dr,"onTransitionCancel"),Na(er,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ew=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rl));function sm(e,s){s=(s&4)!==0;for(var u=0;u<e.length;u++){var m=e[u],b=m.event;m=m.listeners;e:{var S=void 0;if(s)for(var I=m.length-1;0<=I;I--){var F=m[I],J=F.instance,ue=F.currentTarget;if(F=F.listener,J!==S&&b.isPropagationStopped())break e;S=F,b.currentTarget=ue;try{S(b)}catch(be){pc(be)}b.currentTarget=null,S=J}else for(I=0;I<m.length;I++){if(F=m[I],J=F.instance,ue=F.currentTarget,F=F.listener,J!==S&&b.isPropagationStopped())break e;S=F,b.currentTarget=ue;try{S(b)}catch(be){pc(be)}b.currentTarget=null,S=J}}}}function It(e,s){var u=s[Dn];u===void 0&&(u=s[Dn]=new Set);var m=e+"__bubble";u.has(m)||(am(s,e,2,!1),u.add(m))}function Th(e,s,u){var m=0;s&&(m|=4),am(u,e,m,s)}var nu="_reactListening"+Math.random().toString(36).slice(2);function jh(e){if(!e[nu]){e[nu]=!0,Re.forEach(function(u){u!=="selectionchange"&&(ew.has(u)||Th(u,!1,e),Th(u,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[nu]||(s[nu]=!0,Th("selectionchange",!1,s))}}function am(e,s,u,m){switch(Mm(s)){case 2:var b=Tw;break;case 8:b=jw;break;default:b=Vh}u=b.bind(null,s,u,e),b=void 0,!Jo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(b=!0),m?b!==void 0?e.addEventListener(s,u,{capture:!0,passive:b}):e.addEventListener(s,u,!0):b!==void 0?e.addEventListener(s,u,{passive:b}):e.addEventListener(s,u,!1)}function Rh(e,s,u,m,b){var S=m;if((s&1)===0&&(s&2)===0&&m!==null)e:for(;;){if(m===null)return;var I=m.tag;if(I===3||I===4){var F=m.stateNode.containerInfo;if(F===b)break;if(I===4)for(I=m.return;I!==null;){var J=I.tag;if((J===3||J===4)&&I.stateNode.containerInfo===b)return;I=I.return}for(;F!==null;){if(I=Ln(F),I===null)return;if(J=I.tag,J===5||J===6||J===26||J===27){m=S=I;continue e}F=F.parentNode}}m=m.return}rc(function(){var ue=S,be=$o(u),Ae=[];e:{var de=mc.get(e);if(de!==void 0){var ye=ss,Qe=e;switch(e){case"keypress":if(Ba(u)===0)break e;case"keydown":case"keyup":ye=to;break;case"focusin":Qe="focus",ye=nl;break;case"focusout":Qe="blur",ye=nl;break;case"beforeblur":case"afterblur":ye=nl;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Ji;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=id;break;case Ls:case gs:case nn:ye=_t;break;case er:ye=Ka;break;case"scroll":case"scrollend":ye=ic;break;case"wheel":ye=od;break;case"copy":case"cut":case"paste":ye=eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=tn;break;case"toggle":case"beforetoggle":ye=al}var ut=(s&4)!==0,hn=!ut&&(e==="scroll"||e==="scrollend"),re=ut?de!==null?de+"Capture":null:de;ut=[];for(var ae=ue,ce;ae!==null;){var Se=ae;if(ce=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ce===null||re===null||(Se=pt(ae,re),Se!=null&&ut.push(Il(ae,Se,ce))),hn)break;ae=ae.return}0<ut.length&&(de=new ye(de,Qe,null,u,be),Ae.push({event:de,listeners:ut}))}}if((s&7)===0){e:{if(de=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",de&&u!==gi&&(Qe=u.relatedTarget||u.fromElement)&&(Ln(Qe)||Qe[Ve]))break e;if((ye||de)&&(de=be.window===be?be:(de=be.ownerDocument)?de.defaultView||de.parentWindow:window,ye?(Qe=u.relatedTarget||u.toElement,ye=ue,Qe=Qe?Ln(Qe):null,Qe!==null&&(hn=f(Qe),ut=Qe.tag,Qe!==hn||ut!==5&&ut!==27&&ut!==6)&&(Qe=null)):(ye=null,Qe=ue),ye!==Qe)){if(ut=$t,Se="onMouseLeave",re="onMouseEnter",ae="mouse",(e==="pointerout"||e==="pointerover")&&(ut=tn,Se="onPointerLeave",re="onPointerEnter",ae="pointer"),hn=ye==null?de:_r(ye),ce=Qe==null?de:_r(Qe),de=new ut(Se,ae+"leave",ye,u,be),de.target=hn,de.relatedTarget=ce,Se=null,Ln(be)===ue&&(ut=new ut(re,ae+"enter",Qe,u,be),ut.target=ce,ut.relatedTarget=hn,Se=ut),hn=Se,ye&&Qe)t:{for(ut=tw,re=ye,ae=Qe,ce=0,Se=re;Se;Se=ut(Se))ce++;Se=0;for(var rt=ae;rt;rt=ut(rt))Se++;for(;0<ce-Se;)re=ut(re),ce--;for(;0<Se-ce;)ae=ut(ae),Se--;for(;ce--;){if(re===ae||ae!==null&&re===ae.alternate){ut=re;break t}re=ut(re),ae=ut(ae)}ut=null}else ut=null;ye!==null&&rm(Ae,de,ye,ut,!1),Qe!==null&&hn!==null&&rm(Ae,hn,Qe,ut,!0)}}e:{if(de=ue?_r(ue):window,ye=de.nodeName&&de.nodeName.toLowerCase(),ye==="select"||ye==="input"&&de.type==="file")var Yt=Qs;else if(rl(de))if(gc)Yt=d;else{Yt=r;var et=t}else ye=de.nodeName,!ye||ye.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ue&&fn(ue.elementType)&&(Yt=Qs):Yt=l;if(Yt&&(Yt=Yt(e,ue))){Ws(Ae,Yt,u,be);break e}et&&et(e,de,ue),e==="focusout"&&ue&&de.type==="number"&&ue.memoizedProps.value!=null&&W(de,"number",de.value)}switch(et=ue?_r(ue):window,e){case"focusin":(rl(et)||et.contentEditable==="true")&&(te=et,se=ue,oe=null);break;case"focusout":oe=se=te=null;break;case"mousedown":fe=!0;break;case"contextmenu":case"mouseup":case"dragend":fe=!1,Pe(Ae,u,be);break;case"selectionchange":if(K)break;case"keydown":case"keyup":Pe(Ae,u,be)}var St;if(xi)e:{switch(e){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else kr?fc(e,u)&&(Lt="onCompositionEnd"):e==="keydown"&&u.keyCode===229&&(Lt="onCompositionStart");Lt&&(hc&&u.locale!=="ko"&&(kr||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&kr&&(St=jr()):(Ea=be,Aa="value"in Ea?Ea.value:Ea.textContent,kr=!0)),et=su(ue,Lt),0<et.length&&(Lt=new cc(Lt,e,null,u,be),Ae.push({event:Lt,listeners:et}),St?Lt.data=St:(St=Mr(u),St!==null&&(Lt.data=St)))),(St=dc?za(e,u):so(e,u))&&(Lt=su(ue,"onBeforeInput"),0<Lt.length&&(et=new cc("onBeforeInput","beforeinput",null,u,be),Ae.push({event:et,listeners:Lt}),et.data=St)),Zy(Ae,e,ue,u,be)}sm(Ae,s)})}function Il(e,s,u){return{instance:e,listener:s,currentTarget:u}}function su(e,s){for(var u=s+"Capture",m=[];e!==null;){var b=e,S=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||S===null||(b=pt(e,u),b!=null&&m.unshift(Il(e,b,S)),b=pt(e,s),b!=null&&m.push(Il(e,b,S))),e.tag===3)return m;e=e.return}return[]}function tw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function rm(e,s,u,m,b){for(var S=s._reactName,I=[];u!==null&&u!==m;){var F=u,J=F.alternate,ue=F.stateNode;if(F=F.tag,J!==null&&J===m)break;F!==5&&F!==26&&F!==27||ue===null||(J=ue,b?(ue=pt(u,S),ue!=null&&I.unshift(Il(u,ue,J))):b||(ue=pt(u,S),ue!=null&&I.push(Il(u,ue,J)))),u=u.return}I.length!==0&&e.push({event:s,listeners:I})}var nw=/\r\n?/g,sw=/\u0000|\uFFFD/g;function im(e){return(typeof e=="string"?e:""+e).replace(nw,`
`).replace(sw,"")}function om(e,s){return s=im(s),im(e)===s}function dn(e,s,u,m,b,S){switch(u){case"children":typeof m=="string"?s==="body"||s==="textarea"&&m===""||Nr(e,m):(typeof m=="number"||typeof m=="bigint")&&s!=="body"&&Nr(e,""+m);break;case"className":Er(e,"class",m);break;case"tabIndex":Er(e,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Er(e,u,m);break;case"style":at(e,m,S);break;case"data":if(s!=="object"){Er(e,"data",m);break}case"src":case"href":if(m===""&&(s!=="a"||u!=="href")){e.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){e.removeAttribute(u);break}m=Tr(""+m),e.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){e.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(u==="formAction"?(s!=="input"&&dn(e,s,"name",b.name,b,null),dn(e,s,"formEncType",b.formEncType,b,null),dn(e,s,"formMethod",b.formMethod,b,null),dn(e,s,"formTarget",b.formTarget,b,null)):(dn(e,s,"encType",b.encType,b,null),dn(e,s,"method",b.method,b,null),dn(e,s,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){e.removeAttribute(u);break}m=Tr(""+m),e.setAttribute(u,m);break;case"onClick":m!=null&&(e.onclick=ks);break;case"onScroll":m!=null&&It("scroll",e);break;case"onScrollEnd":m!=null&&It("scrollend",e);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(c(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(c(60));e.innerHTML=u}}break;case"multiple":e.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":e.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){e.removeAttribute("xlink:href");break}u=Tr(""+m),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?e.setAttribute(u,""+m):e.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?e.setAttribute(u,""):e.removeAttribute(u);break;case"capture":case"download":m===!0?e.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?e.setAttribute(u,m):e.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?e.setAttribute(u,m):e.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?e.removeAttribute(u):e.setAttribute(u,m);break;case"popover":It("beforetoggle",e),It("toggle",e),Sr(e,"popover",m);break;case"xlinkActuate":Ys(e,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ys(e,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ys(e,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ys(e,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ys(e,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ys(e,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ys(e,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ys(e,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ys(e,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Sr(e,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=ac.get(u)||u,Sr(e,u,m))}}function Ih(e,s,u,m,b,S){switch(u){case"style":at(e,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(c(61));if(u=m.__html,u!=null){if(b.children!=null)throw Error(c(60));e.innerHTML=u}}break;case"children":typeof m=="string"?Nr(e,m):(typeof m=="number"||typeof m=="bigint")&&Nr(e,""+m);break;case"onScroll":m!=null&&It("scroll",e);break;case"onScrollEnd":m!=null&&It("scrollend",e);break;case"onClick":m!=null&&(e.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sc.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(b=u.endsWith("Capture"),s=u.slice(2,b?u.length-7:void 0),S=e[_e]||null,S=S!=null?S[u]:null,typeof S=="function"&&e.removeEventListener(s,S,b),typeof m=="function")){typeof S!="function"&&S!==null&&(u in e?e[u]=null:e.hasAttribute(u)&&e.removeAttribute(u)),e.addEventListener(s,m,b);break e}u in e?e[u]=m:m===!0?e.setAttribute(u,""):Sr(e,u,m)}}}function ys(e,s,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",e),It("load",e);var m=!1,b=!1,S;for(S in u)if(u.hasOwnProperty(S)){var I=u[S];if(I!=null)switch(S){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,s));default:dn(e,s,S,I,u,null)}}b&&dn(e,s,"srcSet",u.srcSet,u,null),m&&dn(e,s,"src",u.src,u,null);return;case"input":It("invalid",e);var F=S=I=b=null,J=null,ue=null;for(m in u)if(u.hasOwnProperty(m)){var be=u[m];if(be!=null)switch(m){case"name":b=be;break;case"type":I=be;break;case"checked":J=be;break;case"defaultChecked":ue=be;break;case"value":S=be;break;case"defaultValue":F=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(c(137,s));break;default:dn(e,s,m,be,u,null)}}le(e,S,F,J,ue,I,b,!1);return;case"select":It("invalid",e),m=I=S=null;for(b in u)if(u.hasOwnProperty(b)&&(F=u[b],F!=null))switch(b){case"value":S=F;break;case"defaultValue":I=F;break;case"multiple":m=F;default:dn(e,s,b,F,u,null)}s=S,u=I,e.multiple=!!m,s!=null?Ze(e,!!m,s,!1):u!=null&&Ze(e,!!m,u,!0);return;case"textarea":It("invalid",e),S=b=m=null;for(I in u)if(u.hasOwnProperty(I)&&(F=u[I],F!=null))switch(I){case"value":m=F;break;case"defaultValue":b=F;break;case"children":S=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(c(91));break;default:dn(e,s,I,F,u,null)}Es(e,m,b,S);return;case"option":for(J in u)if(u.hasOwnProperty(J)&&(m=u[J],m!=null))switch(J){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:dn(e,s,J,m,u,null)}return;case"dialog":It("beforetoggle",e),It("toggle",e),It("cancel",e),It("close",e);break;case"iframe":case"object":It("load",e);break;case"video":case"audio":for(m=0;m<Rl.length;m++)It(Rl[m],e);break;case"image":It("error",e),It("load",e);break;case"details":It("toggle",e);break;case"embed":case"source":case"link":It("error",e),It("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in u)if(u.hasOwnProperty(ue)&&(m=u[ue],m!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,s));default:dn(e,s,ue,m,u,null)}return;default:if(fn(s)){for(be in u)u.hasOwnProperty(be)&&(m=u[be],m!==void 0&&Ih(e,s,be,m,u,void 0));return}}for(F in u)u.hasOwnProperty(F)&&(m=u[F],m!=null&&dn(e,s,F,m,u,null))}function aw(e,s,u,m){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,S=null,I=null,F=null,J=null,ue=null,be=null;for(ye in u){var Ae=u[ye];if(u.hasOwnProperty(ye)&&Ae!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":J=Ae;default:m.hasOwnProperty(ye)||dn(e,s,ye,null,m,Ae)}}for(var de in m){var ye=m[de];if(Ae=u[de],m.hasOwnProperty(de)&&(ye!=null||Ae!=null))switch(de){case"type":S=ye;break;case"name":b=ye;break;case"checked":ue=ye;break;case"defaultChecked":be=ye;break;case"value":I=ye;break;case"defaultValue":F=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(c(137,s));break;default:ye!==Ae&&dn(e,s,de,ye,m,Ae)}}Wn(e,I,F,J,ue,be,S,b);return;case"select":ye=I=F=de=null;for(S in u)if(J=u[S],u.hasOwnProperty(S)&&J!=null)switch(S){case"value":break;case"multiple":ye=J;default:m.hasOwnProperty(S)||dn(e,s,S,null,m,J)}for(b in m)if(S=m[b],J=u[b],m.hasOwnProperty(b)&&(S!=null||J!=null))switch(b){case"value":de=S;break;case"defaultValue":F=S;break;case"multiple":I=S;default:S!==J&&dn(e,s,b,S,m,J)}s=F,u=I,m=ye,de!=null?Ze(e,!!u,de,!1):!!m!=!!u&&(s!=null?Ze(e,!!u,s,!0):Ze(e,!!u,u?[]:"",!1));return;case"textarea":ye=de=null;for(F in u)if(b=u[F],u.hasOwnProperty(F)&&b!=null&&!m.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:dn(e,s,F,null,m,b)}for(I in m)if(b=m[I],S=u[I],m.hasOwnProperty(I)&&(b!=null||S!=null))switch(I){case"value":de=b;break;case"defaultValue":ye=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(c(91));break;default:b!==S&&dn(e,s,I,b,m,S)}Vn(e,de,ye);return;case"option":for(var Qe in u)if(de=u[Qe],u.hasOwnProperty(Qe)&&de!=null&&!m.hasOwnProperty(Qe))switch(Qe){case"selected":e.selected=!1;break;default:dn(e,s,Qe,null,m,de)}for(J in m)if(de=m[J],ye=u[J],m.hasOwnProperty(J)&&de!==ye&&(de!=null||ye!=null))switch(J){case"selected":e.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:dn(e,s,J,de,m,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in u)de=u[ut],u.hasOwnProperty(ut)&&de!=null&&!m.hasOwnProperty(ut)&&dn(e,s,ut,null,m,de);for(ue in m)if(de=m[ue],ye=u[ue],m.hasOwnProperty(ue)&&de!==ye&&(de!=null||ye!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(c(137,s));break;default:dn(e,s,ue,de,m,ye)}return;default:if(fn(s)){for(var hn in u)de=u[hn],u.hasOwnProperty(hn)&&de!==void 0&&!m.hasOwnProperty(hn)&&Ih(e,s,hn,void 0,m,de);for(be in m)de=m[be],ye=u[be],!m.hasOwnProperty(be)||de===ye||de===void 0&&ye===void 0||Ih(e,s,be,de,m,ye);return}}for(var re in u)de=u[re],u.hasOwnProperty(re)&&de!=null&&!m.hasOwnProperty(re)&&dn(e,s,re,null,m,de);for(Ae in m)de=m[Ae],ye=u[Ae],!m.hasOwnProperty(Ae)||de===ye||de==null&&ye==null||dn(e,s,Ae,de,m,ye)}function lm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,s=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var b=u[m],S=b.transferSize,I=b.initiatorType,F=b.duration;if(S&&F&&lm(I)){for(I=0,F=b.responseEnd,m+=1;m<u.length;m++){var J=u[m],ue=J.startTime;if(ue>F)break;var be=J.transferSize,Ae=J.initiatorType;be&&lm(Ae)&&(J=J.responseEnd,I+=be*(J<F?1:(F-ue)/(J-ue)))}if(--m,s+=8*(S+I)/(b.duration/1e3),e++,10<e)break}}if(0<e)return s/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Oh=null,Mh=null;function au(e){return e.nodeType===9?e:e.ownerDocument}function cm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function um(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function kh(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Dh=null;function iw(){var e=window.event;return e&&e.type==="popstate"?e===Dh?!1:(Dh=e,!0):(Dh=null,!1)}var dm=typeof setTimeout=="function"?setTimeout:void 0,ow=typeof clearTimeout=="function"?clearTimeout:void 0,hm=typeof Promise=="function"?Promise:void 0,lw=typeof queueMicrotask=="function"?queueMicrotask:typeof hm<"u"?function(e){return hm.resolve(null).then(e).catch(cw)}:dm;function cw(e){setTimeout(function(){throw e})}function $r(e){return e==="head"}function fm(e,s){var u=s,m=0;do{var b=u.nextSibling;if(e.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"||u==="/&"){if(m===0){e.removeChild(b),Ro(s);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")Ol(e.ownerDocument.documentElement);else if(u==="head"){u=e.ownerDocument.head,Ol(u);for(var S=u.firstChild;S;){var I=S.nextSibling,F=S.nodeName;S[fi]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&S.rel.toLowerCase()==="stylesheet"||u.removeChild(S),S=I}}else u==="body"&&Ol(e.ownerDocument.body);u=b}while(u);Ro(s)}function gm(e,s){var u=e;e=0;do{var m=u.nextSibling;if(u.nodeType===1?s?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(s?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(e===0)break;e--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||e++;u=m}while(u)}function Lh(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var u=s;switch(s=s.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Lh(u),Ms(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}e.removeChild(u)}}function uw(e,s,u,m){for(;e.nodeType===1;){var b=u;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!m&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(m){if(!e[fi])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(S=e.getAttribute("rel"),S==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(S!==b.rel||e.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||e.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||e.getAttribute("title")!==(b.title==null?null:b.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(S=e.getAttribute("src"),(S!==(b.src==null?null:b.src)||e.getAttribute("type")!==(b.type==null?null:b.type)||e.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&S&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var S=b.name==null?null:""+b.name;if(b.type==="hidden"&&e.getAttribute("name")===S)return e}else return e;if(e=xa(e.nextSibling),e===null)break}return null}function dw(e,s,u){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!u||(e=xa(e.nextSibling),e===null))return null;return e}function mm(e,s){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=xa(e.nextSibling),e===null))return null;return e}function Bh(e){return e.data==="$?"||e.data==="$~"}function Uh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function hw(e,s){var u=e.ownerDocument;if(e.data==="$~")e._reactRetry=s;else if(e.data!=="$?"||u.readyState!=="loading")s();else{var m=function(){s(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),e._reactRetry=m}}function xa(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return e}var Ph=null;function pm(e){e=e.nextSibling;for(var s=0;e;){if(e.nodeType===8){var u=e.data;if(u==="/$"||u==="/&"){if(s===0)return xa(e.nextSibling);s--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||s++}e=e.nextSibling}return null}function xm(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var u=e.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(s===0)return e;s--}else u!=="/$"&&u!=="/&"||s++}e=e.previousSibling}return null}function ym(e,s,u){switch(s=au(u),e){case"html":if(e=s.documentElement,!e)throw Error(c(452));return e;case"head":if(e=s.head,!e)throw Error(c(453));return e;case"body":if(e=s.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Ol(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Ms(e)}var ya=new Map,wm=new Set;function ru(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mr=ie.d;ie.d={f:fw,r:gw,D:mw,C:pw,L:xw,m:yw,X:bw,S:ww,M:vw};function fw(){var e=mr.f(),s=Kc();return e||s}function gw(e){var s=Zt(e);s!==null&&s.tag===5&&s.type==="form"?L1(s):mr.r(e)}var No=typeof document>"u"?null:document;function bm(e,s,u){var m=No;if(m&&typeof s=="string"&&s){var b=Nt(s);b='link[rel="'+e+'"][href="'+b+'"]',typeof u=="string"&&(b+='[crossorigin="'+u+'"]'),wm.has(b)||(wm.add(b),e={rel:e,crossOrigin:u,href:s},m.querySelector(b)===null&&(s=m.createElement("link"),ys(s,"link",e),Bn(s),m.head.appendChild(s)))}}function mw(e){mr.D(e),bm("dns-prefetch",e,null)}function pw(e,s){mr.C(e,s),bm("preconnect",e,s)}function xw(e,s,u){mr.L(e,s,u);var m=No;if(m&&e&&s){var b='link[rel="preload"][as="'+Nt(s)+'"]';s==="image"&&u&&u.imageSrcSet?(b+='[imagesrcset="'+Nt(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(b+='[imagesizes="'+Nt(u.imageSizes)+'"]')):b+='[href="'+Nt(e)+'"]';var S=b;switch(s){case"style":S=To(e);break;case"script":S=jo(e)}ya.has(S)||(e=N({rel:"preload",href:s==="image"&&u&&u.imageSrcSet?void 0:e,as:s},u),ya.set(S,e),m.querySelector(b)!==null||s==="style"&&m.querySelector(Ml(S))||s==="script"&&m.querySelector(kl(S))||(s=m.createElement("link"),ys(s,"link",e),Bn(s),m.head.appendChild(s)))}}function yw(e,s){mr.m(e,s);var u=No;if(u&&e){var m=s&&typeof s.as=="string"?s.as:"script",b='link[rel="modulepreload"][as="'+Nt(m)+'"][href="'+Nt(e)+'"]',S=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=jo(e)}if(!ya.has(S)&&(e=N({rel:"modulepreload",href:e},s),ya.set(S,e),u.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(kl(S)))return}m=u.createElement("link"),ys(m,"link",e),Bn(m),u.head.appendChild(m)}}}function ww(e,s,u){mr.S(e,s,u);var m=No;if(m&&e){var b=Ss(m).hoistableStyles,S=To(e);s=s||"default";var I=b.get(S);if(!I){var F={loading:0,preload:null};if(I=m.querySelector(Ml(S)))F.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":s},u),(u=ya.get(S))&&zh(e,u);var J=I=m.createElement("link");Bn(J),ys(J,"link",e),J._p=new Promise(function(ue,be){J.onload=ue,J.onerror=be}),J.addEventListener("load",function(){F.loading|=1}),J.addEventListener("error",function(){F.loading|=2}),F.loading|=4,iu(I,s,m)}I={type:"stylesheet",instance:I,count:1,state:F},b.set(S,I)}}}function bw(e,s){mr.X(e,s);var u=No;if(u&&e){var m=Ss(u).hoistableScripts,b=jo(e),S=m.get(b);S||(S=u.querySelector(kl(b)),S||(e=N({src:e,async:!0},s),(s=ya.get(b))&&Fh(e,s),S=u.createElement("script"),Bn(S),ys(S,"link",e),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(b,S))}}function vw(e,s){mr.M(e,s);var u=No;if(u&&e){var m=Ss(u).hoistableScripts,b=jo(e),S=m.get(b);S||(S=u.querySelector(kl(b)),S||(e=N({src:e,async:!0,type:"module"},s),(s=ya.get(b))&&Fh(e,s),S=u.createElement("script"),Bn(S),ys(S,"link",e),u.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(b,S))}}function vm(e,s,u,m){var b=(b=Ne.current)?ru(b):null;if(!b)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(s=To(u.href),u=Ss(b).hoistableStyles,m=u.get(s),m||(m={type:"style",instance:null,count:0,state:null},u.set(s,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){e=To(u.href);var S=Ss(b).hoistableStyles,I=S.get(e);if(I||(b=b.ownerDocument||b,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(e,I),(S=b.querySelector(Ml(e)))&&!S._p&&(I.instance=S,I.state.loading=5),ya.has(e)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ya.set(e,u),S||Cw(b,e,u,I.state))),s&&m===null)throw Error(c(528,""));return I}if(s&&m!==null)throw Error(c(529,""));return null;case"script":return s=u.async,u=u.src,typeof u=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=jo(u),u=Ss(b).hoistableScripts,m=u.get(s),m||(m={type:"script",instance:null,count:0,state:null},u.set(s,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function To(e){return'href="'+Nt(e)+'"'}function Ml(e){return'link[rel="stylesheet"]['+e+"]"}function Cm(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function Cw(e,s,u,m){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?m.loading=1:(s=e.createElement("link"),m.preload=s,s.addEventListener("load",function(){return m.loading|=1}),s.addEventListener("error",function(){return m.loading|=2}),ys(s,"link",u),Bn(s),e.head.appendChild(s))}function jo(e){return'[src="'+Nt(e)+'"]'}function kl(e){return"script[async]"+e}function _m(e,s,u){if(s.count++,s.instance===null)switch(s.type){case"style":var m=e.querySelector('style[data-href~="'+Nt(u.href)+'"]');if(m)return s.instance=m,Bn(m),m;var b=N({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(e.ownerDocument||e).createElement("style"),Bn(m),ys(m,"style",b),iu(m,u.precedence,e),s.instance=m;case"stylesheet":b=To(u.href);var S=e.querySelector(Ml(b));if(S)return s.state.loading|=4,s.instance=S,Bn(S),S;m=Cm(u),(b=ya.get(b))&&zh(m,b),S=(e.ownerDocument||e).createElement("link"),Bn(S);var I=S;return I._p=new Promise(function(F,J){I.onload=F,I.onerror=J}),ys(S,"link",m),s.state.loading|=4,iu(S,u.precedence,e),s.instance=S;case"script":return S=jo(u.src),(b=e.querySelector(kl(S)))?(s.instance=b,Bn(b),b):(m=u,(b=ya.get(S))&&(m=N({},u),Fh(m,b)),e=e.ownerDocument||e,b=e.createElement("script"),Bn(b),ys(b,"link",m),e.head.appendChild(b),s.instance=b);case"void":return null;default:throw Error(c(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(m=s.instance,s.state.loading|=4,iu(m,u.precedence,e));return s.instance}function iu(e,s,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,S=b,I=0;I<m.length;I++){var F=m[I];if(F.dataset.precedence===s)S=F;else if(S!==b)break}S?S.parentNode.insertBefore(e,S.nextSibling):(s=u.nodeType===9?u.head:u,s.insertBefore(e,s.firstChild))}function zh(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Fh(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var ou=null;function Sm(e,s,u){if(ou===null){var m=new Map,b=ou=new Map;b.set(u,m)}else b=ou,m=b.get(u),m||(m=new Map,b.set(u,m));if(m.has(e))return m;for(m.set(e,null),u=u.getElementsByTagName(e),b=0;b<u.length;b++){var S=u[b];if(!(S[fi]||S[Ee]||e==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var I=S.getAttribute(s)||"";I=e+I;var F=m.get(I);F?F.push(S):m.set(I,[S])}}return m}function Em(e,s,u){e=e.ownerDocument||e,e.head.insertBefore(u,s==="title"?e.querySelector("head > title"):null)}function _w(e,s,u){if(u===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Am(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Sw(e,s,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var b=To(m.href),S=s.querySelector(Ml(b));if(S){s=S._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(e.count++,e=lu.bind(e),s.then(e,e)),u.state.loading|=4,u.instance=S,Bn(S);return}S=s.ownerDocument||s,m=Cm(m),(b=ya.get(b))&&zh(m,b),S=S.createElement("link"),Bn(S);var I=S;I._p=new Promise(function(F,J){I.onload=F,I.onerror=J}),ys(S,"link",m),u.instance=S}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(u,s),(s=u.state.preload)&&(u.state.loading&3)===0&&(e.count++,u=lu.bind(e),s.addEventListener("load",u),s.addEventListener("error",u))}}var Hh=0;function Ew(e,s){return e.stylesheets&&e.count===0&&uu(e,e.stylesheets),0<e.count||0<e.imgCount?function(u){var m=setTimeout(function(){if(e.stylesheets&&uu(e,e.stylesheets),e.unsuspend){var S=e.unsuspend;e.unsuspend=null,S()}},6e4+s);0<e.imgBytes&&Hh===0&&(Hh=62500*rw());var b=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uu(e,e.stylesheets),e.unsuspend)){var S=e.unsuspend;e.unsuspend=null,S()}},(e.imgBytes>Hh?50:800)+s);return e.unsuspend=u,function(){e.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function lu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var cu=null;function uu(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,cu=new Map,s.forEach(Aw,e),cu=null,lu.call(e))}function Aw(e,s){if(!(s.state.loading&4)){var u=cu.get(e);if(u)var m=u.get(null);else{u=new Map,cu.set(e,u);for(var b=e.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<b.length;S++){var I=b[S];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(u.set(I.dataset.precedence,I),m=I)}m&&u.set(null,m)}b=s.instance,I=b.getAttribute("data-precedence"),S=u.get(I)||m,S===m&&u.set(null,b),u.set(I,b),this.count++,m=lu.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),S?S.parentNode.insertBefore(b,S.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(b,e.firstChild)),s.state.loading|=4}}var Dl={$$typeof:P,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function Nw(e,s,u,m,b,S,I,F,J){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=In(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.hiddenUpdates=In(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=S,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function Nm(e,s,u,m,b,S,I,F,J,ue,be,Ae){return e=new Nw(e,s,u,I,J,ue,be,Ae,F),s=1,S===!0&&(s|=24),S=Ks(3,null,null,s),e.current=S,S.stateNode=e,s=vd(),s.refCount++,e.pooledCache=s,s.refCount++,S.memoizedState={element:m,isDehydrated:u,cache:s},Ed(S),e}function Tm(e){return e?(e=ro,e):ro}function jm(e,s,u,m,b,S){b=Tm(b),m.context===null?m.context=b:m.pendingContext=b,m=Fr(s),m.payload={element:u},S=S===void 0?null:S,S!==null&&(m.callback=S),u=Hr(e,m,s),u!==null&&(Fs(u,e,s),fl(u,e,s))}function Rm(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var u=e.retryLane;e.retryLane=u!==0&&u<s?u:s}}function qh(e,s){Rm(e,s),(e=e.alternate)&&Rm(e,s)}function Im(e){if(e.tag===13||e.tag===31){var s=Ci(e,67108864);s!==null&&Fs(s,e,67108864),qh(e,67108864)}}function Om(e){if(e.tag===13||e.tag===31){var s=ta();s=yn(s);var u=Ci(e,s);u!==null&&Fs(u,e,s),qh(e,s)}}var du=!0;function Tw(e,s,u,m){var b=$.T;$.T=null;var S=ie.p;try{ie.p=2,Vh(e,s,u,m)}finally{ie.p=S,$.T=b}}function jw(e,s,u,m){var b=$.T;$.T=null;var S=ie.p;try{ie.p=8,Vh(e,s,u,m)}finally{ie.p=S,$.T=b}}function Vh(e,s,u,m){if(du){var b=Gh(m);if(b===null)Rh(e,s,m,hu,u),km(e,m);else if(Iw(b,e,s,u,m))m.stopPropagation();else if(km(e,m),s&4&&-1<Rw.indexOf(e)){for(;b!==null;){var S=Zt(b);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var I=he(S.pendingLanes);if(I!==0){var F=S;for(F.pendingLanes|=2,F.entangledLanes|=2;I;){var J=1<<31-gt(I);F.entanglements[1]|=J,I&=~J}Va(S),(Jt&6)===0&&(Wc=Fe()+500,jl(0))}}break;case 31:case 13:F=Ci(S,2),F!==null&&Fs(F,S,2),Kc(),qh(S,2)}if(S=Gh(m),S===null&&Rh(e,s,m,hu,u),S===b)break;b=S}b!==null&&m.stopPropagation()}else Rh(e,s,m,null,u)}}function Gh(e){return e=$o(e),Yh(e)}var hu=null;function Yh(e){if(hu=null,e=Ln(e),e!==null){var s=f(e);if(s===null)e=null;else{var u=s.tag;if(u===13){if(e=x(s),e!==null)return e;e=null}else if(u===31){if(e=v(s),e!==null)return e;e=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return hu=e,null}function Mm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case Ct:return 2;case Tn:return 8;case sn:case Vt:return 32;case qn:return 268435456;default:return 32}default:return 32}}var Xh=!1,Jr=null,ei=null,ti=null,Ll=new Map,Bl=new Map,ni=[],Rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function km(e,s){switch(e){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ll.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(s.pointerId)}}function Ul(e,s,u,m,b,S){return e===null||e.nativeEvent!==S?(e={blockedOn:s,domEventName:u,eventSystemFlags:m,nativeEvent:S,targetContainers:[b]},s!==null&&(s=Zt(s),s!==null&&Im(s)),e):(e.eventSystemFlags|=m,s=e.targetContainers,b!==null&&s.indexOf(b)===-1&&s.push(b),e)}function Iw(e,s,u,m,b){switch(s){case"focusin":return Jr=Ul(Jr,e,s,u,m,b),!0;case"dragenter":return ei=Ul(ei,e,s,u,m,b),!0;case"mouseover":return ti=Ul(ti,e,s,u,m,b),!0;case"pointerover":var S=b.pointerId;return Ll.set(S,Ul(Ll.get(S)||null,e,s,u,m,b)),!0;case"gotpointercapture":return S=b.pointerId,Bl.set(S,Ul(Bl.get(S)||null,e,s,u,m,b)),!0}return!1}function Dm(e){var s=Ln(e.target);if(s!==null){var u=f(s);if(u!==null){if(s=u.tag,s===13){if(s=x(u),s!==null){e.blockedOn=s,He(e.priority,function(){Om(u)});return}}else if(s===31){if(s=v(u),s!==null){e.blockedOn=s,He(e.priority,function(){Om(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){e.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fu(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var u=Gh(e.nativeEvent);if(u===null){u=e.nativeEvent;var m=new u.constructor(u.type,u);gi=m,u.target.dispatchEvent(m),gi=null}else return s=Zt(u),s!==null&&Im(s),e.blockedOn=u,!1;s.shift()}return!0}function Lm(e,s,u){fu(e)&&u.delete(s)}function Ow(){Xh=!1,Jr!==null&&fu(Jr)&&(Jr=null),ei!==null&&fu(ei)&&(ei=null),ti!==null&&fu(ti)&&(ti=null),Ll.forEach(Lm),Bl.forEach(Lm)}function gu(e,s){e.blockedOn===s&&(e.blockedOn=null,Xh||(Xh=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ow)))}var mu=null;function Bm(e){mu!==e&&(mu=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){mu===e&&(mu=null);for(var s=0;s<e.length;s+=3){var u=e[s],m=e[s+1],b=e[s+2];if(typeof m!="function"){if(Yh(m||u)===null)continue;break}var S=Zt(u);S!==null&&(e.splice(s,3),s-=3,Gd(S,{pending:!0,data:b,method:u.method,action:m},m,b))}}))}function Ro(e){function s(J){return gu(J,e)}Jr!==null&&gu(Jr,e),ei!==null&&gu(ei,e),ti!==null&&gu(ti,e),Ll.forEach(s),Bl.forEach(s);for(var u=0;u<ni.length;u++){var m=ni[u];m.blockedOn===e&&(m.blockedOn=null)}for(;0<ni.length&&(u=ni[0],u.blockedOn===null);)Dm(u),u.blockedOn===null&&ni.shift();if(u=(e.ownerDocument||e).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var b=u[m],S=u[m+1],I=b[_e]||null;if(typeof S=="function")I||Bm(u);else if(I){var F=null;if(S&&S.hasAttribute("formAction")){if(b=S,I=S[_e]||null)F=I.formAction;else if(Yh(b)!==null)continue}else F=I.action;typeof F=="function"?u[m+1]=F:(u.splice(m,3),m-=3),Bm(u)}}}function Um(){function e(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(I){return b=I})},focusReset:"manual",scroll:"manual"})}function s(){b!==null&&(b(),b=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),b!==null&&(b(),b=null)}}}function Wh(e){this._internalRoot=e}pu.prototype.render=Wh.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(c(409));var u=s.current,m=ta();jm(u,m,e,s,null,null)},pu.prototype.unmount=Wh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;jm(e.current,2,null,e,null,null),Kc(),s[Ve]=null}};function pu(e){this._internalRoot=e}pu.prototype.unstable_scheduleHydration=function(e){if(e){var s=ns();e={blockedOn:null,target:e,priority:s};for(var u=0;u<ni.length&&s!==0&&s<ni[u].priority;u++);ni.splice(u,0,e),u===0&&Dm(e)}};var Pm=n.version;if(Pm!=="19.2.0")throw Error(c(527,Pm,"19.2.0"));ie.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=w(s),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var Mw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{Ut=xu.inject(Mw),je=xu}catch{}}return zl.createRoot=function(e,s){if(!h(e))throw Error(c(299));var u=!1,m="",b=Y1,S=X1,I=W1;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(S=s.onCaughtError),s.onRecoverableError!==void 0&&(I=s.onRecoverableError)),s=Nm(e,1,!1,null,null,u,m,null,b,S,I,Um),e[Ve]=s.current,jh(e),new Wh(s)},zl.hydrateRoot=function(e,s,u){if(!h(e))throw Error(c(299));var m=!1,b="",S=Y1,I=X1,F=W1,J=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(I=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.formState!==void 0&&(J=u.formState)),s=Nm(e,1,!0,s,u??null,m,b,J,S,I,F,Um),s.context=Tm(null),u=s.current,m=ta(),m=yn(m),b=Fr(m),b.callback=null,Hr(u,b,m),u=m,s.current.lanes=u,G(s,u),Va(s),e[Ve]=s.current,jh(e),new pu(s)},zl.version="19.2.0",zl}var Qm;function Vw(){if(Qm)return Zh.exports;Qm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Zh.exports=qw(),Zh.exports}var Gw=Vw();var Km="popstate";function Yw(o={}){function n(h,f){let{pathname:x="/",search:v="",hash:C=""}=Gi(h.location.hash.substring(1));return!x.startsWith("/")&&!x.startsWith(".")&&(x="/"+x),Hf("",{pathname:x,search:v,hash:C},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function a(h,f){let x=h.document.querySelector("base"),v="";if(x&&x.getAttribute("href")){let C=h.location.href,w=C.indexOf("#");v=w===-1?C:C.slice(0,w)}return v+"#"+(typeof f=="string"?f:Wl(f))}function c(h,f){la(h.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return Ww(n,a,c,o)}function Nn(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function la(o,n){if(!o){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Xw(){return Math.random().toString(36).substring(2,10)}function Zm(o,n){return{usr:o.state,key:o.key,idx:n}}function Hf(o,n,a=null,c){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof n=="string"?Gi(n):n,state:a,key:n&&n.key||c||Xw()}}function Wl({pathname:o="/",search:n="",hash:a=""}){return n&&n!=="?"&&(o+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(o+=a.charAt(0)==="#"?a:"#"+a),o}function Gi(o){let n={};if(o){let a=o.indexOf("#");a>=0&&(n.hash=o.substring(a),o=o.substring(0,a));let c=o.indexOf("?");c>=0&&(n.search=o.substring(c),o=o.substring(0,c)),o&&(n.pathname=o)}return n}function Ww(o,n,a,c={}){let{window:h=document.defaultView,v5Compat:f=!1}=c,x=h.history,v="POP",C=null,w=A();w==null&&(w=0,x.replaceState({...x.state,idx:w},""));function A(){return(x.state||{idx:null}).idx}function N(){v="POP";let U=A(),H=U==null?null:U-w;w=U,C&&C({action:v,location:D.location,delta:H})}function R(U,H){v="PUSH";let B=Hf(D.location,U,H);a&&a(B,U),w=A()+1;let P=Zm(B,w),Q=D.createHref(B);try{x.pushState(P,"",Q)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;h.location.assign(Q)}f&&C&&C({action:v,location:D.location,delta:1})}function T(U,H){v="REPLACE";let B=Hf(D.location,U,H);a&&a(B,U),w=A();let P=Zm(B,w),Q=D.createHref(B);x.replaceState(P,"",Q),f&&C&&C({action:v,location:D.location,delta:0})}function O(U){return Qw(U)}let D={get action(){return v},get location(){return o(h,x)},listen(U){if(C)throw new Error("A history only accepts one active listener");return h.addEventListener(Km,N),C=U,()=>{h.removeEventListener(Km,N),C=null}},createHref(U){return n(h,U)},createURL:O,encodeLocation(U){let H=O(U);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:R,replace:T,go(U){return x.go(U)}};return D}function Qw(o,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Nn(a,"No window.location.(origin|href) available to create URL");let c=typeof o=="string"?o:Wl(o);return c=c.replace(/ $/,"%20"),!n&&c.startsWith("//")&&(c=a+c),new URL(c,a)}function Lx(o,n,a="/"){return Kw(o,n,a,!1)}function Kw(o,n,a,c){let h=typeof n=="string"?Gi(n):n,f=br(h.pathname||"/",a);if(f==null)return null;let x=Bx(o);Zw(x);let v=null;for(let C=0;v==null&&C<x.length;++C){let w=lb(f);v=ib(x[C],w,c)}return v}function Bx(o,n=[],a=[],c="",h=!1){let f=(x,v,C=h,w)=>{let A={relativePath:w===void 0?x.path||"":w,caseSensitive:x.caseSensitive===!0,childrenIndex:v,route:x};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(c)&&C)return;Nn(A.relativePath.startsWith(c),`Absolute route path "${A.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(c.length)}let N=yr([c,A.relativePath]),R=a.concat(A);x.children&&x.children.length>0&&(Nn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),Bx(x.children,n,R,N,C)),!(x.path==null&&!x.index)&&n.push({path:N,score:ab(N,x.index),routesMeta:R})};return o.forEach((x,v)=>{if(x.path===""||!x.path?.includes("?"))f(x,v);else for(let C of Ux(x.path))f(x,v,!0,C)}),n}function Ux(o){let n=o.split("/");if(n.length===0)return[];let[a,...c]=n,h=a.endsWith("?"),f=a.replace(/\?$/,"");if(c.length===0)return h?[f,""]:[f];let x=Ux(c.join("/")),v=[];return v.push(...x.map(C=>C===""?f:[f,C].join("/"))),h&&v.push(...x),v.map(C=>o.startsWith("/")&&C===""?"/":C)}function Zw(o){o.sort((n,a)=>n.score!==a.score?a.score-n.score:rb(n.routesMeta.map(c=>c.childrenIndex),a.routesMeta.map(c=>c.childrenIndex)))}var $w=/^:[\w-]+$/,Jw=3,eb=2,tb=1,nb=10,sb=-2,$m=o=>o==="*";function ab(o,n){let a=o.split("/"),c=a.length;return a.some($m)&&(c+=sb),n&&(c+=eb),a.filter(h=>!$m(h)).reduce((h,f)=>h+($w.test(f)?Jw:f===""?tb:nb),c)}function rb(o,n){return o.length===n.length&&o.slice(0,-1).every((c,h)=>c===n[h])?o[o.length-1]-n[n.length-1]:0}function ib(o,n,a=!1){let{routesMeta:c}=o,h={},f="/",x=[];for(let v=0;v<c.length;++v){let C=c[v],w=v===c.length-1,A=f==="/"?n:n.slice(f.length)||"/",N=Du({path:C.relativePath,caseSensitive:C.caseSensitive,end:w},A),R=C.route;if(!N&&w&&a&&!c[c.length-1].route.index&&(N=Du({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},A)),!N)return null;Object.assign(h,N.params),x.push({params:h,pathname:yr([f,N.pathname]),pathnameBase:fb(yr([f,N.pathnameBase])),route:R}),N.pathnameBase!=="/"&&(f=yr([f,N.pathnameBase]))}return x}function Du(o,n){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[a,c]=ob(o.path,o.caseSensitive,o.end),h=n.match(a);if(!h)return null;let f=h[0],x=f.replace(/(.)\/+$/,"$1"),v=h.slice(1);return{params:c.reduce((w,{paramName:A,isOptional:N},R)=>{if(A==="*"){let O=v[R]||"";x=f.slice(0,f.length-O.length).replace(/(.)\/+$/,"$1")}const T=v[R];return N&&!T?w[A]=void 0:w[A]=(T||"").replace(/%2F/g,"/"),w},{}),pathname:f,pathnameBase:x,pattern:o}}function ob(o,n=!1,a=!0){la(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let c=[],h="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,v,C)=>(c.push({paramName:v,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return o.endsWith("*")?(c.push({paramName:"*"}),h+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?h+="\\/*$":o!==""&&o!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,n?void 0:"i"),c]}function lb(o){try{return o.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return la(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),o}}function br(o,n){if(n==="/")return o;if(!o.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,c=o.charAt(a);return c&&c!=="/"?null:o.slice(a)||"/"}var cb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ub=o=>cb.test(o);function db(o,n="/"){let{pathname:a,search:c="",hash:h=""}=typeof o=="string"?Gi(o):o,f;if(a)if(ub(a))f=a;else{if(a.includes("//")){let x=a;a=a.replace(/\/\/+/g,"/"),la(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${a}`)}a.startsWith("/")?f=Jm(a.substring(1),"/"):f=Jm(a,n)}else f=n;return{pathname:f,search:gb(c),hash:mb(h)}}function Jm(o,n){let a=n.replace(/\/+$/,"").split("/");return o.split("/").forEach(h=>{h===".."?a.length>1&&a.pop():h!=="."&&a.push(h)}),a.length>1?a.join("/"):"/"}function tf(o,n,a,c){return`Cannot include a '${o}' character in a manually specified \`to.${n}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hb(o){return o.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function h0(o){let n=hb(o);return n.map((a,c)=>c===n.length-1?a.pathname:a.pathnameBase)}function f0(o,n,a,c=!1){let h;typeof o=="string"?h=Gi(o):(h={...o},Nn(!h.pathname||!h.pathname.includes("?"),tf("?","pathname","search",h)),Nn(!h.pathname||!h.pathname.includes("#"),tf("#","pathname","hash",h)),Nn(!h.search||!h.search.includes("#"),tf("#","search","hash",h)));let f=o===""||h.pathname==="",x=f?"/":h.pathname,v;if(x==null)v=a;else{let N=n.length-1;if(!c&&x.startsWith("..")){let R=x.split("/");for(;R[0]==="..";)R.shift(),N-=1;h.pathname=R.join("/")}v=N>=0?n[N]:"/"}let C=db(h,v),w=x&&x!=="/"&&x.endsWith("/"),A=(f||x===".")&&a.endsWith("/");return!C.pathname.endsWith("/")&&(w||A)&&(C.pathname+="/"),C}var yr=o=>o.join("/").replace(/\/\/+/g,"/"),fb=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),gb=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,mb=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function pb(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Px=["POST","PUT","PATCH","DELETE"];new Set(Px);var xb=["GET",...Px];new Set(xb);var Vo=M.createContext(null);Vo.displayName="DataRouter";var Yu=M.createContext(null);Yu.displayName="DataRouterState";M.createContext(!1);var zx=M.createContext({isTransitioning:!1});zx.displayName="ViewTransition";var yb=M.createContext(new Map);yb.displayName="Fetchers";var wb=M.createContext(null);wb.displayName="Await";var ka=M.createContext(null);ka.displayName="Navigation";var Jl=M.createContext(null);Jl.displayName="Location";var Da=M.createContext({outlet:null,matches:[],isDataRoute:!1});Da.displayName="Route";var g0=M.createContext(null);g0.displayName="RouteError";function bb(o,{relative:n}={}){Nn(Go(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:c}=M.useContext(ka),{hash:h,pathname:f,search:x}=ec(o,{relative:n}),v=f;return a!=="/"&&(v=f==="/"?a:yr([a,f])),c.createHref({pathname:v,search:x,hash:h})}function Go(){return M.useContext(Jl)!=null}function Cr(){return Nn(Go(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Jl).location}var Fx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hx(o){M.useContext(ka).static||M.useLayoutEffect(o)}function us(){let{isDataRoute:o}=M.useContext(Da);return o?Mb():vb()}function vb(){Nn(Go(),"useNavigate() may be used only in the context of a <Router> component.");let o=M.useContext(Vo),{basename:n,navigator:a}=M.useContext(ka),{matches:c}=M.useContext(Da),{pathname:h}=Cr(),f=JSON.stringify(h0(c)),x=M.useRef(!1);return Hx(()=>{x.current=!0}),M.useCallback((C,w={})=>{if(la(x.current,Fx),!x.current)return;if(typeof C=="number"){a.go(C);return}let A=f0(C,JSON.parse(f),h,w.relative==="path");o==null&&n!=="/"&&(A.pathname=A.pathname==="/"?n:yr([n,A.pathname])),(w.replace?a.replace:a.push)(A,w.state,w)},[n,a,f,h,o])}M.createContext(null);function Xu(){let{matches:o}=M.useContext(Da),n=o[o.length-1];return n?n.params:{}}function ec(o,{relative:n}={}){let{matches:a}=M.useContext(Da),{pathname:c}=Cr(),h=JSON.stringify(h0(a));return M.useMemo(()=>f0(o,JSON.parse(h),c,n==="path"),[o,h,c,n])}function Cb(o,n){return qx(o,n)}function qx(o,n,a,c,h){Nn(Go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=M.useContext(ka),{matches:x}=M.useContext(Da),v=x[x.length-1],C=v?v.params:{},w=v?v.pathname:"/",A=v?v.pathnameBase:"/",N=v&&v.route;{let B=N&&N.path||"";Vx(w,!N||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let R=Cr(),T;if(n){let B=typeof n=="string"?Gi(n):n;Nn(A==="/"||B.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${B.pathname}" was given in the \`location\` prop.`),T=B}else T=R;let O=T.pathname||"/",D=O;if(A!=="/"){let B=A.replace(/^\//,"").split("/");D="/"+O.replace(/^\//,"").split("/").slice(B.length).join("/")}let U=Lx(o,{pathname:D});la(N||U!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),la(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=Nb(U&&U.map(B=>Object.assign({},B,{params:Object.assign({},C,B.params),pathname:yr([A,f.encodeLocation?f.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?A:yr([A,f.encodeLocation?f.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),x,a,c,h);return n&&H?M.createElement(Jl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},H):H}function _b(){let o=Ob(),n=pb(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),a=o instanceof Error?o.stack:null,c="rgba(200,200,200, 0.5)",h={padding:"0.5rem",backgroundColor:c},f={padding:"2px 4px",backgroundColor:c},x=null;return console.error("Error handled by React Router default ErrorBoundary:",o),x=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:f},"ErrorBoundary")," or"," ",M.createElement("code",{style:f},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},n),a?M.createElement("pre",{style:h},a):null,x)}var Sb=M.createElement(_b,null),Eb=class extends M.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,n){return n.location!==o.location||n.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:n.error,location:n.location,revalidation:o.revalidation||n.revalidation}}componentDidCatch(o,n){this.props.onError?this.props.onError(o,n):console.error("React Router caught the following error during render",o)}render(){return this.state.error!==void 0?M.createElement(Da.Provider,{value:this.props.routeContext},M.createElement(g0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ab({routeContext:o,match:n,children:a}){let c=M.useContext(Vo);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Da.Provider,{value:o},a)}function Nb(o,n=[],a=null,c=null,h=null){if(o==null){if(!a)return null;if(a.errors)o=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)o=a.matches;else return null}let f=o,x=a?.errors;if(x!=null){let A=f.findIndex(N=>N.route.id&&x?.[N.route.id]!==void 0);Nn(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),f=f.slice(0,Math.min(f.length,A+1))}let v=!1,C=-1;if(a)for(let A=0;A<f.length;A++){let N=f[A];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(C=A),N.route.id){let{loaderData:R,errors:T}=a,O=N.route.loader&&!R.hasOwnProperty(N.route.id)&&(!T||T[N.route.id]===void 0);if(N.route.lazy||O){v=!0,C>=0?f=f.slice(0,C+1):f=[f[0]];break}}}let w=a&&c?(A,N)=>{c(A,{location:a.location,params:a.matches?.[0]?.params??{},errorInfo:N})}:void 0;return f.reduceRight((A,N,R)=>{let T,O=!1,D=null,U=null;a&&(T=x&&N.route.id?x[N.route.id]:void 0,D=N.route.errorElement||Sb,v&&(C<0&&R===0?(Vx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,U=null):C===R&&(O=!0,U=N.route.hydrateFallbackElement||null)));let H=n.concat(f.slice(0,R+1)),B=()=>{let P;return T?P=D:O?P=U:N.route.Component?P=M.createElement(N.route.Component,null):N.route.element?P=N.route.element:P=A,M.createElement(Ab,{match:N,routeContext:{outlet:A,matches:H,isDataRoute:a!=null},children:P})};return a&&(N.route.ErrorBoundary||N.route.errorElement||R===0)?M.createElement(Eb,{location:a.location,revalidation:a.revalidation,component:D,error:T,children:B(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:w}):B()},null)}function m0(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tb(o){let n=M.useContext(Vo);return Nn(n,m0(o)),n}function jb(o){let n=M.useContext(Yu);return Nn(n,m0(o)),n}function Rb(o){let n=M.useContext(Da);return Nn(n,m0(o)),n}function p0(o){let n=Rb(o),a=n.matches[n.matches.length-1];return Nn(a.route.id,`${o} can only be used on routes that contain a unique "id"`),a.route.id}function Ib(){return p0("useRouteId")}function Ob(){let o=M.useContext(g0),n=jb("useRouteError"),a=p0("useRouteError");return o!==void 0?o:n.errors?.[a]}function Mb(){let{router:o}=Tb("useNavigate"),n=p0("useNavigate"),a=M.useRef(!1);return Hx(()=>{a.current=!0}),M.useCallback(async(h,f={})=>{la(a.current,Fx),a.current&&(typeof h=="number"?o.navigate(h):await o.navigate(h,{fromRouteId:n,...f}))},[o,n])}var ep={};function Vx(o,n,a){!n&&!ep[o]&&(ep[o]=!0,la(!1,a))}M.memo(kb);function kb({routes:o,future:n,state:a,unstable_onError:c}){return qx(o,void 0,a,c,n)}function Gx({to:o,replace:n,state:a,relative:c}){Nn(Go(),"<Navigate> may be used only in the context of a <Router> component.");let{static:h}=M.useContext(ka);la(!h,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=M.useContext(Da),{pathname:x}=Cr(),v=us(),C=f0(o,h0(f),x,c==="path"),w=JSON.stringify(C);return M.useEffect(()=>{v(JSON.parse(w),{replace:n,state:a,relative:c})},[v,w,c,n,a]),null}function Fn(o){Nn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Db({basename:o="/",children:n=null,location:a,navigationType:c="POP",navigator:h,static:f=!1}){Nn(!Go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=o.replace(/^\/*/,"/"),v=M.useMemo(()=>({basename:x,navigator:h,static:f,future:{}}),[x,h,f]);typeof a=="string"&&(a=Gi(a));let{pathname:C="/",search:w="",hash:A="",state:N=null,key:R="default"}=a,T=M.useMemo(()=>{let O=br(C,x);return O==null?null:{location:{pathname:O,search:w,hash:A,state:N,key:R},navigationType:c}},[x,C,w,A,N,R,c]);return la(T!=null,`<Router basename="${x}"> is not able to match the URL "${C}${w}${A}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:M.createElement(ka.Provider,{value:v},M.createElement(Jl.Provider,{children:n,value:T}))}function Lb({children:o,location:n}){return Cb(qf(o),n)}function qf(o,n=[]){let a=[];return M.Children.forEach(o,(c,h)=>{if(!M.isValidElement(c))return;let f=[...n,h];if(c.type===M.Fragment){a.push.apply(a,qf(c.props.children,f));return}Nn(c.type===Fn,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nn(!c.props.index||!c.props.children,"An index route cannot have child routes.");let x={id:c.props.id||f.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(x.children=qf(c.props.children,f)),a.push(x)}),a}var Mu="get",ku="application/x-www-form-urlencoded";function Wu(o){return o!=null&&typeof o.tagName=="string"}function Bb(o){return Wu(o)&&o.tagName.toLowerCase()==="button"}function Ub(o){return Wu(o)&&o.tagName.toLowerCase()==="form"}function Pb(o){return Wu(o)&&o.tagName.toLowerCase()==="input"}function zb(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function Fb(o,n){return o.button===0&&(!n||n==="_self")&&!zb(o)}var wu=null;function Hb(){if(wu===null)try{new FormData(document.createElement("form"),0),wu=!1}catch{wu=!0}return wu}var qb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nf(o){return o!=null&&!qb.has(o)?(la(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ku}"`),null):o}function Vb(o,n){let a,c,h,f,x;if(Ub(o)){let v=o.getAttribute("action");c=v?br(v,n):null,a=o.getAttribute("method")||Mu,h=nf(o.getAttribute("enctype"))||ku,f=new FormData(o)}else if(Bb(o)||Pb(o)&&(o.type==="submit"||o.type==="image")){let v=o.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=o.getAttribute("formaction")||v.getAttribute("action");if(c=C?br(C,n):null,a=o.getAttribute("formmethod")||v.getAttribute("method")||Mu,h=nf(o.getAttribute("formenctype"))||nf(v.getAttribute("enctype"))||ku,f=new FormData(v,o),!Hb()){let{name:w,type:A,value:N}=o;if(A==="image"){let R=w?`${w}.`:"";f.append(`${R}x`,"0"),f.append(`${R}y`,"0")}else w&&f.append(w,N)}}else{if(Wu(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Mu,c=null,h=ku,x=o}return f&&h==="text/plain"&&(x=f,f=void 0),{action:c,method:a.toLowerCase(),encType:h,formData:f,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function x0(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function Gb(o,n,a){let c=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return c.pathname==="/"?c.pathname=`_root.${a}`:n&&br(c.pathname,n)==="/"?c.pathname=`${n.replace(/\/$/,"")}/_root.${a}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${a}`,c}async function Yb(o,n){if(o.id in n)return n[o.id];try{let a=await import(o.module);return n[o.id]=a,a}catch(a){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xb(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function Wb(o,n,a){let c=await Promise.all(o.map(async h=>{let f=n.routes[h.route.id];if(f){let x=await Yb(f,a);return x.links?x.links():[]}return[]}));return $b(c.flat(1).filter(Xb).filter(h=>h.rel==="stylesheet"||h.rel==="preload").map(h=>h.rel==="stylesheet"?{...h,rel:"prefetch",as:"style"}:{...h,rel:"prefetch"}))}function tp(o,n,a,c,h,f){let x=(C,w)=>a[w]?C.route.id!==a[w].route.id:!0,v=(C,w)=>a[w].pathname!==C.pathname||a[w].route.path?.endsWith("*")&&a[w].params["*"]!==C.params["*"];return f==="assets"?n.filter((C,w)=>x(C,w)||v(C,w)):f==="data"?n.filter((C,w)=>{let A=c.routes[C.route.id];if(!A||!A.hasLoader)return!1;if(x(C,w)||v(C,w))return!0;if(C.route.shouldRevalidate){let N=C.route.shouldRevalidate({currentUrl:new URL(h.pathname+h.search+h.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(o,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function Qb(o,n,{includeHydrateFallback:a}={}){return Kb(o.map(c=>{let h=n.routes[c.route.id];if(!h)return[];let f=[h.module];return h.clientActionModule&&(f=f.concat(h.clientActionModule)),h.clientLoaderModule&&(f=f.concat(h.clientLoaderModule)),a&&h.hydrateFallbackModule&&(f=f.concat(h.hydrateFallbackModule)),h.imports&&(f=f.concat(h.imports)),f}).flat(1))}function Kb(o){return[...new Set(o)]}function Zb(o){let n={},a=Object.keys(o).sort();for(let c of a)n[c]=o[c];return n}function $b(o,n){let a=new Set;return new Set(n),o.reduce((c,h)=>{let f=JSON.stringify(Zb(h));return a.has(f)||(a.add(f),c.push({key:f,link:h})),c},[])}function Yx(){let o=M.useContext(Vo);return x0(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function Jb(){let o=M.useContext(Yu);return x0(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var y0=M.createContext(void 0);y0.displayName="FrameworkContext";function Xx(){let o=M.useContext(y0);return x0(o,"You must render this element inside a <HydratedRouter> element"),o}function ev(o,n){let a=M.useContext(y0),[c,h]=M.useState(!1),[f,x]=M.useState(!1),{onFocus:v,onBlur:C,onMouseEnter:w,onMouseLeave:A,onTouchStart:N}=n,R=M.useRef(null);M.useEffect(()=>{if(o==="render"&&x(!0),o==="viewport"){let D=H=>{H.forEach(B=>{x(B.isIntersecting)})},U=new IntersectionObserver(D,{threshold:.5});return R.current&&U.observe(R.current),()=>{U.disconnect()}}},[o]),M.useEffect(()=>{if(c){let D=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(D)}}},[c]);let T=()=>{h(!0)},O=()=>{h(!1),x(!1)};return a?o!=="intent"?[f,R,{}]:[f,R,{onFocus:Fl(v,T),onBlur:Fl(C,O),onMouseEnter:Fl(w,T),onMouseLeave:Fl(A,O),onTouchStart:Fl(N,T)}]:[!1,R,{}]}function Fl(o,n){return a=>{o&&o(a),a.defaultPrevented||n(a)}}function tv({page:o,...n}){let{router:a}=Yx(),c=M.useMemo(()=>Lx(a.routes,o,a.basename),[a.routes,o,a.basename]);return c?M.createElement(sv,{page:o,matches:c,...n}):null}function nv(o){let{manifest:n,routeModules:a}=Xx(),[c,h]=M.useState([]);return M.useEffect(()=>{let f=!1;return Wb(o,n,a).then(x=>{f||h(x)}),()=>{f=!0}},[o,n,a]),c}function sv({page:o,matches:n,...a}){let c=Cr(),{manifest:h,routeModules:f}=Xx(),{basename:x}=Yx(),{loaderData:v,matches:C}=Jb(),w=M.useMemo(()=>tp(o,n,C,h,c,"data"),[o,n,C,h,c]),A=M.useMemo(()=>tp(o,n,C,h,c,"assets"),[o,n,C,h,c]),N=M.useMemo(()=>{if(o===c.pathname+c.search+c.hash)return[];let O=new Set,D=!1;if(n.forEach(H=>{let B=h.routes[H.route.id];!B||!B.hasLoader||(!w.some(P=>P.route.id===H.route.id)&&H.route.id in v&&f[H.route.id]?.shouldRevalidate||B.hasClientLoader?D=!0:O.add(H.route.id))}),O.size===0)return[];let U=Gb(o,x,"data");return D&&O.size>0&&U.searchParams.set("_routes",n.filter(H=>O.has(H.route.id)).map(H=>H.route.id).join(",")),[U.pathname+U.search]},[x,v,c,h,w,n,o,f]),R=M.useMemo(()=>Qb(A,h),[A,h]),T=nv(A);return M.createElement(M.Fragment,null,N.map(O=>M.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...a})),R.map(O=>M.createElement("link",{key:O,rel:"modulepreload",href:O,...a})),T.map(({key:O,link:D})=>M.createElement("link",{key:O,nonce:a.nonce,...D})))}function av(...o){return n=>{o.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var Wx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wx&&(window.__reactRouterVersion="7.9.6")}catch{}function rv({basename:o,children:n,window:a}){let c=M.useRef();c.current==null&&(c.current=Yw({window:a,v5Compat:!0}));let h=c.current,[f,x]=M.useState({action:h.action,location:h.location}),v=M.useCallback(C=>{M.startTransition(()=>x(C))},[x]);return M.useLayoutEffect(()=>h.listen(v),[h,v]),M.createElement(Db,{basename:o,children:n,location:f.location,navigationType:f.action,navigator:h})}var Qx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yo=M.forwardRef(function({onClick:n,discover:a="render",prefetch:c="none",relative:h,reloadDocument:f,replace:x,state:v,target:C,to:w,preventScrollReset:A,viewTransition:N,...R},T){let{basename:O}=M.useContext(ka),D=typeof w=="string"&&Qx.test(w),U,H=!1;if(typeof w=="string"&&D&&(U=w,Wx))try{let q=new URL(window.location.href),xe=w.startsWith("//")?new URL(q.protocol+w):new URL(w),we=br(xe.pathname,O);xe.origin===q.origin&&we!=null?w=we+xe.search+xe.hash:H=!0}catch{la(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let B=bb(w,{relative:h}),[P,Q,Z]=ev(c,R),Y=cv(w,{replace:x,state:v,target:C,preventScrollReset:A,relative:h,viewTransition:N});function X(q){n&&n(q),q.defaultPrevented||Y(q)}let ee=M.createElement("a",{...R,...Z,href:U||B,onClick:H||f?n:X,ref:av(T,Q),target:C,"data-discover":!D&&a==="render"?"true":void 0});return P&&!D?M.createElement(M.Fragment,null,ee,M.createElement(tv,{page:B})):ee});Yo.displayName="Link";var iv=M.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:c="",end:h=!1,style:f,to:x,viewTransition:v,children:C,...w},A){let N=ec(x,{relative:w.relative}),R=Cr(),T=M.useContext(Yu),{navigator:O,basename:D}=M.useContext(ka),U=T!=null&&gv(N)&&v===!0,H=O.encodeLocation?O.encodeLocation(N).pathname:N.pathname,B=R.pathname,P=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;a||(B=B.toLowerCase(),P=P?P.toLowerCase():null,H=H.toLowerCase()),P&&D&&(P=br(P,D)||P);const Q=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let Z=B===H||!h&&B.startsWith(H)&&B.charAt(Q)==="/",Y=P!=null&&(P===H||!h&&P.startsWith(H)&&P.charAt(H.length)==="/"),X={isActive:Z,isPending:Y,isTransitioning:U},ee=Z?n:void 0,q;typeof c=="function"?q=c(X):q=[c,Z?"active":null,Y?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let xe=typeof f=="function"?f(X):f;return M.createElement(Yo,{...w,"aria-current":ee,className:q,ref:A,style:xe,to:x,viewTransition:v},typeof C=="function"?C(X):C)});iv.displayName="NavLink";var ov=M.forwardRef(({discover:o="render",fetcherKey:n,navigate:a,reloadDocument:c,replace:h,state:f,method:x=Mu,action:v,onSubmit:C,relative:w,preventScrollReset:A,viewTransition:N,...R},T)=>{let O=hv(),D=fv(v,{relative:w}),U=x.toLowerCase()==="get"?"get":"post",H=typeof v=="string"&&Qx.test(v),B=P=>{if(C&&C(P),P.defaultPrevented)return;P.preventDefault();let Q=P.nativeEvent.submitter,Z=Q?.getAttribute("formmethod")||x;O(Q||P.currentTarget,{fetcherKey:n,method:Z,navigate:a,replace:h,state:f,relative:w,preventScrollReset:A,viewTransition:N})};return M.createElement("form",{ref:T,method:U,action:D,onSubmit:c?C:B,...R,"data-discover":!H&&o==="render"?"true":void 0})});ov.displayName="Form";function lv(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kx(o){let n=M.useContext(Vo);return Nn(n,lv(o)),n}function cv(o,{target:n,replace:a,state:c,preventScrollReset:h,relative:f,viewTransition:x}={}){let v=us(),C=Cr(),w=ec(o,{relative:f});return M.useCallback(A=>{if(Fb(A,n)){A.preventDefault();let N=a!==void 0?a:Wl(C)===Wl(w);v(o,{replace:N,state:c,preventScrollReset:h,relative:f,viewTransition:x})}},[C,v,w,a,c,n,o,h,f,x])}var uv=0,dv=()=>`__${String(++uv)}__`;function hv(){let{router:o}=Kx("useSubmit"),{basename:n}=M.useContext(ka),a=Ib();return M.useCallback(async(c,h={})=>{let{action:f,method:x,encType:v,formData:C,body:w}=Vb(c,n);if(h.navigate===!1){let A=h.fetcherKey||dv();await o.fetch(A,a,h.action||f,{preventScrollReset:h.preventScrollReset,formData:C,body:w,formMethod:h.method||x,formEncType:h.encType||v,flushSync:h.flushSync})}else await o.navigate(h.action||f,{preventScrollReset:h.preventScrollReset,formData:C,body:w,formMethod:h.method||x,formEncType:h.encType||v,replace:h.replace,state:h.state,fromRouteId:a,flushSync:h.flushSync,viewTransition:h.viewTransition})},[o,n,a])}function fv(o,{relative:n}={}){let{basename:a}=M.useContext(ka),c=M.useContext(Da);Nn(c,"useFormAction must be used inside a RouteContext");let[h]=c.matches.slice(-1),f={...ec(o||".",{relative:n})},x=Cr();if(o==null){f.search=x.search;let v=new URLSearchParams(f.search),C=v.getAll("index");if(C.some(A=>A==="")){v.delete("index"),C.filter(N=>N).forEach(N=>v.append("index",N));let A=v.toString();f.search=A?`?${A}`:""}}return(!o||o===".")&&h.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(f.pathname=f.pathname==="/"?a:yr([a,f.pathname])),Wl(f)}function gv(o,{relative:n}={}){let a=M.useContext(zx);Nn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=Kx("useViewTransitionState"),h=ec(o,{relative:n});if(!a.isTransitioning)return!1;let f=br(a.currentLocation.pathname,c)||a.currentLocation.pathname,x=br(a.nextLocation.pathname,c)||a.nextLocation.pathname;return Du(h.pathname,x)!=null||Du(h.pathname,f)!=null}var Vf=function(o,n){return Vf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(a[h]=c[h])},Vf(o,n)};function Zx(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Vf(o,n);function a(){this.constructor=o}o.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}var Lu=function(){return Lu=Object.assign||function(n){for(var a,c=1,h=arguments.length;c<h;c++){a=arguments[c];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(n[f]=a[f])}return n},Lu.apply(this,arguments)};function Xo(o,n){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&n.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,c=Object.getOwnPropertySymbols(o);h<c.length;h++)n.indexOf(c[h])<0&&Object.prototype.propertyIsEnumerable.call(o,c[h])&&(a[c[h]]=o[c[h]]);return a}function $x(o,n,a,c){var h=arguments.length,f=h<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,a):c,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(o,n,a,c);else for(var v=o.length-1;v>=0;v--)(x=o[v])&&(f=(h<3?x(f):h>3?x(n,a,f):x(n,a))||f);return h>3&&f&&Object.defineProperty(n,a,f),f}function Jx(o,n){return function(a,c){n(a,c,o)}}function e2(o,n,a,c,h,f){function x(H){if(H!==void 0&&typeof H!="function")throw new TypeError("Function expected");return H}for(var v=c.kind,C=v==="getter"?"get":v==="setter"?"set":"value",w=!n&&o?c.static?o:o.prototype:null,A=n||(w?Object.getOwnPropertyDescriptor(w,c.name):{}),N,R=!1,T=a.length-1;T>=0;T--){var O={};for(var D in c)O[D]=D==="access"?{}:c[D];for(var D in c.access)O.access[D]=c.access[D];O.addInitializer=function(H){if(R)throw new TypeError("Cannot add initializers after decoration has completed");f.push(x(H||null))};var U=(0,a[T])(v==="accessor"?{get:A.get,set:A.set}:A[C],O);if(v==="accessor"){if(U===void 0)continue;if(U===null||typeof U!="object")throw new TypeError("Object expected");(N=x(U.get))&&(A.get=N),(N=x(U.set))&&(A.set=N),(N=x(U.init))&&h.unshift(N)}else(N=x(U))&&(v==="field"?h.unshift(N):A[C]=N)}w&&Object.defineProperty(w,c.name,A),R=!0}function t2(o,n,a){for(var c=arguments.length>2,h=0;h<n.length;h++)a=c?n[h].call(o,a):n[h].call(o);return c?a:void 0}function n2(o){return typeof o=="symbol"?o:"".concat(o)}function s2(o,n,a){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:a?"".concat(a," ",n):n})}function a2(o,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,n)}function tt(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})}function r2(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return x.next=v(0),x.throw=v(1),x.return=v(2),typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var Qu=Object.create?(function(o,n,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(n,a);(!h||("get"in h?!n.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(o,c,h)}):(function(o,n,a,c){c===void 0&&(c=a),o[c]=n[a]});function i2(o,n){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&Qu(n,o,a)}function Bu(o){var n=typeof Symbol=="function"&&Symbol.iterator,a=n&&o[n],c=0;if(a)return a.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&c>=o.length&&(o=void 0),{value:o&&o[c++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function w0(o,n){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var c=a.call(o),h,f=[],x;try{for(;(n===void 0||n-- >0)&&!(h=c.next()).done;)f.push(h.value)}catch(v){x={error:v}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(x)throw x.error}}return f}function o2(){for(var o=[],n=0;n<arguments.length;n++)o=o.concat(w0(arguments[n]));return o}function l2(){for(var o=0,n=0,a=arguments.length;n<a;n++)o+=arguments[n].length;for(var c=Array(o),h=0,n=0;n<a;n++)for(var f=arguments[n],x=0,v=f.length;x<v;x++,h++)c[h]=f[x];return c}function c2(o,n,a){if(a||arguments.length===2)for(var c=0,h=n.length,f;c<h;c++)(f||!(c in n))&&(f||(f=Array.prototype.slice.call(n,0,c)),f[c]=n[c]);return o.concat(f||Array.prototype.slice.call(n))}function Ho(o){return this instanceof Ho?(this.v=o,this):new Ho(o)}function u2(o,n,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a.apply(o,n||[]),h,f=[];return h=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),v("next"),v("throw"),v("return",x),h[Symbol.asyncIterator]=function(){return this},h;function x(T){return function(O){return Promise.resolve(O).then(T,N)}}function v(T,O){c[T]&&(h[T]=function(D){return new Promise(function(U,H){f.push([T,D,U,H])>1||C(T,D)})},O&&(h[T]=O(h[T])))}function C(T,O){try{w(c[T](O))}catch(D){R(f[0][3],D)}}function w(T){T.value instanceof Ho?Promise.resolve(T.value.v).then(A,N):R(f[0][2],T)}function A(T){C("next",T)}function N(T){C("throw",T)}function R(T,O){T(O),f.shift(),f.length&&C(f[0][0],f[0][1])}}function d2(o){var n,a;return n={},c("next"),c("throw",function(h){throw h}),c("return"),n[Symbol.iterator]=function(){return this},n;function c(h,f){n[h]=o[h]?function(x){return(a=!a)?{value:Ho(o[h](x)),done:!1}:f?f(x):x}:f}}function h2(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],a;return n?n.call(o):(o=typeof Bu=="function"?Bu(o):o[Symbol.iterator](),a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a);function c(f){a[f]=o[f]&&function(x){return new Promise(function(v,C){x=o[f](x),h(v,C,x.done,x.value)})}}function h(f,x,v,C){Promise.resolve(C).then(function(w){f({value:w,done:v})},x)}}function f2(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o}var mv=Object.create?(function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}):function(o,n){o.default=n},Gf=function(o){return Gf=Object.getOwnPropertyNames||function(n){var a=[];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(a[a.length]=c);return a},Gf(o)};function g2(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var a=Gf(o),c=0;c<a.length;c++)a[c]!=="default"&&Qu(n,o,a[c]);return mv(n,o),n}function m2(o){return o&&o.__esModule?o:{default:o}}function p2(o,n,a,c){if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?o!==n||!c:!n.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?c:a==="a"?c.call(o):c?c.value:n.get(o)}function x2(o,n,a,c,h){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?o!==n||!h:!n.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?h.call(o,a):h?h.value=a:n.set(o,a),a}function y2(o,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?n===o:o.has(n)}function w2(o,n,a){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var c,h;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=n[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=n[Symbol.dispose],a&&(h=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");h&&(c=function(){try{h.call(this)}catch(f){return Promise.reject(f)}}),o.stack.push({value:n,dispose:c,async:a})}else a&&o.stack.push({async:!0});return n}var pv=typeof SuppressedError=="function"?SuppressedError:function(o,n,a){var c=new Error(a);return c.name="SuppressedError",c.error=o,c.suppressed=n,c};function b2(o){function n(f){o.error=o.hasError?new pv(f,o.error,"An error was suppressed during disposal."):f,o.hasError=!0}var a,c=0;function h(){for(;a=o.stack.pop();)try{if(!a.async&&c===1)return c=0,o.stack.push(a),Promise.resolve().then(h);if(a.dispose){var f=a.dispose.call(a.value);if(a.async)return c|=2,Promise.resolve(f).then(h,function(x){return n(x),h()})}else c|=1}catch(x){n(x)}if(c===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return h()}function v2(o,n){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,c,h,f,x){return c?n?".jsx":".js":h&&(!f||!x)?a:h+f+"."+x.toLowerCase()+"js"}):o}const xv={__extends:Zx,__assign:Lu,__rest:Xo,__decorate:$x,__param:Jx,__esDecorate:e2,__runInitializers:t2,__propKey:n2,__setFunctionName:s2,__metadata:a2,__awaiter:tt,__generator:r2,__createBinding:Qu,__exportStar:i2,__values:Bu,__read:w0,__spread:o2,__spreadArrays:l2,__spreadArray:c2,__await:Ho,__asyncGenerator:u2,__asyncDelegator:d2,__asyncValues:h2,__makeTemplateObject:f2,__importStar:g2,__importDefault:m2,__classPrivateFieldGet:p2,__classPrivateFieldSet:x2,__classPrivateFieldIn:y2,__addDisposableResource:w2,__disposeResources:b2,__rewriteRelativeImportExtension:v2},yv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:w2,get __assign(){return Lu},__asyncDelegator:d2,__asyncGenerator:u2,__asyncValues:h2,__await:Ho,__awaiter:tt,__classPrivateFieldGet:p2,__classPrivateFieldIn:y2,__classPrivateFieldSet:x2,__createBinding:Qu,__decorate:$x,__disposeResources:b2,__esDecorate:e2,__exportStar:i2,__extends:Zx,__generator:r2,__importDefault:m2,__importStar:g2,__makeTemplateObject:f2,__metadata:a2,__param:Jx,__propKey:n2,__read:w0,__rest:Xo,__rewriteRelativeImportExtension:v2,__runInitializers:t2,__setFunctionName:s2,__spread:o2,__spreadArray:c2,__spreadArrays:l2,__values:Bu,default:xv},Symbol.toStringTag,{value:"Module"})),wv=o=>o?(...n)=>o(...n):(...n)=>fetch(...n);class b0 extends Error{constructor(n,a="FunctionsError",c){super(n),this.name=a,this.context=c}}class bv extends b0{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class np extends b0{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class sp extends b0{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Yf;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(Yf||(Yf={}));class vv{constructor(n,{headers:a={},customFetch:c,region:h=Yf.Any}={}){this.url=n,this.headers=a,this.region=h,this.fetch=wv(c)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return tt(this,arguments,void 0,function*(a,c={}){var h;let f,x;try{const{headers:v,method:C,body:w,signal:A,timeout:N}=c;let R={},{region:T}=c;T||(T=this.region);const O=new URL(`${this.url}/${a}`);T&&T!=="any"&&(R["x-region"]=T,O.searchParams.set("forceFunctionRegion",T));let D;w&&(v&&!Object.prototype.hasOwnProperty.call(v,"Content-Type")||!v)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(R["Content-Type"]="application/octet-stream",D=w):typeof w=="string"?(R["Content-Type"]="text/plain",D=w):typeof FormData<"u"&&w instanceof FormData?D=w:(R["Content-Type"]="application/json",D=JSON.stringify(w)):D=w;let U=A;N&&(x=new AbortController,f=setTimeout(()=>x.abort(),N),A?(U=x.signal,A.addEventListener("abort",()=>x.abort())):U=x.signal);const H=yield this.fetch(O.toString(),{method:C||"POST",headers:Object.assign(Object.assign(Object.assign({},R),this.headers),v),body:D,signal:U}).catch(Z=>{throw new bv(Z)}),B=H.headers.get("x-relay-error");if(B&&B==="true")throw new np(H);if(!H.ok)throw new sp(H);let P=((h=H.headers.get("Content-Type"))!==null&&h!==void 0?h:"text/plain").split(";")[0].trim(),Q;return P==="application/json"?Q=yield H.json():P==="application/octet-stream"||P==="application/pdf"?Q=yield H.blob():P==="text/event-stream"?Q=H:P==="multipart/form-data"?Q=yield H.formData():Q=yield H.text(),{data:Q,error:null,response:H}}catch(v){return{data:null,error:v,response:v instanceof sp||v instanceof np?v.context:void 0}}finally{f&&clearTimeout(f)}})}}var _s={};const Wo=Dw(yv);var bu={},vu={},Cu={},_u={},Su={},Eu={},ap;function C2(){if(ap)return Eu;ap=1,Object.defineProperty(Eu,"__esModule",{value:!0});class o extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return Eu.default=o,Eu}var rp;function _2(){if(rp)return Su;rp=1,Object.defineProperty(Su,"__esModule",{value:!0});const n=Wo.__importDefault(C2());class a{constructor(h){var f,x;this.shouldThrowOnError=!1,this.method=h.method,this.url=h.url,this.headers=new Headers(h.headers),this.schema=h.schema,this.body=h.body,this.shouldThrowOnError=(f=h.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=h.signal,this.isMaybeSingle=(x=h.isMaybeSingle)!==null&&x!==void 0?x:!1,h.fetch?this.fetch=h.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(h,f){return this.headers=new Headers(this.headers),this.headers.set(h,f),this}then(h,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const x=this.fetch;let v=x(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async C=>{var w,A,N,R;let T=null,O=null,D=null,U=C.status,H=C.statusText;if(C.ok){if(this.method!=="HEAD"){const Z=await C.text();Z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?O=Z:O=JSON.parse(Z))}const P=(A=this.headers.get("Prefer"))===null||A===void 0?void 0:A.match(/count=(exact|planned|estimated)/),Q=(N=C.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");P&&Q&&Q.length>1&&(D=parseInt(Q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(T={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,D=null,U=406,H="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const P=await C.text();try{T=JSON.parse(P),Array.isArray(T)&&C.status===404&&(O=[],T=null,U=200,H="OK")}catch{C.status===404&&P===""?(U=204,H="No Content"):T={message:P}}if(T&&this.isMaybeSingle&&(!((R=T?.details)===null||R===void 0)&&R.includes("0 rows"))&&(T=null,U=200,H="OK"),T&&this.shouldThrowOnError)throw new n.default(T)}return{error:T,data:O,count:D,status:U,statusText:H}});return this.shouldThrowOnError||(v=v.catch(C=>{var w,A,N,R,T,O;let D="";const U=C?.cause;if(U){const H=(w=U?.message)!==null&&w!==void 0?w:"",B=(A=U?.code)!==null&&A!==void 0?A:"";D=`${(N=C?.name)!==null&&N!==void 0?N:"FetchError"}: ${C?.message}`,D+=`

Caused by: ${(R=U?.name)!==null&&R!==void 0?R:"Error"}: ${H}`,B&&(D+=` (${B})`),U?.stack&&(D+=`
${U.stack}`)}else D=(T=C?.stack)!==null&&T!==void 0?T:"";return{error:{message:`${(O=C?.name)!==null&&O!==void 0?O:"FetchError"}: ${C?.message}`,details:D,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),v.then(h,f)}returns(){return this}overrideTypes(){return this}}return Su.default=a,Su}var ip;function S2(){if(ip)return _u;ip=1,Object.defineProperty(_u,"__esModule",{value:!0});const n=Wo.__importDefault(_2());class a extends n.default{select(h){let f=!1;const x=(h??"*").split("").map(v=>/\s/.test(v)&&!f?"":(v==='"'&&(f=!f),v)).join("");return this.url.searchParams.set("select",x),this.headers.append("Prefer","return=representation"),this}order(h,{ascending:f=!0,nullsFirst:x,foreignTable:v,referencedTable:C=v}={}){const w=C?`${C}.order`:"order",A=this.url.searchParams.get(w);return this.url.searchParams.set(w,`${A?`${A},`:""}${h}.${f?"asc":"desc"}${x===void 0?"":x?".nullsfirst":".nullslast"}`),this}limit(h,{foreignTable:f,referencedTable:x=f}={}){const v=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(v,`${h}`),this}range(h,f,{foreignTable:x,referencedTable:v=x}={}){const C=typeof v>"u"?"offset":`${v}.offset`,w=typeof v>"u"?"limit":`${v}.limit`;return this.url.searchParams.set(C,`${h}`),this.url.searchParams.set(w,`${f-h+1}`),this}abortSignal(h){return this.signal=h,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:h=!1,verbose:f=!1,settings:x=!1,buffers:v=!1,wal:C=!1,format:w="text"}={}){var A;const N=[h?"analyze":null,f?"verbose":null,x?"settings":null,v?"buffers":null,C?"wal":null].filter(Boolean).join("|"),R=(A=this.headers.get("Accept"))!==null&&A!==void 0?A:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${w}; for="${R}"; options=${N};`),w==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(h){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${h}`),this}}return _u.default=a,_u}var op;function v0(){if(op)return Cu;op=1,Object.defineProperty(Cu,"__esModule",{value:!0});const n=Wo.__importDefault(S2()),a=new RegExp("[,()]");class c extends n.default{eq(f,x){return this.url.searchParams.append(f,`eq.${x}`),this}neq(f,x){return this.url.searchParams.append(f,`neq.${x}`),this}gt(f,x){return this.url.searchParams.append(f,`gt.${x}`),this}gte(f,x){return this.url.searchParams.append(f,`gte.${x}`),this}lt(f,x){return this.url.searchParams.append(f,`lt.${x}`),this}lte(f,x){return this.url.searchParams.append(f,`lte.${x}`),this}like(f,x){return this.url.searchParams.append(f,`like.${x}`),this}likeAllOf(f,x){return this.url.searchParams.append(f,`like(all).{${x.join(",")}}`),this}likeAnyOf(f,x){return this.url.searchParams.append(f,`like(any).{${x.join(",")}}`),this}ilike(f,x){return this.url.searchParams.append(f,`ilike.${x}`),this}ilikeAllOf(f,x){return this.url.searchParams.append(f,`ilike(all).{${x.join(",")}}`),this}ilikeAnyOf(f,x){return this.url.searchParams.append(f,`ilike(any).{${x.join(",")}}`),this}is(f,x){return this.url.searchParams.append(f,`is.${x}`),this}in(f,x){const v=Array.from(new Set(x)).map(C=>typeof C=="string"&&a.test(C)?`"${C}"`:`${C}`).join(",");return this.url.searchParams.append(f,`in.(${v})`),this}contains(f,x){return typeof x=="string"?this.url.searchParams.append(f,`cs.${x}`):Array.isArray(x)?this.url.searchParams.append(f,`cs.{${x.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(x)}`),this}containedBy(f,x){return typeof x=="string"?this.url.searchParams.append(f,`cd.${x}`):Array.isArray(x)?this.url.searchParams.append(f,`cd.{${x.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(x)}`),this}rangeGt(f,x){return this.url.searchParams.append(f,`sr.${x}`),this}rangeGte(f,x){return this.url.searchParams.append(f,`nxl.${x}`),this}rangeLt(f,x){return this.url.searchParams.append(f,`sl.${x}`),this}rangeLte(f,x){return this.url.searchParams.append(f,`nxr.${x}`),this}rangeAdjacent(f,x){return this.url.searchParams.append(f,`adj.${x}`),this}overlaps(f,x){return typeof x=="string"?this.url.searchParams.append(f,`ov.${x}`):this.url.searchParams.append(f,`ov.{${x.join(",")}}`),this}textSearch(f,x,{config:v,type:C}={}){let w="";C==="plain"?w="pl":C==="phrase"?w="ph":C==="websearch"&&(w="w");const A=v===void 0?"":`(${v})`;return this.url.searchParams.append(f,`${w}fts${A}.${x}`),this}match(f){return Object.entries(f).forEach(([x,v])=>{this.url.searchParams.append(x,`eq.${v}`)}),this}not(f,x,v){return this.url.searchParams.append(f,`not.${x}.${v}`),this}or(f,{foreignTable:x,referencedTable:v=x}={}){const C=v?`${v}.or`:"or";return this.url.searchParams.append(C,`(${f})`),this}filter(f,x,v){return this.url.searchParams.append(f,`${x}.${v}`),this}}return Cu.default=c,Cu}var lp;function E2(){if(lp)return vu;lp=1,Object.defineProperty(vu,"__esModule",{value:!0});const n=Wo.__importDefault(v0());class a{constructor(h,{headers:f={},schema:x,fetch:v}){this.url=h,this.headers=new Headers(f),this.schema=x,this.fetch=v}select(h,f){const{head:x=!1,count:v}=f??{},C=x?"HEAD":"GET";let w=!1;const A=(h??"*").split("").map(N=>/\s/.test(N)&&!w?"":(N==='"'&&(w=!w),N)).join("");return this.url.searchParams.set("select",A),v&&this.headers.append("Prefer",`count=${v}`),new n.default({method:C,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(h,{count:f,defaultToNull:x=!0}={}){var v;const C="POST";if(f&&this.headers.append("Prefer",`count=${f}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(h)){const w=h.reduce((A,N)=>A.concat(Object.keys(N)),[]);if(w.length>0){const A=[...new Set(w)].map(N=>`"${N}"`);this.url.searchParams.set("columns",A.join(","))}}return new n.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:h,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}upsert(h,{onConflict:f,ignoreDuplicates:x=!1,count:v,defaultToNull:C=!0}={}){var w;const A="POST";if(this.headers.append("Prefer",`resolution=${x?"ignore":"merge"}-duplicates`),f!==void 0&&this.url.searchParams.set("on_conflict",f),v&&this.headers.append("Prefer",`count=${v}`),C||this.headers.append("Prefer","missing=default"),Array.isArray(h)){const N=h.reduce((R,T)=>R.concat(Object.keys(T)),[]);if(N.length>0){const R=[...new Set(N)].map(T=>`"${T}"`);this.url.searchParams.set("columns",R.join(","))}}return new n.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:h,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}update(h,{count:f}={}){var x;const v="PATCH";return f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:h,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}delete({count:h}={}){var f;const x="DELETE";return h&&this.headers.append("Prefer",`count=${h}`),new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return vu.default=a,vu}var cp;function Cv(){if(cp)return bu;cp=1,Object.defineProperty(bu,"__esModule",{value:!0});const o=Wo,n=o.__importDefault(E2()),a=o.__importDefault(v0());class c{constructor(f,{headers:x={},schema:v,fetch:C}={}){this.url=f,this.headers=new Headers(x),this.schemaName=v,this.fetch=C}from(f){const x=new URL(`${this.url}/${f}`);return new n.default(x,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new c(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,x={},{head:v=!1,get:C=!1,count:w}={}){var A;let N;const R=new URL(`${this.url}/rpc/${f}`);let T;v||C?(N=v?"HEAD":"GET",Object.entries(x).filter(([D,U])=>U!==void 0).map(([D,U])=>[D,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([D,U])=>{R.searchParams.append(D,U)})):(N="POST",T=x);const O=new Headers(this.headers);return w&&O.set("Prefer",`count=${w}`),new a.default({method:N,url:R,headers:O,schema:this.schemaName,body:T,fetch:(A=this.fetch)!==null&&A!==void 0?A:fetch})}}return bu.default=c,bu}var up;function _v(){if(up)return _s;up=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.PostgrestError=_s.PostgrestBuilder=_s.PostgrestTransformBuilder=_s.PostgrestFilterBuilder=_s.PostgrestQueryBuilder=_s.PostgrestClient=void 0;const o=Wo,n=o.__importDefault(Cv());_s.PostgrestClient=n.default;const a=o.__importDefault(E2());_s.PostgrestQueryBuilder=a.default;const c=o.__importDefault(v0());_s.PostgrestFilterBuilder=c.default;const h=o.__importDefault(S2());_s.PostgrestTransformBuilder=h.default;const f=o.__importDefault(_2());_s.PostgrestBuilder=f.default;const x=o.__importDefault(C2());return _s.PostgrestError=x.default,_s.default={PostgrestClient:n.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:c.default,PostgrestTransformBuilder:h.default,PostgrestBuilder:f.default,PostgrestError:x.default},_s}var A2=_v();const N2=Gu(A2),Sv=kx({__proto__:null,default:N2},[A2]),{PostgrestClient:Ev,PostgrestQueryBuilder:WA,PostgrestFilterBuilder:QA,PostgrestTransformBuilder:KA,PostgrestBuilder:ZA,PostgrestError:$A}=N2||Sv;class Av{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const a=process.versions;if(a&&a.node){const c=a.node,h=parseInt(c.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const c=this.getWebSocketConstructor();return new c(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Nv="2.83.0",Tv=`realtime-js/${Nv}`,T2="1.0.0",jv="2.0.0",dp=T2,Xf=1e4,Rv=1e3,Iv=100;var Pi;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(Pi||(Pi={}));var os;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(os||(os={}));var ba;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(ba||(ba={}));var Wf;(function(o){o.websocket="websocket"})(Wf||(Wf={}));var zi;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(zi||(zi={}));class Ov{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(n,a){if(this._isArrayBuffer(n.payload))return a(this._binaryEncodePush(n));if(n.event===this.BROADCAST&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let c=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(c))}_binaryEncodePush(n){var a,c;const{event:h,topic:f,payload:x}=n,v=(a=n.ref)!==null&&a!==void 0?a:"",C=(c=n.join_ref)!==null&&c!==void 0?c:"",w=this.META_LENGTH+C.length+v.length+f.length+h.length,A=new ArrayBuffer(this.HEADER_LENGTH+w);let N=new DataView(A),R=0;N.setUint8(R++,this.KINDS.push),N.setUint8(R++,C.length),N.setUint8(R++,v.length),N.setUint8(R++,f.length),N.setUint8(R++,h.length),Array.from(C,O=>N.setUint8(R++,O.charCodeAt(0))),Array.from(v,O=>N.setUint8(R++,O.charCodeAt(0))),Array.from(f,O=>N.setUint8(R++,O.charCodeAt(0))),Array.from(h,O=>N.setUint8(R++,O.charCodeAt(0)));var T=new Uint8Array(A.byteLength+x.byteLength);return T.set(new Uint8Array(A),0),T.set(new Uint8Array(x),A.byteLength),T.buffer}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,c,h,f;const x=n.topic,v=(a=n.ref)!==null&&a!==void 0?a:"",C=(c=n.join_ref)!==null&&c!==void 0?c:"",w=n.payload.event,A=(f=(h=n.payload)===null||h===void 0?void 0:h.payload)!==null&&f!==void 0?f:new ArrayBuffer(0),N=this.USER_BROADCAST_PUSH_META_LENGTH+C.length+v.length+x.length+w.length,R=new ArrayBuffer(this.HEADER_LENGTH+N);let T=new DataView(R),O=0;T.setUint8(O++,this.KINDS.userBroadcastPush),T.setUint8(O++,C.length),T.setUint8(O++,v.length),T.setUint8(O++,x.length),T.setUint8(O++,w.length),T.setUint8(O++,this.BINARY_ENCODING),Array.from(C,U=>T.setUint8(O++,U.charCodeAt(0))),Array.from(v,U=>T.setUint8(O++,U.charCodeAt(0))),Array.from(x,U=>T.setUint8(O++,U.charCodeAt(0))),Array.from(w,U=>T.setUint8(O++,U.charCodeAt(0)));var D=new Uint8Array(R.byteLength+A.byteLength);return D.set(new Uint8Array(R),0),D.set(new Uint8Array(A),R.byteLength),D.buffer}_encodeJsonUserBroadcastPush(n){var a,c,h,f;const x=n.topic,v=(a=n.ref)!==null&&a!==void 0?a:"",C=(c=n.join_ref)!==null&&c!==void 0?c:"",w=n.payload.event,A=(f=(h=n.payload)===null||h===void 0?void 0:h.payload)!==null&&f!==void 0?f:{},R=new TextEncoder().encode(JSON.stringify(A)).buffer,T=this.USER_BROADCAST_PUSH_META_LENGTH+C.length+v.length+x.length+w.length,O=new ArrayBuffer(this.HEADER_LENGTH+T);let D=new DataView(O),U=0;D.setUint8(U++,this.KINDS.userBroadcastPush),D.setUint8(U++,C.length),D.setUint8(U++,v.length),D.setUint8(U++,x.length),D.setUint8(U++,w.length),D.setUint8(U++,this.JSON_ENCODING),Array.from(C,B=>D.setUint8(U++,B.charCodeAt(0))),Array.from(v,B=>D.setUint8(U++,B.charCodeAt(0))),Array.from(x,B=>D.setUint8(U++,B.charCodeAt(0))),Array.from(w,B=>D.setUint8(U++,B.charCodeAt(0)));var H=new Uint8Array(O.byteLength+R.byteLength);return H.set(new Uint8Array(O),0),H.set(new Uint8Array(R),O.byteLength),H.buffer}decode(n,a){if(this._isArrayBuffer(n)){let c=this._binaryDecode(n);return a(c)}if(typeof n=="string"){const c=JSON.parse(n),[h,f,x,v,C]=c;return a({join_ref:h,ref:f,topic:x,event:v,payload:C})}return a({})}_binaryDecode(n){const a=new DataView(n),c=a.getUint8(0),h=new TextDecoder;switch(c){case this.KINDS.push:return this._decodePush(n,a,h);case this.KINDS.reply:return this._decodeReply(n,a,h);case this.KINDS.broadcast:return this._decodeBroadcast(n,a,h);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,a,h)}}_decodePush(n,a,c){const h=a.getUint8(1),f=a.getUint8(2),x=a.getUint8(3);let v=this.HEADER_LENGTH+this.META_LENGTH-1;const C=c.decode(n.slice(v,v+h));v=v+h;const w=c.decode(n.slice(v,v+f));v=v+f;const A=c.decode(n.slice(v,v+x));v=v+x;const N=JSON.parse(c.decode(n.slice(v,n.byteLength)));return{join_ref:C,ref:null,topic:w,event:A,payload:N}}_decodeReply(n,a,c){const h=a.getUint8(1),f=a.getUint8(2),x=a.getUint8(3),v=a.getUint8(4);let C=this.HEADER_LENGTH+this.META_LENGTH;const w=c.decode(n.slice(C,C+h));C=C+h;const A=c.decode(n.slice(C,C+f));C=C+f;const N=c.decode(n.slice(C,C+x));C=C+x;const R=c.decode(n.slice(C,C+v));C=C+v;const T=JSON.parse(c.decode(n.slice(C,n.byteLength))),O={status:R,response:T};return{join_ref:w,ref:A,topic:N,event:ba.reply,payload:O}}_decodeBroadcast(n,a,c){const h=a.getUint8(1),f=a.getUint8(2);let x=this.HEADER_LENGTH+2;const v=c.decode(n.slice(x,x+h));x=x+h;const C=c.decode(n.slice(x,x+f));x=x+f;const w=JSON.parse(c.decode(n.slice(x,n.byteLength)));return{join_ref:null,ref:null,topic:v,event:C,payload:w}}_decodeUserBroadcast(n,a,c){const h=a.getUint8(1),f=a.getUint8(2),x=a.getUint8(3),v=a.getUint8(4);let C=this.HEADER_LENGTH+4;const w=c.decode(n.slice(C,C+h));C=C+h;const A=c.decode(n.slice(C,C+f));C=C+f;const N=c.decode(n.slice(C,C+x));C=C+x;const R=n.slice(C,n.byteLength),T=v===this.JSON_ENCODING?JSON.parse(c.decode(R)):R,O={type:this.BROADCAST,event:A,payload:T};return x>0&&(O.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST,payload:O}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n?.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}}class j2{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var wn;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(wn||(wn={}));const hp=(o,n,a={})=>{var c;const h=(c=a.skipTypes)!==null&&c!==void 0?c:[];return n?Object.keys(n).reduce((f,x)=>(f[x]=Mv(x,o,n,h),f),{}):{}},Mv=(o,n,a,c)=>{const h=n.find(v=>v.name===o),f=h?.type,x=a[o];return f&&!c.includes(f)?R2(f,x):Qf(x)},R2=(o,n)=>{if(o.charAt(0)==="_"){const a=o.slice(1,o.length);return Bv(n,a)}switch(o){case wn.bool:return kv(n);case wn.float4:case wn.float8:case wn.int2:case wn.int4:case wn.int8:case wn.numeric:case wn.oid:return Dv(n);case wn.json:case wn.jsonb:return Lv(n);case wn.timestamp:return Uv(n);case wn.abstime:case wn.date:case wn.daterange:case wn.int4range:case wn.int8range:case wn.money:case wn.reltime:case wn.text:case wn.time:case wn.timestamptz:case wn.timetz:case wn.tsrange:case wn.tstzrange:return Qf(n);default:return Qf(n)}},Qf=o=>o,kv=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},Dv=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},Lv=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Bv=(o,n)=>{if(typeof o!="string")return o;const a=o.length-1,c=o[a];if(o[0]==="{"&&c==="}"){let f;const x=o.slice(1,a);try{f=JSON.parse("["+x+"]")}catch{f=x?x.split(","):[]}return f.map(v=>R2(n,v))}return o},Uv=o=>typeof o=="string"?o.replace(" ","T"):o,I2=o=>{const n=new URL(o);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class sf{constructor(n,a,c={},h=Xf){this.channel=n,this.event=a,this.payload=c,this.timeout=h,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var c;return this._hasReceived(n)&&a((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(c=>c.status===n).forEach(c=>c.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var fp;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(fp||(fp={}));class Gl{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=a?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},h=>{const{onJoin:f,onLeave:x,onSync:v}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gl.syncState(this.state,h,f,x),this.pendingDiffs.forEach(C=>{this.state=Gl.syncDiff(this.state,C,f,x)}),this.pendingDiffs=[],v()}),this.channel._on(c.diff,{},h=>{const{onJoin:f,onLeave:x,onSync:v}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(h):(this.state=Gl.syncDiff(this.state,h,f,x),v())}),this.onJoin((h,f,x)=>{this.channel._trigger("presence",{event:"join",key:h,currentPresences:f,newPresences:x})}),this.onLeave((h,f,x)=>{this.channel._trigger("presence",{event:"leave",key:h,currentPresences:f,leftPresences:x})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,c,h){const f=this.cloneDeep(n),x=this.transformState(a),v={},C={};return this.map(f,(w,A)=>{x[w]||(C[w]=A)}),this.map(x,(w,A)=>{const N=f[w];if(N){const R=A.map(U=>U.presence_ref),T=N.map(U=>U.presence_ref),O=A.filter(U=>T.indexOf(U.presence_ref)<0),D=N.filter(U=>R.indexOf(U.presence_ref)<0);O.length>0&&(v[w]=O),D.length>0&&(C[w]=D)}else v[w]=A}),this.syncDiff(f,{joins:v,leaves:C},c,h)}static syncDiff(n,a,c,h){const{joins:f,leaves:x}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return c||(c=()=>{}),h||(h=()=>{}),this.map(f,(v,C)=>{var w;const A=(w=n[v])!==null&&w!==void 0?w:[];if(n[v]=this.cloneDeep(C),A.length>0){const N=n[v].map(T=>T.presence_ref),R=A.filter(T=>N.indexOf(T.presence_ref)<0);n[v].unshift(...R)}c(v,A,C)}),this.map(x,(v,C)=>{let w=n[v];if(!w)return;const A=C.map(N=>N.presence_ref);w=w.filter(N=>A.indexOf(N.presence_ref)<0),n[v]=w,h(v,w,C),w.length===0&&delete n[v]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(c=>a(c,n[c]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,c)=>{const h=n[c];return"metas"in h?a[c]=h.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):a[c]=h,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gp;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(gp||(gp={}));var Yl;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(Yl||(Yl={}));var pr;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(pr||(pr={}));class C0{constructor(n,a={config:{}},c){var h,f;if(this.topic=n,this.params=a,this.socket=c,this.bindings={},this.state=os.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new sf(this,ba.join,this.params,this.timeout),this.rejoinTimer=new j2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=os.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(x=>x.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=os.closed,this.socket._remove(this)}),this._onError(x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=os.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=os.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=os.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ba.reply,{},(x,v)=>{this._trigger(this._replyEventName(v),x)}),this.presence=new Gl(this),this.broadcastEndpointURL=I2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(h=this.params.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var c,h,f;if(this.socket.isConnected()||this.socket.connect(),this.state==os.closed){const{config:{broadcast:x,presence:v,private:C}}=this.params,w=(h=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(T=>T.filter))!==null&&h!==void 0?h:[],A=!!this.bindings[Yl.PRESENCE]&&this.bindings[Yl.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,N={},R={broadcast:x,presence:Object.assign(Object.assign({},v),{enabled:A}),postgres_changes:w,private:C};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(T=>n?.(pr.CHANNEL_ERROR,T)),this._onClose(()=>n?.(pr.CLOSED)),this.updateJoinPayload(Object.assign({config:R},N)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:T})=>{var O;if(this.socket.setAuth(),T===void 0){n?.(pr.SUBSCRIBED);return}else{const D=this.bindings.postgres_changes,U=(O=D?.length)!==null&&O!==void 0?O:0,H=[];for(let B=0;B<U;B++){const P=D[B],{filter:{event:Q,schema:Z,table:Y,filter:X}}=P,ee=T&&T[B];if(ee&&ee.event===Q&&ee.schema===Z&&ee.table===Y&&ee.filter===X)H.push(Object.assign(Object.assign({},P),{id:ee.id}));else{this.unsubscribe(),this.state=os.errored,n?.(pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,n&&n(pr.SUBSCRIBED);return}}).receive("error",T=>{this.state=os.errored,n?.(pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{n?.(pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,c){return this.state===os.joined&&n===Yl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,a,c)}async httpSend(n,a,c={}){var h;const f=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(a==null)return Promise.reject("Payload is required for httpSend()");const x={method:"POST",headers:{Authorization:f,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},v=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(h=c.timeout)!==null&&h!==void 0?h:this.timeout);if(v.status===202)return{success:!0};let C=v.statusText;try{const w=await v.json();C=w.error||w.message||C}catch{}return Promise.reject(new Error(C))}async send(n,a={}){var c,h;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:x}=n,C={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:x,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,C,(c=a.timeout)!==null&&c!==void 0?c:this.timeout);return await((h=w.body)===null||h===void 0?void 0:h.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var x,v,C;const w=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((C=(v=(x=this.params)===null||x===void 0?void 0:x.config)===null||v===void 0?void 0:v.broadcast)===null||C===void 0)&&C.ack)&&f("ok"),w.receive("ok",()=>f("ok")),w.receive("error",()=>f("error")),w.receive("timeout",()=>f("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=os.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ba.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(h=>{c=new sf(this,ba.leave,{},n),c.receive("ok",()=>{a(),h("ok")}).receive("timeout",()=>{a(),h("timed out")}).receive("error",()=>{h("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=os.closed,this.bindings={}}async _fetchWithTimeout(n,a,c){const h=new AbortController,f=setTimeout(()=>h.abort(),c),x=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:h.signal}));return clearTimeout(f),x}_push(n,a,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let h=new sf(this,n,a,c);return this._canPush()?h.send():this._addToPushBuffer(h),h}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Iv){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,c){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,c){var h,f;const x=n.toLocaleLowerCase(),{close:v,error:C,leave:w,join:A}=ba;if(c&&[v,C,w,A].indexOf(x)>=0&&c!==this._joinRef())return;let R=this._onMessage(x,a,c);if(a&&!R)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(x)?(h=this.bindings.postgres_changes)===null||h===void 0||h.filter(T=>{var O,D,U;return((O=T.filter)===null||O===void 0?void 0:O.event)==="*"||((U=(D=T.filter)===null||D===void 0?void 0:D.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===x}).map(T=>T.callback(R,c)):(f=this.bindings[x])===null||f===void 0||f.filter(T=>{var O,D,U,H,B,P;if(["broadcast","presence","postgres_changes"].includes(x))if("id"in T){const Q=T.id,Z=(O=T.filter)===null||O===void 0?void 0:O.event;return Q&&((D=a.ids)===null||D===void 0?void 0:D.includes(Q))&&(Z==="*"||Z?.toLocaleLowerCase()===((U=a.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const Q=(B=(H=T?.filter)===null||H===void 0?void 0:H.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return Q==="*"||Q===((P=a?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===x}).map(T=>{if(typeof R=="object"&&"ids"in R){const O=R.data,{schema:D,table:U,commit_timestamp:H,type:B,errors:P}=O;R=Object.assign(Object.assign({},{schema:D,table:U,commit_timestamp:H,eventType:B,new:{},old:{},errors:P}),this._getPayloadRecords(O))}T.callback(R,c)})}_isClosed(){return this.state===os.closed}_isJoined(){return this.state===os.joined}_isJoining(){return this.state===os.joining}_isLeaving(){return this.state===os.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,c){const h=n.toLocaleLowerCase(),f={type:h,filter:a,callback:c};return this.bindings[h]?this.bindings[h].push(f):this.bindings[h]=[f],this}_off(n,a){const c=n.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(h=>{var f;return!(((f=h.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===c&&C0.isEqual(h.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const c in n)if(n[c]!==a[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ba.close,{},n)}_onError(n){this._on(ba.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=os.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=hp(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=hp(n.columns,n.old_record)),a}}const af=()=>{},Au={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Pv=[1e3,2e3,5e3,1e4],zv=1e4,Fv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hv{constructor(n,a){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xf,this.transport=null,this.heartbeatIntervalMs=Au.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=af,this.ref=0,this.reconnectTimer=null,this.vsn=dp,this.logger=af,this.conn=null,this.sendBuffer=[],this.serializer=new Ov,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=h=>h?(...f)=>h(...f):(...f)=>fetch(...f),!(!((c=a?.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${Wf.websocket}`,this.httpEndpoint=I2(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Av.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,c){this.logger(n,a,c)}connectionState(){switch(this.conn&&this.conn.readyState){case Pi.connecting:return zi.Connecting;case Pi.open:return zi.Open;case Pi.closing:return zi.Closing;default:return zi.Closed}}isConnected(){return this.connectionState()===zi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const c=`realtime:${n}`,h=this.getChannels().find(f=>f.topic===c);if(h)return h;{const f=new C0(`realtime:${n}`,a,this);return this.channels.push(f),f}}push(n){const{topic:a,event:c,payload:h,ref:f}=n,x=()=>{this.encode(n,v=>{var C;(C=this.conn)===null||C===void 0||C.send(v)})};this.log("push",`${a} ${c} (${f})`,h),this.isConnected()?x():this.sendBuffer.push(x)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Rv,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Au.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(c=>c.topic===n&&(c._isJoined()||c._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(w){this.log("error","error in heartbeat callback",w)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:h,payload:f,ref:x}=a,v=x?`(${x})`:"",C=f.status||"";this.log("receive",`${C} ${c} ${h} ${v}`.trim(),f),this.channels.filter(w=>w._isMember(c)).forEach(w=>w._trigger(h,f,x)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Pi.open||this.conn.readyState===Pi.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(ba.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const c=n.match(/\?/)?"&":"?",h=new URLSearchParams(a);return`${n}${c}${h}`}_workerObjectUrl(n){let a;if(n)a=n;else{const c=new Blob([Fv],{type:"application/javascript"});a=URL.createObjectURL(c)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a;n?a=n:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(c=>{const h={access_token:a,version:Tv};a&&c.updateJoinPayload(h),c.joinedOnce&&c._isJoined()&&c._push(ba.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(c=>{try{c(a)}catch(h){this.log("error",`error in ${n} callback`,h)}})}catch(c){this.log("error",`error triggering ${n} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new j2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Au.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,c,h,f,x,v,C,w,A,N,R,T;switch(this.transport=(a=n?.transport)!==null&&a!==void 0?a:null,this.timeout=(c=n?.timeout)!==null&&c!==void 0?c:Xf,this.heartbeatIntervalMs=(h=n?.heartbeatIntervalMs)!==null&&h!==void 0?h:Au.HEARTBEAT_INTERVAL,this.worker=(f=n?.worker)!==null&&f!==void 0?f:!1,this.accessToken=(x=n?.accessToken)!==null&&x!==void 0?x:null,this.heartbeatCallback=(v=n?.heartbeatCallback)!==null&&v!==void 0?v:af,this.vsn=(C=n?.vsn)!==null&&C!==void 0?C:dp,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=n?.reconnectAfterMs)!==null&&w!==void 0?w:(O=>Pv[O-1]||zv),this.vsn){case T2:this.encode=(A=n?.encode)!==null&&A!==void 0?A:((O,D)=>D(JSON.stringify(O))),this.decode=(N=n?.decode)!==null&&N!==void 0?N:((O,D)=>D(JSON.parse(O)));break;case jv:this.encode=(R=n?.encode)!==null&&R!==void 0?R:this.serializer.encode.bind(this.serializer),this.decode=(T=n?.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class _0 extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Mn(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class qv extends _0{constructor(n,a,c){super(n),this.name="StorageApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kf extends _0{constructor(n,a){super(n),this.name="StorageUnknownError",this.originalError=a}}const S0=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),Vv=()=>Response,Zf=o=>{if(Array.isArray(o))return o.map(a=>Zf(a));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([a,c])=>{const h=a.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));n[h]=Zf(c)}),n},Gv=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},rf=o=>{var n;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(n=o.error)===null||n===void 0?void 0:n.message)||JSON.stringify(o)},Yv=(o,n,a)=>tt(void 0,void 0,void 0,function*(){const c=yield Vv();o instanceof c&&!a?.noResolveJson?o.json().then(h=>{const f=o.status||500,x=h?.statusCode||f+"";n(new qv(rf(h),f,x))}).catch(h=>{n(new Kf(rf(h),h))}):n(new Kf(rf(o),o))}),Xv=(o,n,a,c)=>{const h={method:o,headers:n?.headers||{}};return o==="GET"||!c?h:(Gv(c)?(h.headers=Object.assign({"Content-Type":"application/json"},n?.headers),h.body=JSON.stringify(c)):h.body=c,n?.duplex&&(h.duplex=n.duplex),Object.assign(Object.assign({},h),a))};function tc(o,n,a,c,h,f){return tt(this,void 0,void 0,function*(){return new Promise((x,v)=>{o(a,Xv(n,c,h,f)).then(C=>{if(!C.ok)throw C;return c?.noResolveJson?C:C.json()}).then(C=>x(C)).catch(C=>Yv(C,v,c))})})}function Ql(o,n,a,c){return tt(this,void 0,void 0,function*(){return tc(o,"GET",n,a,c)})}function Ia(o,n,a,c,h){return tt(this,void 0,void 0,function*(){return tc(o,"POST",n,c,h,a)})}function $f(o,n,a,c,h){return tt(this,void 0,void 0,function*(){return tc(o,"PUT",n,c,h,a)})}function Wv(o,n,a,c){return tt(this,void 0,void 0,function*(){return tc(o,"HEAD",n,Object.assign(Object.assign({},a),{noResolveJson:!0}),c)})}function E0(o,n,a,c,h){return tt(this,void 0,void 0,function*(){return tc(o,"DELETE",n,c,h,a)})}class Qv{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a}then(n,a){return this.execute().then(n,a)}execute(){return tt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mn(n))return{data:null,error:n};throw n}})}}var O2;class Kv{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a,this[O2]="BlobDownloadBuilder",this.promise=null}asStream(){return new Qv(this.downloadFn,this.shouldThrowOnError)}then(n,a){return this.getPromise().then(n,a)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return tt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mn(n))return{data:null,error:n};throw n}})}}O2=Symbol.toStringTag;const Zv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $v{constructor(n,a={},c,h){this.shouldThrowOnError=!1,this.url=n,this.headers=a,this.bucketId=c,this.fetch=S0(h)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,a,c,h){return tt(this,void 0,void 0,function*(){try{let f;const x=Object.assign(Object.assign({},mp),h);let v=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(x.upsert)});const C=x.metadata;typeof Blob<"u"&&c instanceof Blob?(f=new FormData,f.append("cacheControl",x.cacheControl),C&&f.append("metadata",this.encodeMetadata(C)),f.append("",c)):typeof FormData<"u"&&c instanceof FormData?(f=c,f.has("cacheControl")||f.append("cacheControl",x.cacheControl),C&&!f.has("metadata")&&f.append("metadata",this.encodeMetadata(C))):(f=c,v["cache-control"]=`max-age=${x.cacheControl}`,v["content-type"]=x.contentType,C&&(v["x-metadata"]=this.toBase64(this.encodeMetadata(C))),(typeof ReadableStream<"u"&&f instanceof ReadableStream||f&&typeof f=="object"&&"pipe"in f&&typeof f.pipe=="function")&&!x.duplex&&(x.duplex="half")),h?.headers&&(v=Object.assign(Object.assign({},v),h.headers));const w=this._removeEmptyFolders(a),A=this._getFinalPath(w),N=yield(n=="PUT"?$f:Ia)(this.fetch,`${this.url}/object/${A}`,f,Object.assign({headers:v},x?.duplex?{duplex:x.duplex}:{}));return{data:{path:w,id:N.Id,fullPath:N.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Mn(f))return{data:null,error:f};throw f}})}upload(n,a,c){return tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,a,c)})}uploadToSignedUrl(n,a,c,h){return tt(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(n),x=this._getFinalPath(f),v=new URL(this.url+`/object/upload/sign/${x}`);v.searchParams.set("token",a);try{let C;const w=Object.assign({upsert:mp.upsert},h),A=Object.assign(Object.assign({},this.headers),{"x-upsert":String(w.upsert)});typeof Blob<"u"&&c instanceof Blob?(C=new FormData,C.append("cacheControl",w.cacheControl),C.append("",c)):typeof FormData<"u"&&c instanceof FormData?(C=c,C.append("cacheControl",w.cacheControl)):(C=c,A["cache-control"]=`max-age=${w.cacheControl}`,A["content-type"]=w.contentType);const N=yield $f(this.fetch,v.toString(),C,{headers:A});return{data:{path:f,fullPath:N.Key},error:null}}catch(C){if(this.shouldThrowOnError)throw C;if(Mn(C))return{data:null,error:C};throw C}})}createSignedUploadUrl(n,a){return tt(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n);const h=Object.assign({},this.headers);a?.upsert&&(h["x-upsert"]="true");const f=yield Ia(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:h}),x=new URL(this.url+f.url),v=x.searchParams.get("token");if(!v)throw new _0("No token returned by API");return{data:{signedUrl:x.toString(),path:n,token:v},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mn(c))return{data:null,error:c};throw c}})}update(n,a,c){return tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,a,c)})}move(n,a,c){return tt(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Mn(h))return{data:null,error:h};throw h}})}copy(n,a,c){return tt(this,void 0,void 0,function*(){try{return{data:{path:(yield Ia(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:c?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Mn(h))return{data:null,error:h};throw h}})}createSignedUrl(n,a,c){return tt(this,void 0,void 0,function*(){try{let h=this._getFinalPath(n),f=yield Ia(this.fetch,`${this.url}/object/sign/${h}`,Object.assign({expiresIn:a},c?.transform?{transform:c.transform}:{}),{headers:this.headers});const x=c?.download?`&download=${c.download===!0?"":c.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${x}`)},{data:f,error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Mn(h))return{data:null,error:h};throw h}})}createSignedUrls(n,a,c){return tt(this,void 0,void 0,function*(){try{const h=yield Ia(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:n},{headers:this.headers}),f=c?.download?`&download=${c.download===!0?"":c.download}`:"";return{data:h.map(x=>Object.assign(Object.assign({},x),{signedUrl:x.signedURL?encodeURI(`${this.url}${x.signedURL}${f}`):null})),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Mn(h))return{data:null,error:h};throw h}})}download(n,a){const h=typeof a?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(a?.transform||{}),x=f?`?${f}`:"",v=this._getFinalPath(n),C=()=>Ql(this.fetch,`${this.url}/${h}/${v}${x}`,{headers:this.headers,noResolveJson:!0});return new Kv(C,this.shouldThrowOnError)}info(n){return tt(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{const c=yield Ql(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Zf(c),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mn(c))return{data:null,error:c};throw c}})}exists(n){return tt(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{return yield Wv(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mn(c)&&c instanceof Kf){const h=c.originalError;if([400,404].includes(h?.status))return{data:!1,error:c}}throw c}})}getPublicUrl(n,a){const c=this._getFinalPath(n),h=[],f=a?.download?`download=${a.download===!0?"":a.download}`:"";f!==""&&h.push(f);const v=typeof a?.transform<"u"?"render/image":"object",C=this.transformOptsToQueryString(a?.transform||{});C!==""&&h.push(C);let w=h.join("&");return w!==""&&(w=`?${w}`),{data:{publicUrl:encodeURI(`${this.url}/${v}/public/${c}${w}`)}}}remove(n){return tt(this,void 0,void 0,function*(){try{return{data:yield E0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}list(n,a,c){return tt(this,void 0,void 0,function*(){try{const h=Object.assign(Object.assign(Object.assign({},Zv),a),{prefix:n||""});return{data:yield Ia(this.fetch,`${this.url}/object/list/${this.bucketId}`,h,{headers:this.headers},c),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Mn(h))return{data:null,error:h};throw h}})}listV2(n,a){return tt(this,void 0,void 0,function*(){try{const c=Object.assign({},n);return{data:yield Ia(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},a),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mn(c))return{data:null,error:c};throw c}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const a=[];return n.width&&a.push(`width=${n.width}`),n.height&&a.push(`height=${n.height}`),n.resize&&a.push(`resize=${n.resize}`),n.format&&a.push(`format=${n.format}`),n.quality&&a.push(`quality=${n.quality}`),a.join("&")}}const M2="2.83.0",k2={"X-Client-Info":`storage-js/${M2}`};class Jv{constructor(n,a={},c,h){this.shouldThrowOnError=!1;const f=new URL(n);h?.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase.")),this.url=f.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k2),a),this.fetch=S0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return tt(this,void 0,void 0,function*(){try{const a=this.listBucketOptionsToQueryString(n);return{data:yield Ql(this.fetch,`${this.url}/bucket${a}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}getBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}createBucket(n){return tt(this,arguments,void 0,function*(a,c={public:!1}){try{return{data:yield Ia(this.fetch,`${this.url}/bucket`,{id:a,name:a,type:c.type,public:c.public,file_size_limit:c.fileSizeLimit,allowed_mime_types:c.allowedMimeTypes},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Mn(h))return{data:null,error:h};throw h}})}updateBucket(n,a){return tt(this,void 0,void 0,function*(){try{return{data:yield $f(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mn(c))return{data:null,error:c};throw c}})}emptyBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}deleteBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:yield E0(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(n){const a={};return n&&("limit"in n&&(a.limit=String(n.limit)),"offset"in n&&(a.offset=String(n.offset)),n.search&&(a.search=n.search),n.sortColumn&&(a.sortColumn=n.sortColumn),n.sortOrder&&(a.sortOrder=n.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}}class eC{constructor(n,a={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k2),a),this.fetch=S0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:yield Ia(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}listBuckets(n){return tt(this,void 0,void 0,function*(){try{const a=new URLSearchParams;n?.limit!==void 0&&a.set("limit",n.limit.toString()),n?.offset!==void 0&&a.set("offset",n.offset.toString()),n?.sortColumn&&a.set("sortColumn",n.sortColumn),n?.sortOrder&&a.set("sortOrder",n.sortOrder),n?.search&&a.set("search",n.search);const c=a.toString(),h=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`;return{data:yield Ql(this.fetch,h,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}deleteBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:yield E0(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}}const A0={"X-Client-Info":`storage-js/${M2}`,"Content-Type":"application/json"};class D2 extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ra(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class of extends D2{constructor(n,a,c){super(n),this.name="StorageVectorsApiError",this.status=a,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class tC extends D2{constructor(n,a){super(n),this.name="StorageVectorsUnknownError",this.originalError=a}}var pp;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(pp||(pp={}));const N0=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),nC=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},xp=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),sC=(o,n,a)=>tt(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!a?.noResolveJson){const h=o.status||500,f=o;if(typeof f.json=="function")f.json().then(x=>{const v=x?.statusCode||x?.code||h+"";n(new of(xp(x),h,v))}).catch(()=>{const x=h+"",v=f.statusText||`HTTP ${h} error`;n(new of(v,h,x))});else{const x=h+"",v=f.statusText||`HTTP ${h} error`;n(new of(v,h,x))}}else n(new tC(xp(o),o))}),aC=(o,n,a,c)=>{const h={method:o,headers:n?.headers||{}};return c?(nC(c)?(h.headers=Object.assign({"Content-Type":"application/json"},n?.headers),h.body=JSON.stringify(c)):h.body=c,Object.assign(Object.assign({},h),a)):h};function rC(o,n,a,c,h,f){return tt(this,void 0,void 0,function*(){return new Promise((x,v)=>{o(a,aC(n,c,h,f)).then(C=>{if(!C.ok)throw C;if(c?.noResolveJson)return C;const w=C.headers.get("content-type");return!w||!w.includes("application/json")?{}:C.json()}).then(C=>x(C)).catch(C=>sC(C,v,c))})})}function ia(o,n,a,c,h){return tt(this,void 0,void 0,function*(){return rC(o,"POST",n,c,h,a)})}class iC{constructor(n,a={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A0),a),this.fetch=N0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return tt(this,void 0,void 0,function*(){try{return{data:(yield ia(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}getIndex(n,a){return tt(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:a},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ra(c))return{data:null,error:c};throw c}})}listIndexes(n){return tt(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}deleteIndex(n,a){return tt(this,void 0,void 0,function*(){try{return{data:(yield ia(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:a},{headers:this.headers}))||{},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ra(c))return{data:null,error:c};throw c}})}}class oC{constructor(n,a={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A0),a),this.fetch=N0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return tt(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ia(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}getVectors(n){return tt(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}listVectors(n){return tt(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield ia(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}queryVectors(n){return tt(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}deleteVectors(n){return tt(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ia(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}}class lC{constructor(n,a={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},A0),a),this.fetch=N0(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:(yield ia(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}getBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:yield ia(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}listBuckets(){return tt(this,arguments,void 0,function*(n={}){try{return{data:yield ia(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}deleteBucket(n){return tt(this,void 0,void 0,function*(){try{return{data:(yield ia(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ra(a))return{data:null,error:a};throw a}})}}class cC extends lC{constructor(n,a={}){super(n,a.headers||{},a.fetch)}from(n){return new uC(this.url,this.headers,n,this.fetch)}}class uC extends iC{constructor(n,a,c,h){super(n,a,h),this.vectorBucketName=c}createIndex(n){const a=Object.create(null,{createIndex:{get:()=>super.createIndex}});return tt(this,void 0,void 0,function*(){return a.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return tt(this,arguments,void 0,function*(a={}){return n.listIndexes.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const a=Object.create(null,{getIndex:{get:()=>super.getIndex}});return tt(this,void 0,void 0,function*(){return a.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const a=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return tt(this,void 0,void 0,function*(){return a.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new dC(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class dC extends oC{constructor(n,a,c,h,f){super(n,a,f),this.vectorBucketName=c,this.indexName=h}putVectors(n){const a=Object.create(null,{putVectors:{get:()=>super.putVectors}});return tt(this,void 0,void 0,function*(){return a.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const a=Object.create(null,{getVectors:{get:()=>super.getVectors}});return tt(this,void 0,void 0,function*(){return a.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return tt(this,arguments,void 0,function*(a={}){return n.listVectors.call(this,Object.assign(Object.assign({},a),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const a=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return tt(this,void 0,void 0,function*(){return a.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const a=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return tt(this,void 0,void 0,function*(){return a.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class hC extends Jv{constructor(n,a={},c,h){super(n,a,c,h)}from(n){return new $v(this.url,this.headers,n,this.fetch)}get vectors(){return new cC(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new eC(this.url+"/iceberg",this.headers,this.fetch)}}const fC="2.83.0";let ql="";typeof Deno<"u"?ql="deno":typeof document<"u"?ql="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ql="react-native":ql="node";const gC={"X-Client-Info":`supabase-js-${ql}/${fC}`},mC={headers:gC},pC={schema:"public"},xC={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yC={},wC=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),bC=()=>Headers,vC=(o,n,a)=>{const c=wC(a),h=bC();return async(f,x)=>{var v;const C=(v=await n())!==null&&v!==void 0?v:o;let w=new h(x?.headers);return w.has("apikey")||w.set("apikey",o),w.has("Authorization")||w.set("Authorization",`Bearer ${C}`),c(f,Object.assign(Object.assign({},x),{headers:w}))}};function CC(o){return o.endsWith("/")?o:o+"/"}function _C(o,n){var a,c;const{db:h,auth:f,realtime:x,global:v}=o,{db:C,auth:w,realtime:A,global:N}=n,R={db:Object.assign(Object.assign({},C),h),auth:Object.assign(Object.assign({},w),f),realtime:Object.assign(Object.assign({},A),x),storage:{},global:Object.assign(Object.assign(Object.assign({},N),v),{headers:Object.assign(Object.assign({},(a=N?.headers)!==null&&a!==void 0?a:{}),(c=v?.headers)!==null&&c!==void 0?c:{})}),accessToken:async()=>""};return o.accessToken?R.accessToken=o.accessToken:delete R.accessToken,R}function SC(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CC(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const L2="2.83.0",Uo=30*1e3,Jf=3,lf=Jf*Uo,EC="http://localhost:9999",AC="supabase.auth.token",NC={"X-Client-Info":`gotrue-js/${L2}`},e0="X-Supabase-Api-Version",B2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jC=600*1e3;class Kl extends Error{constructor(n,a,c){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=c}}function st(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class RC extends Kl{constructor(n,a,c){super(n,a,c),this.name="AuthApiError",this.status=a,this.code=c}}function IC(o){return st(o)&&o.name==="AuthApiError"}class Fi extends Kl{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class ui extends Kl{constructor(n,a,c,h){super(n,c,h),this.name=a,this.status=c}}class na extends ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function OC(o){return st(o)&&o.name==="AuthSessionMissingError"}class Io extends ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nu extends ui{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Tu extends ui{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MC(o){return st(o)&&o.name==="AuthImplicitGrantRedirectError"}class yp extends ui{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class t0 extends ui{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function cf(o){return st(o)&&o.name==="AuthRetryableFetchError"}class wp extends ui{constructor(n,a,c){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=c}}class n0 extends ui{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Uu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bp=` 	
\r=`.split(""),kC=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<bp.length;n+=1)o[bp[n].charCodeAt(0)]=-2;for(let n=0;n<Uu.length;n+=1)o[Uu[n].charCodeAt(0)]=n;return o})();function vp(o,n,a){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;a(Uu[c]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;a(Uu[c]),n.queuedBits-=6}}function U2(o,n,a){const c=kC[o];if(c>-1)for(n.queue=n.queue<<6|c,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Cp(o){const n=[],a=x=>{n.push(String.fromCodePoint(x))},c={utf8seq:0,codepoint:0},h={queue:0,queuedBits:0},f=x=>{BC(x,c,a)};for(let x=0;x<o.length;x+=1)U2(o.charCodeAt(x),h,f);return n.join("")}function DC(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function LC(o,n){for(let a=0;a<o.length;a+=1){let c=o.charCodeAt(a);if(c>55295&&c<=56319){const h=(c-55296)*1024&65535;c=(o.charCodeAt(a+1)-56320&65535|h)+65536,a+=1}DC(c,n)}}function BC(o,n,a){if(n.utf8seq===0){if(o<=127){a(o);return}for(let c=1;c<6;c+=1)if((o>>7-c&1)===0){n.utf8seq=c;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function Fo(o){const n=[],a={queue:0,queuedBits:0},c=h=>{n.push(h)};for(let h=0;h<o.length;h+=1)U2(o.charCodeAt(h),a,c);return new Uint8Array(n)}function UC(o){const n=[];return LC(o,a=>n.push(a)),new Uint8Array(n)}function qi(o){const n=[],a={queue:0,queuedBits:0},c=h=>{n.push(h)};return o.forEach(h=>vp(h,a,c)),vp(null,a,c),n.join("")}function PC(o){return Math.round(Date.now()/1e3)+o}function zC(){return Symbol("auth-callback")}const bs=()=>typeof window<"u"&&typeof document<"u",Di={tested:!1,writable:!1},P2=()=>{if(!bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Di.tested)return Di.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Di.tested=!0,Di.writable=!0}catch{Di.tested=!0,Di.writable=!1}return Di.writable};function FC(o){const n={},a=new URL(o);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((h,f)=>{n[f]=h})}catch{}return a.searchParams.forEach((c,h)=>{n[h]=c}),n}const z2=o=>o?(...n)=>o(...n):(...n)=>fetch(...n),HC=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",Po=async(o,n,a)=>{await o.setItem(n,JSON.stringify(a))},Li=async(o,n)=>{const a=await o.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},ai=async(o,n)=>{await o.removeItem(n)};class Ku{constructor(){this.promise=new Ku.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}Ku.promiseConstructor=Promise;function uf(o){const n=o.split(".");if(n.length!==3)throw new n0("Invalid JWT structure");for(let c=0;c<n.length;c++)if(!TC.test(n[c]))throw new n0("JWT not in base64url format");return{header:JSON.parse(Cp(n[0])),payload:JSON.parse(Cp(n[1])),signature:Fo(n[2]),raw:{header:n[0],payload:n[1]}}}async function qC(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function VC(o,n){return new Promise((c,h)=>{(async()=>{for(let f=0;f<1/0;f++)try{const x=await o(f);if(!n(f,null,x)){c(x);return}}catch(x){if(!n(f,x)){h(x);return}}})()})}function GC(o){return("0"+o.toString(16)).substr(-2)}function YC(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=a.length;let h="";for(let f=0;f<56;f++)h+=a.charAt(Math.floor(Math.random()*c));return h}return crypto.getRandomValues(n),Array.from(n,GC).join("")}async function XC(o){const a=new TextEncoder().encode(o),c=await crypto.subtle.digest("SHA-256",a),h=new Uint8Array(c);return Array.from(h).map(f=>String.fromCharCode(f)).join("")}async function WC(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const a=await XC(o);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oo(o,n,a=!1){const c=YC();let h=c;a&&(h+="/PASSWORD_RECOVERY"),await Po(o,`${n}-code-verifier`,h);const f=await WC(c);return[f,c===f?"plain":"s256"]}const QC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KC(o){const n=o.headers.get(e0);if(!n||!n.match(QC))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function ZC(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function $C(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const JC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(o){if(!JC.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function df(){const o={};return new Proxy(o,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function e3(o,n){return new Proxy(o,{get:(a,c,h)=>{if(c==="__isInsecureUserWarningProxy")return!0;if(typeof c=="symbol"){const f=c.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)"||f==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,c,h)}return!n.value&&typeof c=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,c,h)}})}function _p(o){return JSON.parse(JSON.stringify(o))}const Ui=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),t3=[502,503,504];async function Sp(o){var n;if(!HC(o))throw new t0(Ui(o),0);if(t3.includes(o.status))throw new t0(Ui(o),o.status);let a;try{a=await o.json()}catch(f){throw new Fi(Ui(f),f)}let c;const h=KC(o);if(h&&h.getTime()>=B2["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?c=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(c=a.error_code),c){if(c==="weak_password")throw new wp(Ui(a),o.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(c==="session_not_found")throw new na}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((f,x)=>f&&typeof x=="string",!0))throw new wp(Ui(a),o.status,a.weak_password.reasons);throw new RC(Ui(a),o.status||500,c)}const n3=(o,n,a,c)=>{const h={method:o,headers:n?.headers||{}};return o==="GET"?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),h.body=JSON.stringify(c),Object.assign(Object.assign({},h),a))};async function dt(o,n,a,c){var h;const f=Object.assign({},c?.headers);f[e0]||(f[e0]=B2["2024-01-01"].name),c?.jwt&&(f.Authorization=`Bearer ${c.jwt}`);const x=(h=c?.query)!==null&&h!==void 0?h:{};c?.redirectTo&&(x.redirect_to=c.redirectTo);const v=Object.keys(x).length?"?"+new URLSearchParams(x).toString():"",C=await s3(o,n,a+v,{headers:f,noResolveJson:c?.noResolveJson},{},c?.body);return c?.xform?c?.xform(C):{data:Object.assign({},C),error:null}}async function s3(o,n,a,c,h,f){const x=n3(n,c,h,f);let v;try{v=await o(a,Object.assign({},x))}catch(C){throw console.error(C),new t0(Ui(C),0)}if(v.ok||await Sp(v),c?.noResolveJson)return v;try{return await v.json()}catch(C){await Sp(C)}}function Ra(o){var n;let a=null;i3(o)&&(a=Object.assign({},o),o.expires_at||(a.expires_at=PC(o.expires_in)));const c=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:a,user:c},error:null}}function Ep(o){const n=Ra(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0)&&(n.data.weak_password=o.weak_password),n}function li(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function a3(o){return{data:o,error:null}}function r3(o){const{action_link:n,email_otp:a,hashed_token:c,redirect_to:h,verification_type:f}=o,x=Xo(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),v={action_link:n,email_otp:a,hashed_token:c,redirect_to:h,verification_type:f},C=Object.assign({},x);return{data:{properties:v,user:C},error:null}}function Ap(o){return o}function i3(o){return o.access_token&&o.refresh_token&&o.expires_in}const hf=["global","local","others"];class o3{constructor({url:n="",headers:a={},fetch:c}){this.url=n,this.headers=a,this.fetch=z2(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=hf[0]){if(hf.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hf.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(c){if(st(c))return{data:null,error:c};throw c}}async inviteUserByEmail(n,a={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:li})}catch(c){if(st(c))return{data:{user:null},error:c};throw c}}async generateLink(n){try{const{options:a}=n,c=Xo(n,["options"]),h=Object.assign(Object.assign({},c),a);return"newEmail"in c&&(h.new_email=c?.newEmail,delete h.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:h,headers:this.headers,xform:r3,redirectTo:a?.redirectTo})}catch(a){if(st(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:li})}catch(a){if(st(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,c,h,f,x,v,C;try{const w={nextPage:null,lastPage:0,total:0},A=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(f=(h=n?.perPage)===null||h===void 0?void 0:h.toString())!==null&&f!==void 0?f:""},xform:Ap});if(A.error)throw A.error;const N=await A.json(),R=(x=A.headers.get("x-total-count"))!==null&&x!==void 0?x:0,T=(C=(v=A.headers.get("link"))===null||v===void 0?void 0:v.split(","))!==null&&C!==void 0?C:[];return T.length>0&&(T.forEach(O=>{const D=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(O.split(";")[1].split("=")[1]);w[`${U}Page`]=D}),w.total=parseInt(R)),{data:Object.assign(Object.assign({},N),w),error:null}}catch(w){if(st(w))return{data:{users:[]},error:w};throw w}}async getUserById(n){Mo(n);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:li})}catch(a){if(st(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){Mo(n);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:li})}catch(c){if(st(c))return{data:{user:null},error:c};throw c}}async deleteUser(n,a=!1){Mo(n);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:li})}catch(c){if(st(c))return{data:{user:null},error:c};throw c}}async _listFactors(n){Mo(n.userId);try{const{data:a,error:c}=await dt(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:h=>({data:{factors:h},error:null})});return{data:a,error:c}}catch(a){if(st(a))return{data:null,error:a};throw a}}async _deleteFactor(n){Mo(n.userId),Mo(n.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,c,h,f,x,v,C;try{const w={nextPage:null,lastPage:0,total:0},A=await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(a=n?.page)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:"",per_page:(f=(h=n?.perPage)===null||h===void 0?void 0:h.toString())!==null&&f!==void 0?f:""},xform:Ap});if(A.error)throw A.error;const N=await A.json(),R=(x=A.headers.get("x-total-count"))!==null&&x!==void 0?x:0,T=(C=(v=A.headers.get("link"))===null||v===void 0?void 0:v.split(","))!==null&&C!==void 0?C:[];return T.length>0&&(T.forEach(O=>{const D=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(O.split(";")[1].split("=")[1]);w[`${U}Page`]=D}),w.total=parseInt(R)),{data:Object.assign(Object.assign({},N),w),error:null}}catch(w){if(st(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(n){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(st(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await dt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(st(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await dt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:c=>({data:c,error:null})})}catch(c){if(st(c))return{data:null,error:c};throw c}}async _deleteOAuthClient(n){try{return await dt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(st(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await dt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(st(a))return{data:null,error:a};throw a}}}function Np(o={}){return{getItem:n=>o[n]||null,setItem:(n,a)=>{o[n]=a},removeItem:n=>{delete o[n]}}}const ko={debug:!!(globalThis&&P2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class F2 extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class l3 extends F2{}async function c3(o,n,a){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const c=new globalThis.AbortController;return n>0&&setTimeout(()=>{c.abort(),ko.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async h=>{if(h){ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,h.name);try{return await a()}finally{ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,h.name)}}else{if(n===0)throw ko.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new l3(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(ko.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}function u3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function H2(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function d3(o){return parseInt(o,16)}function h3(o){const n=new TextEncoder().encode(o);return"0x"+Array.from(n,c=>c.toString(16).padStart(2,"0")).join("")}function f3(o){var n;const{chainId:a,domain:c,expirationTime:h,issuedAt:f=new Date,nonce:x,notBefore:v,requestId:C,resources:w,scheme:A,uri:N,version:R}=o;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(x&&x.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${x}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(R!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${R}`);if(!((n=o.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const T=H2(o.address),O=A?`${A}://${c}`:c,D=o.statement?`${o.statement}
`:"",U=`${O} wants you to sign in with your Ethereum account:
${T}

${D}`;let H=`URI: ${N}
Version: ${R}
Chain ID: ${a}${x?`
Nonce: ${x}`:""}
Issued At: ${f.toISOString()}`;if(h&&(H+=`
Expiration Time: ${h.toISOString()}`),v&&(H+=`
Not Before: ${v.toISOString()}`),C&&(H+=`
Request ID: ${C}`),w){let B=`
Resources:`;for(const P of w){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);B+=`
- ${P}`}H+=B}return`${U}
${H}`}class es extends Error{constructor({message:n,code:a,cause:c,name:h}){var f;super(n,{cause:c}),this.__isWebAuthnError=!0,this.name=(f=h??(c instanceof Error?c.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=a}}class Pu extends es{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function g3({error:o,options:n}){var a,c,h;const{publicKey:f}=n;if(!f)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new es({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((a=f.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new es({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(n.mediation==="conditional"&&((c=f.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new es({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((h=f.authenticatorSelection)===null||h===void 0?void 0:h.userVerification)==="required")return new es({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new es({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new es({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return f.pubKeyCredParams.filter(v=>v.type==="public-key").length===0?new es({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new es({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const x=window.location.hostname;if(q2(x)){if(f.rp.id!==x)return new es({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new es({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new es({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new es({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new es({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function m3({error:o,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new es({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new es({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const c=window.location.hostname;if(q2(c)){if(a.rpId!==c)return new es({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new es({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new es({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new es({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class p3{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const x3=new p3;function y3(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:n,user:a,excludeCredentials:c}=o,h=Xo(o,["challenge","user","excludeCredentials"]),f=Fo(n).buffer,x=Object.assign(Object.assign({},a),{id:Fo(a.id).buffer}),v=Object.assign(Object.assign({},h),{challenge:f,user:x});if(c&&c.length>0){v.excludeCredentials=new Array(c.length);for(let C=0;C<c.length;C++){const w=c[C];v.excludeCredentials[C]=Object.assign(Object.assign({},w),{id:Fo(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return v}function w3(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:n,allowCredentials:a}=o,c=Xo(o,["challenge","allowCredentials"]),h=Fo(n).buffer,f=Object.assign(Object.assign({},c),{challenge:h});if(a&&a.length>0){f.allowCredentials=new Array(a.length);for(let x=0;x<a.length;x++){const v=a[x];f.allowCredentials[x]=Object.assign(Object.assign({},v),{id:Fo(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return f}function b3(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const a=o;return{id:o.id,rawId:o.id,response:{attestationObject:qi(new Uint8Array(o.response.attestationObject)),clientDataJSON:qi(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function v3(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const a=o,c=o.getClientExtensionResults(),h=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:qi(new Uint8Array(h.authenticatorData)),clientDataJSON:qi(new Uint8Array(h.clientDataJSON)),signature:qi(new Uint8Array(h.signature)),userHandle:h.userHandle?qi(new Uint8Array(h.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function q2(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function Tp(){var o,n;return!!(bs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function C3(o){try{const n=await navigator.credentials.create(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Pu("Browser returned unexpected credential type",n)}:{data:null,error:new Pu("Empty credential response",n)}}catch(n){return{data:null,error:g3({error:n,options:o})}}}async function _3(o){try{const n=await navigator.credentials.get(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Pu("Browser returned unexpected credential type",n)}:{data:null,error:new Pu("Empty credential response",n)}}catch(n){return{data:null,error:m3({error:n,options:o})}}}const S3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},E3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function zu(...o){const n=h=>h!==null&&typeof h=="object"&&!Array.isArray(h),a=h=>h instanceof ArrayBuffer||ArrayBuffer.isView(h),c={};for(const h of o)if(h)for(const f in h){const x=h[f];if(x!==void 0)if(Array.isArray(x))c[f]=x;else if(a(x))c[f]=x;else if(n(x)){const v=c[f];n(v)?c[f]=zu(v,x):c[f]=zu(x)}else c[f]=x}return c}function A3(o,n){return zu(S3,o,n||{})}function N3(o,n){return zu(E3,o,n||{})}class T3{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:c,signal:h},f){try{const{data:x,error:v}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!x)return{data:null,error:v};const C=h??x3.createNewAbortSignal();if(x.webauthn.type==="create"){const{user:w}=x.webauthn.credential_options.publicKey;w.name||(w.name=`${w.id}:${c}`),w.displayName||(w.displayName=w.name)}switch(x.webauthn.type){case"create":{const w=A3(x.webauthn.credential_options.publicKey,f?.create),{data:A,error:N}=await C3({publicKey:w,signal:C});return A?{data:{factorId:n,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:A}},error:null}:{data:null,error:N}}case"request":{const w=N3(x.webauthn.credential_options.publicKey,f?.request),{data:A,error:N}=await _3(Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:w,signal:C}));return A?{data:{factorId:n,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:A}},error:null}:{data:null,error:N}}}}catch(x){return st(x)?{data:null,error:x}:{data:null,error:new Fi("Unexpected error in challenge",x)}}}async _verify({challengeId:n,factorId:a,webauthn:c}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:c})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},f){if(!a)return{data:null,error:new Kl("rpId is required for WebAuthn authentication")};try{if(!Tp())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:x,error:v}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:c},signal:h},{request:f});if(!x)return{data:null,error:v};const{webauthn:C}=x;return this._verify({factorId:n,challengeId:x.challengeId,webauthn:{type:C.type,rpId:a,rpOrigins:c,credential_response:C.credential_response}})}catch(x){return st(x)?{data:null,error:x}:{data:null,error:new Fi("Unexpected error in authenticate",x)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},f){if(!a)return{data:null,error:new Kl("rpId is required for WebAuthn registration")};try{if(!Tp())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:x,error:v}=await this._enroll({friendlyName:n});if(!x)return await this.client.mfa.listFactors().then(A=>{var N;return(N=A.data)===null||N===void 0?void 0:N.all.find(R=>R.factor_type==="webauthn"&&R.friendly_name===n&&R.status!=="unverified")}).then(A=>A?this.client.mfa.unenroll({factorId:A?.id}):void 0),{data:null,error:v};const{data:C,error:w}=await this._challenge({factorId:x.id,friendlyName:x.friendly_name,webauthn:{rpId:a,rpOrigins:c},signal:h},{create:f});return C?this._verify({factorId:x.id,challengeId:C.challengeId,webauthn:{rpId:a,rpOrigins:c,type:C.webauthn.type,credential_response:C.webauthn.credential_response}}):{data:null,error:w}}catch(x){return st(x)?{data:null,error:x}:{data:null,error:new Fi("Unexpected error in register",x)}}}}u3();const j3={url:EC,storageKey:AC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:NC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jp(o,n,a){return await a()}const Do={};class Zl{get jwks(){var n,a;return(a=(n=Do[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){Do[this.storageKey]=Object.assign(Object.assign({},Do[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=Do[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Do[this.storageKey]=Object.assign(Object.assign({},Do[this.storageKey]),{cachedAt:n})}constructor(n){var a,c,h;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const f=Object.assign(Object.assign({},j3),n);if(this.storageKey=f.storageKey,this.instanceID=(a=Zl.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Zl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.instanceID>0&&bs()){const x=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(x),this.logDebugMessages&&console.trace(x)}if(this.persistSession=f.persistSession,this.autoRefreshToken=f.autoRefreshToken,this.admin=new o3({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=z2(f.fetch),this.lock=f.lock||jp,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,this.throwOnError=f.throwOnError,f.lock?this.lock=f.lock:bs()&&(!((c=globalThis?.navigator)===null||c===void 0)&&c.locks)?this.lock=c3:this.lock=jp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new T3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:P2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Np(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=Np(this.memoryStorage)),bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(x){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",x)}(h=this.broadcastChannel)===null||h===void 0||h.addEventListener("message",async x=>{this._debug("received broadcast notification from other tab or client",x),await this._notifyAllSubscribers(x.data.event,x.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${L2}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},c="none";if(bs()&&(a=FC(window.location.href),this._isImplicitGrantCallback(a)?c="implicit":await this._isPKCECallback(a)&&(c="pkce")),bs()&&this.detectSessionInUrl&&c!=="none"){const{data:h,error:f}=await this._getSessionFromURL(a,c);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),MC(f)){const C=(n=f.details)===null||n===void 0?void 0:n.code;if(C==="identity_already_exists"||C==="identity_not_found"||C==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:x,redirectType:v}=h;return this._debug("#_initialize()","detected session in URL",x,"redirect type",v),await this._saveSession(x),setTimeout(async()=>{v==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",x):await this._notifyAllSubscribers("SIGNED_IN",x)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return st(a)?this._returnResult({error:a}):this._returnResult({error:new Fi("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,c,h;try{const f=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(a=n?.options)===null||a===void 0?void 0:a.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(h=n?.options)===null||h===void 0?void 0:h.captchaToken}},xform:Ra}),{data:x,error:v}=f;if(v||!x)return this._returnResult({data:{user:null,session:null},error:v});const C=x.session,w=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:w,session:C},error:null})}catch(f){if(st(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signUp(n){var a,c,h;try{let f;if("email"in n){const{email:A,password:N,options:R}=n;let T=null,O=null;this.flowType==="pkce"&&([T,O]=await Oo(this.storage,this.storageKey)),f=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:R?.emailRedirectTo,body:{email:A,password:N,data:(a=R?.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:R?.captchaToken},code_challenge:T,code_challenge_method:O},xform:Ra})}else if("phone"in n){const{phone:A,password:N,options:R}=n;f=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:A,password:N,data:(c=R?.data)!==null&&c!==void 0?c:{},channel:(h=R?.channel)!==null&&h!==void 0?h:"sms",gotrue_meta_security:{captcha_token:R?.captchaToken}},xform:Ra})}else throw new Nu("You must provide either an email or phone number and a password");const{data:x,error:v}=f;if(v||!x)return this._returnResult({data:{user:null,session:null},error:v});const C=x.session,w=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:w,session:C},error:null})}catch(f){if(st(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithPassword(n){try{let a;if("email"in n){const{email:f,password:x,options:v}=n;a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:x,gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Ep})}else if("phone"in n){const{phone:f,password:x,options:v}=n;a=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:x,gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Ep})}else throw new Nu("You must provide either an email or phone number and a password");const{data:c,error:h}=a;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c||!c.session||!c.user){const f=new Io;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:h})}catch(a){if(st(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,c,h,f;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=n.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:(f=n.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,c,h,f,x,v,C,w,A,N,R;let T,O;if("message"in n)T=n.message,O=n.signature;else{const{chain:D,wallet:U,statement:H,options:B}=n;let P;if(bs())if(typeof U=="object")P=U;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")P=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=U}const Q=new URL((a=B?.url)!==null&&a!==void 0?a:window.location.href),Z=await P.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=H2(Z[0]);let X=(c=B?.signInWithEthereum)===null||c===void 0?void 0:c.chainId;if(!X){const q=await P.request({method:"eth_chainId"});X=d3(q)}const ee={domain:Q.host,address:Y,statement:H,uri:Q.href,version:"1",chainId:X,nonce:(h=B?.signInWithEthereum)===null||h===void 0?void 0:h.nonce,issuedAt:(x=(f=B?.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&x!==void 0?x:new Date,expirationTime:(v=B?.signInWithEthereum)===null||v===void 0?void 0:v.expirationTime,notBefore:(C=B?.signInWithEthereum)===null||C===void 0?void 0:C.notBefore,requestId:(w=B?.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(A=B?.signInWithEthereum)===null||A===void 0?void 0:A.resources};T=f3(ee),O=await P.request({method:"personal_sign",params:[h3(T),Y]})}try{const{data:D,error:U}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:O},!((N=n.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(R=n.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:Ra});if(U)throw U;if(!D||!D.session||!D.user){const H=new Io;return this._returnResult({data:{user:null,session:null},error:H})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:U})}catch(D){if(st(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async signInWithSolana(n){var a,c,h,f,x,v,C,w,A,N,R,T;let O,D;if("message"in n)O=n.message,D=n.signature;else{const{chain:U,wallet:H,statement:B,options:P}=n;let Q;if(bs())if(typeof H=="object")Q=H;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))Q=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=H}const Z=new URL((a=P?.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in Q&&Q.signIn){const Y=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),B?{statement:B}:null));let X;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")X=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)X=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in X&&"signature"in X&&(typeof X.signedMessage=="string"||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)O=typeof X.signedMessage=="string"?X.signedMessage:new TextDecoder().decode(X.signedMessage),D=X.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${Z.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(h=(c=P?.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date().toISOString()}`,...!((f=P?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((x=P?.signInWithSolana)===null||x===void 0)&&x.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((v=P?.signInWithSolana)===null||v===void 0)&&v.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((C=P?.signInWithSolana)===null||C===void 0)&&C.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((w=P?.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((N=(A=P?.signInWithSolana)===null||A===void 0?void 0:A.resources)===null||N===void 0)&&N.length?["Resources",...P.signInWithSolana.resources.map(X=>`- ${X}`)]:[]].join(`
`);const Y=await Q.signMessage(new TextEncoder().encode(O),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=Y}}try{const{data:U,error:H}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:qi(D)},!((R=n.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(T=n.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Ra});if(H)throw H;if(!U||!U.session||!U.user){const B=new Io;return this._returnResult({data:{user:null,session:null},error:B})}return U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),this._returnResult({data:Object.assign({},U),error:H})}catch(U){if(st(U))return this._returnResult({data:{user:null,session:null},error:U});throw U}}async _exchangeCodeForSession(n){const a=await Li(this.storage,`${this.storageKey}-code-verifier`),[c,h]=(a??"").split("/");try{const{data:f,error:x}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:c},xform:Ra});if(await ai(this.storage,`${this.storageKey}-code-verifier`),x)throw x;if(!f||!f.session||!f.user){const v=new Io;return this._returnResult({data:{user:null,session:null,redirectType:null},error:v})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign(Object.assign({},f),{redirectType:h??null}),error:x})}catch(f){if(st(f))return this._returnResult({data:{user:null,session:null,redirectType:null},error:f});throw f}}async signInWithIdToken(n){try{const{options:a,provider:c,token:h,access_token:f,nonce:x}=n,v=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:h,access_token:f,nonce:x,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Ra}),{data:C,error:w}=v;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!C||!C.session||!C.user){const A=new Io;return this._returnResult({data:{user:null,session:null},error:A})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:C,error:w})}catch(a){if(st(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,c,h,f,x;try{if("email"in n){const{email:v,options:C}=n;let w=null,A=null;this.flowType==="pkce"&&([w,A]=await Oo(this.storage,this.storageKey));const{error:N}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:v,data:(a=C?.data)!==null&&a!==void 0?a:{},create_user:(c=C?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},code_challenge:w,code_challenge_method:A},redirectTo:C?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in n){const{phone:v,options:C}=n,{data:w,error:A}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:v,data:(h=C?.data)!==null&&h!==void 0?h:{},create_user:(f=C?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},channel:(x=C?.channel)!==null&&x!==void 0?x:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w?.message_id},error:A})}throw new Nu("You must provide either an email or phone number.")}catch(v){if(st(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async verifyOtp(n){var a,c;try{let h,f;"options"in n&&(h=(a=n.options)===null||a===void 0?void 0:a.redirectTo,f=(c=n.options)===null||c===void 0?void 0:c.captchaToken);const{data:x,error:v}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:f}}),redirectTo:h,xform:Ra});if(v)throw v;if(!x)throw new Error("An error occurred on token verification.");const C=x.session,w=x.user;return C?.access_token&&(await this._saveSession(C),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",C)),this._returnResult({data:{user:w,session:C},error:null})}catch(h){if(st(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithSSO(n){var a,c,h,f,x;try{let v=null,C=null;this.flowType==="pkce"&&([v,C]=await Oo(this.storage,this.storageKey));const w=await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(c=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&c!==void 0?c:void 0}),!((h=n?.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:v,code_challenge_method:C}),headers:this.headers,xform:a3});return!((f=w.data)===null||f===void 0)&&f.url&&bs()&&!(!((x=n.options)===null||x===void 0)&&x.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(v){if(st(v))return this._returnResult({data:null,error:v});throw v}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:c}=n;if(c)throw c;if(!a)throw new na;const{error:h}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:h})})}catch(n){if(st(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:c,type:h,options:f}=n,{error:x}=await dt(this.fetch,"POST",a,{headers:this.headers,body:{email:c,type:h,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}else if("phone"in n){const{phone:c,type:h,options:f}=n,{data:x,error:v}=await dt(this.fetch,"POST",a,{headers:this.headers,body:{phone:c,type:h,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:x?.message_id},error:v})}throw new Nu("You must provide either an email or phone number and a type")}catch(a){if(st(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),h=(async()=>(await c,await a()))();return this.pendingInLock.push((async()=>{try{await h}catch{}})()),h}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=a();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const h=[...this.pendingInLock];await Promise.all(h),this.pendingInLock.splice(0,h.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await Li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const c=n.expires_at?n.expires_at*1e3-Date.now()<lf:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",n.expires_at),!c){if(this.userStorage){const x=await Li(this.userStorage,this.storageKey+"-user");x?.user?n.user=x.user:n.user=df()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const x={value:this.suppressGetSessionWarning};n.user=e3(n.user,x),x.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:h,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{session:null},error:f}):this._returnResult({data:{session:h},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:li}):await this._useSession(async a=>{var c,h,f;const{data:x,error:v}=a;if(v)throw v;return!(!((c=x.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new na}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(h=x.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0,xform:li})})}catch(a){if(st(a))return OC(a)&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async c=>{const{data:h,error:f}=c;if(f)throw f;if(!h.session)throw new na;const x=h.session;let v=null,C=null;this.flowType==="pkce"&&n.email!=null&&([v,C]=await Oo(this.storage,this.storageKey));const{data:w,error:A}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:v,code_challenge_method:C}),jwt:x.access_token,xform:li});if(A)throw A;return x.user=w.user,await this._saveSession(x),await this._notifyAllSubscribers("USER_UPDATED",x),this._returnResult({data:{user:x.user},error:null})})}catch(c){if(st(c))return this._returnResult({data:{user:null},error:c});throw c}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new na;const a=Date.now()/1e3;let c=a,h=!0,f=null;const{payload:x}=uf(n.access_token);if(x.exp&&(c=x.exp,h=c<=a),h){const{data:v,error:C}=await this._callRefreshToken(n.refresh_token);if(C)return this._returnResult({data:{user:null,session:null},error:C});if(!v)return{data:{user:null,session:null},error:null};f=v}else{const{data:v,error:C}=await this._getUser(n.access_token);if(C)throw C;f={access_token:n.access_token,refresh_token:n.refresh_token,user:v.user,token_type:"bearer",expires_in:c-a,expires_at:c},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return this._returnResult({data:{user:f.user,session:f},error:null})}catch(a){if(st(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var c;if(!n){const{data:x,error:v}=a;if(v)throw v;n=(c=x.session)!==null&&c!==void 0?c:void 0}if(!n?.refresh_token)throw new na;const{data:h,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{user:null,session:null},error:f}):h?this._returnResult({data:{user:h.user,session:h},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(st(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!bs())throw new Tu("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Tu(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new yp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tu("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new yp("No code detected.");const{data:B,error:P}=await this._exchangeCodeForSession(n.code);if(P)throw P;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:h,access_token:f,refresh_token:x,expires_in:v,expires_at:C,token_type:w}=n;if(!f||!v||!x||!w)throw new Tu("No session defined in URL");const A=Math.round(Date.now()/1e3),N=parseInt(v);let R=A+N;C&&(R=parseInt(C));const T=R-A;T*1e3<=Uo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${N}s`);const O=R-N;A-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,R,A):A-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,R,A);const{data:D,error:U}=await this._getUser(f);if(U)throw U;const H={provider_token:c,provider_refresh_token:h,access_token:f,expires_in:N,expires_at:R,refresh_token:x,token_type:w,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:n.type},error:null})}catch(c){if(st(c))return this._returnResult({data:{session:null,redirectType:null},error:c});throw c}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await Li(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var c;const{data:h,error:f}=a;if(f)return this._returnResult({error:f});const x=(c=h.session)===null||c===void 0?void 0:c.access_token;if(x){const{error:v}=await this.admin.signOut(x,n);if(v&&!(IC(v)&&(v.status===404||v.status===401||v.status===403)))return this._returnResult({error:v})}return n!=="others"&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=zC(),c={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:c}}}async _emitInitialSession(n){return await this._useSession(async a=>{var c,h;try{const{data:{session:f},error:x}=a;if(x)throw x;await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",n,"session",f)}catch(f){await((h=this.stateChangeEmitters.get(n))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",f),console.error(f)}})}async resetPasswordForEmail(n,a={}){let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Oo(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:c,code_challenge_method:h,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(f){if(st(f))return this._returnResult({data:null,error:f});throw f}}async getUserIdentities(){var n;try{const{data:a,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:c,error:h}=await this._useSession(async f=>{var x,v,C,w,A;const{data:N,error:R}=f;if(R)throw R;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(x=n.options)===null||x===void 0?void 0:x.redirectTo,scopes:(v=n.options)===null||v===void 0?void 0:v.scopes,queryParams:(C=n.options)===null||C===void 0?void 0:C.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",T,{headers:this.headers,jwt:(A=(w=N.session)===null||w===void 0?void 0:w.access_token)!==null&&A!==void 0?A:void 0})});if(h)throw h;return bs()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c?.url),this._returnResult({data:{provider:n.provider,url:c?.url},error:null})}catch(c){if(st(c))return this._returnResult({data:{provider:n.provider,url:null},error:c});throw c}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var c;try{const{error:h,data:{session:f}}=a;if(h)throw h;const{options:x,provider:v,token:C,access_token:w,nonce:A}=n,N=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(c=f?.access_token)!==null&&c!==void 0?c:void 0,body:{provider:v,id_token:C,access_token:w,nonce:A,link_identity:!0,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Ra}),{data:R,error:T}=N;return T?this._returnResult({data:{user:null,session:null},error:T}):!R||!R.session||!R.user?this._returnResult({data:{user:null,session:null},error:new Io}):(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("USER_UPDATED",R.session)),this._returnResult({data:R,error:T}))}catch(h){if(st(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var c,h;const{data:f,error:x}=a;if(x)throw x;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(h=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const c=Date.now();return await VC(async h=>(h>0&&await qC(200*Math.pow(2,h-1)),this._debug(a,"refreshing attempt",h),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ra})),(h,f)=>{const x=200*Math.pow(2,h);return f&&cf(f)&&Date.now()+x-c<Uo})}catch(c){if(this._debug(a,"error",c),st(c))return this._returnResult({data:{session:null,user:null},error:c});throw c}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const c=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",c),bs()&&!a.skipBrowserRedirect&&window.location.assign(c),{data:{provider:n,url:c},error:null}}async _recoverAndRefresh(){var n,a;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const h=await Li(this.storage,this.storageKey);if(h&&this.userStorage){let x=await Li(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!x&&(x={user:h.user},await Po(this.userStorage,this.storageKey+"-user",x)),h.user=(n=x?.user)!==null&&n!==void 0?n:df()}else if(h&&!h.user&&!h.user){const x=await Li(this.storage,this.storageKey+"-user");x&&x?.user?(h.user=x.user,await ai(this.storage,this.storageKey+"-user"),await Po(this.storage,this.storageKey,h)):h.user=df()}if(this._debug(c,"session from storage",h),!this._isValidSession(h)){this._debug(c,"session is not valid"),h!==null&&await this._removeSession();return}const f=((a=h.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<lf;if(this._debug(c,`session has${f?"":" not"} expired with margin of ${lf}s`),f){if(this.autoRefreshToken&&h.refresh_token){const{error:x}=await this._callRefreshToken(h.refresh_token);x&&(console.error(x),cf(x)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",x),await this._removeSession()))}}else if(h.user&&h.user.__isUserNotAvailableProxy===!0)try{const{data:x,error:v}=await this._getUser(h.access_token);!v&&x?.user?(h.user=x.user,await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(x){console.error("Error getting user data:",x),this._debug(c,"error getting user data, skipping SIGNED_IN notification",x)}else await this._notifyAllSubscribers("SIGNED_IN",h)}catch(h){this._debug(c,"error",h),console.error(h);return}finally{this._debug(c,"end")}}async _callRefreshToken(n){var a,c;if(!n)throw new na;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const h=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(h,"begin");try{this.refreshingDeferred=new Ku;const{data:f,error:x}=await this._refreshAccessToken(n);if(x)throw x;if(!f.session)throw new na;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const v={data:f.session,error:null};return this.refreshingDeferred.resolve(v),v}catch(f){if(this._debug(h,"error",f),st(f)){const x={data:null,error:f};return cf(f)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(x),x}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(f),f}finally{this.refreshingDeferred=null,this._debug(h,"end")}}async _notifyAllSubscribers(n,a,c=!0){const h=`#_notifyAllSubscribers(${n})`;this._debug(h,"begin",a,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:n,session:a});const f=[],x=Array.from(this.stateChangeEmitters.values()).map(async v=>{try{await v.callback(n,a)}catch(C){f.push(C)}});if(await Promise.all(x),f.length>0){for(let v=0;v<f.length;v+=1)console.error(f[v]);throw f[0]}}finally{this._debug(h,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const a=Object.assign({},n),c=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&a.user&&await Po(this.userStorage,this.storageKey+"-user",{user:a.user});const h=Object.assign({},a);delete h.user;const f=_p(h);await Po(this.storage,this.storageKey,f)}else{const h=_p(a);await Po(this.storage,this.storageKey,h)}}async _removeSession(){this._debug("#_removeSession()"),await ai(this.storage,this.storageKey),await ai(this.storage,this.storageKey+"-code-verifier"),await ai(this.storage,this.storageKey+"-user"),this.userStorage&&await ai(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&bs()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Uo);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:c}}=a;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const h=Math.floor((c.expires_at*1e3-n)/Uo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${h} ticks, a tick lasts ${Uo}ms, refresh threshold is ${Jf} ticks`),h<=Jf&&await this._callRefreshToken(c.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof F2)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bs()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,c){const h=[`provider=${encodeURIComponent(a)}`];if(c?.redirectTo&&h.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c?.scopes&&h.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[f,x]=await Oo(this.storage,this.storageKey),v=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(x)}`});h.push(v.toString())}if(c?.queryParams){const f=new URLSearchParams(c.queryParams);h.push(f.toString())}return c?.skipBrowserRedirect&&h.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${n}?${h.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var c;const{data:h,error:f}=a;return f?this._returnResult({data:null,error:f}):await dt(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(c=h?.session)===null||c===void 0?void 0:c.access_token})})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var c,h;const{data:f,error:x}=a;if(x)return this._returnResult({data:null,error:x});const v=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:C,error:w}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:v,headers:this.headers,jwt:(c=f?.session)===null||c===void 0?void 0:c.access_token});return w?this._returnResult({data:null,error:w}):(n.factorType==="totp"&&C.type==="totp"&&(!((h=C?.totp)===null||h===void 0)&&h.qr_code)&&(C.totp.qr_code=`data:image/svg+xml;utf-8,${C.totp.qr_code}`),this._returnResult({data:C,error:null}))})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:h,error:f}=a;if(f)return this._returnResult({data:null,error:f});const x=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?b3(n.webauthn.credential_response):v3(n.webauthn.credential_response)})}:{code:n.code}),{data:v,error:C}=await dt(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:x,headers:this.headers,jwt:(c=h?.session)===null||c===void 0?void 0:c.access_token});return C?this._returnResult({data:null,error:C}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+v.expires_in},v)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",v),this._returnResult({data:v,error:C}))})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var c;const{data:h,error:f}=a;if(f)return this._returnResult({data:null,error:f});const x=await dt(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(c=h?.session)===null||c===void 0?void 0:c.access_token});if(x.error)return x;const{data:v}=x;if(v.type!=="webauthn")return{data:v,error:null};switch(v.webauthn.type){case"create":return{data:Object.assign(Object.assign({},v),{webauthn:Object.assign(Object.assign({},v.webauthn),{credential_options:Object.assign(Object.assign({},v.webauthn.credential_options),{publicKey:y3(v.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},v),{webauthn:Object.assign(Object.assign({},v.webauthn),{credential_options:Object.assign(Object.assign({},v.webauthn.credential_options),{publicKey:w3(v.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:c}=await this._challenge({factorId:n.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:c}=await this.getUser();if(c)return{data:null,error:c};const h={all:[],phone:[],totp:[],webauthn:[]};for(const f of(n=a?.factors)!==null&&n!==void 0?n:[])h.all.push(f),f.status==="verified"&&h[f.factor_type].push(f);return{data:h,error:null}}async _getAuthenticatorAssuranceLevel(){var n,a;const{data:{session:c},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=uf(c.access_token);let x=null;f.aal&&(x=f.aal);let v=x;((a=(n=c.user.factors)===null||n===void 0?void 0:n.filter(A=>A.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(v="aal2");const w=f.amr||[];return{data:{currentLevel:x,nextLevel:v,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:c},error:h}=a;return h?this._returnResult({data:null,error:h}):c?await dt(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:c.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new na})})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async c=>{const{data:{session:h},error:f}=c;if(f)return this._returnResult({data:null,error:f});if(!h)return this._returnResult({data:null,error:new na});const x=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"approve"},xform:v=>({data:v,error:null})});return x.data&&x.data.redirect_url&&bs()&&!a?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(c){if(st(c))return this._returnResult({data:null,error:c});throw c}}async _denyAuthorization(n,a){try{return await this._useSession(async c=>{const{data:{session:h},error:f}=c;if(f)return this._returnResult({data:null,error:f});if(!h)return this._returnResult({data:null,error:new na});const x=await dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"deny"},xform:v=>({data:v,error:null})});return x.data&&x.data.redirect_url&&bs()&&!a?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(c){if(st(c))return this._returnResult({data:null,error:c});throw c}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:c}=n;return c?this._returnResult({data:null,error:c}):a?await dt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new na})})}catch(n){if(st(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:c},error:h}=a;return h?this._returnResult({data:null,error:h}):c?await dt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:n.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new na})})}catch(a){if(st(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let c=a.keys.find(v=>v.kid===n);if(c)return c;const h=Date.now();if(c=this.jwks.keys.find(v=>v.kid===n),c&&this.jwks_cached_at+jC>h)return c;const{data:f,error:x}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(x)throw x;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=h,c=f.keys.find(v=>v.kid===n),!c)?null:c}async getClaims(n,a={}){try{let c=n;if(!c){const{data:T,error:O}=await this.getSession();if(O||!T.session)return this._returnResult({data:null,error:O});c=T.session.access_token}const{header:h,payload:f,signature:x,raw:{header:v,payload:C}}=uf(c);a?.allowExpired||ZC(f.exp);const w=!h.alg||h.alg.startsWith("HS")||!h.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(h.kid,a?.keys?{keys:a.keys}:a?.jwks);if(!w){const{error:T}=await this.getUser(c);if(T)throw T;return{data:{claims:f,header:h,signature:x},error:null}}const A=$C(h.alg),N=await crypto.subtle.importKey("jwk",w,A,!0,["verify"]);if(!await crypto.subtle.verify(A,N,x,UC(`${v}.${C}`)))throw new n0("Invalid JWT signature");return{data:{claims:f,header:h,signature:x},error:null}}catch(c){if(st(c))return this._returnResult({data:null,error:c});throw c}}}Zl.nextInstanceID={};const R3=Zl;class I3 extends R3{constructor(n){super(n)}}class O3{constructor(n,a,c){var h,f,x;this.supabaseUrl=n,this.supabaseKey=a;const v=SC(n);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",v),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",v),this.storageUrl=new URL("storage/v1",v),this.functionsUrl=new URL("functions/v1",v);const C=`sb-${v.hostname.split(".")[0]}-auth-token`,w={db:pC,realtime:yC,auth:Object.assign(Object.assign({},xC),{storageKey:C}),global:mC},A=_C(c??{},w);this.storageKey=(h=A.auth.storageKey)!==null&&h!==void 0?h:"",this.headers=(f=A.global.headers)!==null&&f!==void 0?f:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(N,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((x=A.auth)!==null&&x!==void 0?x:{},this.headers,A.global.fetch),this.fetch=vC(a,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.accessToken&&this.accessToken().then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new Ev(new URL("rest/v1",v).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new hC(this.storageUrl.href,this.headers,this.fetch,c?.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new vv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,a={},c={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,a,c)}channel(n,a={config:{}}){return this.realtime.channel(n,a)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,a;if(this.accessToken)return await this.accessToken();const{data:c}=await this.auth.getSession();return(a=(n=c.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:a,detectSessionInUrl:c,storage:h,userStorage:f,storageKey:x,flowType:v,lock:C,debug:w,throwOnError:A},N,R){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new I3({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),N),storageKey:x,autoRefreshToken:n,persistSession:a,detectSessionInUrl:c,storage:h,userStorage:f,flowType:v,lock:C,debug:w,throwOnError:A,fetch:R,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Hv(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,c)=>{this._handleTokenChanged(a,"CLIENT",c?.access_token)})}_handleTokenChanged(n,a,c){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==c?(this.changedAccessToken=c,this.realtime.setAuth(c)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const M3=(o,n,a)=>new O3(o,n,a);function k3(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}k3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const D3="https://riekjnqllkrqkmqxmtfu.supabase.co",L3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpZWtqbnFsbGtycWttcXhtdGZ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4ODc3MjQsImV4cCI6MjA3NzQ2MzcyNH0.heQABR_DZFWZ_UIb38Tzdgcy-5z5LSUob0icnqsiiQY",Ot=M3(D3,L3,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),Rp=o=>{if(!o)return null;const n=String(o).trim();if(n==="1"||n==="/1"||n==="null"||n==="undefined"||n==="")return null;const a=parseInt(n);if(!isNaN(a)&&a>=1&&a<=28){const h=[{id:1,path:"assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg"},{id:2,path:"assets/images/dp-options/1691130988954.jpg"},{id:3,path:"assets/images/dp-options/aesthetic-cartoon-funny-dp-for-instagram.webp"},{id:4,path:"assets/images/dp-options/boy-cartoon-dp-with-hoodie.webp"},{id:5,path:"assets/images/dp-options/download (1).jpg"},{id:6,path:"assets/images/dp-options/download.jpg"},{id:7,path:"assets/images/dp-options/funny-profile-picture-wd195eo9rpjy7ax1.jpg"},{id:8,path:"assets/images/dp-options/funny-whatsapp-dp-for-girls.webp"},{id:9,path:"assets/images/dp-options/photo_5230962651624575118_y.jpg"},{id:10,path:"assets/images/dp-options/photo_5230962651624575119_y.jpg"},{id:11,path:"assets/images/dp-options/photo_5230962651624575120_y.jpg"},{id:12,path:"assets/images/dp-options/photo_5230962651624575121_y.jpg"},{id:13,path:"assets/images/dp-options/photo_5230962651624575122_y.jpg"},{id:14,path:"assets/images/dp-options/photo_5230962651624575123_y.jpg"},{id:15,path:"assets/images/dp-options/photo_5230962651624575124_y.jpg"},{id:16,path:"assets/images/dp-options/photo_5230962651624575125_y.jpg"},{id:17,path:"assets/images/dp-options/photo_5230962651624575126_y.jpg"},{id:18,path:"assets/images/dp-options/photo_5230962651624575127_y.jpg"},{id:19,path:"assets/images/dp-options/photo_5235923888607267708_w.jpg"},{id:20,path:"assets/images/dp-options/photo_5235923888607267709_w.jpg"},{id:21,path:"assets/images/dp-options/photo_5235923888607267710_w.jpg"},{id:22,path:"assets/images/dp-options/photo_5235923888607267711_w.jpg"},{id:23,path:"assets/images/dp-options/photo_5235923888607267712_w.jpg"},{id:24,path:"assets/images/dp-options/photo_5235923888607267713_w.jpg"},{id:25,path:"assets/images/dp-options/photo_5235923888607267714_w.jpg"},{id:26,path:"assets/images/dp-options/photo_5235923888607267715_w.jpg"},{id:27,path:"assets/images/dp-options/photo_5235923888607267716_w.jpg"},{id:28,path:"assets/images/dp-options/photo_5235923888607267717_w.jpg"}].find(f=>f.id===a);return h?h.path:null}return n.startsWith("http")||n.startsWith("/assets/")||n.startsWith("assets/"),n},B3=({callData:o,onAccept:n,onReject:a,onClose:c})=>{const[h,f]=M.useState(null),[x,v]=M.useState(!0);M.useEffect(()=>{C()},[]);const C=async()=>{try{const{data:N,error:R}=await Ot.from("users").select("*").eq("id",o.caller_id).single();if(R)throw R;f(N)}catch(N){console.error("Error loading caller info:",N)}},w=()=>{v(!1),n(o)},A=()=>{v(!1),a(o.id)};return h?i.jsx("div",{className:"incoming-call-overlay",children:i.jsxs("div",{className:"incoming-call",children:[i.jsxs("div",{className:"caller-info",children:[i.jsx("div",{className:"caller-avatar",children:i.jsx("div",{className:"avatar-circle-large",children:Rp(h.avatar)?i.jsx("img",{src:Rp(h.avatar),alt:h.name}):h.name.split(" ").map(N=>N[0]).join("").toUpperCase().slice(0,2)})}),i.jsx("h3",{children:h.name}),i.jsx("p",{className:"call-type",children:o.call_type==="video"?" Video call":" Voice call"}),i.jsx("p",{className:"ringing-text",children:"is calling..."})]}),i.jsxs("div",{className:"call-actions",children:[i.jsxs("button",{className:"reject-btn",onClick:A,disabled:!x,children:[i.jsx("i",{className:"fas fa-phone-slash"}),i.jsx("span",{children:"Decline"})]}),i.jsxs("button",{className:"accept-btn",onClick:w,disabled:!x,children:[i.jsx("i",{className:"fas fa-phone"}),i.jsx("span",{children:"Accept"})]})]})]})}):i.jsx("div",{className:"incoming-call-overlay",children:i.jsx("div",{className:"incoming-call",children:i.jsx("p",{children:"Loading caller info..."})})})},V2=M.createContext(),U3=({children:o})=>{const[n,a]=M.useState(null),[c,h]=M.useState(null),[f,x]=M.useState(!0),[v,C]=M.useState(!1),[w,A]=M.useState(null),[N,R]=M.useState(null);M.useEffect(()=>{(async()=>{const{data:{session:P},error:Q}=await Ot.auth.getSession();Q?console.error("Error getting session:",Q):(h(P),a(P?.user??null)),x(!1)})();const{data:{subscription:B}}=Ot.auth.onAuthStateChange(async(P,Q)=>{if(console.log("Auth state changed:",P,Q),h(Q),a(Q?.user??null),x(!1),Q?.user){const Z={id:Q.user.id,name:Q.user.user_metadata?.name||"User",email:Q.user.email,phone:Q.user.user_metadata?.phone||"",avatar:Q.user.user_metadata?.avatar||null};localStorage.setItem("currentUser",JSON.stringify(Z)),localStorage.setItem("authType","google")}else localStorage.removeItem("currentUser"),localStorage.removeItem("authType")});return()=>B.unsubscribe()},[]),M.useEffect(()=>{const H=B=>{if(B.key==="currentUser"||B.key==="authType"){const P=localStorage.getItem("currentUser");if(P)try{const Q=JSON.parse(P);a(Q),C(!0)}catch(Q){console.error("Error parsing user data:",Q),a(null),C(!1)}else a(null),C(!1)}};return window.addEventListener("storage",H),()=>window.removeEventListener("storage",H)},[]),M.useEffect(()=>(n&&!N&&T(),()=>{N&&(Ot.removeChannel(N),R(null))}),[n]);const T=()=>{console.log(" Setting up global incoming call listener for user:",n.id);const H=Ot.channel("global-incoming-calls").on("postgres_changes",{event:"INSERT",schema:"public",table:"call_history",filter:`receiver_id=eq.${n.id}`},B=>{console.log(" Global incoming call event received:",B);const P=B.new;console.log(" Call data:",P),P.call_status==="initiated"&&(console.log(" Showing global incoming call popup for call:",P.id),A(P))}).subscribe(B=>{console.log(" Global incoming call listener status:",B),B==="SUBSCRIBED"&&R(H)})},O=async H=>{console.log(" Accepting call:",H.id),A(null),window.location.href=`#/calls?incoming=true&callId=${H.call_id}&roomId=${H.call_id}&callType=${H.call_type}`},D=async H=>{console.log(" Rejecting call:",H);try{window.WebRTCCall&&await new window.WebRTCCall().rejectCall(H)}catch(B){console.error("Error rejecting call:",B)}A(null)},U={supabase:Ot,user:n,session:c,loading:f,signOut:()=>Ot.auth.signOut()};return i.jsxs(V2.Provider,{value:U,children:[o,w&&i.jsx(B3,{callData:w,onAccept:O,onReject:D,onClose:()=>A(null)})]})},vs=()=>{const o=M.useContext(V2);if(!o)throw new Error("useSupabase must be used within a SupabaseProvider");return o},P3="modulepreload",z3=function(o,n){return new URL(o,n).href},Ip={},T0=function(n,a,c){let h=Promise.resolve();if(a&&a.length>0){let w=function(A){return Promise.all(A.map(N=>Promise.resolve(N).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};const x=document.getElementsByTagName("link"),v=document.querySelector("meta[property=csp-nonce]"),C=v?.nonce||v?.getAttribute("nonce");h=w(a.map(A=>{if(A=z3(A,c),A in Ip)return;Ip[A]=!0;const N=A.endsWith(".css"),R=N?'[rel="stylesheet"]':"";if(c)for(let O=x.length-1;O>=0;O--){const D=x[O];if(D.href===A&&(!N||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${A}"]${R}`))return;const T=document.createElement("link");if(T.rel=N?"stylesheet":P3,N||(T.as="script"),T.crossOrigin="",T.href=A,C&&T.setAttribute("nonce",C),document.head.appendChild(T),N)return new Promise((O,D)=>{T.addEventListener("load",O),T.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${A}`)))})}))}function f(x){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=x,window.dispatchEvent(v),!v.defaultPrevented)throw x}return h.then(x=>{for(const v of x||[])v.status==="rejected"&&f(v.reason);return n().catch(f)})};var qo;(function(o){o.Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE"})(qo||(qo={}));class ff extends Error{constructor(n,a,c){super(n),this.message=n,this.code=a,this.data=c}}const F3=o=>{var n,a;return o?.androidBridge?"android":!((a=(n=o?.webkit)===null||n===void 0?void 0:n.messageHandlers)===null||a===void 0)&&a.bridge?"ios":"web"},H3=o=>{const n=o.CapacitorCustomPlatform||null,a=o.Capacitor||{},c=a.Plugins=a.Plugins||{},h=()=>n!==null?n.name:F3(o),f=()=>h()!=="web",x=N=>{const R=w.get(N);return!!(R?.platforms.has(h())||v(N))},v=N=>{var R;return(R=a.PluginHeaders)===null||R===void 0?void 0:R.find(T=>T.name===N)},C=N=>o.console.error(N),w=new Map,A=(N,R={})=>{const T=w.get(N);if(T)return console.warn(`Capacitor plugin "${N}" already registered. Cannot register plugins twice.`),T.proxy;const O=h(),D=v(N);let U;const H=async()=>(!U&&O in R?U=typeof R[O]=="function"?U=await R[O]():U=R[O]:n!==null&&!U&&"web"in R&&(U=typeof R.web=="function"?U=await R.web():U=R.web),U),B=(ee,q)=>{var xe,we;if(D){const me=D?.methods.find(Ce=>q===Ce.name);if(me)return me.rtype==="promise"?Ce=>a.nativePromise(N,q.toString(),Ce):(Ce,Oe)=>a.nativeCallback(N,q.toString(),Ce,Oe);if(ee)return(xe=ee[q])===null||xe===void 0?void 0:xe.bind(ee)}else{if(ee)return(we=ee[q])===null||we===void 0?void 0:we.bind(ee);throw new ff(`"${N}" plugin is not implemented on ${O}`,qo.Unimplemented)}},P=ee=>{let q;const xe=(...we)=>{const me=H().then(Ce=>{const Oe=B(Ce,ee);if(Oe){const V=Oe(...we);return q=V?.remove,V}else throw new ff(`"${N}.${ee}()" is not implemented on ${O}`,qo.Unimplemented)});return ee==="addListener"&&(me.remove=async()=>q()),me};return xe.toString=()=>`${ee.toString()}() { [capacitor code] }`,Object.defineProperty(xe,"name",{value:ee,writable:!1,configurable:!1}),xe},Q=P("addListener"),Z=P("removeListener"),Y=(ee,q)=>{const xe=Q({eventName:ee},q),we=async()=>{const Ce=await xe;Z({eventName:ee,callbackId:Ce},q)},me=new Promise(Ce=>xe.then(()=>Ce({remove:we})));return me.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await we()},me},X=new Proxy({},{get(ee,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return D?Y:Q;case"removeListener":return Z;default:return P(q)}}});return c[N]=X,w.set(N,{name:N,proxy:X,platforms:new Set([...Object.keys(R),...D?[O]:[]])}),X};return a.convertFileSrc||(a.convertFileSrc=N=>N),a.getPlatform=h,a.handleError=C,a.isNativePlatform=f,a.isPluginAvailable=x,a.registerPlugin=A,a.Exception=ff,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a},q3=o=>o.Capacitor=H3(o),s0=q3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),nc=s0.registerPlugin;class j0{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(n,a){let c=!1;this.listeners[n]||(this.listeners[n]=[],c=!0),this.listeners[n].push(a);const f=this.windowListeners[n];f&&!f.registered&&this.addWindowListener(f),c&&this.sendRetainedArgumentsForEvent(n);const x=async()=>this.removeListener(n,a);return Promise.resolve({remove:x})}async removeAllListeners(){this.listeners={};for(const n in this.windowListeners)this.removeWindowListener(this.windowListeners[n]);this.windowListeners={}}notifyListeners(n,a,c){const h=this.listeners[n];if(!h){if(c){let f=this.retainedEventArguments[n];f||(f=[]),f.push(a),this.retainedEventArguments[n]=f}return}h.forEach(f=>f(a))}hasListeners(n){var a;return!!(!((a=this.listeners[n])===null||a===void 0)&&a.length)}registerWindowListener(n,a){this.windowListeners[a]={registered:!1,windowEventName:n,pluginEventName:a,handler:c=>{this.notifyListeners(a,c)}}}unimplemented(n="not implemented"){return new s0.Exception(n,qo.Unimplemented)}unavailable(n="not available"){return new s0.Exception(n,qo.Unavailable)}async removeListener(n,a){const c=this.listeners[n];if(!c)return;const h=c.indexOf(a);this.listeners[n].splice(h,1),this.listeners[n].length||this.removeWindowListener(this.windowListeners[n])}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}sendRetainedArgumentsForEvent(n){const a=this.retainedEventArguments[n];a&&(delete this.retainedEventArguments[n],a.forEach(c=>{this.notifyListeners(n,c)}))}}const Op=o=>encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Mp=o=>o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class V3 extends j0{async getCookies(){const n=document.cookie,a={};return n.split(";").forEach(c=>{if(c.length<=0)return;let[h,f]=c.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");h=Mp(h).trim(),f=Mp(f).trim(),a[h]=f}),a}async setCookie(n){try{const a=Op(n.key),c=Op(n.value),h=`; expires=${(n.expires||"").replace("expires=","")}`,f=(n.path||"/").replace("path=",""),x=n.url!=null&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${a}=${c||""}${h}; path=${f}; ${x};`}catch(a){return Promise.reject(a)}}async deleteCookie(n){try{document.cookie=`${n.key}=; Max-Age=0`}catch(a){return Promise.reject(a)}}async clearCookies(){try{const n=document.cookie.split(";")||[];for(const a of n)document.cookie=a.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(n){return Promise.reject(n)}}async clearAllCookies(){try{await this.clearCookies()}catch(n){return Promise.reject(n)}}}nc("CapacitorCookies",{web:()=>new V3});const G3=async o=>new Promise((n,a)=>{const c=new FileReader;c.onload=()=>{const h=c.result;n(h.indexOf(",")>=0?h.split(",")[1]:h)},c.onerror=h=>a(h),c.readAsDataURL(o)}),Y3=(o={})=>{const n=Object.keys(o);return Object.keys(o).map(h=>h.toLocaleLowerCase()).reduce((h,f,x)=>(h[f]=o[n[x]],h),{})},X3=(o,n=!0)=>o?Object.entries(o).reduce((c,h)=>{const[f,x]=h;let v,C;return Array.isArray(x)?(C="",x.forEach(w=>{v=n?encodeURIComponent(w):w,C+=`${f}=${v}&`}),C.slice(0,-1)):(v=n?encodeURIComponent(x):x,C=`${f}=${v}`),`${c}&${C}`},"").substr(1):null,W3=(o,n={})=>{const a=Object.assign({method:o.method||"GET",headers:o.headers},n),h=Y3(o.headers)["content-type"]||"";if(typeof o.data=="string")a.body=o.data;else if(h.includes("application/x-www-form-urlencoded")){const f=new URLSearchParams;for(const[x,v]of Object.entries(o.data||{}))f.set(x,v);a.body=f.toString()}else if(h.includes("multipart/form-data")||o.data instanceof FormData){const f=new FormData;if(o.data instanceof FormData)o.data.forEach((v,C)=>{f.append(C,v)});else for(const v of Object.keys(o.data))f.append(v,o.data[v]);a.body=f;const x=new Headers(a.headers);x.delete("content-type"),a.headers=x}else(h.includes("application/json")||typeof o.data=="object")&&(a.body=JSON.stringify(o.data));return a};class Q3 extends j0{async request(n){const a=W3(n,n.webFetchExtra),c=X3(n.params,n.shouldEncodeUrlParams),h=c?`${n.url}?${c}`:n.url,f=await fetch(h,a),x=f.headers.get("content-type")||"";let{responseType:v="text"}=f.ok?n:{};x.includes("application/json")&&(v="json");let C,w;switch(v){case"arraybuffer":case"blob":w=await f.blob(),C=await G3(w);break;case"json":C=await f.json();break;case"document":case"text":default:C=await f.text()}const A={};return f.headers.forEach((N,R)=>{A[R]=N}),{data:C,headers:A,status:f.status,url:f.url}}async get(n){return this.request(Object.assign(Object.assign({},n),{method:"GET"}))}async post(n){return this.request(Object.assign(Object.assign({},n),{method:"POST"}))}async put(n){return this.request(Object.assign(Object.assign({},n),{method:"PUT"}))}async patch(n){return this.request(Object.assign(Object.assign({},n),{method:"PATCH"}))}async delete(n){return this.request(Object.assign(Object.assign({},n),{method:"DELETE"}))}}nc("CapacitorHttp",{web:()=>new Q3});var kp;(function(o){o.Dark="DARK",o.Light="LIGHT",o.Default="DEFAULT"})(kp||(kp={}));var Dp;(function(o){o.StatusBar="StatusBar",o.NavigationBar="NavigationBar"})(Dp||(Dp={}));class K3 extends j0{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}nc("SystemBars",{web:()=>new K3});const Lp=nc("GoogleAuth",{web:()=>T0(()=>import("./web-CgzyzNG8.js"),[],import.meta.url).then(o=>new o.GoogleAuthWeb)}),G2=M.createContext({}),Z3=({children:o})=>{const{supabase:n}=vs(),a=us(),[c,h]=M.useState(null),[f,x]=M.useState(null),[v,C]=M.useState(!0),[w,A]=M.useState(!1);M.useEffect(()=>{if(!n)return;(async()=>{try{await Lp.initialize({clientId:"335571630396-o3vavu8bpc75vht2lgl0tsdfvp3sp5tq.apps.googleusercontent.com",scopes:["profile","email"],grantOfflineAccess:!0});const U=sessionStorage.getItem("_auth_user");if(U){const P=JSON.parse(U);x(P),A(!0),C(!1);return}const{data:{subscription:H}}=n.auth.onAuthStateChange(async(P,Q)=>{if(console.log(" Auth state changed:",P),P==="SIGNED_IN"&&Q?.user)try{const{data:Z,error:Y}=await n.from("users").select("*").eq("email",Q.user.email).single();let X;if(Y&&Y.code==="PGRST116"){const ee={id:Q.user.id,email:Q.user.email,name:Q.user.user_metadata?.full_name||Q.user.user_metadata?.name||Q.user.email.split("@")[0],phone:"",avatar:Q.user.user_metadata?.avatar_url||null,is_online:!0},{data:q,error:xe}=await n.from("users").insert([ee]).select().single();if(xe)throw console.error("Insert error:",xe),new Error("Failed to create user account");X=q}else if(Z)await n.from("users").update({is_online:!0,last_seen:new Date().toISOString()}).eq("id",Z.id),X=Z;else throw new Error("Database error occurred");sessionStorage.setItem("_auth_user",JSON.stringify(X)),x(X),A(!0),a("/",{replace:!0})}catch(Z){console.error("User creation/update error:",Z);const Y={id:Q.user.id,email:Q.user.email,name:Q.user.user_metadata?.full_name||Q.user.user_metadata?.name||Q.user.email.split("@")[0],phone:"",avatar:Q.user.user_metadata?.avatar_url||null,is_online:!0};x(Y),A(!0),a("/",{replace:!0})}else P==="SIGNED_OUT"&&(sessionStorage.removeItem("_auth_user"),x(null),A(!1),a("/login",{replace:!0}));C(!1)}),{data:{session:B}}=await n.auth.getSession();if(B?.user){const P={id:B.user.id,email:B.user.email,name:B.user.user_metadata?.full_name||B.user.user_metadata?.name||B.user.email.split("@")[0],phone:"",avatar:B.user.user_metadata?.avatar_url||null,is_online:!0};x(P),A(!0),a("/",{replace:!0})}return C(!1),()=>{H?.unsubscribe()}}catch(U){console.error("Auth context initialization error:",U),C(!1)}})()},[n]);const N=async()=>{try{if(window.Capacitor&&window.Capacitor.isNativePlatform()){const D=await Lp.signIn(),{data:U,error:H}=await n.auth.signInWithIdToken({provider:"google",token:D.authentication.idToken});return H?{success:!1,error:H.message}:{success:!0}}else{const{data:D,error:U}=await n.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/`}});return U?{success:!1,error:U.message}:{success:!0}}}catch(D){return{success:!1,error:D.message}}},O={user:f,loading:v,isAuthenticated:w,signInWithPhone:(D,U)=>c?.authenticateWithPhone(D,U),signUpWithPhone:(D,U,H,B)=>c?.signUpWithPhone(D,U,H,B),signInWithGoogle:N,signUpWithGoogle:async()=>N(),signOut:async()=>{try{sessionStorage.removeItem("_auth_user"),await n.auth.signOut(),c&&c.signOut(),x(null),A(!1),a("/login",{replace:!0})}catch(D){console.error("Sign out error:",D)}}};return i.jsx(G2.Provider,{value:O,children:o})},$3=()=>{const o=M.useContext(G2);if(!o)throw new Error("useAuth must be used within an AuthProvider");return o},La=()=>$3();class J3{async createCall(n,a,c,h="video"){const{data:f,error:x}=await Ot.from("call_history").insert({caller_id:n,receiver_id:a,call_id:c,call_type:h,call_status:"initiated",started_at:new Date().toISOString()}).select().single();if(x)throw x;return f}async updateCallStatus(n,a,c={}){const h={call_status:a,updated_at:new Date().toISOString(),...c};a==="answered"&&(h.answered_at=new Date().toISOString()),["ended","missed","rejected","failed"].includes(a)&&(h.ended_at=new Date().toISOString());const{data:f,error:x}=await Ot.from("call_history").update(h).eq("call_id",n).select().single();if(x)throw x;return f}async endCall(n,a){const{data:c,error:h}=await Ot.from("call_history").update({call_status:"ended",call_duration:a,ended_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("call_id",n).select().single();if(h)throw h;return c}async getCallHistory(n,a=50){const{data:c,error:h}=await Ot.rpc("get_user_call_history",{user_id_param:n,limit_count:a});if(h)throw h;return c}async getMissedCallsCount(n){const{data:a,error:c}=await Ot.rpc("get_missed_calls_count",{user_uuid:n});if(c)throw c;return a}async getCallById(n){const{data:a,error:c}=await Ot.from("call_history").select("*").eq("call_id",n).single();if(c&&c.code!=="PGRST116")throw c;return a}async sendSignal(n,a,c,h,f){const{data:x,error:v}=await Ot.from("call_signaling").insert({call_id:n,from_user_id:a,to_user_id:c,signal_type:h,signal_data:f,is_processed:!1}).select().single();if(v)throw v;return x}async getPendingSignals(n){const{data:a,error:c}=await Ot.from("call_signaling").select("*").eq("to_user_id",n).eq("is_processed",!1).order("created_at",{ascending:!0});if(c)throw c;return a}async markSignalProcessed(n){const{error:a}=await Ot.from("call_signaling").update({is_processed:!0}).eq("id",n);if(a)throw a}async deleteCallSignals(n){const{error:a}=await Ot.from("call_signaling").delete().eq("call_id",n);if(a)throw a}subscribeToSignals(n,a){return Ot.channel(`signals:${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"call_signaling",filter:`to_user_id=eq.${n}`},h=>{console.log(" New signal received:",h.new),a(h.new)}).subscribe()}subscribeToCallHistory(n,a){return Ot.channel(`calls:${n}`).on("postgres_changes",{event:"*",schema:"public",table:"call_history",filter:`receiver_id=eq.${n}`},h=>{console.log(" Call update:",h),a(h)}).subscribe()}unsubscribe(n){n&&Ot.removeChannel(n)}async getCallSettings(n){const{data:a,error:c}=await Ot.from("user_call_settings").select("*").eq("user_id",n).single();if(c&&c.code!=="PGRST116")throw c;return a}async updateCallSettings(n,a){const{data:c,error:h}=await Ot.from("user_call_settings").upsert({user_id:n,...a,updated_at:new Date().toISOString()}).select().single();if(h)throw h;return c}async getUserById(n){const{data:a,error:c}=await Ot.from("users").select("id, name, phone, avatar").eq("id",n).single();if(c)throw c;return a}}const ls=new J3;class e_{constructor(){this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.callId=null,this.currentUserId=null,this.remoteUserId=null,this.onRemoteStream=null,this.onCallEnd=null,this.onConnectionStateChange=null,this.iceCandidatesQueue=[],this.loadTurnConfig()}loadTurnConfig(){try{if(window.FREE_TURN_SERVERS){this.rtcConfig=window.FREE_TURN_SERVERS,console.log(" Loaded TURN servers from global config");return}this.rtcConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:a.relay.metered.ca:80",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"turn:a.relay.metered.ca:80?transport=tcp",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"turn:a.relay.metered.ca:443",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"turn:a.relay.metered.ca:443?transport=tcp",username:"df4e050fc5de5dc26b25b85a",credential:"Pxdp2PK0b5ZXljOm"},{urls:"stun:global.stun.twilio.com:3478"},{urls:"stun:stun.services.mozilla.com"},{urls:"stun:stun.ekiga.net"}],iceCandidatePoolSize:10},console.log(" Loaded fallback TURN/STUN configuration")}catch(n){console.error(" Error loading TURN config:",n),this.rtcConfig={iceServers:[{urls:"stun:stun.l.google.com:19302"}]}}}generateCallId(){return`call_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async getLocalStream(n=!0,a=!0){try{const c={audio:a?{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}:!1,video:n?{width:{ideal:1280},height:{ideal:720},facingMode:"user"}:!1};return this.localStream=await navigator.mediaDevices.getUserMedia(c),console.log(" Local stream acquired"),this.localStream}catch(c){throw console.error(" Error getting local stream:",c),c}}initializePeerConnection(){return this.peerConnection&&this.peerConnection.close(),this.peerConnection=new RTCPeerConnection(this.rtcConfig),this.remoteStream=new MediaStream,this.localStream&&this.localStream.getTracks().forEach(n=>{this.peerConnection.addTrack(n,this.localStream)}),this.peerConnection.ontrack=n=>{console.log(" Remote track received"),n.streams[0].getTracks().forEach(a=>{this.remoteStream.addTrack(a)}),this.onRemoteStream&&this.onRemoteStream(this.remoteStream)},this.peerConnection.onicecandidate=async n=>{n.candidate&&(console.log(" ICE candidate generated"),await this.sendIceCandidate(n.candidate))},this.peerConnection.onconnectionstatechange=()=>{console.log(" Connection state:",this.peerConnection.connectionState),this.onConnectionStateChange&&this.onConnectionStateChange(this.peerConnection.connectionState),["disconnected","failed","closed"].includes(this.peerConnection.connectionState)&&this.onCallEnd&&this.onCallEnd("connection_failed")},this.peerConnection.oniceconnectionstatechange=()=>{console.log(" ICE connection state:",this.peerConnection.iceConnectionState)},this.peerConnection}async startCall(n,a,c="video"){try{this.currentUserId=n,this.remoteUserId=a,this.callId=this.generateCallId(),console.log(" Starting call:",this.callId,"from:",n,"to:",a),await this.getLocalStream(c==="video",!0),this.initializePeerConnection(),await ls.createCall(n,a,this.callId,c);const h=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:c==="video"});return await this.peerConnection.setLocalDescription(h),await ls.sendSignal(this.callId,n,a,"offer",{sdp:h.sdp,type:h.type,callType:c}),console.log(" Offer sent for call:",this.callId),{callId:this.callId,localStream:this.localStream}}catch(h){throw console.error(" Error starting call:",h),this.cleanup(),h}}async answerCall(n,a,c,h){try{this.callId=n,this.currentUserId=c,this.remoteUserId=a,console.log(" Answering call:",n,"from:",a,"to:",c);const f=h.callType||"video";await this.getLocalStream(f==="video",!0),this.initializePeerConnection(),await this.peerConnection.setRemoteDescription(new RTCSessionDescription({type:h.type,sdp:h.sdp})),await this.processQueuedIceCandidates();const x=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(x),await ls.sendSignal(n,c,a,"answer",{sdp:x.sdp,type:x.type}),await ls.updateCallStatus(n,"answered"),console.log(" Answer sent for call:",n),{localStream:this.localStream,remoteStream:this.remoteStream}}catch(f){throw console.error(" Error answering call:",f),this.cleanup(),f}}async handleAnswer(n){try{if(!this.peerConnection){console.error("No peer connection");return}console.log(" Processing answer"),await this.peerConnection.setRemoteDescription(new RTCSessionDescription({type:n.type,sdp:n.sdp})),await this.processQueuedIceCandidates(),await ls.updateCallStatus(this.callId,"answered")}catch(a){throw console.error(" Error handling answer:",a),a}}async sendIceCandidate(n){try{await ls.sendSignal(this.callId,this.currentUserId,this.remoteUserId,"ice_candidate",{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex})}catch(a){console.error(" Error sending ICE candidate:",a)}}async handleIceCandidate(n){try{const a=new RTCIceCandidate({candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex});this.peerConnection&&this.peerConnection.remoteDescription?(await this.peerConnection.addIceCandidate(a),console.log(" ICE candidate added")):(this.iceCandidatesQueue.push(a),console.log(" ICE candidate queued"))}catch(a){console.error(" Error handling ICE candidate:",a)}}async processQueuedIceCandidates(){for(;this.iceCandidatesQueue.length>0;){const n=this.iceCandidatesQueue.shift();try{await this.peerConnection.addIceCandidate(n),console.log(" Queued ICE candidate added")}catch(a){console.error(" Error adding queued candidate:",a)}}}async rejectCall(n,a,c){try{await ls.sendSignal(n,a,c,"call_end",{reason:"rejected"}),await ls.updateCallStatus(n,"rejected")}catch(h){console.error(" Error rejecting call:",h)}}async endCall(n=0){try{this.callId&&this.remoteUserId&&(await ls.sendSignal(this.callId,this.currentUserId,this.remoteUserId,"call_end",{reason:"ended",duration:n}),await ls.endCall(this.callId,n)),this.cleanup()}catch(a){console.error(" Error ending call:",a),this.cleanup()}}toggleMicrophone(){if(this.localStream){const n=this.localStream.getAudioTracks()[0];if(n)return n.enabled=!n.enabled,n.enabled}return!1}toggleCamera(){if(this.localStream){const n=this.localStream.getVideoTracks()[0];if(n)return n.enabled=!n.enabled,n.enabled}return!1}async switchCamera(){if(this.localStream){const n=this.localStream.getVideoTracks()[0];if(n){const c=n.getSettings().facingMode==="user"?"environment":"user";try{const f=(await navigator.mediaDevices.getUserMedia({video:{facingMode:c}})).getVideoTracks()[0],x=this.peerConnection?.getSenders().find(v=>v.track?.kind==="video");return x&&await x.replaceTrack(f),n.stop(),this.localStream.removeTrack(n),this.localStream.addTrack(f),this.localStream}catch(h){console.error(" Error switching camera:",h)}}}return null}cleanup(){console.log(" Cleaning up WebRTC resources"),this.localStream&&(this.localStream.getTracks().forEach(n=>n.stop()),this.localStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.remoteStream=null,this.callId=null,this.remoteUserId=null,this.iceCandidatesQueue=[]}async handleSignal(n){const{signal_type:a,signal_data:c,call_id:h,from_user_id:f}=n;if(console.log(" Handling signal:",a,"for call:",h),h&&this.callId&&h!==this.callId){console.log(" Ignoring signal for different call:",h,"current:",this.callId);return}switch(a){case"offer":return{type:"incoming_call",data:n};case"answer":console.log(" Processing answer for call:",h),await this.handleAnswer(c);break;case"ice_candidate":console.log(" Processing ICE candidate"),await this.handleIceCandidate(c);break;case"call_end":console.log(" Call ended with reason:",c.reason),this.onCallEnd&&this.onCallEnd(c.reason),this.cleanup();break;case"busy":this.onCallEnd&&this.onCallEnd("busy"),this.cleanup();break;case"ringing":console.log(" Ringing signal received");break;default:console.warn("Unknown signal type:",a)}}}const wa=new e_,Y2=M.createContext(null),Bt={SET_CALL_STATE:"SET_CALL_STATE",SET_LOCAL_STREAM:"SET_LOCAL_STREAM",SET_REMOTE_STREAM:"SET_REMOTE_STREAM",SET_INCOMING_CALL:"SET_INCOMING_CALL",SET_CALL_DURATION:"SET_CALL_DURATION",TOGGLE_MUTE:"TOGGLE_MUTE",TOGGLE_VIDEO:"TOGGLE_VIDEO",TOGGLE_SPEAKER:"TOGGLE_SPEAKER",RESET_CALL:"RESET_CALL",SET_ERROR:"SET_ERROR",SET_CALLER_INFO:"SET_CALLER_INFO"},X2={callState:"idle",callType:null,callId:null,localStream:null,remoteStream:null,incomingCall:null,callerInfo:null,receiverInfo:null,isMuted:!1,isVideoOff:!1,isSpeakerOn:!0,callDuration:0,error:null};function t_(o,n){switch(n.type){case Bt.SET_CALL_STATE:return{...o,callState:n.payload.state,...n.payload.data};case Bt.SET_LOCAL_STREAM:return{...o,localStream:n.payload};case Bt.SET_REMOTE_STREAM:return{...o,remoteStream:n.payload};case Bt.SET_INCOMING_CALL:return{...o,incomingCall:n.payload,callState:"ringing"};case Bt.SET_CALL_DURATION:return{...o,callDuration:n.payload};case Bt.TOGGLE_MUTE:return{...o,isMuted:n.payload};case Bt.TOGGLE_VIDEO:return{...o,isVideoOff:n.payload};case Bt.TOGGLE_SPEAKER:return{...o,isSpeakerOn:n.payload};case Bt.SET_CALLER_INFO:return{...o,callerInfo:n.payload};case Bt.SET_ERROR:return{...o,error:n.payload};case Bt.RESET_CALL:return{...X2};default:return o}}function n_({children:o,currentUser:n}){const[a,c]=M.useReducer(t_,X2),h=M.useRef(null),f=M.useRef(null),x=M.useRef(null),v=M.useCallback(()=>{x.current=Date.now(),f.current=setInterval(()=>{const B=Math.floor((Date.now()-x.current)/1e3);c({type:Bt.SET_CALL_DURATION,payload:B})},1e3)},[]),C=M.useCallback(()=>{f.current&&(clearInterval(f.current),f.current=null)},[]),w=M.useCallback(async B=>{if(console.log(" Signal received in context:",B.signal_type,"Call ID:",B.call_id),B.signal_type==="offer")try{const P=await ls.getUserById(B.from_user_id);c({type:Bt.SET_INCOMING_CALL,payload:{...B,callerInfo:P}}),c({type:Bt.SET_CALLER_INFO,payload:P})}catch(P){console.error("Error fetching caller info:",P)}else try{const P=await wa.handleSignal(B);await ls.markSignalProcessed(B.id),B.signal_type==="answer"&&wa.callId===B.call_id&&console.log(" Answer received, call should connect now")}catch(P){console.error("Error handling signal:",P)}},[]);M.useEffect(()=>{wa.onRemoteStream=B=>{console.log(" Remote stream received in context"),c({type:Bt.SET_REMOTE_STREAM,payload:B})},wa.onCallEnd=B=>{console.log(" Call ended:",B),C(),c({type:Bt.RESET_CALL})},wa.onConnectionStateChange=B=>{B==="connected"&&(v(),c({type:Bt.SET_CALL_STATE,payload:{state:"connected"}}))}},[v,C]),M.useEffect(()=>{if(n?.id){if(n.id.startsWith("phone_")){console.log(" Skipping signal subscription for phone user:",n.id);return}return console.log(" Setting up signal subscription for:",n.id),h.current=ls.subscribeToSignals(n.id,w),()=>{h.current&&ls.unsubscribe(h.current)}}},[n?.id,w]);const A=M.useCallback(async(B,P="video")=>{try{c({type:Bt.SET_CALL_STATE,payload:{state:"calling",data:{callType:P}}});const Q=await ls.getUserById(B);c({type:Bt.SET_CALL_STATE,payload:{state:"calling",data:{receiverInfo:Q}}});const{callId:Z,localStream:Y}=await wa.startCall(n.id,B,P);return c({type:Bt.SET_LOCAL_STREAM,payload:Y}),c({type:Bt.SET_CALL_STATE,payload:{state:"calling",data:{callId:Z}}}),{callId:Z,localStream:Y}}catch(Q){throw console.error(" Error starting call:",Q),c({type:Bt.SET_ERROR,payload:Q.message}),c({type:Bt.RESET_CALL}),Q}},[n?.id]),N=M.useCallback(async()=>{try{const{incomingCall:B}=a;if(!B)throw new Error("No incoming call to answer");c({type:Bt.SET_CALL_STATE,payload:{state:"connecting"}});const{localStream:P,remoteStream:Q}=await wa.answerCall(B.call_id,B.from_user_id,n.id,B.signal_data);c({type:Bt.SET_LOCAL_STREAM,payload:P}),c({type:Bt.SET_REMOTE_STREAM,payload:Q}),c({type:Bt.SET_CALL_STATE,payload:{state:"connected",data:{callId:B.call_id,callType:B.signal_data.callType}}}),await ls.markSignalProcessed(B.id),v()}catch(B){throw console.error(" Error answering call:",B),c({type:Bt.SET_ERROR,payload:B.message}),c({type:Bt.RESET_CALL}),B}},[a,n?.id,v]),R=M.useCallback(async()=>{try{const{incomingCall:B}=a;B&&(await wa.rejectCall(B.call_id,n.id,B.from_user_id),await ls.markSignalProcessed(B.id)),c({type:Bt.RESET_CALL})}catch(B){console.error(" Error rejecting call:",B),c({type:Bt.RESET_CALL})}},[a,n?.id]),T=M.useCallback(async()=>{try{C(),await wa.endCall(a.callDuration),c({type:Bt.RESET_CALL})}catch(B){console.error(" Error ending call:",B),c({type:Bt.RESET_CALL})}},[a.callDuration,C]),O=M.useCallback(()=>{const B=!wa.toggleMicrophone();return c({type:Bt.TOGGLE_MUTE,payload:B}),B},[]),D=M.useCallback(()=>{const B=!wa.toggleCamera();return c({type:Bt.TOGGLE_VIDEO,payload:B}),B},[]),U=M.useCallback(async()=>{const B=await wa.switchCamera();B&&c({type:Bt.SET_LOCAL_STREAM,payload:B})},[]),H={...a,startCall:A,answerCall:N,rejectCall:R,endCall:T,toggleMute:O,toggleVideo:D,switchCamera:U};return i.jsx(Y2.Provider,{value:H,children:o})}function di(){const o=M.useContext(Y2);if(!o)throw new Error("useCall must be used within a CallProvider");return o}const s_=()=>{const{signInWithGoogle:o}=La(),[n,a]=M.useState(!1),[c,h]=M.useState(""),[f,x]=M.useState(!1);M.useEffect(()=>{x(!0)},[]);const v=async()=>{try{a(!0),h("");const C=await o();C.success||h(C.error||"Google sign in failed")}catch{h("An error occurred. Please try again.")}finally{a(!1)}};return i.jsxs("div",{className:"auth-page",children:[i.jsxs("div",{className:`auth-container ${f?"visible":""}`,children:[i.jsxs("div",{className:"app-logo",children:[i.jsx("div",{className:"logo-icon",style:{animation:"bounce 2s infinite"},children:""}),i.jsx("h1",{className:"app-name",children:"CaBa"}),i.jsx("p",{className:"app-tagline",children:"Connect & Chat Anytime"})]}),i.jsxs("div",{className:"auth-header",children:[i.jsx("h1",{children:"Welcome Back"}),i.jsx("p",{children:"Sign in to continue your conversations"})]}),i.jsxs("div",{className:"auth-form",children:[c&&i.jsx("div",{className:"error-message animate-shake",children:c}),i.jsxs("button",{type:"button",className:`btn btn-google ${n?"loading":""}`,onClick:v,disabled:n,children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner"}),"Signing in..."]}):"Continue with Google"]}),i.jsxs("div",{className:"features-list",style:{marginTop:"2rem",textAlign:"center"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",marginBottom:"1rem"},children:[i.jsx("span",{style:{fontSize:"1.5rem"},children:""}),i.jsx("span",{style:{fontSize:"1.5rem"},children:""}),i.jsx("span",{style:{fontSize:"1.5rem"},children:""})]}),i.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"Chat, Call & Video with friends and family"})]}),i.jsx("div",{className:"auth-footer",children:i.jsxs("p",{children:["Don't have an account? ",i.jsx(Yo,{to:"/signup",style:{animation:"pulse 2s infinite"},children:"Sign Up"})]})})]})]}),i.jsx("style",{jsx:!0,children:`
        @keyframes bounce {
          0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
          40% { transform: translateY(-10px); }
          60% { transform: translateY(-5px); }
        }

        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.05); }
          100% { transform: scale(1); }
        }

        .auth-container.visible {
          animation: slideIn 0.6s ease-out;
        }

        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(50px) scale(0.9);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        .animate-shake {
          animation: shake 0.5s ease-in-out;
        }

        .btn-google.loading {
          position: relative;
          overflow: hidden;
        }

        .btn-google.loading::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
          animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
          0% { left: -100%; }
          100% { left: 100%; }
        }
      `})]})},a_=()=>{const{signUpWithGoogle:o}=La(),[n,a]=M.useState(!1),[c,h]=M.useState(""),f=async()=>{try{a(!0),h("");const x=await o();x.success||h(x.error||"Google sign up failed")}catch{h("An error occurred. Please try again.")}finally{a(!1)}};return i.jsx("div",{className:"auth-page",children:i.jsxs("div",{className:"auth-container",children:[i.jsxs("div",{className:"auth-header",children:[i.jsx("h1",{children:"Create Account"}),i.jsx("p",{children:"Join CaBa messaging platform"})]}),i.jsxs("div",{className:"auth-form",children:[c&&i.jsx("div",{className:"error-message",children:c}),i.jsxs("button",{type:"button",className:"btn btn-google",onClick:f,disabled:n,children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing up...":"Sign up with Google"]}),i.jsx("div",{className:"auth-footer",children:i.jsxs("p",{children:["Already have an account? ",i.jsx(Yo,{to:"/login",children:"Login"})]})})]})]})})},r_=()=>{const{supabase:o}=vs(),[n,a]=M.useState(""),[c,h]=M.useState(!1),[f,x]=M.useState({text:"",type:""}),v=R=>R?R.startsWith("+")?R:"+"+R.replace(/\D/g,""):"",C=R=>R?/^(\+)?\d{1,15}$/.test(R):!1,w=async R=>{try{const T=R.startsWith("+")?R.substring(1):R,{data:O,error:D}=await o.from("users").select("*").eq("phone",T).single();return D?(console.error("Error getting user by phone:",D),null):O||null}catch(T){return console.error("Error in getUserByPhone:",T),null}},A=R=>{if(!R)return"";const[T,O]=R.split("@");return T.length<=2?R:T[0]+"*".repeat(T.length-2)+T[T.length-1]+"@"+O},N=async R=>{R.preventDefault();const T=v(n.trim());if(!C(T)){x({text:"Invalid phone number",type:"error"});return}h(!0),x({text:"",type:""});try{const O=await w(T);if(!O){x({text:"Phone number not registered",type:"error"}),h(!1);return}if(!O.email){x({text:"No email found. Please contact support.",type:"error"}),h(!1);return}const{error:D}=await o.auth.resetPasswordForEmail(O.email,{redirectTo:`${window.location.origin}/CaBa/reset-password`});if(D)throw D;x({text:` Password reset link sent to ${A(O.email)}. Check your email inbox!`,type:"success"}),a("")}catch(O){console.error("Forgot password error:",O),x({text:O.message,type:"error"})}finally{h(!1)}};return i.jsx("div",{className:"container",children:i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"logo",children:[i.jsx("div",{className:"logo-icon",children:"lock"}),i.jsx("h1",{children:"DigiDad"})]}),i.jsx("h2",{children:"Forgot Password"}),i.jsx("p",{className:"subtitle",children:"Enter your phone number"}),i.jsxs("form",{id:"forgotPasswordForm",onSubmit:N,children:[i.jsxs("div",{className:"input-group",children:[i.jsxs("label",{htmlFor:"phone",children:[i.jsx("span",{className:"icon",children:"phone"}),"Phone Number"]}),i.jsx("input",{type:"tel",id:"phone",placeholder:"+911234567890",required:!0,autoComplete:"tel",value:n,onChange:R=>a(R.target.value)}),i.jsx("small",{children:"We'll send a reset link to your registered email"})]}),i.jsx("button",{type:"submit",id:"submitBtn",className:"btn-primary",disabled:c,children:c?"Sending...":"Send Reset Link"}),i.jsx("div",{id:"message",className:"message",style:{display:f.text?"block":"none"},children:f.text})]}),i.jsx("div",{className:"footer",children:i.jsx(Yo,{to:"/login",children:" Back to Login"})})]})})},i_=()=>{const{supabase:o}=vs(),n=us(),[a,c]=M.useState(""),[h,f]=M.useState(""),[x,v]=M.useState(!1),[C,w]=M.useState({text:"",type:""}),[A,N]=M.useState(!1);M.useEffect(()=>{const O=window.location.hash,U=new URLSearchParams(window.location.search).get("recovery");console.log("ResetPassword: Current hash:",O),console.log("ResetPassword: Recovery param:",U);let H,B="";if(O&&O.includes("access_token")?(H=new URLSearchParams(O.substring(1)),B="hash"):U&&(H=new URLSearchParams(decodeURIComponent(U)),B="query"),H){const P=H.get("access_token"),Q=H.get("refresh_token"),Z=H.get("type");console.log(`ResetPassword: Extracted params from ${B}:`,{accessToken:!!P,refreshToken:!!Q,type:Z}),Z==="recovery"&&P&&Q?(console.log("ResetPassword: Setting recovery session..."),o.auth.setSession({access_token:P,refresh_token:Q}).then(({data:Y,error:X})=>{X?(console.error("Error setting recovery session:",X),w({text:"Invalid or expired reset link",type:"error"})):(console.log("Recovery session set successfully"),N(!0),w({text:"Please enter your new password",type:"success"}),window.history.replaceState(null,"",window.location.pathname))})):(console.log("ResetPassword: Invalid recovery parameters"),w({text:"Invalid reset link. Please request a new password reset.",type:"error"}))}else console.log("ResetPassword: No recovery parameters found"),w({text:"Invalid reset link. Please request a new password reset.",type:"error"})},[o.auth]);const R=async O=>{if(O.preventDefault(),a.length<6){w({text:"Password must be at least 6 characters",type:"error"});return}if(a!==h){w({text:"Passwords do not match",type:"error"});return}v(!0),w({text:"",type:""});try{const{error:D}=await o.auth.updateUser({password:a});if(D)throw D;w({text:"Password updated successfully! Redirecting to login...",type:"success"}),setTimeout(async()=>{await o.auth.signOut(),n("/login")},2e3)}catch(D){console.error("Error updating password:",D),w({text:D.message||"Failed to update password. Please try again.",type:"error"})}finally{v(!1)}},T=O=>{const D=document.getElementById(O),U=D.nextElementSibling;D.type==="password"?(D.type="text",U&&(U.querySelector(".eye-icon i").className="fas fa-eye-slash")):(D.type="password",U&&(U.querySelector(".eye-icon i").className="fas fa-eye"))};return i.jsx("div",{className:"auth-page",children:i.jsxs("div",{className:"auth-container",children:[i.jsxs("div",{className:"auth-header",children:[i.jsx("div",{className:"app-logo",children:i.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 80 80",children:[i.jsx("circle",{cx:"40",cy:"40",r:"35",fill:"var(--primary-color)"}),i.jsx("text",{x:"40",y:"52",fontSize:"35",fill:"white",textAnchor:"middle",fontWeight:"bold",children:"DD"})]})}),i.jsx("h1",{className:"app-name",children:"DigiDad"}),i.jsx("p",{className:"app-tagline",children:"Reset your password"})]}),i.jsxs("form",{id:"resetPasswordForm",className:"auth-form",onSubmit:R,children:[i.jsx("h2",{children:"Reset Password"}),i.jsx("p",{className:"form-subtitle",children:"Enter your new password"}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"password-input",children:[i.jsx("input",{type:"password",id:"password",placeholder:"Enter new password",required:!0,minLength:"6",value:a,onChange:O=>c(O.target.value),disabled:!A}),i.jsx("button",{type:"button",className:"toggle-password",onClick:()=>T("password"),disabled:!A,children:i.jsx("span",{className:"eye-icon",children:i.jsx("i",{className:"fas fa-eye"})})})]}),i.jsx("small",{className:"input-hint",children:"At least 6 characters"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsxs("div",{className:"password-input",children:[i.jsx("input",{type:"password",id:"confirmPassword",placeholder:"Confirm new password",required:!0,minLength:"6",value:h,onChange:O=>f(O.target.value),disabled:!A}),i.jsx("button",{type:"button",className:"toggle-password",onClick:()=>T("confirmPassword"),disabled:!A,children:i.jsx("span",{className:"eye-icon",children:i.jsx("i",{className:"fas fa-eye"})})})]})]}),i.jsxs("button",{type:"submit",className:"btn-primary",disabled:x||!A,children:[i.jsx("span",{className:"btn-text",children:x?"Updating...":"Update Password"}),x&&i.jsx("span",{className:"btn-loader",style:{display:"inline-block"},children:i.jsx("div",{className:"spinner"})})]}),i.jsx("div",{id:"message",className:"message",style:{display:C.text?"block":"none"},children:C.text})]}),i.jsxs("div",{className:"auth-switch",children:["Remember your password? ",i.jsx(Yo,{to:"/login",children:"Login"})]})]})})},Lo={classic_purple:{name:"Classic Purple",category:"Default",background:`
      radial-gradient(circle at 25% 75%, rgba(139, 92, 246, 0.15) 0%, transparent 60%),
      radial-gradient(circle at 75% 25%, rgba(168, 85, 247, 0.12) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(124, 58, 237, 0.08) 0%, transparent 70%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #8b5cf6 0%, #7c3aed 50%, #6d28d9 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)",text:"#f8fafc"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%)",text:"#0f172a"},header:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#f1f5f9"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",text:"#1e293b",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#ffffff"}},electric_dreams:{name:"Electric Dreams",category:"Futuristic",background:`
      radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.2) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(59, 130, 246, 0.25) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.15) 0%, transparent 60%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0c4a6e 0%, #1e40af 50%, #581c87 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)",text:"#f0f9ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e"},header:{background:"linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)",text:"#ffffff",iconColor:"#f0f9ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",iconColor:"#0ea5e9"},buttons:{background:"linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%)",text:"#ffffff",iconColor:"#ffffff"}},dark_professional:{name:"Dark Professional",category:"Dark",background:`
      radial-gradient(circle at 30% 70%, rgba(15, 23, 42, 0.4) 0%, transparent 60%),
      radial-gradient(circle at 70% 30%, rgba(30, 41, 59, 0.3) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(51, 65, 85, 0.2) 0%, transparent 70%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0f172a 0%, #1e293b 50%, #334155 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #475569 0%, #64748b 100%)",text:"#f8fafc"},receivedMessage:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",text:"#e2e8f0"},header:{background:"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)",text:"#ffffff",iconColor:"#e2e8f0"},input:{background:"linear-gradient(135deg, #334155 0%, #475569 100%)",text:"#f8fafc",iconColor:"#94a3b8"},buttons:{background:"linear-gradient(135deg, #475569 0%, #64748b 100%)",text:"#f8fafc",iconColor:"#f8fafc"}},ocean_depths:{name:"Ocean Depths",category:"Nature",background:`
      radial-gradient(circle at 25% 75%, rgba(14, 165, 233, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(2, 132, 199, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(6, 182, 212, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0c4a6e 0%, #075985 50%, #0369a1 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0284c7 0%, #0369a1 100%)",text:"#f0f9ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e"},header:{background:"linear-gradient(135deg, #0c4a6e 0%, #075985 100%)",text:"#ffffff",iconColor:"#f0f9ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",iconColor:"#0284c7"},buttons:{background:"linear-gradient(135deg, #0c4a6e 0%, #075985 100%)",text:"#ffffff",iconColor:"#ffffff"}},forest_mist:{name:"Forest Mist",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(34, 197, 94, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(22, 163, 74, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 60% 40%, rgba(74, 222, 128, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #14532d 0%, #166534 50%, #15803d 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #16a34a 0%, #15803d 100%)",text:"#f0fdf4"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d"},header:{background:"linear-gradient(135deg, #14532d 0%, #166534 100%)",text:"#ffffff",iconColor:"#f0fdf4"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d",iconColor:"#16a34a"},buttons:{background:"linear-gradient(135deg, #14532d 0%, #166534 100%)",text:"#ffffff",iconColor:"#ffffff"}},sunset_glow:{name:"Sunset Glow",category:"Colorful",background:`
      radial-gradient(circle at 25% 75%, rgba(251, 146, 60, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(234, 88, 12, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(249, 115, 22, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #c2410c 0%, #ea580c 50%, #f97316 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #ea580c 0%, #dc2626 100%)",text:"#fff7ed"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412"},header:{background:"linear-gradient(135deg, #c2410c 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#fff7ed"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412",iconColor:"#ea580c"},buttons:{background:"linear-gradient(135deg, #c2410c 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#ffffff"}},cosmic_purple:{name:"Cosmic Purple",category:"Elegant",background:`
      radial-gradient(circle at 30% 70%, rgba(147, 51, 234, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(124, 58, 237, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #581c87 0%, #6b21a8 50%, #7c3aed 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #7c3aed 0%, #6b21a8 100%)",text:"#f3e8ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87"},header:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#f3e8ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#ffffff"}},golden_hour:{name:"Golden Hour",category:"Colorful",background:`
      radial-gradient(circle at 20% 80%, rgba(245, 158, 11, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(217, 119, 6, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(251, 191, 36, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #92400e 0%, #b45309 50%, #d97706 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #d97706 0%, #b45309 100%)",text:"#fffbeb"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#92400e"},header:{background:"linear-gradient(135deg, #92400e 0%, #b45309 100%)",text:"#ffffff",iconColor:"#fffbeb"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#92400e",iconColor:"#d97706"},buttons:{background:"linear-gradient(135deg, #92400e 0%, #b45309 100%)",text:"#ffffff",iconColor:"#ffffff"}},midnight_city:{name:"Midnight City",category:"Dark",background:`
      radial-gradient(circle at 30% 70%, rgba(30, 27, 75, 0.25) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(49, 46, 129, 0.30) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(79, 70, 229, 0.15) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #0f0f23 0%, #1e1b4b 50%, #312e81 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #4338ca 0%, #3730a3 100%)",text:"#e0e7ff"},receivedMessage:{background:"linear-gradient(135deg, #1e1b4b 0%, #312e81 100%)",text:"#c7d2fe"},header:{background:"linear-gradient(135deg, #0f0f23 0%, #1e1b4b 100%)",text:"#ffffff",iconColor:"#e0e7ff"},input:{background:"linear-gradient(135deg, #312e81 0%, #4338ca 100%)",text:"#e0e7ff",iconColor:"#a5b4fc"},buttons:{background:"linear-gradient(135deg, #4338ca 0%, #3730a3 100%)",text:"#e0e7ff",iconColor:"#e0e7ff"}},rose_garden:{name:"Rose Garden",category:"Colorful",background:`
      radial-gradient(circle at 25% 75%, rgba(244, 63, 94, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(219, 39, 119, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(236, 72, 153, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #be185d 0%, #db2777 50%, #ec4899 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #db2777 0%, #be185d 100%)",text:"#fdf2f8"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#be185d"},header:{background:"linear-gradient(135deg, #be185d 0%, #db2777 100%)",text:"#ffffff",iconColor:"#fdf2f8"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#be185d",iconColor:"#ec4899"},buttons:{background:"linear-gradient(135deg, #be185d 0%, #db2777 100%)",text:"#ffffff",iconColor:"#ffffff"}},emerald_forest:{name:"Emerald Forest",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.14) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(5, 150, 105, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(52, 211, 153, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #047857 0%, #059669 50%, #10b981 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",text:"#ecfdf5"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #ecfdf5 100%)",text:"#14532d"},header:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ecfdf5"},input:{background:"linear-gradient(135deg, #ffffff 0%, #ecfdf5 100%)",text:"#14532d",iconColor:"#10b981"},buttons:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff"}},nebula:{name:"Nebula",category:"Elegant",background:`
      radial-gradient(circle at 30% 70%, rgba(236, 72, 153, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(139, 92, 246, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #831843 0%, #a21caf 50%, #7c3aed 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #a21caf 0%, #7c3aed 100%)",text:"#fdf2f8"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#831843"},header:{background:"linear-gradient(135deg, #831843 0%, #a21caf 100%)",text:"#ffffff",iconColor:"#fdf2f8"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#831843",iconColor:"#ec4899"},buttons:{background:"linear-gradient(135deg, #831843 0%, #a21caf 100%)",text:"#ffffff",iconColor:"#ffffff"}},cyberpunk:{name:"Cyberpunk",category:"Dark",background:`
      radial-gradient(circle at 25% 75%, rgba(0, 255, 255, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 75% 25%, rgba(255, 0, 255, 0.06) 0%, transparent 55%),
      radial-gradient(circle at 50% 50%, rgba(0, 255, 0, 0.04) 0%, transparent 60%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #000000 0%, #0a0a0a 50%, #1a1a1a 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #00ffff 0%, #0080ff 100%)",text:"#000000"},receivedMessage:{background:"linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%)",text:"#00ff00"},header:{background:"linear-gradient(135deg, #000000 0%, #1a1a1a 100%)",text:"#00ffff",iconColor:"#00ff00"},input:{background:"linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%)",text:"#00ff00",iconColor:"#00ffff"},buttons:{background:"linear-gradient(135deg, #00ffff 0%, #0080ff 100%)",text:"#000000",iconColor:"#000000"}},telegram_blue:{name:"Telegram Blue",category:"Professional",background:`
      radial-gradient(circle at 30% 70%, rgba(0, 136, 204, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(0, 95, 153, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.10) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #003d5b 0%, #0088cc 50%, #3b82f6 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0088cc 0%, #0369a1 100%)",text:"#f0f9ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#003d5b"},header:{background:"linear-gradient(135deg, #003d5b 0%, #0088cc 100%)",text:"#ffffff",iconColor:"#f0f9ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#003d5b",iconColor:"#0088cc"},buttons:{background:"linear-gradient(135deg, #003d5b 0%, #0088cc 100%)",text:"#ffffff",iconColor:"#ffffff"}},spring_vibes:{name:"Spring Vibes",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(255, 222, 233, 0.25) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(181, 255, 252, 0.30) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(236, 252, 203, 0.20) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fce7f3 0%, #ecfdf5 50%, #f0fdfa 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(5, 150, 105, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)",text:"#1e293b",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(30, 41, 59, 0.1)"},header:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(4, 120, 87, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#1e293b",iconColor:"#059669",border:"1px solid rgba(5, 150, 105, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #047857 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff"}},autumn_leaves:{name:"Autumn Leaves",category:"Nature",background:`
      radial-gradient(circle at 25% 75%, rgba(234, 88, 12, 0.16) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(154, 52, 18, 0.20) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(245, 158, 11, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #7c2d12 0%, #9a3412 50%, #ea580c 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #ea580c 0%, #dc2626 100%)",text:"#fff7ed"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#7c2d12"},header:{background:"linear-gradient(135deg, #7c2d12 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#fff7ed"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#7c2d12",iconColor:"#ea580c"},buttons:{background:"linear-gradient(135deg, #7c2d12 0%, #ea580c 100%)",text:"#ffffff",iconColor:"#ffffff"}},winter_calm:{name:"Winter Calm",category:"Nature",background:`
      radial-gradient(circle at 30% 70%, rgba(137, 247, 254, 0.22) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(102, 166, 255, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #e0f2fe 0%, #bae6fd 50%, #7dd3fc 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #0284c7 0%, #0369a1 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(2, 132, 199, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(12, 74, 110, 0.1)"},header:{background:"linear-gradient(135deg, #0c4a6e 0%, #0284c7 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(12, 74, 110, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%)",text:"#0c4a6e",iconColor:"#0284c7",border:"1px solid rgba(2, 132, 199, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #0c4a6e 0%, #0284c7 100%)",text:"#ffffff",iconColor:"#ffffff"}},desert_dunes:{name:"Desert Dunes",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(253, 230, 138, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(251, 191, 36, 0.15) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fef3c7 0%, #fde68a 50%, #facc15 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #ca8a04 0%, #a16207 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(202, 138, 4, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#78350f",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(120, 53, 15, 0.1)"},header:{background:"linear-gradient(135deg, #78350f 0%, #ca8a04 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(120, 53, 15, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fffbeb 100%)",text:"#78350f",iconColor:"#ca8a04",border:"1px solid rgba(202, 138, 4, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #78350f 0%, #ca8a04 100%)",text:"#ffffff",iconColor:"#ffffff"}},lavender_fields:{name:"Lavender Fields",category:"Nature",background:`
      radial-gradient(circle at 25% 75%, rgba(196, 181, 253, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(139, 92, 246, 0.15) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(167, 139, 250, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #ede9fe 0%, #c4b5fd 50%, #a78bfa 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)",text:"#f3e8ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87"},header:{background:"linear-gradient(135deg, #581c87 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#f3e8ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #581c87 0%, #7c3aed 100%)",text:"#ffffff",iconColor:"#ffffff"}},cherry_blossom:{name:"Cherry Blossom",category:"Nature",background:`
      radial-gradient(circle at 30% 70%, rgba(253, 164, 175, 0.22) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(244, 63, 94, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(251, 113, 133, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fce7f3 0%, #fda4af 50%, #fb7185 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #e11d48 0%, #be185d 100%)",text:"#ffffff",shadow:"0 3px 12px rgba(225, 29, 72, 0.3)",border:"1px solid rgba(255,255,255,0.2)"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#9f1239",shadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid rgba(159, 18, 57, 0.1)"},header:{background:"linear-gradient(135deg, #9f1239 0%, #e11d48 100%)",text:"#ffffff",iconColor:"#ffffff",shadow:"0 2px 8px rgba(159, 18, 57, 0.3)"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fdf2f8 100%)",text:"#9f1239",iconColor:"#f43f5e",border:"1px solid rgba(244, 63, 94, 0.2)",shadow:"0 2px 8px rgba(0,0,0,0.1)"},buttons:{background:"linear-gradient(135deg, #9f1239 0%, #e11d48 100%)",text:"#ffffff",iconColor:"#ffffff"}},rainy_day:{name:"Rainy Day",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(156, 163, 175, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(75, 85, 99, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(107, 114, 128, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #f3f4f6 0%, #d1d5db 50%, #9ca3af 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #4b5563 0%, #374151 100%)",text:"#f9fafb"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f9fafb 100%)",text:"#1f2937"},header:{background:"linear-gradient(135deg, #1f2937 0%, #4b5563 100%)",text:"#ffffff",iconColor:"#f9fafb"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f9fafb 100%)",text:"#1f2937",iconColor:"#6b7280"},buttons:{background:"linear-gradient(135deg, #1f2937 0%, #4b5563 100%)",text:"#ffffff",iconColor:"#ffffff"}},sunset_bliss:{name:"Sunset Bliss",category:"Colorful",background:`
      radial-gradient(circle at 25% 75%, rgba(251, 146, 60, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 75% 25%, rgba(239, 68, 68, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(245, 158, 11, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #fed7aa 0%, #fb923c 50%, #f97316 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",text:"#fef2f2"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412"},header:{background:"linear-gradient(135deg, #9a3412 0%, #dc2626 100%)",text:"#ffffff",iconColor:"#fff7ed"},input:{background:"linear-gradient(135deg, #ffffff 0%, #fff7ed 100%)",text:"#9a3412",iconColor:"#f97316"},buttons:{background:"linear-gradient(135deg, #9a3412 0%, #dc2626 100%)",text:"#ffffff",iconColor:"#ffffff"}},mint_fresh:{name:"Mint Fresh",category:"Nature",background:`
      radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.15) 0%, transparent 55%),
      radial-gradient(circle at 80% 20%, rgba(52, 211, 153, 0.18) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(134, 239, 172, 0.12) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #d1fae5 0%, #86efac 50%, #4ade80 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #059669 0%, #047857 100%)",text:"#f0fdf4"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d"},header:{background:"linear-gradient(135deg, #14532d 0%, #059669 100%)",text:"#ffffff",iconColor:"#f0fdf4"},input:{background:"linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%)",text:"#14532d",iconColor:"#10b981"},buttons:{background:"linear-gradient(135deg, #14532d 0%, #059669 100%)",text:"#ffffff",iconColor:"#ffffff"}},royal_elegance:{name:"Royal Elegance",category:"Elegant",background:`
      radial-gradient(circle at 30% 70%, rgba(124, 58, 237, 0.18) 0%, transparent 55%),
      radial-gradient(circle at 70% 30%, rgba(139, 92, 246, 0.22) 0%, transparent 60%),
      radial-gradient(circle at 50% 50%, rgba(168, 85, 247, 0.14) 0%, transparent 65%),
      linear-gradient(calc(135deg + var(--scroll-percentage, 0) * 1.8deg), #ede9fe 0%, #c4b5fd 50%, #a78bfa 100%)
    `,sentMessage:{background:"linear-gradient(135deg, #6b21a8 0%, #581c87 100%)",text:"#f3e8ff"},receivedMessage:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87"},header:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#f3e8ff"},input:{background:"linear-gradient(135deg, #ffffff 0%, #faf5ff 100%)",text:"#581c87",iconColor:"#8b5cf6"},buttons:{background:"linear-gradient(135deg, #581c87 0%, #6b21a8 100%)",text:"#ffffff",iconColor:"#ffffff"}}},W2=M.createContext(),o_=({children:o})=>{const{supabase:n}=vs(),[a,c]=M.useState("classic_purple"),[h,f]=M.useState(null),[x,v]=M.useState(!0),[C,w]=M.useState(0);M.useEffect(()=>{document.documentElement.style.setProperty("--scroll-percentage",C)},[C]);const A=async H=>{if(!H){c("classic_purple"),v(!1);return}const B=`digidad_theme_debounce_${H}`,P=Date.now(),Q=parseInt(localStorage.getItem(B)||"0");if(P-Q<1e3){v(!1);return}localStorage.setItem(B,P.toString());const Z=localStorage.getItem(`digidad_chat_theme_${H}`);Z&&Lo[Z]?c(Z):Z||(c("classic_purple"),localStorage.setItem(`digidad_chat_theme_${H}`,"classic_purple")),v(!1)},N=async(H,B,P)=>{if(B)try{localStorage.setItem(`digidad_chat_theme_${B}`,H)}catch{try{localStorage.setItem(`digidad_chat_theme_${B}`,H)}catch{}}},R=H=>{f(H),v(!0),A(H)},T=async(H,B)=>{if(!Lo[H])return;const P=B||h;if(!P){console.error("No chat ID available for theme selection");return}c(H);const Q=JSON.parse(localStorage.getItem("currentUser"));await N(H,P,Q?.id),D(H)},O=H=>{if(!H)return!1;let B=H;for(;B&&B!==document.body;){const P=B.className||"",Q=typeof P=="string"?P:P.toString?P.toString():"";if(Q.includes("home-container")||Q.includes("chat-list")||Q.includes("chat-item")||Q.includes("chat-name")||Q.includes("chat-time")||Q.includes("last-message")||Q.includes("chat-info")||Q.includes("chat-header")||Q.includes("main-content")||Q.includes("sidebar"))return!0;B=B.parentElement}return!1},D=H=>{const B=Lo[H];if(!B)return;const P=document.documentElement;P.style.setProperty("--chat-bg-gradient",B.background),P.style.setProperty("--sent-message-bg",B.sentMessage.background),P.style.setProperty("--sent-message-text",B.sentMessage.text),P.style.setProperty("--sent-message-shadow",B.sentMessage.shadow||"0 2px 8px rgba(0,0,0,0.15)"),P.style.setProperty("--sent-message-border",B.sentMessage.border||"none"),P.style.setProperty("--received-message-bg",B.receivedMessage.background),P.style.setProperty("--received-message-text",B.receivedMessage.text),P.style.setProperty("--received-message-shadow",B.receivedMessage.shadow||"0 2px 8px rgba(0,0,0,0.1)"),P.style.setProperty("--received-message-border",B.receivedMessage.border||"none"),P.style.setProperty("--chat-header-bg",B.header.background),P.style.setProperty("--chat-header-text",B.header.text),P.style.setProperty("--chat-header-icon-color",B.header.iconColor),P.style.setProperty("--chat-header-shadow",B.header.shadow||"0 2px 8px rgba(0,0,0,0.15)"),P.style.setProperty("--chat-input-bg",B.input.background),P.style.setProperty("--chat-input-text",B.input.text),P.style.setProperty("--chat-input-icon-color",B.input.iconColor),P.style.setProperty("--chat-input-border",B.input.border||"none"),P.style.setProperty("--chat-input-shadow",B.input.shadow||"0 2px 8px rgba(0,0,0,0.1)"),P.style.setProperty("--chat-buttons-bg",B.buttons.background),P.style.setProperty("--chat-buttons-text",B.buttons.text),P.style.setProperty("--chat-buttons-icon-color",B.buttons.iconColor);const Q=(Y,X,ee)=>{document.querySelectorAll(Y).forEach(xe=>{O(xe)||(xe.style[X]=ee)})};Q(".chat-container","background",B.background),Q("#messagesContainer","background",B.background),Q(".chat-header","background",B.header.background),Q(".chat-header","color",B.header.text),Q(".chat-header","boxShadow",B.header.shadow||"0 2px 8px rgba(0,0,0,0.15)"),Q(".chat-header","textShadow","0 1px 2px rgba(0,0,0,0.3)"),Q(".message-input-area","background",B.input.background),Q(".message-input-area","color",B.input.text),Q(".message-input-area","border",B.input.border||"none"),Q(".message-input-area","boxShadow",B.input.shadow||"0 2px 8px rgba(0,0,0,0.1)"),Q(".input-wrapper","background",B.input.background),Q(".input-wrapper","border",B.input.border||"none"),Q(".input-wrapper","boxShadow",B.input.shadow||"0 2px 8px rgba(0,0,0,0.1)"),Q("#messageInput","color",B.input.text),Q("#messageInput","textShadow","0 1px 2px rgba(0,0,0,0.1)"),document.querySelectorAll("*").forEach(Y=>{if(O(Y))return;const X=Y.className||"",ee=typeof X=="string"?X:X.toString?X.toString():"",q=Y.tagName;if(ee.includes("chat")&&!ee.includes("chat-list")&&!ee.includes("chat-item")||q==="BUTTON"&&Y.closest(".chat-container")||ee.includes("message")&&Y.closest(".chat-container")){if(q==="BUTTON"&&(Y.style.background=B.buttons.background,Y.style.color=B.buttons.text,Y.style.border="none",Y.style.textShadow="0 1px 2px rgba(0,0,0,0.2)",Y.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",Y.style.transition="all 0.3s ease"),Y.tagName==="I"||Y.tagName==="SVG"){const xe=Y.parentElement?.className||"",we=typeof xe=="string"?xe:xe.toString?xe.toString():"";we.includes("chat")&&!we.includes("chat-list")&&(Y.style.color=B.header.iconColor,Y.style.stroke=B.header.iconColor,Y.style.filter="drop-shadow(0 1px 3px rgba(0,0,0,0.4))",Y.style.transition="all 0.3s ease")}(ee.includes("message-bubble")||ee.includes("message"))&&(ee.includes("sent")?(Y.style.background=B.sentMessage.background,Y.style.color=B.sentMessage.text,Y.style.border=B.sentMessage.border||"none",Y.style.boxShadow=B.sentMessage.shadow||"0 2px 8px rgba(0,0,0,0.15)",Y.style.textShadow="0 1px 2px rgba(0,0,0,0.2)"):ee.includes("received")&&(Y.style.background=B.receivedMessage.background,Y.style.color=B.receivedMessage.text,Y.style.border=B.receivedMessage.border||"none",Y.style.boxShadow=B.receivedMessage.shadow||"0 2px 8px rgba(0,0,0,0.1)",Y.style.textShadow="0 1px 2px rgba(0,0,0,0.1)"))}}),document.body.className=document.body.className.replace(/theme-\w+/g,""),document.body.classList.add(`theme-${H.replace("_","-")}`)};M.useEffect(()=>{!x&&h&&D(a)},[a,h,x]);const U={chatTheme:a,chatThemes:Lo,selectTheme:T,setChatId:R,loading:x,currentThemeData:Lo[a]||Lo.classic_purple,setScrollPercentage:w,currentChatId:h};return i.jsx(W2.Provider,{value:U,children:o})},R0=()=>{const o=M.useContext(W2);if(!o)throw new Error("useChatTheme must be used within a ChatThemeProvider");return o},xt="./",Rs=[{id:1,path:`${xt}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`},{id:2,path:`${xt}assets/images/dp-options/1691130988954.jpg`},{id:3,path:`${xt}assets/images/dp-options/aesthetic-cartoon-funny-dp-for-instagram.webp`},{id:4,path:`${xt}assets/images/dp-options/boy-cartoon-dp-with-hoodie.webp`},{id:5,path:`${xt}assets/images/dp-options/download (1).jpg`},{id:6,path:`${xt}assets/images/dp-options/download.jpg`},{id:7,path:`${xt}assets/images/dp-options/funny-profile-picture-wd195eo9rpjy7ax1.jpg`},{id:8,path:`${xt}assets/images/dp-options/funny-whatsapp-dp-for-girls.webp`},{id:9,path:`${xt}assets/images/dp-options/photo_5230962651624575118_y.jpg`},{id:10,path:`${xt}assets/images/dp-options/photo_5230962651624575119_y.jpg`},{id:11,path:`${xt}assets/images/dp-options/photo_5230962651624575120_y.jpg`},{id:12,path:`${xt}assets/images/dp-options/photo_5230962651624575121_y.jpg`},{id:13,path:`${xt}assets/images/dp-options/photo_5230962651624575122_y.jpg`},{id:14,path:`${xt}assets/images/dp-options/photo_5230962651624575123_y.jpg`},{id:15,path:`${xt}assets/images/dp-options/photo_5230962651624575124_y.jpg`},{id:16,path:`${xt}assets/images/dp-options/photo_5230962651624575125_y.jpg`},{id:17,path:`${xt}assets/images/dp-options/photo_5230962651624575126_y.jpg`},{id:18,path:`${xt}assets/images/dp-options/photo_5230962651624575127_y.jpg`},{id:19,path:`${xt}assets/images/dp-options/photo_5235923888607267708_w.jpg`},{id:20,path:`${xt}assets/images/dp-options/photo_5235923888607267709_w.jpg`},{id:21,path:`${xt}assets/images/dp-options/photo_5235923888607267710_w.jpg`},{id:22,path:`${xt}assets/images/dp-options/photo_5235923888607267711_w.jpg`},{id:23,path:`${xt}assets/images/dp-options/photo_5235923888607267712_w.jpg`},{id:24,path:`${xt}assets/images/dp-options/photo_5235923888607267713_w.jpg`},{id:25,path:`${xt}assets/images/dp-options/photo_5235923888607267714_w.jpg`},{id:26,path:`${xt}assets/images/dp-options/photo_5235923888607267715_w.jpg`},{id:27,path:`${xt}assets/images/dp-options/photo_5235923888607267716_w.jpg`},{id:28,path:`${xt}assets/images/dp-options/photo_5235923888607267717_w.jpg`},{id:29,path:`${xt}assets/images/dp-options/photo_5257989785601641848_w.jpg`},{id:30,path:`${xt}assets/images/dp-options/photo_5257989785601641845_w.jpg`},{id:31,path:`${xt}assets/images/dp-options/photo_5257989785601641846_w.jpg`},{id:32,path:`${xt}assets/images/dp-options/photo_5257989785601641850_w.jpg`},{id:33,path:`${xt}assets/images/dp-options/photo_5257989785601641853_w.jpg`},{id:34,path:`${xt}assets/images/dp-options/photo_5257989785601641852_w.jpg`},{id:35,path:`${xt}assets/images/dp-options/photo_5257989785601641849_w.jpg`},{id:36,path:`${xt}assets/images/dp-options/photo_5257989785601641851_w.jpg`},{id:37,path:`${xt}assets/images/dp-options/photo_5257989785601641844_w.jpg`},{id:38,path:`${xt}assets/images/dp-options/photo_5257989785601641779_w.jpg`},{id:39,path:`${xt}assets/images/dp-options/photo_5257989785601641784_w.jpg`},{id:40,path:`${xt}assets/images/dp-options/photo_5257989785601641785_w.jpg`},{id:41,path:`${xt}assets/images/dp-options/photo_5257989785601641781_w.jpg`},{id:42,path:`${xt}assets/images/dp-options/photo_5257989785601641780_w.jpg`},{id:43,path:`${xt}assets/images/dp-options/photo_5257989785601641777_w.jpg`},{id:44,path:`${xt}assets/images/dp-options/photo_5257989785601641778_w.jpg`},{id:45,path:`${xt}assets/images/dp-options/photo_5257989785601641776_w.jpg`},{id:46,path:`${xt}assets/images/dp-options/photo_5257989785601641783_w.jpg`}];const l_=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c_=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,a,c)=>c?c.toUpperCase():a.toLowerCase()),Bp=o=>{const n=c_(o);return n.charAt(0).toUpperCase()+n.slice(1)},Q2=(...o)=>o.filter((n,a,c)=>!!n&&n.trim()!==""&&c.indexOf(n)===a).join(" ").trim(),u_=o=>{for(const n in o)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var d_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h_=M.forwardRef(({color:o="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:h="",children:f,iconNode:x,...v},C)=>M.createElement("svg",{ref:C,...d_,width:n,height:n,stroke:o,strokeWidth:c?Number(a)*24/Number(n):a,className:Q2("lucide",h),...!f&&!u_(v)&&{"aria-hidden":"true"},...v},[...x.map(([w,A])=>M.createElement(w,A)),...Array.isArray(f)?f:[f]]));const Xe=(o,n)=>{const a=M.forwardRef(({className:c,...h},f)=>M.createElement(h_,{ref:f,iconNode:n,className:Q2(`lucide-${l_(Bp(o))}`,`lucide-${o}`,c),...h}));return a.displayName=Bp(o),a};const f_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],gf=Xe("activity",f_);const g_=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],mf=Xe("archive",g_);const m_=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],p_=Xe("arrow-down",m_);const x_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Qo=Xe("arrow-left",x_);const y_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],w_=Xe("arrow-right",y_);const b_=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Fu=Xe("ban",b_);const v_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],K2=Xe("bell-off",v_);const C_=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Hu=Xe("bell",C_);const __=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],a0=Xe("calendar",__);const S_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Up=Xe("chart-column",S_);const E_=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],r0=Xe("check-check",E_);const A_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Z2=Xe("check",A_);const N_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pf=Xe("circle-check-big",N_);const T_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],j_=Xe("circle-question-mark",T_);const R_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],I_=Xe("circle-x",R_);const O_=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],i0=Xe("clock",O_);const M_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$2=Xe("copy",M_);const k_=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],D_=Xe("crown",k_);const L_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],B_=Xe("database",L_);const U_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],P_=Xe("download",U_);const z_=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Zu=Xe("ellipsis-vertical",z_);const F_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ju=Xe("eye-off",F_);const H_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xa=Xe("eye",H_);const q_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],I0=Xe("file-text",q_);const V_=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],o0=Xe("flag",V_);const G_=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Y_=Xe("heart",G_);const X_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],J2=Xe("image",X_);const W_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Q_=Xe("info",W_);const K_=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Z_=Xe("link",K_);const $_=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Pp=Xe("lock",$_);const J_=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],eS=Xe("log-out",J_);const tS=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],nS=Xe("map-pin",tS);const sS=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ma=Xe("message-circle",sS);const aS=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ru=Xe("message-square",aS);const rS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],iS=Xe("mic-off",rS);const oS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],lS=Xe("mic",oS);const cS=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],uS=Xe("music",cS);const dS=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],ci=Xe("newspaper",dS);const hS=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],fS=Xe("palette",hS);const gS=[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],mS=Xe("phone-incoming",gS);const pS=[["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xS=Xe("phone-missed",pS);const yS=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],O0=Xe("phone-off",yS);const wS=[["path",{d:"m16 8 6-6",key:"oawc05"}],["path",{d:"M22 8V2h-6",key:"oqy2zc"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],bS=Xe("phone-outgoing",wS);const vS=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Hs=Xe("phone",vS);const CS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zp=Xe("plus",CS);const _S=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ey=Xe("qr-code",_S);const SS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Bi=Xe("refresh-cw",SS);const ES=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Fp=Xe("reply",ES);const AS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],NS=Xe("rotate-ccw",AS);const TS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$l=Xe("search",TS);const jS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],RS=Xe("send",jS);const IS=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xl=Xe("settings",IS);const OS=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ty=Xe("share-2",OS);const MS=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],oi=Xe("shield",MS);const kS=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$u=Xe("square-pen",kS);const DS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],js=Xe("trash-2",DS);const LS=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],BS=Xe("upload",LS);const US=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PS=Xe("user-check",US);const zS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],FS=Xe("user-plus",zS);const HS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],qS=Xe("user-x",HS);const VS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],M0=Xe("user",VS);const GS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hi=Xe("users",GS);const YS=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Hp=Xe("video-off",YS);const XS=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hi=Xe("video",XS);const WS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],QS=Xe("volume-2",WS);const KS=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ZS=Xe("volume-x",KS);const $S=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ju=Xe("x",$S),k0=({items:o=[],icon:n=i.jsx(Zu,{size:20}),buttonClassName:a="",menuClassName:c="",align:h="right"})=>{const[f,x]=M.useState(!1),v=M.useRef(null),{currentThemeData:C}=R0();M.useEffect(()=>{const A=R=>{v.current&&!v.current.contains(R.target)&&x(!1)},N=R=>{const T=R.touches[0]||R.changedTouches[0];T&&v.current&&!v.current.contains(T.target)&&x(!1)};return f&&(document.addEventListener("mousedown",A),document.addEventListener("touchstart",N,{passive:!0})),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",N)}},[f]);const w=(A,N)=>{N.preventDefault(),N.stopPropagation(),A.onClick&&A.onClick(),x(!1)};return i.jsxs("div",{className:"dropdown",ref:v,children:[i.jsx("button",{className:`icon-btn ${a}`,onClick:A=>{A.preventDefault(),A.stopPropagation(),x(!f)},onMouseEnter:()=>{},title:"Menu",children:n}),f&&i.jsx("div",{className:`dropdown-menu ${h==="left"?"dropdown-menu-left":""} ${c}`,children:o.map((A,N)=>i.jsx(Dx.Fragment,{children:A.divider?i.jsx("div",{className:"dropdown-divider"}):i.jsxs("button",{className:`dropdown-item ${A.danger?"danger":""} ${A.className||""}`,onClick:R=>w(A,R),disabled:A.disabled,style:{...A.style,color:A.danger?"#dc3545":"var(--chat-input-text, #212529)"},children:[A.icon&&i.jsx("span",{className:"dropdown-item-icon",style:{color:A.danger?"#dc3545":"var(--chat-input-icon-color, #667eea)"},children:A.icon}),i.jsx("span",{className:"dropdown-item-label",children:A.label}),A.badge&&i.jsx("span",{className:"dropdown-item-badge",children:A.badge})]})},N))})]})},wr=({isOpen:o,onClose:n,title:a,children:c,size:h="medium",showCloseButton:f=!0,closeOnOverlayClick:x=!0,className:v=""})=>{if(M.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]),M.useEffect(()=>{const w=A=>{A.key==="Escape"&&o&&n()};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[o,n]),!o)return null;const C=w=>{x&&w.target===w.currentTarget&&n()};return i.jsx("div",{className:"modal-overlay",onClick:C,children:i.jsxs("div",{className:`modal-container modal-${h} ${v}`,children:[(a||f)&&i.jsxs("div",{className:"modal-header",children:[a&&i.jsx("h2",{className:"modal-title",children:a}),f&&i.jsx("button",{className:"modal-close-btn",onClick:n,children:i.jsx(Ju,{size:24})})]}),i.jsx("div",{className:"modal-body",children:c})]})})},JS=({message:o,isSent:n,onDownload:a,onView:c})=>{const[h,f]=M.useState(!1),[x,v]=M.useState(0),C=R=>({image:"fas fa-image",video:"fas fa-video",audio:"fas fa-microphone",document:"fas fa-file-pdf",avatar:"fas fa-user-circle"})[R]||"fas fa-file",w=R=>{if(!R||R===0)return"";const T=1024,O=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(R)/Math.log(T));return Math.round(R/Math.pow(T,D)*100)/100+" "+O[D]},A=async()=>{if(o.media_url){f(!0),v(0);try{const R=setInterval(()=>{v(T=>T>=90?(clearInterval(R),T):T+10)},200);await a(o.media_url,o.id),v(100),setTimeout(()=>{f(!1),v(0)},1e3)}catch(R){console.error("Download failed:",R),f(!1),v(0)}}},N=()=>{if(!o.media_url)return i.jsxs("div",{className:"media-unavailable",children:[i.jsx("i",{className:"fas fa-exclamation-circle"}),i.jsx("span",{children:"Media not available"})]});switch(o.message_type){case"image":return i.jsx("div",{className:"image-preview",style:{backgroundImage:`url(${o.media_url})`},onClick:()=>c(o.media_url,"image"),children:i.jsx("div",{className:"image-overlay",children:i.jsx("i",{className:"fas fa-search-plus"})})});case"video":return i.jsx("div",{className:"video-preview",onClick:()=>c(o.media_url,"video"),children:i.jsx("div",{className:"video-overlay",children:i.jsx("i",{className:"fas fa-play-circle"})})});case"audio":return i.jsx("div",{className:"audio-preview",children:i.jsx("i",{className:"fas fa-music"})});case"document":return i.jsx("div",{className:"document-preview",onClick:()=>c(o.media_url,"document"),children:i.jsx("i",{className:"fas fa-file-pdf"})});default:return i.jsx("div",{className:"file-preview",children:i.jsx("i",{className:"fas fa-file"})})}};return n?i.jsxs("div",{className:"media-message sent",children:[i.jsx("div",{className:"media-preview",children:N()}),i.jsxs("div",{className:"media-details",children:[i.jsx("div",{className:"media-name",children:o.content}),i.jsx("div",{className:"media-size",children:w(o.file_size)})]})]}):i.jsx("div",{className:"media-message received",children:h?i.jsxs("div",{className:"download-progress-container",children:[i.jsx("div",{className:"download-progress-bar",children:i.jsx("div",{className:"download-progress-fill",style:{width:`${x}%`}})}),i.jsxs("div",{className:"download-progress-text",children:[x,"%"]})]}):i.jsxs("div",{className:"media-download-container",children:[i.jsx("div",{className:"media-icon",children:i.jsx("i",{className:C(o.message_type)})}),i.jsxs("div",{className:"media-info",children:[i.jsx("div",{className:"media-name",children:o.content}),i.jsx("div",{className:"media-status",children:"Click to download"})]}),i.jsx("button",{className:"btn-download",onClick:A,children:i.jsx("i",{className:"fas fa-download"})})]})})},eE=({message:o,currentUser:n,isSelected:a,isSelectionMode:c,onSelect:h,onReply:f,onDelete:x,onMediaView:v,onMediaDownload:C})=>{const[w,A]=M.useState(!1),[N,R]=M.useState(!1),[T,O]=M.useState(o.content),[D,U]=M.useState(0),[H,B]=M.useState(0),[P,Q]=M.useState(0),[Z,Y]=M.useState(!1),X=M.useRef(null),ee=M.useRef(null),q=o.sender_id===n.id,xe=o.reply_to,we=De=>{De.preventDefault(),c||h()},me=()=>{c&&h()},Ce=()=>{f(o),A(!1)},Oe=async()=>{try{await navigator.clipboard.writeText(o.content),A(!1)}catch(De){console.error("Failed to copy message:",De)}},V=()=>{navigator.clipboard.writeText(`Forwarded message:
"${o.content}"`),A(!1)},$=()=>{R(!0),A(!1)},ie=async()=>{if(T.trim()&&T!==o.content)try{const{error:De}=await Ot.from("messages").update({content:T.trim(),edited_at:new Date().toISOString()}).eq("id",o.id);if(De)throw De;o.content=T.trim(),o.edited_at=new Date().toISOString()}catch(De){console.error("Error editing message:",De)}R(!1)},ke=()=>{O(o.content),R(!1)},Ge=()=>{Y(!0),A(!1)},Ke=async()=>{Y(!1);try{const{error:De}=await Ot.from("messages").delete().eq("id",o.id);if(De)throw De;x&&x(o.id)}catch(De){console.error("Error deleting message:",De)}},ne=()=>{Y(!1)},pe=De=>new Date(De).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Le=De=>{U(Date.now()),B(De.touches[0].clientX),Q(De.touches[0].clientY)},Ue=De=>{const Je=Date.now()-D,mt=De.changedTouches[0].clientX,Wt=De.changedTouches[0].clientY,ft=mt-H,Mt=Wt-P,xn=Math.abs(ft),cn=Math.abs(Mt);if(xn>50&&xn>cn&&ft>0&&!c){Ce();return}Je>500&&!c&&we(De)},We=async(De,ve)=>{C&&await C(De,ve)},Ne=(De,ve)=>{v&&v(De,ve,o)},$e=()=>{let De;if(o.message_type==="news_share")try{const ve=JSON.parse(o.content);De=i.jsxs("div",{className:"news-share-message",onClick:()=>window.open(ve.link,"_blank"),children:[i.jsxs("div",{className:"news-share-header",children:[i.jsx(ci,{size:16}),i.jsx("span",{children:"Shared News"})]}),i.jsxs("div",{className:"news-share-content",children:[i.jsx("h4",{children:ve.title}),i.jsx("p",{children:i.jsx("strong",{children:ve.source})}),i.jsx("div",{className:"news-share-link",children:"Read Full Article "})]})]})}catch{De=i.jsx("p",{className:"message-text",children:o.content})}else if(o.message_type==="reminder")try{const ve=JSON.parse(o.content);ve.type==="reminder_request"&&(De=i.jsxs("div",{className:"reminder-message-card",children:[i.jsxs("div",{className:"reminder-header",children:[i.jsx(Hu,{size:16,className:"reminder-icon"}),i.jsx("span",{className:"reminder-label",children:"REMINDER REQUEST"})]}),i.jsxs("div",{className:"reminder-content",children:[i.jsx("h4",{className:"reminder-title",children:ve.title}),ve.description&&i.jsx("p",{className:"reminder-description",children:ve.description}),i.jsxs("div",{className:"reminder-details",children:[i.jsxs("div",{className:"reminder-time",children:[i.jsx(i0,{size:16}),new Date(ve.reminder_time).toLocaleString()]}),ve.location&&i.jsxs("div",{className:"reminder-location",children:[i.jsx(nS,{size:16}),ve.location]})]})]})]}))}catch{De=i.jsxs("p",{children:[i.jsx(a0,{size:16})," Reminder message"]})}else["image","video","audio","document"].includes(o.message_type)?De=i.jsx(JS,{message:o,isSent:q,onDownload:We,onView:Ne}):De=i.jsx("p",{className:"message-text",children:o.content});return De};return i.jsxs("div",{ref:ee,className:`message ${q?"sent":"received"} ${a?"selected":""} ${xe?"replied":""} ${o.is_vanished?"vanished":""}`,onClick:me,onTouchStart:Le,onTouchEnd:Ue,onContextMenu:De=>{De.preventDefault(),c||A(!w)},children:[c&&i.jsx("div",{className:`selection-indicator ${a?"selected":""}`,children:a&&i.jsx("span",{children:""})}),i.jsxs("div",{className:"message-content",children:[i.jsxs("div",{className:"message-bubble",ref:X,children:[xe&&i.jsxs("div",{className:"replied-message-container",children:[i.jsxs("div",{className:"replied-message-header",children:[i.jsx(Fp,{size:16}),i.jsx("span",{className:"replied-message-user",children:q?"You":"Them"})]}),i.jsx("div",{className:"replied-message-content",children:"Replied message"})]}),N?i.jsxs("div",{className:"message-edit",children:[i.jsx("input",{type:"text",value:T,onChange:De=>O(De.target.value),onKeyDown:De=>{De.key==="Enter"&&ie(),De.key==="Escape"&&ke()},autoFocus:!0}),i.jsxs("div",{className:"edit-actions",children:[i.jsx("button",{onClick:ie,children:"Save"}),i.jsx("button",{onClick:ke,children:"Cancel"})]})]}):$e(),o.vanish_at&&!o.is_vanished&&i.jsxs("div",{className:"vanish-timer",children:[i.jsx(i0,{size:16}),i.jsx("span",{children:"Timer"})]}),q&&i.jsx("span",{className:"message-status",children:o.is_read?i.jsx(r0,{size:16}):i.jsx(Z2,{size:16})})]}),i.jsx("div",{className:"message-meta",children:i.jsxs("span",{className:"message-time",children:[pe(o.created_at),o.edited_at&&" (edited)"]})}),w&&!c&&i.jsxs("div",{className:"message-actions",children:[i.jsx("button",{className:"message-arrow-btn",children:i.jsx(Zu,{size:16})}),i.jsxs("div",{className:"message-dropdown",children:[i.jsxs("div",{className:"message-option",onClick:Ce,children:[i.jsx(Fp,{size:16,className:"icon"})," Reply"]}),i.jsxs("div",{className:"message-option",onClick:Oe,children:[i.jsx($2,{size:16,className:"icon"})," Copy"]}),i.jsxs("div",{className:"message-option",onClick:V,children:[i.jsx(ty,{size:16,className:"icon"})," Forward"]}),q&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"message-option",onClick:$,children:[i.jsx($u,{size:16,className:"icon"})," Edit"]}),i.jsxs("div",{className:"message-option danger",onClick:Ge,children:[i.jsx(js,{size:16,className:"icon"})," Delete"]})]})]})]})]}),Z&&i.jsx("div",{className:"delete-modal-overlay",onClick:ne,children:i.jsxs("div",{className:"delete-modal",onClick:De=>De.stopPropagation(),children:[i.jsx("div",{className:"delete-modal-header",children:i.jsx("h3",{children:"Delete Message"})}),i.jsx("div",{className:"delete-modal-body",children:i.jsx("p",{children:"Are you sure you want to delete this message? This action cannot be undone."})}),i.jsxs("div",{className:"delete-modal-actions",children:[i.jsx("button",{className:"delete-cancel-btn",onClick:ne,style:{padding:"10px 20px",marginRight:"10px"},children:"Cancel"}),i.jsx("button",{className:"delete-confirm-btn",onClick:Ke,style:{padding:"10px 20px",background:"#dc3545",color:"white",border:"none",borderRadius:"4px"},children:"Confirm Delete"})]})]})})]})},tE=({messages:o,currentUser:n,selectedMessages:a,isSelectionMode:c,onMessageSelect:h,onReply:f,onDelete:x,onMediaView:v,onMediaDownload:C})=>{const A=(N=>{const R={};return N.forEach(T=>{const D=new Date(T.created_at).toDateString();R[D]||(R[D]=[]),R[D].push(T)}),R})(o);return!o||o.length===0?i.jsx("div",{className:"messages-wrapper",children:i.jsx("div",{className:"no-messages-placeholder",children:i.jsxs("div",{className:"no-messages-content",children:[i.jsx("div",{className:"no-messages-icon",children:""}),i.jsx("h3",{children:"No messages yet"}),i.jsx("p",{children:"Start the conversation by sending a message!"})]})})}):i.jsx("div",{className:"messages-wrapper",children:Object.entries(A).map(([N,R])=>i.jsxs(Dx.Fragment,{children:[i.jsx("div",{className:"date-separator",children:i.jsx("span",{children:new Date(R[0].created_at).toLocaleDateString()})}),R.map(T=>i.jsx(eE,{message:T,currentUser:n,isSelected:a.has(T.id),isSelectionMode:c,onSelect:()=>h(T.id),onReply:()=>f(T),onDelete:x,onMediaView:v,onMediaDownload:C},T.id))]},N))})},nE=({isVisible:o,onClose:n,onFileSelect:a})=>{const c=[{id:"camera",name:"Camera",icon:"fas fa-camera",color:"#E91E63"},{id:"gallery",name:"Gallery",icon:"fas fa-images",color:"#9C27B0"},{id:"video",name:"Video",icon:"fas fa-video",color:"#FF5722"},{id:"audio",name:"Audio",icon:"fas fa-microphone",color:"#FF9800"},{id:"location",name:"Location",icon:"fas fa-map-marker-alt",color:"#4CAF50"},{id:"reminder",name:"Reminder",icon:"fas fa-bell",color:"#00BCD4"}],h=f=>{console.log("Option clicked:",f.name),a&&a({type:f.id,name:f.name}),n&&n()};return o?i.jsx("div",{className:"whatsapp-attachment-overlay",children:i.jsxs("div",{className:`whatsapp-attachment-popup ${o?"open":""}`,children:[i.jsxs("div",{className:"whatsapp-attachment-header",children:[i.jsx("h3",{children:"Share"}),i.jsx("button",{onClick:n,className:"whatsapp-attachment-close",children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"whatsapp-menu-grid",children:c.map(f=>i.jsxs("div",{className:"whatsapp-menu-item",onClick:()=>h(f),children:[i.jsx("div",{className:"whatsapp-icon-circle",style:{backgroundColor:f.color},children:i.jsx("i",{className:f.icon})}),i.jsx("span",{className:"whatsapp-item-name",children:f.name})]},f.id))})]})}):null},sE=({onSendMessage:o,onTyping:n,replyingTo:a,onCancelReply:c,chatId:h,receiverId:f})=>{const[x,v]=M.useState(""),[C,w]=M.useState(!1),[A,N]=M.useState(!1),[R,T]=M.useState(null),[O,D]=M.useState(!1),U=M.useRef(null),H=["Hello!","How are you?","Thank you!","Sorry","Okay","Yes","No","Please","Good morning","Good night"],B=q=>{v(q.target.value);const xe=U.current;xe&&(xe.style.height="auto",xe.style.height=Math.min(xe.scrollHeight,160)+"px"),n()},P=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),Q())},Q=()=>{if(x.trim()){o(x.trim()),v("");const q=U.current;q&&(q.style.height="auto")}},Z=()=>{console.log("Attachment button clicked! Current state:",C),w(!C),N(!1),console.log("New state:",!C)},Y=async q=>{D(!0);try{if(q.type==="location"){const xe=` Location: ${q.address}`;o(xe)}else if(q.type==="contact"){const xe=` Contact: ${q.name}${q.phones.length>0?` (${q.phones[0]})`:""}`;o(xe)}else if(q.type==="reminder"){const xe=` Reminder: ${q.message}`;o(xe)}else{const xe=q.fileName||"File";o(xe,{mediaUrl:q.mediaUrl,mediaType:q.mediaType,fileName:q.fileName,fileSize:q.fileSize,mimeType:q.mimeType})}v(""),U.current&&(U.current.style.height="auto")}catch(xe){console.error("Error handling file selection:",xe),alert("Failed to process file: "+xe.message)}finally{D(!1)}},X=q=>{o(q),N(!1)},ee=()=>{N(!A),w(!1)};return i.jsxs("div",{className:"chat-input-container",children:[a&&i.jsxs("div",{className:"reply-preview-bar",children:[i.jsxs("div",{className:"reply-preview-content",children:[i.jsxs("div",{className:"reply-author",children:["Replying to ",a.sender_id===JSON.parse(localStorage.getItem("currentUser")).id?"You":"Them"]}),i.jsx("div",{className:"reply-text",children:a.content})]}),i.jsx("button",{className:"reply-close-btn",onClick:c,children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsxs("div",{className:"input-row",children:[i.jsx("button",{className:"btn-attach",onClick:Z,title:"Attach Media",children:i.jsx("i",{className:"fas fa-paperclip"})}),i.jsx("button",{className:"btn-quick-reply",onClick:ee,title:"Quick Replies",children:i.jsx("i",{className:"fas fa-comment-dots"})}),i.jsx("textarea",{ref:U,className:"chat-input",placeholder:"Type a message...",value:x,onChange:B,onKeyPress:P,rows:2,disabled:O}),i.jsx("button",{className:"btn-send",onClick:Q,disabled:!x.trim()||O,children:i.jsx("span",{id:"sendIcon",children:O?i.jsx("i",{className:"fas fa-spinner fa-spin"}):i.jsx("i",{className:"fas fa-paper-plane"})})})]}),i.jsx(nE,{isVisible:C,onFileSelect:Y,onClose:()=>w(!1),chatId:h,receiverId:f}),A&&i.jsx("div",{className:"quick-replies-menu",children:H.map((q,xe)=>i.jsx("button",{className:"quick-reply-option",onClick:()=>X(q),children:q},xe))})]})},aE=({isVisible:o})=>o?i.jsxs("div",{className:"typing-indicator",children:[i.jsxs("span",{className:"typing-dots",children:[i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{})]}),i.jsx("span",{className:"typing-text",children:"typing..."})]}):null,rE=()=>{const[o,n]=M.useState(new Map),[a,c]=M.useState(new Map),h=M.useCallback(async(R,T={})=>(console.log("MediaDownloader: Starting download for mediaUrl:",R),a.has(R)&&!T.forceDownload?(console.log("MediaDownloader: Returning cached media"),a.get(R)):new Promise(async(O,D)=>{try{if(console.log("MediaDownloader: Processing URL..."),!R||R==="undefined"||R==="null"){console.error("MediaDownloader: Invalid media URL"),D(new Error("Invalid media URL"));return}const U=f(R);console.log("MediaDownloader: Created fileInfo:",U);const H={mediaId:R,fileInfo:U,progress:0,status:"downloading"};n(Z=>new Map(Z).set(R,H)),v(H,0),console.log("MediaDownloader: Fetching file from:",U.storage_url);const B=await x(U,H);console.log("MediaDownloader: File fetched, size:",B.size);const P=URL.createObjectURL(B),Q={mediaId:R,objectUrl:P,blob:B,fileInfo:U};c(Z=>new Map(Z).set(R,Q)),v(H,100),H.status="completed",console.log("MediaDownloader: Download completed successfully"),O(Q)}catch(U){console.error("MediaDownloader: Download failed:",U),D(U)}finally{n(U=>{const H=new Map(U);return H.delete(R),H})}})),[a]),f=M.useCallback(R=>{const T=R.split("/"),O=T[T.length-1]||"unknown";let D="application/octet-stream";R.includes("/images/")?D="image/jpeg":R.includes("/videos/")?D="video/mp4":R.includes("/audios/")?D="audio/mpeg":R.includes("/documents/")&&(D="application/pdf");let U="unknown";return R.includes("/images/")?U="image":R.includes("/videos/")?U="video":R.includes("/audios/")?U="audio":R.includes("/documents/")&&(U="document"),{id:R,file_name:O,filename:O,file_size:0,mime_type:D,storage_url:R,storage_path:"",storage_bucket:"media",file_type:U}},[]),x=M.useCallback(async(R,T)=>{const O=await fetch(R.storage_url);if(!O.ok)throw new Error("Download failed");const D=O.headers.get("content-length"),U=parseInt(D,10);let H=0;const B=O.body.getReader(),P=[];for(;;){const{done:Z,value:Y}=await B.read();if(Z)break;if(P.push(Y),H+=Y.length,U>0){const X=Math.round(H/U*100);v(T,X)}}return new Blob(P,{type:R.mime_type})},[]),v=M.useCallback((R,T)=>{R.progress=T,window.dispatchEvent(new CustomEvent("download-progress",{detail:{mediaId:R.mediaId,progress:T,status:R.status,fileInfo:R.fileInfo}}))},[]),C=M.useCallback(R=>{const T=o.get(R);return T?{progress:T.progress,status:T.status,fileInfo:T.fileInfo}:null},[o]),w=M.useCallback(()=>{a.forEach(R=>{R.objectUrl&&URL.revokeObjectURL(R.objectUrl)}),c(new Map)},[a]),A=M.useCallback(async R=>{try{console.log("MediaDownloader: Getting file info for mediaId:",R);const{data:T,error:O}=await Ot.from("media").select("*").eq("id",R).single();if(O||!T)return console.error("MediaDownloader: Error fetching media record:",O),{success:!1,error:O?.message||"Media not found"};const D={id:T.id,file_name:T.file_name,filename:T.file_name,file_size:T.file_size||0,mime_type:T.mime_type,storage_url:T.storage_url,storage_path:T.storage_path,storage_bucket:T.storage_bucket,file_type:T.file_type};return console.log("MediaDownloader: File info retrieved:",D),{success:!0,data:D}}catch(T){return console.error("MediaDownloader: Error in getFileInfo:",T),{success:!1,error:T.message}}},[]),N=M.useCallback(R=>{const T=a.get(R);T&&T.objectUrl&&URL.revokeObjectURL(T.objectUrl),c(O=>{const D=new Map(O);return D.delete(R),D})},[a]);return{downloadMedia:h,activeDownloads:o,cache:a,getDownloadStatus:C,clearCache:w,getFileInfo:A,removeFromCache:N}},iE=()=>{const[o,n]=M.useState(null),[a,c]=M.useState(!1),[h,f]=M.useState(null),{downloadMedia:x}=rE(),v=M.useCallback(async(T,O=null,D={})=>{try{if(c(!0),f(null),!O){const B=await A(T);if(!B.success)throw new Error(B.error);O=B.data}n({mediaId:T,fileInfo:O,options:D});const H={...await x(O.storage_url),fileInfo:O};n(B=>({...B,media:H})),c(!1)}catch(U){console.error("Error opening media:",U),f("Failed to load media"),c(!1)}},[x]),C=M.useCallback(()=>{n(null),f(null),c(!1)},[]),w=M.useCallback(()=>{if(!o?.fileInfo)return;const{fileInfo:T}=o,O=document.createElement("a");O.href=T.storage_url,O.download=T.file_name,O.click()},[o]),A=M.useCallback(async T=>{try{console.log("MediaViewer: Getting file info for mediaId:",T);const{data:O,error:D}=await Ot.from("media").select("*").eq("id",T).single();if(D||!O)return console.error("MediaViewer: Error fetching media record:",D),{success:!1,error:D?.message||"Media not found"};const U={id:O.id,file_name:O.file_name,filename:O.file_name,file_size:O.file_size||0,mime_type:O.mime_type,storage_url:O.storage_url,storage_path:O.storage_path,storage_bucket:O.storage_bucket,file_type:O.file_type};return console.log("MediaViewer: File info retrieved:",U),{success:!0,data:U}}catch(O){return console.error("MediaViewer: Error in getFileInfo:",O),{success:!1,error:O.message}}},[]),N=M.useCallback(T=>{if(T===0)return"0 Bytes";const O=1024,D=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(T)/Math.log(O));return Math.round(T/Math.pow(O,U)*100)/100+" "+D[U]},[]),R=M.useCallback(T=>{if(isNaN(T))return"0:00";const O=Math.floor(T/60),D=Math.floor(T%60);return`${O}:${D.toString().padStart(2,"0")}`},[]);return M.useEffect(()=>()=>{o?.media?.objectUrl&&URL.revokeObjectURL(o.media.objectUrl)},[o]),{currentMedia:o,isLoading:a,error:h,openMedia:v,closeMedia:C,downloadCurrent:w,formatFileSize:N,formatTime:R}},oE=({isOpen:o,onClose:n,mediaId:a,fileInfo:c,options:h={}})=>{const{currentMedia:f,isLoading:x,error:v,openMedia:C,closeMedia:w,downloadCurrent:A,formatFileSize:N}=iE(),[R,T]=M.useState(null),O=M.useRef(null);M.useEffect(()=>{o&&a?C(a,c,h):o||w()},[o,a,c,h,C,w]),M.useEffect(()=>{const H=B=>{B.key==="Escape"&&o&&n()};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[o,n]);const D=H=>{H.target===H.currentTarget&&n()},U=()=>{if(!f?.media)return null;const{fileInfo:H,objectUrl:B}=f.media;switch(H.file_type){case"image":case"avatar":return i.jsx("img",{src:B,alt:H.file_name,className:"media-viewer-image",onLoad:()=>console.log("Image loaded"),onError:()=>console.error("Image failed to load")});case"video":return i.jsxs("div",{className:"media-viewer-video-container",children:[i.jsx("video",{ref:O,src:B,controls:!0,className:"media-viewer-video",autoPlay:!1,onLoadedData:()=>console.log("Video loaded"),onError:()=>console.error("Video failed to load")}),R&&i.jsx("div",{className:"media-viewer-controls",children:R})]});case"audio":return i.jsxs("div",{className:"media-viewer-audio-container",children:[i.jsx("div",{className:"audio-icon",children:i.jsx("i",{className:"fas fa-music"})}),i.jsxs("div",{className:"audio-info",children:[i.jsx("h3",{children:H.file_name}),i.jsx("p",{children:N(H.file_size)})]}),i.jsx("audio",{src:B,controls:!0,className:"media-viewer-audio",onLoadedData:()=>console.log("Audio loaded"),onError:()=>console.error("Audio failed to load")})]});case"document":return H.mime_type==="application/pdf"?i.jsx("iframe",{src:B,className:"media-viewer-pdf",title:H.file_name}):i.jsx("div",{className:"media-viewer-document-container",children:i.jsxs("div",{className:"document-preview",children:[i.jsx("i",{className:"fas fa-file-alt fa-5x"}),i.jsx("h3",{children:H.file_name}),i.jsx("p",{children:N(H.file_size)}),i.jsxs("button",{className:"btn-primary",onClick:A,children:[i.jsx("i",{className:"fas fa-download"})," Download"]})]})});default:return i.jsxs("div",{className:"media-viewer-error",children:[i.jsx("i",{className:"fas fa-exclamation-circle"}),i.jsx("p",{children:"Unsupported media type"})]})}};return o?i.jsx("div",{className:"media-viewer-overlay",onClick:D,children:i.jsxs("div",{className:"media-viewer-content",children:[i.jsxs("div",{className:"media-viewer-header",children:[i.jsx("button",{className:"media-viewer-close",onClick:n,title:"Close",children:i.jsx("i",{className:"fas fa-times"})}),i.jsx("div",{className:"media-viewer-info",children:f?.fileInfo&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"media-filename",children:f.fileInfo.file_name}),i.jsx("span",{className:"media-filesize",children:N(f.fileInfo.file_size)})]})}),f?.fileInfo?.file_type!=="avatar"&&!h.hideDownload&&i.jsx("button",{className:"media-viewer-download",onClick:A,title:"Download",children:i.jsx("i",{className:"fas fa-download"})})]}),i.jsxs("div",{className:"media-viewer-body",children:[x&&i.jsxs("div",{className:"media-viewer-loading",children:[i.jsx("div",{className:"spinner"}),i.jsx("p",{children:"Loading..."})]}),v&&i.jsxs("div",{className:"media-viewer-error",children:[i.jsx("i",{className:"fas fa-exclamation-circle"}),i.jsx("p",{children:v})]}),i.jsx("div",{className:"media-viewer-container",children:U()})]})]})}):null},ny=M.createContext(),lE=({children:o})=>{const[n,a]=M.useState(()=>localStorage.getItem("theme")||"light"),c=()=>{a(f=>f==="light"?"dark":"light")};M.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),n==="dark"?(document.body.classList.add("dark-mode"),document.body.classList.remove("light-mode")):(document.body.classList.add("light-mode"),document.body.classList.remove("dark-mode")),localStorage.setItem("theme",n)},[n]);const h={theme:n,toggleTheme:c,isDark:n==="dark",isLight:n==="light"};return i.jsx(ny.Provider,{value:h,children:o})},Ko=()=>{const o=M.useContext(ny);if(!o)throw new Error("useTheme must be used within a ThemeProvider");return o},Vi=()=>{const{isDark:o}=Ko(),n=o;return i.jsxs("div",{className:`messaging-loader-overlay transition-colors duration-300 ${n?"bg-slate-900":"bg-gray-100"}`,children:[i.jsx("style",{children:`
        @keyframes simpleBounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-5px); }
        }
        @keyframes floatCloud {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-6px); }
        }
        @keyframes shadowPulse {
          0%, 100% { transform: scaleX(1); opacity: 0.3; }
          50% { transform: scaleX(0.8); opacity: 0.1; }
        }
        @keyframes signalBlink {
          0%, 100% { opacity: 0.3; }
          50% { opacity: 1; }
        }
      `}),i.jsx("div",{className:"relative flex flex-col items-center",children:i.jsxs("svg",{width:"120",height:"80",viewBox:"0 0 120 80",className:"overflow-visible",children:[i.jsxs("g",{style:{animation:"floatCloud 3s ease-in-out infinite"},children:[i.jsx("path",{d:"M85 20 Q92 15 99 20",fill:"none",stroke:n?"#3b82f6":"#2563eb",strokeWidth:"2.5",strokeLinecap:"round",style:{animation:"signalBlink 2s infinite",animationDelay:"0s"}}),i.jsx("path",{d:"M88 28 Q92 25 96 28",fill:"none",stroke:n?"#3b82f6":"#2563eb",strokeWidth:"2.5",strokeLinecap:"round",style:{animation:"signalBlink 2s infinite",animationDelay:"0.5s"}}),i.jsx("path",{d:"M35,55 L85,55 C96.046,55 105,46.046 105,35 C105,23.954 96.046,15 85,15 C82.5,15 80.15,15.5 78,16.5 C74.5,9.5 67.5,5 59,5 C48,5 39,13 37.5,23.5 C36.5,23.2 35.5,23 34.5,23 C21,23 10,34 10,47.5 C10,51.6 13.4,55 17.5,55 L35,55 Z",fill:n?"#1e293b":"#ffffff",stroke:n?"#3b82f6":"#2563eb",strokeWidth:"3",strokeLinejoin:"round",className:"drop-shadow-lg"}),i.jsx("circle",{cx:"40",cy:"37",r:"4",fill:n?"#60a5fa":"#3b82f6",style:{animation:"simpleBounce 1s infinite ease-in-out",animationDelay:"0s"}}),i.jsx("circle",{cx:"60",cy:"37",r:"4",fill:n?"#60a5fa":"#3b82f6",style:{animation:"simpleBounce 1s infinite ease-in-out",animationDelay:"0.2s"}}),i.jsx("circle",{cx:"80",cy:"37",r:"4",fill:n?"#60a5fa":"#3b82f6",style:{animation:"simpleBounce 1s infinite ease-in-out",animationDelay:"0.4s"}})]}),i.jsx("ellipse",{cx:"60",cy:"70",rx:"35",ry:"4",fill:n?"#0f172a":"#cbd5e1",style:{animation:"shadowPulse 3s ease-in-out infinite"}})]})}),i.jsx("div",{className:"mt-6 flex flex-col items-center",children:i.jsx("p",{className:`text-sm font-bold tracking-[0.2em] ${n?"text-blue-400":"text-blue-600"}`,children:"CONNECTING"})})]})};class cE{static play(n="default"){try{const a={default:"/assets/audio/nice_ring_tones.mp3",message:"/assets/audio/nice_ring_tones.mp3",call:"/assets/audio/professional.mp3",reminder:"/assets/audio/Sakura-Girl-Wake-Up-chosic.com_.mp3"},c=a[n]||a.default,h=new Audio(c);h.volume=.5;const f=h.play();return f!==void 0&&f.catch(x=>{console.log("Audio play failed:",x)}),!0}catch(a){return console.error("Error playing notification sound:",a),!1}}static playMessageNotification(){return this.play("message")}static playCallNotification(){return this.play("call")}static playReminderNotification(){return this.play("reminder")}}const uE=(o,n)=>{const{supabase:a}=vs(),c=M.useCallback(h=>{n(h.new),cE.playMessageNotification()},[n]);M.useEffect(()=>{if(!o||!a)return;const h=a.channel(`chat_messages_${o}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${o}`},c).subscribe();return()=>{h.unsubscribe()}},[o,a,c])},dE=(o,n)=>{const{supabase:a}=vs(),[c,h]=M.useState(!1);M.useEffect(()=>{if(!o||!a)return;const x=a.channel(`typing_${o}`).on("broadcast",{event:"typing"},v=>{v.payload.userId!==n&&(h(v.payload.isTyping),v.payload.isTyping&&setTimeout(()=>h(!1),3e3))}).subscribe();return()=>x.unsubscribe()},[o,n,a]);const f=M.useCallback(x=>{if(!a||!o)return;a.channel(`typing_${o}`).send({type:"broadcast",event:"typing",payload:{userId:n,isTyping:x}})},[a,o,n]);return{isOtherUserTyping:c,sendTypingStatus:f}},hE=(o,n)=>{const{supabase:a}=vs();M.useEffect(()=>{if(!o||!a)return;const c=a.channel(`message_status_${o}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`chat_id=eq.${o}`},h=>{n(h.new)}).subscribe();return()=>c.unsubscribe()},[o,n,a])},l0=()=>{const{chatId:o,otherUserId:n,userId:a}=Xu(),c=us(),{supabase:h}=vs(),{chatTheme:f,chatThemes:x,selectTheme:v,setChatId:C,setScrollPercentage:w}=R0(),{startCall:A}=di(),{user:N,loading:R,isAuthenticated:T}=La();M.useEffect(()=>{o&&C(o)},[o,C]);const[O,D]=M.useState([]),[U,H]=M.useState(null),[B,P]=M.useState(null),[Q,Z]=M.useState(new Set),[Y,X]=M.useState(!1),[ee,q]=M.useState(!1),[xe,we]=M.useState(!1),[me,Ce]=M.useState(!1),[Oe,V]=M.useState(0),[$,ie]=M.useState(!0),[ke,Ge]=M.useState(!1),[Ke,ne]=M.useState(!1),[pe,Le]=M.useState(!1),[Ue,We]=M.useState(""),[Ne,$e]=M.useState([]),[De,ve]=M.useState(!1),[Je,mt]=M.useState(!1),[Wt,ft]=M.useState(null),Mt=M.useRef(null),xn=M.useRef(null),cn=M.useRef(null),qt=o&&o!=="new"?o:null,At=M.useCallback(Ee=>{D(_e=>[..._e,Ee]),$?jn():V(_e=>_e+1)},[$]);uE(qt,At);const{isOtherUserTyping:ht,sendTypingStatus:Hn}=dE(qt,N?.id),ze=M.useCallback(Ee=>{D(_e=>_e.map(Ve=>Ve.id===Ee.id?Ee:Ve))},[]);hE(qt,ze),M.useEffect(()=>{if(!R&&!T){c("/login");return}return!R&&T&&N&&Is(),()=>{Me()}},[o,n,a,R,T,N]),M.useEffect(()=>{qn()},[O]),M.useEffect(()=>{const Ee=JSON.parse(localStorage.getItem("mutedChats")||"{}");q(!!Ee[o]);const _e=JSON.parse(localStorage.getItem("tempChats")||"{}");we(!!_e[o])},[o,N]);const Is=async()=>{try{a&&(!o||o==="new")?await Fe(N,a):o&&n&&(await nt(n),await Ct())}catch(Ee){console.error("Error initializing chat:",Ee)}},Me=()=>{cn.current&&clearTimeout(cn.current)},Fe=async(Ee,_e)=>{try{const{data:Ve,error:Dn}=await h.from("chats").select("id").or(`and(user1_id.eq.${Ee.id},user2_id.eq.${_e}),and(user1_id.eq.${_e},user2_id.eq.${Ee.id})`).single();if(Ve&&!Dn){c(`/chat/${Ve.id}/${_e}`,{replace:!0});return}const{data:Vs,error:fs}=await h.from("chats").insert([{user1_id:Ee.id,user2_id:_e,last_message:null,last_message_time:new Date().toISOString()}]).select().single();if(fs)throw fs;c(`/chat/${Vs.id}/${_e}`,{replace:!0})}catch(Ve){console.error("Error handling new chat:",Ve),c("/",{replace:!0})}},nt=async Ee=>{try{const{data:_e,error:Ve}=await h.from("users").select("*").eq("id",Ee).single();if(Ve)throw Ve;H(_e)}catch(_e){console.error("Error loading user info:",_e)}},Ct=async()=>{try{const{data:Ee,error:_e}=await h.from("messages").select("*").limit(10),{data:Ve,error:Dn}=await h.from("messages").select("*").eq("chat_id",o).order("created_at",{ascending:!0});if(Dn)throw Dn;D(Ve||[]),await jn()}catch(Ee){console.error("Error loading messages:",Ee)}},Tn=async()=>{if(!(!window.confirm(`Block ${U.name}? They won't be able to message or call you.`)||!N))try{const{error:_e}=await h.from("blocked_users").insert([{blocker_id:N.id,blocked_id:U.id}]);if(_e)throw _e;c("/")}catch(_e){console.error("Error blocking user:",_e)}},sn=async(Ee,_e=null)=>{if(!(!Ee.trim()&&!_e||!N))try{const Ve={id:crypto.randomUUID(),chat_id:o,sender_id:N.id,receiver_id:n,content:Ee.trim()||(_e?_e.fileName:""),message_type:_e?_e.mediaType:"text",is_read:!1};_e&&(Ve.media_url=_e.mediaUrl,Ve.media_type=_e.mediaType,Ve.file_name=_e.fileName,Ve.file_size=_e.fileSize);const{data:Dn,error:Vs}=await h.from("messages").insert([Ve]).select();if(Vs)throw Vs;Dn&&Dn[0]&&D(Wi=>[...Wi,Dn[0]]);const fs=_e?` ${_e.fileName}`:Ee.substring(0,50);await h.from("chats").update({last_message:fs,last_message_time:new Date().toISOString()}).eq("id",o),P(null)}catch(Ve){console.error("Error sending message:",Ve)}},Vt=()=>{Hn(!0),cn.current&&clearTimeout(cn.current),cn.current=setTimeout(()=>{Hn(!1)},3e3)},qn=()=>{Mt.current?.scrollIntoView({behavior:"smooth"}),ie(!0)},jn=M.useCallback(async()=>{try{if(!N||!o||o==="new")return;await h.from("messages").update({is_read:!0}).eq("chat_id",o).eq("receiver_id",N.id).eq("is_read",!1)}catch(Ee){console.error("Error marking messages as read:",Ee)}},[N,o,h]),ts=Ee=>{P(Ee)},Ut=()=>{P(null)},je=Ee=>{Z(_e=>{const Ve=new Set(_e);return Ve.has(Ee)?Ve.delete(Ee):Ve.add(Ee),X(Ve.size>0),Ve})},lt=()=>{Z(new Set),X(!1)},gt=()=>{Q.size!==0&&Le(!0)},Qt=async()=>{Le(!1);try{const{error:Ee}=await h.from("messages").delete().in("id",Array.from(Q));if(Ee)throw Ee;D(_e=>_e.filter(Ve=>!Q.has(Ve.id))),lt()}catch(Ee){console.error("Error deleting messages:",Ee),alert("Failed to delete messages")}},Os=()=>{Le(!1)},va=()=>{const _e=O.filter(Ve=>Q.has(Ve.id)).map(Ve=>`${Ve.sender_id===N.id?"You":U.name}: ${Ve.content}`).join(`

`);navigator.clipboard.writeText(`Forwarded messages:

${_e}`),lt(),alert("Messages copied to clipboard for forwarding")},qs=()=>{const _e=O.filter(Ve=>Q.has(Ve.id)).map(Ve=>Ve.content).join(`

`);navigator.clipboard.writeText(_e),lt(),alert("Messages copied to clipboard")},wt=()=>{if(!n||n==="undefined"){alert("User information not available");return}c(`/user-details/${n}`)},Rn=()=>{c(`/create-reminder?userId=${n}`)},he=async()=>{try{const Ee=!ee,_e=JSON.parse(localStorage.getItem("mutedChats")||"{}");Ee?_e[o]=!0:delete _e[o],localStorage.setItem("mutedChats",JSON.stringify(_e)),q(Ee)}catch(Ee){console.error("Error toggling mute:",Ee)}},qe=()=>{ne(!0)},ct=async Ee=>{if(!(!Ee.trim()||!o)){ve(!0);try{const{data:_e,error:Ve}=await h.from("messages").select("*").eq("chat_id",o).ilike("content",`%${Ee}%`).order("created_at",{ascending:!1}).limit(50);if(Ve)throw Ve;$e(_e||[])}catch(_e){console.error("Error searching messages:",_e),$e([])}finally{ve(!1)}}},an=Ee=>{const _e=Ee.target.value;We(_e),_e.trim()?ct(_e):$e([])},Pt=Ee=>{const _e=document.getElementById(`message-${Ee}`);_e&&(_e.scrollIntoView({behavior:"smooth",block:"center"}),_e.style.backgroundColor="rgba(76, 175, 80, 0.2)",setTimeout(()=>{_e.style.backgroundColor=""},2e3)),ne(!1),We(""),$e([])},In=()=>{Ge(!0)},G=async Ee=>{await v(Ee),Ge(!1)},Te=async()=>{try{const Ee=!xe,_e=JSON.parse(localStorage.getItem("tempChats")||"{}");Ee?_e[o]={enabled:!0,duration:1440*60*1e3}:delete _e[o],localStorage.setItem("tempChats",JSON.stringify(_e)),we(Ee)}catch(Ee){console.error("Error toggling temp chat:",Ee)}},Tt=()=>{alert("Temp chat settings coming soon!")},On=async()=>{if(window.confirm("Clear all messages in this chat? This cannot be undone."))try{const{error:_e}=await h.from("messages").delete().eq("chat_id",o);if(_e)throw _e;D([]),await h.from("chats").update({last_message:null,last_message_time:new Date().toISOString()}).eq("id",o)}catch(_e){console.error("Error clearing chat:",_e),alert("Failed to clear chat. Please try again.")}},ds=async()=>{try{const{callId:Ee}=await A(U.id,"voice");c(`/call/${Ee}`)}catch(Ee){console.error("Failed to start voice call:",Ee),alert("Failed to start call: "+Ee.message)}},yn=async()=>{try{const{callId:Ee}=await A(U.id,"video");c(`/call/${Ee}`)}catch(Ee){console.error("Failed to start video call:",Ee),alert("Failed to start call: "+Ee.message)}},Kt=Ee=>{const _e=Ee.target,Ve=_e.scrollHeight-_e.scrollTop-_e.clientHeight,Dn=Ve<50;if(Ce(Ve>300),ie(Dn),_e.scrollHeight>_e.clientHeight){const Vs=_e.scrollTop/(_e.scrollHeight-_e.clientHeight)*100;w(Vs)}else w(0);Dn&&Oe>0&&(V(0),jn())},ns=()=>{Mt.current?.scrollIntoView({behavior:"smooth"}),Ce(!1),V(0),ie(!0),jn()},He=(Ee,_e,Ve)=>{const Dn={file_name:Ve.file_name||"Unknown",file_size:Ve.file_size||0,mime_type:Ve.media_type||"image/jpeg",storage_url:Ee,file_type:_e};ft({fileInfo:Dn}),mt(!0)},hs=async(Ee,_e)=>{try{const Ve=document.createElement("a");Ve.href=Ee,Ve.download=`media_${_e}`,Ve.target="_blank",document.body.appendChild(Ve),Ve.click(),document.body.removeChild(Ve)}catch(Ve){console.error("Download failed:",Ve),alert("Failed to download media")}};return!U||!N?i.jsx(Vi,{}):i.jsxs("div",{className:"chat-screen",children:[i.jsxs("header",{className:"chat-header",children:[i.jsx("button",{className:"back-btn",onClick:()=>c("/"),children:i.jsx(Qo,{size:20})}),i.jsxs("div",{className:"chat-user-info",onClick:wt,style:{cursor:"pointer"},children:[i.jsx("div",{className:"user-avatar",children:U.avatar?parseInt(U.avatar)?i.jsx("img",{src:Rs.find(Ee=>Ee.id===parseInt(U.avatar))?.path||U.avatar,alt:U.name}):i.jsx("img",{src:U.avatar,alt:U.name}):U.name.charAt(0).toUpperCase()}),i.jsxs("div",{className:"user-details",children:[i.jsx("h3",{className:"user-name",children:U.name}),i.jsx("p",{className:"user-status",children:ht?"typing...":U.is_online?"Online":"Offline"})]})]}),i.jsxs("div",{className:"chat-actions",children:[i.jsx("button",{className:"icon-btn",onClick:ds,title:"Voice Call",children:i.jsx(Hs,{size:20})}),i.jsx("button",{className:"icon-btn",onClick:yn,title:"Video Call",children:i.jsx(hi,{size:20})}),i.jsx(k0,{items:[{icon:i.jsx(M0,{size:16}),label:"View Contact",onClick:wt},{icon:i.jsx(Hu,{size:16}),label:"Create Reminder",onClick:Rn},{icon:ee?i.jsx(Hu,{size:16}):i.jsx(K2,{size:16}),label:ee?"Unmute Notifications":"Mute Notifications",onClick:he},{icon:i.jsx($l,{size:16}),label:"Search Messages",onClick:qe},{icon:i.jsx(fS,{size:16}),label:"Themes",onClick:In},{divider:!0},{icon:i.jsx(i0,{size:16}),label:xe?"Disable Temporary Chat":"Enable Temporary Chat",onClick:Te},{icon:i.jsx(Xl,{size:16}),label:"Temp Chat Settings",onClick:Tt,disabled:!xe},{icon:i.jsx(js,{size:16}),label:"Clear Chat",onClick:On},{divider:!0},{icon:i.jsx(Fu,{size:16}),label:"Block User",onClick:Tn,danger:!0}]})]})]}),Y&&i.jsxs("div",{className:"selection-toolbar",children:[i.jsx("button",{className:"selection-close-btn",onClick:lt,children:""}),i.jsxs("div",{className:"selection-info",children:[Q.size," selected"]}),i.jsxs("div",{className:"selection-actions",children:[i.jsx("button",{className:"selection-action-btn",title:"Copy",onClick:qs,children:i.jsx($2,{size:16})}),i.jsx("button",{className:"selection-action-btn",title:"Forward",onClick:va,children:i.jsx(w_,{size:16})}),i.jsx("button",{className:"selection-action-btn",title:"Delete",onClick:gt,children:i.jsx(js,{size:16})})]})]}),i.jsxs("div",{className:"messages-container",onScroll:Kt,ref:xn,children:[i.jsx(tE,{messages:O,currentUser:N,selectedMessages:Q,isSelectionMode:Y,onMessageSelect:je,onReply:ts,onDelete:Ee=>D(_e=>_e.filter(Ve=>Ve.id!==Ee)),onMediaView:He,onMediaDownload:hs}),i.jsx(aE,{isVisible:ht}),i.jsx("div",{ref:Mt}),me&&i.jsxs("button",{className:"scroll-bottom-btn",onClick:ns,children:[i.jsx(p_,{size:20}),Oe>0&&i.jsx("span",{className:"unread-count",children:Oe})]})]}),i.jsx(sE,{onSendMessage:sn,onTyping:Vt,replyingTo:B,onCancelReply:Ut,chatId:o,receiverId:n}),i.jsx(wr,{isOpen:Ke,onClose:()=>{ne(!1),We(""),$e([])},title:"Search Messages",size:"medium",children:i.jsxs("div",{className:"search-modal-content",children:[i.jsx("div",{className:"search-input-container",children:i.jsx("input",{type:"text",placeholder:"Search messages...",value:Ue,onChange:an,className:"search-input",autoFocus:!0})}),i.jsx("div",{className:"search-results",children:De?i.jsx(Vi,{}):Ne.length>0?Ne.map(Ee=>i.jsxs("div",{className:"search-result-item",onClick:()=>Pt(Ee.id),children:[i.jsx("div",{className:"search-result-content",children:Ee.content}),i.jsx("div",{className:"search-result-time",children:new Date(Ee.created_at).toLocaleDateString()})]},Ee.id)):Ue.trim()?i.jsx("div",{className:"no-results",children:"No messages found"}):i.jsx("div",{className:"search-placeholder",children:"Type to search messages"})})]})}),i.jsx(wr,{isOpen:pe,onClose:Os,title:`Delete ${Q.size} message(s)?`,size:"small",children:i.jsxs("div",{className:"delete-confirmation-content",children:[i.jsx("p",{children:"Are you sure you want to delete the selected messages? This action cannot be undone."}),i.jsxs("div",{className:"delete-modal-actions",children:[i.jsx("button",{className:"delete-cancel-btn",onClick:Os,children:"Cancel"}),i.jsx("button",{className:"delete-confirm-btn",onClick:Qt,children:"Confirm Delete"})]})]})}),i.jsx(wr,{isOpen:ke,onClose:()=>Ge(!1),title:"Choose Theme",size:"large",children:i.jsx("div",{className:"theme-selector",children:i.jsx("div",{className:"theme-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"20px"},children:Object.entries(x).map(([Ee,_e])=>i.jsxs("div",{className:`theme-card ${f===Ee?"active":""}`,onClick:()=>G(Ee),style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",transition:"all 0.3s ease",transform:f===Ee?"scale(1.05)":"scale(1)",filter:f===Ee?"brightness(1.1)":"brightness(1)"},children:[i.jsxs("div",{className:"theme-preview-card",style:{width:"120px",height:"80px",borderRadius:"12px",overflow:"hidden",border:f===Ee?"3px solid #25d366":"2px solid rgba(0,0,0,0.1)",boxShadow:f===Ee?"0 8px 25px rgba(37, 211, 102, 0.3)":"0 4px 15px rgba(0,0,0,0.1)",position:"relative",background:"white"},children:[i.jsx("div",{style:{width:"100%",height:"65%",background:_e.background,backgroundSize:"cover",backgroundPosition:"center"}}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",height:"35%",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)"},children:[i.jsx("div",{style:{width:"32px",height:"10px",borderRadius:"6px",background:_e.sentMessage.background,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),i.jsx("div",{style:{width:"32px",height:"10px",borderRadius:"6px",background:_e.receivedMessage.background,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}})]}),f===Ee&&i.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"20px",height:"20px",borderRadius:"50%",background:"linear-gradient(135deg, #25d366, #128c7e)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:""})]}),i.jsx("div",{className:"theme-name",style:{marginTop:"12px",fontSize:"13px",fontWeight:"600",color:f===Ee?"#25d366":"#374151",textAlign:"center",fontFamily:'"Inter", "SF Pro Display", -apple-system, BlinkMacSystemFont, sans-serif',letterSpacing:"0.3px",lineHeight:"1.2",textShadow:f===Ee?"0 1px 3px rgba(37, 211, 102, 0.2)":"none",transition:"all 0.3s ease"},children:_e.name})]},Ee))})})}),i.jsx(oE,{isOpen:Je,onClose:()=>{mt(!1),ft(null)},mediaId:Wt?.mediaId,fileInfo:Wt?.fileInfo})]})},fE=o=>{const{supabase:n}=vs(),[a,c]=M.useState([]),[h,f]=M.useState(!0),x=M.useCallback(async C=>{if(!C){f(!1);return}try{const{data:w,error:A}=await n.from("chat_list_view").select("*").or(`user1_id.eq.${C},user2_id.eq.${C}`).order("last_message_time",{ascending:!1});if(A){console.error("Error loading chats from view:",A);const R=localStorage.getItem(`chats_${C}`),T=R?JSON.parse(R):[];c(T),f(!1);return}const N=(w||[]).map(R=>{const T=R.user1_id===C,O={id:T?R.user2_id:R.user1_id,name:T?R.user2_name:R.user1_name,phone:T?R.user2_id:R.user1_id,avatar:T?R.user2_avatar:R.user1_avatar,is_online:T?R.user2_online:R.user1_online};return{id:R.chat_id,otherUser:O,last_message:R.last_message,last_message_time:R.last_message_time,unreadCount:parseInt(R.unread_count)||0}});c(N)}catch(w){console.error("Error loading chats:",w),c([])}finally{f(!1)}},[n]),v=M.useCallback(async C=>{const{data:w}=await n.from("chat_list_view").select("*").eq("chat_id",C).single();if(w&&(w.user1_id===o||w.user2_id===o)){const A=w.user1_id===o,N={id:A?w.user2_id:w.user1_id,name:A?w.user2_name:w.user1_name,phone:A?w.user2_id:w.user1_id,avatar:A?w.user2_avatar:w.user1_avatar,is_online:A?w.user2_online:w.user1_online},R={id:w.chat_id,otherUser:N,last_message:w.last_message,last_message_time:w.last_message_time,unreadCount:parseInt(w.unread_count)||0};c(T=>{const O=T.findIndex(D=>D.id===C);if(O>=0){const D=[...T];return D[O]=R,D.sort((U,H)=>new Date(H.last_message_time)-new Date(U.last_message_time))}else return[R,...T]})}},[o,n]);return M.useEffect(()=>{o?x(o):(c([]),f(!1))},[o,x]),M.useEffect(()=>{if(!o)return;const C=n.channel("chat_list_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},async A=>{const N=A.new;(N.sender_id===o||N.receiver_id===o)&&await v(N.chat_id)}).subscribe(),w=n.channel("chat_list_chats").on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats"},A=>{(A.new.user1_id===o||A.new.user2_id===o)&&v(A.new.id)}).subscribe();return()=>{C&&C.unsubscribe(),w&&w.unsubscribe()}},[o,v,n]),{chats:a,setChats:c,loading:h}},gE=()=>{const{supabase:o}=vs(),{user:n,loading:a,signOut:c}=La(),{theme:h}=Ko(),f=us(),{chatId:x,otherUserId:v}=Xu(),[C,w]=M.useState(null),[A,N]=M.useState(""),[R,T]=M.useState(!1),[O,D]=M.useState([]),[U,H]=M.useState(!1),[B,P]=M.useState(!0),[Q,Z]=M.useState(!1),[Y,X]=M.useState(!1),[ee,q]=M.useState(!1),[xe,we]=M.useState(""),[me,Ce]=M.useState(""),[Oe,V]=M.useState([]),[$,ie]=M.useState(!1),[ke,Ge]=M.useState(!1),[Ke,ne]=M.useState(null),[pe,Le]=M.useState(!1),[Ue,We]=M.useState(""),[Ne,$e]=M.useState(""),[De,ve]=M.useState(""),[Je,mt]=M.useState(!1),[Wt,ft]=M.useState(!1),[Mt,xn]=M.useState(!1),[cn,qt]=M.useState(null),{chats:At,loading:ht}=fE(C?.id?C.id:null),Hn=At.filter(he=>!he.otherUser?.phone?.includes("1234")&&he.otherUser?.id!=="support-account");M.useEffect(()=>{a||ze()},[a,n]),M.useEffect(()=>{Q&&C&&Me()},[Q]);const ze=async()=>{try{if(!n){console.log(" No valid user found, redirecting to login"),P(!1),f("/login");return}console.log(" Google auth user detected, using user data");const he={id:n.id,name:n.name,email:n.email,phone:n.phone||"",avatar:n.avatar};w(he),localStorage.setItem("currentUser",JSON.stringify(he)),ie(n.is_admin||!1),await Is(n.id),P(!1)}catch(he){console.error("Error initializing home:",he),P(!1)}},Is=async he=>{try{const{data:qe,error:ct}=await o.from("users").select("phone").eq("id",he).single();if(ct){console.error("Error checking profile completion:",ct);return}(!qe||!qe.phone||qe.phone.trim()==="")&&Ge(!0)}catch(qe){console.error("Error in checkProfileCompletion:",qe)}},Me=async()=>{try{if(!C||!C.id){V([]);return}console.log("Loading saved contacts for user:",C.id);const{data:he,error:qe}=await o.from("contacts").select(`
          *,
          contact_user:users!contacts_contact_user_id_fkey(*)
        `).eq("user_id",C.id);if(qe){console.error("Error loading contacts from database:",qe),V([]);return}console.log("Loaded contacts:",he);const ct=he?he.map(an=>({id:an.contact_user.id,name:an.contact_user.name,phone:an.contact_user.phone,avatar:an.contact_user.avatar})):[];V(ct)}catch(he){console.error("Error loading saved contacts:",he),V([])}},Fe=he=>{f(`/chat/${he.id}/${he.otherUser.id}`)},nt=he=>{f(he)},Ct=()=>{c(),f("/login")},Tn=async he=>{he.preventDefault();const qe=Ue.trim();if(!/^[0-9]{10}$/.test(qe)){alert("Please enter a valid 10-digit phone number");return}if(!Ne||Ne.length<6){alert("Password is required and must be at least 6 characters long");return}if(Ne!==De){alert("Passwords do not match");return}try{xn(!0);const{data:an}=await o.from("users").select("id").eq("id",n.id).single(),Pt={id:n.id,name:n.user_metadata?.full_name||n.user_metadata?.name||"User",email:n.email,phone:qe,avatar:n.user_metadata?.avatar_url||null,created_at:new Date().toISOString()};if(Ne&&Ne.length>0&&(Pt.password=Ne),an){const{error:G}=await o.from("users").update(Pt).eq("id",n.id);if(G){console.error("Database error:",G),alert("Failed to save phone number and password. Please try again.");return}}else{const{error:G}=await o.from("users").insert([Pt]);if(G){console.error("Database error:",G),alert("Failed to create account. Please try again.");return}}const In={id:n.id,name:n.user_metadata?.full_name||n.user_metadata?.name||"User",email:n.email,phone:qe,avatar:n.user_metadata?.avatar_url||null};localStorage.setItem("currentUser",JSON.stringify(In)),w(In),Ge(!1),We(""),$e(""),ve("")}catch(an){console.error("Phone submission error:",an),alert("An error occurred. Please try again.")}finally{xn(!1)}},sn=()=>{f("/about")},Vt=()=>{f("/support")},qn=async()=>{try{if(!xe.trim()||!me.trim()){alert("Please enter both name and phone number");return}if(me.length!==10){alert("Please enter a valid 10-digit phone number");return}const he=me.startsWith("+")?me.substring(1):me,{data:qe,error:ct}=await o.from("users").select("id, name, phone").eq("phone",he).neq("id",C.id).single();if(ct||!qe){alert("No user found with this phone number");return}const{data:an,error:Pt}=await o.from("contacts").select("id").eq("user_id",C.id).eq("contact_user_id",qe.id).single();if(an&&!Pt){alert("Contact already exists"),X(!1),we(""),Ce("");return}const{error:In}=await o.from("contacts").insert([{user_id:C.id,contact_user_id:qe.id}]);if(In){console.error("Error saving contact:",In),alert("Failed to save contact");return}alert("Contact saved successfully!"),we(""),Ce(""),X(!1),await Me()}catch(he){console.error("Error in handleSaveContact:",he),alert("Failed to save contact")}},jn=async he=>{try{if(!window.confirm("Delete this contact?"))return;const{error:ct}=await o.from("contacts").delete().eq("user_id",C.id).eq("contact_user_id",he);if(ct){console.error("Error deleting contact:",ct),alert("Failed to delete contact");return}alert("Contact deleted successfully"),await Me(),qt(null)}catch(qe){console.error("Error in handleDeleteContact:",qe),alert("Failed to delete contact")}},ts=(he,qe,ct)=>{qe.stopPropagation();const an=ct<3;qt({id:cn?.id===he?null:he,showAbove:an})},Ut=he=>{cn?qt(null):wt(he)},je=he=>{alert(`Edit functionality for ${he.name} coming soon!`),qt(null)},lt=he=>he.split(" ").map(qe=>qe[0]).join("").toUpperCase().slice(0,2),gt=he=>{if(!he)return"";const qe=new Date(he),an=new Date-qe,Pt=Math.floor(an/6e4),In=Math.floor(an/36e5),G=Math.floor(an/864e5);return Pt<1?"now":Pt<60?`${Pt}m`:In<24?`${In}h`:`${G}d`},Qt=M.useMemo(()=>Hn.filter(he=>{if(!A)return!0;const qe=A.toLowerCase();return he.otherUser.name.toLowerCase().includes(qe)||he.otherUser.phone&&he.otherUser.phone.includes(qe)}),[Hn,A]),Os=async he=>{try{if(he==="1234"){D([{id:"support-account",name:"CaBa Support",phone:"1234",avatar:null,is_online:!0}]),H(!0);return}const qe=he.startsWith("+")?he.substring(1):he,{data:ct,error:an}=await o.from("users").select("id, name, phone, avatar, is_online").eq("phone",qe).neq("id",C?.id).eq("is_admin",!1).limit(1);if(an)throw an;D(ct||[]),H(ct&&ct.length>0)}catch(qe){console.error("Error searching users:",qe),D([]),H(!1)}},va=he=>{const qe=he.target.value;N(qe),/^\d{10}$/.test(qe)?Os(qe):(D([]),H(!1))},qs=he=>{if(he.id==="support-account"){f("/support"),T(!1),N(""),D([]),H(!1);return}const qe=Hn.find(ct=>ct.otherUser.id===he.id);qe?Fe(qe):f(`/chat/new/${he.id}`),T(!1),N(""),D([]),H(!1)},wt=he=>{const qe=Hn.find(ct=>ct.otherUser.id===he.id);qe?Fe(qe):f(`/chat/new/${he.id}`),Z(!1),q(!1)};if(a||B)return i.jsx(Vi,{});if(ke)return i.jsx("div",{className:"home-container",children:i.jsx(wr,{isOpen:ke,onClose:()=>{},title:"Complete Your Profile",size:"medium",children:i.jsxs("div",{className:"phone-completion-modal",children:[i.jsxs("div",{className:"phone-modal-header",children:[i.jsx("h3",{children:"Complete Your Profile"}),i.jsx("p",{children:"Please provide your phone number and create a password to complete your account setup."})]}),i.jsxs("form",{onSubmit:Tn,className:"phone-form",children:[i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"phone",children:"Phone Number"}),i.jsx("input",{type:"tel",id:"phone",placeholder:"10 digit mobile number",pattern:"[0-9]{10}",maxLength:"10",required:!0,autoComplete:"tel",value:Ue,onChange:he=>We(he.target.value.replace(/\D/g,"").slice(0,10)),disabled:Mt}),i.jsx("small",{children:"10 digits without country code"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"password",children:"Password (Required for backup login)"}),i.jsxs("div",{className:"password-input",children:[i.jsx("input",{type:Je?"text":"password",id:"password",placeholder:"Create a password (min 6 characters)",minLength:"6",required:!0,value:Ne,onChange:he=>$e(he.target.value),disabled:Mt}),i.jsx("button",{type:"button",className:"toggle-password",onClick:()=>mt(!Je),children:Je?i.jsx(ju,{size:16}):i.jsx(Xa,{size:16})})]}),i.jsx("small",{children:"Required: Create password for backup login"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsxs("div",{className:"password-input",children:[i.jsx("input",{type:Wt?"text":"password",id:"confirmPassword",placeholder:"Confirm your password",minLength:"6",required:!0,value:De,onChange:he=>ve(he.target.value),disabled:Mt}),i.jsx("button",{type:"button",className:"toggle-password",onClick:()=>ft(!Wt),children:Wt?i.jsx(ju,{size:16}):i.jsx(Xa,{size:16})})]})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Mt||Ue.length!==10,children:Mt?"Saving...":"Save Profile"})]}),i.jsx("div",{className:"phone-modal-footer",children:i.jsxs("p",{className:"phone-note",children:[i.jsx("strong",{children:"Note:"})," Your phone number will be visible to other users for contact purposes. The password enables backup login access."]})})]})})});if(ht)return i.jsx(Vi,{});const Rn=!!x&&!!v;return i.jsxs("div",{className:"home-container",children:[i.jsxs("div",{className:`desktop-layout ${Rn?"chat-active":""}`,children:[i.jsxs("aside",{className:`sidebar ${Rn?"visible-on-mobile":"hidden-on-mobile"}`,children:[i.jsxs("div",{className:"sidebar-header",children:[i.jsx("div",{className:"app-logo-small",children:"CB"}),i.jsx("span",{className:"app-name-small",children:"CaBa"})]}),i.jsxs("nav",{className:"sidebar-nav",children:[i.jsxs("button",{className:"sidebar-item active",onClick:()=>nt("/"),children:[i.jsx(Ma,{size:20}),i.jsx("span",{className:"label",children:"Chats"})]}),i.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/calls"),children:[i.jsx(Hs,{size:20}),i.jsx("span",{className:"label",children:"Audio Call"})]}),i.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/qr"),children:[i.jsx(ey,{size:20}),i.jsx("span",{className:"label",children:"QR Code"})]}),i.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/news"),children:[i.jsx(ci,{size:20}),i.jsx("span",{className:"label",children:"News"})]}),i.jsxs("button",{className:"sidebar-item",onClick:()=>nt("/settings"),children:[i.jsx(Xl,{size:20}),i.jsx("span",{className:"label",children:"Settings"})]})]}),i.jsx("div",{className:"sidebar-footer",children:i.jsxs("button",{className:"user-profile-link",onClick:()=>nt("/profile"),children:[i.jsx("div",{className:"sidebar-avatar",children:C?.avatar?i.jsx("img",{src:parseInt(C.avatar)?Rs.find(he=>he.id===parseInt(C.avatar))?.path:C.avatar,alt:C.name}):i.jsx("div",{children:lt(C?.name||"U")})}),i.jsx("span",{className:"user-name",children:C?.name||"User"})]})})]}),i.jsxs("main",{className:`main-content ${Rn?"hidden-on-mobile":""}`,children:[i.jsxs("header",{className:"top-header",children:[i.jsx("div",{className:"header-left",children:i.jsx("h1",{children:"Chats"})}),i.jsxs("div",{className:"header-right",children:[i.jsx("button",{className:"icon-btn",onClick:()=>T(!R),title:"Search",children:i.jsx($l,{size:20})}),i.jsx(k0,{items:[{icon:i.jsx(M0,{size:16}),label:"Profile",onClick:()=>nt("/profile")},{icon:i.jsx(Xl,{size:16}),label:"Settings",onClick:()=>nt("/settings")},{icon:i.jsx(Hu,{size:16}),label:"Check Reminders",onClick:()=>nt("/reminders")},...$?[{icon:i.jsx(D_,{size:16}),label:"Admin Panel",onClick:()=>nt("/admin")}]:[],{divider:!0},{icon:i.jsx(Q_,{size:16}),label:"About App",onClick:sn},{icon:i.jsx(j_,{size:16}),label:"Help",onClick:Vt},{divider:!0},{icon:i.jsx(eS,{size:16}),label:"Logout",onClick:Ct}]})]})]}),R&&i.jsxs("div",{className:"search-bar",children:[i.jsx($l,{size:16}),i.jsx("input",{type:"text",placeholder:"Search by phone number...",value:A,onChange:va}),i.jsx("button",{className:"close-search",onClick:()=>{T(!1),N(""),D([]),H(!1)},children:""})]}),R&&U&&O.length>0&&i.jsx("div",{className:"search-suggestions",children:O.map(he=>i.jsxs("div",{className:"search-suggestion-item",onClick:()=>qs(he),children:[i.jsxs("div",{className:"suggestion-avatar",children:[he.avatar?parseInt(he.avatar)?i.jsx("img",{src:Rs.find(qe=>qe.id===parseInt(he.avatar))?.path||he.avatar,alt:he.name}):i.jsx("img",{src:he.avatar,alt:he.name}):i.jsx("div",{children:lt(he.name)}),i.jsx("span",{className:`online-status ${he.is_online?"online":""}`})]}),i.jsxs("div",{className:"suggestion-info",children:[i.jsx("div",{className:"suggestion-name",children:he.name}),i.jsx("div",{className:"suggestion-phone",children:he.phone})]})]},he.id))}),i.jsx("div",{className:"chat-list-wrapper",children:ht?i.jsx("div",{className:"loading-state",children:i.jsx("p",{children:"Loading chats..."})}):Qt.length>0?Qt.map(he=>i.jsxs("div",{className:"chat-item-card",onClick:()=>Fe(he),children:[i.jsxs("div",{className:"chat-avatar-wrapper",children:[he.otherUser?.avatar?i.jsx("img",{src:parseInt(he.otherUser.avatar)?Rs.find(qe=>qe.id===parseInt(he.otherUser.avatar))?.path:he.otherUser.avatar,alt:he.otherUser.name}):lt(he.otherUser?.name||"U"),i.jsx("span",{className:`online-indicator ${he.otherUser?.is_online?"online":""}`})]}),i.jsxs("div",{className:"chat-content",children:[i.jsxs("div",{className:"chat-top",children:[i.jsx("h3",{className:"chat-name",children:he.otherUser?.name||"Unknown"}),i.jsx("span",{className:"chat-time",children:gt(he.last_message_time)})]}),i.jsxs("div",{className:"chat-bottom",children:[i.jsx("p",{className:"last-message",children:he.last_message||"No messages yet"}),he.unreadCount>0&&i.jsx("span",{className:"unread-badge",children:he.unreadCount})]})]})]},he.id)):i.jsxs("div",{className:"empty-state",children:[i.jsx(Ma,{size:48}),i.jsx("h3",{children:"No conversations yet"}),i.jsx("p",{children:"Start messaging your contacts"})]})}),i.jsx("button",{className:"fab",title:"New Contact",onClick:()=>Z(!0),children:i.jsx(zp,{size:24})})]}),i.jsx("aside",{className:`right-panel ${Rn?"visible-on-mobile":""}`,children:Rn?i.jsx(l0,{},x):i.jsxs("div",{className:"chat-preview-placeholder",children:[i.jsx(Ma,{size:120}),i.jsx("h3",{children:"Welcome to CaBa"}),i.jsx("p",{children:"Messages are end-to-end encrypted"})]})})]}),i.jsxs("nav",{className:`bottom-nav ${Rn?"hidden":""}`,children:[i.jsxs("button",{className:"nav-item active",onClick:()=>nt("/"),children:[i.jsx(Ma,{size:20}),i.jsx("span",{className:"label",children:"Chats"}),i.jsx("span",{className:"badge",children:"5"})]}),i.jsxs("button",{className:"nav-item",onClick:()=>nt("/news"),children:[i.jsx(ci,{size:20}),i.jsx("span",{className:"label",children:"News"})]}),i.jsxs("button",{className:"nav-item",onClick:()=>nt("/calls"),children:[i.jsx(Hs,{size:20}),i.jsx("span",{className:"label",children:"Audio Call"}),i.jsx("span",{className:"badge",children:"2"})]}),i.jsxs("button",{className:"nav-item",onClick:()=>nt("/settings"),children:[i.jsx(Xl,{size:20}),i.jsx("span",{className:"label",children:"Settings"})]})]}),i.jsx(wr,{isOpen:Q,onClose:()=>{Z(!1),X(!1),q(!1),we(""),Ce("")},title:ee?"Select Contact":"New Contact",size:"medium",children:i.jsxs("div",{className:"new-contact-modal",children:[i.jsxs("div",{className:"modal-mode-toggle",children:[i.jsx("button",{className:`mode-btn ${ee?"":"active"}`,onClick:()=>q(!1),children:"Manage Contacts"}),i.jsx("button",{className:`mode-btn ${ee?"active":""}`,onClick:()=>q(!0),children:"Select Contact"})]}),ee?i.jsxs("div",{className:"select-contact-section",children:[i.jsx("h3",{children:"Start Chat With"}),i.jsx("div",{className:"saved-contacts-list",children:Oe.length>0?Oe.map(he=>i.jsxs("div",{className:"saved-contact-item",children:[i.jsxs("div",{className:"contact-info",children:[i.jsx("div",{className:"contact-avatar",children:he.avatar?parseInt(he.avatar)?i.jsx("img",{src:Rs.find(qe=>qe.id===parseInt(he.avatar))?.path||he.avatar,alt:he.name}):i.jsx("img",{src:he.avatar,alt:he.name}):i.jsx("div",{children:lt(he.name)})}),i.jsxs("div",{children:[i.jsx("div",{className:"contact-name",children:he.name}),i.jsx("div",{className:"contact-phone",children:he.phone})]})]}),i.jsx("button",{className:"start-chat-btn",onClick:()=>wt(he),title:"Start Chat",children:" Chat"})]},he.id)):i.jsx("p",{className:"no-contacts",children:"No saved contacts yet. Add contacts first."})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{className:"add-contact-btn",onClick:()=>X(!Y),children:[i.jsx(zp,{size:20}),"Add New Contact"]}),Y&&i.jsxs("div",{className:"contact-form",children:[i.jsx("input",{type:"text",placeholder:"Contact name",value:xe,onChange:he=>we(he.target.value),className:"contact-input"}),i.jsx("input",{type:"tel",placeholder:"Phone number (10 digits)",value:me,onChange:he=>Ce(he.target.value.replace(/\D/g,"").slice(0,10)),className:"contact-input"}),i.jsxs("div",{className:"contact-form-actions",children:[i.jsx("button",{className:"btn-primary",onClick:qn,children:"Save Contact"}),i.jsx("button",{className:"btn-secondary",onClick:()=>{X(!1),we(""),Ce("")},children:"Cancel"})]})]}),i.jsxs("div",{className:"saved-contacts-section",children:[i.jsx("h3",{children:"Saved Contacts"}),i.jsx("div",{className:"saved-contacts-list",children:Oe.length>0?Oe.map((he,qe)=>i.jsxs("div",{className:`saved-contact-item ${cn?.id===he.id?"menu-open":""}`,onClick:()=>Ut(he),children:[i.jsxs("div",{className:"contact-info",children:[i.jsx("div",{className:"contact-avatar",children:he.avatar?parseInt(he.avatar)?i.jsx("img",{src:Rs.find(ct=>ct.id===parseInt(he.avatar))?.path||he.avatar,alt:he.name}):i.jsx("img",{src:he.avatar,alt:he.name}):i.jsx("div",{children:lt(he.name)})}),i.jsxs("div",{className:"contact-details",children:[i.jsx("div",{className:"contact-name",children:he.name}),i.jsx("div",{className:"contact-phone",children:he.phone})]})]}),i.jsx("button",{className:"contact-menu-btn",onClick:ct=>ts(he.id,ct,qe),title:"Options",children:i.jsx(Zu,{size:18})}),cn?.id===he.id&&i.jsxs("div",{className:`contact-menu ${cn.showAbove?"show-above":"show-below"}`,children:[i.jsxs("button",{className:"menu-item edit-item",onClick:ct=>{ct.stopPropagation(),je(he)},children:[i.jsx($u,{size:16}),"Edit"]}),i.jsxs("button",{className:"menu-item delete-item",onClick:ct=>{ct.stopPropagation(),jn(he.id)},children:[i.jsx(js,{size:16}),"Delete"]})]})]},he.id)):i.jsx("p",{className:"no-contacts",children:"No saved contacts yet"})})]})]})]})}),i.jsx(wr,{isOpen:ke,onClose:()=>{},title:"Complete Your Profile",size:"medium",children:i.jsxs("div",{className:"phone-completion-modal",children:[i.jsxs("div",{className:"phone-modal-header",children:[i.jsx("h3",{children:"Complete Your Profile"}),i.jsx("p",{children:"Please provide your phone number and create a password to complete your account setup."})]}),i.jsxs("form",{onSubmit:Tn,className:"phone-form",children:[i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"phone",children:"Phone Number"}),i.jsx("input",{type:"tel",id:"phone",placeholder:"10 digit mobile number",pattern:"[0-9]{10}",maxLength:"10",required:!0,autoComplete:"tel",value:Ue,onChange:he=>We(he.target.value.replace(/\D/g,"").slice(0,10)),disabled:Mt}),i.jsx("small",{children:"10 digits without country code"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"password",children:"Password (Required for backup login)"}),i.jsxs("div",{className:"password-input",children:[i.jsx("input",{type:Je?"text":"password",id:"password",placeholder:"Create a password (min 6 characters)",minLength:"6",required:!0,value:Ne,onChange:he=>$e(he.target.value),disabled:Mt}),i.jsx("button",{type:"button",className:"toggle-password",onClick:()=>mt(!Je),children:Je?i.jsx(ju,{size:16}):i.jsx(Xa,{size:16})})]}),i.jsx("small",{children:"Required: Create password for backup login"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsxs("div",{className:"password-input",children:[i.jsx("input",{type:Wt?"text":"password",id:"confirmPassword",placeholder:"Confirm your password",minLength:"6",required:!0,value:De,onChange:he=>ve(he.target.value),disabled:Mt}),i.jsx("button",{type:"button",className:"toggle-password",onClick:()=>ft(!Wt),children:Wt?i.jsx(ju,{size:16}):i.jsx(Xa,{size:16})})]})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Mt||Ue.length!==10,children:Mt?"Saving...":"Save Profile"})]}),i.jsx("div",{className:"phone-modal-footer",children:i.jsxs("p",{className:"phone-note",children:[i.jsx("strong",{children:"Note:"})," Your phone number will be visible to other users for contact purposes. The password enables backup login access."]})})]})})]})};var Bo={},xf,qp;function mE(){return qp||(qp=1,xf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),xf}var yf={},ri={},Vp;function Yi(){if(Vp)return ri;Vp=1;let o;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ri.getSymbolSize=function(c){if(!c)throw new Error('"version" cannot be null or undefined');if(c<1||c>40)throw new Error('"version" should be in range from 1 to 40');return c*4+17},ri.getSymbolTotalCodewords=function(c){return n[c]},ri.getBCHDigit=function(a){let c=0;for(;a!==0;)c++,a>>>=1;return c},ri.setToSJISFunction=function(c){if(typeof c!="function")throw new Error('"toSJISFunc" is not a valid function.');o=c},ri.isKanjiModeEnabled=function(){return typeof o<"u"},ri.toSJIS=function(c){return o(c)},ri}var wf={},Gp;function D0(){return Gp||(Gp=1,(function(o){o.L={bit:1},o.M={bit:0},o.Q={bit:3},o.H={bit:2};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return o.L;case"m":case"medium":return o.M;case"q":case"quartile":return o.Q;case"h":case"high":return o.H;default:throw new Error("Unknown EC Level: "+a)}}o.isValid=function(c){return c&&typeof c.bit<"u"&&c.bit>=0&&c.bit<4},o.from=function(c,h){if(o.isValid(c))return c;try{return n(c)}catch{return h}}})(wf)),wf}var bf,Yp;function pE(){if(Yp)return bf;Yp=1;function o(){this.buffer=[],this.length=0}return o.prototype={get:function(n){const a=Math.floor(n/8);return(this.buffer[a]>>>7-n%8&1)===1},put:function(n,a){for(let c=0;c<a;c++)this.putBit((n>>>a-c-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),n&&(this.buffer[a]|=128>>>this.length%8),this.length++}},bf=o,bf}var vf,Xp;function xE(){if(Xp)return vf;Xp=1;function o(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}return o.prototype.set=function(n,a,c,h){const f=n*this.size+a;this.data[f]=c,h&&(this.reservedBit[f]=!0)},o.prototype.get=function(n,a){return this.data[n*this.size+a]},o.prototype.xor=function(n,a,c){this.data[n*this.size+a]^=c},o.prototype.isReserved=function(n,a){return this.reservedBit[n*this.size+a]},vf=o,vf}var Cf={},Wp;function yE(){return Wp||(Wp=1,(function(o){const n=Yi().getSymbolSize;o.getRowColCoords=function(c){if(c===1)return[];const h=Math.floor(c/7)+2,f=n(c),x=f===145?26:Math.ceil((f-13)/(2*h-2))*2,v=[f-7];for(let C=1;C<h-1;C++)v[C]=v[C-1]-x;return v.push(6),v.reverse()},o.getPositions=function(c){const h=[],f=o.getRowColCoords(c),x=f.length;for(let v=0;v<x;v++)for(let C=0;C<x;C++)v===0&&C===0||v===0&&C===x-1||v===x-1&&C===0||h.push([f[v],f[C]]);return h}})(Cf)),Cf}var _f={},Qp;function wE(){if(Qp)return _f;Qp=1;const o=Yi().getSymbolSize,n=7;return _f.getPositions=function(c){const h=o(c);return[[0,0],[h-n,0],[0,h-n]]},_f}var Sf={},Kp;function bE(){return Kp||(Kp=1,(function(o){o.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};o.isValid=function(h){return h!=null&&h!==""&&!isNaN(h)&&h>=0&&h<=7},o.from=function(h){return o.isValid(h)?parseInt(h,10):void 0},o.getPenaltyN1=function(h){const f=h.size;let x=0,v=0,C=0,w=null,A=null;for(let N=0;N<f;N++){v=C=0,w=A=null;for(let R=0;R<f;R++){let T=h.get(N,R);T===w?v++:(v>=5&&(x+=n.N1+(v-5)),w=T,v=1),T=h.get(R,N),T===A?C++:(C>=5&&(x+=n.N1+(C-5)),A=T,C=1)}v>=5&&(x+=n.N1+(v-5)),C>=5&&(x+=n.N1+(C-5))}return x},o.getPenaltyN2=function(h){const f=h.size;let x=0;for(let v=0;v<f-1;v++)for(let C=0;C<f-1;C++){const w=h.get(v,C)+h.get(v,C+1)+h.get(v+1,C)+h.get(v+1,C+1);(w===4||w===0)&&x++}return x*n.N2},o.getPenaltyN3=function(h){const f=h.size;let x=0,v=0,C=0;for(let w=0;w<f;w++){v=C=0;for(let A=0;A<f;A++)v=v<<1&2047|h.get(w,A),A>=10&&(v===1488||v===93)&&x++,C=C<<1&2047|h.get(A,w),A>=10&&(C===1488||C===93)&&x++}return x*n.N3},o.getPenaltyN4=function(h){let f=0;const x=h.data.length;for(let C=0;C<x;C++)f+=h.data[C];return Math.abs(Math.ceil(f*100/x/5)-10)*n.N4};function a(c,h,f){switch(c){case o.Patterns.PATTERN000:return(h+f)%2===0;case o.Patterns.PATTERN001:return h%2===0;case o.Patterns.PATTERN010:return f%3===0;case o.Patterns.PATTERN011:return(h+f)%3===0;case o.Patterns.PATTERN100:return(Math.floor(h/2)+Math.floor(f/3))%2===0;case o.Patterns.PATTERN101:return h*f%2+h*f%3===0;case o.Patterns.PATTERN110:return(h*f%2+h*f%3)%2===0;case o.Patterns.PATTERN111:return(h*f%3+(h+f)%2)%2===0;default:throw new Error("bad maskPattern:"+c)}}o.applyMask=function(h,f){const x=f.size;for(let v=0;v<x;v++)for(let C=0;C<x;C++)f.isReserved(C,v)||f.xor(C,v,a(h,C,v))},o.getBestMask=function(h,f){const x=Object.keys(o.Patterns).length;let v=0,C=1/0;for(let w=0;w<x;w++){f(w),o.applyMask(w,h);const A=o.getPenaltyN1(h)+o.getPenaltyN2(h)+o.getPenaltyN3(h)+o.getPenaltyN4(h);o.applyMask(w,h),A<C&&(C=A,v=w)}return v}})(Sf)),Sf}var Iu={},Zp;function sy(){if(Zp)return Iu;Zp=1;const o=D0(),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Iu.getBlocksCount=function(h,f){switch(f){case o.L:return n[(h-1)*4+0];case o.M:return n[(h-1)*4+1];case o.Q:return n[(h-1)*4+2];case o.H:return n[(h-1)*4+3];default:return}},Iu.getTotalCodewordsCount=function(h,f){switch(f){case o.L:return a[(h-1)*4+0];case o.M:return a[(h-1)*4+1];case o.Q:return a[(h-1)*4+2];case o.H:return a[(h-1)*4+3];default:return}},Iu}var Ef={},Hl={},$p;function vE(){if($p)return Hl;$p=1;const o=new Uint8Array(512),n=new Uint8Array(256);return(function(){let c=1;for(let h=0;h<255;h++)o[h]=c,n[c]=h,c<<=1,c&256&&(c^=285);for(let h=255;h<512;h++)o[h]=o[h-255]})(),Hl.log=function(c){if(c<1)throw new Error("log("+c+")");return n[c]},Hl.exp=function(c){return o[c]},Hl.mul=function(c,h){return c===0||h===0?0:o[n[c]+n[h]]},Hl}var Jp;function CE(){return Jp||(Jp=1,(function(o){const n=vE();o.mul=function(c,h){const f=new Uint8Array(c.length+h.length-1);for(let x=0;x<c.length;x++)for(let v=0;v<h.length;v++)f[x+v]^=n.mul(c[x],h[v]);return f},o.mod=function(c,h){let f=new Uint8Array(c);for(;f.length-h.length>=0;){const x=f[0];for(let C=0;C<h.length;C++)f[C]^=n.mul(h[C],x);let v=0;for(;v<f.length&&f[v]===0;)v++;f=f.slice(v)}return f},o.generateECPolynomial=function(c){let h=new Uint8Array([1]);for(let f=0;f<c;f++)h=o.mul(h,new Uint8Array([1,n.exp(f)]));return h}})(Ef)),Ef}var Af,ex;function _E(){if(ex)return Af;ex=1;const o=CE();function n(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return n.prototype.initialize=function(c){this.degree=c,this.genPoly=o.generateECPolynomial(this.degree)},n.prototype.encode=function(c){if(!this.genPoly)throw new Error("Encoder not initialized");const h=new Uint8Array(c.length+this.degree);h.set(c);const f=o.mod(h,this.genPoly),x=this.degree-f.length;if(x>0){const v=new Uint8Array(this.degree);return v.set(f,x),v}return f},Af=n,Af}var Nf={},Tf={},jf={},tx;function ay(){return tx||(tx=1,jf.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}),jf}var Ga={},nx;function ry(){if(nx)return Ga;nx=1;const o="[0-9]+",n="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const c="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;Ga.KANJI=new RegExp(a,"g"),Ga.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ga.BYTE=new RegExp(c,"g"),Ga.NUMERIC=new RegExp(o,"g"),Ga.ALPHANUMERIC=new RegExp(n,"g");const h=new RegExp("^"+a+"$"),f=new RegExp("^"+o+"$"),x=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ga.testKanji=function(C){return h.test(C)},Ga.testNumeric=function(C){return f.test(C)},Ga.testAlphanumeric=function(C){return x.test(C)},Ga}var sx;function Xi(){return sx||(sx=1,(function(o){const n=ay(),a=ry();o.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},o.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},o.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},o.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},o.MIXED={bit:-1},o.getCharCountIndicator=function(f,x){if(!f.ccBits)throw new Error("Invalid mode: "+f);if(!n.isValid(x))throw new Error("Invalid version: "+x);return x>=1&&x<10?f.ccBits[0]:x<27?f.ccBits[1]:f.ccBits[2]},o.getBestModeForData=function(f){return a.testNumeric(f)?o.NUMERIC:a.testAlphanumeric(f)?o.ALPHANUMERIC:a.testKanji(f)?o.KANJI:o.BYTE},o.toString=function(f){if(f&&f.id)return f.id;throw new Error("Invalid mode")},o.isValid=function(f){return f&&f.bit&&f.ccBits};function c(h){if(typeof h!="string")throw new Error("Param is not a string");switch(h.toLowerCase()){case"numeric":return o.NUMERIC;case"alphanumeric":return o.ALPHANUMERIC;case"kanji":return o.KANJI;case"byte":return o.BYTE;default:throw new Error("Unknown mode: "+h)}}o.from=function(f,x){if(o.isValid(f))return f;try{return c(f)}catch{return x}}})(Tf)),Tf}var ax;function SE(){return ax||(ax=1,(function(o){const n=Yi(),a=sy(),c=D0(),h=Xi(),f=ay(),x=7973,v=n.getBCHDigit(x);function C(R,T,O){for(let D=1;D<=40;D++)if(T<=o.getCapacity(D,O,R))return D}function w(R,T){return h.getCharCountIndicator(R,T)+4}function A(R,T){let O=0;return R.forEach(function(D){const U=w(D.mode,T);O+=U+D.getBitsLength()}),O}function N(R,T){for(let O=1;O<=40;O++)if(A(R,O)<=o.getCapacity(O,T,h.MIXED))return O}o.from=function(T,O){return f.isValid(T)?parseInt(T,10):O},o.getCapacity=function(T,O,D){if(!f.isValid(T))throw new Error("Invalid QR Code version");typeof D>"u"&&(D=h.BYTE);const U=n.getSymbolTotalCodewords(T),H=a.getTotalCodewordsCount(T,O),B=(U-H)*8;if(D===h.MIXED)return B;const P=B-w(D,T);switch(D){case h.NUMERIC:return Math.floor(P/10*3);case h.ALPHANUMERIC:return Math.floor(P/11*2);case h.KANJI:return Math.floor(P/13);case h.BYTE:default:return Math.floor(P/8)}},o.getBestVersionForData=function(T,O){let D;const U=c.from(O,c.M);if(Array.isArray(T)){if(T.length>1)return N(T,U);if(T.length===0)return 1;D=T[0]}else D=T;return C(D.mode,D.getLength(),U)},o.getEncodedBits=function(T){if(!f.isValid(T)||T<7)throw new Error("Invalid QR Code version");let O=T<<12;for(;n.getBCHDigit(O)-v>=0;)O^=x<<n.getBCHDigit(O)-v;return T<<12|O}})(Nf)),Nf}var Rf={},rx;function EE(){if(rx)return Rf;rx=1;const o=Yi(),n=1335,a=21522,c=o.getBCHDigit(n);return Rf.getEncodedBits=function(f,x){const v=f.bit<<3|x;let C=v<<10;for(;o.getBCHDigit(C)-c>=0;)C^=n<<o.getBCHDigit(C)-c;return(v<<10|C)^a},Rf}var If={},Of,ix;function AE(){if(ix)return Of;ix=1;const o=Xi();function n(a){this.mode=o.NUMERIC,this.data=a.toString()}return n.getBitsLength=function(c){return 10*Math.floor(c/3)+(c%3?c%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(c){let h,f,x;for(h=0;h+3<=this.data.length;h+=3)f=this.data.substr(h,3),x=parseInt(f,10),c.put(x,10);const v=this.data.length-h;v>0&&(f=this.data.substr(h),x=parseInt(f,10),c.put(x,v*3+1))},Of=n,Of}var Mf,ox;function NE(){if(ox)return Mf;ox=1;const o=Xi(),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(c){this.mode=o.ALPHANUMERIC,this.data=c}return a.getBitsLength=function(h){return 11*Math.floor(h/2)+6*(h%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(h){let f;for(f=0;f+2<=this.data.length;f+=2){let x=n.indexOf(this.data[f])*45;x+=n.indexOf(this.data[f+1]),h.put(x,11)}this.data.length%2&&h.put(n.indexOf(this.data[f]),6)},Mf=a,Mf}var kf,lx;function TE(){if(lx)return kf;lx=1;const o=Xi();function n(a){this.mode=o.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return n.getBitsLength=function(c){return c*8},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(a){for(let c=0,h=this.data.length;c<h;c++)a.put(this.data[c],8)},kf=n,kf}var Df,cx;function jE(){if(cx)return Df;cx=1;const o=Xi(),n=Yi();function a(c){this.mode=o.KANJI,this.data=c}return a.getBitsLength=function(h){return h*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(c){let h;for(h=0;h<this.data.length;h++){let f=n.toSJIS(this.data[h]);if(f>=33088&&f<=40956)f-=33088;else if(f>=57408&&f<=60351)f-=49472;else throw new Error("Invalid SJIS character: "+this.data[h]+`
Make sure your charset is UTF-8`);f=(f>>>8&255)*192+(f&255),c.put(f,13)}},Df=a,Df}var Lf={exports:{}},ux;function RE(){return ux||(ux=1,(function(o){var n={single_source_shortest_paths:function(a,c,h){var f={},x={};x[c]=0;var v=n.PriorityQueue.make();v.push(c,0);for(var C,w,A,N,R,T,O,D,U;!v.empty();){C=v.pop(),w=C.value,N=C.cost,R=a[w]||{};for(A in R)R.hasOwnProperty(A)&&(T=R[A],O=N+T,D=x[A],U=typeof x[A]>"u",(U||D>O)&&(x[A]=O,v.push(A,O),f[A]=w))}if(typeof h<"u"&&typeof x[h]>"u"){var H=["Could not find a path from ",c," to ",h,"."].join("");throw new Error(H)}return f},extract_shortest_path_from_predecessor_list:function(a,c){for(var h=[],f=c;f;)h.push(f),a[f],f=a[f];return h.reverse(),h},find_path:function(a,c,h){var f=n.single_source_shortest_paths(a,c,h);return n.extract_shortest_path_from_predecessor_list(f,h)},PriorityQueue:{make:function(a){var c=n.PriorityQueue,h={},f;a=a||{};for(f in c)c.hasOwnProperty(f)&&(h[f]=c[f]);return h.queue=[],h.sorter=a.sorter||c.default_sorter,h},default_sorter:function(a,c){return a.cost-c.cost},push:function(a,c){var h={value:a,cost:c};this.queue.push(h),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};o.exports=n})(Lf)),Lf.exports}var dx;function IE(){return dx||(dx=1,(function(o){const n=Xi(),a=AE(),c=NE(),h=TE(),f=jE(),x=ry(),v=Yi(),C=RE();function w(H){return unescape(encodeURIComponent(H)).length}function A(H,B,P){const Q=[];let Z;for(;(Z=H.exec(P))!==null;)Q.push({data:Z[0],index:Z.index,mode:B,length:Z[0].length});return Q}function N(H){const B=A(x.NUMERIC,n.NUMERIC,H),P=A(x.ALPHANUMERIC,n.ALPHANUMERIC,H);let Q,Z;return v.isKanjiModeEnabled()?(Q=A(x.BYTE,n.BYTE,H),Z=A(x.KANJI,n.KANJI,H)):(Q=A(x.BYTE_KANJI,n.BYTE,H),Z=[]),B.concat(P,Q,Z).sort(function(X,ee){return X.index-ee.index}).map(function(X){return{data:X.data,mode:X.mode,length:X.length}})}function R(H,B){switch(B){case n.NUMERIC:return a.getBitsLength(H);case n.ALPHANUMERIC:return c.getBitsLength(H);case n.KANJI:return f.getBitsLength(H);case n.BYTE:return h.getBitsLength(H)}}function T(H){return H.reduce(function(B,P){const Q=B.length-1>=0?B[B.length-1]:null;return Q&&Q.mode===P.mode?(B[B.length-1].data+=P.data,B):(B.push(P),B)},[])}function O(H){const B=[];for(let P=0;P<H.length;P++){const Q=H[P];switch(Q.mode){case n.NUMERIC:B.push([Q,{data:Q.data,mode:n.ALPHANUMERIC,length:Q.length},{data:Q.data,mode:n.BYTE,length:Q.length}]);break;case n.ALPHANUMERIC:B.push([Q,{data:Q.data,mode:n.BYTE,length:Q.length}]);break;case n.KANJI:B.push([Q,{data:Q.data,mode:n.BYTE,length:w(Q.data)}]);break;case n.BYTE:B.push([{data:Q.data,mode:n.BYTE,length:w(Q.data)}])}}return B}function D(H,B){const P={},Q={start:{}};let Z=["start"];for(let Y=0;Y<H.length;Y++){const X=H[Y],ee=[];for(let q=0;q<X.length;q++){const xe=X[q],we=""+Y+q;ee.push(we),P[we]={node:xe,lastCount:0},Q[we]={};for(let me=0;me<Z.length;me++){const Ce=Z[me];P[Ce]&&P[Ce].node.mode===xe.mode?(Q[Ce][we]=R(P[Ce].lastCount+xe.length,xe.mode)-R(P[Ce].lastCount,xe.mode),P[Ce].lastCount+=xe.length):(P[Ce]&&(P[Ce].lastCount=xe.length),Q[Ce][we]=R(xe.length,xe.mode)+4+n.getCharCountIndicator(xe.mode,B))}}Z=ee}for(let Y=0;Y<Z.length;Y++)Q[Z[Y]].end=0;return{map:Q,table:P}}function U(H,B){let P;const Q=n.getBestModeForData(H);if(P=n.from(B,Q),P!==n.BYTE&&P.bit<Q.bit)throw new Error('"'+H+'" cannot be encoded with mode '+n.toString(P)+`.
 Suggested mode is: `+n.toString(Q));switch(P===n.KANJI&&!v.isKanjiModeEnabled()&&(P=n.BYTE),P){case n.NUMERIC:return new a(H);case n.ALPHANUMERIC:return new c(H);case n.KANJI:return new f(H);case n.BYTE:return new h(H)}}o.fromArray=function(B){return B.reduce(function(P,Q){return typeof Q=="string"?P.push(U(Q,null)):Q.data&&P.push(U(Q.data,Q.mode)),P},[])},o.fromString=function(B,P){const Q=N(B,v.isKanjiModeEnabled()),Z=O(Q),Y=D(Z,P),X=C.find_path(Y.map,"start","end"),ee=[];for(let q=1;q<X.length-1;q++)ee.push(Y.table[X[q]].node);return o.fromArray(T(ee))},o.rawSplit=function(B){return o.fromArray(N(B,v.isKanjiModeEnabled()))}})(If)),If}var hx;function OE(){if(hx)return yf;hx=1;const o=Yi(),n=D0(),a=pE(),c=xE(),h=yE(),f=wE(),x=bE(),v=sy(),C=_E(),w=SE(),A=EE(),N=Xi(),R=IE();function T(Y,X){const ee=Y.size,q=f.getPositions(X);for(let xe=0;xe<q.length;xe++){const we=q[xe][0],me=q[xe][1];for(let Ce=-1;Ce<=7;Ce++)if(!(we+Ce<=-1||ee<=we+Ce))for(let Oe=-1;Oe<=7;Oe++)me+Oe<=-1||ee<=me+Oe||(Ce>=0&&Ce<=6&&(Oe===0||Oe===6)||Oe>=0&&Oe<=6&&(Ce===0||Ce===6)||Ce>=2&&Ce<=4&&Oe>=2&&Oe<=4?Y.set(we+Ce,me+Oe,!0,!0):Y.set(we+Ce,me+Oe,!1,!0))}}function O(Y){const X=Y.size;for(let ee=8;ee<X-8;ee++){const q=ee%2===0;Y.set(ee,6,q,!0),Y.set(6,ee,q,!0)}}function D(Y,X){const ee=h.getPositions(X);for(let q=0;q<ee.length;q++){const xe=ee[q][0],we=ee[q][1];for(let me=-2;me<=2;me++)for(let Ce=-2;Ce<=2;Ce++)me===-2||me===2||Ce===-2||Ce===2||me===0&&Ce===0?Y.set(xe+me,we+Ce,!0,!0):Y.set(xe+me,we+Ce,!1,!0)}}function U(Y,X){const ee=Y.size,q=w.getEncodedBits(X);let xe,we,me;for(let Ce=0;Ce<18;Ce++)xe=Math.floor(Ce/3),we=Ce%3+ee-8-3,me=(q>>Ce&1)===1,Y.set(xe,we,me,!0),Y.set(we,xe,me,!0)}function H(Y,X,ee){const q=Y.size,xe=A.getEncodedBits(X,ee);let we,me;for(we=0;we<15;we++)me=(xe>>we&1)===1,we<6?Y.set(we,8,me,!0):we<8?Y.set(we+1,8,me,!0):Y.set(q-15+we,8,me,!0),we<8?Y.set(8,q-we-1,me,!0):we<9?Y.set(8,15-we-1+1,me,!0):Y.set(8,15-we-1,me,!0);Y.set(q-8,8,1,!0)}function B(Y,X){const ee=Y.size;let q=-1,xe=ee-1,we=7,me=0;for(let Ce=ee-1;Ce>0;Ce-=2)for(Ce===6&&Ce--;;){for(let Oe=0;Oe<2;Oe++)if(!Y.isReserved(xe,Ce-Oe)){let V=!1;me<X.length&&(V=(X[me]>>>we&1)===1),Y.set(xe,Ce-Oe,V),we--,we===-1&&(me++,we=7)}if(xe+=q,xe<0||ee<=xe){xe-=q,q=-q;break}}}function P(Y,X,ee){const q=new a;ee.forEach(function(Oe){q.put(Oe.mode.bit,4),q.put(Oe.getLength(),N.getCharCountIndicator(Oe.mode,Y)),Oe.write(q)});const xe=o.getSymbolTotalCodewords(Y),we=v.getTotalCodewordsCount(Y,X),me=(xe-we)*8;for(q.getLengthInBits()+4<=me&&q.put(0,4);q.getLengthInBits()%8!==0;)q.putBit(0);const Ce=(me-q.getLengthInBits())/8;for(let Oe=0;Oe<Ce;Oe++)q.put(Oe%2?17:236,8);return Q(q,Y,X)}function Q(Y,X,ee){const q=o.getSymbolTotalCodewords(X),xe=v.getTotalCodewordsCount(X,ee),we=q-xe,me=v.getBlocksCount(X,ee),Ce=q%me,Oe=me-Ce,V=Math.floor(q/me),$=Math.floor(we/me),ie=$+1,ke=V-$,Ge=new C(ke);let Ke=0;const ne=new Array(me),pe=new Array(me);let Le=0;const Ue=new Uint8Array(Y.buffer);for(let ve=0;ve<me;ve++){const Je=ve<Oe?$:ie;ne[ve]=Ue.slice(Ke,Ke+Je),pe[ve]=Ge.encode(ne[ve]),Ke+=Je,Le=Math.max(Le,Je)}const We=new Uint8Array(q);let Ne=0,$e,De;for($e=0;$e<Le;$e++)for(De=0;De<me;De++)$e<ne[De].length&&(We[Ne++]=ne[De][$e]);for($e=0;$e<ke;$e++)for(De=0;De<me;De++)We[Ne++]=pe[De][$e];return We}function Z(Y,X,ee,q){let xe;if(Array.isArray(Y))xe=R.fromArray(Y);else if(typeof Y=="string"){let V=X;if(!V){const $=R.rawSplit(Y);V=w.getBestVersionForData($,ee)}xe=R.fromString(Y,V||40)}else throw new Error("Invalid data");const we=w.getBestVersionForData(xe,ee);if(!we)throw new Error("The amount of data is too big to be stored in a QR Code");if(!X)X=we;else if(X<we)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+we+`.
`);const me=P(X,ee,xe),Ce=o.getSymbolSize(X),Oe=new c(Ce);return T(Oe,X),O(Oe),D(Oe,X),H(Oe,ee,0),X>=7&&U(Oe,X),B(Oe,me),isNaN(q)&&(q=x.getBestMask(Oe,H.bind(null,Oe,ee))),x.applyMask(q,Oe),H(Oe,ee,q),{modules:Oe,version:X,errorCorrectionLevel:ee,maskPattern:q,segments:xe}}return yf.create=function(X,ee){if(typeof X>"u"||X==="")throw new Error("No input text");let q=n.M,xe,we;return typeof ee<"u"&&(q=n.from(ee.errorCorrectionLevel,n.M),xe=w.from(ee.version),we=x.from(ee.maskPattern),ee.toSJISFunc&&o.setToSJISFunction(ee.toSJISFunc)),Z(X,xe,q,we)},yf}var Bf={},Uf={},fx;function iy(){return fx||(fx=1,(function(o){function n(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let c=a.slice().replace("#","").split("");if(c.length<3||c.length===5||c.length>8)throw new Error("Invalid hex color: "+a);(c.length===3||c.length===4)&&(c=Array.prototype.concat.apply([],c.map(function(f){return[f,f]}))),c.length===6&&c.push("F","F");const h=parseInt(c.join(""),16);return{r:h>>24&255,g:h>>16&255,b:h>>8&255,a:h&255,hex:"#"+c.slice(0,6).join("")}}o.getOptions=function(c){c||(c={}),c.color||(c.color={});const h=typeof c.margin>"u"||c.margin===null||c.margin<0?4:c.margin,f=c.width&&c.width>=21?c.width:void 0,x=c.scale||4;return{width:f,scale:f?4:x,margin:h,color:{dark:n(c.color.dark||"#000000ff"),light:n(c.color.light||"#ffffffff")},type:c.type,rendererOpts:c.rendererOpts||{}}},o.getScale=function(c,h){return h.width&&h.width>=c+h.margin*2?h.width/(c+h.margin*2):h.scale},o.getImageWidth=function(c,h){const f=o.getScale(c,h);return Math.floor((c+h.margin*2)*f)},o.qrToImageData=function(c,h,f){const x=h.modules.size,v=h.modules.data,C=o.getScale(x,f),w=Math.floor((x+f.margin*2)*C),A=f.margin*C,N=[f.color.light,f.color.dark];for(let R=0;R<w;R++)for(let T=0;T<w;T++){let O=(R*w+T)*4,D=f.color.light;if(R>=A&&T>=A&&R<w-A&&T<w-A){const U=Math.floor((R-A)/C),H=Math.floor((T-A)/C);D=N[v[U*x+H]?1:0]}c[O++]=D.r,c[O++]=D.g,c[O++]=D.b,c[O]=D.a}}})(Uf)),Uf}var gx;function ME(){return gx||(gx=1,(function(o){const n=iy();function a(h,f,x){h.clearRect(0,0,f.width,f.height),f.style||(f.style={}),f.height=x,f.width=x,f.style.height=x+"px",f.style.width=x+"px"}function c(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}o.render=function(f,x,v){let C=v,w=x;typeof C>"u"&&(!x||!x.getContext)&&(C=x,x=void 0),x||(w=c()),C=n.getOptions(C);const A=n.getImageWidth(f.modules.size,C),N=w.getContext("2d"),R=N.createImageData(A,A);return n.qrToImageData(R.data,f,C),a(N,w,A),N.putImageData(R,0,0),w},o.renderToDataURL=function(f,x,v){let C=v;typeof C>"u"&&(!x||!x.getContext)&&(C=x,x=void 0),C||(C={});const w=o.render(f,x,C),A=C.type||"image/png",N=C.rendererOpts||{};return w.toDataURL(A,N.quality)}})(Bf)),Bf}var Pf={},mx;function kE(){if(mx)return Pf;mx=1;const o=iy();function n(h,f){const x=h.a/255,v=f+'="'+h.hex+'"';return x<1?v+" "+f+'-opacity="'+x.toFixed(2).slice(1)+'"':v}function a(h,f,x){let v=h+f;return typeof x<"u"&&(v+=" "+x),v}function c(h,f,x){let v="",C=0,w=!1,A=0;for(let N=0;N<h.length;N++){const R=Math.floor(N%f),T=Math.floor(N/f);!R&&!w&&(w=!0),h[N]?(A++,N>0&&R>0&&h[N-1]||(v+=w?a("M",R+x,.5+T+x):a("m",C,0),C=0,w=!1),R+1<f&&h[N+1]||(v+=a("h",A),A=0)):C++}return v}return Pf.render=function(f,x,v){const C=o.getOptions(x),w=f.modules.size,A=f.modules.data,N=w+C.margin*2,R=C.color.light.a?"<path "+n(C.color.light,"fill")+' d="M0 0h'+N+"v"+N+'H0z"/>':"",T="<path "+n(C.color.dark,"stroke")+' d="'+c(A,w,C.margin)+'"/>',O='viewBox="0 0 '+N+" "+N+'"',U='<svg xmlns="http://www.w3.org/2000/svg" '+(C.width?'width="'+C.width+'" height="'+C.width+'" ':"")+O+' shape-rendering="crispEdges">'+R+T+`</svg>
`;return typeof v=="function"&&v(null,U),U},Pf}var px;function DE(){if(px)return Bo;px=1;const o=mE(),n=OE(),a=ME(),c=kE();function h(f,x,v,C,w){const A=[].slice.call(arguments,1),N=A.length,R=typeof A[N-1]=="function";if(!R&&!o())throw new Error("Callback required as last argument");if(R){if(N<2)throw new Error("Too few arguments provided");N===2?(w=v,v=x,x=C=void 0):N===3&&(x.getContext&&typeof w>"u"?(w=C,C=void 0):(w=C,C=v,v=x,x=void 0))}else{if(N<1)throw new Error("Too few arguments provided");return N===1?(v=x,x=C=void 0):N===2&&!x.getContext&&(C=v,v=x,x=void 0),new Promise(function(T,O){try{const D=n.create(v,C);T(f(D,x,C))}catch(D){O(D)}})}try{const T=n.create(v,C);w(null,f(T,x,C))}catch(T){w(T)}}return Bo.create=n.create,Bo.toCanvas=h.bind(null,a.render),Bo.toDataURL=h.bind(null,a.renderToDataURL),Bo.toString=h.bind(null,function(f,x,v){return c.render(f,v)}),Bo}var LE=DE();const BE=Gu(LE),oy=({userId:o,userName:n,userPhone:a,onDownload:c,onClose:h})=>{const[f,x]=M.useState(""),[v,C]=M.useState(!0),[w,A]=M.useState(null);M.useEffect(()=>{N()},[o,n,a]);const N=async()=>{try{if(C(!0),A(null),!o)throw new Error("User ID is required");const T=`https://mishra-aashu.github.io/CaBa/shared-profile.html?userId=${o}`;console.log("Generating QR code with URL:",T);const O=await BE.toDataURL(T,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});x(O),C(!1)}catch(T){console.error("Error generating QR code:",T),A("Failed to generate QR code. Please try again."),C(!1)}},R=()=>{try{if(f){const T=document.createElement("a");T.download=`${n||"User"}-CaBa-QR.png`,T.href=f,T.click(),c&&c()}}catch(T){console.error("Error downloading QR code:",T),alert("Failed to download QR code")}};return i.jsx("div",{className:"qr-generator-modal",children:i.jsxs("div",{className:"qr-generator-content",children:[i.jsxs("div",{className:"qr-generator-header",children:[i.jsx("h3",{children:"My QR Code"}),i.jsx("button",{className:"qr-close-btn",onClick:h,children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"qr-generator-body",children:v?i.jsxs("div",{className:"qr-loading",children:[i.jsx("div",{className:"spinner"}),i.jsx("p",{children:"Generating QR Code..."})]}):w?i.jsxs("div",{className:"qr-error",children:[i.jsx("p",{children:w}),i.jsx("button",{onClick:N,children:"Try Again"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"qr-canvas-container",children:i.jsx("img",{src:f,alt:"QR Code",className:"qr-canvas",style:{width:"256px",height:"256px"}})}),i.jsxs("div",{className:"qr-info",children:[i.jsx("p",{className:"qr-title",children:n}),a&&i.jsxs("p",{className:"qr-phone",children:[" ",a]}),i.jsx("p",{className:"qr-description",children:"Scan this QR code to view my CaBa profile"})]}),i.jsxs("div",{className:"qr-actions",children:[i.jsxs("button",{className:"qr-download-btn",onClick:R,children:[i.jsx("i",{className:"fas fa-download"}),"Download QR"]}),i.jsxs("button",{className:"qr-share-btn",onClick:()=>{navigator.share?navigator.share({title:`${n} - CaBa Profile`,text:`Connect with ${n} on CaBa!`,url:`${window.location.origin}/shared-profile.html?userId=${o}`}):navigator.clipboard.writeText(`${window.location.origin}/shared-profile.html?userId=${o}`).then(()=>alert("Profile link copied to clipboard!"))},children:[i.jsx("i",{className:"fas fa-share"}),"Share Link"]})]})]})})]})})};var Ye;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var xx=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),yx;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(yx||(yx={}));function UE(o){return Object.values(Ye).includes(o)}var vr;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(vr||(vr={}));var Oa=(function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[vr.SCAN_TYPE_CAMERA,vr.SCAN_TYPE_FILE],o})(),ly=(function(){function o(n,a){this.format=n,this.formatName=a}return o.prototype.toString=function(){return this.formatName},o.create=function(n){if(!xx.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new o(n,xx.get(n))},o})(),wx=(function(){function o(){}return o.createFromText=function(n){var a={text:n};return{decodedText:n,result:a}},o.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},o})(),c0;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(c0||(c0={}));var cy=(function(){function o(){}return o.createFrom=function(n){return{errorMessage:n,type:c0.UNKWOWN_ERROR}},o})(),uy=(function(){function o(n){this.verbose=n}return o.prototype.log=function(n){this.verbose&&console.log(n)},o.prototype.warn=function(n){this.verbose&&console.warn(n)},o.prototype.logError=function(n,a){(this.verbose||a===!0)&&console.error(n)},o.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},o})();function Ya(o){return typeof o>"u"||o===null}function PE(o,n,a){return o>a?a:o<n?n:o}var zo=(function(){function o(){}return o.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},o.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o.scannerPaused=function(){return"Scanner paused"},o})(),ln=(function(){function o(){}return o.scanningStatus=function(){return"Scanning"},o.idleStatus=function(){return"Idle"},o.errorStatus=function(){return"Error"},o.permissionStatus=function(){return"Permission"},o.noCameraFoundErrorStatus=function(){return"No Cameras"},o.lastMatch=function(n){return"Last Match: ".concat(n)},o.codeScannerTitle=function(){return"Code Scanner"},o.cameraPermissionTitle=function(){return"Request Camera Permissions"},o.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},o.noCameraFound=function(){return"No camera found"},o.scanButtonStopScanningText=function(){return"Stop Scanning"},o.scanButtonStartScanningText=function(){return"Start Scanning"},o.torchOnButton=function(){return"Switch On Torch"},o.torchOffButton=function(){return"Switch Off Torch"},o.torchOnFailedMessage=function(){return"Failed to turn on torch"},o.torchOffFailedMessage=function(){return"Failed to turn off torch"},o.scanButtonScanningStarting=function(){return"Launching Camera..."},o.textIfCameraScanSelected=function(){return"Scan an Image File"},o.textIfFileScanSelected=function(){return"Scan using camera directly"},o.selectCamera=function(){return"Select Camera"},o.fileSelectionChooseImage=function(){return"Choose Image"},o.fileSelectionChooseAnother=function(){return"Choose Another"},o.fileSelectionNoImageSelected=function(){return"No image choosen"},o.anonymousCameraPrefix=function(){return"Anonymous Camera"},o.dragAndDropMessage=function(){return"Or drop an image to scan"},o.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},o.zoom=function(){return"zoom"},o.loadingImage=function(){return"Loading image..."},o.cameraScanAltText=function(){return"Camera based scan"},o.fileScanAltText=function(){return"Fule based scan"},o})(),bx=(function(){function o(){}return o.poweredBy=function(){return"Powered by "},o.reportIssues=function(){return"Report issues"},o})(),dy=(function(){function o(){}return o.isMediaStreamConstraintsValid=function(n,a){if(typeof n!="object"){var c=typeof n;return a.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(c,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(h),x=Object.keys(n),v=0,C=x;v<C.length;v++){var w=C[v];if(f.has(w))return a.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},o})(),Vl={exports:{}},zE=Vl.exports,vx;function FE(){return vx||(vx=1,(function(o,n){(function(a,c){c(n)})(zE,(function(a){function c(k){return k==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,t){k.__proto__=t}||function(k,t){for(var r in t)t.hasOwnProperty(r)&&(k[r]=t[r])};function f(k,t){h(k,t);function r(){this.constructor=k}k.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function x(k,t){var r=Object.setPrototypeOf;r?r(k,t):k.__proto__=t}function v(k,t){t===void 0&&(t=k.constructor);var r=Error.captureStackTrace;r&&r(k,t)}var C=(function(k){f(t,k);function t(r){var l=this.constructor,d=k.call(this,r)||this;return Object.defineProperty(d,"name",{value:l.name,enumerable:!1}),x(d,l.prototype),v(d),d}return t})(Error);class w extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}w.kind="Exception";class A extends w{}A.kind="ArgumentException";class N extends w{}N.kind="IllegalArgumentException";class R{constructor(t){if(this.binarizer=t,t===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,l,d){const g=this.binarizer.getLuminanceSource().crop(t,r,l,d);return new R(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends w{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class O{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(t,r,l,d,g){for(;g--;)l[d++]=t[r++]}static currentTimeMillis(){return Date.now()}}class U extends w{}U.kind="IndexOutOfBoundsException";class H extends U{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}H.kind="ArrayIndexOutOfBoundsException";class B{static fill(t,r){for(let l=0,d=t.length;l<d;l++)t[l]=r}static fillWithin(t,r,l,d){B.rangeCheck(t.length,r,l);for(let g=r;g<l;g++)t[g]=d}static rangeCheck(t,r,l){if(r>l)throw new N("fromIndex("+r+") > toIndex("+l+")");if(r<0)throw new H(r);if(l>t)throw new H(l)}static asList(...t){return t}static create(t,r,l){return Array.from({length:t}).map(g=>Array.from({length:r}).fill(l))}static createInt32Array(t,r,l){return Array.from({length:t}).map(g=>Int32Array.from({length:r}).fill(l))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let l=0,d=t.length;l<d;l++)if(t[l]!==r[l])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const l of t)r=31*r+l;return r}static fillUint8Array(t,r){for(let l=0;l!==t.length;l++)t[l]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const l=new Uint8Array(r);return l.set(t),l}return t.slice(0,r)}static copyOfRange(t,r,l){const d=l-r,g=new Int32Array(d);return D.arraycopy(t,r,g,0,d),g}static binarySearch(t,r,l){l===void 0&&(l=B.numberComparator);let d=0,g=t.length-1;for(;d<=g;){const p=g+d>>1,y=l(r,t[p]);if(y>0)d=p+1;else if(y<0)g=p-1;else return p}return-d-1}static numberComparator(t,r){return t-r}}class P{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let l=31;return r=t<<16,r!==0&&(l-=16,t=r),r=t<<8,r!==0&&(l-=8,t=r),r=t<<4,r!==0&&(l-=4,t=r),r=t<<2,r!==0&&(l-=2,t=r),l-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}P.MIN_VALUE_32_BITS=-2147483648,P.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=Q.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=Q.makeArray(t);D.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const l=this.bits;let d=Math.floor(t/32),g=l[d];g&=~((1<<(t&31))-1);const p=l.length;for(;g===0;){if(++d===p)return r;g=l[d]}const y=d*32+P.numberOfTrailingZeros(g);return y>r?r:y}getNextUnset(t){const r=this.size;if(t>=r)return r;const l=this.bits;let d=Math.floor(t/32),g=~l[d];g&=~((1<<(t&31))-1);const p=l.length;for(;g===0;){if(++d===p)return r;g=~l[d]}const y=d*32+P.numberOfTrailingZeros(g);return y>r?r:y}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new N;if(r===t)return;r--;const l=Math.floor(t/32),d=Math.floor(r/32),g=this.bits;for(let p=l;p<=d;p++){const y=p>l?0:t&31,E=(2<<(p<d?31:r&31))-(1<<y);g[p]|=E}}clear(){const t=this.bits.length,r=this.bits;for(let l=0;l<t;l++)r[l]=0}isRange(t,r,l){if(r<t||t<0||r>this.size)throw new N;if(r===t)return!0;r--;const d=Math.floor(t/32),g=Math.floor(r/32),p=this.bits;for(let y=d;y<=g;y++){const _=y>d?0:t&31,j=(2<<(y<g?31:r&31))-(1<<_)&4294967295;if((p[y]&j)!==(l?j:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let l=r;l>0;l--)this.appendBit((t>>l-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let l=0;l<r;l++)this.appendBit(t.get(l))}xor(t){if(this.size!==t.size)throw new N("Sizes don't match");const r=this.bits;for(let l=0,d=r.length;l<d;l++)r[l]^=t.bits[l]}toBytes(t,r,l,d){for(let g=0;g<d;g++){let p=0;for(let y=0;y<8;y++)this.get(t)&&(p|=1<<7-y),t++;r[l+g]=p}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),l=r+1,d=this.bits;for(let g=0;g<l;g++){let p=d[g];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,t[r-g]=p}if(this.size!==l*32){const g=l*32-this.size;let p=t[0]>>>g;for(let y=1;y<l;y++){const _=t[y];p|=_<<32-g,t[y-1]=p,p=_>>>g}t[l-1]=p}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof Q))return!1;const r=t;return this.size===r.size&&B.equals(this.bits,r.bits)}hashCode(){return 31*this.size+B.hashCode(this.bits)}toString(){let t="";for(let r=0,l=this.size;r<l;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new Q(this.size,this.bits.slice())}}var Z;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var Y=Z;class X extends w{static getFormatInstance(){return new X}}X.kind="FormatException";var ee;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(ee||(ee={}));class q{constructor(t,r,l,...d){this.valueIdentifier=t,this.name=l,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=d,q.VALUE_IDENTIFIER_TO_ECI.set(t,this),q.NAME_TO_ECI.set(l,this);const g=this.values;for(let p=0,y=g.length;p!==y;p++){const _=g[p];q.VALUES_TO_ECI.set(_,this)}for(const p of d)q.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new X("incorect value");const r=q.VALUES_TO_ECI.get(t);if(r===void 0)throw new X("incorect value");return r}static getCharacterSetECIByName(t){const r=q.NAME_TO_ECI.get(t);if(r===void 0)throw new X("incorect value");return r}equals(t){if(!(t instanceof q))return!1;const r=t;return this.getName()===r.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q(ee.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q(ee.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q(ee.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q(ee.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q(ee.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q(ee.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q(ee.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q(ee.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q(ee.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q(ee.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q(ee.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q(ee.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q(ee.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q(ee.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q(ee.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q(ee.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q(ee.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q(ee.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q(ee.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q(ee.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q(ee.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q(ee.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q(ee.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q(ee.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q(ee.Big5,28,"Big5"),q.GB18030=new q(ee.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q(ee.EUC_KR,30,"EUC_KR","EUC-KR");class xe extends w{}xe.kind="UnsupportedOperationException";class we{static decode(t,r){const l=this.encodingName(r);return this.customDecoder?this.customDecoder(t,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(t,l):new TextDecoder(l).decode(t)}static shouldDecodeOnFallback(t){return!we.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const l=this.encodingName(r);return this.customEncoder?this.customEncoder(t,l):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof q?t:q.getCharacterSetECIByName(t)}static decodeFallback(t,r){const l=this.encodingCharacterSet(r);if(we.isDecodeFallbackSupported(l)){let d="";for(let g=0,p=t.length;g<p;g++){let y=t[g].toString(16);y.length<2&&(y="0"+y),d+="%"+y}return decodeURIComponent(d)}if(l.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new xe(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(q.UTF8)||t.equals(q.ISO8859_1)||t.equals(q.ASCII)}static encodeFallback(t){const l=btoa(unescape(encodeURIComponent(t))).split(""),d=[];for(let g=0;g<l.length;g++)d.push(l[g].charCodeAt(0));return new Uint8Array(d)}}class me{static castAsNonUtf8Char(t,r=null){const l=r?r.getName():this.ISO88591;return we.decode(new Uint8Array([t]),l)}static guessEncoding(t,r){if(r!=null&&r.get(Y.CHARACTER_SET)!==void 0)return r.get(Y.CHARACTER_SET).toString();const l=t.length;let d=!0,g=!0,p=!0,y=0,_=0,E=0,j=0,L=0,z=0,K=0,te=0,se=0,oe=0,fe=0;const Pe=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Be=0;Be<l&&(d||g||p);Be++){const Ie=t[Be]&255;p&&(y>0?(Ie&128)===0?p=!1:y--:(Ie&128)!==0&&((Ie&64)===0?p=!1:(y++,(Ie&32)===0?_++:(y++,(Ie&16)===0?E++:(y++,(Ie&8)===0?j++:p=!1))))),d&&(Ie>127&&Ie<160?d=!1:Ie>159&&(Ie<192||Ie===215||Ie===247)&&fe++),g&&(L>0?Ie<64||Ie===127||Ie>252?g=!1:L--:Ie===128||Ie===160||Ie>239?g=!1:Ie>160&&Ie<224?(z++,te=0,K++,K>se&&(se=K)):Ie>127?(L++,K=0,te++,te>oe&&(oe=te)):(K=0,te=0))}return p&&y>0&&(p=!1),g&&L>0&&(g=!1),p&&(Pe||_+E+j>0)?me.UTF8:g&&(me.ASSUME_SHIFT_JIS||se>=3||oe>=3)?me.SHIFT_JIS:d&&g?se===2&&z===2||fe*10>=l?me.SHIFT_JIS:me.ISO88591:d?me.ISO88591:g?me.SHIFT_JIS:p?me.UTF8:me.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let l=-1;function d(p,y,_,E,j,L){if(p==="%%")return"%";if(r[++l]===void 0)return;p=E?parseInt(E.substr(1)):void 0;let z=j?parseInt(j.substr(1)):void 0,K;switch(L){case"s":K=r[l];break;case"c":K=r[l][0];break;case"f":K=parseFloat(r[l]).toFixed(p);break;case"p":K=parseFloat(r[l]).toPrecision(p);break;case"e":K=parseFloat(r[l]).toExponential(p);break;case"x":K=parseInt(r[l]).toString(z||16);break;case"d":K=parseFloat(parseInt(r[l],z||10).toPrecision(p)).toFixed(0);break}K=typeof K=="object"?JSON.stringify(K):(+K).toString(z);let te=parseInt(_),se=_&&_[0]+""=="0"?"0":" ";for(;K.length<te;)K=y!==void 0?K+se:se+K;return K}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(g,d)}static getBytes(t,r){return we.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}me.SHIFT_JIS=q.SJIS.getName(),me.GB2312="GB2312",me.ISO88591=q.ISO8859_1.getName(),me.EUC_JP="EUC_JP",me.UTF8=q.UTF8.getName(),me.PLATFORM_DEFAULT_ENCODING=me.UTF8,me.ASSUME_SHIFT_JIS=!1;class Ce{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=me.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,l){for(let d=r;r<r+l;d++)this.append(t[d]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class Oe{constructor(t,r,l,d){if(this.width=t,this.height=r,this.rowSize=l,this.bits=d,r==null&&(r=t),this.height=r,t<1||r<1)throw new N("Both dimensions must be greater than 0");l==null&&(l=Math.floor((t+31)/32)),this.rowSize=l,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,l=t[0].length,d=new Oe(l,r);for(let g=0;g<r;g++){const p=t[g];for(let y=0;y<l;y++)p[y]&&d.set(y,g)}return d}static parseFromString(t,r,l){if(t===null)throw new N("stringRepresentation cannot be null");const d=new Array(t.length);let g=0,p=0,y=-1,_=0,E=0;for(;E<t.length;)if(t.charAt(E)===`
`||t.charAt(E)==="\r"){if(g>p){if(y===-1)y=g-p;else if(g-p!==y)throw new N("row lengths do not match");p=g,_++}E++}else if(t.substring(E,E+r.length)===r)E+=r.length,d[g]=!0,g++;else if(t.substring(E,E+l.length)===l)E+=l.length,d[g]=!1,g++;else throw new N("illegal character encountered: "+t.substring(E));if(g>p){if(y===-1)y=g-p;else if(g-p!==y)throw new N("row lengths do not match");_++}const j=new Oe(y,_);for(let L=0;L<g;L++)d[L]&&j.set(Math.floor(L%y),Math.floor(L/y));return j}get(t,r){const l=r*this.rowSize+Math.floor(t/32);return(this.bits[l]>>>(t&31)&1)!==0}set(t,r){const l=r*this.rowSize+Math.floor(t/32);this.bits[l]|=1<<(t&31)&4294967295}unset(t,r){const l=r*this.rowSize+Math.floor(t/32);this.bits[l]&=~(1<<(t&31)&4294967295)}flip(t,r){const l=r*this.rowSize+Math.floor(t/32);this.bits[l]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new N("input matrix dimensions do not match");const r=new Q(Math.floor(this.width/32)+1),l=this.rowSize,d=this.bits;for(let g=0,p=this.height;g<p;g++){const y=g*l,_=t.getRow(g,r).getBitArray();for(let E=0;E<l;E++)d[y+E]^=_[E]}}clear(){const t=this.bits,r=t.length;for(let l=0;l<r;l++)t[l]=0}setRegion(t,r,l,d){if(r<0||t<0)throw new N("Left and top must be nonnegative");if(d<1||l<1)throw new N("Height and width must be at least 1");const g=t+l,p=r+d;if(p>this.height||g>this.width)throw new N("The region must fit inside the matrix");const y=this.rowSize,_=this.bits;for(let E=r;E<p;E++){const j=E*y;for(let L=t;L<g;L++)_[j+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new Q(this.width):r.clear();const l=this.rowSize,d=this.bits,g=t*l;for(let p=0;p<l;p++)r.setBulk(p*32,d[g+p]);return r}setRow(t,r){D.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let l=new Q(t),d=new Q(t);for(let g=0,p=Math.floor((r+1)/2);g<p;g++)l=this.getRow(g,l),d=this.getRow(r-1-g,d),l.reverse(),d.reverse(),this.setRow(g,d),this.setRow(r-1-g,l)}getEnclosingRectangle(){const t=this.width,r=this.height,l=this.rowSize,d=this.bits;let g=t,p=r,y=-1,_=-1;for(let E=0;E<r;E++)for(let j=0;j<l;j++){const L=d[E*l+j];if(L!==0){if(E<p&&(p=E),E>_&&(_=E),j*32<g){let z=0;for(;(L<<31-z&4294967295)===0;)z++;j*32+z<g&&(g=j*32+z)}if(j*32+31>y){let z=31;for(;!(L>>>z);)z--;j*32+z>y&&(y=j*32+z)}}}return y<g||_<p?null:Int32Array.from([g,p,y-g+1,_-p+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let l=0;for(;l<r.length&&r[l]===0;)l++;if(l===r.length)return null;const d=l/t;let g=l%t*32;const p=r[l];let y=0;for(;(p<<31-y&4294967295)===0;)y++;return g+=y,Int32Array.from([g,d])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let l=r.length-1;for(;l>=0&&r[l]===0;)l--;if(l<0)return null;const d=Math.floor(l/t);let g=Math.floor(l%t)*32;const p=r[l];let y=31;for(;!(p>>>y);)y--;return g+=y,Int32Array.from([g,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Oe))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&B.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+B.hashCode(this.bits),t}toString(t="X ",r="  ",l=`
`){return this.buildToString(t,r,l)}buildToString(t,r,l){let d=new Ce;for(let g=0,p=this.height;g<p;g++){for(let y=0,_=this.width;y<_;y++)d.append(this.get(y,g)?t:r);d.append(l)}return d.toString()}clone(){return new Oe(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends w{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class $ extends O{constructor(t){super(t),this.luminances=$.EMPTY,this.buckets=new Int32Array($.LUMINANCE_BUCKETS)}getBlackRow(t,r){const l=this.getLuminanceSource(),d=l.getWidth();r==null||r.getSize()<d?r=new Q(d):r.clear(),this.initArrays(d);const g=l.getRow(t,this.luminances),p=this.buckets;for(let _=0;_<d;_++)p[(g[_]&255)>>$.LUMINANCE_SHIFT]++;const y=$.estimateBlackPoint(p);if(d<3)for(let _=0;_<d;_++)(g[_]&255)<y&&r.set(_);else{let _=g[0]&255,E=g[1]&255;for(let j=1;j<d-1;j++){const L=g[j+1]&255;(E*4-_-L)/2<y&&r.set(j),_=E,E=L}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),l=t.getHeight(),d=new Oe(r,l);this.initArrays(r);const g=this.buckets;for(let _=1;_<5;_++){const E=Math.floor(l*_/5),j=t.getRow(E,this.luminances),L=Math.floor(r*4/5);for(let z=Math.floor(r/5);z<L;z++){const K=j[z]&255;g[K>>$.LUMINANCE_SHIFT]++}}const p=$.estimateBlackPoint(g),y=t.getMatrix();for(let _=0;_<l;_++){const E=_*r;for(let j=0;j<r;j++)(y[E+j]&255)<p&&d.set(j,_)}return d}createBinarizer(t){return new $(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let l=0;l<$.LUMINANCE_BUCKETS;l++)r[l]=0}static estimateBlackPoint(t){const r=t.length;let l=0,d=0,g=0;for(let j=0;j<r;j++)t[j]>g&&(d=j,g=t[j]),t[j]>l&&(l=t[j]);let p=0,y=0;for(let j=0;j<r;j++){const L=j-d,z=t[j]*L*L;z>y&&(p=j,y=z)}if(d>p){const j=d;d=p,p=j}if(p-d<=r/16)throw new V;let _=p-1,E=-1;for(let j=p-1;j>d;j--){const L=j-d,z=L*L*(p-j)*(l-t[j]);z>E&&(_=j,E=z)}return _<<$.LUMINANCE_SHIFT}}$.LUMINANCE_BITS=5,$.LUMINANCE_SHIFT=8-$.LUMINANCE_BITS,$.LUMINANCE_BUCKETS=1<<$.LUMINANCE_BITS,$.EMPTY=Uint8ClampedArray.from([0]);class ie extends ${constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),l=t.getHeight();if(r>=ie.MINIMUM_DIMENSION&&l>=ie.MINIMUM_DIMENSION){const d=t.getMatrix();let g=r>>ie.BLOCK_SIZE_POWER;(r&ie.BLOCK_SIZE_MASK)!==0&&g++;let p=l>>ie.BLOCK_SIZE_POWER;(l&ie.BLOCK_SIZE_MASK)!==0&&p++;const y=ie.calculateBlackPoints(d,g,p,r,l),_=new Oe(r,l);ie.calculateThresholdForBlock(d,g,p,r,l,y,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new ie(t)}static calculateThresholdForBlock(t,r,l,d,g,p,y){const _=g-ie.BLOCK_SIZE,E=d-ie.BLOCK_SIZE;for(let j=0;j<l;j++){let L=j<<ie.BLOCK_SIZE_POWER;L>_&&(L=_);const z=ie.cap(j,2,l-3);for(let K=0;K<r;K++){let te=K<<ie.BLOCK_SIZE_POWER;te>E&&(te=E);const se=ie.cap(K,2,r-3);let oe=0;for(let Pe=-2;Pe<=2;Pe++){const Be=p[z+Pe];oe+=Be[se-2]+Be[se-1]+Be[se]+Be[se+1]+Be[se+2]}const fe=oe/25;ie.thresholdBlock(t,te,L,fe,d,y)}}}static cap(t,r,l){return t<r?r:t>l?l:t}static thresholdBlock(t,r,l,d,g,p){for(let y=0,_=l*g+r;y<ie.BLOCK_SIZE;y++,_+=g)for(let E=0;E<ie.BLOCK_SIZE;E++)(t[_+E]&255)<=d&&p.set(r+E,l+y)}static calculateBlackPoints(t,r,l,d,g){const p=g-ie.BLOCK_SIZE,y=d-ie.BLOCK_SIZE,_=new Array(l);for(let E=0;E<l;E++){_[E]=new Int32Array(r);let j=E<<ie.BLOCK_SIZE_POWER;j>p&&(j=p);for(let L=0;L<r;L++){let z=L<<ie.BLOCK_SIZE_POWER;z>y&&(z=y);let K=0,te=255,se=0;for(let fe=0,Pe=j*d+z;fe<ie.BLOCK_SIZE;fe++,Pe+=d){for(let Be=0;Be<ie.BLOCK_SIZE;Be++){const Ie=t[Pe+Be]&255;K+=Ie,Ie<te&&(te=Ie),Ie>se&&(se=Ie)}if(se-te>ie.MIN_DYNAMIC_RANGE)for(fe++,Pe+=d;fe<ie.BLOCK_SIZE;fe++,Pe+=d)for(let Be=0;Be<ie.BLOCK_SIZE;Be++)K+=t[Pe+Be]&255}let oe=K>>ie.BLOCK_SIZE_POWER*2;if(se-te<=ie.MIN_DYNAMIC_RANGE&&(oe=te/2,E>0&&L>0)){const fe=(_[E-1][L]+2*_[E][L-1]+_[E-1][L-1])/4;te<fe&&(oe=fe)}_[E][L]=oe}}return _}}ie.BLOCK_SIZE_POWER=3,ie.BLOCK_SIZE=1<<ie.BLOCK_SIZE_POWER,ie.BLOCK_SIZE_MASK=ie.BLOCK_SIZE-1,ie.MINIMUM_DIMENSION=ie.BLOCK_SIZE*5,ie.MIN_DYNAMIC_RANGE=24;class ke{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,l,d){throw new xe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new xe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new xe("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new Ce;for(let l=0;l<this.height;l++){const d=this.getRow(l,t);for(let g=0;g<this.width;g++){const p=d[g]&255;let y;p<64?y="#":p<128?y="+":p<192?y=".":y=" ",r.append(y)}r.append(`
`)}return r.toString()}}class Ge extends ke{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const l=this.delegate.getRow(t,r),d=this.getWidth();for(let g=0;g<d;g++)l[g]=255-(l[g]&255);return l}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(r);for(let d=0;d<r;d++)l[d]=255-(t[d]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,l,d){return new Ge(this.delegate.crop(t,r,l,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ge(this.delegate.rotateCounterClockwise45())}}class Ke extends ke{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Ke.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return Ke.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,l){const d=new Uint8ClampedArray(r*l);for(let g=0,p=0,y=t.length;g<y;g+=4,p++){let _;if(t[g+3]===0)_=255;else{const j=t[g],L=t[g+1],z=t[g+2];_=306*j+601*L+117*z+512>>10}d[p]=_}return d}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const l=this.getWidth(),d=t*l;return r===null?r=this.buffer.slice(d,d+l):(r.length<l&&(r=new Uint8ClampedArray(l)),r.set(this.buffer.slice(d,d+l))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,l,d){return super.crop(t,r,l,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),l=r.getContext("2d"),d=t*Ke.DEGREE_TO_RADIANS,g=this.canvas.width,p=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(d))*g+Math.abs(Math.sin(d))*p),_=Math.ceil(Math.abs(Math.sin(d))*g+Math.abs(Math.cos(d))*p);return r.width=y,r.height=_,l.translate(y/2,_/2),l.rotate(d),l.drawImage(this.canvas,g/-2,p/-2),this.buffer=Ke.makeBufferFromCanvasImageData(r),this}invert(){return new Ge(this)}}Ke.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(t,r,l){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var pe=(globalThis||yu||self||window||void 0)&&(globalThis||yu||self||window||void 0).__awaiter||function(k,t,r,l){function d(g){return g instanceof r?g:new r(function(p){p(g)})}return new(r||(r=Promise))(function(g,p){function y(j){try{E(l.next(j))}catch(L){p(L)}}function _(j){try{E(l.throw(j))}catch(L){p(L)}}function E(j){j.done?g(j.value):d(j.value).then(y,_)}E((l=l.apply(k,t||[])).next())})};class Le{constructor(t,r=500,l){this.reader=t,this.timeBetweenScansMillis=r,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return pe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const l of t){const d=l.kind==="video"?"videoinput":l.kind;if(d!=="videoinput")continue;const g=l.deviceId||l.id,p=l.label||`Video device ${r.length+1}`,y=l.groupId,_={deviceId:g,label:p,kind:d,groupId:y};r.push(_)}return r})}getVideoInputDevices(){return pe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new ne(r.deviceId,r.label))})}findDeviceById(t){return pe(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(l=>l.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return pe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return pe(this,void 0,void 0,function*(){this.reset();let l;t?l={deviceId:{exact:t}}:l={facingMode:"environment"};const d={video:l};return yield this.decodeOnceFromConstraints(d,r)})}decodeOnceFromConstraints(t,r){return pe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(l,r)})}decodeOnceFromStream(t,r){return pe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(t,r,l){return pe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,l)})}decodeFromVideoDevice(t,r,l){return pe(this,void 0,void 0,function*(){let d;t?d={deviceId:{exact:t}}:d={facingMode:"environment"};const g={video:d};return yield this.decodeFromConstraints(g,r,l)})}decodeFromConstraints(t,r,l){return pe(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(d,r,l)})}decodeFromStream(t,r,l){return pe(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(d,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return pe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(r);return this.addVideoSource(l,t),this.videoElement=l,this.stream=t,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(t){return new Promise((r,l)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return pe(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const l=document.getElementById(t);if(!l)throw new A(`element with id '${t}' not found`);if(l.nodeName.toLowerCase()!==r.toLowerCase())throw new A(`element with id '${t}' must be an ${r} element`);return l}decodeFromImage(t,r){if(!t&&!r)throw new A("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new A("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,l){if(t===void 0&&r===void 0)throw new A("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,l):this.decodeFromVideoElementContinuously(t,l)}decodeFromImageElement(t){if(!t)throw new A("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let l;return this.isImageLoaded(r)?l=this.decodeOnce(r,!1,!0):l=this._decodeOnLoadImage(r),l}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const l=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(l,r)}_decodeFromVideoElementSetup(t){if(!t)throw new A("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new A("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const l=this._decodeOnLoadImage(r);return r.src=t,l}decodeFromVideoUrl(t){if(!t)throw new A("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),l=this.decodeFromVideoElement(r);return r.src=t,l}decodeFromVideoUrlContinuously(t,r){if(!t)throw new A("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(l,r);return l.src=t,d}_decodeOnLoadImage(t){return new Promise((r,l)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,l),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return pe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return pe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,l=!0){this._stopAsyncDecode=!1;const d=(g,p)=>{if(this._stopAsyncDecode){p(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(t);g(y)}catch(y){const _=r&&y instanceof V,j=(y instanceof T||y instanceof X)&&l;if(_||j)return setTimeout(d,this._timeBetweenDecodingAttempts,g,p);p(y)}};return new Promise((g,p)=>d(g,p))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(t);r(d,null),setTimeout(l,this.timeBetweenScansMillis)}catch(d){r(null,d);const g=d instanceof T||d instanceof X,p=d instanceof V;(g||p)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,l){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,l=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),l=new Ke(r),d=new ie(l);return new R(d)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let l,d;return typeof t<"u"&&(t instanceof HTMLVideoElement?(l=t.videoWidth,d=t.videoHeight):t instanceof HTMLImageElement&&(l=t.naturalWidth||t.width,d=t.naturalHeight||t.height)),r.style.width=l+"px",r.style.height=d+"px",r.width=l,r.height=d,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(t,r,l=r==null?0:8*r.length,d,g,p=D.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=l,this.resultPoints=d,this.format=g,this.timestamp=p,this.text=t,this.rawBytes=r,l==null?this.numBits=r==null?0:8*r.length:this.numBits=l,this.resultPoints=d,this.format=g,this.resultMetadata=null,p==null?this.timestamp=D.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const l=new Array(r.length+t.length);D.arraycopy(r,0,l,0,r.length),D.arraycopy(t,0,l,r.length,t.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var We;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(We||(We={}));var Ne=We,$e;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})($e||($e={}));var De=$e;class ve{constructor(t,r,l,d,g=-1,p=-1){this.rawBytes=t,this.text=r,this.byteSegments=l,this.ecLevel=d,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=p,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Je{exp(t){return this.expTable[t]}log(t){if(t===0)throw new N;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class mt{constructor(t,r){if(r.length===0)throw new N;this.field=t;const l=r.length;if(l>1&&r[0]===0){let d=1;for(;d<l&&r[d]===0;)d++;d===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-d),D.arraycopy(r,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let l;if(t===1){l=0;for(let p=0,y=r.length;p!==y;p++){const _=r[p];l=Je.addOrSubtract(l,_)}return l}l=r[0];const d=r.length,g=this.field;for(let p=1;p<d;p++)l=Je.addOrSubtract(g.multiply(t,l),r[p]);return l}addOrSubtract(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,l=t.coefficients;if(r.length>l.length){const p=r;r=l,l=p}let d=new Int32Array(l.length);const g=l.length-r.length;D.arraycopy(l,0,d,0,g);for(let p=g;p<l.length;p++)d[p]=Je.addOrSubtract(r[p-g],l[p]);return new mt(this.field,d)}multiply(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,l=r.length,d=t.coefficients,g=d.length,p=new Int32Array(l+g-1),y=this.field;for(let _=0;_<l;_++){const E=r[_];for(let j=0;j<g;j++)p[_+j]=Je.addOrSubtract(p[_+j],y.multiply(E,d[j]))}return new mt(y,p)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,l=this.field,d=new Int32Array(r),g=this.coefficients;for(let p=0;p<r;p++)d[p]=l.multiply(g[p],t);return new mt(l,d)}multiplyByMonomial(t,r){if(t<0)throw new N;if(r===0)return this.field.getZero();const l=this.coefficients,d=l.length,g=new Int32Array(d+t),p=this.field;for(let y=0;y<d;y++)g[y]=p.multiply(l[y],r);return new mt(p,g)}divide(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new N("Divide by 0");const r=this.field;let l=r.getZero(),d=this;const g=t.getCoefficient(t.getDegree()),p=r.inverse(g);for(;d.getDegree()>=t.getDegree()&&!d.isZero();){const y=d.getDegree()-t.getDegree(),_=r.multiply(d.getCoefficient(d.getDegree()),p),E=t.multiplyByMonomial(y,_),j=r.buildMonomial(y,_);l=l.addOrSubtract(j),d=d.addOrSubtract(E)}return[l,d]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let l=this.getCoefficient(r);if(l!==0){if(l<0?(t+=" - ",l=-l):t.length>0&&(t+=" + "),r===0||l!==1){const d=this.field.log(l);d===0?t+="1":d===1?t+="a":(t+="a^",t+=d)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class Wt extends w{}Wt.kind="ArithmeticException";class ft extends Je{constructor(t,r,l){super(),this.primitive=t,this.size=r,this.generatorBase=l;const d=new Int32Array(r);let g=1;for(let y=0;y<r;y++)d[y]=g,g*=2,g>=r&&(g^=t,g&=r-1);this.expTable=d;const p=new Int32Array(r);for(let y=0;y<r-1;y++)p[d[y]]=y;this.logTable=p,this.zero=new mt(this,Int32Array.from([0])),this.one=new mt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new N;if(r===0)return this.zero;const l=new Int32Array(t+1);return l[0]=r,new mt(this,l)}inverse(t){if(t===0)throw new Wt;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+P.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}ft.AZTEC_DATA_12=new ft(4201,4096,1),ft.AZTEC_DATA_10=new ft(1033,1024,1),ft.AZTEC_DATA_6=new ft(67,64,1),ft.AZTEC_PARAM=new ft(19,16,1),ft.QR_CODE_FIELD_256=new ft(285,256,0),ft.DATA_MATRIX_FIELD_256=new ft(301,256,1),ft.AZTEC_DATA_8=ft.DATA_MATRIX_FIELD_256,ft.MAXICODE_FIELD_64=ft.AZTEC_DATA_6;class Mt extends w{}Mt.kind="ReedSolomonException";class xn extends w{}xn.kind="IllegalStateException";class cn{constructor(t){this.field=t}decode(t,r){const l=this.field,d=new mt(l,t),g=new Int32Array(r);let p=!0;for(let K=0;K<r;K++){const te=d.evaluateAt(l.exp(K+l.getGeneratorBase()));g[g.length-1-K]=te,te!==0&&(p=!1)}if(p)return;const y=new mt(l,g),_=this.runEuclideanAlgorithm(l.buildMonomial(r,1),y,r),E=_[0],j=_[1],L=this.findErrorLocations(E),z=this.findErrorMagnitudes(j,L);for(let K=0;K<L.length;K++){const te=t.length-1-l.log(L[K]);if(te<0)throw new Mt("Bad error location");t[te]=ft.addOrSubtract(t[te],z[K])}}runEuclideanAlgorithm(t,r,l){if(t.getDegree()<r.getDegree()){const K=t;t=r,r=K}const d=this.field;let g=t,p=r,y=d.getZero(),_=d.getOne();for(;p.getDegree()>=(l/2|0);){let K=g,te=y;if(g=p,y=_,g.isZero())throw new Mt("r_{i-1} was zero");p=K;let se=d.getZero();const oe=g.getCoefficient(g.getDegree()),fe=d.inverse(oe);for(;p.getDegree()>=g.getDegree()&&!p.isZero();){const Pe=p.getDegree()-g.getDegree(),Be=d.multiply(p.getCoefficient(p.getDegree()),fe);se=se.addOrSubtract(d.buildMonomial(Pe,Be)),p=p.addOrSubtract(g.multiplyByMonomial(Pe,Be))}if(_=se.multiply(y).addOrSubtract(te),p.getDegree()>=g.getDegree())throw new xn("Division algorithm failed to reduce polynomial?")}const E=_.getCoefficient(0);if(E===0)throw new Mt("sigmaTilde(0) was zero");const j=d.inverse(E),L=_.multiplyScalar(j),z=p.multiplyScalar(j);return[L,z]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const l=new Int32Array(r);let d=0;const g=this.field;for(let p=1;p<g.getSize()&&d<r;p++)t.evaluateAt(p)===0&&(l[d]=g.inverse(p),d++);if(d!==r)throw new Mt("Error locator degree does not match number of roots");return l}findErrorMagnitudes(t,r){const l=r.length,d=new Int32Array(l),g=this.field;for(let p=0;p<l;p++){const y=g.inverse(r[p]);let _=1;for(let E=0;E<l;E++)if(p!==E){const j=g.multiply(r[E],y),L=(j&1)===0?j|1:j&-2;_=g.multiply(_,L)}d[p]=g.multiply(t.evaluateAt(y),g.inverse(_)),g.getGeneratorBase()!==0&&(d[p]=g.multiply(d[p],y))}return d}}var qt;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})(qt||(qt={}));class At{decode(t){this.ddata=t;let r=t.getBits(),l=this.extractBits(r),d=this.correctBits(l),g=At.convertBoolArrayToByteArray(d),p=At.getEncodedData(d),y=new ve(g,p,null,null);return y.setNumBits(d.length),y}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,l=qt.UPPER,d=qt.UPPER,g="",p=0;for(;p<r;)if(d===qt.BINARY){if(r-p<5)break;let y=At.readCode(t,p,5);if(p+=5,y===0){if(r-p<11)break;y=At.readCode(t,p,11)+31,p+=11}for(let _=0;_<y;_++){if(r-p<8){p=r;break}const E=At.readCode(t,p,8);g+=me.castAsNonUtf8Char(E),p+=8}d=l}else{let y=d===qt.DIGIT?4:5;if(r-p<y)break;let _=At.readCode(t,p,y);p+=y;let E=At.getCharacter(d,_);E.startsWith("CTRL_")?(l=d,d=At.getTable(E.charAt(5)),E.charAt(6)==="L"&&(l=d)):(g+=E,d=l)}return g}static getTable(t){switch(t){case"L":return qt.LOWER;case"P":return qt.PUNCT;case"M":return qt.MIXED;case"D":return qt.DIGIT;case"B":return qt.BINARY;case"U":default:return qt.UPPER}}static getCharacter(t,r){switch(t){case qt.UPPER:return At.UPPER_TABLE[r];case qt.LOWER:return At.LOWER_TABLE[r];case qt.MIXED:return At.MIXED_TABLE[r];case qt.PUNCT:return At.PUNCT_TABLE[r];case qt.DIGIT:return At.DIGIT_TABLE[r];default:throw new xn("Bad table")}}correctBits(t){let r,l;this.ddata.getNbLayers()<=2?(l=6,r=ft.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,r=ft.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,r=ft.AZTEC_DATA_10):(l=12,r=ft.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),g=t.length/l;if(g<d)throw new X;let p=t.length%l,y=new Int32Array(g);for(let z=0;z<g;z++,p+=l)y[z]=At.readCode(t,p,l);try{new cn(r).decode(y,g-d)}catch(z){throw new X(z)}let _=(1<<l)-1,E=0;for(let z=0;z<d;z++){let K=y[z];if(K===0||K===_)throw new X;(K===1||K===_-1)&&E++}let j=new Array(d*l-E),L=0;for(let z=0;z<d;z++){let K=y[z];if(K===1||K===_-1)j.fill(K>1,L,L+l-1),L+=l-1;else for(let te=l-1;te>=0;--te)j[L++]=(K&1<<te)!==0}return j}extractBits(t){let r=this.ddata.isCompact(),l=this.ddata.getNbLayers(),d=(r?11:14)+l*4,g=new Int32Array(d),p=new Array(this.totalBitsInLayer(l,r));if(r)for(let y=0;y<g.length;y++)g[y]=y;else{let y=d+1+2*P.truncDivision(P.truncDivision(d,2)-1,15),_=d/2,E=P.truncDivision(y,2);for(let j=0;j<_;j++){let L=j+P.truncDivision(j,15);g[_-j-1]=E-L-1,g[_+j]=E+L+1}}for(let y=0,_=0;y<l;y++){let E=(l-y)*4+(r?9:12),j=y*2,L=d-1-j;for(let z=0;z<E;z++){let K=z*2;for(let te=0;te<2;te++)p[_+K+te]=t.get(g[j+te],g[j+z]),p[_+2*E+K+te]=t.get(g[j+z],g[L-te]),p[_+4*E+K+te]=t.get(g[L-te],g[L-z]),p[_+6*E+K+te]=t.get(g[L-z],g[j+te])}_+=E*8}return p}static readCode(t,r,l){let d=0;for(let g=r;g<r+l;g++)d<<=1,t[g]&&(d|=1);return d}static readByte(t,r){let l=t.length-r;return l>=8?At.readCode(t,r,8):At.readCode(t,r,l)<<8-l}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let l=0;l<r.length;l++)r[l]=At.readByte(t,8*l);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}At.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],At.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],At.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],At.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],At.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ht{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,l,d){const g=t-l,p=r-d;return Math.sqrt(g*g+p*p)}static sum(t){let r=0;for(let l=0,d=t.length;l!==d;l++){const g=t[l];r+=g}return r}}class Hn{static floatToIntBits(t){return t}}Hn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof ze){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Hn.floatToIntBits(this.x)+Hn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),l=this.distance(t[1],t[2]),d=this.distance(t[0],t[2]);let g,p,y;if(l>=r&&l>=d?(p=t[0],g=t[1],y=t[2]):d>=l&&d>=r?(p=t[1],g=t[0],y=t[2]):(p=t[2],g=t[0],y=t[1]),this.crossProductZ(g,p,y)<0){const _=g;g=y,y=_}t[0]=g,t[1]=p,t[2]=y}static distance(t,r){return ht.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,l){const d=r.x,g=r.y;return(l.x-d)*(t.y-g)-(l.y-g)*(t.x-d)}}class Is{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Me extends Is{constructor(t,r,l,d,g){super(t,r),this.compact=l,this.nbDatablocks=d,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Fe{constructor(t,r,l,d){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=Fe.INIT_SIZE),l==null&&(l=t.getWidth()/2|0),d==null&&(d=t.getHeight()/2|0);const g=r/2|0;if(this.leftInit=l-g,this.rightInit=l+g,this.upInit=d-g,this.downInit=d+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let t=this.leftInit,r=this.rightInit,l=this.upInit,d=this.downInit,g=!1,p=!0,y=!1,_=!1,E=!1,j=!1,L=!1;const z=this.width,K=this.height;for(;p;){p=!1;let te=!0;for(;(te||!_)&&r<z;)te=this.containsBlackPoint(l,d,r,!1),te?(r++,p=!0,_=!0):_||r++;if(r>=z){g=!0;break}let se=!0;for(;(se||!E)&&d<K;)se=this.containsBlackPoint(t,r,d,!0),se?(d++,p=!0,E=!0):E||d++;if(d>=K){g=!0;break}let oe=!0;for(;(oe||!j)&&t>=0;)oe=this.containsBlackPoint(l,d,t,!1),oe?(t--,p=!0,j=!0):j||t--;if(t<0){g=!0;break}let fe=!0;for(;(fe||!L)&&l>=0;)fe=this.containsBlackPoint(t,r,l,!0),fe?(l--,p=!0,L=!0):L||l--;if(l<0){g=!0;break}p&&(y=!0)}if(!g&&y){const te=r-t;let se=null;for(let Be=1;se===null&&Be<te;Be++)se=this.getBlackPointOnSegment(t,d-Be,t+Be,d);if(se==null)throw new V;let oe=null;for(let Be=1;oe===null&&Be<te;Be++)oe=this.getBlackPointOnSegment(t,l+Be,t+Be,l);if(oe==null)throw new V;let fe=null;for(let Be=1;fe===null&&Be<te;Be++)fe=this.getBlackPointOnSegment(r,l+Be,r-Be,l);if(fe==null)throw new V;let Pe=null;for(let Be=1;Pe===null&&Be<te;Be++)Pe=this.getBlackPointOnSegment(r,d-Be,r-Be,d);if(Pe==null)throw new V;return this.centerEdges(Pe,se,fe,oe)}else throw new V}getBlackPointOnSegment(t,r,l,d){const g=ht.round(ht.distance(t,r,l,d)),p=(l-t)/g,y=(d-r)/g,_=this.image;for(let E=0;E<g;E++){const j=ht.round(t+E*p),L=ht.round(r+E*y);if(_.get(j,L))return new ze(j,L)}return null}centerEdges(t,r,l,d){const g=t.getX(),p=t.getY(),y=r.getX(),_=r.getY(),E=l.getX(),j=l.getY(),L=d.getX(),z=d.getY(),K=Fe.CORR;return g<this.width/2?[new ze(L-K,z+K),new ze(y+K,_+K),new ze(E-K,j-K),new ze(g+K,p-K)]:[new ze(L+K,z+K),new ze(y+K,_-K),new ze(E-K,j+K),new ze(g-K,p-K)]}containsBlackPoint(t,r,l,d){const g=this.image;if(d){for(let p=t;p<=r;p++)if(g.get(p,l))return!0}else for(let p=t;p<=r;p++)if(g.get(l,p))return!0;return!1}}Fe.INIT_SIZE=10,Fe.CORR=1;class nt{static checkAndNudgePoints(t,r){const l=t.getWidth(),d=t.getHeight();let g=!0;for(let p=0;p<r.length&&g;p+=2){const y=Math.floor(r[p]),_=Math.floor(r[p+1]);if(y<-1||y>l||_<-1||_>d)throw new V;g=!1,y===-1?(r[p]=0,g=!0):y===l&&(r[p]=l-1,g=!0),_===-1?(r[p+1]=0,g=!0):_===d&&(r[p+1]=d-1,g=!0)}g=!0;for(let p=r.length-2;p>=0&&g;p-=2){const y=Math.floor(r[p]),_=Math.floor(r[p+1]);if(y<-1||y>l||_<-1||_>d)throw new V;g=!1,y===-1?(r[p]=0,g=!0):y===l&&(r[p]=l-1,g=!0),_===-1?(r[p+1]=0,g=!0):_===d&&(r[p+1]=d-1,g=!0)}}}class Ct{constructor(t,r,l,d,g,p,y,_,E){this.a11=t,this.a21=r,this.a31=l,this.a12=d,this.a22=g,this.a32=p,this.a13=y,this.a23=_,this.a33=E}static quadrilateralToQuadrilateral(t,r,l,d,g,p,y,_,E,j,L,z,K,te,se,oe){const fe=Ct.quadrilateralToSquare(t,r,l,d,g,p,y,_);return Ct.squareToQuadrilateral(E,j,L,z,K,te,se,oe).times(fe)}transformPoints(t){const r=t.length,l=this.a11,d=this.a12,g=this.a13,p=this.a21,y=this.a22,_=this.a23,E=this.a31,j=this.a32,L=this.a33;for(let z=0;z<r;z+=2){const K=t[z],te=t[z+1],se=g*K+_*te+L;t[z]=(l*K+p*te+E)/se,t[z+1]=(d*K+y*te+j)/se}}transformPointsWithValues(t,r){const l=this.a11,d=this.a12,g=this.a13,p=this.a21,y=this.a22,_=this.a23,E=this.a31,j=this.a32,L=this.a33,z=t.length;for(let K=0;K<z;K++){const te=t[K],se=r[K],oe=g*te+_*se+L;t[K]=(l*te+p*se+E)/oe,r[K]=(d*te+y*se+j)/oe}}static squareToQuadrilateral(t,r,l,d,g,p,y,_){const E=t-l+g-y,j=r-d+p-_;if(E===0&&j===0)return new Ct(l-t,g-l,t,d-r,p-d,r,0,0,1);{const L=l-g,z=y-g,K=d-p,te=_-p,se=L*te-z*K,oe=(E*te-z*j)/se,fe=(L*j-E*K)/se;return new Ct(l-t+oe*l,y-t+fe*y,t,d-r+oe*d,_-r+fe*_,r,oe,fe,1)}}static quadrilateralToSquare(t,r,l,d,g,p,y,_){return Ct.squareToQuadrilateral(t,r,l,d,g,p,y,_).buildAdjoint()}buildAdjoint(){return new Ct(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Ct(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Tn extends nt{sampleGrid(t,r,l,d,g,p,y,_,E,j,L,z,K,te,se,oe,fe,Pe,Be){const Ie=Ct.quadrilateralToQuadrilateral(d,g,p,y,_,E,j,L,z,K,te,se,oe,fe,Pe,Be);return this.sampleGridWithTransform(t,r,l,Ie)}sampleGridWithTransform(t,r,l,d){if(r<=0||l<=0)throw new V;const g=new Oe(r,l),p=new Float32Array(2*r);for(let y=0;y<l;y++){const _=p.length,E=y+.5;for(let j=0;j<_;j+=2)p[j]=j/2+.5,p[j+1]=E;d.transformPoints(p),nt.checkAndNudgePoints(t,p);try{for(let j=0;j<_;j+=2)t.get(Math.floor(p[j]),Math.floor(p[j+1]))&&g.set(j/2,y)}catch{throw new V}}return g}}class sn{static setGridSampler(t){sn.gridSampler=t}static getInstance(){return sn.gridSampler}}sn.gridSampler=new Tn;class Vt{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qn{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),l=this.getBullsEyeCorners(r);if(t){let p=l[0];l[0]=l[2],l[2]=p}this.extractParameters(l);let d=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),g=this.getMatrixCornerPoints(l);return new Me(d,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new V;let r=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(l,r);let d=0;for(let p=0;p<4;p++){let y=l[(this.shift+p)%4];this.compact?(d<<=7,d+=y>>1&127):(d<<=10,d+=(y>>2&992)+(y>>1&31))}let g=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(t,r){let l=0;t.forEach((d,g,p)=>{let y=(d>>r-2<<1)+(d&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let d=0;d<4;d++)if(P.bitCount(l^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new V}getCorrectedParameterData(t,r){let l,d;r?(l=7,d=2):(l=10,d=4);let g=l-d,p=new Int32Array(l);for(let _=l-1;_>=0;--_)p[_]=t&15,t>>=4;try{new cn(ft.AZTEC_PARAM).decode(p,g)}catch{throw new V}let y=0;for(let _=0;_<d;_++)y=(y<<4)+p[_];return y}getBullsEyeCorners(t){let r=t,l=t,d=t,g=t,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(r,p,1,-1),z=this.getFirstDifferent(l,p,1,1),K=this.getFirstDifferent(d,p,-1,1),te=this.getFirstDifferent(g,p,-1,-1);if(this.nbCenterLayers>2){let se=this.distancePoint(te,L)*this.nbCenterLayers/(this.distancePoint(g,r)*(this.nbCenterLayers+2));if(se<.75||se>1.25||!this.isWhiteOrBlackRectangle(L,z,K,te))break}r=L,l=z,d=K,g=te,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let y=new ze(r.getX()+.5,r.getY()-.5),_=new ze(l.getX()+.5,l.getY()+.5),E=new ze(d.getX()-.5,d.getY()+.5),j=new ze(g.getX()-.5,g.getY()-.5);return this.expandSquare([y,_,E,j],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,l,d;try{let y=new Fe(this.image).detect();t=y[0],r=y[1],l=y[2],d=y[3]}catch{let _=this.image.getWidth()/2,E=this.image.getHeight()/2;t=this.getFirstDifferent(new Vt(_+7,E-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Vt(_+7,E+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Vt(_-7,E+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Vt(_-7,E-7),!1,-1,-1).toResultPoint()}let g=ht.round((t.getX()+d.getX()+r.getX()+l.getX())/4),p=ht.round((t.getY()+d.getY()+r.getY()+l.getY())/4);try{let y=new Fe(this.image,15,g,p).detect();t=y[0],r=y[1],l=y[2],d=y[3]}catch{t=this.getFirstDifferent(new Vt(g+7,p-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Vt(g+7,p+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Vt(g-7,p+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new Vt(g-7,p-7),!1,-1,-1).toResultPoint()}return g=ht.round((t.getX()+d.getX()+r.getX()+l.getX())/4),p=ht.round((t.getY()+d.getY()+r.getY()+l.getY())/4),new Vt(g,p)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,l,d,g){let p=sn.getInstance(),y=this.getDimension(),_=y/2-this.nbCenterLayers,E=y/2+this.nbCenterLayers;return p.sampleGrid(t,y,y,_,_,E,_,E,E,_,E,r.getX(),r.getY(),l.getX(),l.getY(),d.getX(),d.getY(),g.getX(),g.getY())}sampleLine(t,r,l){let d=0,g=this.distanceResultPoint(t,r),p=g/l,y=t.getX(),_=t.getY(),E=p*(r.getX()-t.getX())/g,j=p*(r.getY()-t.getY())/g;for(let L=0;L<l;L++)this.image.get(ht.round(y+L*E),ht.round(_+L*j))&&(d|=1<<l-L-1);return d}isWhiteOrBlackRectangle(t,r,l,d){let g=3;t=new Vt(t.getX()-g,t.getY()+g),r=new Vt(r.getX()-g,r.getY()-g),l=new Vt(l.getX()+g,l.getY()-g),d=new Vt(d.getX()+g,d.getY()+g);let p=this.getColor(d,t);if(p===0)return!1;let y=this.getColor(t,r);return y!==p||(y=this.getColor(r,l),y!==p)?!1:(y=this.getColor(l,d),y===p)}getColor(t,r){let l=this.distancePoint(t,r),d=(r.getX()-t.getX())/l,g=(r.getY()-t.getY())/l,p=0,y=t.getX(),_=t.getY(),E=this.image.get(t.getX(),t.getY()),j=Math.ceil(l);for(let z=0;z<j;z++)y+=d,_+=g,this.image.get(ht.round(y),ht.round(_))!==E&&p++;let L=p/l;return L>.1&&L<.9?0:L<=.1===E?1:-1}getFirstDifferent(t,r,l,d){let g=t.getX()+l,p=t.getY()+d;for(;this.isValid(g,p)&&this.image.get(g,p)===r;)g+=l,p+=d;for(g-=l,p-=d;this.isValid(g,p)&&this.image.get(g,p)===r;)g+=l;for(g-=l;this.isValid(g,p)&&this.image.get(g,p)===r;)p+=d;return p-=d,new Vt(g,p)}expandSquare(t,r,l){let d=l/(2*r),g=t[0].getX()-t[2].getX(),p=t[0].getY()-t[2].getY(),y=(t[0].getX()+t[2].getX())/2,_=(t[0].getY()+t[2].getY())/2,E=new ze(y+d*g,_+d*p),j=new ze(y-d*g,_-d*p);g=t[1].getX()-t[3].getX(),p=t[1].getY()-t[3].getY(),y=(t[1].getX()+t[3].getX())/2,_=(t[1].getY()+t[3].getY())/2;let L=new ze(y+d*g,_+d*p),z=new ze(y-d*g,_-d*p);return[E,L,j,z]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=ht.round(t.getX()),l=ht.round(t.getY());return this.isValid(r,l)}distancePoint(t,r){return ht.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return ht.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(P.truncDivision(this.nbLayers-4,8)+1)+15}}class jn{decode(t,r=null){let l=null,d=new qn(t.getBlackMatrix()),g=null,p=null;try{let j=d.detectMirror(!1);g=j.getPoints(),this.reportFoundResultPoints(r,g),p=new At().decode(j)}catch(j){l=j}if(p==null)try{let j=d.detectMirror(!0);g=j.getPoints(),this.reportFoundResultPoints(r,g),p=new At().decode(j)}catch(j){throw l??j}let y=new Ue(p.getText(),p.getRawBytes(),p.getNumBits(),g,Ne.AZTEC,D.currentTimeMillis()),_=p.getByteSegments();_!=null&&y.putMetadata(De.BYTE_SEGMENTS,_);let E=p.getECLevel();return E!=null&&y.putMetadata(De.ERROR_CORRECTION_LEVEL,E),y}reportFoundResultPoints(t,r){if(t!=null){let l=t.get(Y.NEED_RESULT_POINT_CALLBACK);l!=null&&r.forEach((d,g,p)=>{l.foundPossibleResultPoint(d)})}}reset(){}}class ts extends Le{constructor(t=500){super(new jn,t)}}class Ut{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(Y.TRY_HARDER)===!0&&t.isRotateSupported()){const g=t.rotateCounterClockwise(),p=this.doDecode(g,r),y=p.getResultMetadata();let _=270;y!==null&&y.get(De.ORIENTATION)===!0&&(_=_+y.get(De.ORIENTATION)%360),p.putMetadata(De.ORIENTATION,_);const E=p.getResultPoints();if(E!==null){const j=g.getHeight();for(let L=0;L<E.length;L++)E[L]=new ze(j-E[L].getY()-1,E[L].getX())}return p}else throw new V}}reset(){}doDecode(t,r){const l=t.getWidth(),d=t.getHeight();let g=new Q(l);const p=r&&r.get(Y.TRY_HARDER)===!0,y=Math.max(1,d>>(p?8:5));let _;p?_=d:_=15;const E=Math.trunc(d/2);for(let j=0;j<_;j++){const L=Math.trunc((j+1)/2),z=(j&1)===0,K=E+y*(z?L:-L);if(K<0||K>=d)break;try{g=t.getBlackRow(K,g)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(g.reverse(),r&&r.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const se=new Map;r.forEach((oe,fe)=>se.set(fe,oe)),se.delete(Y.NEED_RESULT_POINT_CALLBACK),r=se}try{const se=this.decodeRow(K,g,r);if(te===1){se.putMetadata(De.ORIENTATION,180);const oe=se.getResultPoints();oe!==null&&(oe[0]=new ze(l-oe[0].getX()-1,oe[0].getY()),oe[1]=new ze(l-oe[1].getX()-1,oe[1].getY()))}return se}catch{}}}throw new V}static recordPattern(t,r,l){const d=l.length;for(let E=0;E<d;E++)l[E]=0;const g=t.getSize();if(r>=g)throw new V;let p=!t.get(r),y=0,_=r;for(;_<g;){if(t.get(_)!==p)l[y]++;else{if(++y===d)break;l[y]=1,p=!p}_++}if(!(y===d||y===d-1&&_===g))throw new V}static recordPatternInReverse(t,r,l){let d=l.length,g=t.get(r);for(;r>0&&d>=0;)t.get(--r)!==g&&(d--,g=!g);if(d>=0)throw new V;Ut.recordPattern(t,r+1,l)}static patternMatchVariance(t,r,l){const d=t.length;let g=0,p=0;for(let E=0;E<d;E++)g+=t[E],p+=r[E];if(g<p)return Number.POSITIVE_INFINITY;const y=g/p;l*=y;let _=0;for(let E=0;E<d;E++){const j=t[E],L=r[E]*y,z=j>L?j-L:L-j;if(z>l)return Number.POSITIVE_INFINITY;_+=z}return _/g}}class je extends Ut{static findStartPattern(t){const r=t.getSize(),l=t.getNextSet(0);let d=0,g=Int32Array.from([0,0,0,0,0,0]),p=l,y=!1;const _=6;for(let E=l;E<r;E++)if(t.get(E)!==y)g[d]++;else{if(d===_-1){let j=je.MAX_AVG_VARIANCE,L=-1;for(let z=je.CODE_START_A;z<=je.CODE_START_C;z++){const K=Ut.patternMatchVariance(g,je.CODE_PATTERNS[z],je.MAX_INDIVIDUAL_VARIANCE);K<j&&(j=K,L=z)}if(L>=0&&t.isRange(Math.max(0,p-(E-p)/2),p,!1))return Int32Array.from([p,E,L]);p+=g[0]+g[1],g=g.slice(2,g.length-1),g[d-1]=0,g[d]=0,d--}else d++;g[d]=1,y=!y}throw new V}static decodeCode(t,r,l){Ut.recordPattern(t,l,r);let d=je.MAX_AVG_VARIANCE,g=-1;for(let p=0;p<je.CODE_PATTERNS.length;p++){const y=je.CODE_PATTERNS[p],_=this.patternMatchVariance(r,y,je.MAX_INDIVIDUAL_VARIANCE);_<d&&(d=_,g=p)}if(g>=0)return g;throw new V}decodeRow(t,r,l){const d=l&&l.get(Y.ASSUME_GS1)===!0,g=je.findStartPattern(r),p=g[2];let y=0;const _=new Uint8Array(20);_[y++]=p;let E;switch(p){case je.CODE_START_A:E=je.CODE_CODE_A;break;case je.CODE_START_B:E=je.CODE_CODE_B;break;case je.CODE_START_C:E=je.CODE_CODE_C;break;default:throw new X}let j=!1,L=!1,z="",K=g[0],te=g[1];const se=Int32Array.from([0,0,0,0,0,0]);let oe=0,fe=0,Pe=p,Be=0,Ie=!0,Et=!1,yt=!1;for(;!j;){const er=L;switch(L=!1,oe=fe,fe=je.decodeCode(r,se,te),_[y++]=fe,fe!==je.CODE_STOP&&(Ie=!0),fe!==je.CODE_STOP&&(Be++,Pe+=Be*fe),K=te,te+=se.reduce((mc,il)=>mc+il,0),fe){case je.CODE_START_A:case je.CODE_START_B:case je.CODE_START_C:throw new X}switch(E){case je.CODE_CODE_A:if(fe<64)yt===Et?z+=String.fromCharCode(32+fe):z+=String.fromCharCode(32+fe+128),yt=!1;else if(fe<96)yt===Et?z+=String.fromCharCode(fe-64):z+=String.fromCharCode(fe+64),yt=!1;else switch(fe!==je.CODE_STOP&&(Ie=!1),fe){case je.CODE_FNC_1:d&&(z.length===0?z+="]C1":z+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_A:!Et&&yt?(Et=!0,yt=!1):Et&&yt?(Et=!1,yt=!1):yt=!0;break;case je.CODE_SHIFT:L=!0,E=je.CODE_CODE_B;break;case je.CODE_CODE_B:E=je.CODE_CODE_B;break;case je.CODE_CODE_C:E=je.CODE_CODE_C;break;case je.CODE_STOP:j=!0;break}break;case je.CODE_CODE_B:if(fe<96)yt===Et?z+=String.fromCharCode(32+fe):z+=String.fromCharCode(32+fe+128),yt=!1;else switch(fe!==je.CODE_STOP&&(Ie=!1),fe){case je.CODE_FNC_1:d&&(z.length===0?z+="]C1":z+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_B:!Et&&yt?(Et=!0,yt=!1):Et&&yt?(Et=!1,yt=!1):yt=!0;break;case je.CODE_SHIFT:L=!0,E=je.CODE_CODE_A;break;case je.CODE_CODE_A:E=je.CODE_CODE_A;break;case je.CODE_CODE_C:E=je.CODE_CODE_C;break;case je.CODE_STOP:j=!0;break}break;case je.CODE_CODE_C:if(fe<100)fe<10&&(z+="0"),z+=fe;else switch(fe!==je.CODE_STOP&&(Ie=!1),fe){case je.CODE_FNC_1:d&&(z.length===0?z+="]C1":z+="");break;case je.CODE_CODE_A:E=je.CODE_CODE_A;break;case je.CODE_CODE_B:E=je.CODE_CODE_B;break;case je.CODE_STOP:j=!0;break}break}er&&(E=E===je.CODE_CODE_A?je.CODE_CODE_B:je.CODE_CODE_A)}const Un=te-K;if(te=r.getNextUnset(te),!r.isRange(te,Math.min(r.getSize(),te+(te-K)/2),!1))throw new V;if(Pe-=Be*oe,Pe%103!==oe)throw new T;const Ls=z.length;if(Ls===0)throw new V;Ls>0&&Ie&&(E===je.CODE_CODE_C?z=z.substring(0,Ls-2):z=z.substring(0,Ls-1));const gs=(g[1]+g[0])/2,nn=K+Un/2,rs=_.length,Ns=new Uint8Array(rs);for(let er=0;er<rs;er++)Ns[er]=_[er];const Dr=[new ze(gs,t),new ze(nn,t)];return new Ue(z,Ns,0,Dr,Ne.CODE_128,new Date().getTime())}}je.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],je.MAX_AVG_VARIANCE=.25,je.MAX_INDIVIDUAL_VARIANCE=.7,je.CODE_SHIFT=98,je.CODE_CODE_C=99,je.CODE_CODE_B=100,je.CODE_CODE_A=101,je.CODE_FNC_1=102,je.CODE_FNC_2=97,je.CODE_FNC_3=96,je.CODE_FNC_4_A=101,je.CODE_FNC_4_B=100,je.CODE_START_A=103,je.CODE_START_B=104,je.CODE_START_C=105,je.CODE_STOP=106;class lt extends Ut{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,l){let d=this.counters;d.fill(0),this.decodeRowResult="";let g=lt.findAsteriskPattern(r,d),p=r.getNextSet(g[1]),y=r.getSize(),_,E;do{lt.recordPattern(r,p,d);let se=lt.toNarrowWidePattern(d);if(se<0)throw new V;_=lt.patternToChar(se),this.decodeRowResult+=_,E=p;for(let oe of d)p+=oe;p=r.getNextSet(p)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let j=0;for(let se of d)j+=se;let L=p-E-j;if(p!==y&&L*2<j)throw new V;if(this.usingCheckDigit){let se=this.decodeRowResult.length-1,oe=0;for(let fe=0;fe<se;fe++)oe+=lt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(se)!==lt.ALPHABET_STRING.charAt(oe%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,se)}if(this.decodeRowResult.length===0)throw new V;let z;this.extendedMode?z=lt.decodeExtended(this.decodeRowResult):z=this.decodeRowResult;let K=(g[1]+g[0])/2,te=E+j/2;return new Ue(z,null,0,[new ze(K,t),new ze(te,t)],Ne.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let l=t.getSize(),d=t.getNextSet(0),g=0,p=d,y=!1,_=r.length;for(let E=d;E<l;E++)if(t.get(E)!==y)r[g]++;else{if(g===_-1){if(this.toNarrowWidePattern(r)===lt.ASTERISK_ENCODING&&t.isRange(Math.max(0,p-Math.floor((E-p)/2)),p,!1))return[p,E];p+=r[0]+r[1],r.copyWithin(0,2,2+g-1),r[g-1]=0,r[g]=0,g--}else g++;r[g]=1,y=!y}throw new V}static toNarrowWidePattern(t){let r=t.length,l=0,d;do{let g=2147483647;for(let _ of t)_<g&&_>l&&(g=_);l=g,d=0;let p=0,y=0;for(let _=0;_<r;_++){let E=t[_];E>l&&(y|=1<<r-1-_,d++,p+=E)}if(d===3){for(let _=0;_<r&&d>0;_++){let E=t[_];if(E>l&&(d--,E*2>=p))return-1}return y}}while(d>3);return-1}static patternToChar(t){for(let r=0;r<lt.CHARACTER_ENCODINGS.length;r++)if(lt.CHARACTER_ENCODINGS[r]===t)return lt.ALPHABET_STRING.charAt(r);if(t===lt.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(t){let r=t.length,l="";for(let d=0;d<r;d++){let g=t.charAt(d);if(g==="+"||g==="$"||g==="%"||g==="/"){let p=t.charAt(d+1),y="\0";switch(g){case"+":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)+32);else throw new X;break;case"$":if(p>="A"&&p<="Z")y=String.fromCharCode(p.charCodeAt(0)-64);else throw new X;break;case"%":if(p>="A"&&p<="E")y=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")y=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")y=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")y="\0";else if(p==="V")y="@";else if(p==="W")y="`";else if(p==="X"||p==="Y"||p==="Z")y="";else throw new X;break;case"/":if(p>="A"&&p<="O")y=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")y=":";else throw new X;break}l+=y,d++}else l+=g}return l}}lt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",lt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],lt.ASTERISK_ENCODING=148;class gt extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,l){let d=this.decodeStart(r),g=this.decodeEnd(r),p=new Ce;gt.decodeMiddle(r,d[1],g[0],p);let y=p.toString(),_=null;l!=null&&(_=l.get(Y.ALLOWED_LENGTHS)),_==null&&(_=gt.DEFAULT_ALLOWED_LENGTHS);let E=y.length,j=!1,L=0;for(let te of _){if(E===te){j=!0;break}te>L&&(L=te)}if(!j&&E>L&&(j=!0),!j)throw new X;const z=[new ze(d[1],t),new ze(g[0],t)];return new Ue(y,null,0,z,Ne.ITF,new Date().getTime())}static decodeMiddle(t,r,l,d){let g=new Int32Array(10),p=new Int32Array(5),y=new Int32Array(5);for(g.fill(0),p.fill(0),y.fill(0);r<l;){Ut.recordPattern(t,r,g);for(let E=0;E<5;E++){let j=2*E;p[E]=g[j],y[E]=g[j+1]}let _=gt.decodeDigit(p);d.append(_.toString()),_=this.decodeDigit(y),d.append(_.toString()),g.forEach(function(E){r+=E})}}decodeStart(t){let r=gt.skipWhiteSpace(t),l=gt.findGuardPattern(t,r,gt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(t,l[0]),l}validateQuietZone(t,r){let l=this.narrowLineWidth*10;l=l<r?l:r;for(let d=r-1;l>0&&d>=0&&!t.get(d);d--)l--;if(l!==0)throw new V}static skipWhiteSpace(t){const r=t.getSize(),l=t.getNextSet(0);if(l===r)throw new V;return l}decodeEnd(t){t.reverse();try{let r=gt.skipWhiteSpace(t),l;try{l=gt.findGuardPattern(t,r,gt.END_PATTERN_REVERSED[0])}catch(g){g instanceof V&&(l=gt.findGuardPattern(t,r,gt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,l[0]);let d=l[0];return l[0]=t.getSize()-l[1],l[1]=t.getSize()-d,l}finally{t.reverse()}}static findGuardPattern(t,r,l){let d=l.length,g=new Int32Array(d),p=t.getSize(),y=!1,_=0,E=r;g.fill(0);for(let j=r;j<p;j++)if(t.get(j)!==y)g[_]++;else{if(_===d-1){if(Ut.patternMatchVariance(g,l,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return[E,j];E+=g[0]+g[1],D.arraycopy(g,2,g,0,_-1),g[_-1]=0,g[_]=0,_--}else _++;g[_]=1,y=!y}throw new V}static decodeDigit(t){let r=gt.MAX_AVG_VARIANCE,l=-1,d=gt.PATTERNS.length;for(let g=0;g<d;g++){let p=gt.PATTERNS[g],y=Ut.patternMatchVariance(t,p,gt.MAX_INDIVIDUAL_VARIANCE);y<r?(r=y,l=g):y===r&&(l=-1)}if(l>=0)return l%10;throw new V}}gt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],gt.MAX_AVG_VARIANCE=.38,gt.MAX_INDIVIDUAL_VARIANCE=.5,gt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],gt.START_PATTERN=Int32Array.from([1,1,1,1]),gt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Qt extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,l,d=0,g=Int32Array.from([0,0,0]);for(;!r;){g=Int32Array.from([0,0,0]),l=Qt.findGuardPattern(t,d,!1,this.START_END_PATTERN,g);let p=l[0];d=l[1];let y=p-(d-p);y>=0&&(r=t.isRange(y,p,!1))}return l}static checkChecksum(t){return Qt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let l=parseInt(t.charAt(r-1),10);return Qt.getStandardUPCEANChecksum(t.substring(0,r-1))===l}static getStandardUPCEANChecksum(t){let r=t.length,l=0;for(let d=r-1;d>=0;d-=2){let g=t.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;l+=g}l*=3;for(let d=r-2;d>=0;d-=2){let g=t.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;l+=g}return(1e3-l)%10}static decodeEnd(t,r){return Qt.findGuardPattern(t,r,!1,Qt.START_END_PATTERN,new Int32Array(Qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,l,d){return this.findGuardPattern(t,r,l,d,new Int32Array(d.length))}static findGuardPattern(t,r,l,d,g){let p=t.getSize();r=l?t.getNextUnset(r):t.getNextSet(r);let y=0,_=r,E=d.length,j=l;for(let L=r;L<p;L++)if(t.get(L)!==j)g[y]++;else{if(y===E-1){if(Ut.patternMatchVariance(g,d,Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return Int32Array.from([_,L]);_+=g[0]+g[1];let z=g.slice(2,g.length-1);for(let K=0;K<y-1;K++)g[K]=z[K];g[y-1]=0,g[y]=0,y--}else y++;g[y]=1,j=!j}throw new V}static decodeDigit(t,r,l,d){this.recordPattern(t,l,r);let g=this.MAX_AVG_VARIANCE,p=-1,y=d.length;for(let _=0;_<y;_++){let E=d[_],j=Ut.patternMatchVariance(r,E,Qt.MAX_INDIVIDUAL_VARIANCE);j<g&&(g=j,p=_)}if(p>=0)return p;throw new V}}Qt.MAX_AVG_VARIANCE=.48,Qt.MAX_INDIVIDUAL_VARIANCE=.7,Qt.START_END_PATTERN=Int32Array.from([1,1,1]),Qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Os{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,l){let d=this.decodeRowStringBuffer,g=this.decodeMiddle(r,l,d),p=d.toString(),y=Os.parseExtensionString(p),_=[new ze((l[0]+l[1])/2,t),new ze(g,t)],E=new Ue(p,null,0,_,Ne.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(t,r,l){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=t.getSize(),p=r[1],y=0;for(let E=0;E<5&&p<g;E++){let j=Qt.decodeDigit(t,d,p,Qt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+j%10);for(let L of d)p+=L;j>=10&&(y|=1<<4-E),E!==4&&(p=t.getNextSet(p),p=t.getNextUnset(p))}if(l.length!==5)throw new V;let _=this.determineCheckDigit(y);if(Os.extensionChecksum(l.toString())!==_)throw new V;return p}static extensionChecksum(t){let r=t.length,l=0;for(let d=r-2;d>=0;d-=2)l+=t.charAt(d).charCodeAt(0)-48;l*=3;for(let d=r-1;d>=0;d-=2)l+=t.charAt(d).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new V}static parseExtensionString(t){if(t.length!==5)return null;let r=Os.parseExtension5String(t);return r==null?null:new Map([[De.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let l=parseInt(t.substring(1)),d=(l/100).toString(),g=l%100,p=g<10?"0"+g:g.toString();return r+d+"."+p}}class va{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,l){let d=this.decodeRowStringBuffer,g=this.decodeMiddle(r,l,d),p=d.toString(),y=va.parseExtensionString(p),_=[new ze((l[0]+l[1])/2,t),new ze(g,t)],E=new Ue(p,null,0,_,Ne.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(t,r,l){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=t.getSize(),p=r[1],y=0;for(let _=0;_<2&&p<g;_++){let E=Qt.decodeDigit(t,d,p,Qt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let j of d)p+=j;E>=10&&(y|=1<<1-_),_!==1&&(p=t.getNextSet(p),p=t.getNextUnset(p))}if(l.length!==2)throw new V;if(parseInt(l.toString())%4!==y)throw new V;return p}static parseExtensionString(t){return t.length!==2?null:new Map([[De.ISSUE_NUMBER,parseInt(t)]])}}class qs{static decodeRow(t,r,l){let d=Qt.findGuardPattern(r,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Os().decodeRow(t,r,d)}catch{return new va().decodeRow(t,r,d)}}}qs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class wt extends Qt{constructor(){super(),this.decodeRowStringBuffer="",wt.L_AND_G_PATTERNS=wt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=wt.L_PATTERNS[t-10],l=new Int32Array(r.length);for(let d=0;d<r.length;d++)l[d]=r[r.length-d-1];wt.L_AND_G_PATTERNS[t]=l}}decodeRow(t,r,l){let d=wt.findStartGuardPattern(r),g=l==null?null:l.get(Y.NEED_RESULT_POINT_CALLBACK);if(g!=null){const Ie=new ze((d[0]+d[1])/2,t);g.foundPossibleResultPoint(Ie)}let p=this.decodeMiddle(r,d,this.decodeRowStringBuffer),y=p.rowOffset,_=p.resultString;if(g!=null){const Ie=new ze(y,t);g.foundPossibleResultPoint(Ie)}let E=this.decodeEnd(r,y);if(g!=null){const Ie=new ze((E[0]+E[1])/2,t);g.foundPossibleResultPoint(Ie)}let j=E[1],L=j+(j-E[0]);if(L>=r.getSize()||!r.isRange(j,L,!1))throw new V;let z=_.toString();if(z.length<8)throw new X;if(!wt.checkChecksum(z))throw new T;let K=(d[1]+d[0])/2,te=(E[1]+E[0])/2,se=this.getBarcodeFormat(),oe=[new ze(K,t),new ze(te,t)],fe=new Ue(z,null,0,oe,se,new Date().getTime()),Pe=0;try{let Ie=qs.decodeRow(t,r,E[1]);fe.putMetadata(De.UPC_EAN_EXTENSION,Ie.getText()),fe.putAllMetadata(Ie.getResultMetadata()),fe.addResultPoints(Ie.getResultPoints()),Pe=Ie.getText().length}catch{}let Be=l==null?null:l.get(Y.ALLOWED_EAN_EXTENSIONS);if(Be!=null){let Ie=!1;for(let Et in Be)if(Pe.toString()===Et){Ie=!0;break}if(!Ie)throw new V}return fe}decodeEnd(t,r){return wt.findGuardPattern(t,r,!1,wt.START_END_PATTERN,new Int32Array(wt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return wt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let l=parseInt(t.charAt(r-1),10);return wt.getStandardUPCEANChecksum(t.substring(0,r-1))===l}static getStandardUPCEANChecksum(t){let r=t.length,l=0;for(let d=r-1;d>=0;d-=2){let g=t.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;l+=g}l*=3;for(let d=r-2;d>=0;d-=2){let g=t.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new X;l+=g}return(1e3-l)%10}}class Rn extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,l){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=t.getSize(),p=r[1],y=0;for(let E=0;E<6&&p<g;E++){let j=wt.decodeDigit(t,d,p,wt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+j%10);for(let L of d)p+=L;j>=10&&(y|=1<<5-E)}l=Rn.determineFirstDigit(l,y),p=wt.findGuardPattern(t,p,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&p<g;E++){let j=wt.decodeDigit(t,d,p,wt.L_PATTERNS);l+=String.fromCharCode(48+j);for(let L of d)p+=L}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return Ne.EAN_13}static determineFirstDigit(t,r){for(let l=0;l<10;l++)if(r===this.FIRST_DIGIT_ENCODINGS[l])return t=String.fromCharCode(48+l)+t,t;throw new V}}Rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class he extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,l){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=t.getSize(),p=r[1];for(let _=0;_<4&&p<g;_++){let E=wt.decodeDigit(t,d,p,wt.L_PATTERNS);l+=String.fromCharCode(48+E);for(let j of d)p+=j}p=wt.findGuardPattern(t,p,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&p<g;_++){let E=wt.decodeDigit(t,d,p,wt.L_PATTERNS);l+=String.fromCharCode(48+E);for(let j of d)p+=j}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return Ne.EAN_8}}class qe extends wt{constructor(){super(...arguments),this.ean13Reader=new Rn}getBarcodeFormat(){return Ne.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,l))}decodeMiddle(t,r,l){return this.ean13Reader.decodeMiddle(t,r,l)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let l=new Ue(r.substring(1),null,null,t.getResultPoints(),Ne.UPC_A);return t.getResultMetadata()!=null&&l.putAllMetadata(t.getResultMetadata()),l}else throw new V}reset(){this.ean13Reader.reset()}}class ct extends wt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,l){const d=this.decodeMiddleCounters.map(E=>E);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const g=t.getSize();let p=r[1],y=0;for(let E=0;E<6&&p<g;E++){const j=ct.decodeDigit(t,d,p,ct.L_AND_G_PATTERNS);l+=String.fromCharCode(48+j%10);for(let L of d)p+=L;j>=10&&(y|=1<<5-E)}let _=ct.determineNumSysAndCheckDigit(l,y);return{rowOffset:p,resultString:_}}decodeEnd(t,r){return ct.findGuardPatternWithoutCounters(t,r,!0,ct.MIDDLE_END_PATTERN)}checkChecksum(t){return wt.checkChecksum(ct.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let l=0;l<=1;l++)for(let d=0;d<10;d++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][d]){let g=String.fromCharCode(48+l),p=String.fromCharCode(48+d);return g+t+p}throw V.getNotFoundInstance()}getBarcodeFormat(){return Ne.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(g=>g.charCodeAt(0)),l=new Ce;l.append(t.charAt(0));let d=r[5];switch(d){case 0:case 1:case 2:l.appendChars(r,0,2),l.append(d),l.append("0000"),l.appendChars(r,2,3);break;case 3:l.appendChars(r,0,3),l.append("00000"),l.appendChars(r,3,2);break;case 4:l.appendChars(r,0,4),l.append("00000"),l.append(r[4]);break;default:l.appendChars(r,0,5),l.append("0000"),l.append(d);break}return t.length>=8&&l.append(t.charAt(7)),l.toString()}}ct.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ct.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class an extends Ut{constructor(t){super();let r=t==null?null:t.get(Y.POSSIBLE_FORMATS),l=[];c(r)?(l.push(new Rn),l.push(new qe),l.push(new he),l.push(new ct)):(r.indexOf(Ne.EAN_13)>-1&&l.push(new Rn),r.indexOf(Ne.UPC_A)>-1&&l.push(new qe),r.indexOf(Ne.EAN_8)>-1&&l.push(new he),r.indexOf(Ne.UPC_E)>-1&&l.push(new ct)),this.readers=l}decodeRow(t,r,l){for(let d of this.readers)try{const g=d.decodeRow(t,r,l),p=g.getBarcodeFormat()===Ne.EAN_13&&g.getText().charAt(0)==="0",y=l==null?null:l.get(Y.POSSIBLE_FORMATS),_=y==null||y.includes(Ne.UPC_A);if(p&&_){const E=g.getRawBytes(),j=new Ue(g.getText().substring(1),E,E?E.length:null,g.getResultPoints(),Ne.UPC_A);return j.putAllMetadata(g.getResultMetadata()),j}return g}catch{}throw new V}reset(){for(let t of this.readers)t.reset()}}class Pt extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let l=0;l<r.length;l++)if(Ut.patternMatchVariance(t,r[l],Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return l;throw new V}static count(t){return ht.sum(new Int32Array(t))}static increment(t,r){let l=0,d=r[0];for(let g=1;g<t.length;g++)r[g]>d&&(d=r[g],l=g);t[l]++}static decrement(t,r){let l=0,d=r[0];for(let g=1;g<t.length;g++)r[g]<d&&(d=r[g],l=g);t[l]--}static isFinderPattern(t){let r=t[0]+t[1],l=r+t[2]+t[3],d=r/l;if(d>=Pt.MIN_FINDER_PATTERN_RATIO&&d<=Pt.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let y of t)y>p&&(p=y),y<g&&(g=y);return p<10*g}return!1}}Pt.MAX_AVG_VARIANCE=.2,Pt.MAX_INDIVIDUAL_VARIANCE=.45,Pt.MIN_FINDER_PATTERN_RATIO=9.5/12,Pt.MAX_FINDER_PATTERN_RATIO=12.5/14;class In{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof In))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class G{constructor(t,r,l,d,g){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new ze(l,g)),this.resultPoints.push(new ze(d,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof G))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Te{constructor(){}static getRSSvalue(t,r,l){let d=0;for(let _ of t)d+=_;let g=0,p=0,y=t.length;for(let _=0;_<y-1;_++){let E;for(E=1,p|=1<<_;E<t[_];E++,p&=~(1<<_)){let j=Te.combins(d-E-1,y-_-2);if(l&&p===0&&d-E-(y-_-1)>=y-_-1&&(j-=Te.combins(d-E-(y-_),y-_-2)),y-_-1>1){let L=0;for(let z=d-E-(y-_-2);z>r;z--)L+=Te.combins(d-E-z-1,y-_-3);j-=L*(y-1-_)}else d-E>r&&j--;g+=j}d-=E}return g}static combins(t,r){let l,d;t-r>r?(d=r,l=t-r):(d=t-r,l=r);let g=1,p=1;for(let y=t;y>l;y--)g*=y,p<=d&&(g/=p,p++);for(;p<=d;)g/=p,p++;return g}}class Tt{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let l=12*r,d=new Q(l),g=0,y=t[0].getRightChar().getValue();for(let _=11;_>=0;--_)(y&1<<_)!=0&&d.set(g),g++;for(let _=1;_<t.length;++_){let E=t[_],j=E.getLeftChar().getValue();for(let L=11;L>=0;--L)(j&1<<L)!=0&&d.set(g),g++;if(E.getRightChar()!=null){let L=E.getRightChar().getValue();for(let z=11;z>=0;--z)(L&1<<z)!=0&&d.set(g),g++}}return d}}class On{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ds{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class yn extends ds{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===yn.FNC1}}yn.FNC1="$";class Kt extends ds{constructor(t,r,l){super(t),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ns extends ds{constructor(t,r,l){if(super(t),r<0||r>10||l<0||l>10)throw new X;this.firstDigit=r,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ns.FNC1}isSecondDigitFNC1(){return this.secondDigit===ns.FNC1}isAnyFNC1(){return this.firstDigit===ns.FNC1||this.secondDigit===ns.FNC1}}ns.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new V;let r=t.substring(0,2);for(let g of He.TWO_DIGIT_DATA_LENGTH)if(g[0]===r)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,g[2],t):He.processFixedAI(2,g[1],t);if(t.length<3)throw new V;let l=t.substring(0,3);for(let g of He.THREE_DIGIT_DATA_LENGTH)if(g[0]===l)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,g[2],t):He.processFixedAI(3,g[1],t);for(let g of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===l)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,g[2],t):He.processFixedAI(4,g[1],t);if(t.length<4)throw new V;let d=t.substring(0,4);for(let g of He.FOUR_DIGIT_DATA_LENGTH)if(g[0]===d)return g[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,g[2],t):He.processFixedAI(4,g[1],t);throw new V}static processFixedAI(t,r,l){if(l.length<t)throw new V;let d=l.substring(0,t);if(l.length<t+r)throw new V;let g=l.substring(t,t+r),p=l.substring(t+r),y="("+d+")"+g,_=He.parseFieldsInGeneralPurpose(p);return _==null?y:y+_}static processVariableAI(t,r,l){let d=l.substring(0,t),g;l.length<t+r?g=l.length:g=t+r;let p=l.substring(t,g),y=l.substring(g),_="("+d+")"+p,E=He.parseFieldsInGeneralPurpose(y);return E==null?_:_+E}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class hs{constructor(t){this.buffer=new Ce,this.information=t}decodeAllCodes(t,r){let l=r,d=null;do{let g=this.decodeGeneralPurposeField(l,d),p=He.parseFieldsInGeneralPurpose(g.getNewString());if(p!=null&&t.append(p),g.isRemaining()?d=""+g.getRemainingValue():d=null,l===g.getNewPosition())break;l=g.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(t,4);return g===0?new ns(this.information.getSize(),ns.FNC1,ns.FNC1):new ns(this.information.getSize(),g-1,ns.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),l=(r-8)/11,d=(r-8)%11;return new ns(t+7,l,d)}extractNumericValueFromBitArray(t,r){return hs.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,l){let d=0;for(let g=0;g<l;++g)t.get(r+g)&&(d|=1<<l-g-1);return d}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Kt(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Kt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let l=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(l!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Kt(this.current.getPosition(),this.buffer.toString()):r=new Kt(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new On(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Kt(this.current.getPosition(),this.buffer.toString());return new On(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new On(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Kt(this.current.getPosition(),this.buffer.toString());return new On(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new On(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Kt(this.current.getPosition(),this.buffer.toString());return new On(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new On(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(t,7);if(l>=64&&l<116)return!0;if(t+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(t,8);return d>=232&&d<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new yn(t+5,yn.FNC1);if(r>=5&&r<15)return new yn(t+5,"0"+(r-5));let l=this.extractNumericValueFromBitArray(t,7);if(l>=64&&l<90)return new yn(t+7,""+(l+1));if(l>=90&&l<116)return new yn(t+7,""+(l+7));let d=this.extractNumericValueFromBitArray(t,8),g;switch(d){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new X}return new yn(t+8,g)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(t,6);return l>=16&&l<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new yn(t+5,yn.FNC1);if(r>=5&&r<15)return new yn(t+5,"0"+(r-5));let l=this.extractNumericValueFromBitArray(t,6);if(l>=32&&l<58)return new yn(t+6,""+(l+33));let d;switch(l){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new xn("Decoding invalid alphanumeric value: "+l)}return new yn(t+6,d)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class Ee{constructor(t){this.information=t,this.generalDecoder=new hs(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class _e extends Ee{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let l=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,l)}encodeCompressedGtinWithoutAI(t,r,l){for(let d=0;d<4;++d){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*d,10);g/100===0&&t.append("0"),g/10===0&&t.append("0"),t.append(g)}_e.appendCheckDigit(t,l)}static appendCheckDigit(t,r){let l=0;for(let d=0;d<13;d++){let g=t.charAt(d+r).charCodeAt(0)-48;l+=(d&1)===0?3*g:g}l=10-l%10,l===10&&(l=0),t.append(l)}}_e.GTIN_SIZE=40;class Ve extends _e{constructor(t){super(t)}parseInformation(){let t=new Ce;t.append("(01)");let r=t.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ve.HEADER_SIZE,4);return t.append(l),this.encodeCompressedGtinWithoutAI(t,Ve.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,Ve.HEADER_SIZE+44)}}Ve.HEADER_SIZE=4;class Dn extends Ee{constructor(t){super(t)}parseInformation(){let t=new Ce;return this.getGeneralDecoder().decodeAllCodes(t,Dn.HEADER_SIZE)}}Dn.HEADER_SIZE=5;class Vs extends _e{constructor(t){super(t)}encodeCompressedWeight(t,r,l){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(r,l);this.addWeightCode(t,d);let g=this.checkWeight(d),p=1e5;for(let y=0;y<5;++y)g/p===0&&t.append("0"),p/=10;t.append(g)}}class fs extends Vs{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=fs.HEADER_SIZE+Vs.GTIN_SIZE+fs.WEIGHT_SIZE)throw new V;let t=new Ce;return this.encodeCompressedGtin(t,fs.HEADER_SIZE),this.encodeCompressedWeight(t,fs.HEADER_SIZE+Vs.GTIN_SIZE,fs.WEIGHT_SIZE),t.toString()}}fs.HEADER_SIZE=5,fs.WEIGHT_SIZE=15;class Wi extends fs{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class fi extends fs{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Ms extends _e{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Ms.HEADER_SIZE+_e.GTIN_SIZE)throw new V;let t=new Ce;this.encodeCompressedGtin(t,Ms.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ms.HEADER_SIZE+_e.GTIN_SIZE,Ms.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ms.HEADER_SIZE+_e.GTIN_SIZE+Ms.LAST_DIGIT_SIZE,null);return t.append(l.getNewString()),t.toString()}}Ms.HEADER_SIZE=8,Ms.LAST_DIGIT_SIZE=2;class Ln extends _e{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Ln.HEADER_SIZE+_e.GTIN_SIZE)throw new V;let t=new Ce;this.encodeCompressedGtin(t,Ln.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+_e.GTIN_SIZE,Ln.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+_e.GTIN_SIZE+Ln.LAST_DIGIT_SIZE,Ln.FIRST_THREE_DIGITS_SIZE);l/100==0&&t.append("0"),l/10==0&&t.append("0"),t.append(l);let d=this.getGeneralDecoder().decodeGeneralPurposeField(Ln.HEADER_SIZE+_e.GTIN_SIZE+Ln.LAST_DIGIT_SIZE+Ln.FIRST_THREE_DIGITS_SIZE,null);return t.append(d.getNewString()),t.toString()}}Ln.HEADER_SIZE=8,Ln.LAST_DIGIT_SIZE=2,Ln.FIRST_THREE_DIGITS_SIZE=10;class Zt extends Vs{constructor(t,r,l){super(t),this.dateCode=l,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE+Zt.DATE_SIZE)throw new V;let t=new Ce;return this.encodeCompressedGtin(t,Zt.HEADER_SIZE),this.encodeCompressedWeight(t,Zt.HEADER_SIZE+Zt.GTIN_SIZE,Zt.WEIGHT_SIZE),this.encodeCompressedDate(t,Zt.HEADER_SIZE+Zt.GTIN_SIZE+Zt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Zt.DATE_SIZE);if(l==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let d=l%32;l/=32;let g=l%12+1;l/=12;let p=l;p/10==0&&t.append("0"),t.append(p),g/10==0&&t.append("0"),t.append(g),d/10==0&&t.append("0"),t.append(d)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Zt.HEADER_SIZE=8,Zt.WEIGHT_SIZE=20,Zt.DATE_SIZE=16;function _r(k){try{if(k.get(1))return new Ve(k);if(!k.get(2))return new Dn(k);switch(hs.extractNumericValueFromBitArray(k,1,4)){case 4:return new Wi(k);case 5:return new fi(k)}switch(hs.extractNumericValueFromBitArray(k,1,5)){case 12:return new Ms(k);case 13:return new Ln(k)}switch(hs.extractNumericValueFromBitArray(k,1,7)){case 56:return new Zt(k,"310","11");case 57:return new Zt(k,"320","11");case 58:return new Zt(k,"310","13");case 59:return new Zt(k,"320","13");case 60:return new Zt(k,"310","15");case 61:return new Zt(k,"320","15");case 62:return new Zt(k,"310","17");case 63:return new Zt(k,"320","17")}}catch(t){throw console.log(t),new xn("unknown decoder: "+k)}}class Ss{constructor(t,r,l,d){this.leftchar=t,this.rightchar=r,this.finderpattern=l,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof Ss?Ss.equalsOrNull(t.leftchar,r.leftchar)&&Ss.equalsOrNull(t.rightchar,r.rightchar)&&Ss.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:Ss.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Bn{constructor(t,r,l){this.pairs=t,this.rowNumber=r,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof Bn?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let l;return t.forEach((d,g)=>{r.forEach(p=>{d.getLeftChar().getValue()===p.getLeftChar().getValue()&&d.getRightChar().getValue()===p.getRightChar().getValue()&&d.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(l=!0)})}),l}}class Re extends Pt{constructor(t){super(...arguments),this.pairs=new Array(Re.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,l){this.pairs.length=0,this.startFromEven=!1;try{return Re.constructResult(this.decodeRow2pairs(t,r))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Re.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(g){if(g instanceof V){if(!this.pairs.length)throw new V;l=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(t,!1),d){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new V}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let l=r;l<this.rows.length;l++){let d=this.rows[l];this.pairs.length=0;for(let p of t)this.pairs.push(p.getPairs());if(this.pairs.push(d.getPairs()),!Re.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(t);g.push(d);try{return this.checkRows(g,l+1)}catch(p){this.verbose&&console.log(p)}}throw new V}static isValidSequence(t){for(let r of Re.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let l=!0;for(let d=0;d<t.length;d++)if(t[d].getFinderPattern().getValue()!=r[d]){l=!1;break}if(l)return!0}return!1}storeRow(t,r){let l=0,d=!1,g=!1;for(;l<this.rows.length;){let p=this.rows[l];if(p.getRowNumber()>t){g=p.isEquivalent(this.pairs);break}d=p.isEquivalent(this.pairs),l++}g||d||Re.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Bn(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let l of r)if(l.getPairs().length!==t.length){for(let d of l.getPairs())for(let g of t)if(Ss.equals(d,g))break}}static isPartialRow(t,r){for(let l of r){let d=!0;for(let g of t){let p=!1;for(let y of l.getPairs())if(g.equals(y)){p=!0;break}if(!p){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=Tt.buildBitArray(t),d=_r(r).parseInformation(),g=t[0].getFinderPattern().getResultPoints(),p=t[t.length-1].getFinderPattern().getResultPoints(),y=[g[0],g[1],p[0],p[1]];return new Ue(d,null,null,y,Ne.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),l=t.getRightChar();if(l==null)return!1;let d=l.getChecksumPortion(),g=2;for(let y=1;y<this.pairs.size();++y){let _=this.pairs.get(y);d+=_.getLeftChar().getChecksumPortion(),g++;let E=_.getRightChar();E!=null&&(d+=E.getChecksumPortion(),g++)}return d%=211,211*(g-4)+d==r.getValue()}static getNextSecondBar(t,r){let l;return t.get(r)?(l=t.getNextUnset(r),l=t.getNextSet(l)):(l=t.getNextSet(r),l=t.getNextUnset(l)),l}retrieveNextPair(t,r,l){let d=r.length%2==0;this.startFromEven&&(d=!d);let g,p=!0,y=-1;do this.findNextPair(t,r,y),g=this.parseFoundFinderPattern(t,l,d),g==null?y=Re.getNextSecondBar(t,this.startEnd[0]):p=!1;while(p);let _=this.decodeDataCharacter(t,g,d,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new V;let E;try{E=this.decodeDataCharacter(t,g,d,!1)}catch(j){E=null,this.verbose&&console.log(j)}return new Ss(_,E,g,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,l){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=t.getSize(),p;l>=0?p=l:this.isEmptyPair(r)?p=0:p=r[r.length-1].getFinderPattern().getStartEnd()[1];let y=r.length%2!=0;this.startFromEven&&(y=!y);let _=!1;for(;p<g&&(_=!t.get(p),!!_);)p++;let E=0,j=p;for(let L=p;L<g;L++)if(t.get(L)!=_)d[E]++;else{if(E==3){if(y&&Re.reverseCounters(d),Re.isFinderPattern(d)){this.startEnd[0]=j,this.startEnd[1]=L;return}y&&Re.reverseCounters(d),j+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,E--}else E++;d[E]=1,_=!_}throw new V}static reverseCounters(t){let r=t.length;for(let l=0;l<r/2;++l){let d=t[l];t[l]=t[r-l-1],t[r-l-1]=d}}parseFoundFinderPattern(t,r,l){let d,g,p;if(l){let E=this.startEnd[0]-1;for(;E>=0&&!t.get(E);)E--;E++,d=this.startEnd[0]-E,g=E,p=this.startEnd[1]}else g=this.startEnd[0],p=t.getNextUnset(this.startEnd[1]+1),d=p-this.startEnd[1];let y=this.getDecodeFinderCounters();D.arraycopy(y,0,y,1,y.length-1),y[0]=d;let _;try{_=this.parseFinderValue(y,Re.FINDER_PATTERNS)}catch{return null}return new G(_,[g,p],g,p,r)}decodeDataCharacter(t,r,l,d){let g=this.getDataCharacterCounters();for(let nn=0;nn<g.length;nn++)g[nn]=0;if(d)Re.recordPatternInReverse(t,r.getStartEnd()[0],g);else{Re.recordPattern(t,r.getStartEnd()[1],g);for(let nn=0,rs=g.length-1;nn<rs;nn++,rs--){let Ns=g[nn];g[nn]=g[rs],g[rs]=Ns}}let p=17,y=ht.sum(new Int32Array(g))/p,_=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(y-_)/_>.3)throw new V;let E=this.getOddCounts(),j=this.getEvenCounts(),L=this.getOddRoundingErrors(),z=this.getEvenRoundingErrors();for(let nn=0;nn<g.length;nn++){let rs=1*g[nn]/y,Ns=rs+.5;if(Ns<1){if(rs<.3)throw new V;Ns=1}else if(Ns>8){if(rs>8.7)throw new V;Ns=8}let Dr=nn/2;(nn&1)==0?(E[Dr]=Ns,L[Dr]=rs-Ns):(j[Dr]=Ns,z[Dr]=rs-Ns)}this.adjustOddEvenCounts(p);let K=4*r.getValue()+(l?0:2)+(d?0:1)-1,te=0,se=0;for(let nn=E.length-1;nn>=0;nn--){if(Re.isNotA1left(r,l,d)){let rs=Re.WEIGHTS[K][2*nn];se+=E[nn]*rs}te+=E[nn]}let oe=0;for(let nn=j.length-1;nn>=0;nn--)if(Re.isNotA1left(r,l,d)){let rs=Re.WEIGHTS[K][2*nn+1];oe+=j[nn]*rs}let fe=se+oe;if((te&1)!=0||te>13||te<4)throw new V;let Pe=(13-te)/2,Be=Re.SYMBOL_WIDEST[Pe],Ie=9-Be,Et=Te.getRSSvalue(E,Be,!0),yt=Te.getRSSvalue(j,Ie,!1),Un=Re.EVEN_TOTAL_SUBSET[Pe],Ls=Re.GSUM[Pe],gs=Et*Un+yt+Ls;return new In(gs,fe)}static isNotA1left(t,r,l){return!(t.getValue()==0&&r&&l)}adjustOddEvenCounts(t){let r=ht.sum(new Int32Array(this.getOddCounts())),l=ht.sum(new Int32Array(this.getEvenCounts())),d=!1,g=!1;r>13?g=!0:r<4&&(d=!0);let p=!1,y=!1;l>13?y=!0:l<4&&(p=!0);let _=r+l-t,E=(r&1)==1,j=(l&1)==0;if(_==1)if(E){if(j)throw new V;g=!0}else{if(!j)throw new V;y=!0}else if(_==-1)if(E){if(j)throw new V;d=!0}else{if(!j)throw new V;p=!0}else if(_==0){if(E){if(!j)throw new V;r<l?(d=!0,y=!0):(g=!0,p=!0)}else if(j)throw new V}else throw new V;if(d){if(g)throw new V;Re.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Re.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(y)throw new V;Re.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Re.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Re.SYMBOL_WIDEST=[7,5,4,3,1],Re.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Re.GSUM=[0,348,1388,2948,3988],Re.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Re.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Re.FINDER_PAT_A=0,Re.FINDER_PAT_B=1,Re.FINDER_PAT_C=2,Re.FINDER_PAT_D=3,Re.FINDER_PAT_E=4,Re.FINDER_PAT_F=5,Re.FINDER_PATTERN_SEQUENCES=[[Re.FINDER_PAT_A,Re.FINDER_PAT_A],[Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B],[Re.FINDER_PAT_A,Re.FINDER_PAT_C,Re.FINDER_PAT_B,Re.FINDER_PAT_D],[Re.FINDER_PAT_A,Re.FINDER_PAT_E,Re.FINDER_PAT_B,Re.FINDER_PAT_D,Re.FINDER_PAT_C],[Re.FINDER_PAT_A,Re.FINDER_PAT_E,Re.FINDER_PAT_B,Re.FINDER_PAT_D,Re.FINDER_PAT_D,Re.FINDER_PAT_F],[Re.FINDER_PAT_A,Re.FINDER_PAT_E,Re.FINDER_PAT_B,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_F,Re.FINDER_PAT_F],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_D],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_E],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_F,Re.FINDER_PAT_F],[Re.FINDER_PAT_A,Re.FINDER_PAT_A,Re.FINDER_PAT_B,Re.FINDER_PAT_B,Re.FINDER_PAT_C,Re.FINDER_PAT_D,Re.FINDER_PAT_D,Re.FINDER_PAT_E,Re.FINDER_PAT_E,Re.FINDER_PAT_F,Re.FINDER_PAT_F]],Re.MAX_PAIRS=11;class sc extends In{constructor(t,r,l){super(t,r),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class en extends Pt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,l){const d=this.decodePair(r,!1,t,l);en.addOrTally(this.possibleLeftPairs,d),r.reverse();let g=this.decodePair(r,!0,t,l);en.addOrTally(this.possibleRightPairs,g),r.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&en.checkChecksum(p,y))return en.constructResult(p,y)}throw new V}static addOrTally(t,r){if(r==null)return;let l=!1;for(let d of t)if(d.getValue()===r.getValue()){d.incrementCount(),l=!0;break}l||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let l=4537077*t.getValue()+r.getValue(),d=new String(l).toString(),g=new Ce;for(let E=13-d.length;E>0;E--)g.append("0");g.append(d);let p=0;for(let E=0;E<13;E++){let j=g.charAt(E).charCodeAt(0)-48;p+=(E&1)===0?3*j:j}p=10-p%10,p===10&&(p=0),g.append(p.toString());let y=t.getFinderPattern().getResultPoints(),_=r.getFinderPattern().getResultPoints();return new Ue(g.toString(),null,0,[y[0],y[1],_[0],_[1]],Ne.RSS_14,new Date().getTime())}static checkChecksum(t,r){let l=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,d=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,l===d}decodePair(t,r,l,d){try{let g=this.findFinderPattern(t,r),p=this.parseFoundFinderPattern(t,l,r,g),y=d==null?null:d.get(Y.NEED_RESULT_POINT_CALLBACK);if(y!=null){let j=(g[0]+g[1])/2;r&&(j=t.getSize()-1-j),y.foundPossibleResultPoint(new ze(j,l))}let _=this.decodeDataCharacter(t,p,!0),E=this.decodeDataCharacter(t,p,!1);return new sc(1597*_.getValue()+E.getValue(),_.getChecksumPortion()+4*E.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(t,r,l){let d=this.getDataCharacterCounters();for(let oe=0;oe<d.length;oe++)d[oe]=0;if(l)Ut.recordPatternInReverse(t,r.getStartEnd()[0],d);else{Ut.recordPattern(t,r.getStartEnd()[1]+1,d);for(let oe=0,fe=d.length-1;oe<fe;oe++,fe--){let Pe=d[oe];d[oe]=d[fe],d[fe]=Pe}}let g=l?16:15,p=ht.sum(new Int32Array(d))/g,y=this.getOddCounts(),_=this.getEvenCounts(),E=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let oe=0;oe<d.length;oe++){let fe=d[oe]/p,Pe=Math.floor(fe+.5);Pe<1?Pe=1:Pe>8&&(Pe=8);let Be=Math.floor(oe/2);(oe&1)===0?(y[Be]=Pe,E[Be]=fe-Pe):(_[Be]=Pe,j[Be]=fe-Pe)}this.adjustOddEvenCounts(l,g);let L=0,z=0;for(let oe=y.length-1;oe>=0;oe--)z*=9,z+=y[oe],L+=y[oe];let K=0,te=0;for(let oe=_.length-1;oe>=0;oe--)K*=9,K+=_[oe],te+=_[oe];let se=z+3*K;if(l){if((L&1)!==0||L>12||L<4)throw new V;let oe=(12-L)/2,fe=en.OUTSIDE_ODD_WIDEST[oe],Pe=9-fe,Be=Te.getRSSvalue(y,fe,!1),Ie=Te.getRSSvalue(_,Pe,!0),Et=en.OUTSIDE_EVEN_TOTAL_SUBSET[oe],yt=en.OUTSIDE_GSUM[oe];return new In(Be*Et+Ie+yt,se)}else{if((te&1)!==0||te>10||te<4)throw new V;let oe=(10-te)/2,fe=en.INSIDE_ODD_WIDEST[oe],Pe=9-fe,Be=Te.getRSSvalue(y,fe,!0),Ie=Te.getRSSvalue(_,Pe,!1),Et=en.INSIDE_ODD_TOTAL_SUBSET[oe],yt=en.INSIDE_GSUM[oe];return new In(Ie*Et+Be+yt,se)}}findFinderPattern(t,r){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let d=t.getSize(),g=!1,p=0;for(;p<d&&(g=!t.get(p),r!==g);)p++;let y=0,_=p;for(let E=p;E<d;E++)if(t.get(E)!==g)l[y]++;else{if(y===3){if(Pt.isFinderPattern(l))return[_,E];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,g=!g}throw new V}parseFoundFinderPattern(t,r,l,d){let g=t.get(d[0]),p=d[0]-1;for(;p>=0&&g!==t.get(p);)p--;p++;const y=d[0]-p,_=this.getDecodeFinderCounters(),E=new Int32Array(_.length);D.arraycopy(_,0,E,1,_.length-1),E[0]=y;const j=this.parseFinderValue(E,en.FINDER_PATTERNS);let L=p,z=d[1];return l&&(L=t.getSize()-1-L,z=t.getSize()-1-z),new G(j,[p,d[1]],L,z,r)}adjustOddEvenCounts(t,r){let l=ht.sum(new Int32Array(this.getOddCounts())),d=ht.sum(new Int32Array(this.getEvenCounts())),g=!1,p=!1,y=!1,_=!1;t?(l>12?p=!0:l<4&&(g=!0),d>12?_=!0:d<4&&(y=!0)):(l>11?p=!0:l<5&&(g=!0),d>10?_=!0:d<4&&(y=!0));let E=l+d-r,j=(l&1)===(t?1:0),L=(d&1)===1;if(E===1)if(j){if(L)throw new V;p=!0}else{if(!L)throw new V;_=!0}else if(E===-1)if(j){if(L)throw new V;g=!0}else{if(!L)throw new V;y=!0}else if(E===0){if(j){if(!L)throw new V;l<d?(g=!0,_=!0):(p=!0,y=!0)}else if(L)throw new V}else throw new V;if(g){if(p)throw new V;Pt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Pt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(_)throw new V;Pt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Pt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}en.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],en.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],en.OUTSIDE_GSUM=[0,161,961,2015,2715],en.INSIDE_GSUM=[0,336,1036,1516],en.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],en.INSIDE_ODD_WIDEST=[2,4,6,8],en.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Gs extends Ut{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const l=t?t.get(Y.POSSIBLE_FORMATS):null,d=t&&t.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ne.EAN_13)||l.includes(Ne.UPC_A)||l.includes(Ne.EAN_8)||l.includes(Ne.UPC_E))&&this.readers.push(new an(t)),l.includes(Ne.CODE_39)&&this.readers.push(new lt(d)),l.includes(Ne.CODE_128)&&this.readers.push(new je),l.includes(Ne.ITF)&&this.readers.push(new gt),l.includes(Ne.RSS_14)&&this.readers.push(new en),l.includes(Ne.RSS_EXPANDED)&&this.readers.push(new Re(this.verbose))):(this.readers.push(new an(t)),this.readers.push(new lt),this.readers.push(new an(t)),this.readers.push(new je),this.readers.push(new gt),this.readers.push(new en),this.readers.push(new Re(this.verbose)))}decodeRow(t,r,l){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(t,r,l)}catch{}throw new V}reset(){this.readers.forEach(t=>t.reset())}}class td extends Le{constructor(t=500,r){super(new Gs(r),t,r)}}class Ht{constructor(t,r,l){this.ecCodewords=t,this.ecBlocks=[r],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ft{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class jt{constructor(t,r,l,d,g,p){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=l,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=g,this.ecBlocks=p;let y=0;const _=p.getECCodewords(),E=p.getECBlocks();for(let j of E)y+=j.getCount()*(j.getDataCodewords()+_);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if((t&1)!==0||(r&1)!==0)throw new X;for(let l of jt.VERSIONS)if(l.symbolSizeRows===t&&l.symbolSizeColumns===r)return l;throw new X}toString(){return""+this.versionNumber}static buildVersions(){return[new jt(1,10,10,8,8,new Ht(5,new Ft(1,3))),new jt(2,12,12,10,10,new Ht(7,new Ft(1,5))),new jt(3,14,14,12,12,new Ht(10,new Ft(1,8))),new jt(4,16,16,14,14,new Ht(12,new Ft(1,12))),new jt(5,18,18,16,16,new Ht(14,new Ft(1,18))),new jt(6,20,20,18,18,new Ht(18,new Ft(1,22))),new jt(7,22,22,20,20,new Ht(20,new Ft(1,30))),new jt(8,24,24,22,22,new Ht(24,new Ft(1,36))),new jt(9,26,26,24,24,new Ht(28,new Ft(1,44))),new jt(10,32,32,14,14,new Ht(36,new Ft(1,62))),new jt(11,36,36,16,16,new Ht(42,new Ft(1,86))),new jt(12,40,40,18,18,new Ht(48,new Ft(1,114))),new jt(13,44,44,20,20,new Ht(56,new Ft(1,144))),new jt(14,48,48,22,22,new Ht(68,new Ft(1,174))),new jt(15,52,52,24,24,new Ht(42,new Ft(2,102))),new jt(16,64,64,14,14,new Ht(56,new Ft(2,140))),new jt(17,72,72,16,16,new Ht(36,new Ft(4,92))),new jt(18,80,80,18,18,new Ht(48,new Ft(4,114))),new jt(19,88,88,20,20,new Ht(56,new Ft(4,144))),new jt(20,96,96,22,22,new Ht(68,new Ft(4,174))),new jt(21,104,104,24,24,new Ht(56,new Ft(6,136))),new jt(22,120,120,18,18,new Ht(68,new Ft(6,175))),new jt(23,132,132,20,20,new Ht(62,new Ft(8,163))),new jt(24,144,144,22,22,new Ht(62,new Ft(8,156),new Ft(2,155))),new jt(25,8,18,6,16,new Ht(7,new Ft(1,5))),new jt(26,8,32,6,14,new Ht(11,new Ft(1,10))),new jt(27,12,26,10,24,new Ht(14,new Ft(1,16))),new jt(28,12,36,10,16,new Ht(18,new Ft(1,22))),new jt(29,16,36,14,16,new Ht(24,new Ft(1,32))),new jt(30,16,48,14,22,new Ht(28,new Ft(1,49)))]}}jt.VERSIONS=jt.buildVersions();class Sr{constructor(t){const r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new X;this.version=Sr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Oe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),l=t.getWidth();return jt.getVersionForDimensions(r,l)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,l=4,d=0;const g=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let y=!1,_=!1,E=!1,j=!1;do if(l===g&&d===0&&!y)t[r++]=this.readCorner1(g,p)&255,l-=2,d+=2,y=!0;else if(l===g-2&&d===0&&(p&3)!==0&&!_)t[r++]=this.readCorner2(g,p)&255,l-=2,d+=2,_=!0;else if(l===g+4&&d===2&&(p&7)===0&&!E)t[r++]=this.readCorner3(g,p)&255,l-=2,d+=2,E=!0;else if(l===g-2&&d===0&&(p&7)===4&&!j)t[r++]=this.readCorner4(g,p)&255,l-=2,d+=2,j=!0;else{do l<g&&d>=0&&!this.readMappingMatrix.get(d,l)&&(t[r++]=this.readUtah(l,d,g,p)&255),l-=2,d+=2;while(l>=0&&d<p);l+=1,d+=3;do l>=0&&d<p&&!this.readMappingMatrix.get(d,l)&&(t[r++]=this.readUtah(l,d,g,p)&255),l+=2,d-=2;while(l<g&&d>=0);l+=3,d+=1}while(l<g||d<p);if(r!==this.version.getTotalCodewords())throw new X;return t}readModule(t,r,l,d){return t<0&&(t+=l,r+=4-(l+4&7)),r<0&&(r+=d,t+=4-(d+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,l,d){let g=0;return this.readModule(t-2,r-2,l,d)&&(g|=1),g<<=1,this.readModule(t-2,r-1,l,d)&&(g|=1),g<<=1,this.readModule(t-1,r-2,l,d)&&(g|=1),g<<=1,this.readModule(t-1,r-1,l,d)&&(g|=1),g<<=1,this.readModule(t-1,r,l,d)&&(g|=1),g<<=1,this.readModule(t,r-2,l,d)&&(g|=1),g<<=1,this.readModule(t,r-1,l,d)&&(g|=1),g<<=1,this.readModule(t,r,l,d)&&(g|=1),g}readCorner1(t,r){let l=0;return this.readModule(t-1,0,t,r)&&(l|=1),l<<=1,this.readModule(t-1,1,t,r)&&(l|=1),l<<=1,this.readModule(t-1,2,t,r)&&(l|=1),l<<=1,this.readModule(0,r-2,t,r)&&(l|=1),l<<=1,this.readModule(0,r-1,t,r)&&(l|=1),l<<=1,this.readModule(1,r-1,t,r)&&(l|=1),l<<=1,this.readModule(2,r-1,t,r)&&(l|=1),l<<=1,this.readModule(3,r-1,t,r)&&(l|=1),l}readCorner2(t,r){let l=0;return this.readModule(t-3,0,t,r)&&(l|=1),l<<=1,this.readModule(t-2,0,t,r)&&(l|=1),l<<=1,this.readModule(t-1,0,t,r)&&(l|=1),l<<=1,this.readModule(0,r-4,t,r)&&(l|=1),l<<=1,this.readModule(0,r-3,t,r)&&(l|=1),l<<=1,this.readModule(0,r-2,t,r)&&(l|=1),l<<=1,this.readModule(0,r-1,t,r)&&(l|=1),l<<=1,this.readModule(1,r-1,t,r)&&(l|=1),l}readCorner3(t,r){let l=0;return this.readModule(t-1,0,t,r)&&(l|=1),l<<=1,this.readModule(t-1,r-1,t,r)&&(l|=1),l<<=1,this.readModule(0,r-3,t,r)&&(l|=1),l<<=1,this.readModule(0,r-2,t,r)&&(l|=1),l<<=1,this.readModule(0,r-1,t,r)&&(l|=1),l<<=1,this.readModule(1,r-3,t,r)&&(l|=1),l<<=1,this.readModule(1,r-2,t,r)&&(l|=1),l<<=1,this.readModule(1,r-1,t,r)&&(l|=1),l}readCorner4(t,r){let l=0;return this.readModule(t-3,0,t,r)&&(l|=1),l<<=1,this.readModule(t-2,0,t,r)&&(l|=1),l<<=1,this.readModule(t-1,0,t,r)&&(l|=1),l<<=1,this.readModule(0,r-2,t,r)&&(l|=1),l<<=1,this.readModule(0,r-1,t,r)&&(l|=1),l<<=1,this.readModule(1,r-1,t,r)&&(l|=1),l<<=1,this.readModule(2,r-1,t,r)&&(l|=1),l<<=1,this.readModule(3,r-1,t,r)&&(l|=1),l}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new N("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),p=r/d|0,y=l/g|0,_=p*d,E=y*g,j=new Oe(E,_);for(let L=0;L<p;++L){const z=L*d;for(let K=0;K<y;++K){const te=K*g;for(let se=0;se<d;++se){const oe=L*(d+2)+1+se,fe=z+se;for(let Pe=0;Pe<g;++Pe){const Be=K*(g+2)+1+Pe;if(t.get(Be,oe)){const Ie=te+Pe;j.set(Ie,fe)}}}}}return j}}class Er{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const l=r.getECBlocks();let d=0;const g=l.getECBlocks();for(let se of g)d+=se.getCount();const p=new Array(d);let y=0;for(let se of g)for(let oe=0;oe<se.getCount();oe++){const fe=se.getDataCodewords(),Pe=l.getECCodewords()+fe;p[y++]=new Er(fe,new Uint8Array(Pe))}const E=p[0].codewords.length-l.getECCodewords(),j=E-1;let L=0;for(let se=0;se<j;se++)for(let oe=0;oe<y;oe++)p[oe].codewords[se]=t[L++];const z=r.getVersionNumber()===24,K=z?8:y;for(let se=0;se<K;se++)p[se].codewords[E-1]=t[L++];const te=p[0].codewords.length;for(let se=E;se<te;se++)for(let oe=0;oe<y;oe++){const fe=z?(oe+8)%y:oe,Pe=z&&fe>7?se-1:se;p[fe].codewords[Pe]=t[L++]}if(L!==t.length)throw new N;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ys{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new N(""+t);let r=0,l=this.bitOffset,d=this.byteOffset;const g=this.bytes;if(l>0){const p=8-l,y=t<p?t:p,_=p-y,E=255>>8-y<<_;r=(g[d]&E)>>_,t-=y,l+=y,l===8&&(l=0,d++)}if(t>0){for(;t>=8;)r=r<<8|g[d]&255,d++,t-=8;if(t>0){const p=8-t,y=255>>p<<p;r=r<<t|(g[d]&y)>>p,l+=t}}return this.bitOffset=l,this.byteOffset=d,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gt;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gt||(Gt={}));class Ca{static decode(t){const r=new Ys(t),l=new Ce,d=new Ce,g=new Array;let p=Gt.ASCII_ENCODE;do if(p===Gt.ASCII_ENCODE)p=this.decodeAsciiSegment(r,l,d);else{switch(p){case Gt.C40_ENCODE:this.decodeC40Segment(r,l);break;case Gt.TEXT_ENCODE:this.decodeTextSegment(r,l);break;case Gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,l);break;case Gt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,l);break;case Gt.BASE256_ENCODE:this.decodeBase256Segment(r,l,g);break;default:throw new X}p=Gt.ASCII_ENCODE}while(p!==Gt.PAD_ENCODE&&r.available()>0);return d.length()>0&&l.append(d.toString()),new ve(t,l.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(t,r,l){let d=!1;do{let g=t.readBits(8);if(g===0)throw new X;if(g<=128)return d&&(g+=128),r.append(String.fromCharCode(g-1)),Gt.ASCII_ENCODE;if(g===129)return Gt.PAD_ENCODE;if(g<=229){const p=g-130;p<10&&r.append("0"),r.append(""+p)}else switch(g){case 230:return Gt.C40_ENCODE;case 231:return Gt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:r.append("[)>05"),l.insert(0,"");break;case 237:r.append("[)>06"),l.insert(0,"");break;case 238:return Gt.ANSIX12_ENCODE;case 239:return Gt.TEXT_ENCODE;case 240:return Gt.EDIFACT_ENCODE;case 241:break;default:if(g!==254||t.available()!==0)throw new X;break}}while(t.available()>0);return Gt.ASCII_ENCODE}static decodeC40Segment(t,r){let l=!1;const d=[];let g=0;do{if(t.available()===8)return;const p=t.readBits(8);if(p===254)return;this.parseTwoBytes(p,t.readBits(8),d);for(let y=0;y<3;y++){const _=d[y];switch(g){case 0:if(_<3)g=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[_];l?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):r.append(E)}else throw new X;break;case 1:l?(r.append(String.fromCharCode(_+128)),l=!1):r.append(String.fromCharCode(_)),g=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[_];l?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):r.append(E)}else switch(_){case 27:r.append("");break;case 30:l=!0;break;default:throw new X}g=0;break;case 3:l?(r.append(String.fromCharCode(_+224)),l=!1):r.append(String.fromCharCode(_+96)),g=0;break;default:throw new X}}}while(t.available()>0)}static decodeTextSegment(t,r){let l=!1,d=[],g=0;do{if(t.available()===8)return;const p=t.readBits(8);if(p===254)return;this.parseTwoBytes(p,t.readBits(8),d);for(let y=0;y<3;y++){const _=d[y];switch(g){case 0:if(_<3)g=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[_];l?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):r.append(E)}else throw new X;break;case 1:l?(r.append(String.fromCharCode(_+128)),l=!1):r.append(String.fromCharCode(_)),g=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[_];l?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):r.append(E)}else switch(_){case 27:r.append("");break;case 30:l=!0;break;default:throw new X}g=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[_];l?(r.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):r.append(E),g=0}else throw new X;break;default:throw new X}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const l=[];do{if(t.available()===8)return;const d=t.readBits(8);if(d===254)return;this.parseTwoBytes(d,t.readBits(8),l);for(let g=0;g<3;g++){const p=l[g];switch(p){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(p<14)r.append(String.fromCharCode(p+44));else if(p<40)r.append(String.fromCharCode(p+51));else throw new X;break}}}while(t.available()>0)}static parseTwoBytes(t,r,l){let d=(t<<8)+r-1,g=Math.floor(d/1600);l[0]=g,d-=g*1600,g=Math.floor(d/40),l[1]=g,l[2]=d-g*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let l=0;l<4;l++){let d=t.readBits(6);if(d===31){const g=8-t.getBitOffset();g!==8&&t.readBits(g);return}(d&32)===0&&(d|=64),r.append(String.fromCharCode(d))}}while(t.available()>0)}static decodeBase256Segment(t,r,l){let d=1+t.getByteOffset();const g=this.unrandomize255State(t.readBits(8),d++);let p;if(g===0?p=t.available()/8|0:g<250?p=g:p=250*(g-249)+this.unrandomize255State(t.readBits(8),d++),p<0)throw new X;const y=new Uint8Array(p);for(let _=0;_<p;_++){if(t.available()<8)throw new X;y[_]=this.unrandomize255State(t.readBits(8),d++)}l.push(y);try{r.append(we.decode(y,me.ISO88591))}catch(_){throw new xn("Platform does not support required encoding: "+_.message)}}static unrandomize255State(t,r){const l=149*r%255+1,d=t-l;return d>=0?d:d+256}}Ca.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ca.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ca.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ca.TEXT_SHIFT2_SET_CHARS=Ca.C40_SHIFT2_SET_CHARS,Ca.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class nd{constructor(){this.rsDecoder=new cn(ft.DATA_MATRIX_FIELD_256)}decode(t){const r=new Sr(t),l=r.getVersion(),d=r.readCodewords(),g=Er.getDataBlocks(d,l);let p=0;for(let E of g)p+=E.getNumDataCodewords();const y=new Uint8Array(p),_=g.length;for(let E=0;E<_;E++){const j=g[E],L=j.getCodewords(),z=j.getNumDataCodewords();this.correctErrors(L,z);for(let K=0;K<z;K++)y[K*_+E]=L[K]}return Ca.decode(y)}correctErrors(t,r){const l=new Int32Array(t);try{this.rsDecoder.decode(l,t.length-r)}catch{throw new T}for(let d=0;d<r;d++)t[d]=l[d]}}class bn{constructor(t){this.image=t,this.rectangleDetector=new Fe(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new V;r=this.shiftToModuleCenter(r);const l=r[0],d=r[1],g=r[2],p=r[3];let y=this.transitionsBetween(l,p)+1,_=this.transitionsBetween(g,p)+1;(y&1)===1&&(y+=1),(_&1)===1&&(_+=1),4*y<7*_&&4*_<7*y&&(y=_=Math.max(y,_));let E=bn.sampleGrid(this.image,l,d,g,p,y,_);return new Is(E,[l,d,g,p])}static shiftPoint(t,r,l){let d=(r.getX()-t.getX())/(l+1),g=(r.getY()-t.getY())/(l+1);return new ze(t.getX()+d,t.getY()+g)}static moveAway(t,r,l){let d=t.getX(),g=t.getY();return d<r?d-=1:d+=1,g<l?g-=1:g+=1,new ze(d,g)}detectSolid1(t){let r=t[0],l=t[1],d=t[3],g=t[2],p=this.transitionsBetween(r,l),y=this.transitionsBetween(l,d),_=this.transitionsBetween(d,g),E=this.transitionsBetween(g,r),j=p,L=[g,r,l,d];return j>y&&(j=y,L[0]=r,L[1]=l,L[2]=d,L[3]=g),j>_&&(j=_,L[0]=l,L[1]=d,L[2]=g,L[3]=r),j>E&&(L[0]=d,L[1]=g,L[2]=r,L[3]=l),L}detectSolid2(t){let r=t[0],l=t[1],d=t[2],g=t[3],p=this.transitionsBetween(r,g),y=bn.shiftPoint(l,d,(p+1)*4),_=bn.shiftPoint(d,l,(p+1)*4),E=this.transitionsBetween(y,r),j=this.transitionsBetween(_,g);return E<j?(t[0]=r,t[1]=l,t[2]=d,t[3]=g):(t[0]=l,t[1]=d,t[2]=g,t[3]=r),t}correctTopRight(t){let r=t[0],l=t[1],d=t[2],g=t[3],p=this.transitionsBetween(r,g),y=this.transitionsBetween(l,g),_=bn.shiftPoint(r,l,(y+1)*4),E=bn.shiftPoint(d,l,(p+1)*4);p=this.transitionsBetween(_,g),y=this.transitionsBetween(E,g);let j=new ze(g.getX()+(d.getX()-l.getX())/(p+1),g.getY()+(d.getY()-l.getY())/(p+1)),L=new ze(g.getX()+(r.getX()-l.getX())/(y+1),g.getY()+(r.getY()-l.getY())/(y+1));if(!this.isValid(j))return this.isValid(L)?L:null;if(!this.isValid(L))return j;let z=this.transitionsBetween(_,j)+this.transitionsBetween(E,j),K=this.transitionsBetween(_,L)+this.transitionsBetween(E,L);return z>K?j:L}shiftToModuleCenter(t){let r=t[0],l=t[1],d=t[2],g=t[3],p=this.transitionsBetween(r,g)+1,y=this.transitionsBetween(d,g)+1,_=bn.shiftPoint(r,l,y*4),E=bn.shiftPoint(d,l,p*4);p=this.transitionsBetween(_,g)+1,y=this.transitionsBetween(E,g)+1,(p&1)===1&&(p+=1),(y&1)===1&&(y+=1);let j=(r.getX()+l.getX()+d.getX()+g.getX())/4,L=(r.getY()+l.getY()+d.getY()+g.getY())/4;r=bn.moveAway(r,j,L),l=bn.moveAway(l,j,L),d=bn.moveAway(d,j,L),g=bn.moveAway(g,j,L);let z,K;return _=bn.shiftPoint(r,l,y*4),_=bn.shiftPoint(_,g,p*4),z=bn.shiftPoint(l,r,y*4),z=bn.shiftPoint(z,d,p*4),E=bn.shiftPoint(d,g,y*4),E=bn.shiftPoint(E,l,p*4),K=bn.shiftPoint(g,d,y*4),K=bn.shiftPoint(K,r,p*4),[_,z,E,K]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,l,d,g,p,y){return sn.getInstance().sampleGrid(t,p,y,.5,.5,p-.5,.5,p-.5,y-.5,.5,y-.5,r.getX(),r.getY(),g.getX(),g.getY(),d.getX(),d.getY(),l.getX(),l.getY())}transitionsBetween(t,r){let l=Math.trunc(t.getX()),d=Math.trunc(t.getY()),g=Math.trunc(r.getX()),p=Math.trunc(r.getY()),y=Math.abs(p-d)>Math.abs(g-l);if(y){let se=l;l=d,d=se,se=g,g=p,p=se}let _=Math.abs(g-l),E=Math.abs(p-d),j=-_/2,L=d<p?1:-1,z=l<g?1:-1,K=0,te=this.image.get(y?d:l,y?l:d);for(let se=l,oe=d;se!==g;se+=z){let fe=this.image.get(y?oe:se,y?se:oe);if(fe!==te&&(K++,te=fe),j+=E,j>0){if(oe===p)break;oe+=L,j-=_}}return K}}class _a{constructor(){this.decoder=new nd}decode(t,r=null){let l,d;if(r!=null&&r.has(Y.PURE_BARCODE)){const E=_a.extractPureBits(t.getBlackMatrix());l=this.decoder.decode(E),d=_a.NO_POINTS}else{const E=new bn(t.getBlackMatrix()).detect();l=this.decoder.decode(E.getBits()),d=E.getPoints()}const g=l.getRawBytes(),p=new Ue(l.getText(),g,8*g.length,d,Ne.DATA_MATRIX,D.currentTimeMillis()),y=l.getByteSegments();y!=null&&p.putMetadata(De.BYTE_SEGMENTS,y);const _=l.getECLevel();return _!=null&&p.putMetadata(De.ERROR_CORRECTION_LEVEL,_),p}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),l=t.getBottomRightOnBit();if(r==null||l==null)throw new V;const d=this.moduleSize(r,t);let g=r[1];const p=l[1];let y=r[0];const E=(l[0]-y+1)/d,j=(p-g+1)/d;if(E<=0||j<=0)throw new V;const L=d/2;g+=L,y+=L;const z=new Oe(E,j);for(let K=0;K<j;K++){const te=g+K*d;for(let se=0;se<E;se++)t.get(y+se*d,te)&&z.set(se,K)}return z}static moduleSize(t,r){const l=r.getWidth();let d=t[0];const g=t[1];for(;d<l&&r.get(d,g);)d++;if(d===l)throw new V;const p=d-t[0];if(p===0)throw new V;return p}}_a.NO_POINTS=[];class Qi extends Le{constructor(t=500){super(new _a,t)}}var Ar;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(Ar||(Ar={}));class Nt{constructor(t,r,l){this.value=t,this.stringValue=r,this.bits=l,Nt.FOR_BITS.set(l,this),Nt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Nt.L;case"M":return Nt.M;case"Q":return Nt.Q;case"H":return Nt.H;default:throw new A(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Nt))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=Nt.FOR_BITS.size)throw new N;return Nt.FOR_BITS.get(t)}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.L=new Nt(Ar.L,"L",1),Nt.M=new Nt(Ar.M,"M",0),Nt.Q=new Nt(Ar.Q,"Q",3),Nt.H=new Nt(Ar.H,"H",2);class Wn{constructor(t){this.errorCorrectionLevel=Nt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return P.bitCount(t^r)}static decodeFormatInformation(t,r){const l=Wn.doDecodeFormatInformation(t,r);return l!==null?l:Wn.doDecodeFormatInformation(t^Wn.FORMAT_INFO_MASK_QR,r^Wn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let l=Number.MAX_SAFE_INTEGER,d=0;for(const g of Wn.FORMAT_INFO_DECODE_LOOKUP){const p=g[0];if(p===t||p===r)return new Wn(g[1]);let y=Wn.numBitsDiffering(t,p);y<l&&(d=g[1],l=y),t!==r&&(y=Wn.numBitsDiffering(r,p),y<l&&(d=g[1],l=y))}return l<=3?new Wn(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Wn))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Wn.FORMAT_INFO_MASK_QR=21522,Wn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const l of r)t+=l.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class W{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ze{constructor(t,r,...l){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=l;let d=0;const g=l[0].getECCodewordsPerBlock(),p=l[0].getECBlocks();for(const y of p)d+=y.getCount()*(y.getDataCodewords()+g);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new X;try{return this.getVersionForNumber((t-17)/4)}catch{throw new X}}static getVersionForNumber(t){if(t<1||t>40)throw new N;return Ze.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,l=0;for(let d=0;d<Ze.VERSION_DECODE_INFO.length;d++){const g=Ze.VERSION_DECODE_INFO[d];if(g===t)return Ze.getVersionForNumber(d+7);const p=Wn.numBitsDiffering(t,g);p<r&&(l=d+7,r=p)}return r<=3?Ze.getVersionForNumber(l):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new Oe(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const l=this.alignmentPatternCenters.length;for(let d=0;d<l;d++){const g=this.alignmentPatternCenters[d]-2;for(let p=0;p<l;p++)d===0&&(p===0||p===l-1)||d===l-1&&p===0||r.setRegion(this.alignmentPatternCenters[p]-2,g,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}Ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ze.VERSIONS=[new Ze(1,new Int32Array(0),new le(7,new W(1,19)),new le(10,new W(1,16)),new le(13,new W(1,13)),new le(17,new W(1,9))),new Ze(2,Int32Array.from([6,18]),new le(10,new W(1,34)),new le(16,new W(1,28)),new le(22,new W(1,22)),new le(28,new W(1,16))),new Ze(3,Int32Array.from([6,22]),new le(15,new W(1,55)),new le(26,new W(1,44)),new le(18,new W(2,17)),new le(22,new W(2,13))),new Ze(4,Int32Array.from([6,26]),new le(20,new W(1,80)),new le(18,new W(2,32)),new le(26,new W(2,24)),new le(16,new W(4,9))),new Ze(5,Int32Array.from([6,30]),new le(26,new W(1,108)),new le(24,new W(2,43)),new le(18,new W(2,15),new W(2,16)),new le(22,new W(2,11),new W(2,12))),new Ze(6,Int32Array.from([6,34]),new le(18,new W(2,68)),new le(16,new W(4,27)),new le(24,new W(4,19)),new le(28,new W(4,15))),new Ze(7,Int32Array.from([6,22,38]),new le(20,new W(2,78)),new le(18,new W(4,31)),new le(18,new W(2,14),new W(4,15)),new le(26,new W(4,13),new W(1,14))),new Ze(8,Int32Array.from([6,24,42]),new le(24,new W(2,97)),new le(22,new W(2,38),new W(2,39)),new le(22,new W(4,18),new W(2,19)),new le(26,new W(4,14),new W(2,15))),new Ze(9,Int32Array.from([6,26,46]),new le(30,new W(2,116)),new le(22,new W(3,36),new W(2,37)),new le(20,new W(4,16),new W(4,17)),new le(24,new W(4,12),new W(4,13))),new Ze(10,Int32Array.from([6,28,50]),new le(18,new W(2,68),new W(2,69)),new le(26,new W(4,43),new W(1,44)),new le(24,new W(6,19),new W(2,20)),new le(28,new W(6,15),new W(2,16))),new Ze(11,Int32Array.from([6,30,54]),new le(20,new W(4,81)),new le(30,new W(1,50),new W(4,51)),new le(28,new W(4,22),new W(4,23)),new le(24,new W(3,12),new W(8,13))),new Ze(12,Int32Array.from([6,32,58]),new le(24,new W(2,92),new W(2,93)),new le(22,new W(6,36),new W(2,37)),new le(26,new W(4,20),new W(6,21)),new le(28,new W(7,14),new W(4,15))),new Ze(13,Int32Array.from([6,34,62]),new le(26,new W(4,107)),new le(22,new W(8,37),new W(1,38)),new le(24,new W(8,20),new W(4,21)),new le(22,new W(12,11),new W(4,12))),new Ze(14,Int32Array.from([6,26,46,66]),new le(30,new W(3,115),new W(1,116)),new le(24,new W(4,40),new W(5,41)),new le(20,new W(11,16),new W(5,17)),new le(24,new W(11,12),new W(5,13))),new Ze(15,Int32Array.from([6,26,48,70]),new le(22,new W(5,87),new W(1,88)),new le(24,new W(5,41),new W(5,42)),new le(30,new W(5,24),new W(7,25)),new le(24,new W(11,12),new W(7,13))),new Ze(16,Int32Array.from([6,26,50,74]),new le(24,new W(5,98),new W(1,99)),new le(28,new W(7,45),new W(3,46)),new le(24,new W(15,19),new W(2,20)),new le(30,new W(3,15),new W(13,16))),new Ze(17,Int32Array.from([6,30,54,78]),new le(28,new W(1,107),new W(5,108)),new le(28,new W(10,46),new W(1,47)),new le(28,new W(1,22),new W(15,23)),new le(28,new W(2,14),new W(17,15))),new Ze(18,Int32Array.from([6,30,56,82]),new le(30,new W(5,120),new W(1,121)),new le(26,new W(9,43),new W(4,44)),new le(28,new W(17,22),new W(1,23)),new le(28,new W(2,14),new W(19,15))),new Ze(19,Int32Array.from([6,30,58,86]),new le(28,new W(3,113),new W(4,114)),new le(26,new W(3,44),new W(11,45)),new le(26,new W(17,21),new W(4,22)),new le(26,new W(9,13),new W(16,14))),new Ze(20,Int32Array.from([6,34,62,90]),new le(28,new W(3,107),new W(5,108)),new le(26,new W(3,41),new W(13,42)),new le(30,new W(15,24),new W(5,25)),new le(28,new W(15,15),new W(10,16))),new Ze(21,Int32Array.from([6,28,50,72,94]),new le(28,new W(4,116),new W(4,117)),new le(26,new W(17,42)),new le(28,new W(17,22),new W(6,23)),new le(30,new W(19,16),new W(6,17))),new Ze(22,Int32Array.from([6,26,50,74,98]),new le(28,new W(2,111),new W(7,112)),new le(28,new W(17,46)),new le(30,new W(7,24),new W(16,25)),new le(24,new W(34,13))),new Ze(23,Int32Array.from([6,30,54,78,102]),new le(30,new W(4,121),new W(5,122)),new le(28,new W(4,47),new W(14,48)),new le(30,new W(11,24),new W(14,25)),new le(30,new W(16,15),new W(14,16))),new Ze(24,Int32Array.from([6,28,54,80,106]),new le(30,new W(6,117),new W(4,118)),new le(28,new W(6,45),new W(14,46)),new le(30,new W(11,24),new W(16,25)),new le(30,new W(30,16),new W(2,17))),new Ze(25,Int32Array.from([6,32,58,84,110]),new le(26,new W(8,106),new W(4,107)),new le(28,new W(8,47),new W(13,48)),new le(30,new W(7,24),new W(22,25)),new le(30,new W(22,15),new W(13,16))),new Ze(26,Int32Array.from([6,30,58,86,114]),new le(28,new W(10,114),new W(2,115)),new le(28,new W(19,46),new W(4,47)),new le(28,new W(28,22),new W(6,23)),new le(30,new W(33,16),new W(4,17))),new Ze(27,Int32Array.from([6,34,62,90,118]),new le(30,new W(8,122),new W(4,123)),new le(28,new W(22,45),new W(3,46)),new le(30,new W(8,23),new W(26,24)),new le(30,new W(12,15),new W(28,16))),new Ze(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new W(3,117),new W(10,118)),new le(28,new W(3,45),new W(23,46)),new le(30,new W(4,24),new W(31,25)),new le(30,new W(11,15),new W(31,16))),new Ze(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new W(7,116),new W(7,117)),new le(28,new W(21,45),new W(7,46)),new le(30,new W(1,23),new W(37,24)),new le(30,new W(19,15),new W(26,16))),new Ze(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new W(5,115),new W(10,116)),new le(28,new W(19,47),new W(10,48)),new le(30,new W(15,24),new W(25,25)),new le(30,new W(23,15),new W(25,16))),new Ze(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new W(13,115),new W(3,116)),new le(28,new W(2,46),new W(29,47)),new le(30,new W(42,24),new W(1,25)),new le(30,new W(23,15),new W(28,16))),new Ze(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new W(17,115)),new le(28,new W(10,46),new W(23,47)),new le(30,new W(10,24),new W(35,25)),new le(30,new W(19,15),new W(35,16))),new Ze(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new W(17,115),new W(1,116)),new le(28,new W(14,46),new W(21,47)),new le(30,new W(29,24),new W(19,25)),new le(30,new W(11,15),new W(46,16))),new Ze(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new W(13,115),new W(6,116)),new le(28,new W(14,46),new W(23,47)),new le(30,new W(44,24),new W(7,25)),new le(30,new W(59,16),new W(1,17))),new Ze(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new W(12,121),new W(7,122)),new le(28,new W(12,47),new W(26,48)),new le(30,new W(39,24),new W(14,25)),new le(30,new W(22,15),new W(41,16))),new Ze(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new W(6,121),new W(14,122)),new le(28,new W(6,47),new W(34,48)),new le(30,new W(46,24),new W(10,25)),new le(30,new W(2,15),new W(64,16))),new Ze(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new W(17,122),new W(4,123)),new le(28,new W(29,46),new W(14,47)),new le(30,new W(49,24),new W(10,25)),new le(30,new W(24,15),new W(46,16))),new Ze(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new W(4,122),new W(18,123)),new le(28,new W(13,46),new W(32,47)),new le(30,new W(48,24),new W(14,25)),new le(30,new W(42,15),new W(32,16))),new Ze(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new W(20,117),new W(4,118)),new le(28,new W(40,47),new W(7,48)),new le(30,new W(43,24),new W(22,25)),new le(30,new W(10,15),new W(67,16))),new Ze(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new W(19,118),new W(6,119)),new le(28,new W(18,47),new W(31,48)),new le(30,new W(34,24),new W(34,25)),new le(30,new W(20,15),new W(61,16)))];var Vn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(Vn||(Vn={}));class Es{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let l=0;l<r;l++)for(let d=0;d<r;d++)this.isMasked(l,d)&&t.flip(d,l)}}Es.values=new Map([[Vn.DATA_MASK_000,new Es(Vn.DATA_MASK_000,(k,t)=>(k+t&1)===0)],[Vn.DATA_MASK_001,new Es(Vn.DATA_MASK_001,(k,t)=>(k&1)===0)],[Vn.DATA_MASK_010,new Es(Vn.DATA_MASK_010,(k,t)=>t%3===0)],[Vn.DATA_MASK_011,new Es(Vn.DATA_MASK_011,(k,t)=>(k+t)%3===0)],[Vn.DATA_MASK_100,new Es(Vn.DATA_MASK_100,(k,t)=>(Math.floor(k/2)+Math.floor(t/3)&1)===0)],[Vn.DATA_MASK_101,new Es(Vn.DATA_MASK_101,(k,t)=>k*t%6===0)],[Vn.DATA_MASK_110,new Es(Vn.DATA_MASK_110,(k,t)=>k*t%6<3)],[Vn.DATA_MASK_111,new Es(Vn.DATA_MASK_111,(k,t)=>(k+t+k*t%3&1)===0)]]);class Nr{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new X;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let g=0;g<6;g++)t=this.copyBit(g,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let g=5;g>=0;g--)t=this.copyBit(8,g,t);const r=this.bitMatrix.getHeight();let l=0;const d=r-7;for(let g=r-1;g>=d;g--)l=this.copyBit(8,g,l);for(let g=r-8;g<r;g++)l=this.copyBit(g,8,l);if(this.parsedFormatInfo=Wn.decodeFormatInformation(t,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new X}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return Ze.getVersionForNumber(r);let l=0;const d=t-11;for(let p=5;p>=0;p--)for(let y=t-9;y>=d;y--)l=this.copyBit(y,p,l);let g=Ze.decodeVersionInformation(l);if(g!==null&&g.getDimensionForVersion()===t)return this.parsedVersion=g,g;l=0;for(let p=5;p>=0;p--)for(let y=t-9;y>=d;y--)l=this.copyBit(p,y,l);if(g=Ze.decodeVersionInformation(l),g!==null&&g.getDimensionForVersion()===t)return this.parsedVersion=g,g;throw new X}copyBit(t,r,l){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?l<<1|1:l<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),l=Es.values.get(t.getDataMask()),d=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,d);const g=r.buildFunctionPattern();let p=!0;const y=new Uint8Array(r.getTotalCodewords());let _=0,E=0,j=0;for(let L=d-1;L>0;L-=2){L===6&&L--;for(let z=0;z<d;z++){const K=p?d-1-z:z;for(let te=0;te<2;te++)g.get(L-te,K)||(j++,E<<=1,this.bitMatrix.get(L-te,K)&&(E|=1),j===8&&(y[_++]=E,j=0,E=0))}p=!p}if(_!==r.getTotalCodewords())throw new X;return y}remask(){if(this.parsedFormatInfo===null)return;const t=Es.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,l=t.getWidth();r<l;r++)for(let d=r+1,g=t.getHeight();d<g;d++)t.get(r,d)!==t.get(d,r)&&(t.flip(d,r),t.flip(r,d))}}class Zo{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,l){if(t.length!==r.getTotalCodewords())throw new N;const d=r.getECBlocksForLevel(l);let g=0;const p=d.getECBlocks();for(const te of p)g+=te.getCount();const y=new Array(g);let _=0;for(const te of p)for(let se=0;se<te.getCount();se++){const oe=te.getDataCodewords(),fe=d.getECCodewordsPerBlock()+oe;y[_++]=new Zo(oe,new Uint8Array(fe))}const E=y[0].codewords.length;let j=y.length-1;for(;j>=0&&y[j].codewords.length!==E;)j--;j++;const L=E-d.getECCodewordsPerBlock();let z=0;for(let te=0;te<L;te++)for(let se=0;se<_;se++)y[se].codewords[te]=t[z++];for(let te=j;te<_;te++)y[te].codewords[L]=t[z++];const K=y[0].codewords.length;for(let te=L;te<K;te++)for(let se=0;se<_;se++){const oe=se<j?te:te+1;y[se].codewords[oe]=t[z++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var As;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(As||(As={}));class at{constructor(t,r,l,d){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=l,this.bits=d,at.FOR_BITS.set(d,this),at.FOR_VALUE.set(t,this)}static forBits(t){const r=at.FOR_BITS.get(t);if(r===void 0)throw new N;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let l;return r<=9?l=0:r<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof at))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.TERMINATOR=new at(As.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),at.NUMERIC=new at(As.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),at.ALPHANUMERIC=new at(As.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),at.STRUCTURED_APPEND=new at(As.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),at.BYTE=new at(As.BYTE,"BYTE",Int32Array.from([8,16,16]),4),at.ECI=new at(As.ECI,"ECI",Int32Array.from([0,0,0]),7),at.KANJI=new at(As.KANJI,"KANJI",Int32Array.from([8,10,12]),8),at.FNC1_FIRST_POSITION=new at(As.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),at.FNC1_SECOND_POSITION=new at(As.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),at.HANZI=new at(As.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class fn{static decode(t,r,l,d){const g=new Ys(t);let p=new Ce;const y=new Array;let _=-1,E=-1;try{let j=null,L=!1,z;do{if(g.available()<4)z=at.TERMINATOR;else{const K=g.readBits(4);z=at.forBits(K)}switch(z){case at.TERMINATOR:break;case at.FNC1_FIRST_POSITION:case at.FNC1_SECOND_POSITION:L=!0;break;case at.STRUCTURED_APPEND:if(g.available()<16)throw new X;_=g.readBits(8),E=g.readBits(8);break;case at.ECI:const K=fn.parseECIValue(g);if(j=q.getCharacterSetECIByValue(K),j===null)throw new X;break;case at.HANZI:const te=g.readBits(4),se=g.readBits(z.getCharacterCountBits(r));te===fn.GB2312_SUBSET&&fn.decodeHanziSegment(g,p,se);break;default:const oe=g.readBits(z.getCharacterCountBits(r));switch(z){case at.NUMERIC:fn.decodeNumericSegment(g,p,oe);break;case at.ALPHANUMERIC:fn.decodeAlphanumericSegment(g,p,oe,L);break;case at.BYTE:fn.decodeByteSegment(g,p,oe,j,y,d);break;case at.KANJI:fn.decodeKanjiSegment(g,p,oe);break;default:throw new X}break}}while(z!==at.TERMINATOR)}catch{throw new X}return new ve(t,p.toString(),y.length===0?null:y,l===null?null:l.toString(),_,E)}static decodeHanziSegment(t,r,l){if(l*13>t.available())throw new X;const d=new Uint8Array(2*l);let g=0;for(;l>0;){const p=t.readBits(13);let y=p/96<<8&4294967295|p%96;y<959?y+=41377:y+=42657,d[g]=y>>8&255,d[g+1]=y&255,g+=2,l--}try{r.append(we.decode(d,me.GB2312))}catch(p){throw new X(p)}}static decodeKanjiSegment(t,r,l){if(l*13>t.available())throw new X;const d=new Uint8Array(2*l);let g=0;for(;l>0;){const p=t.readBits(13);let y=p/192<<8&4294967295|p%192;y<7936?y+=33088:y+=49472,d[g]=y>>8,d[g+1]=y,g+=2,l--}try{r.append(we.decode(d,me.SHIFT_JIS))}catch(p){throw new X(p)}}static decodeByteSegment(t,r,l,d,g,p){if(8*l>t.available())throw new X;const y=new Uint8Array(l);for(let E=0;E<l;E++)y[E]=t.readBits(8);let _;d===null?_=me.guessEncoding(y,p):_=d.getName();try{r.append(we.decode(y,_))}catch(E){throw new X(E)}g.push(y)}static toAlphaNumericChar(t){if(t>=fn.ALPHANUMERIC_CHARS.length)throw new X;return fn.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,l,d){const g=r.length();for(;l>1;){if(t.available()<11)throw new X;const p=t.readBits(11);r.append(fn.toAlphaNumericChar(Math.floor(p/45))),r.append(fn.toAlphaNumericChar(p%45)),l-=2}if(l===1){if(t.available()<6)throw new X;r.append(fn.toAlphaNumericChar(t.readBits(6)))}if(d)for(let p=g;p<r.length();p++)r.charAt(p)==="%"&&(p<r.length()-1&&r.charAt(p+1)==="%"?r.deleteCharAt(p+1):r.setCharAt(p,""))}static decodeNumericSegment(t,r,l){for(;l>=3;){if(t.available()<10)throw new X;const d=t.readBits(10);if(d>=1e3)throw new X;r.append(fn.toAlphaNumericChar(Math.floor(d/100))),r.append(fn.toAlphaNumericChar(Math.floor(d/10)%10)),r.append(fn.toAlphaNumericChar(d%10)),l-=3}if(l===2){if(t.available()<7)throw new X;const d=t.readBits(7);if(d>=100)throw new X;r.append(fn.toAlphaNumericChar(Math.floor(d/10))),r.append(fn.toAlphaNumericChar(d%10))}else if(l===1){if(t.available()<4)throw new X;const d=t.readBits(4);if(d>=10)throw new X;r.append(fn.toAlphaNumericChar(d))}}static parseECIValue(t){const r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const l=t.readBits(8);return(r&63)<<8&4294967295|l}if((r&224)===192){const l=t.readBits(16);return(r&31)<<16&4294967295|l}throw new X}}fn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",fn.GB2312_SUBSET=1;class ac{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class sd{constructor(){this.rsDecoder=new cn(ft.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(Oe.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const l=new Nr(t);let d=null;try{return this.decodeBitMatrixParser(l,r)}catch(g){d=g}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const g=this.decodeBitMatrixParser(l,r);return g.setOther(new ac(!0)),g}catch(g){throw d!==null?d:g}}decodeBitMatrixParser(t,r){const l=t.readVersion(),d=t.readFormatInformation().getErrorCorrectionLevel(),g=t.readCodewords(),p=Zo.getDataBlocks(g,l,d);let y=0;for(const j of p)y+=j.getNumDataCodewords();const _=new Uint8Array(y);let E=0;for(const j of p){const L=j.getCodewords(),z=j.getNumDataCodewords();this.correctErrors(L,z);for(let K=0;K<z;K++)_[E++]=L[K]}return fn.decode(_,l,d,r)}correctErrors(t,r){const l=new Int32Array(t);try{this.rsDecoder.decode(l,t.length-r)}catch{throw new T}for(let d=0;d<r;d++)t[d]=l[d]}}class Tr extends ze{constructor(t,r,l){super(t,r),this.estimatedModuleSize=l}aboutEquals(t,r,l){if(Math.abs(r-this.getY())<=t&&Math.abs(l-this.getX())<=t){const d=Math.abs(t-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(t,r,l){const d=(this.getX()+r)/2,g=(this.getY()+t)/2,p=(this.estimatedModuleSize+l)/2;return new Tr(d,g,p)}}class ks{constructor(t,r,l,d,g,p,y){this.image=t,this.startX=r,this.startY=l,this.width=d,this.height=g,this.moduleSize=p,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,l=this.width,d=t+l,g=this.startY+r/2,p=new Int32Array(3),y=this.image;for(let _=0;_<r;_++){const E=g+((_&1)===0?Math.floor((_+1)/2):-Math.floor((_+1)/2));p[0]=0,p[1]=0,p[2]=0;let j=t;for(;j<d&&!y.get(j,E);)j++;let L=0;for(;j<d;){if(y.get(j,E))if(L===1)p[1]++;else if(L===2){if(this.foundPatternCross(p)){const z=this.handlePossibleCenter(p,E,j);if(z!==null)return z}p[0]=p[2],p[1]=1,p[2]=0,L=1}else p[++L]++;else L===1&&L++,p[L]++;j++}if(this.foundPatternCross(p)){const z=this.handlePossibleCenter(p,E,d);if(z!==null)return z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,l=r/2;for(let d=0;d<3;d++)if(Math.abs(r-t[d])>=l)return!1;return!0}crossCheckVertical(t,r,l,d){const g=this.image,p=g.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let _=t;for(;_>=0&&g.get(r,_)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&!g.get(r,_)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=t+1;_<p&&g.get(r,_)&&y[1]<=l;)y[1]++,_++;if(_===p||y[1]>l)return NaN;for(;_<p&&!g.get(r,_)&&y[2]<=l;)y[2]++,_++;if(y[2]>l)return NaN;const E=y[0]+y[1]+y[2];return 5*Math.abs(E-d)>=2*d?NaN:this.foundPatternCross(y)?ks.centerFromEnd(y,_):NaN}handlePossibleCenter(t,r,l){const d=t[0]+t[1]+t[2],g=ks.centerFromEnd(t,l),p=this.crossCheckVertical(r,g,2*t[1],d);if(!isNaN(p)){const y=(t[0]+t[1]+t[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(y,p,g))return E.combineEstimate(p,g,y);const _=new Tr(g,p,y);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class gi extends ze{constructor(t,r,l,d){super(t,r),this.estimatedModuleSize=l,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,l){if(Math.abs(r-this.getY())<=t&&Math.abs(l-this.getX())<=t){const d=Math.abs(t-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(t,r,l){const d=this.count+1,g=(this.count*this.getX()+r)/d,p=(this.count*this.getY()+t)/d,y=(this.count*this.estimatedModuleSize+l)/d;return new gi(g,p,y,d)}}class $o{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class vn{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(Y.TRY_HARDER)!==void 0,l=t!=null&&t.get(Y.PURE_BARCODE)!==void 0,d=this.image,g=d.getHeight(),p=d.getWidth();let y=Math.floor(3*g/(4*vn.MAX_MODULES));(y<vn.MIN_SKIP||r)&&(y=vn.MIN_SKIP);let _=!1;const E=new Int32Array(5);for(let L=y-1;L<g&&!_;L+=y){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let z=0;for(let K=0;K<p;K++)if(d.get(K,L))(z&1)===1&&z++,E[z]++;else if((z&1)===0)if(z===4)if(vn.foundPatternCross(E)){if(this.handlePossibleCenter(E,L,K,l)===!0)if(y=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const se=this.findRowSkip();se>E[2]&&(L+=se-E[2]-y,K=p-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,z=3;continue}z=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,z=3;else E[++z]++;else E[z]++;vn.foundPatternCross(E)&&this.handlePossibleCenter(E,L,p,l)===!0&&(y=E[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const j=this.selectBestPatterns();return ze.orderBestPatterns(j),new $o(j)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let g=0;g<5;g++){const p=t[g];if(p===0)return!1;r+=p}if(r<7)return!1;const l=r/7,d=l/2;return Math.abs(l-t[0])<d&&Math.abs(l-t[1])<d&&Math.abs(3*l-t[2])<3*d&&Math.abs(l-t[3])<d&&Math.abs(l-t[4])<d}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,l,d){const g=this.getCrossCheckStateCount();let p=0;const y=this.image;for(;t>=p&&r>=p&&y.get(r-p,t-p);)g[2]++,p++;if(t<p||r<p)return!1;for(;t>=p&&r>=p&&!y.get(r-p,t-p)&&g[1]<=l;)g[1]++,p++;if(t<p||r<p||g[1]>l)return!1;for(;t>=p&&r>=p&&y.get(r-p,t-p)&&g[0]<=l;)g[0]++,p++;if(g[0]>l)return!1;const _=y.getHeight(),E=y.getWidth();for(p=1;t+p<_&&r+p<E&&y.get(r+p,t+p);)g[2]++,p++;if(t+p>=_||r+p>=E)return!1;for(;t+p<_&&r+p<E&&!y.get(r+p,t+p)&&g[3]<l;)g[3]++,p++;if(t+p>=_||r+p>=E||g[3]>=l)return!1;for(;t+p<_&&r+p<E&&y.get(r+p,t+p)&&g[4]<l;)g[4]++,p++;if(g[4]>=l)return!1;const j=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(j-d)<2*d&&vn.foundPatternCross(g)}crossCheckVertical(t,r,l,d){const g=this.image,p=g.getHeight(),y=this.getCrossCheckStateCount();let _=t;for(;_>=0&&g.get(r,_);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!g.get(r,_)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&g.get(r,_)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=t+1;_<p&&g.get(r,_);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!g.get(r,_)&&y[3]<l;)y[3]++,_++;if(_===p||y[3]>=l)return NaN;for(;_<p&&g.get(r,_)&&y[4]<l;)y[4]++,_++;if(y[4]>=l)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-d)>=2*d?NaN:vn.foundPatternCross(y)?vn.centerFromEnd(y,_):NaN}crossCheckHorizontal(t,r,l,d){const g=this.image,p=g.getWidth(),y=this.getCrossCheckStateCount();let _=t;for(;_>=0&&g.get(_,r);)y[2]++,_--;if(_<0)return NaN;for(;_>=0&&!g.get(_,r)&&y[1]<=l;)y[1]++,_--;if(_<0||y[1]>l)return NaN;for(;_>=0&&g.get(_,r)&&y[0]<=l;)y[0]++,_--;if(y[0]>l)return NaN;for(_=t+1;_<p&&g.get(_,r);)y[2]++,_++;if(_===p)return NaN;for(;_<p&&!g.get(_,r)&&y[3]<l;)y[3]++,_++;if(_===p||y[3]>=l)return NaN;for(;_<p&&g.get(_,r)&&y[4]<l;)y[4]++,_++;if(y[4]>=l)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-d)>=d?NaN:vn.foundPatternCross(y)?vn.centerFromEnd(y,_):NaN}handlePossibleCenter(t,r,l,d){const g=t[0]+t[1]+t[2]+t[3]+t[4];let p=vn.centerFromEnd(t,l),y=this.crossCheckVertical(r,Math.floor(p),t[2],g);if(!isNaN(y)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(y),t[2],g),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(y),Math.floor(p),t[2],g)))){const _=g/7;let E=!1;const j=this.possibleCenters;for(let L=0,z=j.length;L<z;L++){const K=j[L];if(K.aboutEquals(_,y,p)){j[L]=K.combineEstimate(y,p,_),E=!0;break}}if(!E){const L=new gi(p,y,_);j.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const l of this.possibleCenters)if(l.getCount()>=vn.CENTER_QUORUM)if(r==null)r=l;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-l.getX())-Math.abs(r.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const l=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=vn.CENTER_QUORUM&&(t++,r+=p.getEstimatedModuleSize());if(t<3)return!1;const d=r/l;let g=0;for(const p of this.possibleCenters)g+=Math.abs(p.getEstimatedModuleSize()-d);return g<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new V;const r=this.possibleCenters;let l;if(t>3){let d=0,g=0;for(const _ of this.possibleCenters){const E=_.getEstimatedModuleSize();d+=E,g+=E*E}l=d/t;let p=Math.sqrt(g/t-l*l);r.sort((_,E)=>{const j=Math.abs(E.getEstimatedModuleSize()-l),L=Math.abs(_.getEstimatedModuleSize()-l);return j<L?-1:j>L?1:0});const y=Math.max(.2*l,p);for(let _=0;_<r.length&&r.length>3;_++){const E=r[_];Math.abs(E.getEstimatedModuleSize()-l)>y&&(r.splice(_,1),_--)}}if(r.length>3){let d=0;for(const g of r)d+=g.getEstimatedModuleSize();l=d/r.length,r.sort((g,p)=>{if(p.getCount()===g.getCount()){const y=Math.abs(p.getEstimatedModuleSize()-l),_=Math.abs(g.getEstimatedModuleSize()-l);return y<_?1:y>_?-1:0}else return p.getCount()-g.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}vn.CENTER_QUORUM=2,vn.MIN_SKIP=3,vn.MAX_MODULES=57;class ca{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(Y.NEED_RESULT_POINT_CALLBACK);const l=new vn(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(l)}processFinderPatternInfo(t){const r=t.getTopLeft(),l=t.getTopRight(),d=t.getBottomLeft(),g=this.calculateModuleSize(r,l,d);if(g<1)throw new V("No pattern found in proccess finder.");const p=ca.computeDimension(r,l,d,g),y=Ze.getProvisionalVersionForDimension(p),_=y.getDimensionForVersion()-7;let E=null;if(y.getAlignmentPatternCenters().length>0){const K=l.getX()-r.getX()+d.getX(),te=l.getY()-r.getY()+d.getY(),se=1-3/_,oe=Math.floor(r.getX()+se*(K-r.getX())),fe=Math.floor(r.getY()+se*(te-r.getY()));for(let Pe=4;Pe<=16;Pe<<=1)try{E=this.findAlignmentInRegion(g,oe,fe,Pe);break}catch(Be){if(!(Be instanceof V))throw Be}}const j=ca.createTransform(r,l,d,E,p),L=ca.sampleGrid(this.image,j,p);let z;return E===null?z=[d,r,l]:z=[d,r,l,E],new Is(L,z)}static createTransform(t,r,l,d,g){const p=g-3.5;let y,_,E,j;return d!==null?(y=d.getX(),_=d.getY(),E=p-3,j=E):(y=r.getX()-t.getX()+l.getX(),_=r.getY()-t.getY()+l.getY(),E=p,j=p),Ct.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,E,j,3.5,p,t.getX(),t.getY(),r.getX(),r.getY(),y,_,l.getX(),l.getY())}static sampleGrid(t,r,l){return sn.getInstance().sampleGridWithTransform(t,l,l,r)}static computeDimension(t,r,l,d){const g=ht.round(ze.distance(t,r)/d),p=ht.round(ze.distance(t,l)/d);let y=Math.floor((g+p)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new V("Dimensions could be not found.")}return y}calculateModuleSize(t,r,l){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,l))/2}calculateModuleSizeOneWay(t,r){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(l)?d/7:isNaN(d)?l/7:(l+d)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,l,d){let g=this.sizeOfBlackWhiteBlackRun(t,r,l,d),p=1,y=t-(l-t);y<0?(p=t/(t-y),y=0):y>=this.image.getWidth()&&(p=(this.image.getWidth()-1-t)/(y-t),y=this.image.getWidth()-1);let _=Math.floor(r-(d-r)*p);return p=1,_<0?(p=r/(r-_),_=0):_>=this.image.getHeight()&&(p=(this.image.getHeight()-1-r)/(_-r),_=this.image.getHeight()-1),y=Math.floor(t+(y-t)*p),g+=this.sizeOfBlackWhiteBlackRun(t,r,y,_),g-1}sizeOfBlackWhiteBlackRun(t,r,l,d){const g=Math.abs(d-r)>Math.abs(l-t);if(g){let K=t;t=r,r=K,K=l,l=d,d=K}const p=Math.abs(l-t),y=Math.abs(d-r);let _=-p/2;const E=t<l?1:-1,j=r<d?1:-1;let L=0;const z=l+E;for(let K=t,te=r;K!==z;K+=E){const se=g?te:K,oe=g?K:te;if(L===1===this.image.get(se,oe)){if(L===2)return ht.distance(K,te,t,r);L++}if(_+=y,_>0){if(te===d)break;te+=j,_-=p}}return L===2?ht.distance(l+E,d,t,r):NaN}findAlignmentInRegion(t,r,l,d){const g=Math.floor(d*t),p=Math.max(0,r-g),y=Math.min(this.image.getWidth()-1,r+g);if(y-p<t*3)throw new V("Alignment top exceeds estimated module size.");const _=Math.max(0,l-g),E=Math.min(this.image.getHeight()-1,l+g);if(E-_<t*3)throw new V("Alignment bottom exceeds estimated module size.");return new ks(this.image,p,_,y-p,E-_,t,this.resultPointCallback).find()}}class Sa{constructor(){this.decoder=new sd}getDecoder(){return this.decoder}decode(t,r){let l,d;if(r!=null&&r.get(Y.PURE_BARCODE)!==void 0){const _=Sa.extractPureBits(t.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,r),d=Sa.NO_POINTS}else{const _=new ca(t.getBlackMatrix()).detect(r);l=this.decoder.decodeBitMatrix(_.getBits(),r),d=_.getPoints()}l.getOther()instanceof ac&&l.getOther().applyMirroredCorrection(d);const g=new Ue(l.getText(),l.getRawBytes(),void 0,d,Ne.QR_CODE,void 0),p=l.getByteSegments();p!==null&&g.putMetadata(De.BYTE_SEGMENTS,p);const y=l.getECLevel();return y!==null&&g.putMetadata(De.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(g.putMetadata(De.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),g.putMetadata(De.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),g}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),l=t.getBottomRightOnBit();if(r===null||l===null)throw new V;const d=this.moduleSize(r,t);let g=r[1],p=l[1],y=r[0],_=l[0];if(y>=_||g>=p)throw new V;if(p-g!==_-y&&(_=y+(p-g),_>=t.getWidth()))throw new V;const E=Math.round((_-y+1)/d),j=Math.round((p-g+1)/d);if(E<=0||j<=0)throw new V;if(j!==E)throw new V;const L=Math.floor(d/2);g+=L,y+=L;const z=y+Math.floor((E-1)*d)-_;if(z>0){if(z>L)throw new V;y-=z}const K=g+Math.floor((j-1)*d)-p;if(K>0){if(K>L)throw new V;g-=K}const te=new Oe(E,j);for(let se=0;se<j;se++){const oe=g+Math.floor(se*d);for(let fe=0;fe<E;fe++)t.get(y+Math.floor(fe*d),oe)&&te.set(fe,se)}return te}static moduleSize(t,r){const l=r.getHeight(),d=r.getWidth();let g=t[0],p=t[1],y=!0,_=0;for(;g<d&&p<l;){if(y!==r.get(g,p)){if(++_===5)break;y=!y}g++,p++}if(g===d||p===l)throw new V;return(g-t[0])/7}}Sa.NO_POINTS=new Array;class it{PDF417Common(){}static getBitCountSum(t){return ht.sum(t)}static toIntArray(t){if(t==null||!t.length)return it.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let l=0;for(const d of t)r[l++]=d;return r}static getCodeword(t){const r=B.binarySearch(it.SYMBOL_TABLE,t&262143);return r<0?-1:(it.CODEWORD_TABLE[r]-1)%it.NUMBER_OF_CODEWORDS}}it.NUMBER_OF_CODEWORDS=929,it.MAX_CODEWORDS_IN_BARCODE=it.NUMBER_OF_CODEWORDS-1,it.MIN_ROWS_IN_BARCODE=3,it.MAX_ROWS_IN_BARCODE=90,it.MODULES_IN_CODEWORD=17,it.MODULES_IN_STOP_PATTERN=18,it.BARS_IN_MODULE=8,it.EMPTY_INT_ARRAY=new Int32Array([]),it.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),it.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class rc{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class pt{static detectMultiple(t,r,l){let d=t.getBlackMatrix(),g=pt.detect(l,d);return g.length||(d=d.clone(),d.rotate180(),g=pt.detect(l,d)),new rc(d,g)}static detect(t,r){const l=new Array;let d=0,g=0,p=!1;for(;d<r.getHeight();){const y=pt.findVertices(r,d,g);if(y[0]==null&&y[3]==null){if(!p)break;p=!1,g=0;for(const _ of l)_[1]!=null&&(d=Math.trunc(Math.max(d,_[1].getY()))),_[3]!=null&&(d=Math.max(d,Math.trunc(_[3].getY())));d+=pt.ROW_STEP;continue}if(p=!0,l.push(y),!t)break;y[2]!=null?(g=Math.trunc(y[2].getX()),d=Math.trunc(y[2].getY())):(g=Math.trunc(y[4].getX()),d=Math.trunc(y[4].getY()))}return l}static findVertices(t,r,l){const d=t.getHeight(),g=t.getWidth(),p=new Array(8);return pt.copyToResult(p,pt.findRowsWithPattern(t,d,g,r,l,pt.START_PATTERN),pt.INDEXES_START_PATTERN),p[4]!=null&&(l=Math.trunc(p[4].getX()),r=Math.trunc(p[4].getY())),pt.copyToResult(p,pt.findRowsWithPattern(t,d,g,r,l,pt.STOP_PATTERN),pt.INDEXES_STOP_PATTERN),p}static copyToResult(t,r,l){for(let d=0;d<l.length;d++)t[l[d]]=r[d]}static findRowsWithPattern(t,r,l,d,g,p){const y=new Array(4);let _=!1;const E=new Int32Array(p.length);for(;d<r;d+=pt.ROW_STEP){let L=pt.findGuardPattern(t,g,d,l,!1,p,E);if(L!=null){for(;d>0;){const z=pt.findGuardPattern(t,g,--d,l,!1,p,E);if(z!=null)L=z;else{d++;break}}y[0]=new ze(L[0],d),y[1]=new ze(L[1],d),_=!0;break}}let j=d+1;if(_){let L=0,z=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;j<r;j++){const K=pt.findGuardPattern(t,z[0],j,l,!1,p,E);if(K!=null&&Math.abs(z[0]-K[0])<pt.MAX_PATTERN_DRIFT&&Math.abs(z[1]-K[1])<pt.MAX_PATTERN_DRIFT)z=K,L=0;else{if(L>pt.SKIPPED_ROW_COUNT_MAX)break;L++}}j-=L+1,y[2]=new ze(z[0],j),y[3]=new ze(z[1],j)}return j-d<pt.BARCODE_MIN_HEIGHT&&B.fill(y,null),y}static findGuardPattern(t,r,l,d,g,p,y){B.fillWithin(y,0,y.length,0);let _=r,E=0;for(;t.get(_,l)&&_>0&&E++<pt.MAX_PIXEL_DRIFT;)_--;let j=_,L=0,z=p.length;for(let K=g;j<d;j++)if(t.get(j,l)!==K)y[L]++;else{if(L===z-1){if(pt.patternMatchVariance(y,p,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return new Int32Array([_,j]);_+=y[0]+y[1],D.arraycopy(y,2,y,0,L-1),y[L-1]=0,y[L]=0,L--}else L++;y[L]=1,K=!K}return L===z-1&&pt.patternMatchVariance(y,p,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE?new Int32Array([_,j-1]):null}static patternMatchVariance(t,r,l){let d=t.length,g=0,p=0;for(let E=0;E<d;E++)g+=t[E],p+=r[E];if(g<p)return 1/0;let y=g/p;l*=y;let _=0;for(let E=0;E<d;E++){let j=t[E],L=r[E]*y,z=j>L?j-L:L-j;if(z>l)return 1/0;_+=z}return _/g}}pt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),pt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),pt.MAX_AVG_VARIANCE=.42,pt.MAX_INDIVIDUAL_VARIANCE=.8,pt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),pt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),pt.MAX_PIXEL_DRIFT=3,pt.MAX_PATTERN_DRIFT=5,pt.SKIPPED_ROW_COUNT_MAX=25,pt.ROW_STEP=5,pt.BARCODE_MIN_HEIGHT=10;class gn{constructor(t,r){if(r.length===0)throw new N;this.field=t;let l=r.length;if(l>1&&r[0]===0){let d=1;for(;d<l&&r[d]===0;)d++;d===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-d),D.arraycopy(r,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let d=0;for(let g of this.coefficients)d=this.field.add(d,g);return d}let r=this.coefficients[0],l=this.coefficients.length;for(let d=1;d<l;d++)r=this.field.add(this.field.multiply(t,r),this.coefficients[d]);return r}add(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,l=t.coefficients;if(r.length>l.length){let p=r;r=l,l=p}let d=new Int32Array(l.length),g=l.length-r.length;D.arraycopy(l,0,d,0,g);for(let p=g;p<l.length;p++)d[p]=this.field.add(r[p-g],l[p]);return new gn(this.field,d)}subtract(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof gn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new gn(this.field,new Int32Array([0]));let r=this.coefficients,l=r.length,d=t.coefficients,g=d.length,p=new Int32Array(l+g-1);for(let y=0;y<l;y++){let _=r[y];for(let E=0;E<g;E++)p[y+E]=this.field.add(p[y+E],this.field.multiply(_,d[E]))}return new gn(this.field,p)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let l=0;l<t;l++)r[l]=this.field.subtract(0,this.coefficients[l]);return new gn(this.field,r)}multiplyScalar(t){if(t===0)return new gn(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,l=new Int32Array(r);for(let d=0;d<r;d++)l[d]=this.field.multiply(this.coefficients[d],t);return new gn(this.field,l)}multiplyByMonomial(t,r){if(t<0)throw new N;if(r===0)return new gn(this.field,new Int32Array([0]));let l=this.coefficients.length,d=new Int32Array(l+t);for(let g=0;g<l;g++)d[g]=this.field.multiply(this.coefficients[g],r);return new gn(this.field,d)}toString(){let t=new Ce;for(let r=this.getDegree();r>=0;r--){let l=this.getCoefficient(r);l!==0&&(l<0?(t.append(" - "),l=-l):t.length()>0&&t.append(" + "),(r===0||l!==1)&&t.append(l),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class Jo{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new N;return this.logTable[t]}inverse(t){if(t===0)throw new Wt;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Wa extends Jo{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let l=1;for(let d=0;d<t;d++)this.expTable[d]=l,l=l*r%t;for(let d=0;d<t-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new gn(this,new Int32Array([0])),this.one=new gn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new N;if(r===0)return this.zero;let l=new Int32Array(t+1);return l[0]=r,new gn(this,l)}}Wa.PDF417_GF=new Wa(it.NUMBER_OF_CODEWORDS,3);class Ea{constructor(){this.field=Wa.PDF417_GF}decode(t,r,l){let d=new gn(this.field,t),g=new Int32Array(r),p=!1;for(let te=r;te>0;te--){let se=d.evaluateAt(this.field.exp(te));g[r-te]=se,se!==0&&(p=!0)}if(!p)return 0;let y=this.field.getOne();if(l!=null)for(const te of l){let se=this.field.exp(t.length-1-te),oe=new gn(this.field,new Int32Array([this.field.subtract(0,se),1]));y=y.multiply(oe)}let _=new gn(this.field,g),E=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),_,r),j=E[0],L=E[1],z=this.findErrorLocations(j),K=this.findErrorMagnitudes(L,j,z);for(let te=0;te<z.length;te++){let se=t.length-1-this.field.log(z[te]);if(se<0)throw T.getChecksumInstance();t[se]=this.field.subtract(t[se],K[te])}return z.length}runEuclideanAlgorithm(t,r,l){if(t.getDegree()<r.getDegree()){let z=t;t=r,r=z}let d=t,g=r,p=this.field.getZero(),y=this.field.getOne();for(;g.getDegree()>=Math.round(l/2);){let z=d,K=p;if(d=g,p=y,d.isZero())throw T.getChecksumInstance();g=z;let te=this.field.getZero(),se=d.getCoefficient(d.getDegree()),oe=this.field.inverse(se);for(;g.getDegree()>=d.getDegree()&&!g.isZero();){let fe=g.getDegree()-d.getDegree(),Pe=this.field.multiply(g.getCoefficient(g.getDegree()),oe);te=te.add(this.field.buildMonomial(fe,Pe)),g=g.subtract(d.multiplyByMonomial(fe,Pe))}y=te.multiply(p).subtract(K).negative()}let _=y.getCoefficient(0);if(_===0)throw T.getChecksumInstance();let E=this.field.inverse(_),j=y.multiply(E),L=g.multiply(E);return[j,L]}findErrorLocations(t){let r=t.getDegree(),l=new Int32Array(r),d=0;for(let g=1;g<this.field.getSize()&&d<r;g++)t.evaluateAt(g)===0&&(l[d]=this.field.inverse(g),d++);if(d!==r)throw T.getChecksumInstance();return l}findErrorMagnitudes(t,r,l){let d=r.getDegree(),g=new Int32Array(d);for(let E=1;E<=d;E++)g[d-E]=this.field.multiply(E,r.getCoefficient(E));let p=new gn(this.field,g),y=l.length,_=new Int32Array(y);for(let E=0;E<y;E++){let j=this.field.inverse(l[E]),L=this.field.subtract(0,t.evaluateAt(j)),z=this.field.inverse(p.evaluateAt(j));_[E]=this.field.multiply(L,z)}return _}}class Aa{constructor(t,r,l,d,g){t instanceof Aa?this.constructor_2(t):this.constructor_1(t,r,l,d,g)}constructor_1(t,r,l,d,g){const p=r==null||l==null,y=d==null||g==null;if(p&&y)throw new V;p?(r=new ze(0,d.getY()),l=new ze(0,g.getY())):y&&(d=new ze(t.getWidth()-1,r.getY()),g=new ze(t.getWidth()-1,l.getY())),this.image=t,this.topLeft=r,this.bottomLeft=l,this.topRight=d,this.bottomRight=g,this.minX=Math.trunc(Math.min(r.getX(),l.getX())),this.maxX=Math.trunc(Math.max(d.getX(),g.getX())),this.minY=Math.trunc(Math.min(r.getY(),d.getY())),this.maxY=Math.trunc(Math.max(l.getY(),g.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new Aa(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,l){let d=this.topLeft,g=this.bottomLeft,p=this.topRight,y=this.bottomRight;if(t>0){let _=l?this.topLeft:this.topRight,E=Math.trunc(_.getY()-t);E<0&&(E=0);let j=new ze(_.getX(),E);l?d=j:p=j}if(r>0){let _=l?this.bottomLeft:this.bottomRight,E=Math.trunc(_.getY()+r);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let j=new ze(_.getX(),E);l?g=j:y=j}return new Aa(this.image,d,g,p,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ki{constructor(t,r,l,d){this.columnCount=t,this.errorCorrectionLevel=d,this.rowCountUpperPart=r,this.rowCountLowerPart=l,this.rowCount=r+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class jr{constructor(){this.buffer=""}static form(t,r){let l=-1;function d(p,y,_,E,j,L){if(p==="%%")return"%";if(r[++l]===void 0)return;p=E?parseInt(E.substr(1)):void 0;let z=j?parseInt(j.substr(1)):void 0,K;switch(L){case"s":K=r[l];break;case"c":K=r[l][0];break;case"f":K=parseFloat(r[l]).toFixed(p);break;case"p":K=parseFloat(r[l]).toPrecision(p);break;case"e":K=parseFloat(r[l]).toExponential(p);break;case"x":K=parseInt(r[l]).toString(z||16);break;case"d":K=parseFloat(parseInt(r[l],z||10).toPrecision(p)).toFixed(0);break}K=typeof K=="object"?JSON.stringify(K):(+K).toString(z);let te=parseInt(_),se=_&&_[0]+""=="0"?"0":" ";for(;K.length<te;)K=y!==void 0?K+se:se+K;return K}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(g,d)}format(t,...r){this.buffer+=jr.form(t,r)}toString(){return this.buffer}}class Ba{constructor(t){this.boundingBox=new Aa(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let l=1;l<Ba.MAX_NEARBY_DISTANCE;l++){let d=this.imageRowToCodewordIndex(t)-l;if(d>=0&&(r=this.codewords[d],r!=null)||(d=this.imageRowToCodewordIndex(t)+l,d<this.codewords.length&&(r=this.codewords[d],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new jr;let r=0;for(const l of this.codewords){if(l==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,l.getRowNumber(),l.getValue())}return t.toString()}}Ba.MAX_NEARBY_DISTANCE=5;class Ua{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[l,d]of this.values.entries()){const g={getKey:()=>l,getValue:()=>d};g.getValue()>t?(t=g.getValue(),r=[],r.push(g.getKey())):g.getValue()===t&&r.push(g.getKey())}return it.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class el extends Ba{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let l=this.getBoundingBox(),d=this._isLeft?l.getTopLeft():l.getTopRight(),g=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=this.imageRowToCodewordIndex(Math.trunc(g.getY())),_=-1,E=1,j=0;for(let L=p;L<y;L++){if(r[L]==null)continue;let z=r[L],K=z.getRowNumber()-_;if(K===0)j++;else if(K===1)E=Math.max(E,j),j=1,_=z.getRowNumber();else if(K<0||z.getRowNumber()>=t.getRowCount()||K>L)r[L]=null;else{let te;E>2?te=(E-2)*K:te=K;let se=te>=L;for(let oe=1;oe<=te&&!se;oe++)se=r[L-oe]!=null;se?r[L]=null:(_=z.getRowNumber(),j=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let l of this.getCodewords())if(l!=null){let d=l.getRowNumber();if(d>=r.length)continue;r[d]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),l=this._isLeft?r.getTopLeft():r.getTopRight(),d=this._isLeft?r.getBottomLeft():r.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),y=this.getCodewords(),_=-1;for(let E=g;E<p;E++){if(y[E]==null)continue;let j=y[E];j.setRowNumberAsRowIndicatorColumn();let L=j.getRowNumber()-_;L===0||(L===1?_=j.getRowNumber():j.getRowNumber()>=t.getRowCount()?y[E]=null:_=j.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new Ua,l=new Ua,d=new Ua,g=new Ua;for(let y of t){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let _=y.getValue()%30,E=y.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:l.setValue(_*3+1);break;case 1:g.setValue(_/3),d.setValue(_%3);break;case 2:r.setValue(_+1);break}}if(r.getValue().length===0||l.getValue().length===0||d.getValue().length===0||g.getValue().length===0||r.getValue()[0]<1||l.getValue()[0]+d.getValue()[0]<it.MIN_ROWS_IN_BARCODE||l.getValue()[0]+d.getValue()[0]>it.MAX_ROWS_IN_BARCODE)return null;let p=new Ki(r.getValue()[0],l.getValue()[0],d.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(t,p),p}removeIncorrectCodewords(t,r){for(let l=0;l<t.length;l++){let d=t[l];if(t[l]==null)continue;let g=d.getValue()%30,p=d.getRowNumber();if(p>r.getRowCount()){t[l]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:g*3+1!==r.getRowCountUpperPart()&&(t[l]=null);break;case 1:(Math.trunc(g/3)!==r.getErrorCorrectionLevel()||g%3!==r.getRowCountLowerPart())&&(t[l]=null);break;case 2:g+1!==r.getColumnCount()&&(t[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Qn{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=it.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let l=this.detectionResultColumns[r].getCodewords();for(let d=0;d<l.length;d++)l[d]!=null&&(l[d].hasValidRowNumber()||this.adjustRowNumbers(r,d,l))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<t.length;l++)if(t[l]!=null&&r[l]!=null&&t[l].getRowNumber()===r[l].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let g=this.detectionResultColumns[d].getCodewords()[l];g!=null&&(g.setRowNumber(t[l].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++){if(r[l]==null)continue;let d=r[l].getRowNumber(),g=0;for(let p=this.barcodeColumnCount+1;p>0&&g<this.ADJUST_ROW_NUMBER_SKIP;p--){let y=this.detectionResultColumns[p].getCodewords()[l];y!=null&&(g=Qn.adjustRowNumberIfValid(d,g,y),y.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let l=0;l<r.length;l++){if(r[l]==null)continue;let d=r[l].getRowNumber(),g=0;for(let p=1;p<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;p++){let y=this.detectionResultColumns[p].getCodewords()[l];y!=null&&(g=Qn.adjustRowNumberIfValid(d,g,y),y.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(t)?(l.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,l){if(!this.detectionResultColumns[t-1])return;let d=l[r],g=this.detectionResultColumns[t-1].getCodewords(),p=g;this.detectionResultColumns[t+1]!=null&&(p=this.detectionResultColumns[t+1].getCodewords());let y=new Array(14);y[2]=g[r],y[3]=p[r],r>0&&(y[0]=l[r-1],y[4]=g[r-1],y[5]=p[r-1]),r>1&&(y[8]=l[r-2],y[10]=g[r-2],y[11]=p[r-2]),r<l.length-1&&(y[1]=l[r+1],y[6]=g[r+1],y[7]=p[r+1]),r<l.length-2&&(y[9]=l[r+2],y[12]=g[r+2],y[13]=p[r+2]);for(let _ of y)if(Qn.adjustRowNumber(d,_))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new jr;for(let l=0;l<t.getCodewords().length;l++){r.format("CW %3d:",l);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){r.format("    |   ");continue}let g=this.detectionResultColumns[d].getCodewords()[l];if(g==null){r.format("    |   ");continue}r.format(" %3d|%3d",g.getRowNumber(),g.getValue())}r.format("%n")}return r.toString()}}class Xs{constructor(t,r,l,d){this.rowNumber=Xs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(l),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Xs.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Xs.BARCODE_ROW_UNKNOWN=-1;class ss{static initialize(){for(let t=0;t<it.SYMBOL_TABLE.length;t++){let r=it.SYMBOL_TABLE[t],l=r&1;for(let d=0;d<it.BARS_IN_MODULE;d++){let g=0;for(;(r&1)===l;)g+=1,r>>=1;l=r&1,ss.RATIOS_TABLE[t]||(ss.RATIOS_TABLE[t]=new Array(it.BARS_IN_MODULE)),ss.RATIOS_TABLE[t][it.BARS_IN_MODULE-d-1]=Math.fround(g/it.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=ss.getDecodedCodewordValue(ss.sampleBitCounts(t));return r!==-1?r:ss.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=ht.sum(t),l=new Int32Array(it.BARS_IN_MODULE),d=0,g=0;for(let p=0;p<it.MODULES_IN_CODEWORD;p++){let y=r/(2*it.MODULES_IN_CODEWORD)+p*r/it.MODULES_IN_CODEWORD;g+t[d]<=y&&(g+=t[d],d++),l[d]++}return l}static getDecodedCodewordValue(t){let r=ss.getBitValue(t);return it.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let l=0;l<t.length;l++)for(let d=0;d<t[l];d++)r=r<<1|(l%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=ht.sum(t),l=new Array(it.BARS_IN_MODULE);if(r>1)for(let p=0;p<l.length;p++)l[p]=Math.fround(t[p]/r);let d=Hn.MAX_VALUE,g=-1;this.bSymbolTableReady||ss.initialize();for(let p=0;p<ss.RATIOS_TABLE.length;p++){let y=0,_=ss.RATIOS_TABLE[p];for(let E=0;E<it.BARS_IN_MODULE;E++){let j=Math.fround(_[E]-l[E]);if(y+=Math.fround(j*j),y>=d)break}y<d&&(d=y,g=it.SYMBOL_TABLE[p])}return g}}ss.bSymbolTableReady=!1,ss.RATIOS_TABLE=new Array(it.SYMBOL_TABLE.length).map(k=>new Array(it.BARS_IN_MODULE));class Rr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class ic{static parseLong(t,r=void 0){return parseInt(t,r)}}class Zi extends w{}Zi.kind="NullPointerException";class tl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,l){if(t==null)throw new Zi;if(r<0||r>t.length||l<0||r+l>t.length||r+l<0)throw new U;if(l===0)return;for(let d=0;d<l;d++)this.write(t[r+d])}flush(){}close(){}}class mi extends w{}class $i extends tl{constructor(t=32){if(super(),this.count=0,t<0)throw new N("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let l=this.buf.length<<1;if(l-t<0&&(l=t),l<0){if(t<0)throw new mi;l=P.MAX_VALUE}this.buf=B.copyOfUint8Array(this.buf,l)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,l){if(r<0||r>t.length||l<0||r+l-t.length>0)throw new U;this.ensureCapacity(this.count+l),D.arraycopy(t,r,this.buf,this.count,l),this.count+=l}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return B.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var $t;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function oc(){if(typeof window<"u")return window.BigInt||null;if(typeof yu<"u")return yu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ji;function Pa(k){if(typeof Ji>"u"&&(Ji=oc()),Ji===null)throw new Error("BigInt is not supported!");return Ji(k)}function nl(){let k=[];k[0]=Pa(1);let t=Pa(900);k[1]=t;for(let r=2;r<16;r++)k[r]=k[r-1]*t;return k}class ge{static decode(t,r){let l=new Ce(""),d=q.ISO8859_1;l.enableDecoding(d);let g=1,p=t[g++],y=new Rr;for(;g<t[0];){switch(p){case ge.TEXT_COMPACTION_MODE_LATCH:g=ge.textCompaction(t,g,l);break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:g=ge.byteCompaction(p,t,d,g,l);break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(t[g++]);break;case ge.NUMERIC_COMPACTION_MODE_LATCH:g=ge.numericCompaction(t,g,l);break;case ge.ECI_CHARSET:q.getCharacterSetECIByValue(t[g++]);break;case ge.ECI_GENERAL_PURPOSE:g+=2;break;case ge.ECI_USER_DEFINED:g++;break;case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=ge.decodeMacroBlock(t,g,y);break;case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:throw new X;default:g--,g=ge.textCompaction(t,g,l);break}if(g<t.length)p=t[g++];else throw X.getFormatInstance()}if(l.length()===0)throw X.getFormatInstance();let _=new ve(null,l.toString(),null,r);return _.setOther(y),_}static decodeMacroBlock(t,r,l){if(r+ge.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw X.getFormatInstance();let d=new Int32Array(ge.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<ge.NUMBER_OF_SEQUENCE_CODEWORDS;y++,r++)d[y]=t[r];l.setSegmentIndex(P.parseInt(ge.decodeBase900toBase10(d,ge.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new Ce;r=ge.textCompaction(t,r,g),l.setFileId(g.toString());let p=-1;for(t[r]===ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=r+1);r<t[0];)switch(t[r]){case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new Ce;r=ge.textCompaction(t,r+1,y),l.setFileName(y.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new Ce;r=ge.textCompaction(t,r+1,_),l.setSender(_.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new Ce;r=ge.textCompaction(t,r+1,E),l.setAddressee(E.toString());break;case ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let j=new Ce;r=ge.numericCompaction(t,r+1,j),l.setSegmentCount(P.parseInt(j.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new Ce;r=ge.numericCompaction(t,r+1,L),l.setTimestamp(ic.parseLong(L.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let z=new Ce;r=ge.numericCompaction(t,r+1,z),l.setChecksum(P.parseInt(z.toString()));break;case ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let K=new Ce;r=ge.numericCompaction(t,r+1,K),l.setFileSize(ic.parseLong(K.toString()));break;default:throw X.getFormatInstance()}break;case ge.MACRO_PDF417_TERMINATOR:r++,l.setLastSegment(!0);break;default:throw X.getFormatInstance()}if(p!==-1){let y=r-p;l.isLastSegment()&&y--,l.setOptionalData(B.copyOfRange(t,p,p+y))}return r}static textCompaction(t,r,l){let d=new Int32Array((t[0]-r)*2),g=new Int32Array((t[0]-r)*2),p=0,y=!1;for(;r<t[0]&&!y;){let _=t[r++];if(_<ge.TEXT_COMPACTION_MODE_LATCH)d[p]=_/30,d[p+1]=_%30,p+=2;else switch(_){case ge.TEXT_COMPACTION_MODE_LATCH:d[p++]=ge.TEXT_COMPACTION_MODE_LATCH;break;case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:r--,y=!0;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[p]=ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=t[r++],g[p]=_,p++;break}}return ge.decodeTextCompaction(d,g,p,l),r}static decodeTextCompaction(t,r,l,d){let g=$t.ALPHA,p=$t.ALPHA,y=0;for(;y<l;){let _=t[y],E="";switch(g){case $t.ALPHA:if(_<26)E=String.fromCharCode(65+_);else switch(_){case 26:E=" ";break;case ge.LL:g=$t.LOWER;break;case ge.ML:g=$t.MIXED;break;case ge.PS:p=g,g=$t.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(r[y]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.LOWER:if(_<26)E=String.fromCharCode(97+_);else switch(_){case 26:E=" ";break;case ge.AS:p=g,g=$t.ALPHA_SHIFT;break;case ge.ML:g=$t.MIXED;break;case ge.PS:p=g,g=$t.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(r[y]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.MIXED:if(_<ge.PL)E=ge.MIXED_CHARS[_];else switch(_){case ge.PL:g=$t.PUNCT;break;case 26:E=" ";break;case ge.LL:g=$t.LOWER;break;case ge.AL:g=$t.ALPHA;break;case ge.PS:p=g,g=$t.PUNCT_SHIFT;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(r[y]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.PUNCT:if(_<ge.PAL)E=ge.PUNCT_CHARS[_];else switch(_){case ge.PAL:g=$t.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(r[y]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(g=p,_<26)E=String.fromCharCode(65+_);else switch(_){case 26:E=" ";break;case ge.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(g=p,_<ge.PAL)E=ge.PUNCT_CHARS[_];else switch(_){case ge.PAL:g=$t.ALPHA;break;case ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(r[y]);break;case ge.TEXT_COMPACTION_MODE_LATCH:g=$t.ALPHA;break}break}E!==""&&d.append(E),y++}}static byteCompaction(t,r,l,d,g){let p=new $i,y=0,_=0,E=!1;switch(t){case ge.BYTE_COMPACTION_MODE_LATCH:let j=new Int32Array(6),L=r[d++];for(;d<r[0]&&!E;)switch(j[y++]=L,_=900*_+L,L=r[d++],L){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:d--,E=!0;break;default:if(y%5===0&&y>0){for(let z=0;z<6;++z)p.write(Number(Pa(_)>>Pa(8*(5-z))));_=0,y=0}break}d===r[0]&&L<ge.TEXT_COMPACTION_MODE_LATCH&&(j[y++]=L);for(let z=0;z<y;z++)p.write(j[z]);break;case ge.BYTE_COMPACTION_MODE_LATCH_6:for(;d<r[0]&&!E;){let z=r[d++];if(z<ge.TEXT_COMPACTION_MODE_LATCH)y++,_=900*_+z;else switch(z){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.NUMERIC_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:d--,E=!0;break}if(y%5===0&&y>0){for(let K=0;K<6;++K)p.write(Number(Pa(_)>>Pa(8*(5-K))));_=0,y=0}}break}return g.append(we.decode(p.toByteArray(),l)),d}static numericCompaction(t,r,l){let d=0,g=!1,p=new Int32Array(ge.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!g;){let y=t[r++];if(r===t[0]&&(g=!0),y<ge.TEXT_COMPACTION_MODE_LATCH)p[d]=y,d++;else switch(y){case ge.TEXT_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH:case ge.BYTE_COMPACTION_MODE_LATCH_6:case ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ge.MACRO_PDF417_TERMINATOR:r--,g=!0;break}(d%ge.MAX_NUMERIC_CODEWORDS===0||y===ge.NUMERIC_COMPACTION_MODE_LATCH||g)&&d>0&&(l.append(ge.decodeBase900toBase10(p,d)),d=0)}return r}static decodeBase900toBase10(t,r){let l=Pa(0);for(let g=0;g<r;g++)l+=ge.EXP900[r-g-1]*Pa(t[g]);let d=l.toString();if(d.charAt(0)!=="1")throw new X;return d.substring(1)}}ge.TEXT_COMPACTION_MODE_LATCH=900,ge.BYTE_COMPACTION_MODE_LATCH=901,ge.NUMERIC_COMPACTION_MODE_LATCH=902,ge.BYTE_COMPACTION_MODE_LATCH_6=924,ge.ECI_USER_DEFINED=925,ge.ECI_GENERAL_PURPOSE=926,ge.ECI_CHARSET=927,ge.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ge.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ge.MACRO_PDF417_TERMINATOR=922,ge.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ge.MAX_NUMERIC_CODEWORDS=15,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ge.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ge.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ge.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ge.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ge.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ge.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ge.PL=25,ge.LL=27,ge.AS=27,ge.ML=28,ge.AL=28,ge.PS=29,ge.PAL=29,ge.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ge.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ge.EXP900=oc()?nl():[],ge.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(t,r,l,d,g,p,y){let _=new Aa(t,r,l,d,g),E=null,j=null,L;for(let te=!0;;te=!1){if(r!=null&&(E=_t.getRowIndicatorColumn(t,_,r,!0,p,y)),d!=null&&(j=_t.getRowIndicatorColumn(t,_,d,!1,p,y)),L=_t.merge(E,j),L==null)throw V.getNotFoundInstance();let se=L.getBoundingBox();if(te&&se!=null&&(se.getMinY()<_.getMinY()||se.getMaxY()>_.getMaxY()))_=se;else break}L.setBoundingBox(_);let z=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,E),L.setDetectionResultColumn(z,j);let K=E!=null;for(let te=1;te<=z;te++){let se=K?te:z-te;if(L.getDetectionResultColumn(se)!==void 0)continue;let oe;se===0||se===z?oe=new el(_,se===0):oe=new Ba(_),L.setDetectionResultColumn(se,oe);let fe=-1,Pe=fe;for(let Be=_.getMinY();Be<=_.getMaxY();Be++){if(fe=_t.getStartColumn(L,se,Be,K),fe<0||fe>_.getMaxX()){if(Pe===-1)continue;fe=Pe}let Ie=_t.detectCodeword(t,_.getMinX(),_.getMaxX(),K,fe,Be,p,y);Ie!=null&&(oe.setCodeword(Be,Ie),Pe=fe,p=Math.min(p,Ie.getWidth()),y=Math.max(y,Ie.getWidth()))}}return _t.createDecoderResult(L)}static merge(t,r){if(t==null&&r==null)return null;let l=_t.getBarcodeMetadata(t,r);if(l==null)return null;let d=Aa.merge(_t.adjustBoundingBox(t),_t.adjustBoundingBox(r));return new Qn(l,d)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let l=_t.getMax(r),d=0;for(let y of r)if(d+=l-y,y>0)break;let g=t.getCodewords();for(let y=0;d>0&&g[y]==null;y++)d--;let p=0;for(let y=r.length-1;y>=0&&(p+=l-r[y],!(r[y]>0));y--);for(let y=g.length-1;p>0&&g[y]==null;y--)p--;return t.getBoundingBox().addMissingRows(d,p,t.isLeft())}static getMax(t){let r=-1;for(let l of t)r=Math.max(r,l);return r}static getBarcodeMetadata(t,r){let l;if(t==null||(l=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let d;return r==null||(d=r.getBarcodeMetadata())==null?l:l.getColumnCount()!==d.getColumnCount()&&l.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&l.getRowCount()!==d.getRowCount()?null:l}static getRowIndicatorColumn(t,r,l,d,g,p){let y=new el(r,d);for(let _=0;_<2;_++){let E=_===0?1:-1,j=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=r.getMaxY()&&L>=r.getMinY();L+=E){let z=_t.detectCodeword(t,0,t.getWidth(),d,j,L,g,p);z!=null&&(y.setCodeword(L,z),d?j=z.getStartX():j=z.getEndX())}}return y}static adjustCodewordCount(t,r){let l=r[0][1],d=l.getValue(),g=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-_t.getNumberOfECCodeWords(t.getBarcodeECLevel());if(d.length===0){if(g<1||g>it.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();l.setValue(g)}else d[0]!==g&&l.setValue(g)}static createDecoderResult(t){let r=_t.createBarcodeMatrix(t);_t.adjustCodewordCount(t,r);let l=new Array,d=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),g=[],p=new Array;for(let _=0;_<t.getBarcodeRowCount();_++)for(let E=0;E<t.getBarcodeColumnCount();E++){let j=r[_][E+1].getValue(),L=_*t.getBarcodeColumnCount()+E;j.length===0?l.push(L):j.length===1?d[L]=j[0]:(p.push(L),g.push(j))}let y=new Array(g.length);for(let _=0;_<y.length;_++)y[_]=g[_];return _t.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),d,it.toIntArray(l),it.toIntArray(p),y)}static createDecoderResultFromAmbiguousValues(t,r,l,d,g){let p=new Int32Array(d.length),y=100;for(;y-- >0;){for(let _=0;_<p.length;_++)r[d[_]]=g[_][p[_]];try{return _t.decodeCodewords(r,t,l)}catch(_){if(!(_ instanceof T))throw _}if(p.length===0)throw T.getChecksumInstance();for(let _=0;_<p.length;_++)if(p[_]<g[_].length-1){p[_]++;break}else if(p[_]=0,_===p.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let d=0;d<r.length;d++)for(let g=0;g<r[d].length;g++)r[d][g]=new Ua;let l=0;for(let d of t.getDetectionResultColumns()){if(d!=null){for(let g of d.getCodewords())if(g!=null){let p=g.getRowNumber();if(p>=0){if(p>=r.length)continue;r[p][l].setValue(g.getValue())}}}l++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,l,d){let g=d?1:-1,p=null;if(_t.isValidBarcodeColumn(t,r-g)&&(p=t.getDetectionResultColumn(r-g).getCodeword(l)),p!=null)return d?p.getEndX():p.getStartX();if(p=t.getDetectionResultColumn(r).getCodewordNearby(l),p!=null)return d?p.getStartX():p.getEndX();if(_t.isValidBarcodeColumn(t,r-g)&&(p=t.getDetectionResultColumn(r-g).getCodewordNearby(l)),p!=null)return d?p.getEndX():p.getStartX();let y=0;for(;_t.isValidBarcodeColumn(t,r-g);){r-=g;for(let _ of t.getDetectionResultColumn(r).getCodewords())if(_!=null)return(d?_.getEndX():_.getStartX())+g*y*(_.getEndX()-_.getStartX());y++}return d?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,l,d,g,p,y,_){g=_t.adjustCodewordStartColumn(t,r,l,d,g,p);let E=_t.getModuleBitCount(t,r,l,d,g,p);if(E==null)return null;let j,L=ht.sum(E);if(d)j=g+L;else{for(let te=0;te<E.length/2;te++){let se=E[te];E[te]=E[E.length-1-te],E[E.length-1-te]=se}j=g,g=j-L}if(!_t.checkCodewordSkew(L,y,_))return null;let z=ss.getDecodedValue(E),K=it.getCodeword(z);return K===-1?null:new Xs(g,j,_t.getCodewordBucketNumber(z),K)}static getModuleBitCount(t,r,l,d,g,p){let y=g,_=new Int32Array(8),E=0,j=d?1:-1,L=d;for(;(d?y<l:y>=r)&&E<_.length;)t.get(y,p)===L?(_[E]++,y+=j):(E++,L=!L);return E===_.length||y===(d?l:r)&&E===_.length-1?_:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,l,d,g,p){let y=g,_=d?-1:1;for(let E=0;E<2;E++){for(;(d?y>=r:y<l)&&d===t.get(y,p);){if(Math.abs(g-y)>_t.CODEWORD_SKEW_SIZE)return g;y+=_}_=-_,d=!d}return y}static checkCodewordSkew(t,r,l){return r-_t.CODEWORD_SKEW_SIZE<=t&&t<=l+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,l){if(t.length===0)throw X.getFormatInstance();let d=1<<r+1,g=_t.correctErrors(t,l,d);_t.verifyCodewordCount(t,d);let p=ge.decode(t,""+r);return p.setErrorsCorrected(g),p.setErasures(l.length),p}static correctErrors(t,r,l){if(r!=null&&r.length>l/2+_t.MAX_ERRORS||l<0||l>_t.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return _t.errorCorrection.decode(t,l,r)}static verifyCodewordCount(t,r){if(t.length<4)throw X.getFormatInstance();let l=t[0];if(l>t.length)throw X.getFormatInstance();if(l===0)if(r<t.length)t[0]=t.length-r;else throw X.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),l=0,d=r.length-1;for(;!((t&1)!==l&&(l=t&1,d--,d<0));)r[d]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new jr;for(let l=0;l<t.length;l++){r.format("Row %2d: ",l);for(let d=0;d<t[l].length;d++){let g=t[l][d];g.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}r.format("%n")}return r.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new Ea;class as{decode(t,r=null){let l=as.decode(t,r,!1);if(l==null||l.length===0||l[0]==null)throw V.getNotFoundInstance();return l[0]}decodeMultiple(t,r=null){try{return as.decode(t,r,!0)}catch(l){throw l instanceof X||l instanceof T?V.getNotFoundInstance():l}}static decode(t,r,l){const d=new Array,g=pt.detectMultiple(t,r,l);for(const p of g.getPoints()){const y=_t.decode(g.getBits(),p[4],p[5],p[6],p[7],as.getMinCodewordWidth(p),as.getMaxCodewordWidth(p)),_=new Ue(y.getText(),y.getRawBytes(),void 0,p,Ne.PDF_417);_.putMetadata(De.ERROR_CORRECTION_LEVEL,y.getECLevel());const E=y.getOther();E!=null&&_.putMetadata(De.PDF417_EXTRA_METADATA,E),d.push(_)}return d.map(p=>p)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?P.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(as.getMaxWidth(t[0],t[4]),as.getMaxWidth(t[6],t[2])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN),Math.max(as.getMaxWidth(t[1],t[5]),as.getMaxWidth(t[7],t[3])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(as.getMinWidth(t[0],t[4]),as.getMinWidth(t[6],t[2])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN),Math.min(as.getMinWidth(t[1],t[5]),as.getMinWidth(t[7],t[3])*it.MODULES_IN_CODEWORD/it.MODULES_IN_STOP_PATTERN)))}reset(){}}class eo extends w{}eo.kind="ReaderException";class lc{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!c(t)&&t.get(Y.TRY_HARDER)===!0,l=c(t)?null:t.get(Y.POSSIBLE_FORMATS),d=new Array;if(!c(l)){const g=l.some(p=>p===Ne.UPC_A||p===Ne.UPC_E||p===Ne.EAN_13||p===Ne.EAN_8||p===Ne.CODABAR||p===Ne.CODE_39||p===Ne.CODE_93||p===Ne.CODE_128||p===Ne.ITF||p===Ne.RSS_14||p===Ne.RSS_EXPANDED);g&&!r&&d.push(new Gs(t,this.verbose)),l.includes(Ne.QR_CODE)&&d.push(new Sa),l.includes(Ne.DATA_MATRIX)&&d.push(new _a),l.includes(Ne.AZTEC)&&d.push(new jn),l.includes(Ne.PDF_417)&&d.push(new as),g&&r&&d.push(new Gs(t,this.verbose))}d.length===0&&(r||d.push(new Gs(t,this.verbose)),d.push(new Sa),d.push(new _a),d.push(new jn),d.push(new as),r&&d.push(new Gs(t,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new eo("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(l){if(l instanceof eo)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class cc extends Le{constructor(t=null,r=500){const l=new lc;l.setHints(t),super(l,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class ad extends Le{constructor(t=500){super(new as,t)}}class rd extends Le{constructor(t=500){super(new Sa,t)}}var sl;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(sl||(sl={}));var Gn=sl;class pi{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new mt(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let l=r[r.length-1];const d=this.field;for(let g=r.length;g<=t;g++){const p=l.multiply(new mt(d,Int32Array.from([1,d.exp(g-1+d.getGeneratorBase())])));r.push(p),l=p}}return r[t]}encode(t,r){if(r===0)throw new N("No error correction bytes");const l=t.length-r;if(l<=0)throw new N("No data bytes provided");const d=this.buildGenerator(r),g=new Int32Array(l);D.arraycopy(t,0,g,0,l);let p=new mt(this.field,g);p=p.multiplyByMonomial(r,1);const _=p.divide(d)[1].getCoefficients(),E=r-_.length;for(let j=0;j<E;j++)t[l+j]=0;D.arraycopy(_,0,t,l+E,_.length)}}class En{constructor(){}static applyMaskPenaltyRule1(t){return En.applyMaskPenaltyRule1Internal(t,!0)+En.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const l=t.getArray(),d=t.getWidth(),g=t.getHeight();for(let p=0;p<g-1;p++){const y=l[p];for(let _=0;_<d-1;_++){const E=y[_];E===y[_+1]&&E===l[p+1][_]&&E===l[p+1][_+1]&&r++}}return En.N2*r}static applyMaskPenaltyRule3(t){let r=0;const l=t.getArray(),d=t.getWidth(),g=t.getHeight();for(let p=0;p<g;p++)for(let y=0;y<d;y++){const _=l[p];y+6<d&&_[y]===1&&_[y+1]===0&&_[y+2]===1&&_[y+3]===1&&_[y+4]===1&&_[y+5]===0&&_[y+6]===1&&(En.isWhiteHorizontal(_,y-4,y)||En.isWhiteHorizontal(_,y+7,y+11))&&r++,p+6<g&&l[p][y]===1&&l[p+1][y]===0&&l[p+2][y]===1&&l[p+3][y]===1&&l[p+4][y]===1&&l[p+5][y]===0&&l[p+6][y]===1&&(En.isWhiteVertical(l,y,p-4,p)||En.isWhiteVertical(l,y,p+7,p+11))&&r++}return r*En.N3}static isWhiteHorizontal(t,r,l){r=Math.max(r,0),l=Math.min(l,t.length);for(let d=r;d<l;d++)if(t[d]===1)return!1;return!0}static isWhiteVertical(t,r,l,d){l=Math.max(l,0),d=Math.min(d,t.length);for(let g=l;g<d;g++)if(t[g][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const l=t.getArray(),d=t.getWidth(),g=t.getHeight();for(let _=0;_<g;_++){const E=l[_];for(let j=0;j<d;j++)E[j]===1&&r++}const p=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-p)*10/p)*En.N4}static getDataMaskBit(t,r,l){let d,g;switch(t){case 0:d=l+r&1;break;case 1:d=l&1;break;case 2:d=r%3;break;case 3:d=(l+r)%3;break;case 4:d=Math.floor(l/2)+Math.floor(r/3)&1;break;case 5:g=l*r,d=(g&1)+g%3;break;case 6:g=l*r,d=(g&1)+g%3&1;break;case 7:g=l*r,d=g%3+(l+r&1)&1;break;default:throw new N("Invalid mask pattern: "+t)}return d===0}static applyMaskPenaltyRule1Internal(t,r){let l=0;const d=r?t.getHeight():t.getWidth(),g=r?t.getWidth():t.getHeight(),p=t.getArray();for(let y=0;y<d;y++){let _=0,E=-1;for(let j=0;j<g;j++){const L=r?p[y][j]:p[j][y];L===E?_++:(_>=5&&(l+=En.N1+(_-5)),_=1,E=L)}_>=5&&(l+=En.N1+(_-5))}return l}}En.N1=3,En.N2=3,En.N3=40,En.N4=10;class to{constructor(t,r){this.width=t,this.height=r;const l=new Array(r);for(let d=0;d!==r;d++)l[d]=new Uint8Array(t);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,l){this.bytes[r][t]=l}setBoolean(t,r,l){this.bytes[r][t]=l?1:0}clear(t){for(const r of this.bytes)B.fill(r,t)}equals(t){if(!(t instanceof to))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let l=0,d=this.height;l<d;++l){const g=this.bytes[l],p=r.bytes[l];for(let y=0,_=this.width;y<_;++y)if(g[y]!==p[y])return!1}return!0}toString(){const t=new Ce;for(let r=0,l=this.height;r<l;++r){const d=this.bytes[r];for(let g=0,p=this.width;g<p;++g)switch(d[g]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Qa{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Ce;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Qa.NUM_MASK_PATTERNS}}Qa.NUM_MASK_PATTERNS=8;class tn extends w{}tn.kind="WriterException";class ot{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,l,d,g){ot.clearMatrix(g),ot.embedBasicPatterns(l,g),ot.embedTypeInfo(r,d,g),ot.maybeEmbedVersionInfo(l,g),ot.embedDataBits(t,d,g)}static embedBasicPatterns(t,r){ot.embedPositionDetectionPatternsAndSeparators(r),ot.embedDarkDotAtLeftBottomCorner(r),ot.maybeEmbedPositionAdjustmentPatterns(t,r),ot.embedTimingPatterns(r)}static embedTypeInfo(t,r,l){const d=new Q;ot.makeTypeInfoBits(t,r,d);for(let g=0,p=d.getSize();g<p;++g){const y=d.get(d.getSize()-1-g),_=ot.TYPE_INFO_COORDINATES[g],E=_[0],j=_[1];if(l.setBoolean(E,j,y),g<8){const L=l.getWidth()-g-1;l.setBoolean(L,8,y)}else{const z=l.getHeight()-7+(g-8);l.setBoolean(8,z,y)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const l=new Q;ot.makeVersionInfoBits(t,l);let d=17;for(let g=0;g<6;++g)for(let p=0;p<3;++p){const y=l.get(d);d--,r.setBoolean(g,r.getHeight()-11+p,y),r.setBoolean(r.getHeight()-11+p,g,y)}}static embedDataBits(t,r,l){let d=0,g=-1,p=l.getWidth()-1,y=l.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);y>=0&&y<l.getHeight();){for(let _=0;_<2;++_){const E=p-_;if(!ot.isEmpty(l.get(E,y)))continue;let j;d<t.getSize()?(j=t.get(d),++d):j=!1,r!==255&&En.getDataMaskBit(r,E,y)&&(j=!j),l.setBoolean(E,y,j)}y+=g}g=-g,y+=g,p-=2}if(d!==t.getSize())throw new tn("Not all bits consumed: "+d+"/"+t.getSize())}static findMSBSet(t){return 32-P.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new N("0 polynomial");const l=ot.findMSBSet(r);for(t<<=l-1;ot.findMSBSet(t)>=l;)t^=r<<ot.findMSBSet(t)-l;return t}static makeTypeInfoBits(t,r,l){if(!Qa.isValidMaskPattern(r))throw new tn("Invalid mask pattern");const d=t.getBits()<<3|r;l.appendBits(d,5);const g=ot.calculateBCHCode(d,ot.TYPE_INFO_POLY);l.appendBits(g,10);const p=new Q;if(p.appendBits(ot.TYPE_INFO_MASK_PATTERN,15),l.xor(p),l.getSize()!==15)throw new tn("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const l=ot.calculateBCHCode(t.getVersionNumber(),ot.VERSION_INFO_POLY);if(r.appendBits(l,12),r.getSize()!==18)throw new tn("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const l=(r+1)%2;ot.isEmpty(t.get(r,6))&&t.setNumber(r,6,l),ot.isEmpty(t.get(6,r))&&t.setNumber(6,r,l)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new tn;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,l){for(let d=0;d<8;++d){if(!ot.isEmpty(l.get(t+d,r)))throw new tn;l.setNumber(t+d,r,0)}}static embedVerticalSeparationPattern(t,r,l){for(let d=0;d<7;++d){if(!ot.isEmpty(l.get(t,r+d)))throw new tn;l.setNumber(t,r+d,0)}}static embedPositionAdjustmentPattern(t,r,l){for(let d=0;d<5;++d){const g=ot.POSITION_ADJUSTMENT_PATTERN[d];for(let p=0;p<5;++p)l.setNumber(t+p,r+d,g[p])}}static embedPositionDetectionPattern(t,r,l){for(let d=0;d<7;++d){const g=ot.POSITION_DETECTION_PATTERN[d];for(let p=0;p<7;++p)l.setNumber(t+p,r+d,g[p])}}static embedPositionDetectionPatternsAndSeparators(t){const r=ot.POSITION_DETECTION_PATTERN[0].length;ot.embedPositionDetectionPattern(0,0,t),ot.embedPositionDetectionPattern(t.getWidth()-r,0,t),ot.embedPositionDetectionPattern(0,t.getWidth()-r,t);const l=8;ot.embedHorizontalSeparationPattern(0,l-1,t),ot.embedHorizontalSeparationPattern(t.getWidth()-l,l-1,t),ot.embedHorizontalSeparationPattern(0,t.getWidth()-l,t);const d=7;ot.embedVerticalSeparationPattern(d,0,t),ot.embedVerticalSeparationPattern(t.getHeight()-d-1,0,t),ot.embedVerticalSeparationPattern(d,t.getHeight()-d,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const l=t.getVersionNumber()-1,d=ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let g=0,p=d.length;g!==p;g++){const y=d[g];if(y>=0)for(let _=0;_!==p;_++){const E=d[_];E>=0&&ot.isEmpty(r.get(E,y))&&ot.embedPositionAdjustmentPattern(E-2,y-2,r)}}}}ot.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ot.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ot.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ot.VERSION_INFO_POLY=7973,ot.TYPE_INFO_POLY=1335,ot.TYPE_INFO_MASK_PATTERN=21522;class id{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class mn{constructor(){}static calculateMaskPenalty(t){return En.applyMaskPenaltyRule1(t)+En.applyMaskPenaltyRule2(t)+En.applyMaskPenaltyRule3(t)+En.applyMaskPenaltyRule4(t)}static encode(t,r,l=null){let d=mn.DEFAULT_BYTE_MODE_ENCODING;const g=l!==null&&l.get(Gn.CHARACTER_SET)!==void 0;g&&(d=l.get(Gn.CHARACTER_SET).toString());const p=this.chooseMode(t,d),y=new Q;if(p===at.BYTE&&(g||mn.DEFAULT_BYTE_MODE_ENCODING!==d)){const Be=q.getCharacterSetECIByName(d);Be!==void 0&&this.appendECI(Be,y)}this.appendModeInfo(p,y);const _=new Q;this.appendBytes(t,p,_,d);let E;if(l!==null&&l.get(Gn.QR_VERSION)!==void 0){const Be=Number.parseInt(l.get(Gn.QR_VERSION).toString(),10);E=Ze.getVersionForNumber(Be);const Ie=this.calculateBitsNeeded(p,y,_,E);if(!this.willFit(Ie,E,r))throw new tn("Data too big for requested version")}else E=this.recommendVersion(r,p,y,_);const j=new Q;j.appendBitArray(y);const L=p===at.BYTE?_.getSizeInBytes():t.length;this.appendLengthInfo(L,E,p,j),j.appendBitArray(_);const z=E.getECBlocksForLevel(r),K=E.getTotalCodewords()-z.getTotalECCodewords();this.terminateBits(K,j);const te=this.interleaveWithECBytes(j,E.getTotalCodewords(),K,z.getNumBlocks()),se=new Qa;se.setECLevel(r),se.setMode(p),se.setVersion(E);const oe=E.getDimensionForVersion(),fe=new to(oe,oe),Pe=this.chooseMaskPattern(te,r,E,fe);return se.setMaskPattern(Pe),ot.buildMatrix(te,r,E,Pe,fe),se.setMatrix(fe),se}static recommendVersion(t,r,l,d){const g=this.calculateBitsNeeded(r,l,d,Ze.getVersionForNumber(1)),p=this.chooseVersion(g,t),y=this.calculateBitsNeeded(r,l,d,p);return this.chooseVersion(y,t)}static calculateBitsNeeded(t,r,l,d){return r.getSize()+t.getCharacterCountBits(d)+l.getSize()}static getAlphanumericCode(t){return t<mn.ALPHANUMERIC_TABLE.length?mn.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(q.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return at.KANJI;let l=!1,d=!1;for(let g=0,p=t.length;g<p;++g){const y=t.charAt(g);if(mn.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)d=!0;else return at.BYTE}return d?at.ALPHANUMERIC:l?at.NUMERIC:at.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=we.encode(t,q.SJIS)}catch{return!1}const l=r.length;if(l%2!==0)return!1;for(let d=0;d<l;d+=2){const g=r[d]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(t,r,l,d){let g=Number.MAX_SAFE_INTEGER,p=-1;for(let y=0;y<Qa.NUM_MASK_PATTERNS;y++){ot.buildMatrix(t,r,l,y,d);let _=this.calculateMaskPenalty(d);_<g&&(g=_,p=y)}return p}static chooseVersion(t,r){for(let l=1;l<=40;l++){const d=Ze.getVersionForNumber(l);if(mn.willFit(t,d,r))return d}throw new tn("Data too big")}static willFit(t,r,l){const d=r.getTotalCodewords(),p=r.getECBlocksForLevel(l).getTotalECCodewords(),y=d-p,_=(t+7)/8;return y>=_}static terminateBits(t,r){const l=t*8;if(r.getSize()>l)throw new tn("data bits cannot fit in the QR Code"+r.getSize()+" > "+l);for(let p=0;p<4&&r.getSize()<l;++p)r.appendBit(!1);const d=r.getSize()&7;if(d>0)for(let p=d;p<8;p++)r.appendBit(!1);const g=t-r.getSizeInBytes();for(let p=0;p<g;++p)r.appendBits((p&1)===0?236:17,8);if(r.getSize()!==l)throw new tn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,l,d,g,p){if(d>=l)throw new tn("Block ID too large");const y=t%l,_=l-y,E=Math.floor(t/l),j=E+1,L=Math.floor(r/l),z=L+1,K=E-L,te=j-z;if(K!==te)throw new tn("EC bytes mismatch");if(l!==_+y)throw new tn("RS blocks mismatch");if(t!==(L+K)*_+(z+te)*y)throw new tn("Total bytes mismatch");d<_?(g[0]=L,p[0]=K):(g[0]=z,p[0]=te)}static interleaveWithECBytes(t,r,l,d){if(t.getSizeInBytes()!==l)throw new tn("Number of bits and data bytes does not match");let g=0,p=0,y=0;const _=new Array;for(let j=0;j<d;++j){const L=new Int32Array(1),z=new Int32Array(1);mn.getNumDataBytesAndNumECBytesForBlockID(r,l,d,j,L,z);const K=L[0],te=new Uint8Array(K);t.toBytes(8*g,te,0,K);const se=mn.generateECBytes(te,z[0]);_.push(new id(te,se)),p=Math.max(p,K),y=Math.max(y,se.length),g+=L[0]}if(l!==g)throw new tn("Data bytes does not match offset");const E=new Q;for(let j=0;j<p;++j)for(const L of _){const z=L.getDataBytes();j<z.length&&E.appendBits(z[j],8)}for(let j=0;j<y;++j)for(const L of _){const z=L.getErrorCorrectionBytes();j<z.length&&E.appendBits(z[j],8)}if(r!==E.getSizeInBytes())throw new tn("Interleaving error: "+r+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(t,r){const l=t.length,d=new Int32Array(l+r);for(let p=0;p<l;p++)d[p]=t[p]&255;new pi(ft.QR_CODE_FIELD_256).encode(d,r);const g=new Uint8Array(r);for(let p=0;p<r;p++)g[p]=d[l+p];return g}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,l,d){const g=l.getCharacterCountBits(r);if(t>=1<<g)throw new tn(t+" is bigger than "+((1<<g)-1));d.appendBits(t,g)}static appendBytes(t,r,l,d){switch(r){case at.NUMERIC:mn.appendNumericBytes(t,l);break;case at.ALPHANUMERIC:mn.appendAlphanumericBytes(t,l);break;case at.BYTE:mn.append8BitBytes(t,l,d);break;case at.KANJI:mn.appendKanjiBytes(t,l);break;default:throw new tn("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=mn.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const l=t.length;let d=0;for(;d<l;){const g=mn.getDigit(t.charAt(d));if(d+2<l){const p=mn.getDigit(t.charAt(d+1)),y=mn.getDigit(t.charAt(d+2));r.appendBits(g*100+p*10+y,10),d+=3}else if(d+1<l){const p=mn.getDigit(t.charAt(d+1));r.appendBits(g*10+p,7),d+=2}else r.appendBits(g,4),d++}}static appendAlphanumericBytes(t,r){const l=t.length;let d=0;for(;d<l;){const g=mn.getAlphanumericCode(t.charCodeAt(d));if(g===-1)throw new tn;if(d+1<l){const p=mn.getAlphanumericCode(t.charCodeAt(d+1));if(p===-1)throw new tn;r.appendBits(g*45+p,11),d+=2}else r.appendBits(g,6),d++}}static append8BitBytes(t,r,l){let d;try{d=we.encode(t,l)}catch(g){throw new tn(g)}for(let g=0,p=d.length;g!==p;g++){const y=d[g];r.appendBits(y,8)}}static appendKanjiBytes(t,r){let l;try{l=we.encode(t,q.SJIS)}catch(g){throw new tn(g)}const d=l.length;for(let g=0;g<d;g+=2){const p=l[g]&255,y=l[g+1]&255,_=p<<8&4294967295|y;let E=-1;if(_>=33088&&_<=40956?E=_-33088:_>=57408&&_<=60351&&(E=_-49472),E===-1)throw new tn("Invalid byte sequence");const j=(E>>8)*192+(E&255);r.appendBits(j,13)}}static appendECI(t,r){r.appendBits(at.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}mn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),mn.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class Ka{write(t,r,l,d=null){if(t.length===0)throw new N("Found empty contents");if(r<0||l<0)throw new N("Requested dimensions are too small: "+r+"x"+l);let g=Nt.L,p=Ka.QUIET_ZONE_SIZE;d!==null&&(d.get(Gn.ERROR_CORRECTION)!==void 0&&(g=Nt.fromString(d.get(Gn.ERROR_CORRECTION).toString())),d.get(Gn.MARGIN)!==void 0&&(p=Number.parseInt(d.get(Gn.MARGIN).toString(),10)));const y=mn.encode(t,g,d);return this.renderResult(y,r,l,p)}writeToDom(t,r,l,d,g=null){typeof t=="string"&&(t=document.querySelector(t));const p=this.write(r,l,d,g);t&&t.appendChild(p)}renderResult(t,r,l,d){const g=t.getMatrix();if(g===null)throw new xn;const p=g.getWidth(),y=g.getHeight(),_=p+d*2,E=y+d*2,j=Math.max(r,_),L=Math.max(l,E),z=Math.min(Math.floor(j/_),Math.floor(L/E)),K=Math.floor((j-p*z)/2),te=Math.floor((L-y*z)/2),se=this.createSVGElement(j,L);for(let oe=0,fe=te;oe<y;oe++,fe+=z)for(let Pe=0,Be=K;Pe<p;Pe++,Be+=z)if(g.get(Pe,oe)===1){const Ie=this.createSvgRectElement(Be,fe,z,z);se.appendChild(Ie)}return se}createSVGElement(t,r){const l=document.createElementNS(Ka.SVG_NS,"svg");return l.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width",r.toString()),l}createSvgRectElement(t,r,l,d){const g=document.createElementNS(Ka.SVG_NS,"rect");return g.setAttributeNS(null,"x",t.toString()),g.setAttributeNS(null,"y",r.toString()),g.setAttributeNS(null,"height",l.toString()),g.setAttributeNS(null,"width",d.toString()),g.setAttributeNS(null,"fill","#000000"),g}}Ka.QUIET_ZONE_SIZE=4,Ka.SVG_NS="http://www.w3.org/2000/svg";class Ir{encode(t,r,l,d,g){if(t.length===0)throw new N("Found empty contents");if(r!==Ne.QR_CODE)throw new N("Can only encode QR_CODE, but got "+r);if(l<0||d<0)throw new N(`Requested dimensions are too small: ${l}x${d}`);let p=Nt.L,y=Ir.QUIET_ZONE_SIZE;g!==null&&(g.get(Gn.ERROR_CORRECTION)!==void 0&&(p=Nt.fromString(g.get(Gn.ERROR_CORRECTION).toString())),g.get(Gn.MARGIN)!==void 0&&(y=Number.parseInt(g.get(Gn.MARGIN).toString(),10)));const _=mn.encode(t,p,g);return Ir.renderResult(_,l,d,y)}static renderResult(t,r,l,d){const g=t.getMatrix();if(g===null)throw new xn;const p=g.getWidth(),y=g.getHeight(),_=p+d*2,E=y+d*2,j=Math.max(r,_),L=Math.max(l,E),z=Math.min(Math.floor(j/_),Math.floor(L/E)),K=Math.floor((j-p*z)/2),te=Math.floor((L-y*z)/2),se=new Oe(j,L);for(let oe=0,fe=te;oe<y;oe++,fe+=z)for(let Pe=0,Be=K;Pe<p;Pe++,Be+=z)g.get(Pe,oe)===1&&se.setRegion(Be,fe,z,z);return se}}Ir.QUIET_ZONE_SIZE=4;class od{encode(t,r,l,d,g){let p;switch(r){case Ne.QR_CODE:p=new Ir;break;default:throw new N("No encoder available for format "+r)}return p.encode(t,r,l,d,g)}}class ua extends ke{constructor(t,r,l,d,g,p,y,_){if(super(p,y),this.yuvData=t,this.dataWidth=r,this.dataHeight=l,this.left=d,this.top=g,d+p>r||g+y>l)throw new N("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(p,y)}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const l=this.getWidth();(r==null||r.length<l)&&(r=new Uint8ClampedArray(l));const d=(t+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,d,r,0,l),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const l=t*r,d=new Uint8ClampedArray(l);let g=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return D.arraycopy(this.yuvData,g,d,0,l),d;for(let p=0;p<r;p++){const y=p*t;D.arraycopy(this.yuvData,g,d,y,t),g+=this.dataWidth}return d}isCropSupported(){return!0}crop(t,r,l,d){return new ua(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,l,d,!1)}renderThumbnail(){const t=this.getWidth()/ua.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/ua.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(t*r),d=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let p=0;p<r;p++){const y=p*t;for(let _=0;_<t;_++){const E=d[g+_*ua.THUMBNAIL_SCALE_FACTOR]&255;l[y+_]=4278190080|E*65793}g+=this.dataWidth*ua.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/ua.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ua.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const l=this.yuvData;for(let d=0,g=this.top*this.dataWidth+this.left;d<r;d++,g+=this.dataWidth){const p=g+t/2;for(let y=g,_=g+t-1;y<p;y++,_--){const E=l[y];l[y]=l[_],l[_]=E}}}invert(){return new Ge(this)}}ua.THUMBNAIL_SCALE_FACTOR=2;class al extends ke{constructor(t,r,l,d,g,p,y){if(super(r,l),this.dataWidth=d,this.dataHeight=g,this.left=p,this.top=y,t.BYTES_PER_ELEMENT===4){const _=r*l,E=new Uint8ClampedArray(_);for(let j=0;j<_;j++){const L=t[j],z=L>>16&255,K=L>>7&510,te=L&255;E[j]=(z+K+te)/4&255}this.luminances=E}else this.luminances=t;if(d===void 0&&(this.dataWidth=r),g===void 0&&(this.dataHeight=l),p===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+l>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);const l=this.getWidth();(r==null||r.length<l)&&(r=new Uint8ClampedArray(l));const d=(t+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,d,r,0,l),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const l=t*r,d=new Uint8ClampedArray(l);let g=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return D.arraycopy(this.luminances,g,d,0,l),d;for(let p=0;p<r;p++){const y=p*t;D.arraycopy(this.luminances,g,d,y,t),g+=this.dataWidth}return d}isCropSupported(){return!0}crop(t,r,l,d){return new al(this.luminances,l,d,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new Ge(this)}}class uc extends q{static forName(t){return this.getCharacterSetECIByName(t)}}class xi{}xi.ISO_8859_1=q.ISO8859_1;class Or{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class dc{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class hc{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Za extends hc{constructor(t,r,l){super(t),this.value=r,this.bitCount=l}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new Za(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Za(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+P.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class no extends Za{constructor(t,r,l){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=l}appendTo(t,r){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):l===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+l],8)}addBinaryShift(t,r){return new no(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function fc(k,t,r){return new no(k,t,r)}function Mr(k,t,r){return new Za(k,t,r)}const kr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],za=0,so=1,Ds=2,rl=3,Ws=4,yi=new Za(null,0,0),$a=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ld(k){for(let t of k)B.fill(t,-1);return k[za][Ws]=0,k[so][Ws]=0,k[so][za]=28,k[rl][Ws]=0,k[Ds][Ws]=0,k[Ds][za]=15,k}const wi=ld(B.createInt32Array(6,6));class Qs{constructor(t,r,l,d){this.token=t,this.mode=r,this.binaryShiftByteCount=l,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let l=this.bitCount,d=this.token;if(t!==this.mode){let p=$a[this.mode][t];d=Mr(d,p&65535,p>>16),l+=p>>16}let g=t===Ds?4:5;return d=Mr(d,r,g),new Qs(d,t,0,l+g)}shiftAndAppend(t,r){let l=this.token,d=this.mode===Ds?4:5;return l=Mr(l,wi[this.mode][t],d),l=Mr(l,r,5),new Qs(l,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(t){let r=this.token,l=this.mode,d=this.bitCount;if(this.mode===Ws||this.mode===Ds){let y=$a[l][za];r=Mr(r,y&65535,y>>16),d+=y>>16,l=za}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new Qs(r,l,this.binaryShiftByteCount+1,d+g);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(t+1)),p}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=fc(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Qs(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+($a[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=Qs.calculateBinaryShiftCost(t)-Qs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let d=this.endBinaryShift(t.length).token;d!==null;d=d.getPrevious())r.unshift(d);let l=new Q;for(const d of r)d.appendTo(l,t);return l}toString(){return me.format("%s bits=%d bytes=%d",kr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Qs.INITIAL_STATE=new Qs(yi,za,0,0);function gc(k){const t=me.getCharCode(" "),r=me.getCharCode("."),l=me.getCharCode(",");k[za][t]=1;const d=me.getCharCode("Z"),g=me.getCharCode("A");for(let z=g;z<=d;z++)k[za][z]=z-g+2;k[so][t]=1;const p=me.getCharCode("z"),y=me.getCharCode("a");for(let z=y;z<=p;z++)k[so][z]=z-y+2;k[Ds][t]=1;const _=me.getCharCode("9"),E=me.getCharCode("0");for(let z=E;z<=_;z++)k[Ds][z]=z-E+2;k[Ds][l]=12,k[Ds][r]=13;const j=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let z=0;z<j.length;z++)k[rl][me.getCharCode(j[z])]=z;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let z=0;z<L.length;z++)me.getCharCode(L[z])>0&&(k[Ws][me.getCharCode(L[z])]=z);return k}const bi=gc(B.createInt32Array(5,256));class Ja{constructor(t){this.text=t}encode(){const t=me.getCharCode(" "),r=me.getCharCode(`
`);let l=dc.singletonList(Qs.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let p,y=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case me.getCharCode("\r"):p=y===r?2:0;break;case me.getCharCode("."):p=y===t?3:0;break;case me.getCharCode(","):p=y===t?4:0;break;case me.getCharCode(":"):p=y===t?5:0;break;default:p=0}p>0?(l=Ja.updateStateListForPair(l,g,p),g++):l=this.updateStateListForChar(l,g)}return dc.min(l,(g,p)=>g.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const l=[];for(let d of t)this.updateStateForChar(d,r,l);return Ja.simplifyStates(l)}updateStateForChar(t,r,l){let d=this.text[r]&255,g=bi[t.getMode()][d]>0,p=null;for(let y=0;y<=Ws;y++){let _=bi[y][d];if(_>0){if(p==null&&(p=t.endBinaryShift(r)),!g||y===t.getMode()||y===Ds){const E=p.latchAndAppend(y,_);l.push(E)}if(!g&&wi[t.getMode()][y]>=0){const E=p.shiftAndAppend(y,_);l.push(E)}}}if(t.getBinaryShiftByteCount()>0||bi[t.getMode()][d]===0){let y=t.addBinaryShiftChar(r);l.push(y)}}static updateStateListForPair(t,r,l){const d=[];for(let g of t)this.updateStateForPair(g,r,l,d);return this.simplifyStates(d)}static updateStateForPair(t,r,l,d){let g=t.endBinaryShift(r);if(d.push(g.latchAndAppend(Ws,l)),t.getMode()!==Ws&&d.push(g.shiftAndAppend(Ws,l)),l===3||l===4){let p=g.latchAndAppend(Ds,16-l).latchAndAppend(Ds,1);d.push(p)}if(t.getBinaryShiftByteCount()>0){let p=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);d.push(p)}}static simplifyStates(t){let r=[];for(const l of t){let d=!0;for(const g of r){if(g.isBetterThanOrEqualTo(l)){d=!1;break}l.isBetterThanOrEqualTo(g)&&(r=r.filter(p=>p!==g))}d&&r.push(l)}return r}}class kt{constructor(){}static encodeBytes(t){return kt.encode(t,kt.DEFAULT_EC_PERCENT,kt.DEFAULT_AZTEC_LAYERS)}static encode(t,r,l){let d=new Ja(t).encode(),g=P.truncDivision(d.getSize()*r,100)+11,p=d.getSize()+g,y,_,E,j,L;if(l!==kt.DEFAULT_AZTEC_LAYERS){if(y=l<0,_=Math.abs(l),_>(y?kt.MAX_NB_BITS_COMPACT:kt.MAX_NB_BITS))throw new N(me.format("Illegal value %s for layers",l));E=kt.totalBitsInLayer(_,y),j=kt.WORD_SIZE[_];let Ie=E-E%j;if(L=kt.stuffBits(d,j),L.getSize()+g>Ie)throw new N("Data to large for user specified layer");if(y&&L.getSize()>j*64)throw new N("Data to large for user specified layer")}else{j=0,L=null;for(let Ie=0;;Ie++){if(Ie>kt.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(y=Ie<=3,_=y?Ie+1:Ie,E=kt.totalBitsInLayer(_,y),p>E)continue;(L==null||j!==kt.WORD_SIZE[_])&&(j=kt.WORD_SIZE[_],L=kt.stuffBits(d,j));let Et=E-E%j;if(!(y&&L.getSize()>j*64)&&L.getSize()+g<=Et)break}}let z=kt.generateCheckWords(L,E,j),K=L.getSize()/j,te=kt.generateModeMessage(y,_,K),se=(y?11:14)+_*4,oe=new Int32Array(se),fe;if(y){fe=se;for(let Ie=0;Ie<oe.length;Ie++)oe[Ie]=Ie}else{fe=se+1+2*P.truncDivision(P.truncDivision(se,2)-1,15);let Ie=P.truncDivision(se,2),Et=P.truncDivision(fe,2);for(let yt=0;yt<Ie;yt++){let Un=yt+P.truncDivision(yt,15);oe[Ie-yt-1]=Et-Un-1,oe[Ie+yt]=Et+Un+1}}let Pe=new Oe(fe);for(let Ie=0,Et=0;Ie<_;Ie++){let yt=(_-Ie)*4+(y?9:12);for(let Un=0;Un<yt;Un++){let Ls=Un*2;for(let gs=0;gs<2;gs++)z.get(Et+Ls+gs)&&Pe.set(oe[Ie*2+gs],oe[Ie*2+Un]),z.get(Et+yt*2+Ls+gs)&&Pe.set(oe[Ie*2+Un],oe[se-1-Ie*2-gs]),z.get(Et+yt*4+Ls+gs)&&Pe.set(oe[se-1-Ie*2-gs],oe[se-1-Ie*2-Un]),z.get(Et+yt*6+Ls+gs)&&Pe.set(oe[se-1-Ie*2-Un],oe[Ie*2+gs])}Et+=yt*8}if(kt.drawModeMessage(Pe,y,fe,te),y)kt.drawBullsEye(Pe,P.truncDivision(fe,2),5);else{kt.drawBullsEye(Pe,P.truncDivision(fe,2),7);for(let Ie=0,Et=0;Ie<P.truncDivision(se,2)-1;Ie+=15,Et+=16)for(let yt=P.truncDivision(fe,2)&1;yt<fe;yt+=2)Pe.set(P.truncDivision(fe,2)-Et,yt),Pe.set(P.truncDivision(fe,2)+Et,yt),Pe.set(yt,P.truncDivision(fe,2)-Et),Pe.set(yt,P.truncDivision(fe,2)+Et)}let Be=new Or;return Be.setCompact(y),Be.setSize(fe),Be.setLayers(_),Be.setCodeWords(K),Be.setMatrix(Pe),Be}static drawBullsEye(t,r,l){for(let d=0;d<l;d+=2)for(let g=r-d;g<=r+d;g++)t.set(g,r-d),t.set(g,r+d),t.set(r-d,g),t.set(r+d,g);t.set(r-l,r-l),t.set(r-l+1,r-l),t.set(r-l,r-l+1),t.set(r+l,r-l),t.set(r+l,r-l+1),t.set(r+l,r+l-1)}static generateModeMessage(t,r,l){let d=new Q;return t?(d.appendBits(r-1,2),d.appendBits(l-1,6),d=kt.generateCheckWords(d,28,4)):(d.appendBits(r-1,5),d.appendBits(l-1,11),d=kt.generateCheckWords(d,40,4)),d}static drawModeMessage(t,r,l,d){let g=P.truncDivision(l,2);if(r)for(let p=0;p<7;p++){let y=g-3+p;d.get(p)&&t.set(y,g-5),d.get(p+7)&&t.set(g+5,y),d.get(20-p)&&t.set(y,g+5),d.get(27-p)&&t.set(g-5,y)}else for(let p=0;p<10;p++){let y=g-5+p+P.truncDivision(p,5);d.get(p)&&t.set(y,g-7),d.get(p+10)&&t.set(g+7,y),d.get(29-p)&&t.set(y,g+7),d.get(39-p)&&t.set(g-7,y)}}static generateCheckWords(t,r,l){let d=t.getSize()/l,g=new pi(kt.getGF(l)),p=P.truncDivision(r,l),y=kt.bitsToWords(t,l,p);g.encode(y,p-d);let _=r%l,E=new Q;E.appendBits(0,_);for(const j of Array.from(y))E.appendBits(j,l);return E}static bitsToWords(t,r,l){let d=new Int32Array(l),g,p;for(g=0,p=t.getSize()/r;g<p;g++){let y=0;for(let _=0;_<r;_++)y|=t.get(g*r+_)?1<<r-_-1:0;d[g]=y}return d}static getGF(t){switch(t){case 4:return ft.AZTEC_PARAM;case 6:return ft.AZTEC_DATA_6;case 8:return ft.AZTEC_DATA_8;case 10:return ft.AZTEC_DATA_10;case 12:return ft.AZTEC_DATA_12;default:throw new N("Unsupported word size "+t)}}static stuffBits(t,r){let l=new Q,d=t.getSize(),g=(1<<r)-2;for(let p=0;p<d;p+=r){let y=0;for(let _=0;_<r;_++)(p+_>=d||t.get(p+_))&&(y|=1<<r-1-_);(y&g)===g?(l.appendBits(y&g,r),p--):(y&g)===0?(l.appendBits(y|1,r),p--):l.appendBits(y,r)}return l}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}kt.DEFAULT_EC_PERCENT=33,kt.DEFAULT_AZTEC_LAYERS=0,kt.MAX_NB_BITS=32,kt.MAX_NB_BITS_COMPACT=4,kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class vi{encode(t,r,l,d){return this.encodeWithHints(t,r,l,d,null)}encodeWithHints(t,r,l,d,g){let p=xi.ISO_8859_1,y=kt.DEFAULT_EC_PERCENT,_=kt.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(Gn.CHARACTER_SET)&&(p=uc.forName(g.get(Gn.CHARACTER_SET).toString())),g.has(Gn.ERROR_CORRECTION)&&(y=P.parseInt(g.get(Gn.ERROR_CORRECTION).toString())),g.has(Gn.AZTEC_LAYERS)&&(_=P.parseInt(g.get(Gn.AZTEC_LAYERS).toString()))),vi.encodeLayers(t,r,l,d,p,y,_)}static encodeLayers(t,r,l,d,g,p,y){if(r!==Ne.AZTEC)throw new N("Can only encode AZTEC, but got "+r);let _=kt.encode(me.getBytes(t,g),p,y);return vi.renderResult(_,l,d)}static renderResult(t,r,l){let d=t.getMatrix();if(d==null)throw new xn;let g=d.getWidth(),p=d.getHeight(),y=Math.max(r,g),_=Math.max(l,p),E=Math.min(y/g,_/p),j=(y-g*E)/2,L=(_-p*E)/2,z=new Oe(y,_);for(let K=0,te=L;K<p;K++,te+=E)for(let se=0,oe=j;se<g;se++,oe+=E)d.get(se,K)&&z.setRegion(oe,te,E,E);return z}}a.AbstractExpandedDecoder=Ee,a.ArgumentException=A,a.ArithmeticException=Wt,a.AztecCode=Or,a.AztecCodeReader=jn,a.AztecCodeWriter=vi,a.AztecDecoder=At,a.AztecDetector=qn,a.AztecDetectorResult=Me,a.AztecEncoder=kt,a.AztecHighLevelEncoder=Ja,a.AztecPoint=Vt,a.BarcodeFormat=Ne,a.Binarizer=O,a.BinaryBitmap=R,a.BitArray=Q,a.BitMatrix=Oe,a.BitSource=Ys,a.BrowserAztecCodeReader=ts,a.BrowserBarcodeReader=td,a.BrowserCodeReader=Le,a.BrowserDatamatrixCodeReader=Qi,a.BrowserMultiFormatReader=cc,a.BrowserPDF417Reader=ad,a.BrowserQRCodeReader=rd,a.BrowserQRCodeSvgWriter=Ka,a.CharacterSetECI=q,a.ChecksumException=T,a.Code128Reader=je,a.Code39Reader=lt,a.DataMatrixDecodedBitStreamParser=Ca,a.DataMatrixReader=_a,a.DecodeHintType=Y,a.DecoderResult=ve,a.DefaultGridSampler=Tn,a.DetectorResult=Is,a.EAN13Reader=Rn,a.EncodeHintType=Gn,a.Exception=w,a.FormatException=X,a.GenericGF=ft,a.GenericGFPoly=mt,a.GlobalHistogramBinarizer=$,a.GridSampler=nt,a.GridSamplerInstance=sn,a.HTMLCanvasElementLuminanceSource=Ke,a.HybridBinarizer=ie,a.ITFReader=gt,a.IllegalArgumentException=N,a.IllegalStateException=xn,a.InvertedLuminanceSource=Ge,a.LuminanceSource=ke,a.MathUtils=ht,a.MultiFormatOneDReader=Gs,a.MultiFormatReader=lc,a.MultiFormatWriter=od,a.NotFoundException=V,a.OneDReader=Ut,a.PDF417DecodedBitStreamParser=ge,a.PDF417DecoderErrorCorrection=Ea,a.PDF417Reader=as,a.PDF417ResultMetadata=Rr,a.PerspectiveTransform=Ct,a.PlanarYUVLuminanceSource=ua,a.QRCodeByteMatrix=to,a.QRCodeDataMask=Es,a.QRCodeDecodedBitStreamParser=fn,a.QRCodeDecoderErrorCorrectionLevel=Nt,a.QRCodeDecoderFormatInformation=Wn,a.QRCodeEncoder=mn,a.QRCodeEncoderQRCode=Qa,a.QRCodeMaskUtil=En,a.QRCodeMatrixUtil=ot,a.QRCodeMode=at,a.QRCodeReader=Sa,a.QRCodeVersion=Ze,a.QRCodeWriter=Ir,a.RGBLuminanceSource=al,a.RSS14Reader=en,a.RSSExpandedReader=Re,a.ReaderException=eo,a.ReedSolomonDecoder=cn,a.ReedSolomonEncoder=pi,a.ReedSolomonException=Mt,a.Result=Ue,a.ResultMetadataType=De,a.ResultPoint=ze,a.StringUtils=me,a.UnsupportedOperationException=xe,a.VideoInputDevice=ne,a.WhiteRectangleDetector=Fe,a.WriterException=tn,a.ZXingArrays=B,a.ZXingCharset=uc,a.ZXingInteger=P,a.ZXingStandardCharsets=xi,a.ZXingStringBuilder=Ce,a.ZXingStringEncoding=we,a.ZXingSystem=D,a.createAbstractExpandedDecoder=_r,Object.defineProperty(a,"__esModule",{value:!0})}))})(Vl,Vl.exports)),Vl.exports}var Sn=FE();const HE=Gu(Sn),qE=kx({__proto__:null,default:HE},[Sn]);var Cx=(function(){function o(n,a,c){if(this.formatMap=new Map([[Ye.QR_CODE,Sn.BarcodeFormat.QR_CODE],[Ye.AZTEC,Sn.BarcodeFormat.AZTEC],[Ye.CODABAR,Sn.BarcodeFormat.CODABAR],[Ye.CODE_39,Sn.BarcodeFormat.CODE_39],[Ye.CODE_93,Sn.BarcodeFormat.CODE_93],[Ye.CODE_128,Sn.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,Sn.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,Sn.BarcodeFormat.MAXICODE],[Ye.ITF,Sn.BarcodeFormat.ITF],[Ye.EAN_13,Sn.BarcodeFormat.EAN_13],[Ye.EAN_8,Sn.BarcodeFormat.EAN_8],[Ye.PDF_417,Sn.BarcodeFormat.PDF_417],[Ye.RSS_14,Sn.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,Sn.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,Sn.BarcodeFormat.UPC_A],[Ye.UPC_E,Sn.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,Sn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!qE)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=a,this.logger=c;var h=this.createZXingFormats(n),f=new Map;f.set(Sn.DecodeHintType.POSSIBLE_FORMATS,h),f.set(Sn.DecodeHintType.TRY_HARDER,!1),this.hints=f}return o.prototype.decodeAsync=function(n){var a=this;return new Promise(function(c,h){try{c(a.decode(n))}catch(f){h(f)}})},o.prototype.decode=function(n){var a=new Sn.MultiFormatReader(this.verbose,this.hints),c=new Sn.HTMLCanvasElementLuminanceSource(n),h=new Sn.BinaryBitmap(new Sn.HybridBinarizer(c)),f=a.decode(h);return{text:f.text,format:ly.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(a,c,h){n.set(a,c)}),n},o.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},o.prototype.createZXingFormats=function(n){for(var a=[],c=0,h=n;c<h.length;c++){var f=h[c];this.formatMap.has(f)?a.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return a},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o})(),VE=function(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})},GE=function(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},_x=(function(){function o(n,a,c){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=a,this.logger=c;var h=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},o.prototype.decodeAsync=function(n){return VE(this,void 0,void 0,function(){var a,c;return GE(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(n)];case 1:if(a=h.sent(),!a||a.length===0)throw"No barcode or QR code detected.";return c=this.selectLargestBarcode(a),[2,{text:c.rawValue,format:ly.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(n){for(var a=null,c=0,h=0,f=n;h<f.length;h++){var x=f[h],v=x.boundingBox.width*x.boundingBox.height;v>c&&(c=v,a=x)}if(!a)throw"No largest barcode found";return a},o.prototype.createBarcodeDetectorFormats=function(n){for(var a=[],c=0,h=n;c<h.length;c++){var f=h[c];this.formatMap.has(f)?a.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:a}},o.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},o.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(a,c,h){n.set(a,c)}),n},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o})(),Sx=function(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})},Ex=function(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},YE=(function(){function o(n,a,c,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,a&&_x.isSupported()?(this.primaryDecoder=new _x(n,c,h),this.secondaryDecoder=new Cx(n,c,h)):this.primaryDecoder=new Cx(n,c,h)}return o.prototype.decodeAsync=function(n){return Sx(this,void 0,void 0,function(){var a;return Ex(this,function(c){switch(c.label){case 0:a=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(a),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(n){return Sx(this,void 0,void 0,function(){var a,c;return Ex(this,function(h){switch(h.label){case 0:a=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,h.sent()];case 3:if(c=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw c;case 4:return this.possiblyLogPerformance(a),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(n){if(this.verbose){var a=performance.now()-n;this.executionResults.push(a),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,a=0,c=this.executionResults;a<c.length;a++){var h=c[a];n+=h}var f=n/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},o})(),L0=(function(){var o=function(n,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(c[f]=h[f])},o(n,a)};return function(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(n,a);function c(){this.constructor=n}n.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}})(),qu=function(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})},Vu=function(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},hy=(function(){function o(n,a){this.name=n,this.track=a}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(n){var a={};a[this.name]=n;var c={advanced:[a]};return this.track.applyConstraints(c)},o.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var a=n[this.name];return a}return null},o})(),XE=(function(o){L0(n,o);function n(a,c){return o.call(this,a,c)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(a){var c={};c[this.name]=a;var h={advanced:[c]};return this.track.applyConstraints(h)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities(),c=a[this.name];return{min:c.min,max:c.max,step:c.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n})(hy),WE=(function(o){L0(n,o);function n(a){return o.call(this,"zoom",a)||this}return n})(XE),QE=(function(o){L0(n,o);function n(a){return o.call(this,"torch",a)||this}return n})(hy),KE=(function(){function o(n){this.track=n}return o.prototype.zoomFeature=function(){return new WE(this.track)},o.prototype.torchFeature=function(){return new QE(this.track)},o})(),ZE=(function(){function o(n,a,c){this.isClosed=!1,this.parentElement=n,this.mediaStream=a,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return o.prototype.createVideoElement=function(n){var a=document.createElement("video");return a.style.width="".concat(n,"px"),a.style.display="block",a.muted=!0,a.setAttribute("muted","true"),a.playsInline=!0,a},o.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var a=function(){var c=n.surface.clientWidth,h=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(c,h),n.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(n,a,c,h){return qu(this,void 0,void 0,function(){var f,x;return Vu(this,function(v){switch(v.label){case 0:return f=new o(n,a,h),c.aspectRatio?(x={aspectRatio:c.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:v.sent(),v.label=2;case 2:return f.setupSurface(),[2,f]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(n){this.failIfClosed();var a=this,c=function(){setTimeout(n,200),a.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(n){return qu(this,void 0,void 0,function(){return Vu(this,function(a){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(a,c){var h=n.mediaStream.getVideoTracks(),f=h.length,x=0;n.mediaStream.getVideoTracks().forEach(function(v){n.mediaStream.removeTrack(v),v.stop(),++x,x>=f&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),a())})})},o.prototype.getCapabilities=function(){return new KE(this.getFirstTrackOrFail())},o})(),$E=(function(){function o(n){this.mediaStream=n}return o.prototype.render=function(n,a,c){return qu(this,void 0,void 0,function(){return Vu(this,function(h){return[2,ZE.create(n,this.mediaStream,a,c)]})})},o.create=function(n){return qu(this,void 0,void 0,function(){var a,c;return Vu(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return a={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(a)];case 1:return c=h.sent(),[2,new o(c)]}})})},o})(),Ax=function(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})},Nx=function(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},JE=(function(){function o(){}return o.failIfNotSupported=function(){return Ax(this,void 0,void 0,function(){return Nx(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(n){return Ax(this,void 0,void 0,function(){return Nx(this,function(a){return[2,$E.create(n)]})})},o})(),eA=function(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})},tA=function(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},nA=(function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var n=zo.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(n=zo.insecureContextCameraQueryError()),Promise.reject(n)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},o.getCamerasFromMediaDevices=function(){return eA(this,void 0,void 0,function(){var n,a,c,h,f,x,v;return tA(this,function(C){switch(C.label){case 0:return n=function(w){for(var A=w.getVideoTracks(),N=0,R=A;N<R.length;N++){var T=R[N];T.enabled=!1,T.stop(),w.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return a=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(c=C.sent(),h=[],f=0,x=c;f<x.length;f++)v=x[f],v.kind==="videoinput"&&h.push({id:v.deviceId,label:v.label});return n(a),[2,h]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,a){var c=function(f){for(var x=[],v=0,C=f;v<C.length;v++){var w=C[v];w.kind==="video"&&x.push({id:w.id,label:w.label})}n(x)},h=MediaStreamTrack;h.getSources(c)})},o})(),kn;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(kn||(kn={}));var sA=(function(){function o(){this.state=kn.NOT_STARTED,this.onGoingTransactionNewState=kn.UNKNOWN}return o.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},o.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===kn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=kn.UNKNOWN,this.directTransition(n)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===kn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=kn.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==kn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(n){switch(this.state){case kn.UNKNOWN:throw"Transition from unknown is not allowed";case kn.NOT_STARTED:this.failIfNewStateIs(n,[kn.PAUSED]);break;case kn.SCANNING:break;case kn.PAUSED:break}},o.prototype.failIfNewStateIs=function(n,a){for(var c=0,h=a;c<h.length;c++){var f=h[c];if(n===f)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},o})(),aA=(function(){function o(n){this.stateManager=n}return o.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},o.prototype.directTransition=function(n){this.stateManager.directTransition(n)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===kn.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==kn.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===kn.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===kn.PAUSED},o})(),rA=(function(){function o(){}return o.create=function(){return new aA(new sA)},o})(),iA=(function(){var o=function(n,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(c[f]=h[f])},o(n,a)};return function(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(n,a);function c(){this.constructor=n}n.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c)}})(),sa=(function(o){iA(n,o);function n(){return o!==null&&o.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n})(Oa),oA=(function(){function o(n,a){this.logger=a,this.fps=sa.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=sa.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?dy.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!Ya(this.qrbox)},o.create=function(n,a){return new o(n,a)},o})(),u0=(function(){function o(n,a){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var c;typeof a=="boolean"?this.verbose=a===!0:a&&(c=a,this.verbose=c.verbose===!0,c.experimentalFeatures),this.logger=new uy(this.verbose),this.qrcode=new YE(this.getSupportedFormats(a),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=rA.create()}return o.prototype.start=function(n,a,c,h){var f=this;if(!n)throw"cameraIdOrConfig is required";if(!c||typeof c!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;h?x=h:x=this.verbose?this.logger.log:function(){};var v=oA.create(a,this.logger);this.clearElement();var C=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=C,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:sa.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var N=this,R=this.stateManagerProxy.startTransition(kn.SCANNING);return new Promise(function(T,O){var D=w?v.videoConstraints:N.createVideoConstraints(n);if(!D){R.cancel(),O("videoConstraints should be defined");return}var U={};(!w||v.aspectRatio)&&(U.aspectRatio=v.aspectRatio);var H={onRenderSurfaceReady:function(B,P){N.setupUi(B,P,v),N.isScanning=!0,N.foreverScan(v,c,x)}};JE.failIfNotSupported().then(function(B){B.create(D).then(function(P){return P.render(f.element,U,H).then(function(Q){N.renderedCamera=Q,R.execute(),T(null)}).catch(function(Q){R.cancel(),O(Q)})}).catch(function(P){R.cancel(),O(zo.errorGettingUserMedia(P))})}).catch(function(B){R.cancel(),O(zo.cameraStreamingNotSupported())})})},o.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(kn.PAUSED),this.showPausedState(),(Ya(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,a=function(){n.stateManagerProxy.directTransition(kn.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){a();return}this.renderedCamera.resume(function(){a()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var a=this.stateManagerProxy.startTransition(kn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(n.element){var f=document.getElementById(sa.SHADED_REGION_ELEMENT_ID);f&&n.element.removeChild(f)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),c(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),a.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(n,a){return this.scanFileV2(n,a).then(function(c){return c.decodedText})},o.prototype.scanFileV2=function(n,a){var c=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ya(a)&&(a=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,f){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(n);var x=new Image;x.onload=function(){var v=x.width,C=x.height,w=document.getElementById(c.elementId),A=w.clientWidth?w.clientWidth:sa.DEFAULT_WIDTH,N=Math.max(w.clientHeight?w.clientHeight:C,sa.FILE_SCAN_MIN_HEIGHT),R=c.computeCanvasDrawConfig(v,C,A,N);if(a){var T=c.createCanvasElement(A,N,"qr-canvas-visible");T.style.display="inline-block",w.appendChild(T);var O=T.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=A,O.canvas.height=N,O.drawImage(x,0,0,v,C,R.x,R.y,R.width,R.height)}var D=sa.FILE_SCAN_HIDDEN_CANVAS_PADDING,U=Math.max(x.width,R.width),H=Math.max(x.height,R.height),B=U+2*D,P=H+2*D,Q=c.createCanvasElement(B,P);w.appendChild(Q);var Z=Q.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=B,Z.canvas.height=P,Z.drawImage(x,0,0,v,C,D,D,U,H);try{c.qrcode.decodeRobustlyAsync(Q).then(function(Y){h(wx.createFromQrcodeResult(Y))}).catch(f)}catch(Y){f("QR code parse error, error = ".concat(Y))}},x.onerror=f,x.onabort=f,x.onstalled=f,x.onsuspend=f,x.src=URL.createObjectURL(n)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return nA.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(n){if(n){if(!dy.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(n){var a=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return a;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],h=0,f=n.formatsToSupport;h<f.length;h++){var x=f[h];UE(x)?c.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(c.length===0)throw"None of formatsToSupport match supported values.";return c},o.prototype.getUseBarCodeDetectorIfSupported=function(n){if(Ya(n))return!0;if(!Ya(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(Ya(n.experimentalFeatures))return!0;var a=n.experimentalFeatures;return Ya(a.useBarCodeDetectorIfSupported)?!0:a.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(n,a,c){var h=this,f=c.qrbox;this.validateQrboxConfig(f);var x=this.toQrdimensions(n,a,f),v=function(w){if(w<sa.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(sa.MIN_QR_BOX_SIZE,"px.")},C=function(w){return w>n&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=n),w};v(x.width),v(x.height),x.width=C(x.width)},o.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(n,a,c){if(typeof c=="number")return{width:c,height:c};if(typeof c=="function")try{return c(n,a)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return c},o.prototype.setupUi=function(n,a,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(n,a,c);var h=Ya(c.qrbox)?{width:n,height:a}:c.qrbox;this.validateQrboxConfig(h);var f=this.toQrdimensions(n,a,h);f.height>a&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=c.isShadedBoxEnabled()&&f.height<=a,v={x:0,y:0,width:n,height:a},C=x?this.getShadedRegionBounds(n,a,f):v,w=this.createCanvasElement(C.width,C.height),A={willReadFrequently:!0},N=w.getContext("2d",A);N.canvas.width=C.width,N.canvas.height=C.height,this.element.append(w),x&&this.possiblyInsertShadingElement(this.element,n,a,f),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=N,this.canvasElement=w},o.prototype.createScannerPausedUiElement=function(n){var a=document.createElement("div");a.innerText=zo.scannerPaused(),a.style.display="none",a.style.position="absolute",a.style.top="0px",a.style.zIndex="1",a.style.background="rgba(9, 9, 9, 0.46)",a.style.color="#FFECEC",a.style.textAlign="center",a.style.width="100%",n.appendChild(a),this.scannerPausedUiElement=a},o.prototype.scanContext=function(n,a){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return n(h.text,wx.createFromQrcodeResult(h)),c.possiblyUpdateShaders(!0),!0}).catch(function(h){c.possiblyUpdateShaders(!1);var f=zo.codeParseError(h);return a(f,cy.createFrom(f)),!1})},o.prototype.foreverScan=function(n,a,c){var h=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),x=f.videoWidth/f.clientWidth,v=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*x,w=this.qrRegion.height*v,A=this.qrRegion.x*x,N=this.qrRegion.y*v;this.context.drawImage(f,A,N,C,w,0,0,this.qrRegion.width,this.qrRegion.height);var R=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(n,a,c)},h.getTimeoutFps(n.fps))};this.scanContext(a,c).then(function(T){!T&&n.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(a,c).finally(function(){R()})):R()}).catch(function(T){h.logger.logError("Error happend while scanning context",T),R()})}},o.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var a="facingMode",c="deviceId",h={user:!0,environment:!0},f="exact",x=function(O){if(O in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},v=Object.keys(n);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var C=Object.keys(n)[0];if(C!==a&&C!==c)throw"Only '".concat(a,"' and '").concat(c,"' ")+" are supported for 'cameraIdOrConfig'";if(C===a){var w=n.facingMode;if(typeof w=="string"){if(x(w))return{facingMode:w}}else if(typeof w=="object")if(f in w){if(x(w["".concat(f)]))return{facingMode:{exact:w["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var A=typeof w;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var N=n.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(f in N)return{deviceId:{exact:N["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var R=typeof N;throw"Invalid type of 'deviceId' = ".concat(R)}}}var T=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},o.prototype.computeCanvasDrawConfig=function(n,a,c,h){if(n<=c&&a<=h){var f=(c-n)/2,x=(h-a)/2;return{x:f,y:x,width:n,height:a}}else{var v=n,C=a;return n>c&&(a=c/n*a,n=c),a>h&&(n=h/a*n,a=h),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(C)+" to ".concat(n,"X").concat(a,".")),this.computeCanvasDrawConfig(n,a,c,h)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},o.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(a){a.style.backgroundColor=n?sa.BORDER_SHADER_MATCH_COLOR:sa.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(n,a,c){var h=n,f=a,x=document.createElement("canvas");return x.style.width="".concat(h,"px"),x.style.height="".concat(f,"px"),x.style.display="none",x.id=Ya(c)?"qr-canvas":c,x},o.prototype.getShadedRegionBounds=function(n,a,c){if(c.width>n||c.height>a)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-c.width)/2,y:(a-c.height)/2,width:c.width,height:c.height}},o.prototype.possiblyInsertShadingElement=function(n,a,c,h){if(!(a-h.width<1||c-h.height<1)){var f=document.createElement("div");f.style.position="absolute";var x=(a-h.width)/2,v=(c-h.height)/2;if(f.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(sa.SHADED_REGION_ELEMENT_ID),a-h.width<11||c-h.height<11)this.hasBorderShaders=!1;else{var C=5,w=40;this.insertShaderBorders(f,w,C,-C,null,0,!0),this.insertShaderBorders(f,w,C,-C,null,0,!1),this.insertShaderBorders(f,w,C,null,-C,0,!0),this.insertShaderBorders(f,w,C,null,-C,0,!1),this.insertShaderBorders(f,C,w+C,-C,null,-C,!0),this.insertShaderBorders(f,C,w+C,null,-C,-C,!0),this.insertShaderBorders(f,C,w+C,-C,null,-C,!1),this.insertShaderBorders(f,C,w+C,null,-C,-C,!1),this.hasBorderShaders=!0}n.append(f)}},o.prototype.insertShaderBorders=function(n,a,c,h,f,x,v){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=sa.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(a,"px"),C.style.height="".concat(c,"px"),h!==null&&(C.style.top="".concat(h,"px")),f!==null&&(C.style.bottom="".concat(f,"px")),v?C.style.left="".concat(x,"px"):C.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),n.appendChild(C)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(n){return 1e3/n},o})(),B0="data:image/svg+xml;base64,",lA=B0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",cA=B0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Tx=B0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",uA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",jx=(function(){function o(){}return o.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},o})(),dA=(function(){function o(){this.data=jx.createDefault();var n=localStorage.getItem(o.LOCAL_STORAGE_KEY);n?this.data=JSON.parse(n):this.reset()}return o.prototype.hasCameraPermissions=function(){return this.data.hasPermission},o.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},o.prototype.setHasPermission=function(n){this.data.hasPermission=n,this.flush()},o.prototype.setLastUsedCameraId=function(n){this.data.lastUsedCameraId=n,this.flush()},o.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},o.prototype.reset=function(){this.data=jx.createDefault(),this.flush()},o.prototype.flush=function(){localStorage.setItem(o.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},o.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",o})(),hA=(function(){function o(){this.infoDiv=document.createElement("div")}return o.prototype.renderInto=function(n){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=bx.poweredBy();var a=document.createElement("a");a.innerText="ScanApp",a.href="https://scanapp.org",a.target="new",a.style.color="white",this.infoDiv.appendChild(a);var c=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(c),this.infoDiv.appendChild(h);var f=document.createElement("a");f.innerText=bx.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),n.appendChild(this.infoDiv)},o.prototype.show=function(){this.infoDiv.style.display="block"},o.prototype.hide=function(){this.infoDiv.style.display="none"},o})(),fA=(function(){function o(n,a){this.isShowingInfoIcon=!0,this.onTapIn=n,this.onTapOut=a,this.infoIcon=document.createElement("img")}return o.prototype.renderInto=function(n){var a=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Tx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(c){return a.onHoverIn()},this.infoIcon.onmouseout=function(c){return a.onHoverOut()},this.infoIcon.onclick=function(c){return a.onClick()},n.appendChild(this.infoIcon)},o.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},o.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},o.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=uA,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Tx,this.infoIcon.style.opacity="0.6")},o})(),gA=(function(){function o(){var n=this;this.infoDiv=new hA,this.infoIcon=new fA(function(){n.infoDiv.show()},function(){n.infoDiv.hide()})}return o.prototype.renderInto=function(n){this.infoDiv.renderInto(n),this.infoIcon.renderInto(n)},o})(),mA=function(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})},pA=function(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Rx=(function(){function o(){}return o.hasPermissions=function(){return mA(this,void 0,void 0,function(){var n,a,c,h;return pA(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(n=f.sent(),a=0,c=n;a<c.length;a++)if(h=c[a],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},o})(),ii=(function(){function o(n){this.supportedScanTypes=this.validateAndReturnScanTypes(n)}return o.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},o.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},o.prototype.isCameraScanRequired=function(){for(var n=0,a=this.supportedScanTypes;n<a.length;n++){var c=a[n];if(o.isCameraScanType(c))return!0}return!1},o.isCameraScanType=function(n){return n===vr.SCAN_TYPE_CAMERA},o.isFileScanType=function(n){return n===vr.SCAN_TYPE_FILE},o.prototype.validateAndReturnScanTypes=function(n){if(!n||n.length===0)return Oa.DEFAULT_SUPPORTED_SCAN_TYPE;var a=Oa.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(n.length>a)throw"Max ".concat(a," values expected for ")+"supportedScanTypes";for(var c=0,h=n;c<h.length;c++){var f=h[c];if(!Oa.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return n},o})(),oa=(function(){function o(){}return o.ALL_ELEMENT_CLASS="html5-qrcode-element",o.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",o.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",o.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",o.TORCH_BUTTON_ID="html5-qrcode-button-torch",o.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",o.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",o.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",o.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",o.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",o.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",o})(),xr=(function(){function o(){}return o.createElement=function(n,a){var c=document.createElement(n);return c.id=a,c.classList.add(oa.ALL_ELEMENT_CLASS),n==="button"&&c.setAttribute("type","button"),c},o})(),fy=function(o,n,a,c){function h(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function v(A){try{w(c.next(A))}catch(N){x(N)}}function C(A){try{w(c.throw(A))}catch(N){x(N)}}function w(A){A.done?f(A.value):h(A.value).then(v,C)}w((c=c.apply(o,n||[])).next())})},gy=function(o,n){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,h,f,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(A){return C([w,A])}}function C(w){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(a=0)),a;)try{if(c=1,h&&(f=w[0]&2?h.return:w[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,w[1])).done)return f;switch(h=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return a.label++,{value:w[1],done:!1};case 5:a.label++,h=w[1],w=[0];continue;case 7:w=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){a=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){a.label=w[1];break}if(w[0]===6&&a.label<f[1]){a.label=f[1],f=w;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(w);break}f[2]&&a.ops.pop(),a.trys.pop();continue}w=n.call(o,a)}catch(A){w=[6,A],h=0}finally{c=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ix=(function(){function o(n,a,c){this.isTorchOn=!1,this.torchCapability=n,this.buttonController=a,this.onTorchActionFailureCallback=c}return o.prototype.isTorchEnabled=function(){return this.isTorchOn},o.prototype.flipState=function(){return fy(this,void 0,void 0,function(){var n,a;return gy(this,function(c){switch(c.label){case 0:this.buttonController.disable(),n=!this.isTorchOn,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.torchCapability.apply(n)];case 2:return c.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),n),[3,4];case 3:return a=c.sent(),this.propagateFailure(n,a),this.buttonController.enable(),[3,4];case 4:return[2]}})})},o.prototype.updateUiBasedOnLatestSettings=function(n,a){n===a?(this.buttonController.setText(a?ln.torchOffButton():ln.torchOnButton()),this.isTorchOn=a):this.propagateFailure(a),this.buttonController.enable()},o.prototype.propagateFailure=function(n,a){var c=n?ln.torchOnFailedMessage():ln.torchOffFailedMessage();a&&(c+="; Error = "+a),this.onTorchActionFailureCallback(c)},o.prototype.reset=function(){this.isTorchOn=!1},o})(),xA=(function(){function o(n,a){this.onTorchActionFailureCallback=a,this.torchButton=xr.createElement("button",oa.TORCH_BUTTON_ID),this.torchController=new Ix(n,this,a)}return o.prototype.render=function(n,a){var c=this;this.torchButton.innerText=ln.torchOnButton(),this.torchButton.style.display=a.display,this.torchButton.style.marginLeft=a.marginLeft;var h=this;this.torchButton.addEventListener("click",function(f){return fy(c,void 0,void 0,function(){return gy(this,function(x){switch(x.label){case 0:return[4,h.torchController.flipState()];case 1:return x.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove(oa.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add(oa.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove(oa.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add(oa.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),n.appendChild(this.torchButton)},o.prototype.updateTorchCapability=function(n){this.torchController=new Ix(n,this,this.onTorchActionFailureCallback)},o.prototype.getTorchButton=function(){return this.torchButton},o.prototype.hide=function(){this.torchButton.style.display="none"},o.prototype.show=function(){this.torchButton.style.display="inline-block"},o.prototype.disable=function(){this.torchButton.disabled=!0},o.prototype.enable=function(){this.torchButton.disabled=!1},o.prototype.setText=function(n){this.torchButton.innerText=n},o.prototype.reset=function(){this.torchButton.innerText=ln.torchOnButton(),this.torchController.reset()},o.create=function(n,a,c,h){var f=new o(a,h);return f.render(n,c),f},o})(),yA=(function(){function o(n,a,c){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=a?"block":"none",n.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=xr.createElement("button",oa.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(v){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=xr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(v){if(!(v==null||v.target==null)){var C=v.target;if(!(C.files&&C.files.length===0)){var w=C.files,A=w[0],N=A.name;f.setImageNameToButton(N),c(A)}}});var x=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(x),this.fileBasedScanRegion.addEventListener("dragenter",function(v){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),v.stopPropagation(),v.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(v){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),v.stopPropagation(),v.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(v){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),v.stopPropagation(),v.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(v){v.stopPropagation(),v.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var C=v.dataTransfer;if(C){var w=C.files;if(!w||w.length===0)return;for(var A=!1,N=0;N<w.length;++N){var R=w.item(N);if(R){var T=/image.*/;if(R.type.match(T)){A=!0;var O=R.name;f.setImageNameToButton(O),c(R),x.innerText=ln.dragAndDropMessage();break}}}A||(x.innerText=ln.dragAndDropMessageOnlyImages())}})}return o.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},o.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},o.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},o.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},o.prototype.createFileBasedScanRegion=function(){var n=document.createElement("div");return n.style.textAlign="center",n.style.margin="auto",n.style.width="80%",n.style.maxWidth="600px",n.style.border=this.fileBasedScanRegionDefaultBorder(),n.style.padding="10px",n.style.marginBottom="10px",n},o.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},o.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},o.prototype.createDragAndDropMessage=function(){var n=document.createElement("div");return n.innerText=ln.dragAndDropMessage(),n.style.fontWeight="400",n},o.prototype.setImageNameToButton=function(n){var a=20;if(n.length>a){var c=n.substring(0,8),h=n.length,f=n.substring(h-8,h);n="".concat(c,"....").concat(f)}var x=ln.fileSelectionChooseAnother()+" - "+n;this.fileSelectionButton.innerText=x},o.prototype.setInitialValueToButton=function(){var n=ln.fileSelectionChooseImage()+" - "+ln.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=n},o.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},o.create=function(n,a,c){var h=new o(n,a,c);return h},o})(),wA=(function(){function o(n){this.selectElement=xr.createElement("select",oa.CAMERA_SELECTION_SELECT_ID),this.cameras=n,this.options=[]}return o.prototype.render=function(n){var a=document.createElement("span");a.style.marginRight="10px";var c=this.cameras.length;if(c===0)throw new Error("No cameras found");if(c===1)a.style.display="none";else{var h=ln.selectCamera();a.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var f=1,x=0,v=this.cameras;x<v.length;x++){var C=v[x],w=C.id,A=C.label==null?w:C.label;(!A||A==="")&&(A=[ln.anonymousCameraPrefix(),f++].join(" "));var N=document.createElement("option");N.value=w,N.innerText=A,this.options.push(N),this.selectElement.appendChild(N)}a.appendChild(this.selectElement),n.appendChild(a)},o.prototype.disable=function(){this.selectElement.disabled=!0},o.prototype.isDisabled=function(){return this.selectElement.disabled===!0},o.prototype.enable=function(){this.selectElement.disabled=!1},o.prototype.getValue=function(){return this.selectElement.value},o.prototype.hasValue=function(n){for(var a=0,c=this.options;a<c.length;a++){var h=c[a];if(h.value===n)return!0}return!1},o.prototype.setValue=function(n){if(!this.hasValue(n))throw new Error("".concat(n," is not present in the camera list."));this.selectElement.value=n},o.prototype.hasSingleItem=function(){return this.cameras.length===1},o.prototype.numCameras=function(){return this.cameras.length},o.create=function(n,a){var c=new o(a);return c.render(n),c},o})(),bA=(function(){function o(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=xr.createElement("input",oa.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return o.prototype.render=function(n,a){this.zoomElementContainer.style.display=a?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",n.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var c=ln.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(c),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},o.prototype.onValueChange=function(){var n=ln.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},o.prototype.setValues=function(n,a,c,h){this.rangeInput.min=n.toString(),this.rangeInput.max=a.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=c.toString(),this.onValueChange()},o.prototype.show=function(){this.zoomElementContainer.style.display="block"},o.prototype.hide=function(){this.zoomElementContainer.style.display="none"},o.prototype.setOnCameraZoomValueChangeCallback=function(n){this.onChangeCallback=n},o.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},o.create=function(n,a){var c=new o;return c.render(n,a),c},o})(),aa;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(aa||(aa={}));function vA(o){return{fps:o.fps,qrbox:o.qrbox,aspectRatio:o.aspectRatio,disableFlip:o.disableFlip,videoConstraints:o.videoConstraints}}function CA(o,n){return{formatsToSupport:o.formatsToSupport,useBarCodeDetectorIfSupported:o.useBarCodeDetectorIfSupported,experimentalFeatures:o.experimentalFeatures,verbose:n}}var my=(function(){function o(n,a,c){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=n,this.config=this.createConfig(a),this.verbose=c===!0,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.scanTypeSelector=new ii(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new uy(this.verbose),this.persistedDataManager=new dA,a.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return o.prototype.render=function(n,a){var c=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,x){if(n)n(f,x);else{if(c.lastMatchFound===f)return;c.lastMatchFound=f,c.setHeaderMessage(ln.lastMatch(f),aa.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,x){a&&a(f,x)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new u0(this.getScanRegionId(),CA(this.config,this.verbose))},o.prototype.pause=function(n){(Ya(n)||n!==!0)&&(n=!1),this.getHtml5QrcodeOrFail().pause(n)},o.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},o.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},o.prototype.clear=function(){var n=this,a=function(){var c=document.getElementById(n.elementId);c&&(c.innerHTML="",n.resetBasicLayout(c))};return this.html5Qrcode?new Promise(function(c,h){if(!n.html5Qrcode){c();return}n.html5Qrcode.isScanning?n.html5Qrcode.stop().then(function(f){if(!n.html5Qrcode){c();return}n.html5Qrcode.clear(),a(),c()}).catch(function(f){n.verbose&&n.logger.logError("Unable to stop qrcode scanner",f),h(f)}):(n.html5Qrcode.clear(),a(),c())}):Promise.resolve()},o.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},o.prototype.applyVideoConstraints=function(n){return this.getHtml5QrcodeOrFail().applyVideoConstraints(n)},o.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},o.prototype.createConfig=function(n){return n?(n.fps||(n.fps=Oa.SCAN_DEFAULT_FPS),n.rememberLastUsedCamera!==!Oa.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(n.rememberLastUsedCamera=Oa.DEFAULT_REMEMBER_LAST_CAMERA_USED),n.supportedScanTypes||(n.supportedScanTypes=Oa.DEFAULT_SUPPORTED_SCAN_TYPE),n):{fps:Oa.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Oa.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Oa.DEFAULT_SUPPORTED_SCAN_TYPE}},o.prototype.createBasicLayout=function(n){n.style.position="relative",n.style.padding="0px",n.style.border="1px solid silver",this.createHeader(n);var a=document.createElement("div"),c=this.getScanRegionId();a.id=c,a.style.width="100%",a.style.minHeight="100px",a.style.textAlign="center",n.appendChild(a),ii.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),f=this.getDashboardId();h.id=f,h.style.width="100%",n.appendChild(h),this.setupInitialDashboard(h)},o.prototype.resetBasicLayout=function(n){n.style.border="none"},o.prototype.setupInitialDashboard=function(n){this.createSection(n),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},o.prototype.createHeader=function(n){var a=document.createElement("div");a.style.textAlign="left",a.style.margin="0px",n.appendChild(a);var c=new gA;c.renderInto(a);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",a.appendChild(h)},o.prototype.createSection=function(n){var a=document.createElement("div");a.id=this.getDashboardSectionId(),a.style.width="100%",a.style.padding="10px 0px 10px 0px",a.style.textAlign="left",n.appendChild(a)},o.prototype.createCameraListUi=function(n,a,c){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(ln.cameraPermissionRequesting());var f=function(){c||h.createPermissionButton(n,a)};u0.getCameras().then(function(x){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),x&&x.length>0?(n.removeChild(a),h.renderCameraSelection(x)):(h.setHeaderMessage(ln.noCameraFound(),aa.STATUS_WARNING),f())}).catch(function(x){h.persistedDataManager.setHasPermission(!1),c?c.disabled=!1:f(),h.setHeaderMessage(x,aa.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},o.prototype.createPermissionButton=function(n,a){var c=this,h=xr.createElement("button",this.getCameraPermissionButtonId());h.innerText=ln.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,c.createCameraListUi(n,a,h)}),a.appendChild(h)},o.prototype.createPermissionsUi=function(n,a){var c=this;if(ii.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Rx.hasPermissions().then(function(h){h?c.createCameraListUi(n,a):(c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(n,a))}).catch(function(h){c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(n,a)});return}this.createPermissionButton(n,a)},o.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");n.appendChild(a);var c=document.createElement("div");c.id=this.getDashboardSectionCameraScanRegionId(),c.style.display=ii.isCameraScanType(this.currentScanType)?"block":"none",a.appendChild(c);var h=document.createElement("div");h.style.textAlign="center",c.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(c,h),this.renderFileScanUi(a)},o.prototype.renderFileScanUi=function(n){var a=ii.isFileScanType(this.currentScanType),c=this,h=function(f){if(!c.html5Qrcode)throw"html5Qrcode not defined";ii.isFileScanType(c.currentScanType)&&(c.setHeaderMessage(ln.loadingImage()),c.html5Qrcode.scanFileV2(f,!0).then(function(x){c.resetHeaderMessage(),c.qrCodeSuccessCallback(x.decodedText,x)}).catch(function(x){c.setHeaderMessage(x,aa.STATUS_WARNING),c.qrCodeErrorCallback(x,cy.createFrom(x))}))};this.fileSelectionUi=yA.create(n,a,h)},o.prototype.renderCameraSelection=function(n){var a=this,c=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var f=bA.create(h,!1),x=function(D){var U=D.zoomFeature();if(U.isSupported()){f.setOnCameraZoomValueChangeCallback(function(B){U.apply(B)});var H=1;a.config.defaultZoomValueIfSupported&&(H=a.config.defaultZoomValueIfSupported),H=PE(H,U.min(),U.max()),f.setValues(U.min(),U.max(),H,U.step()),f.show()}},v=wA.create(h,n),C=document.createElement("span"),w=xr.createElement("button",oa.CAMERA_START_BUTTON_ID);w.innerText=ln.scanButtonStartScanningText(),C.appendChild(w);var A=xr.createElement("button",oa.CAMERA_STOP_BUTTON_ID);A.innerText=ln.scanButtonStopScanningText(),A.style.display="none",A.disabled=!0,C.appendChild(A);var N,R=function(D){if(!D.torchFeature().isSupported()){N&&N.hide();return}N?N.updateTorchCapability(D.torchFeature()):N=xA.create(C,D.torchFeature(),{display:"none",marginLeft:"5px"},function(U){c.setHeaderMessage(U,aa.STATUS_WARNING)}),N.show()};h.appendChild(C);var T=function(D){D||(w.style.display="none"),w.innerText=ln.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,D&&(w.style.display="inline-block")};if(w.addEventListener("click",function(D){w.innerText=ln.scanButtonScanningStarting(),v.disable(),w.disabled=!0,w.style.opacity="0.5",a.scanTypeSelector.hasMoreThanOneScanType()&&c.showHideScanTypeSwapLink(!1),c.resetHeaderMessage();var U=v.getValue();c.persistedDataManager.setLastUsedCameraId(U),c.html5Qrcode.start(U,vA(c.config),c.qrCodeSuccessCallback,c.qrCodeErrorCallback).then(function(H){A.disabled=!1,A.style.display="inline-block",T(!1);var B=c.html5Qrcode.getRunningTrackCameraCapabilities();a.config.showTorchButtonIfSupported===!0&&R(B),a.config.showZoomSliderIfSupported===!0&&x(B)}).catch(function(H){c.showHideScanTypeSwapLink(!0),v.enable(),T(!0),c.setHeaderMessage(H,aa.STATUS_WARNING)})}),v.hasSingleItem()&&w.click(),A.addEventListener("click",function(D){if(!c.html5Qrcode)throw"html5Qrcode not defined";A.disabled=!0,c.html5Qrcode.stop().then(function(U){a.scanTypeSelector.hasMoreThanOneScanType()&&c.showHideScanTypeSwapLink(!0),v.enable(),w.disabled=!1,A.style.display="none",w.style.display="inline-block",N&&(N.reset(),N.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),c.insertCameraScanImageToScanRegion()}).catch(function(U){A.disabled=!1,c.setHeaderMessage(U,aa.STATUS_WARNING)})}),c.persistedDataManager.getLastUsedCameraId()){var O=c.persistedDataManager.getLastUsedCameraId();v.hasValue(O)?(v.setValue(O),w.click()):c.persistedDataManager.resetLastUsedCameraId()}},o.prototype.createSectionSwap=function(){var n=this,a=ln.textIfCameraScanSelected(),c=ln.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var x=xr.createElement("span",this.getDashboardSectionSwapLinkId());x.style.textDecoration="underline",x.style.cursor="pointer",x.innerText=ii.isCameraScanType(this.currentScanType)?a:c,x.addEventListener("click",function(){if(!n.sectionSwapAllowed){n.verbose&&n.logger.logError("Section swap called when not allowed");return}n.resetHeaderMessage(),n.fileSelectionUi.resetValue(),n.sectionSwapAllowed=!1,ii.isCameraScanType(n.currentScanType)?(n.clearScanRegion(),n.getCameraScanRegion().style.display="none",n.fileSelectionUi.show(),x.innerText=c,n.currentScanType=vr.SCAN_TYPE_FILE,n.insertFileScanImageToScanRegion()):(n.clearScanRegion(),n.getCameraScanRegion().style.display="block",n.fileSelectionUi.hide(),x.innerText=a,n.currentScanType=vr.SCAN_TYPE_CAMERA,n.insertCameraScanImageToScanRegion(),n.startCameraScanIfPermissionExistsOnSwap()),n.sectionSwapAllowed=!0}),f.appendChild(x),h.appendChild(f)},o.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var n=this,a=this;if(this.persistedDataManager.hasCameraPermissions()){Rx.hasPermissions().then(function(c){if(c){var h=document.getElementById(a.getCameraPermissionButtonId());if(!h)throw n.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else a.persistedDataManager.setHasPermission(!1)}).catch(function(c){a.persistedDataManager.setHasPermission(!1)});return}},o.prototype.resetHeaderMessage=function(){var n=document.getElementById(this.getHeaderMessageContainerId());n.style.display="none"},o.prototype.setHeaderMessage=function(n,a){a||(a=aa.STATUS_DEFAULT);var c=this.getHeaderMessageDiv();switch(c.innerText=n,c.style.display="block",a){case aa.STATUS_SUCCESS:c.style.background="rgba(106, 175, 80, 0.26)",c.style.color="#477735";break;case aa.STATUS_WARNING:c.style.background="rgba(203, 36, 49, 0.14)",c.style.color="#cb2431";break;case aa.STATUS_DEFAULT:default:c.style.background="rgba(0, 0, 0, 0)",c.style.color="rgb(17, 17, 17)";break}},o.prototype.showHideScanTypeSwapLink=function(n){this.scanTypeSelector.hasMoreThanOneScanType()&&(n!==!0&&(n=!1),this.sectionSwapAllowed=n,this.getDashboardSectionSwapLink().style.display=n?"inline-block":"none")},o.prototype.insertCameraScanImageToScanRegion=function(){var n=this,a=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){a.innerHTML="<br>",a.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(c){a.innerHTML="<br>",a.appendChild(n.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=lA,this.cameraScanImage.alt=ln.cameraScanAltText()},o.prototype.insertFileScanImageToScanRegion=function(){var n=this,a=document.getElementById(this.getScanRegionId());if(this.fileScanImage){a.innerHTML="<br>",a.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(c){a.innerHTML="<br>",a.appendChild(n.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=cA,this.fileScanImage.alt=ln.fileScanAltText()},o.prototype.clearScanRegion=function(){var n=document.getElementById(this.getScanRegionId());n.innerHTML=""},o.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},o.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},o.prototype.getDashboardSectionSwapLinkId=function(){return oa.SCAN_TYPE_CHANGE_ANCHOR_ID},o.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},o.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},o.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},o.prototype.getCameraPermissionButtonId=function(){return oa.CAMERA_PERMISSION_BUTTON_ID},o.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},o.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},o.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},o})();const _A=Object.freeze(Object.defineProperty({__proto__:null,Html5Qrcode:u0,get Html5QrcodeScanType(){return vr},Html5QrcodeScanner:my,get Html5QrcodeScannerState(){return kn},get Html5QrcodeSupportedFormats(){return Ye}},Symbol.toStringTag,{value:"Module"})),py=({onScan:o,onClose:n,onError:a})=>{const c=M.useRef(null),h=M.useRef(null),[f,x]=M.useState(!1),[v,C]=M.useState("");M.useEffect(()=>()=>{N()},[]);const w=()=>{try{C(""),x(!0);const T={fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1,videoConstraints:{facingMode:"environment"}};h.current=new my("qr-reader",T,!1),h.current.render((O,D)=>{A(O,D)},O=>{O.includes("No QR code found")||console.warn("QR scan error:",O)})}catch(T){console.error("Error initializing QR scanner:",T),C("Failed to initialize camera. Please check camera permissions."),x(!1),a&&a(T)}},A=(T,O)=>{try{N(),x(!1);let D;try{D=JSON.parse(T)}catch{D={type:"url",url:T}}o&&o(D)}catch(D){console.error("Error processing QR scan result:",D),C("Invalid QR code format")}},N=()=>{if(h.current){try{h.current.clear()}catch(T){console.warn("Error cleaning up QR scanner:",T)}h.current=null}},R=async T=>{const O=T.target.files[0];if(O)try{C(""),x(!0);const{Html5Qrcode:D}=await T0(async()=>{const{Html5Qrcode:B}=await Promise.resolve().then(()=>_A);return{Html5Qrcode:B}},void 0,import.meta.url),U=new D("hidden-qr-reader"),H=await U.scanFile(O,!1);U.clear(),A(H,{})}catch(D){console.error("Error scanning uploaded file:",D),C("Failed to scan QR code from image. Please ensure the image contains a valid QR code."),x(!1)}};return i.jsxs("div",{className:"qr-scanner-modal",children:[i.jsx("div",{id:"hidden-qr-reader",style:{display:"none"}}),i.jsxs("div",{className:"qr-scanner-content",children:[i.jsxs("div",{className:"qr-scanner-header",children:[i.jsx("h3",{children:"Scan QR Code"}),i.jsx("button",{className:"qr-close-btn",onClick:n,children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"qr-scanner-body",children:v?i.jsxs("div",{className:"qr-error",children:[i.jsx("div",{className:"error-icon",children:""}),i.jsx("p",{children:v}),i.jsxs("button",{className:"qr-retry-btn",onClick:w,children:[i.jsx("i",{className:"fas fa-redo"}),"Try Again"]})]}):f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"qr-reader-container",children:i.jsx("div",{id:"qr-reader",ref:c,className:"qr-reader"})}),i.jsxs("div",{className:"qr-scanner-info",children:[i.jsx("p",{children:"Position the QR code within the frame"}),i.jsxs("div",{className:"qr-scanner-tips",children:[i.jsxs("div",{className:"tip",children:[i.jsx("i",{className:"fas fa-lightbulb"}),i.jsx("span",{children:"Ensure good lighting"})]}),i.jsxs("div",{className:"tip",children:[i.jsx("i",{className:"fas fa-hand-paper"}),i.jsx("span",{children:"Hold steady"})]})]})]}),i.jsx("div",{className:"qr-scanner-actions",children:i.jsxs("button",{className:"qr-stop-btn",onClick:()=>{N(),x(!1)},children:[i.jsx("i",{className:"fas fa-stop"}),"Stop Scanning"]})})]}):i.jsxs("div",{className:"qr-start-section",children:[i.jsx("div",{className:"qr-start-icon",children:i.jsx("i",{className:"fas fa-camera"})}),i.jsx("p",{children:"Scan QR codes to connect with CaBa users"}),i.jsxs("button",{className:"qr-start-btn",onClick:w,children:[i.jsx("i",{className:"fas fa-qrcode"}),"Start Scanning"]}),i.jsxs("div",{className:"qr-alternative",children:[i.jsx("span",{children:"or"}),i.jsxs("label",{className:"qr-upload-btn",children:[i.jsx("i",{className:"fas fa-upload"}),"Upload from Gallery",i.jsx("input",{type:"file",accept:"image/*",onChange:R,style:{display:"none"}})]})]})]})})]})]})},ed=()=>{const o=us(),n=Cr(),a=[{path:"/",icon:Ma,label:"Chats"},{path:"/calls",icon:Hs,label:"Calls"},{path:"/qr",icon:ey,label:"QR Code"},{path:"/news",icon:ci,label:"News"},{path:"/settings",icon:Xl,label:"Settings"}],c=h=>h==="/"?n.pathname==="/"||n.pathname.startsWith("/chat"):n.pathname.startsWith(h);return i.jsx("nav",{className:"bottom-nav",children:a.map(({path:h,icon:f,label:x})=>i.jsxs("button",{className:`nav-item ${c(h)?"active":""}`,onClick:()=>o(h),children:[i.jsx(f,{size:20}),i.jsx("span",{className:"label",children:x})]},h))})},SA=()=>{const o=us(),{user:n}=La(),[a,c]=M.useState(!1),[h,f]=M.useState(!1),[x,v]=M.useState(null),[C,w]=M.useState(!1),A=O=>{f(!1);try{const D=JSON.parse(O);D.id&&D.name?(v(D),w(!0)):D.url&&window.open(D.url,"_blank")}catch{O.startsWith("http")?window.open(O,"_blank"):alert("Invalid QR code format")}},N=()=>{if(!x)return;let O=JSON.parse(localStorage.getItem("CaBa_contacts")||"[]");O.some(D=>D.id===x.id)?alert("User already in contacts"):(O.push({id:x.id,name:x.name,phone:x.phone,about:x.about,addedAt:new Date().toISOString()}),localStorage.setItem("CaBa_contacts",JSON.stringify(O)),alert(`${x.name} added to contacts!`)),w(!1),v(null)},R=()=>{x&&(o(`/chat/new/${x.id}`),w(!1),v(null))};if(!n)return i.jsxs("div",{className:"qr-page",children:[i.jsxs("div",{className:"qr-page-header",children:[i.jsx("button",{className:"back-btn",onClick:()=>o("/"),children:i.jsx("i",{className:"fas fa-arrow-left"})}),i.jsx("h1",{children:"QR Code"})]}),i.jsx("div",{className:"qr-page-content",children:i.jsx("p",{children:"Please log in to use QR code features"})})]});console.log("QR Page - User object:",n);const T={id:n.id||"",name:n.name||n.user_metadata?.full_name||n.user_metadata?.name||"User",phone:n.phone||n.user_metadata?.phone||"",email:n.email||""};return i.jsxs("div",{className:"qr-page",children:[i.jsxs("div",{className:"qr-page-header",children:[i.jsx("button",{className:"back-btn",onClick:()=>o("/"),children:i.jsx("i",{className:"fas fa-arrow-left"})}),i.jsx("h1",{children:"QR Code"})]}),i.jsxs("div",{className:"qr-page-content",children:[i.jsxs("div",{className:"qr-options",children:[i.jsxs("div",{className:"qr-option-card",onClick:()=>c(!0),children:[i.jsx("div",{className:"qr-option-icon",children:i.jsx("i",{className:"fas fa-qrcode"})}),i.jsx("h3",{children:"My QR Code"}),i.jsx("p",{children:"Generate and share your profile QR code"})]}),i.jsxs("div",{className:"qr-option-card",onClick:()=>f(!0),children:[i.jsx("div",{className:"qr-option-icon",children:i.jsx("i",{className:"fas fa-camera"})}),i.jsx("h3",{children:"Scan QR Code"}),i.jsx("p",{children:"Scan QR codes to add contacts or visit links"})]})]}),i.jsxs("div",{className:"qr-info-section",children:[i.jsx("h3",{children:"How QR Codes Work"}),i.jsxs("div",{className:"qr-info-grid",children:[i.jsxs("div",{className:"info-item",children:[i.jsx("i",{className:"fas fa-user-plus"}),i.jsx("h4",{children:"Add Contacts"}),i.jsx("p",{children:"Scan someone's QR code to instantly add them to your contacts"})]}),i.jsxs("div",{className:"info-item",children:[i.jsx("i",{className:"fas fa-share"}),i.jsx("h4",{children:"Share Profile"}),i.jsx("p",{children:"Share your QR code so others can view your profile and start chatting"})]}),i.jsxs("div",{className:"info-item",children:[i.jsx("i",{className:"fas fa-mobile-alt"}),i.jsx("h4",{children:"Cross-Platform"}),i.jsx("p",{children:"Works across all devices and platforms"})]}),i.jsxs("div",{className:"info-item",children:[i.jsx("i",{className:"fas fa-shield-alt"}),i.jsx("h4",{children:"Secure"}),i.jsx("p",{children:"End-to-end encrypted and secure"})]})]})]})]}),a&&n&&i.jsx(oy,{userId:T.id,userName:T.name,userPhone:T.phone,onClose:()=>c(!1)}),h&&i.jsx(py,{onScan:A,onClose:()=>f(!1)}),C&&x&&i.jsx("div",{className:"modal",style:{display:"flex"},children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"User Found"}),i.jsx("button",{className:"close-modal",onClick:()=>{w(!1),v(null)},children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsxs("div",{className:"modal-body",style:{textAlign:"center"},children:[i.jsx("div",{style:{marginBottom:"20px"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:[i.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--primary-color)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px",color:"white",fontSize:"24px"},children:x.name.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2)}),i.jsxs("div",{style:{textAlign:"left"},children:[i.jsx("h3",{style:{margin:"0",color:"var(--text-primary)"},children:x.name}),i.jsx("p",{style:{margin:"5px 0",color:"var(--text-secondary)"},children:x.phone}),x.about&&i.jsx("p",{style:{margin:"0",color:"var(--text-secondary)",fontSize:"14px"},children:x.about})]})]})}),i.jsxs("div",{className:"action-buttons",style:{display:"flex",gap:"10px",justifyContent:"center"},children:[i.jsxs("button",{className:"btn-primary",onClick:N,children:[i.jsx("i",{className:"fas fa-user-plus"}),"Add to Contacts"]}),i.jsxs("button",{className:"btn-secondary",onClick:R,children:[i.jsx("i",{className:"fas fa-comments"}),"Start Chat"]})]})]})]})}),i.jsx(ed,{})]})},EA=()=>{const{supabase:o}=vs(),{user:n,loading:a}=La(),[c,h]=M.useState(null),[f,x]=M.useState(!0),[v,C]=M.useState({chats:0,calls:0,contacts:0}),[w,A]=M.useState(!1),[N,R]=M.useState(!1),[T,O]=M.useState(!1),[D,U]=M.useState(!1),[H,B]=M.useState(!1),[P,Q]=M.useState(null),[Z,Y]=M.useState({name:"",about:"",email:""});M.useEffect(()=>{a||X()},[n,a]);const X=async()=>{try{if(!n)return;const V=localStorage.getItem(`digidad_profile_${n.id}`);if(V){const Ge=JSON.parse(V);h(Ge),ee()}const{data:$,error:ie}=await o.from("users").select("*").eq("id",n.id).single();let ke;if(ie&&ie.code==="PGRST116"){const{data:Ge,error:Ke}=await o.from("users").insert([{id:n.id,name:n.name||"User",phone:n.phone||"",email:n.email,avatar:n.avatar||null,about:"Hey there! I am using CaBa",is_online:!1,last_seen:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(Ke)throw Ke;ke=Ge}else{if(ie)throw ie;ke=$}localStorage.setItem(`digidad_profile_${n.id}`,JSON.stringify(ke)),h(ke),ee()}catch(V){console.error("Error loading profile:",V)}finally{x(!1)}},ee=()=>{const V=JSON.parse(localStorage.getItem("CaBa_contacts")||"[]");C({chats:V.length||0,calls:0,contacts:V.length||0})},q=V=>V.split(" ").map($=>$[0]).join("").toUpperCase().slice(0,2),xe=()=>{Y({name:c.name,about:c.about||"",email:c.email||""}),A(!0)},we=async()=>{try{const{name:V,about:$,email:ie}=Z;if(V.length<3){alert("Name must be at least 3 characters");return}const{error:ke}=await o.from("users").update({name:V,about:$,email:ie||null}).eq("id",n.id);if(ke)throw ke;const Ge={...c,name:V,about:$,email:ie};h(Ge),localStorage.setItem(`digidad_profile_${n.id}`,JSON.stringify(Ge)),localStorage.setItem("currentUser",JSON.stringify(Ge)),A(!1),alert("Profile updated successfully")}catch(V){console.error("Error updating profile:",V),alert("Failed to update profile")}},me=async V=>{try{const{error:$}=await o.from("users").update({avatar:V.toString()}).eq("id",n.id);if($)throw $;const ie={...c,avatar:V.toString()};h(ie),localStorage.setItem(`digidad_profile_${n.id}`,JSON.stringify(ie)),localStorage.setItem("currentUser",JSON.stringify(ie)),R(!1),alert("Profile picture updated")}catch($){console.error("Error selecting DP:",$),alert("Failed to update profile picture")}},Ce=V=>{U(!1);try{const $=JSON.parse(V);$.id&&$.name&&(Q($),B(!0))}catch{alert("Invalid QR code format")}},Oe=()=>{let V=JSON.parse(localStorage.getItem("CaBa_contacts")||"[]");V.some($=>$.id===P.id)?alert("User already in contacts"):(V.push({id:P.id,name:P.name,phone:P.phone,about:P.about,addedAt:new Date().toISOString()}),localStorage.setItem("CaBa_contacts",JSON.stringify(V)),alert(`${P.name} added to contacts`),ee()),B(!1)};return f?i.jsx("div",{className:"profile-screen",children:i.jsx("div",{style:{textAlign:"center",padding:"50px"},children:"Loading..."})}):c?i.jsxs("div",{className:"profile-screen",children:[i.jsxs("header",{className:"profile-header",children:[i.jsx("button",{className:"back-btn",onClick:()=>window.history.back(),children:i.jsx("span",{className:"icon",children:""})}),i.jsx("h1",{children:"Profile"}),i.jsx("button",{className:"icon-btn",onClick:xe,children:i.jsx("i",{className:"fas fa-edit"})})]}),i.jsxs("div",{className:"profile-content",children:[i.jsx("div",{className:"profile-picture-section",children:i.jsx("div",{className:"profile-avatar",onClick:()=>R(!0),children:c.avatar?i.jsx("img",{src:parseInt(c.avatar)?Rs.find(V=>V.id===parseInt(c.avatar))?.path:c.avatar,alt:"Profile Picture",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):i.jsx("div",{className:"profile-initials",children:q(c.name)})})}),i.jsxs("div",{className:"profile-info-section",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("div",{className:"info-label",children:[i.jsx("i",{className:"fas fa-user"}),i.jsx("span",{className:"label",children:"Name"})]}),i.jsx("div",{className:"info-value",children:i.jsx("span",{children:c.name})})]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("div",{className:"info-label",children:[i.jsx("i",{className:"fas fa-info-circle"}),i.jsx("span",{className:"label",children:"About"})]}),i.jsx("div",{className:"info-value",children:i.jsx("span",{children:c.about||"Hey there! I am using CaBa"})})]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("div",{className:"info-label",children:[i.jsx("i",{className:"fas fa-phone"}),i.jsx("span",{className:"label",children:"Phone"})]}),i.jsx("div",{className:"info-value",children:i.jsx("span",{children:c.phone})})]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("div",{className:"info-label",children:[i.jsx("i",{className:"fas fa-envelope"}),i.jsx("span",{className:"label",children:"Email"})]}),i.jsx("div",{className:"info-value",children:i.jsx("span",{children:c.email||"Not set"})})]})]}),i.jsxs("div",{className:"profile-stats",children:[i.jsxs("div",{className:"stat-item",children:[i.jsx("h3",{children:v.chats}),i.jsx("p",{children:"Chats"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("h3",{children:v.calls}),i.jsx("p",{children:"Calls"})]}),i.jsxs("div",{className:"stat-item",children:[i.jsx("h3",{children:v.contacts}),i.jsx("p",{children:"Contacts"})]})]}),i.jsxs("div",{className:"profile-actions",children:[i.jsxs("button",{className:"action-btn",onClick:()=>O(!0),children:[i.jsx("i",{className:"fas fa-qrcode"}),i.jsx("span",{className:"label",children:"My QR Code"})]}),i.jsxs("button",{className:"action-btn",onClick:()=>U(!0),children:[i.jsx("i",{className:"fas fa-camera"}),i.jsx("span",{className:"label",children:"Scan QR Code"})]})]})]}),w&&i.jsx("div",{className:"modal",style:{display:"flex"},children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Edit Profile"}),i.jsx("button",{className:"close-modal",onClick:()=>A(!1),children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"modal-body",children:i.jsxs("form",{onSubmit:V=>{V.preventDefault(),we()},children:[i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"editName",children:"Full Name"}),i.jsx("input",{type:"text",id:"editName",value:Z.name,onChange:V=>Y({...Z,name:V.target.value}),required:!0,minLength:"3"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"editAbout",children:"About"}),i.jsx("textarea",{id:"editAbout",rows:"3",maxLength:"150",value:Z.about,onChange:V=>Y({...Z,about:V.target.value})})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("label",{htmlFor:"editEmail",children:"Email"}),i.jsx("input",{type:"email",id:"editEmail",value:Z.email,onChange:V=>Y({...Z,email:V.target.value})})]}),i.jsx("button",{type:"submit",className:"btn-primary",children:"Save Changes"})]})})]})}),N&&i.jsx("div",{className:"modal",style:{display:"flex"},children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Choose Profile Picture"}),i.jsx("button",{className:"close-modal",onClick:()=>R(!1),children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"modal-body",children:i.jsx("div",{className:"dp-options-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"10px"},children:Rs.map(V=>i.jsx("img",{src:V.path,alt:`DP ${V.id}`,style:{width:"80px",height:"80px",borderRadius:"8px",cursor:"pointer",objectFit:"cover"},onClick:()=>me(V.id)},V.id))})})]})}),T&&c&&i.jsx(oy,{userId:c.id,userName:c.name,userPhone:c.phone,onClose:()=>O(!1)}),D&&i.jsx(py,{onScan:Ce,onClose:()=>U(!1)}),H&&P&&i.jsx("div",{className:"modal",style:{display:"flex"},children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"User Found"}),i.jsx("button",{className:"close-modal",onClick:()=>B(!1),children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsxs("div",{className:"modal-body",style:{textAlign:"center"},children:[i.jsx("div",{style:{marginBottom:"20px"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"15px"},children:[i.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"var(--primary-color)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px",color:"white",fontSize:"24px"},children:q(P.name)}),i.jsxs("div",{style:{textAlign:"left"},children:[i.jsx("h3",{style:{margin:"0",color:"var(--text-primary)"},children:P.name}),i.jsx("p",{style:{margin:"5px 0",color:"var(--text-secondary)"},children:P.phone}),P.about&&i.jsx("p",{style:{margin:"0",color:"var(--text-secondary)",fontSize:"14px"},children:P.about})]})]})}),i.jsx("div",{className:"action-buttons",style:{display:"flex",gap:"10px",justifyContent:"center"},children:i.jsxs("button",{className:"btn-primary",onClick:Oe,children:[i.jsx("i",{className:"fas fa-user-plus"}),"Add to Contacts"]})})]})]})})]}):i.jsx("div",{className:"profile-screen",children:i.jsx("div",{style:{textAlign:"center",padding:"50px"},children:"Please log in to view profile"})})},AA=()=>{const o=us(),{supabase:n}=vs(),{theme:a,toggleTheme:c}=Ko(),{chatTheme:h,chatThemes:f,selectTheme:x,currentThemeData:v}=R0(),C="./",[w,A]=M.useState({messageNotifications:!0,callNotifications:!0,notificationSound:!0,vibrate:!0,enterToSend:!1,readReceipts:!0,lastSeen:!0,showOnlineStatus:!0,allowEveryoneMessage:!0,profileVisible:!0,storageUsage:{app:0,media:0,total:0},callRingtone:"fm-freemusic-give-me-a-smile(chosic.com).mp3"}),[N,R]=M.useState(!1),[T,O]=M.useState(!1),[D,U]=M.useState(!1),[H,B]=M.useState(!1),[P,Q]=M.useState(null),[Z,Y]=M.useState("fm-freemusic-give-me-a-smile(chosic.com).mp3"),X=[{file:"fm-freemusic-give-me-a-smile(chosic.com).mp3",name:"Give Me a Smile"},{file:"gio_office_0610.mp3",name:"Office"},{file:"Journey(chosic.com).mp3",name:"Journey"},{file:"Lights(chosic.com).mp3",name:"Lights"},{file:"nice_ring_tones.mp3",name:"Nice Ring"},{file:"PeriTune_Alleyway-chosic.com_.mp3",name:"Alleyway"},{file:"PeriTune_Village_Fete-chosic.com_.mp3",name:"Village Fete"},{file:"professional.mp3",name:"Professional"},{file:"roa-music-summer-madness(chosic.com).mp3",name:"Summer Madness"},{file:"Run-Amok(chosic.com).mp3",name:"Run Amok"},{file:"Sakura-Girl-Daisy-chosic.com_.mp3",name:"Daisy"},{file:"Sakura-Girl-Wake-Up-chosic.com_.mp3",name:"Wake Up"},{file:"smta_own_tone.mp3",name:"Own Tone"},{file:"-Spring-field-(chosic.com).mp3",name:"Spring Field"}];M.useEffect(()=>(ee(),()=>{P&&P.pause()}),[]);const ee=()=>{const ve={...w};ve.messageNotifications=localStorage.getItem("messageNotifications")!=="false",ve.callNotifications=localStorage.getItem("callNotifications")!=="false",ve.notificationSound=localStorage.getItem("notificationSound")!=="false",ve.vibrate=localStorage.getItem("vibrate")!=="false",ve.enterToSend=localStorage.getItem("enterToSend")==="true",ve.readReceipts=localStorage.getItem("readReceipts")!=="false",ve.lastSeen=localStorage.getItem("lastSeen")!=="false",ve.showOnlineStatus=localStorage.getItem("showOnlineStatus")!=="false",ve.allowEveryoneMessage=localStorage.getItem("allowEveryoneMessage")!=="false",ve.profileVisible=localStorage.getItem("profileVisible")!=="false",ve.callRingtone=localStorage.getItem("callRingtone")||"fm-freemusic-give-me-a-smile(chosic.com).mp3",A(ve),Y(ve.callRingtone),q()},q=async()=>{try{let ve=0,Je=0;for(let Wt in localStorage)localStorage.hasOwnProperty(Wt)&&(ve+=localStorage[Wt].length+Wt.length);const mt=ve+Je;A(Wt=>({...Wt,storageUsage:{app:ve,media:Je,total:mt}}))}catch(ve){console.error("Error calculating storage:",ve)}},xe=ve=>{const Je=ve/1024,mt=Je/1024;return mt>=1?`${mt.toFixed(2)} MB`:`${Je.toFixed(2)} KB`},we=()=>{c(),alert(`${a==="dark"?"Light":"Dark"} mode enabled`)},me=()=>{B(!0)},Ce=async ve=>{await x(ve),B(!1),alert(`Chat theme "${f[ve].name}" applied`)},Oe=ve=>{const Je=!w[ve];localStorage.setItem(ve,Je.toString()),A(mt=>({...mt,[ve]:Je}))},V=()=>{U(!0)},$=ve=>{P&&(P.pause(),P.currentTime=0);const Je=new Audio(`${C}assets/audio/${ve}`);Je.volume=.7,Je.play().catch(mt=>{console.log("Could not play ringtone:",mt),alert("Could not play ringtone")}),Q(Je),setTimeout(()=>{P===Je&&(Je.pause(),Je.currentTime=0,Q(null))},1e4)},ie=ve=>{localStorage.setItem("callRingtone",ve),A(Je=>({...Je,callRingtone:ve})),Y(ve),P&&(P.pause(),Q(null)),U(!1),alert("Call ringtone updated")},ke=async()=>{if(confirm("This will clear all cached media files. Continue?"))try{alert("Clearing media storage..."),await q(),alert("Media storage cleared successfully")}catch(ve){console.error("Error clearing media storage:",ve),alert("Failed to clear media storage")}},Ge=async()=>{if(confirm("This will clear app cache and temporary data. Continue?"))try{alert("Clearing app storage..."),Object.keys(localStorage).forEach(Je=>{["currentUser","rememberMe","theme","messageNotifications","callNotifications","notificationSound","vibrate","enterToSend","readReceipts","lastSeen","mutedUsers","showOnlineStatus","allowEveryoneMessage","profileVisible"].includes(Je)||localStorage.removeItem(Je)}),await q(),alert("App storage cleared successfully")}catch(ve){console.error("Error clearing app storage:",ve),alert("Failed to clear app storage")}},Ke=async()=>{if(confirm("This will clear all cached data. Continue?"))try{alert("Clearing all cache..."),await ke(),await Ge(),alert("All cache cleared successfully")}catch(ve){console.error("Error clearing cache:",ve),alert("Failed to clear cache")}},ne=async()=>{if(confirm("Are you sure you want to delete your account? This action cannot be undone.")&&confirm("This will permanently delete all your messages, calls, and data. Continue?"))try{const ve=localStorage.getItem("currentUser");if(!ve){alert("No user session found"),o("/login");return}const Je=JSON.parse(ve),{error:mt}=await n.from("users").delete().eq("id",Je.id);if(mt){console.error("Error deleting user data:",mt),alert("Failed to delete account");return}localStorage.clear(),alert("Account deleted successfully"),o("/login")}catch(ve){console.error("Error deleting account:",ve),alert("Failed to delete account")}},pe=()=>alert("Security settings coming soon"),Le=()=>o("/blocked"),Ue=()=>alert("Auto download settings coming soon"),We=()=>alert("Help center coming soon"),Ne=()=>alert("Contact support coming soon"),$e=()=>alert("Terms & Privacy coming soon"),De=()=>alert("You are using the latest version (1.0.0)");return i.jsxs("div",{className:"settings-screen",children:[i.jsxs("header",{className:"settings-header",children:[i.jsx("button",{className:"back-btn",onClick:()=>o(-1),children:i.jsx("i",{className:"fas fa-arrow-left"})}),i.jsx("h1",{children:"Settings"})]}),i.jsxs("div",{className:"settings-content",children:[i.jsxs("div",{className:"settings-section",children:[i.jsx("h2",{className:"section-title",children:"Account"}),i.jsxs("div",{className:"settings-item",onClick:()=>o("/profile"),children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-user"}),i.jsx("span",{className:"label",children:"Profile"})]}),i.jsx("i",{className:"fas fa-chevron-right"})]}),i.jsxs("div",{className:"settings-item",onClick:()=>R(!N),children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-lock"}),i.jsx("span",{className:"label",children:"Privacy"})]}),i.jsx("span",{className:"icon arrow",style:{transform:N?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:""})]}),N&&i.jsxs("div",{className:"privacy-options",children:[i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-eye"}),i.jsx("span",{className:"label",children:"Show Online Status"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.showOnlineStatus,onChange:()=>Oe("showOnlineStatus")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-envelope"}),i.jsx("span",{className:"label",children:"Allow Everyone to Message"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.allowEveryoneMessage,onChange:()=>Oe("allowEveryoneMessage")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-user"}),i.jsx("span",{className:"label",children:"Profile Visible to Everyone"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.profileVisible,onChange:()=>Oe("profileVisible")}),i.jsx("span",{className:"toggle-slider"})]})]})]}),i.jsxs("div",{className:"settings-item",onClick:pe,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-shield-alt"}),i.jsx("span",{className:"label",children:"Security"})]}),i.jsx("span",{className:"icon arrow",children:""})]}),i.jsxs("div",{className:"settings-item",onClick:Le,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-ban"}),i.jsx("span",{className:"label",children:"Blocked Users"})]}),i.jsx("span",{className:"icon arrow",children:""})]})]}),i.jsxs("div",{className:"settings-section",children:[i.jsx("h2",{className:"section-title",children:"Appearance"}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-moon"}),i.jsx("span",{className:"label",children:"Dark Mode"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:a==="dark",onChange:we}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item",onClick:we,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-palette"}),i.jsx("span",{className:"label",children:"Theme"})]}),i.jsxs("div",{className:"item-right",children:[i.jsx("span",{className:"value",children:a==="dark"?"Dark":"Light"}),i.jsx("span",{className:"icon arrow",children:""})]})]}),i.jsxs("div",{className:"settings-item",onClick:me,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-comments"}),i.jsx("span",{className:"label",children:"Chat Theme"})]}),i.jsxs("div",{className:"item-right",children:[i.jsx("span",{className:"value",children:v.name}),i.jsx("span",{className:"icon arrow",children:""})]})]})]}),i.jsxs("div",{className:"settings-section",children:[i.jsx("h2",{className:"section-title",children:"Notifications"}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-bell"}),i.jsx("span",{className:"label",children:"Message Notifications"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.messageNotifications,onChange:()=>Oe("messageNotifications")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-phone"}),i.jsx("span",{className:"label",children:"Call Notifications"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.callNotifications,onChange:()=>Oe("callNotifications")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-music"}),i.jsx("span",{className:"label",children:"Call Ringtone"})]}),i.jsxs("button",{className:"btn-primary",onClick:V,children:[i.jsx("i",{className:"fas fa-music"}),"Choose Ringtone"]})]}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-volume-up"}),i.jsx("span",{className:"label",children:"Notification Sound"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.notificationSound,onChange:()=>Oe("notificationSound")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-mobile-alt"}),i.jsx("span",{className:"label",children:"Vibrate"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.vibrate,onChange:()=>Oe("vibrate")}),i.jsx("span",{className:"toggle-slider"})]})]})]}),i.jsxs("div",{className:"settings-section",children:[i.jsx("h2",{className:"section-title",children:"Chat Settings"}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-keyboard"}),i.jsx("span",{className:"label",children:"Enter to Send"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.enterToSend,onChange:()=>Oe("enterToSend")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-check"}),i.jsx("span",{className:"label",children:"Read Receipts"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.readReceipts,onChange:()=>Oe("readReceipts")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-clock"}),i.jsx("span",{className:"label",children:"Last Seen"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",checked:w.lastSeen,onChange:()=>Oe("lastSeen")}),i.jsx("span",{className:"toggle-slider"})]})]}),i.jsxs("div",{className:"settings-item",onClick:Ue,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-arrow-down"}),i.jsx("span",{className:"label",children:"Auto Download Media"})]}),i.jsx("span",{className:"icon arrow",children:""})]})]}),i.jsxs("div",{className:"settings-section",children:[i.jsx("h2",{className:"section-title",children:"Storage and Data"}),i.jsxs("div",{className:"settings-item",onClick:()=>O(!T),children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-save"}),i.jsx("span",{className:"label",children:"Storage Usage"})]}),i.jsxs("div",{className:"item-right",children:[i.jsx("span",{className:"value",children:xe(w.storageUsage.total)}),i.jsx("span",{className:"icon arrow",style:{transform:T?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:""})]})]}),T&&i.jsxs("div",{className:"storage-details",children:[i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-images"}),i.jsx("span",{className:"label",children:"Media Storage"})]}),i.jsxs("div",{className:"item-right",children:[i.jsx("span",{className:"value",children:xe(w.storageUsage.media)}),i.jsx("button",{className:"clear-btn",onClick:ke,children:i.jsx("i",{className:"fas fa-trash-alt"})})]})]}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-mobile-alt"}),i.jsx("span",{className:"label",children:"App Storage"})]}),i.jsxs("div",{className:"item-right",children:[i.jsx("span",{className:"value",children:xe(w.storageUsage.app)}),i.jsx("button",{className:"clear-btn",onClick:Ge,children:i.jsx("i",{className:"fas fa-trash-alt"})})]})]})]}),i.jsxs("div",{className:"settings-item",onClick:Ke,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-trash"}),i.jsx("span",{className:"label",children:"Clear All Cache"})]}),i.jsx("span",{className:"icon arrow",children:""})]})]}),i.jsxs("div",{className:"settings-section",children:[i.jsx("h2",{className:"section-title",children:"Help & Support"}),i.jsxs("div",{className:"settings-item",onClick:We,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-question"}),i.jsx("span",{className:"label",children:"Help Center"})]}),i.jsx("span",{className:"icon arrow",children:""})]}),i.jsxs("div",{className:"settings-item",onClick:Ne,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-envelope"}),i.jsx("span",{className:"label",children:"Contact Us"})]}),i.jsx("span",{className:"icon arrow",children:""})]}),i.jsxs("div",{className:"settings-item",onClick:$e,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-file"}),i.jsx("span",{className:"label",children:"Terms & Privacy Policy"})]}),i.jsx("span",{className:"icon arrow",children:""})]})]}),i.jsxs("div",{className:"settings-section",children:[i.jsx("h2",{className:"section-title",children:"About"}),i.jsxs("div",{className:"settings-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-info"}),i.jsx("span",{className:"label",children:"App Version"})]}),i.jsx("span",{className:"value",children:"1.0.0"})]}),i.jsxs("div",{className:"settings-item",onClick:De,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-sync"}),i.jsx("span",{className:"label",children:"Check for Updates"})]}),i.jsx("span",{className:"icon arrow",children:""})]})]}),i.jsx("div",{className:"settings-section danger-section",children:i.jsxs("div",{className:"settings-item danger",onClick:ne,children:[i.jsxs("div",{className:"item-left",children:[i.jsx("i",{className:"fas fa-exclamation-triangle"}),i.jsx("span",{className:"label",children:"Delete Account"})]}),i.jsx("span",{className:"icon arrow",children:""})]})})]}),D&&i.jsx("div",{className:"modal",style:{display:"flex"},children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Choose Call Ringtone"}),i.jsx("button",{className:"close-modal",onClick:()=>U(!1),children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"modal-body",children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:X.map(ve=>i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px",border:"1px solid #ddd",borderRadius:"8px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx("i",{className:"fas fa-music"}),i.jsx("span",{children:ve.name})]}),i.jsxs("div",{style:{display:"flex",gap:"10px"},children:[i.jsx("button",{onClick:()=>$(ve.file),style:{padding:"5px 10px",border:"none",borderRadius:"4px",background:"#007bff",color:"white",cursor:"pointer"},children:i.jsx("i",{className:"fas fa-play"})}),i.jsx("button",{onClick:()=>ie(ve.file),style:{padding:"5px 10px",border:"none",borderRadius:"4px",background:"#28a745",color:"white",cursor:"pointer"},children:"Confirm"})]})]},ve.file))})})]})}),H&&i.jsx("div",{className:"modal",style:{display:"flex"},children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Choose Chat Theme"}),i.jsx("button",{className:"close-modal",onClick:()=>B(!1),children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"modal-body",children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"15px"},children:Object.entries(f).map(([ve,Je])=>i.jsxs("div",{className:`theme-item ${h===ve?"active":""}`,onClick:()=>Ce(ve),style:{cursor:"pointer",borderRadius:"8px",overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s",border:h===ve?"3px solid var(--primary-color)":"1px solid #ddd",height:"80px"},children:[i.jsx("div",{style:{width:"100%",height:"60%",background:Je.background,backgroundSize:"cover",backgroundPosition:"center"}}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 8px",height:"40%"},children:[i.jsx("div",{style:{width:"35px",height:"8px",borderRadius:"4px",background:Je.sentMessage.background}}),i.jsx("div",{style:{width:"35px",height:"8px",borderRadius:"4px",background:Je.receivedMessage.background}})]}),i.jsx("div",{style:{position:"absolute",bottom:"5px",left:"8px",right:"8px",fontSize:"0.7rem",fontWeight:"500",color:"#ffffff",textShadow:"0 1px 2px rgba(0,0,0,0.5)",textAlign:"center"},children:Je.name})]},ve))})})]})}),i.jsx(ed,{})]})},NA=()=>{const{supabase:o}=vs(),[n,a]=M.useState(null),[c,h]=M.useState([]),[f,x]=M.useState([]),[v,C]=M.useState(!0),[w,A]=M.useState(null);M.useEffect(()=>{N()},[]);const N=async()=>{try{const B=localStorage.getItem("currentUser");if(!B){A("No user logged in"),C(!1);return}let P;try{if(P=JSON.parse(B),!P||!P.id){A("Invalid user data"),C(!1);return}}catch{A("Invalid user data"),C(!1);return}a(P),await R(P),await T(P),C(!1)}catch(B){console.error("Error initializing news:",B),A("Failed to load news"),C(!1)}},R=async B=>{try{const{data:P,error:Q}=await o.from("statuses").select("*").eq("user_id",B.id).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(Q)throw Q;h(P||[])}catch(P){console.error("Error loading my status:",P)}},T=async B=>{try{const P=`digidad_statuses_${B.id}`;let Q=null;try{const q=localStorage.getItem(P);q&&(Q=JSON.parse(q),x(Q))}catch(q){console.warn("Error loading cached statuses:",q)}const{data:Z,error:Y}=await o.from("statuses").select(`
          *,
          user:users(*)
        `).neq("user_id",B.id).gte("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(Y)throw Y;const X={};Z&&Z.length>0&&Z.forEach(q=>{X[q.user_id]||(X[q.user_id]={user:q.user,statuses:[]}),X[q.user_id].statuses.push(q)});const ee=Object.values(X);try{localStorage.setItem(P,JSON.stringify(ee))}catch(q){console.warn("Error caching statuses:",q)}x(ee)}catch(P){console.error("Error loading recent statuses:",P),f.length||A("Failed to load recent updates")}},O=B=>B?B.split(" ").map(P=>P[0]).join("").toUpperCase().slice(0,2):"U",D=B=>{try{const P=new Date(B);if(isNaN(P.getTime()))return"now";const Z=new Date-P,Y=Math.floor(Z/6e4),X=Math.floor(Z/36e5),ee=Math.floor(Z/864e5);return Y<1?"now":Y<60?`${Y}m`:X<24?`${X}h`:`${ee}d`}catch{return"now"}},U=()=>{alert("Status feature coming soon")},H=(B,P)=>{alert(`Viewing ${B.name}'s status`)};return v?i.jsxs("div",{className:"news-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Loading news..."})]}):w?i.jsxs("div",{className:"news-error",children:[i.jsxs("p",{children:[i.jsx(Ju,{size:16})," ",w]}),i.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):i.jsxs("div",{className:"news-container",children:[i.jsx("header",{className:"news-header",children:i.jsxs("h1",{children:[i.jsx("i",{className:"fas fa-newspaper"})," Latest News Feed"]})}),i.jsx("div",{className:"my-status-section",children:i.jsxs("div",{className:"my-status",onClick:c.length>0?()=>H(n):void 0,children:[i.jsx("div",{className:"status-avatar",children:i.jsx("div",{className:"avatar-circle",children:n?.avatar?i.jsx("img",{src:n.avatar,alt:n?.name||"User"}):O(n?.name||"User")})}),i.jsxs("div",{className:"status-info",children:[i.jsx("h3",{children:"My Status"}),i.jsx("p",{children:c.length>0?`${c.length} update${c.length>1?"s":""}`:"Tap to add status"})]}),i.jsx("button",{className:"add-status-btn",onClick:U,children:i.jsx("i",{className:"fas fa-plus"})})]})}),i.jsxs("div",{className:"recent-statuses-section",children:[i.jsx("h2",{children:"Recent Updates"}),i.jsx("div",{className:"recent-status-list",children:f.length>0?f.filter(({user:B,statuses:P})=>B&&P&&P.length>0).map(({user:B,statuses:P})=>i.jsxs("div",{className:"status-item",onClick:()=>H(B),children:[i.jsx("div",{className:"status-avatar",children:i.jsx("div",{className:"avatar-circle",children:B.avatar?i.jsx("img",{src:B.avatar,alt:B.name||"User"}):O(B.name||"User")})}),i.jsxs("div",{className:"status-info",children:[i.jsx("h3",{children:B.name||"User"}),i.jsx("p",{children:P[0]?.created_at?D(P[0].created_at):"now"})]})]},B.id)):i.jsxs("div",{className:"empty-state",children:[i.jsx("p",{children:"No recent updates"}),i.jsx("small",{children:"Check back later"})]})})]}),i.jsx(ed,{})]})},TA=()=>{const{supabase:o}=vs(),{theme:n}=Ko(),[a,c]=M.useState(null),[h,f]=M.useState([]),[x,v]=M.useState(!0),[C,w]=M.useState(null),[A,N]=M.useState("all"),[R,T]=M.useState("upcoming");M.useEffect(()=>{O()},[]);const O=async()=>{try{const V=localStorage.getItem("currentUser");if(!V){w("No user logged in"),v(!1);return}const $=JSON.parse(V);c($),await D($),v(!1)}catch(V){console.error("Error initializing reminders:",V),w("Failed to load reminders"),v(!1)}},D=async V=>{try{let $=o.from("reminders").select(`
          *,
          sender:users!reminders_sender_id_fkey(id, name, avatar, phone),
          receiver:users!reminders_receiver_id_fkey(id, name, avatar, phone)
        `);A==="sent"?$=$.eq("sender_id",V.id):A==="received"?$=$.eq("receiver_id",V.id):A==="pending"?$=$.eq("receiver_id",V.id).eq("status","pending"):A==="accepted"?$=$.eq("status","accepted"):$=$.or(`sender_id.eq.${V.id},receiver_id.eq.${V.id}`);const{data:ie,error:ke}=await $.order("reminder_time",{ascending:!0});if(ke)throw ke;f(ie||[])}catch($){console.error("Error loading reminders:",$),w("Failed to load reminders")}},U=V=>{N(V),a&&D(a)},H=V=>{T(V)},B=async V=>{try{const{error:$}=await o.from("reminders").update({status:"accepted",accepted_at:new Date().toISOString()}).eq("id",V);if($)throw $;alert("Reminder accepted"),D(a)}catch($){console.error("Error accepting reminder:",$),alert("Failed to accept reminder")}},P=async V=>{try{const{error:$}=await o.from("reminders").update({status:"rejected"}).eq("id",V);if($)throw $;alert("Reminder rejected"),D(a)}catch($){console.error("Error rejecting reminder:",$),alert("Failed to reject reminder")}},Q=async V=>{try{const{error:$}=await o.from("reminders").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",V);if($)throw $;alert("Reminder completed"),D(a)}catch($){console.error("Error completing reminder:",$),alert("Failed to complete reminder")}},Z=async V=>{const $=parseInt(prompt("Snooze for how many minutes?","10"));if(!(!$||$<1))try{const ie=new Date;ie.setMinutes(ie.getMinutes()+$);const{error:ke}=await o.from("reminders").update({status:"snoozed",snooze_until:ie.toISOString(),snooze_count:o.sql`snooze_count + 1`}).eq("id",V);if(ke)throw ke;alert(`Snoozed for ${$} minutes`),D(a)}catch(ie){console.error("Error snoozing reminder:",ie),alert("Failed to snooze reminder")}},Y=V=>{const $=new Date,ie=V-$,ke=Math.floor(ie/(1e3*60*60*24)),Ge=V.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:V.getFullYear()!==$.getFullYear()?"numeric":void 0}),Ke=V.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return ke===0?`Today, ${Ke}`:ke===1?`Tomorrow, ${Ke}`:ke===-1?`Yesterday, ${Ke}`:ke>0&&ke<7?`${V.toLocaleDateString("en-IN",{weekday:"long"})}, ${Ke}`:`${Ge}, ${Ke}`},X=V=>({pending:"fa-clock",accepted:"fa-check",rejected:"fa-times",completed:"fa-check-circle",snoozed:"fa-hourglass-half",cancelled:"fa-ban"})[V]||"fa-circle",ee=V=>({general:"fa-bell",medicine:"fa-pills",meeting:"fa-users",appointment:"fa-calendar-check",birthday:"fa-birthday-cake",task:"fa-tasks",other:"fa-ellipsis-h"})[V]||"fa-bell",q=V=>V.split(" ").map($=>$[0]).join("").toUpperCase().slice(0,2),xe=new Date,we=h.filter(V=>new Date(V.reminder_time)>xe&&!["completed","cancelled"].includes(V.status)),me=h.filter(V=>new Date(V.reminder_time)<=xe||["completed","cancelled"].includes(V.status)),Ce=h.filter(V=>V.is_recurring),Oe=()=>{switch(R){case"upcoming":return we;case"past":return me;case"recurring":return Ce;default:return we}};return x?i.jsxs("div",{className:"reminders-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Loading reminders..."})]}):C?i.jsxs("div",{className:"reminders-error",children:[i.jsxs("p",{children:[i.jsx(Ju,{size:16})," ",C]}),i.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):i.jsxs("div",{className:"reminders-container",children:[i.jsxs("header",{className:"app-header",children:[i.jsx("div",{className:"header-left",children:i.jsx("button",{className:"back-btn",onClick:()=>window.history.back(),children:i.jsx("i",{className:"fas fa-arrow-left"})})}),i.jsx("div",{className:"header-center",children:i.jsx("h1",{children:"Reminders"})}),i.jsxs("div",{className:"header-right",children:[i.jsx("button",{className:"icon-btn",onClick:()=>alert("Create reminder"),children:i.jsx("i",{className:"fas fa-plus"})}),i.jsx("button",{className:"icon-btn",onClick:()=>alert("Settings"),children:i.jsx("i",{className:"fas fa-cog"})})]})]}),i.jsx("div",{className:"filter-chips",children:["all","pending","accepted","sent","received"].map(V=>i.jsxs("button",{className:`chip ${A===V?"active":""}`,onClick:()=>U(V),children:[i.jsx("i",{className:`fas fa-${V==="all"?"list":V==="pending"?"clock":V==="accepted"?"check":V==="sent"?"paper-plane":"inbox"}`}),V.charAt(0).toUpperCase()+V.slice(1)]},V))}),i.jsx("div",{className:"tabs",children:["upcoming","past","recurring"].map(V=>i.jsx("button",{className:`tab ${R===V?"active":""}`,onClick:()=>H(V),children:V.charAt(0).toUpperCase()+V.slice(1)},V))}),i.jsx("main",{className:"reminders-list",children:Oe().length>0?Oe().map(V=>{const $=V.sender_id===a.id,ie=$?V.receiver:V.sender,ke=new Date(V.reminder_time),Ge=!$&&V.status==="pending",Ke=V.status==="accepted",ne=V.status==="accepted";return i.jsxs("div",{className:`reminder-card priority-${V.priority}`,children:[i.jsxs("div",{className:"reminder-header",children:[i.jsxs("div",{children:[i.jsx("div",{className:"reminder-title",children:V.title}),i.jsxs("div",{className:"reminder-user",children:[i.jsx("div",{className:"avatar-placeholder",children:ie.avatar?i.jsx("img",{src:ie.avatar,alt:ie.name}):q(ie.name)}),i.jsx("i",{className:`fas fa-${$?"paper-plane":"inbox"}`}),$?"To":"From",": ",ie.name]})]}),i.jsxs("span",{className:`reminder-status status-${V.status}`,children:[i.jsx("i",{className:`fas ${X(V.status)}`}),V.status]})]}),i.jsxs("div",{className:"reminder-details",children:[i.jsxs("div",{className:"reminder-time",children:[i.jsx("i",{className:"fas fa-clock"}),Y(ke)]}),V.location&&i.jsxs("div",{className:"reminder-location",children:[i.jsx("i",{className:"fas fa-map-marker-alt"}),V.location]}),V.description&&i.jsx("div",{className:"reminder-description",children:V.description})]}),i.jsxs("div",{className:"reminder-meta",children:[i.jsxs("span",{className:`reminder-category category-${V.category}`,children:[i.jsx("i",{className:`fas ${ee(V.category)}`}),V.category]}),V.is_recurring&&i.jsxs("span",{className:"reminder-category",children:[i.jsx("i",{className:"fas fa-redo"}),V.recurring_type]})]}),(Ge||Ke||ne)&&i.jsxs("div",{className:"reminder-actions",children:[Ge&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{className:"btn-action btn-accept",onClick:()=>B(V.id),children:[i.jsx("i",{className:"fas fa-check"}),"Accept"]}),i.jsxs("button",{className:"btn-action btn-reject",onClick:()=>P(V.id),children:[i.jsx("i",{className:"fas fa-times"}),"Reject"]})]}),Ke&&i.jsxs("button",{className:"btn-action btn-complete",onClick:()=>Q(V.id),children:[i.jsx("i",{className:"fas fa-check-circle"}),"Complete"]}),ne&&i.jsxs("button",{className:"btn-action btn-snooze",onClick:()=>Z(V.id),children:[i.jsx("i",{className:"fas fa-clock"}),"Snooze"]})]})]},V.id)}):i.jsxs("div",{className:"empty-state",children:[i.jsx("i",{className:"fas fa-bell-slash"}),i.jsx("h3",{children:"No Reminders"}),i.jsx("p",{children:"You don't have any reminders in this category"}),i.jsxs("button",{className:"btn-primary",onClick:()=>alert("Create reminder"),children:[i.jsx("i",{className:"fas fa-plus"})," Create Reminder"]})]})}),i.jsx("button",{className:"fab",onClick:()=>alert("Create reminder"),children:i.jsx("i",{className:"fas fa-plus"})})]})},jA=({onBack:o})=>{const[n,a]=M.useState(null),[c,h]=M.useState(null),[f,x]=M.useState([]),[v,C]=M.useState({title:"",description:"",date:"",time:"",location:"",category:"general",priority:"medium",isRecurring:!1,recurringType:"daily",soundEnabled:!0,vibrationEnabled:!0}),[w,A]=M.useState(!1);M.useEffect(()=>{N()},[]);const N=async()=>{try{const U=localStorage.getItem("currentUser");if(!U){alert("No user logged in");return}const H=JSON.parse(U);a(H),await R(H)}catch(U){console.error("Error initializing create reminder:",U)}},R=async U=>{try{const{data:H,error:B}=await Ot.from("contacts").select(`
          *,
          contact_user:users!contacts_contact_user_id_fkey(*)
        `).eq("user_id",U.id);if(B)throw B;const P=H.map(Z=>Z.contact_user),{data:Q}=await Ot.from("chats").select(`
          user1:users!chats_user1_id_fkey(*),
          user2:users!chats_user2_id_fkey(*)
        `).or(`user1_id.eq.${U.id},user2_id.eq.${U.id}`);Q&&Q.forEach(Z=>{const Y=Z.user1.id===U.id?Z.user2:Z.user1;P.find(X=>X.id===Y.id)||P.push(Y)}),x(P)}catch(H){console.error("Error loading contacts:",H)}},T=(U,H)=>{C(B=>({...B,[U]:H}))},O=async U=>{if(U.preventDefault(),!c){alert("Please select a recipient");return}if(!v.title.trim()){alert("Please enter a title");return}if(!v.date||!v.time){alert("Please select date and time");return}const H=new Date(`${v.date}T${v.time}`);if(H<new Date){alert("Reminder time cannot be in the past");return}A(!0);try{const B={sender_id:n.id,receiver_id:c.id,title:v.title.trim(),description:v.description.trim()||null,reminder_time:H.toISOString(),location:v.location.trim()||null,category:v.category,priority:v.priority,sound_enabled:v.soundEnabled,vibration_enabled:v.vibrationEnabled,is_recurring:v.isRecurring,status:"pending",requires_acceptance:!0};v.isRecurring&&(B.recurring_type=v.recurringType);const{data:P,error:Q}=await Ot.from("reminders").insert(B).select().single();if(Q)throw Q;alert("Reminder created successfully"),o&&o()}catch(B){console.error("Error creating reminder:",B),alert("Failed to create reminder")}finally{A(!1)}},D=U=>U.split(" ").map(H=>H[0]).join("").toUpperCase().slice(0,2);return n?i.jsxs("div",{className:"create-reminder-container",children:[i.jsxs("header",{className:"app-header",children:[i.jsx("div",{className:"header-left",children:i.jsx("button",{className:"back-btn",onClick:o,children:i.jsx("i",{className:"fas fa-arrow-left"})})}),i.jsx("div",{className:"header-center",children:i.jsx("h1",{children:"Create Reminder"})}),i.jsx("div",{className:"header-right",children:i.jsx("button",{className:"icon-btn",onClick:O,disabled:w,children:i.jsx("i",{className:"fas fa-check"})})})]}),i.jsxs("form",{onSubmit:O,className:"reminder-form",children:[i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label",children:[i.jsx("i",{className:"fas fa-user"}),"Remind To *"]}),i.jsxs("div",{className:"recipient-selector",onClick:()=>alert("Select contact - feature not implemented"),children:[i.jsx("div",{className:"selected-recipient",children:c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"avatar-placeholder",children:c.avatar?i.jsx("img",{src:c.avatar,alt:c.name}):D(c.name)}),i.jsx("span",{children:c.name})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-user-plus"}),i.jsx("span",{children:"Select Contact"})]})}),i.jsx("i",{className:"fas fa-chevron-right"})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label",children:[i.jsx("i",{className:"fas fa-heading"}),"Title *"]}),i.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Take Medicine, Meeting with Dr.",value:v.title,onChange:U=>T("title",U.target.value),required:!0})]}),i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label",children:[i.jsx("i",{className:"fas fa-align-left"}),"Description (Optional)"]}),i.jsx("textarea",{className:"form-textarea",placeholder:"Add additional details...",rows:"3",value:v.description,onChange:U=>T("description",U.target.value)})]}),i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label",children:[i.jsx("i",{className:"fas fa-calendar-alt"}),"Date & Time *"]}),i.jsxs("div",{className:"datetime-group",children:[i.jsx("input",{type:"date",className:"form-input",value:v.date,onChange:U=>T("date",U.target.value),required:!0}),i.jsx("input",{type:"time",className:"form-input",value:v.time,onChange:U=>T("time",U.target.value),required:!0})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label",children:[i.jsx("i",{className:"fas fa-map-marker-alt"}),"Location (Optional)"]}),i.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Home, Office, Hospital",value:v.location,onChange:U=>T("location",U.target.value)})]}),i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label",children:[i.jsx("i",{className:"fas fa-tag"}),"Category"]}),i.jsxs("select",{className:"form-select",value:v.category,onChange:U=>T("category",U.target.value),children:[i.jsx("option",{value:"general",children:"General"}),i.jsx("option",{value:"medicine",children:"Medicine"}),i.jsx("option",{value:"meeting",children:"Meeting"}),i.jsx("option",{value:"appointment",children:"Appointment"}),i.jsx("option",{value:"birthday",children:"Birthday"}),i.jsx("option",{value:"task",children:"Task"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label",children:[i.jsx("i",{className:"fas fa-flag"}),"Priority"]}),i.jsx("div",{className:"priority-selector",children:["low","medium","high","urgent"].map(U=>i.jsxs("button",{type:"button",className:`priority-btn ${v.priority===U?"active":""}`,onClick:()=>T("priority",U),children:[i.jsx("i",{className:"fas fa-flag"})," ",U.charAt(0).toUpperCase()+U.slice(1)]},U))})]}),i.jsxs("div",{className:"form-section",children:[i.jsxs("label",{className:"form-label toggle-label",children:[i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-redo"}),"Recurring Reminder"]}),i.jsxs("label",{className:"toggle",children:[i.jsx("input",{type:"checkbox",checked:v.isRecurring,onChange:U=>T("isRecurring",U.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]}),v.isRecurring&&i.jsx("div",{className:"recurring-options",children:i.jsxs("select",{className:"form-select",value:v.recurringType,onChange:U=>T("recurringType",U.target.value),children:[i.jsx("option",{value:"daily",children:"Daily"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"}),i.jsx("option",{value:"yearly",children:"Yearly"})]})})]}),i.jsx("div",{className:"form-section",children:i.jsxs("label",{className:"form-label toggle-label",children:[i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-volume-up"}),"Sound"]}),i.jsxs("label",{className:"toggle",children:[i.jsx("input",{type:"checkbox",checked:v.soundEnabled,onChange:U=>T("soundEnabled",U.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]})}),i.jsx("div",{className:"form-section",children:i.jsxs("label",{className:"form-label toggle-label",children:[i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-mobile-alt"}),"Vibration"]}),i.jsxs("label",{className:"toggle",children:[i.jsx("input",{type:"checkbox",checked:v.vibrationEnabled,onChange:U=>T("vibrationEnabled",U.target.checked)}),i.jsx("span",{className:"toggle-slider"})]})]})}),i.jsxs("button",{type:"submit",className:"btn-submit",disabled:w,children:[i.jsx("i",{className:"fas fa-bell"}),w?"Creating...":"Create Reminder"]})]})]}):i.jsx("div",{children:"Loading..."})};function RA(o){const[n,a]=M.useState([]),[c,h]=M.useState(!0),[f,x]=M.useState(null),[v,C]=M.useState(0),w=M.useCallback(async()=>{if(o)try{h(!0);const N=await ls.getCallHistory(o);a(N||[])}catch(N){x(N.message)}finally{h(!1)}},[o]),A=M.useCallback(async()=>{if(o)try{const N=await ls.getMissedCallsCount(o);C(N||0)}catch(N){console.error("Error fetching missed count:",N)}},[o]);return M.useEffect(()=>{w(),A()},[w,A]),{history:n,loading:c,error:f,missedCount:v,refetch:w}}function IA({userId:o,userAvatar:n,userName:a}){const{history:c,loading:h,error:f,missedCount:x}=RA(o),{startCall:v,callState:C}=di(),w=N=>{const R=new Date(N),O=Math.floor((new Date-R)/(1e3*60*60*24));return O===0?R.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):O===1?"Yesterday":O<7?R.toLocaleDateString([],{weekday:"short"}):R.toLocaleDateString([],{month:"short",day:"numeric"})},A=async(N,R)=>{if(C!=="idle"){console.log("Already in a call");return}try{await v(N,R)}catch(T){console.error("Failed to start call:",T)}};return h?i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"})}):f?i.jsx("div",{className:"text-center p-8 text-red-500",children:"Error loading call history"}):i.jsx("div",{className:"call-history-wrapper",children:i.jsxs("div",{className:"call-history-card",children:[i.jsxs("div",{className:"call-history-header",children:[i.jsxs("div",{className:"header-content",children:[i.jsx("h2",{className:"call-history-title",children:"Call History"}),x>0&&i.jsxs("span",{className:"missed-calls-badge",children:[x," missed"]})]}),n&&i.jsx("div",{className:"user-avatar-header",children:i.jsx("div",{className:"avatar-circle",children:n?parseInt(n)?i.jsx("img",{src:Rs.find(N=>N.id===parseInt(n))?.path||n,alt:a||"User"}):i.jsx("img",{src:n,alt:a||"User"}):a?.charAt(0)||"?"})})]}),i.jsx("div",{children:c.length>0?c.map(N=>i.jsxs("div",{className:"call-item",children:[i.jsx("div",{className:"call-avatar",children:N.other_user_avatar?parseInt(N.other_user_avatar)?i.jsx("img",{src:Rs.find(R=>R.id===parseInt(N.other_user_avatar))?.path||N.other_user_avatar,alt:N.other_user_name}):i.jsx("img",{src:N.other_user_avatar,alt:N.other_user_name}):N.other_user_name?.charAt(0)||"?"}),i.jsxs("div",{className:"call-details",children:[i.jsx("h3",{className:"call-name",children:N.other_user_name||"Unknown"}),i.jsxs("div",{className:"call-status-row",children:[N.call_status==="missed"?i.jsx(xS,{size:14,className:"status-icon missed"}):N.caller_id===o?i.jsx(bS,{size:14,className:"status-icon outgoing"}):i.jsx(mS,{size:14,className:"status-icon incoming"}),i.jsx("span",{className:"call-time-text",children:w(N.started_at)})]})]}),i.jsx("button",{className:"call-action-btn",onClick:()=>A(N.other_user_id,N.call_type),disabled:C!=="idle",children:N.call_type==="video"?i.jsx(hi,{size:22}):i.jsx(Hs,{size:22})})]},N.id)):i.jsxs("div",{className:"empty-state",children:[i.jsx(Hs,{size:48}),i.jsx("h3",{children:"No call history"}),i.jsx("p",{children:"Your calls will appear here"})]})})]})})}function Ox({receiverId:o,callType:n="video",size:a="md"}){const{startCall:c,callState:h}=di(),f=async()=>{if(h!=="idle"){console.log("Already in a call");return}try{await c(o,n)}catch(C){console.error("Failed to start call:",C)}},x={sm:"w-10 h-10",md:"w-12 h-12",lg:"w-14 h-14"},v={sm:18,md:22,lg:26};return i.jsx("button",{onClick:f,disabled:h!=="idle",className:`${x[a]} rounded-full flex items-center justify-center transition-all ${n==="video"?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"} disabled:opacity-50 disabled:cursor-not-allowed`,children:n==="video"?i.jsx(hi,{size:v[a],className:"text-white"}):i.jsx(Hs,{size:v[a],className:"text-white"})})}function xy(){const o=us(),{callState:n,incomingCall:a,callerInfo:c,answerCall:h,rejectCall:f}=di(),x=M.useRef(null),v=M.useRef(!1);if(n!=="ringing"||!a)return null;const C=a.signal_data?.callType==="video",w=()=>{if(!v.current&&x.current){v.current=!0;try{const N=new(window.AudioContext||window.webkitAudioContext),R=N.createOscillator(),T=N.createGain();R.connect(T),T.connect(N.destination),R.frequency.setValueAtTime(800,N.currentTime),R.frequency.setValueAtTime(600,N.currentTime+.1),T.gain.setValueAtTime(.3,N.currentTime),T.gain.exponentialRampToValueAtTime(.01,N.currentTime+.3),R.start(N.currentTime),R.stop(N.currentTime+.3);const O=setInterval(()=>{if(n==="ringing"){const D=N.createOscillator(),U=N.createGain();D.connect(U),U.connect(N.destination),D.frequency.setValueAtTime(800,N.currentTime),D.frequency.setValueAtTime(600,N.currentTime+.1),U.gain.setValueAtTime(.3,N.currentTime),U.gain.exponentialRampToValueAtTime(.01,N.currentTime+.3),D.start(N.currentTime),D.stop(N.currentTime+.3)}else clearInterval(O)},2e3);return()=>clearInterval(O)}catch(N){console.warn("Could not play ringtone:",N),"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200])}}},A=async N=>{if(w(),N===h)try{await N(),o(`/call/${a.call_id}`)}catch(R){console.error("Error answering call:",R)}else N()};return i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 text-center max-w-sm w-full mx-4 shadow-2xl",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"w-32 h-32 mx-auto rounded-full overflow-hidden ring-4 ring-green-500 animate-pulse",children:c?.avatar?i.jsx("img",{src:c.avatar,alt:c.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-4xl font-bold text-white",children:c?.name?.charAt(0)||"?"})}),i.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-green-500 px-4 py-1 rounded-full",children:i.jsxs("span",{className:"text-white text-sm font-medium flex items-center gap-1",children:[C?i.jsx(hi,{size:14}):i.jsx(Hs,{size:14}),C?"Video Call":"Voice Call"]})})]}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:c?.name||"Unknown Caller"}),i.jsx("p",{className:"text-gray-400 mb-8",children:c?.phone||"Incoming call..."}),i.jsxs("div",{className:"flex justify-center gap-8",children:[i.jsx("button",{onClick:()=>A(f),className:"w-16 h-16 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-all hover:scale-110 shadow-lg shadow-red-500/30",children:i.jsx(O0,{className:"w-7 h-7 text-white"})}),i.jsx("button",{onClick:()=>A(h),className:"w-16 h-16 rounded-full bg-green-500 hover:bg-green-600 flex items-center justify-center transition-all hover:scale-110 shadow-lg shadow-green-500/30 animate-bounce",children:i.jsx(Hs,{className:"w-7 h-7 text-white"})})]}),i.jsx("p",{className:"text-gray-500 text-sm mt-6",children:"Tap to answer or reject"})]})})}const OA=()=>{us();const{theme:o}=Ko(),{startCall:n,answerCall:a}=di(),[c,h]=M.useState(null),[f,x]=M.useState([]),[v,C]=M.useState([]),[w,A]=M.useState(""),[N,R]=M.useState(!0),[T,O]=M.useState(null);M.useEffect(()=>{D(),B()},[]);const D=async()=>{try{const Z=localStorage.getItem("currentUser");if(!Z){alert("No user logged in"),R(!1);return}const Y=JSON.parse(Z);if(!Y.avatar)Y.avatar=Math.floor(Math.random()*46)+1;else if(typeof Y.avatar=="string"&&!Y.avatar.startsWith("http")){const X=parseInt(Y.avatar);isNaN(X)&&(Y.avatar=Math.floor(Math.random()*46)+1)}h(Y),await Promise.all([U(Y),H(Y)]),R(!1)}catch(Z){console.error("Error initializing calls:",Z),R(!1)}},U=async Z=>{try{const{data:Y,error:X}=await Ot.from("contacts").select("contact_user_id").eq("user_id",Z.id);if(X)throw X;let ee=[];if(Y&&Y.length>0){const xe=Y.map(we=>we.contact_user_id).filter(we=>we);if(xe.length>0){const{data:we,error:me}=await Ot.from("users").select("*").in("id",xe);!me&&we&&(ee=we)}}const{data:q}=await Ot.from("chats").select(`
          user1:users!chats_user1_id_fkey(*),
          user2:users!chats_user2_id_fkey(*)
        `).or(`user1_id.eq.${Z.id},user2_id.eq.${Z.id}`);q&&q.forEach(xe=>{const we=xe.user1.id===Z.id?xe.user2:xe.user1;we&&we.id&&!ee.find(me=>me.id===we.id)&&ee.push(we)}),x(ee)}catch(Y){console.error("Error loading contacts:",Y)}},H=async Z=>{try{const{data:Y,error:X}=await Ot.from("call_history").select(`
          *,
          caller:users!call_history_caller_id_fkey(name, avatar),
          receiver:users!call_history_receiver_id_fkey(name, avatar)
        `).or(`caller_id.eq.${Z.id},receiver_id.eq.${Z.id}`).order("created_at",{ascending:!1}).limit(50);if(X)throw X;const ee=Y.map(q=>({...q,otherUser:q.caller_id===Z.id?q.receiver:q.caller})).filter(q=>q.otherUser&&q.otherUser.id);C(ee)}catch(Y){console.error("Error loading call history:",Y)}},B=async()=>{const Z=localStorage.getItem("pendingCall");if(Z)try{const X=JSON.parse(Z);localStorage.removeItem("pendingCall"),await n(X.contact.id,X.type)}catch(X){console.error("Error parsing pending call:",X)}const Y=localStorage.getItem("pendingIncomingCall");if(Y)try{const X=JSON.parse(Y);localStorage.removeItem("pendingIncomingCall"),setActiveCall(X)}catch(X){console.error("Error parsing pending incoming call:",X)}},P=f.filter(Z=>{if(!Z||!Z.id)return!1;if(!w)return!0;const Y=w.toLowerCase();return Z.name.toLowerCase().includes(Y)||Z.phone&&Z.phone.includes(Y)}),Q=Z=>Z.split(" ").map(Y=>Y[0]).join("").toUpperCase().slice(0,2);return N?i.jsxs("div",{className:"calls-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Loading contacts..."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"calls-container",children:[i.jsxs("header",{className:"app-header",children:[i.jsx("div",{className:"header-left",children:i.jsx("button",{className:"back-btn",onClick:()=>window.history.back(),children:i.jsx("i",{className:"fas fa-arrow-left"})})}),i.jsx("div",{className:"header-center",children:i.jsx("h1",{children:"Calls"})}),i.jsx("div",{className:"header-right"})]}),i.jsx("div",{className:"search-container",children:i.jsxs("div",{className:"search-box",children:[i.jsx("i",{className:"fas fa-search"}),i.jsx("input",{type:"text",placeholder:"Search contacts...",value:w,onChange:Z=>A(Z.target.value)})]})}),i.jsx("div",{className:"call-history-section",children:i.jsx(IA,{userId:c?.id,userAvatar:c?.avatar,userName:c?.name})}),i.jsxs("div",{className:"contacts-section",children:[i.jsx("h3",{children:"Contacts"}),i.jsx("div",{className:"contacts-list",children:P.length>0?P.map(Z=>i.jsxs("div",{className:"contact-item",children:[i.jsxs("div",{className:"contact-avatar",children:[i.jsx("div",{className:"avatar-circle",children:Z.avatar?parseInt(Z.avatar)?i.jsx("img",{src:Rs.find(Y=>Y.id===parseInt(Z.avatar))?.path||Z.avatar,alt:Z.name}):i.jsx("img",{src:Z.avatar,alt:Z.name}):Q(Z.name)}),i.jsx("span",{className:`online-status ${Z.is_online?"online":""}`})]}),i.jsxs("div",{className:"contact-info",children:[i.jsx("h4",{children:Z.name}),i.jsx("p",{children:Z.phone||"No phone"})]}),i.jsxs("div",{className:"call-buttons",children:[i.jsx(Ox,{receiverId:Z.id,callType:"voice",size:"md"}),i.jsx(Ox,{receiverId:Z.id,callType:"video",size:"md"})]})]},Z.id)):i.jsxs("div",{className:"empty-state",children:[i.jsx("i",{className:"fas fa-user-slash"}),i.jsx("h3",{children:"No contacts found"}),i.jsx("p",{children:"Add contacts to start making calls"})]})})]})]}),i.jsx(xy,{}),i.jsx(ed,{})]})},MA=({onBack:o})=>{const[n,a]=M.useState(null),[c,h]=M.useState([]),[f,x]=M.useState(!0),[v,C]=M.useState(null);M.useEffect(()=>{w()},[]);const w=async()=>{try{const O=localStorage.getItem("currentUser");if(!O){alert("No user logged in"),x(!1);return}const D=JSON.parse(O);a(D),await A(D),x(!1)}catch(O){console.error("Error initializing blocked:",O),x(!1)}},A=async O=>{try{const{data:D,error:U}=await Ot.from("blocked_users").select(`
          id,
          blocked_id,
          created_at,
          users!blocked_users_blocked_id_fkey (
            id,
            name,
            phone,
            avatar,
            about
          )
        `).eq("blocker_id",O.id).order("created_at",{ascending:!1});if(U)throw U;h(D||[])}catch(D){console.error("Error loading blocked users:",D),alert("Failed to load blocked users")}},N=(O,D)=>{C({blockId:O,userName:D})},R=async()=>{if(v)try{const{error:O}=await Ot.from("blocked_users").delete().eq("id",v.blockId);if(O)throw O;C(null),await A(n),alert("User unblocked successfully")}catch(O){console.error("Error unblocking user:",O),alert("Failed to unblock user")}},T=O=>O.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2);return f?i.jsxs("div",{className:"blocked-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Loading blocked users..."})]}):i.jsxs("div",{className:"blocked-container",children:[i.jsxs("header",{className:"app-header",children:[i.jsx("div",{className:"header-left",children:i.jsx("button",{className:"back-btn",onClick:o,children:i.jsx("i",{className:"fas fa-arrow-left"})})}),i.jsx("div",{className:"header-center",children:i.jsx("h1",{children:"Blocked Users"})}),i.jsx("div",{className:"header-right"})]}),i.jsx("div",{className:"blocked-content",children:c.length>0?i.jsx("div",{className:"blocked-users-list",children:c.map(O=>{const D=O.users;return D?i.jsxs("div",{className:"blocked-user-item",children:[i.jsx("div",{className:"blocked-user-avatar",children:D.avatar?i.jsx("img",{src:D.avatar,alt:D.name}):T(D.name)}),i.jsxs("div",{className:"blocked-user-info",children:[i.jsx("div",{className:"blocked-user-name",children:D.name}),i.jsx("div",{className:"blocked-user-phone",children:D.phone})]}),i.jsx("div",{className:"blocked-user-actions",children:i.jsx("button",{className:"unblock-btn",onClick:()=>N(O.id,D.name),children:"Unblock"})})]},O.id):null})}):i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-icon",children:""}),i.jsx("h3",{children:"No blocked users"}),i.jsx("p",{children:"You haven't blocked any users yet."})]})}),v&&i.jsx("div",{className:"modal",onClick:()=>C(null),children:i.jsxs("div",{className:"modal-content",onClick:O=>O.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Unblock User"}),i.jsx("button",{className:"close-modal",onClick:()=>C(null),children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("p",{children:["Are you sure you want to unblock ",i.jsx("strong",{children:v.userName}),"?"]}),i.jsx("p",{className:"modal-note",children:"You will be able to receive messages and calls from this user again."}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{className:"btn-secondary",onClick:()=>C(null),children:"Cancel"}),i.jsx("button",{className:"btn-danger",onClick:R,children:"Unblock"})]})]})]})})]})},kA=()=>{const{id:o}=Xu(),n=us(),{supabase:a}=vs(),{startCall:c}=di(),[h,f]=M.useState(null),[x,v]=M.useState(null),[C,w]=M.useState(!0),[A,N]=M.useState(!1),[R,T]=M.useState(!1),[O,D]=M.useState(!1),[U,H]=M.useState({images:0,links:0,docs:0}),[B,P]=M.useState([]),[Q,Z]=M.useState(""),[Y,X]=M.useState(""),[ee,q]=M.useState(""),[xe,we]=M.useState(!1),[me,Ce]=M.useState(!1),[Oe,V]=M.useState(!1),[$,ie]=M.useState(!1),[ke,Ge]=M.useState(""),[Ke,ne]=M.useState("");M.useEffect(()=>{if(!o||o==="undefined"||o==="null"){n("/");return}pe()},[o]);const pe=async()=>{try{const Me=localStorage.getItem("currentUser");if(!Me){n("/login");return}const Fe=JSON.parse(Me);v(Fe);const nt=`digidad_user_${o}`;let Ct=localStorage.getItem(nt),Tn;Ct&&(Ct=JSON.parse(Ct),f(Ct),await Le(Fe,o));try{const{data:sn,error:Vt}=await a.from("users").select("*").eq("id",o).single();if(Vt)throw Vt;Tn=sn,localStorage.setItem(nt,JSON.stringify(Tn)),(!Ct||JSON.stringify(Ct)!==JSON.stringify(Tn))&&(f(Tn),await Le(Fe,o))}catch(sn){console.warn("Network error loading user details:",sn),Ct||f({id:o,name:"Unknown User",phone:"N/A",avatar:null,about:"User information not available"})}w(!1)}catch(Me){console.error("Error loading user details:",Me),w(!1)}},Le=async(Me,Fe)=>{try{const nt=JSON.parse(localStorage.getItem("mutedChats")||"{}"),Ct=[Me.id,Fe].sort().join("_");N(!!nt[Ct]),await Ue(Me.id,Fe),await We(Me.id,Fe),await Ne(Me.id,Fe)}catch(nt){console.error("Error loading additional data:",nt)}},Ue=async(Me,Fe)=>{try{const{data:nt,error:Ct}=await a.from("contacts").select("*").eq("user_id",Me).eq("contact_user_id",Fe);T(nt&&nt.length>0)}catch(nt){console.error("Error checking contact status:",nt)}},We=async(Me,Fe)=>{try{const{data:nt,error:Ct}=await a.from("blocked_users").select("*").eq("blocker_id",Me).eq("blocked_id",Fe);D(nt&&nt.length>0)}catch(nt){console.error("Error checking block status:",nt)}},Ne=async(Me,Fe)=>{try{const{data:nt}=await a.from("chats").select("id").or(`and(user1_id.eq.${Me},user2_id.eq.${Fe}),and(user1_id.eq.${Fe},user2_id.eq.${Me})`).single();if(!nt){H({images:0,links:0,docs:0});return}const{data:Ct,error:Tn}=await a.from("messages").select("message_type, content").eq("chat_id",nt.id);if(Tn)throw Tn;let sn=0,Vt=0,qn=0;Ct.forEach(jn=>{jn.message_type==="image"?sn++:jn.message_type==="document"?qn++:jn.content&&(jn.content.includes("http://")||jn.content.includes("https://"))&&Vt++}),H({images:sn,links:Vt,docs:qn})}catch(nt){console.error("Error loading media count:",nt),H({images:0,links:0,docs:0})}},$e=Me=>Me?.split(" ").map(Fe=>Fe[0]).join("").toUpperCase().slice(0,2)||"U",De=async()=>{try{if(!x||!h)return;const{data:Me}=await a.from("chats").select("*").or(`and(user1_id.eq.${x.id},user2_id.eq.${h.id}),and(user1_id.eq.${h.id},user2_id.eq.${x.id})`).single();if(Me)n(`/chat/${Me.id}/${h.id}`);else{const Fe={user1_id:x.id,user2_id:h.id,last_message:null,last_message_time:new Date().toISOString(),unread_count:0},{data:nt,error:Ct}=await a.from("chats").insert([Fe]).select();if(Ct)throw Ct;if(nt&&nt[0])n(`/chat/${nt[0].id}/${h.id}`);else throw new Error("Failed to create chat")}}catch(Me){console.error("Error navigating to chat:",Me),alert("Failed to open chat")}},ve=async()=>{try{const{callId:Me}=await c(h.id,"voice");n(`/call/${Me}`)}catch(Me){console.error("Failed to start voice call:",Me),alert("Failed to start call: "+Me.message)}},Je=async()=>{try{const{callId:Me}=await c(h.id,"video");n(`/call/${Me}`)}catch(Me){console.error("Failed to start video call:",Me),alert("Failed to start call: "+Me.message)}},mt=()=>{const Me=[x.id,o].sort().join("_"),Fe=JSON.parse(localStorage.getItem("mutedChats")||"{}");A?delete Fe[Me]:Fe[Me]=!0,localStorage.setItem("mutedChats",JSON.stringify(Fe)),N(!A)},Wt=async()=>{try{if(!x||!h)return;const{data:Me}=await a.from("contacts").select("*").eq("user_id",x.id).eq("contact_user_id",h.id).single();if(Me){alert("Contact already exists");return}const{error:Fe}=await a.from("contacts").insert([{user_id:x.id,contact_user_id:h.id,contact_name:h.name}]);if(Fe)throw Fe;T(!0),alert("Contact added successfully")}catch(Me){console.error("Error adding contact:",Me),alert("Failed to add contact")}},ft=()=>{const Me=`${h.name}
${h.phone||""}`;navigator.share?navigator.share({title:"Share Contact",text:Me}):navigator.clipboard.writeText(Me).then(()=>{alert("Contact info copied")})},Mt=async()=>{try{if(!x||!h)return;const{data:Me,error:Fe}=await a.from("chats").select("id").or(`and(user1_id.eq.${x.id},user2_id.eq.${h.id}),and(user1_id.eq.${h.id},user2_id.eq.${x.id})`).single();if(Fe||!Me){alert("No chat history found with this user");return}const{data:nt,error:Ct}=await a.from("messages").select("*").eq("chat_id",Me.id).order("created_at",{ascending:!0});if(Ct)throw Ct;if(!nt||nt.length===0){alert("No messages to export");return}const Tn=nt.map(ts=>({timestamp:new Date(ts.created_at).toLocaleString(),sender:ts.sender_id===x.id?"You":h.name,message:ts.content})),sn=[["Timestamp","Sender","Message"],...Tn.map(ts=>[ts.timestamp,ts.sender,ts.message])].map(ts=>ts.map(Ut=>`"${Ut}"`).join(",")).join(`
`),Vt=new Blob([sn],{type:"text/csv;charset=utf-8;"}),qn=document.createElement("a"),jn=URL.createObjectURL(Vt);qn.setAttribute("href",jn),qn.setAttribute("download",`chat_${h.name}_${new Date().toISOString().split("T")[0]}.csv`),qn.style.visibility="hidden",document.body.appendChild(qn),qn.click(),document.body.removeChild(qn),alert("Chat exported successfully!")}catch(Me){console.error("Error exporting chat:",Me),alert("Failed to export chat")}},xn=()=>{if(!R){alert("Please add this user to contacts first");return}a.from("contacts").select("*").eq("user_id",x.id).eq("contact_user_id",o).single().then(({data:Me,error:Fe})=>{if(Fe&&Fe.code!=="PGRST116"){console.error("Error fetching contact:",Fe),alert("Failed to load contact info");return}Z(Me?.contact_name||h.name),X(h.phone||""),x.id===o&&q(h.about||""),Ce(!0)})},cn=async()=>{try{if(!Q.trim()){alert("Name is required");return}const Me={user_id:x.id,contact_user_id:o,contact_name:Q.trim(),updated_at:new Date().toISOString()},{data:Fe}=await a.from("contacts").select("id").eq("user_id",x.id).eq("contact_user_id",o).single();if(Fe?await a.from("contacts").update(Me).eq("id",Fe.id):await a.from("contacts").insert([Me]),x.id===o){const nt={name:Q.trim(),phone:Y.trim(),updated_at:new Date().toISOString()};ee.trim()&&(nt.about=ee.trim()),await a.from("users").update(nt).eq("id",x.id)}f({...h,name:Q.trim(),phone:Y.trim(),about:ee.trim()}),Ce(!1),alert("Contact updated successfully")}catch(Me){console.error("Error saving contact:",Me),alert("Failed to update contact")}},qt=()=>{O?ht():we(!0)},At=async()=>{try{const{error:Me}=await a.from("blocked_users").insert([{blocker_id:x.id,blocked_id:o}]);if(Me)throw Me;D(!0),we(!1),alert("Contact blocked")}catch(Me){console.error("Error blocking contact:",Me),alert("Failed to block contact")}},ht=async()=>{try{const{error:Me}=await a.from("blocked_users").delete().eq("blocker_id",x.id).eq("blocked_id",o);if(Me)throw Me;D(!1),alert("Contact unblocked")}catch(Me){console.error("Error unblocking contact:",Me),alert("Failed to unblock contact")}},Hn=()=>{V(!0)},ze=async()=>{try{if(!ke.trim()){alert("Please select a reason");return}const{error:Me}=await a.from("reports").insert([{reporter_id:x.id,reported_id:o,reason:ke,details:Ke}]);if(Me)throw Me;V(!1),Ge(""),ne(""),alert("Report submitted")}catch(Me){console.error("Error submitting report:",Me),alert("Failed to submit report")}},Is=async()=>{if(confirm(`Delete chat with ${h.name}? This will delete all messages.`))try{const{data:Fe}=await a.from("chats").select("id").or(`and(user1_id.eq.${x.id},user2_id.eq.${h.id}),and(user1_id.eq.${h.id},user2_id.eq.${x.id})`).single();Fe&&(await a.from("messages").delete().eq("chat_id",Fe.id),await a.from("chats").delete().eq("id",Fe.id)),alert("Contact deleted"),n("/")}catch(Fe){console.error("Error deleting contact:",Fe),alert("Failed to delete contact")}};return C?i.jsx(Vi,{}):h?i.jsxs("div",{className:"user-details-screen",children:[i.jsxs("header",{className:"user-details-header",children:[i.jsx("button",{className:"back-btn",onClick:()=>n(-1),children:i.jsx(Qo,{size:24})}),i.jsx("h1",{children:"Contact Info"}),i.jsx(k0,{trigger:i.jsx(Zu,{size:24}),items:[{icon:i.jsx($u,{size:16}),label:"Edit Contact",onClick:xn,disabled:!R}]})]}),i.jsxs("div",{className:"user-profile-section",children:[i.jsx("div",{className:"user-details-avatar",id:"userDetailAvatar",onClick:()=>h.avatar&&ie(!0),style:{cursor:h.avatar?"pointer":"default"},children:h.avatar?parseInt(h.avatar)?i.jsx("img",{id:"userDetailImg",src:Rs.find(Me=>Me.id===parseInt(h.avatar))?.path,alt:h.name}):i.jsx("img",{id:"userDetailImg",src:h.avatar,alt:h.name}):i.jsx("div",{className:"dp-preview-initials",id:"userDetailInitials",children:$e(h.name)})}),i.jsx("h2",{className:"user-detail-name",id:"userDetailName",children:h.name}),i.jsx("p",{className:"user-detail-phone",id:"userDetailPhone",children:h.phone||"+91 0000000000"})]}),i.jsxs("div",{className:"user-actions",children:[i.jsx("button",{className:"action-btn",id:"messageUserBtn",onClick:De,children:i.jsx(Ma,{size:24,style:{color:"white"}})}),i.jsx("button",{className:"action-btn",id:"voiceCallUserBtn",onClick:ve,children:i.jsx(Hs,{size:24,style:{color:"white"}})}),i.jsx("button",{className:"action-btn",id:"videoCallUserBtn",onClick:Je,children:i.jsx(hi,{size:24,style:{color:"white"}})})]}),i.jsxs("div",{className:"user-info-sections",children:[i.jsxs("div",{className:"info-section",children:[i.jsx("h3",{className:"section-header",children:"Media, Links, and Docs"}),i.jsxs("div",{className:"media-preview",children:[i.jsxs("div",{className:"media-item",children:[i.jsx(J2,{className:"icon",size:20}),i.jsx("span",{className:"count",id:"mediaCount",children:U.images})]}),i.jsxs("div",{className:"media-item",children:[i.jsx(Z_,{className:"icon",size:20}),i.jsx("span",{className:"count",id:"linksCount",children:U.links})]}),i.jsxs("div",{className:"media-item",children:[i.jsx(I0,{className:"icon",size:20}),i.jsx("span",{className:"count",id:"docsCount",children:U.docs})]})]})]}),i.jsx("div",{className:"info-section",children:i.jsxs("div",{className:"settings-item toggle-item",children:[i.jsxs("div",{className:"item-left",children:[i.jsx(K2,{className:"icon",size:20}),i.jsx("span",{className:"label",children:"Mute Notifications"})]}),i.jsxs("label",{className:"toggle-switch",children:[i.jsx("input",{type:"checkbox",id:"muteUserToggle",checked:A,onChange:mt}),i.jsx("span",{className:"toggle-slider"})]})]})}),i.jsxs("div",{className:"info-section",children:[!R&&i.jsx("div",{className:"settings-item",id:"addToContactsBtn",onClick:Wt,children:i.jsxs("div",{className:"item-left",children:[i.jsx(FS,{className:"icon",size:20}),i.jsx("span",{className:"label",children:"Add to Contacts"})]})}),i.jsx("div",{className:"settings-item",id:"shareContactBtn",onClick:ft,children:i.jsxs("div",{className:"item-left",children:[i.jsx(ty,{className:"icon",size:20}),i.jsx("span",{className:"label",children:"Share Contact"})]})}),i.jsx("div",{className:"settings-item",id:"exportChatBtn",onClick:Mt,children:i.jsxs("div",{className:"item-left",children:[i.jsx(P_,{className:"icon",size:20}),i.jsx("span",{className:"label",children:"Export Chat"})]})})]}),i.jsxs("div",{className:"info-section",id:"groupsSection",children:[i.jsx("h3",{className:"section-header",children:"Groups in Common"}),i.jsx("div",{id:"commonGroups",children:i.jsx("p",{className:"no-data",children:"No groups in common"})})]}),i.jsxs("div",{className:"info-section danger-section",children:[i.jsx("div",{className:"settings-item danger",id:"blockContactBtn",onClick:qt,children:i.jsxs("div",{className:"item-left",children:[i.jsx(Fu,{className:"icon",size:20}),i.jsx("span",{className:"label",children:O?"Unblock Contact":"Block Contact"})]})}),i.jsx("div",{className:"settings-item danger",id:"reportContactBtn",onClick:Hn,children:i.jsxs("div",{className:"item-left",children:[i.jsx(o0,{className:"icon",size:20}),i.jsx("span",{className:"label",children:"Report Contact"})]})}),i.jsx("div",{className:"settings-item danger",id:"deleteContactBtn",onClick:Is,children:i.jsxs("div",{className:"item-left",children:[i.jsx(js,{className:"icon",size:20}),i.jsx("span",{className:"label",children:"Delete Contact"})]})})]})]}),i.jsx(wr,{isOpen:xe,onClose:()=>we(!1),title:"Block Contact",size:"small",children:i.jsxs("div",{className:"modal-content-text",children:[i.jsxs("p",{children:["Block ",h.name,"?"]}),i.jsx("p",{className:"warning-text",children:"Blocked contacts will no longer be able to call you or send you messages."}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{className:"btn-secondary",onClick:()=>we(!1),children:"Cancel"}),i.jsx("button",{className:"btn-danger",onClick:At,children:"Block"})]})]})}),i.jsx(wr,{isOpen:me,onClose:()=>Ce(!1),title:"Edit Contact",size:"small",children:i.jsxs("div",{className:"edit-contact-form",children:[i.jsxs("div",{className:"input-group",children:[i.jsx("label",{children:"Contact Name"}),i.jsx("input",{type:"text",value:Q,onChange:Me=>Z(Me.target.value),placeholder:"Enter name"})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{className:"btn-secondary",onClick:()=>Ce(!1),children:"Cancel"}),i.jsx("button",{className:"btn-primary",onClick:cn,children:"Save"})]})]})}),i.jsx(wr,{isOpen:Oe,onClose:()=>V(!1),title:"Report Contact",size:"small",children:i.jsxs("div",{className:"report-form",children:[i.jsx("p",{children:"Why are you reporting this contact?"}),i.jsxs("div",{className:"report-reasons",children:[i.jsxs("label",{className:"report-reason-item",children:[i.jsx("input",{type:"radio",name:"report",value:"spam",checked:ke==="spam",onChange:Me=>Ge(Me.target.value)}),i.jsx("span",{children:"Spam"})]}),i.jsxs("label",{className:"report-reason-item",children:[i.jsx("input",{type:"radio",name:"report",value:"harassment",checked:ke==="harassment",onChange:Me=>Ge(Me.target.value)}),i.jsx("span",{children:"Harassment"})]}),i.jsxs("label",{className:"report-reason-item",children:[i.jsx("input",{type:"radio",name:"report",value:"inappropriate",checked:ke==="inappropriate",onChange:Me=>Ge(Me.target.value)}),i.jsx("span",{children:"Inappropriate Content"})]}),i.jsxs("label",{className:"report-reason-item",children:[i.jsx("input",{type:"radio",name:"report",value:"other",checked:ke==="other",onChange:Me=>Ge(Me.target.value)}),i.jsx("span",{children:"Other"})]})]}),i.jsxs("div",{className:"modal-actions",children:[i.jsx("button",{className:"btn-secondary",onClick:()=>V(!1),children:"Cancel"}),i.jsx("button",{className:"btn-danger",onClick:ze,children:"Report"})]})]})}),$&&i.jsx("div",{className:"modal-backdrop",onClick:()=>ie(!1),children:i.jsxs("div",{className:"modal-content",onClick:Me=>Me.stopPropagation(),children:[i.jsx("button",{className:"close-modal-btn",onClick:()=>ie(!1),children:""}),i.jsx("div",{className:"image-modal-content",children:h.avatar&&i.jsx("img",{src:parseInt(h.avatar)?Rs.find(Me=>Me.id===parseInt(h.avatar))?.path:h.avatar,alt:h.name,className:"full-screen-image",onClick:()=>ie(!1)})})]})})]}):i.jsxs("div",{className:"user-details-error",children:[i.jsx("p",{children:"User not found"}),i.jsx("button",{onClick:()=>n("/"),children:"Go Back"})]})},DA=({userId:o,onBack:n})=>{const[a,c]=M.useState(null),[h,f]=M.useState(null),[x,v]=M.useState(!0);M.useEffect(()=>{C()},[o]);const C=async()=>{try{const T=localStorage.getItem("currentUser");T&&f(JSON.parse(T)),await w(o),v(!1)}catch(T){console.error("Error initializing shared profile:",T),v(!1)}},w=async T=>{try{const{data:O,error:D}=await Ot.from("users").select("id, name, phone, avatar, about, created_at").eq("id",T).single();if(D)throw D;c(O)}catch(O){console.error("Error loading shared profile:",O),alert("Profile not found")}},A=()=>{alert("Add to contacts - feature not implemented")},N=()=>{alert("Start chat - feature not implemented")},R=T=>T.split(" ").map(O=>O[0]).join("").toUpperCase().slice(0,2);return x?i.jsxs("div",{className:"shared-profile-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Loading profile..."})]}):a?i.jsxs("div",{className:"shared-profile-container",children:[i.jsxs("header",{className:"app-header",children:[i.jsx("div",{className:"header-left",children:i.jsx("button",{className:"back-btn",onClick:n,children:i.jsx("i",{className:"fas fa-arrow-left"})})}),i.jsx("div",{className:"header-center",children:i.jsx("h1",{children:"Profile"})}),i.jsx("div",{className:"header-right",children:!h&&i.jsxs("div",{className:"auth-actions",children:[i.jsxs("button",{className:"btn-primary",onClick:()=>alert("Login - feature not implemented"),children:[i.jsx("i",{className:"fas fa-sign-in-alt"})," Login"]}),i.jsxs("button",{className:"btn-secondary",onClick:()=>alert("Sign up - feature not implemented"),children:[i.jsx("i",{className:"fas fa-user-plus"})," Sign Up"]})]})})]}),i.jsxs("div",{className:"profile-content",children:[i.jsx("div",{className:"profile-picture-section",children:i.jsx("div",{className:"profile-avatar",children:a.avatar?parseInt(a.avatar)?i.jsx("img",{src:Rs.find(T=>T.id===parseInt(a.avatar))?.path||a.avatar,alt:a.name}):i.jsx("img",{src:a.avatar,alt:a.name}):i.jsx("div",{className:"profile-initials",children:R(a.name)})})}),i.jsxs("div",{className:"profile-info-section",children:[i.jsxs("div",{className:"info-item",children:[i.jsxs("div",{className:"info-label",children:[i.jsx("i",{className:"fas fa-user"}),i.jsx("span",{className:"label",children:"Name"})]}),i.jsx("div",{className:"info-value",children:i.jsx("span",{children:a.name})})]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("div",{className:"info-label",children:[i.jsx("i",{className:"fas fa-info-circle"}),i.jsx("span",{className:"label",children:"About"})]}),i.jsx("div",{className:"info-value",children:i.jsx("span",{children:a.about||"Hey there! I am using CaBa"})})]}),i.jsxs("div",{className:"info-item",children:[i.jsxs("div",{className:"info-label",children:[i.jsx("i",{className:"fas fa-phone"}),i.jsx("span",{className:"label",children:"Phone"})]}),i.jsx("div",{className:"info-value",children:i.jsx("span",{children:a.phone||"Not provided"})})]})]}),h&&i.jsxs("div",{className:"profile-actions",children:[i.jsxs("button",{className:"action-btn",onClick:A,children:[i.jsx("i",{className:"fas fa-user-plus"}),i.jsx("span",{className:"label",children:"Add to Contacts"})]}),i.jsxs("button",{className:"action-btn",onClick:N,children:[i.jsx("i",{className:"fas fa-comment"}),i.jsx("span",{className:"label",children:"Chat"})]})]})]})]}):i.jsxs("div",{className:"shared-profile-error",children:[i.jsxs("p",{children:[i.jsx(Ju,{size:16})," Profile not found"]}),i.jsx("button",{onClick:n,children:"Go Back"})]})},LA=()=>{const o=us();return i.jsxs("div",{className:"about-container",children:[i.jsxs("header",{className:"about-header",children:[i.jsx("button",{className:"back-btn",onClick:()=>o("/"),children:i.jsx(Qo,{size:24})}),i.jsx("h1",{children:"About CaBa"})]}),i.jsxs("div",{className:"about-content",children:[i.jsxs("div",{className:"about-hero",children:[i.jsx("div",{className:"app-logo-large",children:i.jsx("span",{className:"logo-text",children:"CB"})}),i.jsx("h2",{children:"CaBa Messaging App"}),i.jsx("p",{className:"version",children:"Version 1.0.0"}),i.jsx("p",{className:"tagline",children:"Connect, Communicate, Care"})]}),i.jsxs("div",{className:"about-section",children:[i.jsx("div",{className:"section-icon",children:i.jsx(Y_,{size:32})}),i.jsx("h3",{children:"Our Purpose"}),i.jsx("p",{children:"CaBa is designed to bring people closer together through secure, private, and reliable communication. Whether you're chatting with friends, family, or colleagues, CaBa ensures your conversations remain private and your connections stay strong."}),i.jsxs("div",{className:"purpose-features",children:[i.jsxs("div",{className:"feature-item",children:[i.jsx(Ma,{size:20}),i.jsx("span",{children:"Instant Messaging"})]}),i.jsxs("div",{className:"feature-item",children:[i.jsx(Hs,{size:20}),i.jsx("span",{children:"Voice & Video Calls"})]}),i.jsxs("div",{className:"feature-item",children:[i.jsx(Hi,{size:20}),i.jsx("span",{children:"Group Chats"})]}),i.jsxs("div",{className:"feature-item",children:[i.jsx(oi,{size:20}),i.jsx("span",{children:"End-to-End Encryption"})]})]})]}),i.jsxs("div",{className:"about-section",children:[i.jsx("div",{className:"section-icon",children:i.jsx(oi,{size:32})}),i.jsx("h3",{children:"How We Keep Your Chats & Calls Safe"}),i.jsxs("div",{className:"security-grid",children:[i.jsxs("div",{className:"security-item",children:[i.jsx(Pp,{size:24}),i.jsx("h4",{children:"End-to-End Encryption"}),i.jsx("p",{children:"All your messages, calls, and media are encrypted from the moment they leave your device until they reach the intended recipient. Only you and the person you're communicating with can read or listen to them."})]}),i.jsxs("div",{className:"security-item",children:[i.jsx(oi,{size:24}),i.jsx("h4",{children:"Secure Servers"}),i.jsx("p",{children:"Our servers use industry-standard security protocols and are regularly audited for vulnerabilities. Your data is stored securely and never shared with third parties without your consent."})]}),i.jsxs("div",{className:"security-item",children:[i.jsx(Xa,{size:24}),i.jsx("h4",{children:"Privacy First"}),i.jsx("p",{children:"We don't track your location, read your messages, or analyze your behavior for advertising. Your privacy is our top priority, and we only collect the minimum data necessary to provide our service."})]})]})]}),i.jsxs("div",{className:"about-section",children:[i.jsx("div",{className:"section-icon",children:i.jsx(Xa,{size:32})}),i.jsx("h3",{children:"Your Privacy Matters"}),i.jsxs("div",{className:"privacy-points",children:[i.jsxs("div",{className:"privacy-point",children:[i.jsx("div",{className:"privacy-icon",children:i.jsx(Pp,{size:20})}),i.jsxs("div",{children:[i.jsx("h4",{children:"Data Encryption"}),i.jsx("p",{children:"Your messages are encrypted in transit and at rest using AES-256 encryption."})]})]}),i.jsxs("div",{className:"privacy-point",children:[i.jsx("div",{className:"privacy-icon",children:i.jsx(oi,{size:20})}),i.jsxs("div",{children:[i.jsx("h4",{children:"No Tracking"}),i.jsx("p",{children:"We don't track your location or monitor your online activity."})]})]}),i.jsxs("div",{className:"privacy-point",children:[i.jsx("div",{className:"privacy-icon",children:i.jsx(Xa,{size:20})}),i.jsxs("div",{children:[i.jsx("h4",{children:"Device Control"}),i.jsx("p",{children:"You control who can contact you and what information is shared."})]})]}),i.jsxs("div",{className:"privacy-point",children:[i.jsx("div",{className:"privacy-icon",children:i.jsx(js,{size:20})}),i.jsxs("div",{children:[i.jsx("h4",{children:"Data Deletion"}),i.jsx("p",{children:"You can delete your account and all associated data at any time."})]})]}),i.jsxs("div",{className:"privacy-point",children:[i.jsx("div",{className:"privacy-icon",children:i.jsx(oi,{size:20})}),i.jsxs("div",{children:[i.jsx("h4",{children:"Secure Authentication"}),i.jsx("p",{children:"Multi-factor authentication and secure login methods protect your account."})]})]}),i.jsxs("div",{className:"privacy-point",children:[i.jsx("div",{className:"privacy-icon",children:i.jsx(I0,{size:20})}),i.jsxs("div",{children:[i.jsx("h4",{children:"Minimal Data Collection"}),i.jsx("p",{children:"We only collect what's necessary: your name, phone number, and profile information."})]})]})]})]}),i.jsxs("div",{className:"about-section",children:[i.jsx("h3",{children:"Key Features"}),i.jsxs("div",{className:"features-grid",children:[i.jsxs("div",{className:"feature-card",children:[i.jsx(Ma,{size:24}),i.jsx("h4",{children:"Real-time Messaging"}),i.jsx("p",{children:"Send and receive messages instantly with read receipts and typing indicators."})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx(Hs,{size:24}),i.jsx("h4",{children:"HD Voice & Video Calls"}),i.jsx("p",{children:"Crystal clear voice calls and high-definition video calls with screen sharing."})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx(Hi,{size:24}),i.jsx("h4",{children:"Group Conversations"}),i.jsx("p",{children:"Create groups for family, friends, or work with up to 1000 members."})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx(oi,{size:24}),i.jsx("h4",{children:"Advanced Security"}),i.jsx("p",{children:"Self-destructing messages, two-factor authentication, and biometric login."})]})]})]}),i.jsxs("div",{className:"about-footer",children:[i.jsx("p",{children:"Thank you for choosing CaBa for your communication needs."}),i.jsx("p",{className:"copyright",children:" 2024 CaBa Messaging App. All rights reserved."})]})]})]})},BA=()=>{const o=us(),[n,a]=M.useState([{id:1,text:" Welcome to CaBa Support!",sender:"support",timestamp:new Date(Date.now()-3e5),status:"read"},{id:2,text:"How can we help you today? Feel free to share your questions, suggestions, or any issues you're facing with the app.",sender:"support",timestamp:new Date(Date.now()-24e4),status:"read"},{id:3,text:"You can also check our About page for detailed information about privacy, security, and app features.",sender:"support",timestamp:new Date(Date.now()-18e4),status:"read"}]),[c,h]=M.useState(""),f=M.useRef(null),x=()=>{f.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{x()},[n]);const v=()=>{if(!c.trim())return;const A=JSON.parse(localStorage.getItem("currentUser")||"{}"),N={id:Date.now(),text:c,sender:"user",timestamp:new Date,status:"sent",userName:A.name||"Unknown User",userPhone:A.phone||"Unknown",isRead:!1};a(T=>[...T,N]),h("");const R=JSON.parse(localStorage.getItem("supportMessages")||"[]");R.push(N),localStorage.setItem("supportMessages",JSON.stringify(R)),setTimeout(()=>{const T={id:Date.now()+1,text:"Thank you for your message! Our support team will review it and get back to you soon. In the meantime, you can check our About page for more information.",sender:"support",timestamp:new Date,status:"read"};a(O=>[...O,T])},2e3)},C=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),v())},w=A=>A.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsxs("div",{className:"support-chat-container",children:[i.jsxs("header",{className:"support-chat-header",children:[i.jsx("div",{className:"header-left",children:i.jsx("button",{className:"back-btn",onClick:()=>o("/"),children:i.jsx(Qo,{size:24})})}),i.jsxs("div",{className:"header-center",children:[i.jsx("div",{className:"support-avatar",children:i.jsx("div",{className:"support-initials",children:"CS"})}),i.jsxs("div",{className:"support-info",children:[i.jsx("h3",{children:"CaBa Support"}),i.jsx("span",{className:"support-status",children:"Online"})]})]}),i.jsx("div",{className:"header-right",children:i.jsx("span",{className:"support-verified",children:i.jsx(r0,{size:16})})})]}),i.jsx("div",{className:"support-messages",children:i.jsxs("div",{className:"messages-list",children:[n.map(A=>i.jsx("div",{className:`message-item ${A.sender==="user"?"user-message":"support-message"}`,children:i.jsxs("div",{className:"message-content",children:[i.jsx("p",{children:A.text}),i.jsxs("div",{className:"message-footer",children:[i.jsx("span",{className:"message-time",children:w(A.timestamp)}),A.sender==="user"&&i.jsx("span",{className:"message-status",children:A.status==="sent"?i.jsx(Z2,{size:14}):i.jsx(r0,{size:14})})]})]})},A.id)),i.jsx("div",{ref:f})]})}),i.jsx("div",{className:"support-input-area",children:i.jsxs("div",{className:"input-container",children:[i.jsx("input",{type:"text",placeholder:"Type your message...",value:c,onChange:A=>h(A.target.value),onKeyPress:C,className:"message-input"}),i.jsx("button",{className:"send-btn",onClick:v,disabled:!c.trim(),children:i.jsx(RS,{size:20})})]})})]})},zf=o=>{if(!o)return`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`;if(parseInt(o)){const n=Rs.find(a=>a.id===parseInt(o));return n?n.path:`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}return o},UA=()=>{const o=us(),{supabase:n}=vs(),{user:a}=La(),[c,h]=M.useState(null),[f,x]=M.useState("dashboard"),[v,C]=M.useState(!0),[w,A]=M.useState({totalUsers:0,totalMessages:0,onlineUsers:0,totalChats:0,totalNews:0,totalReports:0,totalMedia:0,totalCalls:0}),[N,R]=M.useState([]),[T,O]=M.useState([]),[D,U]=M.useState([]),[H,B]=M.useState([]),[P,Q]=M.useState([]),[Z,Y]=M.useState([]),[X,ee]=M.useState([]),[q,xe]=M.useState([]),[we,me]=M.useState([]),[Ce,Oe]=M.useState([]),[V,$]=M.useState([]),[ie,ke]=M.useState(""),[Ge,Ke]=M.useState(null),[ne,pe]=M.useState(!1),[Le,Ue]=M.useState(!1),[We,Ne]=M.useState(null),[$e,De]=M.useState(!1),[ve,Je]=M.useState({open:!1,messageId:null,userName:"",message:""}),[mt,Wt]=M.useState(""),[ft,Mt]=M.useState({users:!1,messages:!1,news:!1,reports:!1,logs:!1,support:!1,blocked:!1,groups:!1,reminders:!1,statuses:!1,"media-transfers":!1});M.useEffect(()=>{xn()},[]),M.useEffect(()=>{c&&cn()},[c,f]);const xn=async()=>{try{if(!a){console.log(" No valid user found in Admin, redirecting to login"),o("/login");return}const{data:G,error:Te}=await n.from("users").select("*").eq("id",a.id).single();if(Te||!G||!G.is_admin){o("/");return}G.is_admin&&console.log("Admin access granted for user:",G.name),h(G)}catch{o("/")}},cn=async()=>{if(f){Mt(G=>({...G,[f]:!0}));try{switch(f){case"dashboard":await qt();break;case"users":await At();break;case"messages":await ht();break;case"news":await Hn();break;case"reports":await ze();break;case"logs":await Is();break;case"support":await Me();break;case"blocked":await Fe();break;case"groups":await nt();break;case"reminders":await Ct();break;case"statuses":await Tn();break;case"media-transfers":await sn();break}}catch(G){c?.is_admin&&console.error("Error loading data:",G)}finally{Mt(G=>({...G,[f]:!1}))}}},qt=async()=>{try{const[G,Te,Tt,On,ds,yn,Kt]=await Promise.all([n.from("users").select("id, is_online",{count:"exact"}),n.from("messages").select("*",{count:"exact",head:!0}),n.from("chats").select("*",{count:"exact",head:!0}),n.from("news_articles").select("*",{count:"exact",head:!0}),n.from("reports").select("*",{count:"exact",head:!0}),n.from("media").select("*",{count:"exact",head:!0}),n.from("call_history").select("*",{count:"exact",head:!0})]),ns=G.data?.filter(He=>He.is_online).length||0;A({totalUsers:G.count||0,totalMessages:Te.count||0,onlineUsers:ns,totalChats:Tt.count||0,totalNews:On.count||0,totalReports:ds.count||0,totalMedia:yn.count||0,totalCalls:Kt.count||0})}catch(G){console.error("Error loading stats:",G)}},At=async()=>{try{const{data:G,error:Te}=await n.from("users").select("*").order("created_at",{ascending:!1});if(Te){console.error("Error loading users:",Te);try{const{data:Tt,error:On}=await n.from("users").select("id, name, email, phone, avatar, is_admin, is_online, created_at").order("created_at",{ascending:!1});if(On){console.error("Error with simple user query:",On),R([]);return}R(Tt||[])}catch(Tt){console.error("Simple user query failed:",Tt),R([])}}else if(G&&G.length>0)try{const Tt=G.map(Kt=>Kt.id),{data:On}=await n.from("messages").select("sender_id").in("sender_id",Tt),ds={};On?.forEach(Kt=>{ds[Kt.sender_id]=(ds[Kt.sender_id]||0)+1});const yn=G.map(Kt=>({...Kt,message_count:ds[Kt.id]||0}));R(yn)}catch(Tt){console.warn("Could not load additional user data:",Tt),R(G)}else R([])}catch(G){console.error("Error loading users:",G),R([])}},ht=async()=>{try{const{data:G,error:Te}=await n.from("messages").select("*").order("created_at",{ascending:!1}).limit(100);if(Te){console.error("Error loading messages:",Te),O([]);return}if(G&&G.length>0)try{const Tt=[...new Set(G.map(Kt=>Kt.sender_id))],{data:On}=await n.from("users").select("id, name, avatar").in("id",Tt),ds={};On?.forEach(Kt=>{ds[Kt.id]=Kt});const yn=G.map(Kt=>({...Kt,users:ds[Kt.sender_id]||{name:"Unknown User",avatar:null}}));O(yn)}catch(Tt){console.warn("Could not load additional message data:",Tt),O(G.map(On=>({...On,users:{name:"Unknown User",avatar:null}})))}else O([])}catch(G){console.error("Error loading messages:",G),O([])}},Hn=async()=>{try{const{data:G,error:Te}=await n.from("news_articles").select("*").order("created_at",{ascending:!1});!Te&&G&&U(G)}catch(G){c?.is_admin&&console.error("Error loading news:",G)}},ze=async()=>{try{const{data:G,error:Te}=await n.from("reports").select(`
          *,
          users!reporter_id(name),
          messages(content)
        `).order("created_at",{ascending:!1});!Te&&G&&B(G)}catch(G){c?.is_admin&&console.error("Error loading reports:",G)}},Is=async()=>{try{const{data:G,error:Te}=await n.from("admin_logs").select(`
          *,
          users!admin_id(name)
        `).order("created_at",{ascending:!1}).limit(100);!Te&&G&&Q(G)}catch(G){c?.is_admin&&console.error("Error loading admin logs:",G)}},Me=async()=>{De(!0);try{const{data:G,error:Te}=await n.rpc("get_support_messages_for_admin");!Te&&G?Y(G):(c?.is_admin&&console.error("Error loading support messages:",Te),Y([]))}catch(G){c?.is_admin&&console.error("Error loading support messages:",G),Y([])}finally{De(!1)}},Fe=async()=>{try{const{data:G,error:Te}=await n.from("blocked_users").select(`
          *,
          blocker:users!blocker_id(name, email),
          blocked:users!blocked_id(name, email)
        `).order("created_at",{ascending:!1});!Te&&G&&ee(G)}catch(G){c?.is_admin&&console.error("Error loading blocked users:",G)}},nt=async()=>{try{const{data:G,error:Te}=await n.from("groups").select(`
          *,
          creator:users!created_by(name),
          members:group_members(count)
        `).order("created_at",{ascending:!1});!Te&&G&&xe(G)}catch(G){c?.is_admin&&console.error("Error loading groups:",G)}},Ct=async()=>{try{const{data:G,error:Te}=await n.from("reminders").select(`
          *,
          sender:users!sender_id(name),
          receiver:users!receiver_id(name)
        `).order("created_at",{ascending:!1}).limit(100);!Te&&G&&me(G)}catch(G){c?.is_admin&&console.error("Error loading reminders:",G)}},Tn=async()=>{try{const{data:G,error:Te}=await n.from("statuses").select(`
          *,
          user:users(name, avatar)
        `).order("created_at",{ascending:!1}).limit(100);!Te&&G&&Oe(G)}catch(G){c?.is_admin&&console.error("Error loading statuses:",G)}},sn=async()=>{try{const{data:G,error:Te}=await n.from("media_transfers").select(`
          *,
          sender:users!sender_id(name),
          receiver:users!receiver_id(name)
        `).order("created_at",{ascending:!1}).limit(100);!Te&&G&&$(G)}catch(G){c?.is_admin&&console.error("Error loading media transfers:",G)}},Vt=async G=>{if(confirm("Are you sure you want to remove admin privileges from this user?"))try{const{error:Te}=await n.from("users").update({is_admin:!1}).eq("id",G);Te?alert("Error removing admin privileges: "+Te.message):(await je("demote_admin",`Removed admin privileges from user ${G}`),At(),alert("Admin privileges removed successfully"))}catch(Te){c?.is_admin&&console.error("Error demoting admin:",Te),alert("Error removing admin privileges")}},qn=async G=>{if(confirm("Are you sure you want to grant admin privileges to this user?"))try{const{error:Te}=await n.from("users").update({is_admin:!0}).eq("id",G);Te?alert("Error granting admin privileges: "+Te.message):(await je("promote_admin",`Granted admin privileges to user ${G}`),At(),alert("Admin privileges granted successfully"))}catch(Te){c?.is_admin&&console.error("Error promoting to admin:",Te),alert("Error granting admin privileges")}},jn=async G=>{if(confirm("Are you sure you want to delete this message?"))try{const{error:Te}=await n.from("messages").delete().eq("id",G);Te||(await je("delete_message",`Deleted message ${G}`),ht(),alert("Message deleted successfully"))}catch(Te){c?.is_admin&&console.error("Error deleting message:",Te),alert("Error deleting message")}},ts=async G=>{if(confirm("Are you sure you want to delete this article?"))try{const{error:Te}=await n.from("news_articles").delete().eq("id",G);Te||(await je("delete_news",`Deleted news article ${G}`),Hn(),alert("Article deleted successfully"))}catch(Te){c?.is_admin&&console.error("Error deleting article:",Te),alert("Error deleting article")}},Ut=async(G,Te)=>{try{const{error:Tt}=await n.from("reports").update({status:Te,resolved_at:new Date().toISOString(),admin_notes:`Resolved by admin: ${Te}`}).eq("id",G);Tt||(await je("resolve_report",`Resolved report ${G} as ${Te}`),ze())}catch(Tt){c?.is_admin&&console.error("Error resolving report:",Tt)}},je=async(G,Te)=>{try{await n.from("admin_logs").insert({admin_id:a.id,action:G,details:{description:Te},ip_address:"admin-panel",user_agent:navigator.userAgent})}catch(Tt){c?.is_admin&&console.error("Error logging admin action:",Tt)}},lt=async G=>{try{const{data:Te,error:Tt}=await n.rpc(G);Tt?alert(`Error running ${G}: ${Tt.message}`):(await je("maintenance",`Ran ${G}`),alert(`${G} completed successfully`),cn())}catch(Te){c?.is_admin&&console.error(`Error running ${G}:`,Te),alert(`Error running ${G}`)}},gt=async G=>{const Te=Z.find(Tt=>Tt.id===G);Te&&Je({open:!0,messageId:G,userName:Te.user_name,message:Te.message})},Qt=async()=>{if(!mt.trim()){alert("Please enter a response");return}try{const{data:G,error:Te}=await n.rpc("respond_to_support_message",{p_message_id:ve.messageId,p_response:mt.trim(),p_admin_id:a.id});!Te&&G?(await je("support_response",`Responded to support message from ${ve.userName}`),alert("Response sent successfully"),Je({open:!1,messageId:null,userName:"",message:""}),Wt(""),Me()):alert("Error sending response")}catch(G){c?.is_admin&&console.error("Error responding to support message:",G),alert("Error sending response")}},Os=async G=>{try{const{data:Te,error:Tt}=await n.rpc("mark_support_message_read",{p_message_id:G});!Tt&&Te&&Me()}catch(Te){c?.is_admin&&console.error("Error marking message as read:",Te)}},va=async(G,Te)=>{try{const{error:Tt}=await n.from("blocked_users").delete().eq("blocker_id",G).eq("blocked_id",Te);Tt?alert("Error unblocking users: "+Tt.message):(await je("unblock_users",`Unblocked user ${Te} from ${G}`),Fe(),alert("Users unblocked successfully"))}catch(Tt){c?.is_admin&&console.error("Error unblocking users:",Tt),alert("Error unblocking users")}},qs=async G=>{try{const{error:Te}=await n.from("groups").delete().eq("id",G);Te?alert("Error deleting group: "+Te.message):(await je("delete_group",`Deleted group ${G}`),nt(),alert("Group deleted successfully"))}catch(Te){c?.is_admin&&console.error("Error deleting group:",Te),alert("Error deleting group")}},wt=async G=>{try{const{error:Te}=await n.from("reminders").delete().eq("id",G);Te?alert("Error deleting reminder: "+Te.message):(await je("delete_reminder",`Deleted reminder ${G}`),Ct(),alert("Reminder deleted successfully"))}catch(Te){c?.is_admin&&console.error("Error deleting reminder:",Te),alert("Error deleting reminder")}},Rn=async G=>{try{const{error:Te}=await n.from("statuses").delete().eq("id",G);Te?alert("Error deleting status: "+Te.message):(await je("delete_status",`Deleted status ${G}`),Tn(),alert("Status deleted successfully"))}catch(Te){c?.is_admin&&console.error("Error deleting status:",Te),alert("Error deleting status")}},he=async G=>{try{const{error:Te}=await n.from("media_transfers").delete().eq("id",G);Te?alert("Error deleting media transfer: "+Te.message):(await je("delete_media_transfer",`Deleted media transfer ${G}`),sn(),alert("Media transfer deleted successfully"))}catch(Te){c?.is_admin&&console.error("Error deleting media transfer:",Te),alert("Error deleting media transfer")}},qe=G=>new Date(G).toLocaleString(),ct=G=>{switch(G){case"image":return i.jsx(J2,{size:16});case"video":return i.jsx(hi,{size:16});case"audio":return i.jsx(uS,{size:16});case"document":return i.jsx(I0,{size:16});default:return i.jsx(Ru,{size:16})}},an=G=>G?G.split(" ").map(Te=>Te[0]).join("").toUpperCase().slice(0,2):"U",Pt=N.filter(G=>G.name?.toLowerCase().includes(ie.toLowerCase())||G.email?.toLowerCase().includes(ie.toLowerCase())||G.phone?.includes(ie)),In=T.filter(G=>G.content?.toLowerCase().includes(ie.toLowerCase())||G.users?.name?.toLowerCase().includes(ie.toLowerCase()));return v&&!c?i.jsxs("div",{className:"admin-loading",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Loading admin panel..."})]}):c?.is_admin?i.jsxs("div",{className:"admin-container",children:[i.jsxs("header",{className:"admin-header",children:[i.jsxs("div",{className:"header-left",children:[i.jsx("button",{className:"back-btn",onClick:()=>o("/"),children:i.jsx(Qo,{size:24})}),i.jsx("h1",{children:"Admin Panel"})]}),i.jsx("div",{className:"header-right",children:i.jsxs("span",{className:"admin-badge",children:[i.jsx(oi,{size:16}),"Admin"]})})]}),i.jsxs("div",{className:"admin-content",children:[i.jsxs("div",{className:"admin-sidebar",children:[i.jsx("div",{className:"sidebar-header",children:i.jsx("h3",{children:"Admin Panel"})}),i.jsx("nav",{className:"sidebar-nav",children:[{id:"dashboard",label:"Dashboard",icon:Up},{id:"users",label:"Users",icon:Hi},{id:"messages",label:"Messages",icon:Ru},{id:"blocked",label:"Blocked Users",icon:Fu},{id:"groups",label:"Groups",icon:Hi},{id:"reminders",label:"Reminders",icon:a0},{id:"statuses",label:"Statuses",icon:gf},{id:"media-transfers",label:"Media Transfers",icon:mf},{id:"news",label:"News",icon:ci},{id:"reports",label:"Reports",icon:o0},{id:"logs",label:"Admin Logs",icon:gf},{id:"support",label:"Support",icon:Ma},{id:"maintenance",label:"Maintenance",icon:B_}].map(G=>i.jsxs("button",{className:`nav-item ${f===G.id?"active":""}`,onClick:()=>x(G.id),children:[i.jsx(G.icon,{size:20}),i.jsx("span",{children:G.label})]},G.id))})]}),i.jsxs("div",{className:"main-content",children:[f==="dashboard"&&i.jsxs("div",{className:"dashboard-content",children:[i.jsxs("div",{className:"stats-grid",children:[i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(Hi,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.totalUsers}),i.jsx("p",{children:"Total Users"})]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(Ru,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.totalMessages}),i.jsx("p",{children:"Total Messages"})]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(Up,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.onlineUsers}),i.jsx("p",{children:"Online Users"})]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(Ma,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.totalChats}),i.jsx("p",{children:"Total Chats"})]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(ci,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.totalNews}),i.jsx("p",{children:"News Articles"})]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(o0,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.totalReports}),i.jsx("p",{children:"Pending Reports"})]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(Hs,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.totalCalls}),i.jsx("p",{children:"Total Calls"})]})]}),i.jsxs("div",{className:"stat-card",children:[i.jsx("div",{className:"stat-icon",children:i.jsx(mf,{size:24})}),i.jsxs("div",{className:"stat-info",children:[i.jsx("h3",{children:w.totalMedia}),i.jsx("p",{children:"Media Files"})]})]})]}),i.jsxs("div",{className:"quick-actions",children:[i.jsx("h3",{children:"Quick Actions"}),i.jsxs("div",{className:"actions-grid",children:[i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_expired_sessions"),children:[i.jsx(Bi,{size:20}),"Clean Sessions"]}),i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_expired_signaling"),children:[i.jsx(Bi,{size:20}),"Clean Signaling"]}),i.jsxs("button",{className:"action-btn",onClick:()=>lt("vanish_expired_messages"),children:[i.jsx(js,{size:20}),"Clean Messages"]}),i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_old_news_articles"),children:[i.jsx(ci,{size:20}),"Clean News"]})]})]})]}),f==="users"&&i.jsxs("div",{className:"users-content",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h2",{children:"User Management"}),i.jsxs("div",{className:"search-bar",children:[i.jsx($l,{size:20}),i.jsx("input",{type:"text",placeholder:"Search users...",value:ie,onChange:G=>ke(G.target.value)})]})]}),ft.users?i.jsxs("div",{className:"loading-container",children:[i.jsx("div",{className:"loading-spinner"}),i.jsx("p",{children:"Loading users..."})]}):i.jsx("div",{className:"users-list",children:Pt.length>0?Pt.map(G=>i.jsxs("div",{className:"user-item",children:[i.jsxs("div",{className:"user-info",children:[i.jsx("img",{src:zf(G.avatar),alt:G.name||"User",className:"user-avatar",onError:Te=>{Te.target.src=`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}}),i.jsxs("div",{className:"user-details",children:[i.jsx("h4",{children:G.name||"Unknown User"}),i.jsxs("p",{children:[G.email||"No email","  ",G.phone||"No phone"]}),i.jsxs("small",{children:["Joined: ",G.created_at?qe(G.created_at):"Unknown"]}),G.message_count!==void 0&&i.jsxs("small",{children:["Messages: ",G.message_count]})]})]}),i.jsxs("div",{className:"user-status",children:[i.jsx("span",{className:`status ${G.is_online?"online":"offline"}`,children:G.is_online?"Online":"Offline"}),G.is_admin&&i.jsx("span",{className:"admin-tag",children:"Admin"})]}),i.jsxs("div",{className:"user-actions",children:[i.jsx("button",{className:"action-btn small",onClick:()=>{Ke(G),pe(!0)},title:"View Details",children:i.jsx(Xa,{size:16})}),G.is_admin?i.jsxs("button",{className:"action-btn small danger",onClick:()=>Vt(G.id),title:"Remove Admin",children:[i.jsx(qS,{size:16}),"Demote"]}):i.jsxs("button",{className:"action-btn small success",onClick:()=>qn(G.id),title:"Make Admin",children:[i.jsx(PS,{size:16}),"Promote"]})]})]},G.id)):i.jsxs("div",{className:"no-data",children:[i.jsx(Hi,{size:48}),i.jsx("p",{children:ie?"No users found matching your search":"No users found"}),ie&&i.jsx("button",{className:"action-btn",onClick:()=>ke(""),children:"Clear Search"})]})})]}),f==="messages"&&i.jsxs("div",{className:"messages-content",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h2",{children:"Message Moderation"}),i.jsxs("div",{className:"search-bar",children:[i.jsx($l,{size:20}),i.jsx("input",{type:"text",placeholder:"Search messages...",value:ie,onChange:G=>ke(G.target.value)})]})]}),i.jsx("div",{className:"messages-list",children:In.map(G=>i.jsxs("div",{className:"message-item",children:[i.jsxs("div",{className:"message-header",children:[i.jsxs("div",{className:"sender-info",children:[i.jsx("img",{src:zf(G.users?.avatar),alt:G.users?.name,className:"sender-avatar",onError:Te=>{Te.target.src=`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}}),i.jsx("span",{className:"sender-name",children:G.users?.name})]}),i.jsxs("div",{className:"message-meta",children:[ct(G.message_type),i.jsx("span",{className:"message-time",children:qe(G.created_at)})]})]}),i.jsx("div",{className:"message-content",children:i.jsx("p",{children:G.content})}),i.jsxs("div",{className:"message-actions",children:[i.jsx("button",{className:"action-btn small",onClick:()=>{Ne(G),Ue(!0)},children:i.jsx(Xa,{size:16})}),i.jsx("button",{className:"action-btn small danger",onClick:()=>jn(G.id),children:i.jsx(js,{size:16})})]})]},G.id))})]}),f==="news"&&i.jsxs("div",{className:"news-content",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h2",{children:"News Management"}),i.jsxs("button",{className:"action-btn",children:[i.jsx(BS,{size:20}),"Add Article"]})]}),i.jsx("div",{className:"news-list",children:D.map(G=>i.jsxs("div",{className:"news-item",children:[i.jsxs("div",{className:"news-info",children:[i.jsx("h4",{children:G.title}),i.jsx("p",{children:G.summary}),i.jsxs("div",{className:"news-meta",children:[i.jsxs("span",{children:["Views: ",G.view_count]}),i.jsxs("span",{children:["Shares: ",G.share_count]}),i.jsxs("span",{children:["Published: ",qe(G.published_at)]})]})]}),i.jsxs("div",{className:"news-actions",children:[i.jsx("button",{className:"action-btn small",children:i.jsx($u,{size:16})}),i.jsx("button",{className:"action-btn small danger",onClick:()=>ts(G.id),children:i.jsx(js,{size:16})})]})]},G.id))})]}),f==="reports"&&i.jsxs("div",{className:"reports-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Reports Management"})}),i.jsx("div",{className:"reports-list",children:H.map(G=>i.jsxs("div",{className:"report-item",children:[i.jsxs("div",{className:"report-info",children:[i.jsxs("h4",{children:[G.report_type," Report"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Reporter:"})," ",G.users?.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Reason:"})," ",G.reason]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Description:"})," ",G.description]}),i.jsxs("small",{children:["Reported: ",qe(G.created_at)]})]}),i.jsx("div",{className:"report-status",children:i.jsx("span",{className:`status ${G.status}`,children:G.status})}),i.jsx("div",{className:"report-actions",children:G.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"action-btn small success",onClick:()=>Ut(G.id,"resolved"),children:i.jsx(pf,{size:16})}),i.jsx("button",{className:"action-btn small danger",onClick:()=>Ut(G.id,"dismissed"),children:i.jsx(I_,{size:16})})]})})]},G.id))})]}),f==="logs"&&i.jsxs("div",{className:"logs-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Admin Activity Logs"})}),i.jsx("div",{className:"logs-list",children:P.map(G=>i.jsx("div",{className:"log-item",children:i.jsxs("div",{className:"log-info",children:[i.jsx("h4",{children:G.action}),i.jsxs("p",{children:[i.jsx("strong",{children:"Admin:"})," ",G.users?.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Details:"})," ",G.details?.description]}),i.jsx("small",{children:qe(G.created_at)})]})},G.id))})]}),f==="support"&&i.jsxs("div",{className:"support-content",children:[i.jsxs("div",{className:"section-header",children:[i.jsx("h2",{children:"Support Messages"}),i.jsxs("button",{className:"action-btn",onClick:Me,children:[i.jsx(Bi,{size:20}),"Refresh"]})]}),i.jsx("div",{className:"support-messages-list",children:Z.length>0?Z.map(G=>i.jsxs("div",{className:`support-message-item ${G.is_read?"read":"unread"}`,children:[i.jsxs("div",{className:"message-header",children:[i.jsxs("div",{className:"user-info",children:[i.jsx("div",{className:"user-avatar",children:G.user_name?i.jsx("div",{children:an(G.user_name)}):i.jsx(M0,{size:20})}),i.jsxs("div",{children:[i.jsx("span",{className:"user-name",children:G.user_name||"Unknown User"}),i.jsxs("span",{className:"user-phone",children:["(",G.user_phone||"N/A",")"]}),i.jsx("div",{className:"user-email",children:G.user_email})]})]}),i.jsxs("div",{className:"message-meta",children:[i.jsx("span",{className:"message-time",children:qe(G.created_at)}),!G.is_read&&i.jsx("span",{className:"unread-indicator",children:"New"})]})]}),i.jsxs("div",{className:"message-content",children:[i.jsxs("div",{className:"user-message",children:[i.jsx("strong",{children:"User:"})," ",G.message]}),G.admin_response&&i.jsxs("div",{className:"admin-response",children:[i.jsxs("strong",{children:["Admin (",G.admin_name,"):"]})," ",G.admin_response,i.jsxs("small",{children:["Responded: ",qe(G.responded_at)]})]})]}),!G.admin_response&&i.jsxs("div",{className:"message-actions",children:[i.jsxs("button",{className:"action-btn small success",onClick:()=>gt(G.id),children:[i.jsx(Ma,{size:16}),"Respond"]}),i.jsxs("button",{className:"action-btn small",onClick:()=>Os(G.id),children:[i.jsx(pf,{size:16}),"Mark Read"]})]})]},G.id)):i.jsxs("div",{className:"no-messages",children:[i.jsx(Ru,{size:48}),i.jsx("p",{children:"No support messages yet"})]})})]}),f==="blocked"&&i.jsxs("div",{className:"blocked-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Blocked Users Management"})}),i.jsxs("div",{className:"blocked-list",children:[X.map(G=>i.jsxs("div",{className:"blocked-item",children:[i.jsxs("div",{className:"blocked-info",children:[i.jsx("h4",{children:"Block Relationship"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Blocker:"})," ",G.blocker?.name," (",G.blocker?.email,")"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Blocked:"})," ",G.blocked?.name," (",G.blocked?.email,")"]}),i.jsxs("small",{children:["Blocked: ",qe(G.created_at)]})]}),i.jsx("div",{className:"blocked-actions",children:i.jsxs("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to unblock this user?")&&va(G.blocker_id,G.blocked_id)},children:[i.jsx(pf,{size:16}),"Unblock"]})})]},G.id)),X.length===0&&i.jsxs("div",{className:"no-data",children:[i.jsx(Fu,{size:48}),i.jsx("p",{children:"No blocked users found"})]})]})]}),f==="groups"&&i.jsxs("div",{className:"groups-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Groups Management"})}),i.jsxs("div",{className:"groups-list",children:[q.map(G=>i.jsxs("div",{className:"group-item",children:[i.jsxs("div",{className:"group-info",children:[i.jsx("h4",{children:G.name}),i.jsx("p",{children:G.description}),i.jsxs("div",{className:"group-meta",children:[i.jsxs("span",{children:["Created by: ",G.creator?.name]}),i.jsxs("span",{children:["Members: ",G.members?.[0]?.count||0]}),i.jsxs("span",{children:["Created: ",qe(G.created_at)]})]})]}),i.jsxs("div",{className:"group-actions",children:[i.jsxs("button",{className:"action-btn small",children:[i.jsx(Xa,{size:16}),"View"]}),i.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this group?")&&qs(G.id)},children:i.jsx(js,{size:16})})]})]},G.id)),q.length===0&&i.jsxs("div",{className:"no-data",children:[i.jsx(Hi,{size:48}),i.jsx("p",{children:"No groups found"})]})]})]}),f==="reminders"&&i.jsxs("div",{className:"reminders-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Reminders Management"})}),i.jsxs("div",{className:"reminders-list",children:[we.map(G=>i.jsxs("div",{className:"reminder-item",children:[i.jsxs("div",{className:"reminder-info",children:[i.jsx("h4",{children:G.title}),i.jsx("p",{children:G.description}),i.jsxs("div",{className:"reminder-meta",children:[i.jsxs("span",{children:["From: ",G.sender?.name]}),i.jsxs("span",{children:["To: ",G.receiver?.name]}),i.jsxs("span",{children:["Due: ",qe(G.reminder_time)]}),i.jsxs("span",{children:["Status: ",G.status]}),i.jsxs("span",{children:["Priority: ",G.priority]})]})]}),i.jsx("div",{className:"reminder-actions",children:i.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this reminder?")&&wt(G.id)},children:i.jsx(js,{size:16})})})]},G.id)),we.length===0&&i.jsxs("div",{className:"no-data",children:[i.jsx(a0,{size:48}),i.jsx("p",{children:"No reminders found"})]})]})]}),f==="statuses"&&i.jsxs("div",{className:"statuses-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Status Management"})}),i.jsxs("div",{className:"statuses-list",children:[Ce.map(G=>i.jsxs("div",{className:"status-item",children:[i.jsxs("div",{className:"status-info",children:[i.jsxs("div",{className:"status-user",children:[i.jsx("img",{src:zf(G.user?.avatar),alt:G.user?.name,className:"status-avatar",onError:Te=>{Te.target.src=`${baseUrl}assets/images/dp-options/00701602b0eac0390b3107b9e2a665e0.jpg`}}),i.jsx("span",{children:G.user?.name})]}),i.jsx("p",{children:G.content}),i.jsxs("div",{className:"status-meta",children:[i.jsxs("span",{children:["Views: ",G.view_count]}),i.jsxs("span",{children:["Expires: ",qe(G.expires_at)]}),i.jsxs("span",{children:["Posted: ",qe(G.created_at)]})]})]}),i.jsx("div",{className:"status-actions",children:i.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this status?")&&Rn(G.id)},children:i.jsx(js,{size:16})})})]},G.id)),Ce.length===0&&i.jsxs("div",{className:"no-data",children:[i.jsx(gf,{size:48}),i.jsx("p",{children:"No statuses found"})]})]})]}),f==="media-transfers"&&i.jsxs("div",{className:"media-transfers-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Media Transfers Management"})}),i.jsxs("div",{className:"media-transfers-list",children:[V.map(G=>i.jsxs("div",{className:"transfer-item",children:[i.jsxs("div",{className:"transfer-info",children:[i.jsx("h4",{children:G.filename}),i.jsxs("p",{children:["Original: ",G.original_filename]}),i.jsxs("div",{className:"transfer-meta",children:[i.jsxs("span",{children:["From: ",G.sender?.name]}),i.jsxs("span",{children:["To: ",G.receiver?.name]}),i.jsxs("span",{children:["Size: ",(G.file_size/1024/1024).toFixed(2)," MB"]}),i.jsxs("span",{children:["Status: ",G.status]}),i.jsxs("span",{children:["Downloads: ",G.download_count,"/",G.max_downloads]})]})]}),i.jsx("div",{className:"transfer-actions",children:i.jsx("button",{className:"action-btn small danger",onClick:()=>{confirm("Are you sure you want to delete this transfer?")&&he(G.id)},children:i.jsx(js,{size:16})})})]},G.id)),V.length===0&&i.jsxs("div",{className:"no-data",children:[i.jsx(mf,{size:48}),i.jsx("p",{children:"No media transfers found"})]})]})]}),f==="maintenance"&&i.jsxs("div",{className:"maintenance-content",children:[i.jsx("div",{className:"section-header",children:i.jsx("h2",{children:"Database Maintenance"})}),i.jsxs("div",{className:"maintenance-grid",children:[i.jsxs("div",{className:"maintenance-card",children:[i.jsx("h3",{children:"Cleanup Functions"}),i.jsxs("div",{className:"maintenance-actions",children:[i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_expired_sessions"),children:[i.jsx(Bi,{size:20}),"Clean Expired Sessions"]}),i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_expired_signaling"),children:[i.jsx(Bi,{size:20}),"Clean Expired Signaling"]}),i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_expired_statuses"),children:[i.jsx(Bi,{size:20}),"Clean Expired Statuses"]}),i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_expired_reset_tokens"),children:[i.jsx(Bi,{size:20}),"Clean Reset Tokens"]})]})]}),i.jsxs("div",{className:"maintenance-card",children:[i.jsx("h3",{children:"Message Management"}),i.jsxs("div",{className:"maintenance-actions",children:[i.jsxs("button",{className:"action-btn",onClick:()=>lt("vanish_expired_messages"),children:[i.jsx(js,{size:20}),"Vanish Expired Messages"]}),i.jsxs("button",{className:"action-btn",onClick:()=>lt("delete_vanished_messages"),children:[i.jsx(js,{size:20}),"Delete Vanished Messages"]})]})]}),i.jsxs("div",{className:"maintenance-card",children:[i.jsx("h3",{children:"Content Management"}),i.jsx("div",{className:"maintenance-actions",children:i.jsxs("button",{className:"action-btn",onClick:()=>lt("cleanup_old_news_articles"),children:[i.jsx(ci,{size:20}),"Clean Old News Articles"]})})]})]})]})]})]}),ve.open&&i.jsx("div",{className:"modal-overlay",children:i.jsxs("div",{className:"modal-content response-modal",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:"Respond to Support Message"}),i.jsx("button",{className:"close-btn",onClick:()=>Je({open:!1,messageId:null,userName:"",message:""}),children:""})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"original-message",children:[i.jsxs("h4",{children:["From: ",ve.userName]}),i.jsx("p",{children:ve.message})]}),i.jsxs("div",{className:"response-form",children:[i.jsx("label",{htmlFor:"response",children:"Your Response:"}),i.jsx("textarea",{id:"response",value:mt,onChange:G=>Wt(G.target.value),placeholder:"Type your response to the user...",rows:6})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{className:"btn-secondary",onClick:()=>Je({open:!1,messageId:null,userName:"",message:""}),children:"Cancel"}),i.jsx("button",{className:"btn-primary",onClick:Qt,disabled:!mt.trim(),children:"Send Response"})]})]})})]}):i.jsx("div",{className:"admin-container",children:i.jsx("div",{className:"admin-blank",children:i.jsxs("div",{className:"blank-content",children:[i.jsx(oi,{size:64}),i.jsx("h2",{children:"Access Restricted"}),i.jsx("p",{children:"You don't have permission to access this panel."})]})})})},PA=({onComplete:o})=>{const n=us(),{isDark:a}=Ko(),c=a,h=c?"#25D366":"#00a884";return M.useEffect(()=>{const f=setTimeout(()=>{const v=new URLSearchParams(window.location.search).get("redirect");n(v==="login"?"/login":"/"),o()},3e3);return()=>clearTimeout(f)},[n,o]),i.jsxs("div",{className:`intro-overlay transition-colors duration-500 overflow-hidden
      ${c?"bg-[#111b21]":"bg-white"}`,children:[i.jsx("style",{children:`
        /* 1. BALL ANIMATION */
        @keyframes ballDrop {
          0% { transform: translateY(-80px) scale(1); opacity: 1; }
          30% { transform: translateY(0) scale(1); opacity: 1; }
          35% { transform: translateY(5px) scale(1.4, 0.6); opacity: 1; }
          36% { opacity: 0; }
          90% { opacity: 0; }
          91% { transform: translateY(0) scale(1); opacity: 1; }
          100% { transform: translateY(-80px) scale(1); opacity: 1; }
        }

        /* 2. LOGO REVEAL */
        @keyframes logoCycle {
          0%, 35% { transform: scale(0); opacity: 0; }
          36% { transform: scale(1.2, 0.8); opacity: 1; }
          45% { transform: scale(1); opacity: 1; }
          85% { transform: scale(1); opacity: 1; }
          90% { transform: scale(0); opacity: 0; }
          100% { transform: scale(0); opacity: 0; }
        }

        /* 3. STROKE DRAWING */
        @keyframes drawStroke {
          0%, 35% { stroke-dashoffset: 200; }
          50% { stroke-dashoffset: 0; }
          85% { stroke-dashoffset: 0; }
          90% { stroke-dashoffset: 200; }
        }

        /* 4. TEXT SLIDE */
        @keyframes textSlide {
          0%, 40% { opacity: 0; transform: translateX(-20px); }
          50% { opacity: 1; transform: translateX(0); }
          85% { opacity: 1; transform: translateX(0); }
          90% { opacity: 0; transform: translateX(-10px); }
        }

        /* 5. DOT WAVE (Improved) */
        @keyframes dotWave {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-4px); }
        }

        /* 6. SHOCKWAVE RIPPLE (New) */
        @keyframes rippleEffect {
          0%, 30% { width: 0px; height: 0px; opacity: 0; border-width: 0px; }
          31% { width: 10px; height: 5px; opacity: 0.8; border-width: 4px; }
          50% { width: 120px; height: 20px; opacity: 0; border-width: 0px; }
          100% { width: 120px; height: 20px; opacity: 0; border-width: 0px; }
        }

        /* 7. SPLASH PARTICLES (New) */
        @keyframes splashOut {
          0%, 30% { transform: translate(0,0) scale(0); opacity: 0; }
          31% { transform: translate(0,0) scale(1); opacity: 1; }
          45% { opacity: 0; } /* Fade out quickly as they move */
          100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }

        @keyframes shadowJump {
          0%, 100% { transform: scale(0.3); opacity: 0.1; }
          35% { transform: scale(1.2); opacity: 0.4; }
          90% { transform: scale(0.3); opacity: 0.1; }
        }
      `}),i.jsxs("div",{className:"relative flex flex-col items-center h-48 justify-center",children:[i.jsx("div",{className:"absolute top-[50%] left-[50%] w-0 h-0 z-0",children:[...Array(6)].map((f,x)=>{const v=x*60*(Math.PI/180),C=40,w=Math.cos(v)*C+"px",A=Math.sin(v)*C-20+"px";return i.jsx("div",{className:"absolute w-1.5 h-1.5 rounded-full",style:{backgroundColor:h,"--tx":w,"--ty":A,animation:"splashOut 3s ease-out infinite"}},x)})}),i.jsx("div",{className:"absolute w-5 h-5 rounded-full z-20",style:{backgroundColor:h,animation:"ballDrop 3s cubic-bezier(0.45, 0, 0.55, 1) infinite"}}),i.jsx("div",{className:"relative z-10 flex items-center justify-center",style:{animation:"logoCycle 3s cubic-bezier(0.175, 0.885, 0.32, 1.275) infinite",transformOrigin:"bottom center"},children:i.jsxs("svg",{width:"180",height:"80",viewBox:"0 0 180 80",className:"overflow-visible",children:[i.jsxs("g",{transform:"translate(40, 40)",children:[i.jsx("path",{d:"M 25 -15 A 28 28 0 1 0 25 20",fill:"none",stroke:h,strokeWidth:"7",strokeLinecap:"round",strokeDasharray:"200",style:{animation:"drawStroke 3s ease-in-out infinite"},transform:"rotate(-15)"}),i.jsx("path",{d:"M -15 22 L -25 35 L -5 27 Z",fill:h,style:{animation:"logoCycle 3s infinite"}}),i.jsx("circle",{cx:"-12",cy:"5",r:"4.5",fill:h,style:{animation:"dotWave 1s ease-in-out infinite",animationDelay:"0s"}}),i.jsx("circle",{cx:"0",cy:"5",r:"4.5",fill:h,style:{animation:"dotWave 1s ease-in-out infinite",animationDelay:"0.15s"}}),i.jsx("circle",{cx:"12",cy:"5",r:"4.5",fill:h,style:{animation:"dotWave 1s ease-in-out infinite",animationDelay:"0.3s"}})]}),i.jsx("text",{x:"80",y:"58",fontFamily:"Arial, sans-serif",fontWeight:"bold",fontSize:"48",fill:h,style:{animation:"textSlide 3s ease-out infinite"},children:"aBa"})]})}),i.jsx("div",{className:"absolute bottom-6 rounded-[100%] border-solid box-border z-0",style:{borderColor:h,animation:"rippleEffect 3s linear infinite"}}),i.jsx("div",{className:`absolute bottom-6 w-16 h-1.5 rounded-full blur-sm transition-colors duration-500
            ${c?"bg-black/40":"bg-gray-400/40"}`,style:{animation:"shadowJump 3s cubic-bezier(0.45, 0, 0.55, 1) infinite"}})]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-xs font-bold tracking-[0.3em] uppercase transition-colors duration-500",style:{color:h,opacity:.8},children:"Loading"})})]})};function zA(){const{callId:o}=Xu(),n=us(),{callState:a,callType:c,localStream:h,remoteStream:f,callerInfo:x,receiverInfo:v,isMuted:C,isVideoOff:w,isSpeakerOn:A,callDuration:N,endCall:R,toggleMute:T,toggleVideo:O,switchCamera:D}=di(),U=M.useRef(null),H=M.useRef(null),[B,P]=M.useState(!0);M.useEffect(()=>{U.current&&h&&(U.current.srcObject=h)},[h]),M.useEffect(()=>{H.current&&f&&(H.current.srcObject=f)},[f]),M.useEffect(()=>{if(a==="connected"){const ee=setTimeout(()=>P(!1),5e3);return()=>clearTimeout(ee)}},[a,B]),M.useEffect(()=>{["calling","connecting","connected"].includes(a)||n("/",{replace:!0})},[a,n]);const Q=ee=>{const q=Math.floor(ee/60),xe=ee%60;return`${q.toString().padStart(2,"0")}:${xe.toString().padStart(2,"0")}`},Z=x||v,Y=c==="video",X=async()=>{await R(),n("/",{replace:!0})};return i.jsxs("div",{className:"min-h-screen bg-gray-900",children:[i.jsx("div",{className:`fixed top-0 left-0 right-0 z-10 bg-black/80 backdrop-blur-sm transition-opacity ${B?"opacity-100":"opacity-0"}`,children:i.jsxs("div",{className:"flex items-center justify-between p-4",children:[i.jsx("button",{onClick:()=>n(-1),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:i.jsx(Qo,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"text-center flex-1",children:[i.jsxs("p",{className:"text-white/60 text-sm",children:[a==="calling"&&" Calling...",a==="connecting"&&" Connecting...",a==="connected"&&Q(N)]}),i.jsx("h3",{className:"text-white font-semibold text-lg",children:Z?.name||"Unknown"})]}),i.jsx("div",{className:"w-10"})," "]})}),i.jsxs("div",{className:"h-screen flex items-center justify-center cursor-pointer",onClick:()=>P(!B),children:[Y&&i.jsx("video",{ref:H,autoPlay:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover"}),!Y&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-40 h-40 mx-auto rounded-full overflow-hidden ring-4 ring-white/20 mb-6",children:Z?.avatar?i.jsx("img",{src:Z.avatar,alt:Z.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-6xl font-bold text-white",children:Z?.name?.charAt(0)||"?"})}),i.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:Z?.name||"Unknown"}),i.jsxs("p",{className:"text-white/60",children:[a==="calling"&&"Calling...",a==="connecting"&&"Connecting...",a==="connected"&&`Connected  ${Q(N)}`]})]})}),Y&&h&&i.jsxs("div",{className:"absolute top-20 right-4 w-32 h-44 rounded-2xl overflow-hidden shadow-2xl border-2 border-white/20",children:[i.jsx("video",{ref:U,autoPlay:!0,playsInline:!0,muted:!0,className:`w-full h-full object-cover ${w?"hidden":""}`}),w&&i.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:i.jsx(Hp,{className:"w-8 h-8 text-gray-500"})})]})]}),i.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-10 bg-black/80 backdrop-blur-sm p-8 transition-opacity ${B?"opacity-100":"opacity-0"}`,children:i.jsxs("div",{className:"flex justify-center items-center gap-6",children:[i.jsx("button",{onClick:ee=>{ee.stopPropagation(),T()},className:`w-14 h-14 rounded-full flex items-center justify-center transition-all ${C?"bg-red-500":"bg-white/20 hover:bg-white/30"}`,children:C?i.jsx(iS,{className:"w-6 h-6 text-white"}):i.jsx(lS,{className:"w-6 h-6 text-white"})}),Y&&i.jsx("button",{onClick:ee=>{ee.stopPropagation(),O()},className:`w-14 h-14 rounded-full flex items-center justify-center transition-all ${w?"bg-red-500":"bg-white/20 hover:bg-white/30"}`,children:w?i.jsx(Hp,{className:"w-6 h-6 text-white"}):i.jsx(hi,{className:"w-6 h-6 text-white"})}),i.jsx("button",{onClick:ee=>{ee.stopPropagation(),X()},className:"w-16 h-16 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-all shadow-lg shadow-red-500/30",children:i.jsx(O0,{className:"w-7 h-7 text-white"})}),Y&&i.jsx("button",{onClick:ee=>{ee.stopPropagation(),D()},className:"w-14 h-14 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-all",children:i.jsx(NS,{className:"w-6 h-6 text-white"})}),!Y&&i.jsx("button",{onClick:ee=>ee.stopPropagation(),className:`w-14 h-14 rounded-full flex items-center justify-center transition-all ${A?"bg-blue-500":"bg-white/20 hover:bg-white/30"}`,children:A?i.jsx(QS,{className:"w-6 h-6 text-white"}):i.jsx(ZS,{className:"w-6 h-6 text-white"})})]})})]})}function FA(){const o=us(),{callState:n,callType:a,callId:c,callerInfo:h,receiverInfo:f,endCall:x}=di();if(!["calling","connecting","connected"].includes(n))return null;const v=h||f,C=a==="video",w=()=>{c&&o(`/call/${c}`)},A=N=>{N.stopPropagation(),x()};return i.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-4 py-2 rounded-full shadow-lg cursor-pointer hover:bg-green-600 transition-colors flex items-center gap-2 animate-pulse",onClick:w,title:"Click to view active call",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[C?i.jsx(hi,{size:16}):i.jsx(Hs,{size:16}),i.jsxs("span",{className:"text-sm font-medium",children:[n==="calling"&&"Calling...",n==="connecting"&&"Connecting...",n==="connected"&&"On Call"]})]}),i.jsx("span",{className:"text-sm max-w-24 truncate",children:v?.name||"Unknown"}),i.jsx("button",{onClick:A,className:"ml-2 bg-red-500 hover:bg-red-600 rounded-full p-1 transition-colors",title:"End Call",children:i.jsx(O0,{size:14})})]})}const HA=()=>{const{user:o,loading:n,isAuthenticated:a}=La();return null},qA="__capgo_keep_url_path_after_reload",Ff="__capgo_history_stack__",Mx=100,VA=typeof window<"u"&&typeof document<"u"&&typeof history<"u";if(VA){const o=window;if(!o.__capgoHistoryPatched){o.__capgoHistoryPatched=!0;const n=()=>{try{if(o.__capgoKeepUrlPathAfterReload)return!0}catch{}try{return window.localStorage.getItem(qA)==="1"}catch{return!1}},a=()=>{try{const Z=window.sessionStorage.getItem(Ff);if(!Z)return{stack:[],index:-1};const Y=JSON.parse(Z);return!Y||!Array.isArray(Y.stack)||typeof Y.index!="number"?{stack:[],index:-1}:Y}catch{return{stack:[],index:-1}}},c=(Z,Y)=>{try{window.sessionStorage.setItem(Ff,JSON.stringify({stack:Z,index:Y}))}catch{}},h=()=>{try{window.sessionStorage.removeItem(Ff)}catch{}},f=Z=>{try{const Y=Z??window.location.href,X=new URL(Y instanceof URL?Y.toString():Y,window.location.href);return`${X.pathname}${X.search}${X.hash}`}catch{return null}},x=(Z,Y)=>{if(Z.length<=Mx)return{stack:Z,index:Y};const X=Z.length-Mx,ee=Z.slice(X),q=Math.max(0,Y-X);return{stack:ee,index:q}},v=Z=>{document.readyState==="complete"||document.readyState==="interactive"?Z():window.addEventListener("DOMContentLoaded",Z,{once:!0})};let C=!1,w=!1,A=!1;const N=()=>{if(!C)return;const Z=a(),Y=f();if(Y){if(Z.stack.length===0){Z.stack.push(Y),Z.index=0,c(Z.stack,Z.index);return}(Z.index<0||Z.index>=Z.stack.length)&&(Z.index=Z.stack.length-1),Z.stack[Z.index]!==Y&&(Z.stack[Z.index]=Y,c(Z.stack,Z.index))}},R=(Z,Y)=>{if(!C||w)return;const X=f(Z);if(!X)return;let{stack:ee,index:q}=a();ee.length===0?(ee.push(X),q=ee.length-1):Y?((q<0||q>=ee.length)&&(q=ee.length-1),ee[q]=X):q>=ee.length-1?(ee.push(X),q=ee.length-1):(ee=ee.slice(0,q+1),ee.push(X),q=ee.length-1),{stack:ee,index:q}=x(ee,q),c(ee,q)},T=()=>{if(!C||w)return;const Z=a();if(Z.stack.length===0){N();return}const Y=Z.index>=0&&Z.index<Z.stack.length?Z.index:Z.stack.length-1,X=f();if(Z.stack.length===1&&X===Z.stack[0])return;const ee=Z.stack[0];if(!ee)return;w=!0;try{history.replaceState(history.state,document.title,ee);for(let we=1;we<Z.stack.length;we+=1)history.pushState(history.state,document.title,Z.stack[we])}catch{w=!1;return}w=!1;const q=Z.stack.length-1,xe=Y-q;xe!==0?history.go(xe):(history.replaceState(history.state,document.title,Z.stack[Y]),window.dispatchEvent(new PopStateEvent("popstate")))},O=()=>{!C||A||(A=!0,v(()=>{A=!1,T()}))};let D=null,U=null;const H=()=>{if(!C||w)return;const Z=f();if(!Z)return;const Y=a(),X=Y.stack.lastIndexOf(Z);X>=0?Y.index=X:(Y.stack.push(Z),Y.index=Y.stack.length-1);const ee=x(Y.stack,Y.index);c(ee.stack,ee.index)},B=()=>{D&&U||(D=history.pushState,U=history.replaceState,history.pushState=function(Y,X,ee){const q=D.call(history,Y,X,ee);return R(ee,!1),q},history.replaceState=function(Y,X,ee){const q=U.call(history,Y,X,ee);return R(ee,!0),q},window.addEventListener("popstate",H))},P=()=>{D&&(history.pushState=D,D=null),U&&(history.replaceState=U,U=null),window.removeEventListener("popstate",H)},Q=Z=>{if(C===Z){C&&(N(),O());return}C=Z,C?(B(),N(),O()):(P(),h())};window.addEventListener("CapacitorUpdaterKeepUrlPathAfterReload",Z=>{var Y;const X=Z,ee=(Y=X?.detail)===null||Y===void 0?void 0:Y.enabled;typeof ee=="boolean"?(o.__capgoKeepUrlPathAfterReload=ee,Q(ee)):(o.__capgoKeepUrlPathAfterReload=!0,Q(!0))}),Q(n())}}const GA=nc("CapacitorUpdater",{web:()=>T0(()=>import("./web-KbSQp68-.js"),[],import.meta.url).then(o=>new o.CapacitorUpdaterWeb)});GA.notifyAppReady();const ws=({children:o})=>{const{user:n,loading:a,isAuthenticated:c}=La();return a?i.jsx(Vi,{}):c?o:i.jsx(Gx,{to:"/login",replace:!0})},Ou=({children:o})=>{const{isAuthenticated:n,loading:a}=La();return a?i.jsx(Vi,{}):n?i.jsx(Gx,{to:"/",replace:!0}):o},YA=({children:o})=>{const{user:n}=La();return i.jsx(n_,{currentUser:n,children:o})};function XA(){const[o,n]=M.useState(!0),{supabase:a}=vs();return M.useEffect(()=>{const{pathname:c,search:h}=window.location;if(h.startsWith("?/")){const f=h.slice(2).replace(/~and~/g,"&");window.history.replaceState(null,"",c+f)}if(a){const{data:{subscription:f}}=a.auth.onAuthStateChange(async(x,v)=>{x==="SIGNED_IN"&&v?.user&&console.log("Google OAuth success, redirecting to home")});return()=>f?.unsubscribe()}},[a]),i.jsxs(YA,{children:[o?i.jsx(PA,{onComplete:()=>n(!1)}):i.jsxs(Lb,{children:[i.jsx(Fn,{path:"/",element:i.jsx(ws,{children:i.jsx(gE,{})})}),i.jsx(Fn,{path:"/login",element:i.jsx(Ou,{children:i.jsx(s_,{})})}),i.jsx(Fn,{path:"/signup",element:i.jsx(Ou,{children:i.jsx(a_,{})})}),i.jsx(Fn,{path:"/forgot-password",element:i.jsx(Ou,{children:i.jsx(r_,{})})}),i.jsx(Fn,{path:"/reset-password",element:i.jsx(Ou,{children:i.jsx(i_,{})})}),i.jsx(Fn,{path:"/chat/:chatId/:otherUserId",element:i.jsx(ws,{children:i.jsx(l0,{})})}),i.jsx(Fn,{path:"/chat/new/:userId",element:i.jsx(ws,{children:i.jsx(l0,{})})}),i.jsx(Fn,{path:"/call/:callId",element:i.jsx(ws,{children:i.jsx(zA,{})})}),i.jsx(Fn,{path:"/profile",element:i.jsx(ws,{children:i.jsx(EA,{})})}),i.jsx(Fn,{path:"/settings",element:i.jsx(ws,{children:i.jsx(AA,{})})}),i.jsx(Fn,{path:"/news",element:i.jsx(ws,{children:i.jsx(NA,{})})}),i.jsx(Fn,{path:"/reminders",element:i.jsx(ws,{children:i.jsx(TA,{})})}),i.jsx(Fn,{path:"/create-reminder",element:i.jsx(ws,{children:i.jsx(jA,{})})}),i.jsx(Fn,{path:"/calls",element:i.jsx(ws,{children:i.jsx(OA,{})})}),i.jsx(Fn,{path:"/qr",element:i.jsx(ws,{children:i.jsx(SA,{})})}),i.jsx(Fn,{path:"/blocked",element:i.jsx(ws,{children:i.jsx(MA,{})})}),i.jsx(Fn,{path:"/about",element:i.jsx(ws,{children:i.jsx(LA,{})})}),i.jsx(Fn,{path:"/support",element:i.jsx(ws,{children:i.jsx(BA,{})})}),i.jsx(Fn,{path:"/admin",element:i.jsx(ws,{children:i.jsx(UA,{})})}),i.jsx(Fn,{path:"/user-details/:id",element:i.jsx(ws,{children:i.jsx(kA,{})})}),i.jsx(Fn,{path:"/shared-profile/:id",element:i.jsx(ws,{children:i.jsx(DA,{})})})]}),i.jsx(FA,{}),i.jsx(xy,{}),i.jsx(HA,{})]})}Gw.createRoot(document.getElementById("root")).render(i.jsx(M.StrictMode,{children:i.jsx(rv,{children:i.jsx(U3,{children:i.jsx(Z3,{children:i.jsx(lE,{children:i.jsx(o_,{children:i.jsx(XA,{})})})})})})}));export{j0 as W};
