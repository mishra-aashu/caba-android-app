<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaBa Theme Verification</title>
    <link rel="stylesheet" href="./src/styles/global.css">
    <link rel="stylesheet" href="./src/styles/whatsapp-bubbles.css">
    <link rel="stylesheet" href="./src/styles/whatsapp-components.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            padding: 20px;
            background-color: var(--wa-bg-app);
            color: var(--wa-text-primary);
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background-color: var(--wa-bg-chat);
            border-radius: 12px;
        }
        .color-box {
            display: inline-block;
            width: 100px;
            height: 50px;
            margin: 10px;
            border-radius: 8px;
            border: 2px solid var(--wa-border);
        }
        .toggle-btn {
            padding: 12px 24px;
            background-color: var(--wa-accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 10px 0;
        }
        .toggle-btn:hover {
            transform: scale(1.05);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            background-color: var(--wa-input-bg);
        }
        h1, h2, h3 {
            color: var(--wa-text-primary);
        }
        .success { color: #25D366; }
        .error { color: #E53935; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® CaBa Theme Verification Tool</h1>
        
        <div class="section">
            <h2>Theme Control</h2>
            <button class="toggle-btn" onclick="toggleTheme()">
                Toggle Theme (Current: <span id="current-theme">light</span>)
            </button>
            <div class="status">
                <strong>HTML data-theme:</strong> <span id="html-theme">-</span><br>
                <strong>Body class:</strong> <span id="body-class">-</span><br>
                <strong>LocalStorage:</strong> <span id="storage-theme">-</span>
            </div>
        </div>

        <div class="section">
            <h2>Color Variables Test</h2>
            <div>
                <h3>Background Colors</h3>
                <div class="color-box" style="background-color: var(--wa-bg-app);" title="--wa-bg-app"></div>
                <div class="color-box" style="background-color: var(--wa-bg-chat);" title="--wa-bg-chat"></div>
                <div class="color-box" style="background-color: var(--wa-header);" title="--wa-header"></div>
                <div class="color-box" style="background-color: var(--wa-input-bg);" title="--wa-input-bg"></div>
            </div>
            <div>
                <h3>Message Bubbles</h3>
                <div class="color-box" style="background-color: var(--wa-bubble-sent);" title="--wa-bubble-sent"></div>
                <div class="color-box" style="background-color: var(--wa-bubble-received);" title="--wa-bubble-received"></div>
            </div>
            <div>
                <h3>Text Colors</h3>
                <div class="color-box" style="background-color: var(--wa-text-primary);" title="--wa-text-primary"></div>
                <div class="color-box" style="background-color: var(--wa-text-secondary);" title="--wa-text-secondary"></div>
            </div>
            <div>
                <h3>Accent Colors</h3>
                <div class="color-box" style="background-color: var(--wa-accent);" title="--wa-accent"></div>
                <div class="color-box" style="background-color: var(--wa-checkmark);" title="--wa-checkmark"></div>
            </div>
        </div>

        <div class="section">
            <h2>Component Preview</h2>
            
            <h3>Header</h3>
            <header class="whatsapp-header" style="margin-bottom: 20px;">
                <div class="whatsapp-header-title">CaBa</div>
                <div class="whatsapp-header-actions">
                    <span class="whatsapp-header-icon">üîç</span>
                    <span class="whatsapp-header-icon">‚ãÆ</span>
                </div>
            </header>

            <h3>Message Bubbles</h3>
            <div style="display: flex; flex-direction: column; gap: 10px; padding: 20px; background-color: var(--wa-bg-chat); border-radius: 8px;">
                <div class="message-bubble message-sent">
                    <p class="message-text">Kaa baa? Sab badhiya?</p>
                    <div class="message-time">10:30 AM ‚úì‚úì</div>
                </div>
                <div class="message-bubble message-received">
                    <p class="message-text">Haan bhai, ekdum mast! Tum batao?</p>
                    <div class="message-time">10:31 AM</div>
                </div>
            </div>

            <h3 style="margin-top: 20px;">Input Area</h3>
            <div class="whatsapp-input-container">
                <button class="whatsapp-icon-btn">üòä</button>
                <input type="text" class="whatsapp-input" placeholder="Type a message" />
                <button class="whatsapp-send-btn">‚û§</button>
            </div>

            <h3 style="margin-top: 20px;">Chat List Item</h3>
            <div class="whatsapp-chat-item">
                <div class="whatsapp-avatar">RK</div>
                <div class="whatsapp-chat-info">
                    <div class="whatsapp-chat-name">Rahul Kumar</div>
                    <div class="whatsapp-chat-message">Last message preview...</div>
                </div>
                <div class="whatsapp-chat-meta">
                    <div class="whatsapp-chat-time">10:30 AM</div>
                    <div class="whatsapp-unread-badge">3</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Verification Results</h2>
            <div id="results"></div>
        </div>
    </div>

    <script>
        function updateStatus() {
            const htmlTheme = document.documentElement.getAttribute('data-theme') || 'not set';
            const bodyClass = document.body.className || 'not set';
            const storageTheme = localStorage.getItem('theme') || 'not set';
            
            document.getElementById('html-theme').textContent = htmlTheme;
            document.getElementById('body-class').textContent = bodyClass;
            document.getElementById('storage-theme').textContent = storageTheme;
            document.getElementById('current-theme').textContent = htmlTheme;
            
            runVerification();
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            // Set data-theme attribute
            document.documentElement.setAttribute('data-theme', newTheme);
            
            // Set body class
            if (newTheme === 'dark') {
                document.body.classList.add('dark-mode');
                document.body.classList.remove('light-mode');
            } else {
                document.body.classList.add('light-mode');
                document.body.classList.remove('dark-mode');
            }
            
            // Save to localStorage
            localStorage.setItem('theme', newTheme);
            
            updateStatus();
        }

        function runVerification() {
            const results = [];
            const theme = document.documentElement.getAttribute('data-theme') || 'light';
            
            // Check if data-theme is set
            if (document.documentElement.hasAttribute('data-theme')) {
                results.push('<div class="success">‚úÖ data-theme attribute is set</div>');
            } else {
                results.push('<div class="error">‚ùå data-theme attribute is NOT set</div>');
            }
            
            // Check if body class is set
            if (document.body.classList.contains('dark-mode') || document.body.classList.contains('light-mode')) {
                results.push('<div class="success">‚úÖ Body class is set correctly</div>');
            } else {
                results.push('<div class="error">‚ùå Body class is NOT set</div>');
            }
            
            // Check if localStorage is synced
            if (localStorage.getItem('theme') === theme) {
                results.push('<div class="success">‚úÖ LocalStorage is synced</div>');
            } else {
                results.push('<div class="error">‚ùå LocalStorage is NOT synced</div>');
            }
            
            // Check CSS variables
            const styles = getComputedStyle(document.documentElement);
            const bgApp = styles.getPropertyValue('--wa-bg-app').trim();
            
            if (bgApp) {
                results.push('<div class="success">‚úÖ CSS variables are loaded</div>');
                results.push(`<div>Current --wa-bg-app: <strong>${bgApp}</strong></div>`);
            } else {
                results.push('<div class="error">‚ùå CSS variables are NOT loaded</div>');
            }
            
            // Expected colors
            const expectedColors = theme === 'dark' 
                ? { bg: '#111B21', text: '#E9EDEF', header: '#202C33' }
                : { bg: '#FFFFFF', text: '#111B21', header: '#008069' };
            
            results.push(`<div style="margin-top: 10px;"><strong>Expected Colors for ${theme} mode:</strong></div>`);
            results.push(`<div>Background: ${expectedColors.bg}</div>`);
            results.push(`<div>Text: ${expectedColors.text}</div>`);
            results.push(`<div>Header: ${expectedColors.header}</div>`);
            
            document.getElementById('results').innerHTML = results.join('');
        }

        // Initialize on load
        window.addEventListener('load', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.add('light-mode');
            }
            
            updateStatus();
        });
    </script>
</body>
</html>
